// ../node_modules/@xterm/xterm/lib/xterm.mjs
var zs = Object.defineProperty;
var Rl = Object.getOwnPropertyDescriptor;
var Ll = (s15, t) => {
  for (var e in t) zs(s15, e, { get: t[e], enumerable: true });
};
var M = (s15, t, e, i) => {
  for (var r = i > 1 ? void 0 : i ? Rl(t, e) : t, n = s15.length - 1, o2; n >= 0; n--) (o2 = s15[n]) && (r = (i ? o2(t, e, r) : o2(r)) || r);
  return i && r && zs(t, e, r), r;
};
var S = (s15, t) => (e, i) => t(e, i, s15);
var Gs = "Terminal input";
var mi = { get: () => Gs, set: (s15) => Gs = s15 };
var $s = "Too much output to announce, navigate to rows manually to read";
var _i = { get: () => $s, set: (s15) => $s = s15 };
function Al(s15) {
  return s15.replace(/\r?\n/g, "\r");
}
function kl(s15, t) {
  return t ? "\x1B[200~" + s15 + "\x1B[201~" : s15;
}
function Vs(s15, t) {
  s15.clipboardData && s15.clipboardData.setData("text/plain", t.selectionText), s15.preventDefault();
}
function qs(s15, t, e, i) {
  if (s15.stopPropagation(), s15.clipboardData) {
    let r = s15.clipboardData.getData("text/plain");
    Cn(r, t, e, i);
  }
}
function Cn(s15, t, e, i) {
  s15 = Al(s15), s15 = kl(s15, e.decPrivateModes.bracketedPasteMode && i.rawOptions.ignoreBracketedPasteMode !== true), e.triggerDataEvent(s15, true), t.value = "";
}
function Mn(s15, t, e) {
  let i = e.getBoundingClientRect(), r = s15.clientX - i.left - 10, n = s15.clientY - i.top - 10;
  t.style.width = "20px", t.style.height = "20px", t.style.left = `${r}px`, t.style.top = `${n}px`, t.style.zIndex = "1000", t.focus();
}
function Pn(s15, t, e, i, r) {
  Mn(s15, t, e), r && i.rightClickSelect(s15), t.value = i.selectionText, t.select();
}
function Ce(s15) {
  return s15 > 65535 ? (s15 -= 65536, String.fromCharCode((s15 >> 10) + 55296) + String.fromCharCode(s15 % 1024 + 56320)) : String.fromCharCode(s15);
}
function It(s15, t = 0, e = s15.length) {
  let i = "";
  for (let r = t; r < e; ++r) {
    let n = s15[r];
    n > 65535 ? (n -= 65536, i += String.fromCharCode((n >> 10) + 55296) + String.fromCharCode(n % 1024 + 56320)) : i += String.fromCharCode(n);
  }
  return i;
}
var er = class {
  constructor() {
    this._interim = 0;
  }
  clear() {
    this._interim = 0;
  }
  decode(t, e) {
    let i = t.length;
    if (!i) return 0;
    let r = 0, n = 0;
    if (this._interim) {
      let o2 = t.charCodeAt(n++);
      56320 <= o2 && o2 <= 57343 ? e[r++] = (this._interim - 55296) * 1024 + o2 - 56320 + 65536 : (e[r++] = this._interim, e[r++] = o2), this._interim = 0;
    }
    for (let o2 = n; o2 < i; ++o2) {
      let l = t.charCodeAt(o2);
      if (55296 <= l && l <= 56319) {
        if (++o2 >= i) return this._interim = l, r;
        let a = t.charCodeAt(o2);
        56320 <= a && a <= 57343 ? e[r++] = (l - 55296) * 1024 + a - 56320 + 65536 : (e[r++] = l, e[r++] = a);
        continue;
      }
      l !== 65279 && (e[r++] = l);
    }
    return r;
  }
};
var tr = class {
  constructor() {
    this.interim = new Uint8Array(3);
  }
  clear() {
    this.interim.fill(0);
  }
  decode(t, e) {
    let i = t.length;
    if (!i) return 0;
    let r = 0, n, o2, l, a, u = 0, h2 = 0;
    if (this.interim[0]) {
      let _2 = false, p = this.interim[0];
      p &= (p & 224) === 192 ? 31 : (p & 240) === 224 ? 15 : 7;
      let m = 0, f;
      for (; (f = this.interim[++m] & 63) && m < 4; ) p <<= 6, p |= f;
      let A = (this.interim[0] & 224) === 192 ? 2 : (this.interim[0] & 240) === 224 ? 3 : 4, R = A - m;
      for (; h2 < R; ) {
        if (h2 >= i) return 0;
        if (f = t[h2++], (f & 192) !== 128) {
          h2--, _2 = true;
          break;
        } else this.interim[m++] = f, p <<= 6, p |= f & 63;
      }
      _2 || (A === 2 ? p < 128 ? h2-- : e[r++] = p : A === 3 ? p < 2048 || p >= 55296 && p <= 57343 || p === 65279 || (e[r++] = p) : p < 65536 || p > 1114111 || (e[r++] = p)), this.interim.fill(0);
    }
    let c = i - 4, d = h2;
    for (; d < i; ) {
      for (; d < c && !((n = t[d]) & 128) && !((o2 = t[d + 1]) & 128) && !((l = t[d + 2]) & 128) && !((a = t[d + 3]) & 128); ) e[r++] = n, e[r++] = o2, e[r++] = l, e[r++] = a, d += 4;
      if (n = t[d++], n < 128) e[r++] = n;
      else if ((n & 224) === 192) {
        if (d >= i) return this.interim[0] = n, r;
        if (o2 = t[d++], (o2 & 192) !== 128) {
          d--;
          continue;
        }
        if (u = (n & 31) << 6 | o2 & 63, u < 128) {
          d--;
          continue;
        }
        e[r++] = u;
      } else if ((n & 240) === 224) {
        if (d >= i) return this.interim[0] = n, r;
        if (o2 = t[d++], (o2 & 192) !== 128) {
          d--;
          continue;
        }
        if (d >= i) return this.interim[0] = n, this.interim[1] = o2, r;
        if (l = t[d++], (l & 192) !== 128) {
          d--;
          continue;
        }
        if (u = (n & 15) << 12 | (o2 & 63) << 6 | l & 63, u < 2048 || u >= 55296 && u <= 57343 || u === 65279) continue;
        e[r++] = u;
      } else if ((n & 248) === 240) {
        if (d >= i) return this.interim[0] = n, r;
        if (o2 = t[d++], (o2 & 192) !== 128) {
          d--;
          continue;
        }
        if (d >= i) return this.interim[0] = n, this.interim[1] = o2, r;
        if (l = t[d++], (l & 192) !== 128) {
          d--;
          continue;
        }
        if (d >= i) return this.interim[0] = n, this.interim[1] = o2, this.interim[2] = l, r;
        if (a = t[d++], (a & 192) !== 128) {
          d--;
          continue;
        }
        if (u = (n & 7) << 18 | (o2 & 63) << 12 | (l & 63) << 6 | a & 63, u < 65536 || u > 1114111) continue;
        e[r++] = u;
      }
    }
    return r;
  }
};
var ir = "";
var we = " ";
var De = class s {
  constructor() {
    this.fg = 0;
    this.bg = 0;
    this.extended = new rt();
  }
  static toColorRGB(t) {
    return [t >>> 16 & 255, t >>> 8 & 255, t & 255];
  }
  static fromColorRGB(t) {
    return (t[0] & 255) << 16 | (t[1] & 255) << 8 | t[2] & 255;
  }
  clone() {
    let t = new s();
    return t.fg = this.fg, t.bg = this.bg, t.extended = this.extended.clone(), t;
  }
  isInverse() {
    return this.fg & 67108864;
  }
  isBold() {
    return this.fg & 134217728;
  }
  isUnderline() {
    return this.hasExtendedAttrs() && this.extended.underlineStyle !== 0 ? 1 : this.fg & 268435456;
  }
  isBlink() {
    return this.fg & 536870912;
  }
  isInvisible() {
    return this.fg & 1073741824;
  }
  isItalic() {
    return this.bg & 67108864;
  }
  isDim() {
    return this.bg & 134217728;
  }
  isStrikethrough() {
    return this.fg & 2147483648;
  }
  isProtected() {
    return this.bg & 536870912;
  }
  isOverline() {
    return this.bg & 1073741824;
  }
  getFgColorMode() {
    return this.fg & 50331648;
  }
  getBgColorMode() {
    return this.bg & 50331648;
  }
  isFgRGB() {
    return (this.fg & 50331648) === 50331648;
  }
  isBgRGB() {
    return (this.bg & 50331648) === 50331648;
  }
  isFgPalette() {
    return (this.fg & 50331648) === 16777216 || (this.fg & 50331648) === 33554432;
  }
  isBgPalette() {
    return (this.bg & 50331648) === 16777216 || (this.bg & 50331648) === 33554432;
  }
  isFgDefault() {
    return (this.fg & 50331648) === 0;
  }
  isBgDefault() {
    return (this.bg & 50331648) === 0;
  }
  isAttributeDefault() {
    return this.fg === 0 && this.bg === 0;
  }
  getFgColor() {
    switch (this.fg & 50331648) {
      case 16777216:
      case 33554432:
        return this.fg & 255;
      case 50331648:
        return this.fg & 16777215;
      default:
        return -1;
    }
  }
  getBgColor() {
    switch (this.bg & 50331648) {
      case 16777216:
      case 33554432:
        return this.bg & 255;
      case 50331648:
        return this.bg & 16777215;
      default:
        return -1;
    }
  }
  hasExtendedAttrs() {
    return this.bg & 268435456;
  }
  updateExtended() {
    this.extended.isEmpty() ? this.bg &= -268435457 : this.bg |= 268435456;
  }
  getUnderlineColor() {
    if (this.bg & 268435456 && ~this.extended.underlineColor) switch (this.extended.underlineColor & 50331648) {
      case 16777216:
      case 33554432:
        return this.extended.underlineColor & 255;
      case 50331648:
        return this.extended.underlineColor & 16777215;
      default:
        return this.getFgColor();
    }
    return this.getFgColor();
  }
  getUnderlineColorMode() {
    return this.bg & 268435456 && ~this.extended.underlineColor ? this.extended.underlineColor & 50331648 : this.getFgColorMode();
  }
  isUnderlineColorRGB() {
    return this.bg & 268435456 && ~this.extended.underlineColor ? (this.extended.underlineColor & 50331648) === 50331648 : this.isFgRGB();
  }
  isUnderlineColorPalette() {
    return this.bg & 268435456 && ~this.extended.underlineColor ? (this.extended.underlineColor & 50331648) === 16777216 || (this.extended.underlineColor & 50331648) === 33554432 : this.isFgPalette();
  }
  isUnderlineColorDefault() {
    return this.bg & 268435456 && ~this.extended.underlineColor ? (this.extended.underlineColor & 50331648) === 0 : this.isFgDefault();
  }
  getUnderlineStyle() {
    return this.fg & 268435456 ? this.bg & 268435456 ? this.extended.underlineStyle : 1 : 0;
  }
  getUnderlineVariantOffset() {
    return this.extended.underlineVariantOffset;
  }
};
var rt = class s2 {
  constructor(t = 0, e = 0) {
    this._ext = 0;
    this._urlId = 0;
    this._ext = t, this._urlId = e;
  }
  get ext() {
    return this._urlId ? this._ext & -469762049 | this.underlineStyle << 26 : this._ext;
  }
  set ext(t) {
    this._ext = t;
  }
  get underlineStyle() {
    return this._urlId ? 5 : (this._ext & 469762048) >> 26;
  }
  set underlineStyle(t) {
    this._ext &= -469762049, this._ext |= t << 26 & 469762048;
  }
  get underlineColor() {
    return this._ext & 67108863;
  }
  set underlineColor(t) {
    this._ext &= -67108864, this._ext |= t & 67108863;
  }
  get urlId() {
    return this._urlId;
  }
  set urlId(t) {
    this._urlId = t;
  }
  get underlineVariantOffset() {
    let t = (this._ext & 3758096384) >> 29;
    return t < 0 ? t ^ 4294967288 : t;
  }
  set underlineVariantOffset(t) {
    this._ext &= 536870911, this._ext |= t << 29 & 3758096384;
  }
  clone() {
    return new s2(this._ext, this._urlId);
  }
  isEmpty() {
    return this.underlineStyle === 0 && this._urlId === 0;
  }
};
var q = class s3 extends De {
  constructor() {
    super(...arguments);
    this.content = 0;
    this.fg = 0;
    this.bg = 0;
    this.extended = new rt();
    this.combinedData = "";
  }
  static fromCharData(e) {
    let i = new s3();
    return i.setFromCharData(e), i;
  }
  isCombined() {
    return this.content & 2097152;
  }
  getWidth() {
    return this.content >> 22;
  }
  getChars() {
    return this.content & 2097152 ? this.combinedData : this.content & 2097151 ? Ce(this.content & 2097151) : "";
  }
  getCode() {
    return this.isCombined() ? this.combinedData.charCodeAt(this.combinedData.length - 1) : this.content & 2097151;
  }
  setFromCharData(e) {
    this.fg = e[0], this.bg = 0;
    let i = false;
    if (e[1].length > 2) i = true;
    else if (e[1].length === 2) {
      let r = e[1].charCodeAt(0);
      if (55296 <= r && r <= 56319) {
        let n = e[1].charCodeAt(1);
        56320 <= n && n <= 57343 ? this.content = (r - 55296) * 1024 + n - 56320 + 65536 | e[2] << 22 : i = true;
      } else i = true;
    } else this.content = e[1].charCodeAt(0) | e[2] << 22;
    i && (this.combinedData = e[1], this.content = 2097152 | e[2] << 22);
  }
  getAsCharData() {
    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
  }
};
var js = "di$target";
var Hn = "di$dependencies";
var Fn = /* @__PURE__ */ new Map();
function Xs(s15) {
  return s15[Hn] || [];
}
function ie(s15) {
  if (Fn.has(s15)) return Fn.get(s15);
  let t = function(e, i, r) {
    if (arguments.length !== 3) throw new Error("@IServiceName-decorator can only be used to decorate a parameter");
    Pl(t, e, r);
  };
  return t._id = s15, Fn.set(s15, t), t;
}
function Pl(s15, t, e) {
  t[js] === t ? t[Hn].push({ id: s15, index: e }) : (t[Hn] = [{ id: s15, index: e }], t[js] = t);
}
var F = ie("BufferService");
var rr = ie("CoreMouseService");
var ge = ie("CoreService");
var Zs = ie("CharsetService");
var xt = ie("InstantiationService");
var nr = ie("LogService");
var H = ie("OptionsService");
var sr = ie("OscLinkService");
var Js = ie("UnicodeService");
var Be = ie("DecorationService");
var wt = class {
  constructor(t, e, i) {
    this._bufferService = t;
    this._optionsService = e;
    this._oscLinkService = i;
  }
  provideLinks(t, e) {
    let i = this._bufferService.buffer.lines.get(t - 1);
    if (!i) {
      e(void 0);
      return;
    }
    let r = [], n = this._optionsService.rawOptions.linkHandler, o2 = new q(), l = i.getTrimmedLength(), a = -1, u = -1, h2 = false;
    for (let c = 0; c < l; c++) if (!(u === -1 && !i.hasContent(c))) {
      if (i.loadCell(c, o2), o2.hasExtendedAttrs() && o2.extended.urlId) if (u === -1) {
        u = c, a = o2.extended.urlId;
        continue;
      } else h2 = o2.extended.urlId !== a;
      else u !== -1 && (h2 = true);
      if (h2 || u !== -1 && c === l - 1) {
        let d = this._oscLinkService.getLinkData(a)?.uri;
        if (d) {
          let _2 = { start: { x: u + 1, y: t }, end: { x: c + (!h2 && c === l - 1 ? 1 : 0), y: t } }, p = false;
          if (!n?.allowNonHttpProtocols) try {
            let m = new URL(d);
            ["http:", "https:"].includes(m.protocol) || (p = true);
          } catch {
            p = true;
          }
          p || r.push({ text: d, range: _2, activate: (m, f) => n ? n.activate(m, f, _2) : Ol(m, f), hover: (m, f) => n?.hover?.(m, f, _2), leave: (m, f) => n?.leave?.(m, f, _2) });
        }
        h2 = false, o2.hasExtendedAttrs() && o2.extended.urlId ? (u = c, a = o2.extended.urlId) : (u = -1, a = -1);
      }
    }
    e(r);
  }
};
wt = M([S(0, F), S(1, H), S(2, sr)], wt);
function Ol(s15, t) {
  if (confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)) {
    let i = window.open();
    if (i) {
      try {
        i.opener = null;
      } catch {
      }
      i.location.href = t;
    } else console.warn("Opening link blocked as opener could not be cleared");
  }
}
var nt = ie("CharSizeService");
var ae = ie("CoreBrowserService");
var Dt = ie("MouseService");
var ce = ie("RenderService");
var Qs = ie("SelectionService");
var or = ie("CharacterJoinerService");
var Re = ie("ThemeService");
var lr = ie("LinkProviderService");
var Wn = class {
  constructor() {
    this.listeners = [], this.unexpectedErrorHandler = function(t) {
      setTimeout(() => {
        throw t.stack ? ar.isErrorNoTelemetry(t) ? new ar(t.message + `

` + t.stack) : new Error(t.message + `

` + t.stack) : t;
      }, 0);
    };
  }
  addListener(t) {
    return this.listeners.push(t), () => {
      this._removeListener(t);
    };
  }
  emit(t) {
    this.listeners.forEach((e) => {
      e(t);
    });
  }
  _removeListener(t) {
    this.listeners.splice(this.listeners.indexOf(t), 1);
  }
  setUnexpectedErrorHandler(t) {
    this.unexpectedErrorHandler = t;
  }
  getUnexpectedErrorHandler() {
    return this.unexpectedErrorHandler;
  }
  onUnexpectedError(t) {
    this.unexpectedErrorHandler(t), this.emit(t);
  }
  onUnexpectedExternalError(t) {
    this.unexpectedErrorHandler(t);
  }
};
var Bl = new Wn();
function Lt(s15) {
  Nl(s15) || Bl.onUnexpectedError(s15);
}
var Un = "Canceled";
function Nl(s15) {
  return s15 instanceof bi ? true : s15 instanceof Error && s15.name === Un && s15.message === Un;
}
var bi = class extends Error {
  constructor() {
    super(Un), this.name = this.message;
  }
};
function eo(s15) {
  return s15 ? new Error(`Illegal argument: ${s15}`) : new Error("Illegal argument");
}
var ar = class s4 extends Error {
  constructor(t) {
    super(t), this.name = "CodeExpectedError";
  }
  static fromError(t) {
    if (t instanceof s4) return t;
    let e = new s4();
    return e.message = t.message, e.stack = t.stack, e;
  }
  static isErrorNoTelemetry(t) {
    return t.name === "CodeExpectedError";
  }
};
var Rt = class s5 extends Error {
  constructor(t) {
    super(t || "An unexpected bug occurred."), Object.setPrototypeOf(this, s5.prototype);
  }
};
function Fl(s15, t, e = 0, i = s15.length) {
  let r = e, n = i;
  for (; r < n; ) {
    let o2 = Math.floor((r + n) / 2);
    t(s15[o2]) ? r = o2 + 1 : n = o2;
  }
  return r - 1;
}
var cr = class cr2 {
  constructor(t) {
    this._array = t;
    this._findLastMonotonousLastIdx = 0;
  }
  findLastMonotonous(t) {
    if (cr2.assertInvariants) {
      if (this._prevFindLastPredicate) {
        for (let i of this._array) if (this._prevFindLastPredicate(i) && !t(i)) throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.");
      }
      this._prevFindLastPredicate = t;
    }
    let e = Fl(this._array, t, this._findLastMonotonousLastIdx);
    return this._findLastMonotonousLastIdx = e + 1, e === -1 ? void 0 : this._array[e];
  }
};
cr.assertInvariants = false;
function Se(s15, t = 0) {
  return s15[s15.length - (1 + t)];
}
var ro;
((l) => {
  function s15(a) {
    return a < 0;
  }
  l.isLessThan = s15;
  function t(a) {
    return a <= 0;
  }
  l.isLessThanOrEqual = t;
  function e(a) {
    return a > 0;
  }
  l.isGreaterThan = e;
  function i(a) {
    return a === 0;
  }
  l.isNeitherLessOrGreaterThan = i, l.greaterThan = 1, l.lessThan = -1, l.neitherLessOrGreaterThan = 0;
})(ro ||= {});
function no(s15, t) {
  return (e, i) => t(s15(e), s15(i));
}
var so = (s15, t) => s15 - t;
var At = class At2 {
  constructor(t) {
    this.iterate = t;
  }
  forEach(t) {
    this.iterate((e) => (t(e), true));
  }
  toArray() {
    let t = [];
    return this.iterate((e) => (t.push(e), true)), t;
  }
  filter(t) {
    return new At2((e) => this.iterate((i) => t(i) ? e(i) : true));
  }
  map(t) {
    return new At2((e) => this.iterate((i) => e(t(i))));
  }
  some(t) {
    let e = false;
    return this.iterate((i) => (e = t(i), !e)), e;
  }
  findFirst(t) {
    let e;
    return this.iterate((i) => t(i) ? (e = i, false) : true), e;
  }
  findLast(t) {
    let e;
    return this.iterate((i) => (t(i) && (e = i), true)), e;
  }
  findLastMaxBy(t) {
    let e, i = true;
    return this.iterate((r) => ((i || ro.isGreaterThan(t(r, e))) && (i = false, e = r), true)), e;
  }
};
At.empty = new At((t) => {
});
function co(s15, t) {
  let e = /* @__PURE__ */ Object.create(null);
  for (let i of s15) {
    let r = t(i), n = e[r];
    n || (n = e[r] = []), n.push(i);
  }
  return e;
}
var lo;
var ao;
var oo = class {
  constructor(t, e) {
    this.toKey = e;
    this._map = /* @__PURE__ */ new Map();
    this[lo] = "SetWithKey";
    for (let i of t) this.add(i);
  }
  get size() {
    return this._map.size;
  }
  add(t) {
    let e = this.toKey(t);
    return this._map.set(e, t), this;
  }
  delete(t) {
    return this._map.delete(this.toKey(t));
  }
  has(t) {
    return this._map.has(this.toKey(t));
  }
  *entries() {
    for (let t of this._map.values()) yield [t, t];
  }
  keys() {
    return this.values();
  }
  *values() {
    for (let t of this._map.values()) yield t;
  }
  clear() {
    this._map.clear();
  }
  forEach(t, e) {
    this._map.forEach((i) => t.call(e, i, i, this));
  }
  [(ao = Symbol.iterator, lo = Symbol.toStringTag, ao)]() {
    return this.values();
  }
};
var ur = class {
  constructor() {
    this.map = /* @__PURE__ */ new Map();
  }
  add(t, e) {
    let i = this.map.get(t);
    i || (i = /* @__PURE__ */ new Set(), this.map.set(t, i)), i.add(e);
  }
  delete(t, e) {
    let i = this.map.get(t);
    i && (i.delete(e), i.size === 0 && this.map.delete(t));
  }
  forEach(t, e) {
    let i = this.map.get(t);
    i && i.forEach(e);
  }
  get(t) {
    let e = this.map.get(t);
    return e || /* @__PURE__ */ new Set();
  }
};
function Kn(s15, t) {
  let e = this, i = false, r;
  return function() {
    if (i) return r;
    if (i = true, t) try {
      r = s15.apply(e, arguments);
    } finally {
      t();
    }
    else r = s15.apply(e, arguments);
    return r;
  };
}
var zn;
((O) => {
  function s15(I) {
    return I && typeof I == "object" && typeof I[Symbol.iterator] == "function";
  }
  O.is = s15;
  let t = Object.freeze([]);
  function e() {
    return t;
  }
  O.empty = e;
  function* i(I) {
    yield I;
  }
  O.single = i;
  function r(I) {
    return s15(I) ? I : i(I);
  }
  O.wrap = r;
  function n(I) {
    return I || t;
  }
  O.from = n;
  function* o2(I) {
    for (let k = I.length - 1; k >= 0; k--) yield I[k];
  }
  O.reverse = o2;
  function l(I) {
    return !I || I[Symbol.iterator]().next().done === true;
  }
  O.isEmpty = l;
  function a(I) {
    return I[Symbol.iterator]().next().value;
  }
  O.first = a;
  function u(I, k) {
    let P = 0;
    for (let oe of I) if (k(oe, P++)) return true;
    return false;
  }
  O.some = u;
  function h2(I, k) {
    for (let P of I) if (k(P)) return P;
  }
  O.find = h2;
  function* c(I, k) {
    for (let P of I) k(P) && (yield P);
  }
  O.filter = c;
  function* d(I, k) {
    let P = 0;
    for (let oe of I) yield k(oe, P++);
  }
  O.map = d;
  function* _2(I, k) {
    let P = 0;
    for (let oe of I) yield* k(oe, P++);
  }
  O.flatMap = _2;
  function* p(...I) {
    for (let k of I) yield* k;
  }
  O.concat = p;
  function m(I, k, P) {
    let oe = P;
    for (let Me of I) oe = k(oe, Me);
    return oe;
  }
  O.reduce = m;
  function* f(I, k, P = I.length) {
    for (k < 0 && (k += I.length), P < 0 ? P += I.length : P > I.length && (P = I.length); k < P; k++) yield I[k];
  }
  O.slice = f;
  function A(I, k = Number.POSITIVE_INFINITY) {
    let P = [];
    if (k === 0) return [P, I];
    let oe = I[Symbol.iterator]();
    for (let Me = 0; Me < k; Me++) {
      let Pe = oe.next();
      if (Pe.done) return [P, O.empty()];
      P.push(Pe.value);
    }
    return [P, { [Symbol.iterator]() {
      return oe;
    } }];
  }
  O.consume = A;
  async function R(I) {
    let k = [];
    for await (let P of I) k.push(P);
    return Promise.resolve(k);
  }
  O.asyncToArray = R;
})(zn ||= {});
var Wl = false;
var dt = null;
var hr = class hr2 {
  constructor() {
    this.livingDisposables = /* @__PURE__ */ new Map();
  }
  getDisposableData(t) {
    let e = this.livingDisposables.get(t);
    return e || (e = { parent: null, source: null, isSingleton: false, value: t, idx: hr2.idx++ }, this.livingDisposables.set(t, e)), e;
  }
  trackDisposable(t) {
    let e = this.getDisposableData(t);
    e.source || (e.source = new Error().stack);
  }
  setParent(t, e) {
    let i = this.getDisposableData(t);
    i.parent = e;
  }
  markAsDisposed(t) {
    this.livingDisposables.delete(t);
  }
  markAsSingleton(t) {
    this.getDisposableData(t).isSingleton = true;
  }
  getRootParent(t, e) {
    let i = e.get(t);
    if (i) return i;
    let r = t.parent ? this.getRootParent(this.getDisposableData(t.parent), e) : t;
    return e.set(t, r), r;
  }
  getTrackedDisposables() {
    let t = /* @__PURE__ */ new Map();
    return [...this.livingDisposables.entries()].filter(([, i]) => i.source !== null && !this.getRootParent(i, t).isSingleton).flatMap(([i]) => i);
  }
  computeLeakingDisposables(t = 10, e) {
    let i;
    if (e) i = e;
    else {
      let a = /* @__PURE__ */ new Map(), u = [...this.livingDisposables.values()].filter((c) => c.source !== null && !this.getRootParent(c, a).isSingleton);
      if (u.length === 0) return;
      let h2 = new Set(u.map((c) => c.value));
      if (i = u.filter((c) => !(c.parent && h2.has(c.parent))), i.length === 0) throw new Error("There are cyclic diposable chains!");
    }
    if (!i) return;
    function r(a) {
      function u(c, d) {
        for (; c.length > 0 && d.some((_2) => typeof _2 == "string" ? _2 === c[0] : c[0].match(_2)); ) c.shift();
      }
      let h2 = a.source.split(`
`).map((c) => c.trim().replace("at ", "")).filter((c) => c !== "");
      return u(h2, ["Error", /^trackDisposable \(.*\)$/, /^DisposableTracker.trackDisposable \(.*\)$/]), h2.reverse();
    }
    let n = new ur();
    for (let a of i) {
      let u = r(a);
      for (let h2 = 0; h2 <= u.length; h2++) n.add(u.slice(0, h2).join(`
`), a);
    }
    i.sort(no((a) => a.idx, so));
    let o2 = "", l = 0;
    for (let a of i.slice(0, t)) {
      l++;
      let u = r(a), h2 = [];
      for (let c = 0; c < u.length; c++) {
        let d = u[c];
        d = `(shared with ${n.get(u.slice(0, c + 1).join(`
`)).size}/${i.length} leaks) at ${d}`;
        let p = n.get(u.slice(0, c).join(`
`)), m = co([...p].map((f) => r(f)[c]), (f) => f);
        delete m[u[c]];
        for (let [f, A] of Object.entries(m)) h2.unshift(`    - stacktraces of ${A.length} other leaks continue with ${f}`);
        h2.unshift(d);
      }
      o2 += `


==================== Leaking disposable ${l}/${i.length}: ${a.value.constructor.name} ====================
${h2.join(`
`)}
============================================================

`;
    }
    return i.length > t && (o2 += `


... and ${i.length - t} more leaking disposables

`), { leaks: i, details: o2 };
  }
};
hr.idx = 0;
function Ul(s15) {
  dt = s15;
}
if (Wl) {
  let s15 = "__is_disposable_tracked__";
  Ul(new class {
    trackDisposable(t) {
      let e = new Error("Potentially leaked disposable").stack;
      setTimeout(() => {
        t[s15] || console.log(e);
      }, 3e3);
    }
    setParent(t, e) {
      if (t && t !== D.None) try {
        t[s15] = true;
      } catch {
      }
    }
    markAsDisposed(t) {
      if (t && t !== D.None) try {
        t[s15] = true;
      } catch {
      }
    }
    markAsSingleton(t) {
    }
  }());
}
function fr(s15) {
  return dt?.trackDisposable(s15), s15;
}
function pr(s15) {
  dt?.markAsDisposed(s15);
}
function vi(s15, t) {
  dt?.setParent(s15, t);
}
function Kl(s15, t) {
  if (dt) for (let e of s15) dt.setParent(e, t);
}
function Gn(s15) {
  return dt?.markAsSingleton(s15), s15;
}
function Ne(s15) {
  if (zn.is(s15)) {
    let t = [];
    for (let e of s15) if (e) try {
      e.dispose();
    } catch (i) {
      t.push(i);
    }
    if (t.length === 1) throw t[0];
    if (t.length > 1) throw new AggregateError(t, "Encountered errors while disposing of store");
    return Array.isArray(s15) ? [] : s15;
  } else if (s15) return s15.dispose(), s15;
}
function ho(...s15) {
  let t = C(() => Ne(s15));
  return Kl(s15, t), t;
}
function C(s15) {
  let t = fr({ dispose: Kn(() => {
    pr(t), s15();
  }) });
  return t;
}
var dr = class dr2 {
  constructor() {
    this._toDispose = /* @__PURE__ */ new Set();
    this._isDisposed = false;
    fr(this);
  }
  dispose() {
    this._isDisposed || (pr(this), this._isDisposed = true, this.clear());
  }
  get isDisposed() {
    return this._isDisposed;
  }
  clear() {
    if (this._toDispose.size !== 0) try {
      Ne(this._toDispose);
    } finally {
      this._toDispose.clear();
    }
  }
  add(t) {
    if (!t) return t;
    if (t === this) throw new Error("Cannot register a disposable on itself!");
    return vi(t, this), this._isDisposed ? dr2.DISABLE_DISPOSED_WARNING || console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack) : this._toDispose.add(t), t;
  }
  delete(t) {
    if (t) {
      if (t === this) throw new Error("Cannot dispose a disposable on itself!");
      this._toDispose.delete(t), t.dispose();
    }
  }
  deleteAndLeak(t) {
    t && this._toDispose.has(t) && (this._toDispose.delete(t), vi(t, null));
  }
};
dr.DISABLE_DISPOSED_WARNING = false;
var Ee = dr;
var D = class {
  constructor() {
    this._store = new Ee();
    fr(this), vi(this._store, this);
  }
  dispose() {
    pr(this), this._store.dispose();
  }
  _register(t) {
    if (t === this) throw new Error("Cannot register a disposable on itself!");
    return this._store.add(t);
  }
};
D.None = Object.freeze({ dispose() {
} });
var ye = class {
  constructor() {
    this._isDisposed = false;
    fr(this);
  }
  get value() {
    return this._isDisposed ? void 0 : this._value;
  }
  set value(t) {
    this._isDisposed || t === this._value || (this._value?.dispose(), t && vi(t, this), this._value = t);
  }
  clear() {
    this.value = void 0;
  }
  dispose() {
    this._isDisposed = true, pr(this), this._value?.dispose(), this._value = void 0;
  }
  clearAndLeak() {
    let t = this._value;
    return this._value = void 0, t && vi(t, null), t;
  }
};
var fe = typeof window == "object" ? window : globalThis;
var kt = class kt2 {
  constructor(t) {
    this.element = t, this.next = kt2.Undefined, this.prev = kt2.Undefined;
  }
};
kt.Undefined = new kt(void 0);
var G = kt;
var Ct = class {
  constructor() {
    this._first = G.Undefined;
    this._last = G.Undefined;
    this._size = 0;
  }
  get size() {
    return this._size;
  }
  isEmpty() {
    return this._first === G.Undefined;
  }
  clear() {
    let t = this._first;
    for (; t !== G.Undefined; ) {
      let e = t.next;
      t.prev = G.Undefined, t.next = G.Undefined, t = e;
    }
    this._first = G.Undefined, this._last = G.Undefined, this._size = 0;
  }
  unshift(t) {
    return this._insert(t, false);
  }
  push(t) {
    return this._insert(t, true);
  }
  _insert(t, e) {
    let i = new G(t);
    if (this._first === G.Undefined) this._first = i, this._last = i;
    else if (e) {
      let n = this._last;
      this._last = i, i.prev = n, n.next = i;
    } else {
      let n = this._first;
      this._first = i, i.next = n, n.prev = i;
    }
    this._size += 1;
    let r = false;
    return () => {
      r || (r = true, this._remove(i));
    };
  }
  shift() {
    if (this._first !== G.Undefined) {
      let t = this._first.element;
      return this._remove(this._first), t;
    }
  }
  pop() {
    if (this._last !== G.Undefined) {
      let t = this._last.element;
      return this._remove(this._last), t;
    }
  }
  _remove(t) {
    if (t.prev !== G.Undefined && t.next !== G.Undefined) {
      let e = t.prev;
      e.next = t.next, t.next.prev = e;
    } else t.prev === G.Undefined && t.next === G.Undefined ? (this._first = G.Undefined, this._last = G.Undefined) : t.next === G.Undefined ? (this._last = this._last.prev, this._last.next = G.Undefined) : t.prev === G.Undefined && (this._first = this._first.next, this._first.prev = G.Undefined);
    this._size -= 1;
  }
  *[Symbol.iterator]() {
    let t = this._first;
    for (; t !== G.Undefined; ) yield t.element, t = t.next;
  }
};
var zl = globalThis.performance && typeof globalThis.performance.now == "function";
var mr = class s6 {
  static create(t) {
    return new s6(t);
  }
  constructor(t) {
    this._now = zl && t === false ? Date.now : globalThis.performance.now.bind(globalThis.performance), this._startTime = this._now(), this._stopTime = -1;
  }
  stop() {
    this._stopTime = this._now();
  }
  reset() {
    this._startTime = this._now(), this._stopTime = -1;
  }
  elapsed() {
    return this._stopTime !== -1 ? this._stopTime - this._startTime : this._now() - this._startTime;
  }
};
var Gl = false;
var fo = false;
var $l = false;
var $;
((Qe) => {
  Qe.None = () => D.None;
  function t(y) {
    if ($l) {
      let { onDidAddListener: T } = y, g = gi.create(), w = 0;
      y.onDidAddListener = () => {
        ++w === 2 && (console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"), g.print()), T?.();
      };
    }
  }
  function e(y, T) {
    return d(y, () => {
    }, 0, void 0, true, void 0, T);
  }
  Qe.defer = e;
  function i(y) {
    return (T, g = null, w) => {
      let E = false, x;
      return x = y((N) => {
        if (!E) return x ? x.dispose() : E = true, T.call(g, N);
      }, null, w), E && x.dispose(), x;
    };
  }
  Qe.once = i;
  function r(y, T, g) {
    return h2((w, E = null, x) => y((N) => w.call(E, T(N)), null, x), g);
  }
  Qe.map = r;
  function n(y, T, g) {
    return h2((w, E = null, x) => y((N) => {
      T(N), w.call(E, N);
    }, null, x), g);
  }
  Qe.forEach = n;
  function o2(y, T, g) {
    return h2((w, E = null, x) => y((N) => T(N) && w.call(E, N), null, x), g);
  }
  Qe.filter = o2;
  function l(y) {
    return y;
  }
  Qe.signal = l;
  function a(...y) {
    return (T, g = null, w) => {
      let E = ho(...y.map((x) => x((N) => T.call(g, N))));
      return c(E, w);
    };
  }
  Qe.any = a;
  function u(y, T, g, w) {
    let E = g;
    return r(y, (x) => (E = T(E, x), E), w);
  }
  Qe.reduce = u;
  function h2(y, T) {
    let g, w = { onWillAddFirstListener() {
      g = y(E.fire, E);
    }, onDidRemoveLastListener() {
      g?.dispose();
    } };
    T || t(w);
    let E = new v(w);
    return T?.add(E), E.event;
  }
  function c(y, T) {
    return T instanceof Array ? T.push(y) : T && T.add(y), y;
  }
  function d(y, T, g = 100, w = false, E = false, x, N) {
    let Z, te, Oe, ze = 0, le, et = { leakWarningThreshold: x, onWillAddFirstListener() {
      Z = y((ht) => {
        ze++, te = T(te, ht), w && !Oe && (me.fire(te), te = void 0), le = () => {
          let fi = te;
          te = void 0, Oe = void 0, (!w || ze > 1) && me.fire(fi), ze = 0;
        }, typeof g == "number" ? (clearTimeout(Oe), Oe = setTimeout(le, g)) : Oe === void 0 && (Oe = 0, queueMicrotask(le));
      });
    }, onWillRemoveListener() {
      E && ze > 0 && le?.();
    }, onDidRemoveLastListener() {
      le = void 0, Z.dispose();
    } };
    N || t(et);
    let me = new v(et);
    return N?.add(me), me.event;
  }
  Qe.debounce = d;
  function _2(y, T = 0, g) {
    return Qe.debounce(y, (w, E) => w ? (w.push(E), w) : [E], T, void 0, true, void 0, g);
  }
  Qe.accumulate = _2;
  function p(y, T = (w, E) => w === E, g) {
    let w = true, E;
    return o2(y, (x) => {
      let N = w || !T(x, E);
      return w = false, E = x, N;
    }, g);
  }
  Qe.latch = p;
  function m(y, T, g) {
    return [Qe.filter(y, T, g), Qe.filter(y, (w) => !T(w), g)];
  }
  Qe.split = m;
  function f(y, T = false, g = [], w) {
    let E = g.slice(), x = y((te) => {
      E ? E.push(te) : Z.fire(te);
    });
    w && w.add(x);
    let N = () => {
      E?.forEach((te) => Z.fire(te)), E = null;
    }, Z = new v({ onWillAddFirstListener() {
      x || (x = y((te) => Z.fire(te)), w && w.add(x));
    }, onDidAddFirstListener() {
      E && (T ? setTimeout(N) : N());
    }, onDidRemoveLastListener() {
      x && x.dispose(), x = null;
    } });
    return w && w.add(Z), Z.event;
  }
  Qe.buffer = f;
  function A(y, T) {
    return (w, E, x) => {
      let N = T(new O());
      return y(function(Z) {
        let te = N.evaluate(Z);
        te !== R && w.call(E, te);
      }, void 0, x);
    };
  }
  Qe.chain = A;
  let R = /* @__PURE__ */ Symbol("HaltChainable");
  class O {
    constructor() {
      this.steps = [];
    }
    map(T) {
      return this.steps.push(T), this;
    }
    forEach(T) {
      return this.steps.push((g) => (T(g), g)), this;
    }
    filter(T) {
      return this.steps.push((g) => T(g) ? g : R), this;
    }
    reduce(T, g) {
      let w = g;
      return this.steps.push((E) => (w = T(w, E), w)), this;
    }
    latch(T = (g, w) => g === w) {
      let g = true, w;
      return this.steps.push((E) => {
        let x = g || !T(E, w);
        return g = false, w = E, x ? E : R;
      }), this;
    }
    evaluate(T) {
      for (let g of this.steps) if (T = g(T), T === R) break;
      return T;
    }
  }
  function I(y, T, g = (w) => w) {
    let w = (...Z) => N.fire(g(...Z)), E = () => y.on(T, w), x = () => y.removeListener(T, w), N = new v({ onWillAddFirstListener: E, onDidRemoveLastListener: x });
    return N.event;
  }
  Qe.fromNodeEventEmitter = I;
  function k(y, T, g = (w) => w) {
    let w = (...Z) => N.fire(g(...Z)), E = () => y.addEventListener(T, w), x = () => y.removeEventListener(T, w), N = new v({ onWillAddFirstListener: E, onDidRemoveLastListener: x });
    return N.event;
  }
  Qe.fromDOMEventEmitter = k;
  function P(y) {
    return new Promise((T) => i(y)(T));
  }
  Qe.toPromise = P;
  function oe(y) {
    let T = new v();
    return y.then((g) => {
      T.fire(g);
    }, () => {
      T.fire(void 0);
    }).finally(() => {
      T.dispose();
    }), T.event;
  }
  Qe.fromPromise = oe;
  function Me(y, T) {
    return y((g) => T.fire(g));
  }
  Qe.forward = Me;
  function Pe(y, T, g) {
    return T(g), y((w) => T(w));
  }
  Qe.runAndSubscribe = Pe;
  class Ke {
    constructor(T, g) {
      this._observable = T;
      this._counter = 0;
      this._hasChanged = false;
      let w = { onWillAddFirstListener: () => {
        T.addObserver(this);
      }, onDidRemoveLastListener: () => {
        T.removeObserver(this);
      } };
      g || t(w), this.emitter = new v(w), g && g.add(this.emitter);
    }
    beginUpdate(T) {
      this._counter++;
    }
    handlePossibleChange(T) {
    }
    handleChange(T, g) {
      this._hasChanged = true;
    }
    endUpdate(T) {
      this._counter--, this._counter === 0 && (this._observable.reportChanges(), this._hasChanged && (this._hasChanged = false, this.emitter.fire(this._observable.get())));
    }
  }
  function di(y, T) {
    return new Ke(y, T).emitter.event;
  }
  Qe.fromObservable = di;
  function V(y) {
    return (T, g, w) => {
      let E = 0, x = false, N = { beginUpdate() {
        E++;
      }, endUpdate() {
        E--, E === 0 && (y.reportChanges(), x && (x = false, T.call(g)));
      }, handlePossibleChange() {
      }, handleChange() {
        x = true;
      } };
      y.addObserver(N), y.reportChanges();
      let Z = { dispose() {
        y.removeObserver(N);
      } };
      return w instanceof Ee ? w.add(Z) : Array.isArray(w) && w.push(Z), Z;
    };
  }
  Qe.fromObservableLight = V;
})($ ||= {});
var Mt = class Mt2 {
  constructor(t) {
    this.listenerCount = 0;
    this.invocationCount = 0;
    this.elapsedOverall = 0;
    this.durations = [];
    this.name = `${t}_${Mt2._idPool++}`, Mt2.all.add(this);
  }
  start(t) {
    this._stopWatch = new mr(), this.listenerCount = t;
  }
  stop() {
    if (this._stopWatch) {
      let t = this._stopWatch.elapsed();
      this.durations.push(t), this.elapsedOverall += t, this.invocationCount += 1, this._stopWatch = void 0;
    }
  }
};
Mt.all = /* @__PURE__ */ new Set(), Mt._idPool = 0;
var $n = Mt;
var po = -1;
var br = class br2 {
  constructor(t, e, i = (br2._idPool++).toString(16).padStart(3, "0")) {
    this._errorHandler = t;
    this.threshold = e;
    this.name = i;
    this._warnCountdown = 0;
  }
  dispose() {
    this._stacks?.clear();
  }
  check(t, e) {
    let i = this.threshold;
    if (i <= 0 || e < i) return;
    this._stacks || (this._stacks = /* @__PURE__ */ new Map());
    let r = this._stacks.get(t.value) || 0;
    if (this._stacks.set(t.value, r + 1), this._warnCountdown -= 1, this._warnCountdown <= 0) {
      this._warnCountdown = i * 0.5;
      let [n, o2] = this.getMostFrequentStack(), l = `[${this.name}] potential listener LEAK detected, having ${e} listeners already. MOST frequent listener (${o2}):`;
      console.warn(l), console.warn(n);
      let a = new qn(l, n);
      this._errorHandler(a);
    }
    return () => {
      let n = this._stacks.get(t.value) || 0;
      this._stacks.set(t.value, n - 1);
    };
  }
  getMostFrequentStack() {
    if (!this._stacks) return;
    let t, e = 0;
    for (let [i, r] of this._stacks) (!t || e < r) && (t = [i, r], e = r);
    return t;
  }
};
br._idPool = 1;
var Vn = br;
var gi = class s7 {
  constructor(t) {
    this.value = t;
  }
  static create() {
    let t = new Error();
    return new s7(t.stack ?? "");
  }
  print() {
    console.warn(this.value.split(`
`).slice(2).join(`
`));
  }
};
var qn = class extends Error {
  constructor(t, e) {
    super(t), this.name = "ListenerLeakError", this.stack = e;
  }
};
var Yn = class extends Error {
  constructor(t, e) {
    super(t), this.name = "ListenerRefusalError", this.stack = e;
  }
};
var Vl = 0;
var Pt = class {
  constructor(t) {
    this.value = t;
    this.id = Vl++;
  }
};
var ql = 2;
var Yl = (s15, t) => {
  if (s15 instanceof Pt) t(s15);
  else for (let e = 0; e < s15.length; e++) {
    let i = s15[e];
    i && t(i);
  }
};
var _r;
if (Gl) {
  let s15 = [];
  setInterval(() => {
    s15.length !== 0 && (console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"), console.warn(s15.join(`
`)), s15.length = 0);
  }, 3e3), _r = new FinalizationRegistry((t) => {
    typeof t == "string" && s15.push(t);
  });
}
var v = class {
  constructor(t) {
    this._size = 0;
    this._options = t, this._leakageMon = po > 0 || this._options?.leakWarningThreshold ? new Vn(t?.onListenerError ?? Lt, this._options?.leakWarningThreshold ?? po) : void 0, this._perfMon = this._options?._profName ? new $n(this._options._profName) : void 0, this._deliveryQueue = this._options?.deliveryQueue;
  }
  dispose() {
    if (!this._disposed) {
      if (this._disposed = true, this._deliveryQueue?.current === this && this._deliveryQueue.reset(), this._listeners) {
        if (fo) {
          let t = this._listeners;
          queueMicrotask(() => {
            Yl(t, (e) => e.stack?.print());
          });
        }
        this._listeners = void 0, this._size = 0;
      }
      this._options?.onDidRemoveLastListener?.(), this._leakageMon?.dispose();
    }
  }
  get event() {
    return this._event ??= (t, e, i) => {
      if (this._leakageMon && this._size > this._leakageMon.threshold ** 2) {
        let a = `[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;
        console.warn(a);
        let u = this._leakageMon.getMostFrequentStack() ?? ["UNKNOWN stack", -1], h2 = new Yn(`${a}. HINT: Stack shows most frequent listener (${u[1]}-times)`, u[0]);
        return (this._options?.onListenerError || Lt)(h2), D.None;
      }
      if (this._disposed) return D.None;
      e && (t = t.bind(e));
      let r = new Pt(t), n, o2;
      this._leakageMon && this._size >= Math.ceil(this._leakageMon.threshold * 0.2) && (r.stack = gi.create(), n = this._leakageMon.check(r.stack, this._size + 1)), fo && (r.stack = o2 ?? gi.create()), this._listeners ? this._listeners instanceof Pt ? (this._deliveryQueue ??= new jn(), this._listeners = [this._listeners, r]) : this._listeners.push(r) : (this._options?.onWillAddFirstListener?.(this), this._listeners = r, this._options?.onDidAddFirstListener?.(this)), this._size++;
      let l = C(() => {
        _r?.unregister(l), n?.(), this._removeListener(r);
      });
      if (i instanceof Ee ? i.add(l) : Array.isArray(i) && i.push(l), _r) {
        let a = new Error().stack.split(`
`).slice(2, 3).join(`
`).trim(), u = /(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(a);
        _r.register(l, u?.[2] ?? a, l);
      }
      return l;
    }, this._event;
  }
  _removeListener(t) {
    if (this._options?.onWillRemoveListener?.(this), !this._listeners) return;
    if (this._size === 1) {
      this._listeners = void 0, this._options?.onDidRemoveLastListener?.(this), this._size = 0;
      return;
    }
    let e = this._listeners, i = e.indexOf(t);
    if (i === -1) throw console.log("disposed?", this._disposed), console.log("size?", this._size), console.log("arr?", JSON.stringify(this._listeners)), new Error("Attempted to dispose unknown listener");
    this._size--, e[i] = void 0;
    let r = this._deliveryQueue.current === this;
    if (this._size * ql <= e.length) {
      let n = 0;
      for (let o2 = 0; o2 < e.length; o2++) e[o2] ? e[n++] = e[o2] : r && (this._deliveryQueue.end--, n < this._deliveryQueue.i && this._deliveryQueue.i--);
      e.length = n;
    }
  }
  _deliver(t, e) {
    if (!t) return;
    let i = this._options?.onListenerError || Lt;
    if (!i) {
      t.value(e);
      return;
    }
    try {
      t.value(e);
    } catch (r) {
      i(r);
    }
  }
  _deliverQueue(t) {
    let e = t.current._listeners;
    for (; t.i < t.end; ) this._deliver(e[t.i++], t.value);
    t.reset();
  }
  fire(t) {
    if (this._deliveryQueue?.current && (this._deliverQueue(this._deliveryQueue), this._perfMon?.stop()), this._perfMon?.start(this._size), this._listeners) if (this._listeners instanceof Pt) this._deliver(this._listeners, t);
    else {
      let e = this._deliveryQueue;
      e.enqueue(this, t, this._listeners.length), this._deliverQueue(e);
    }
    this._perfMon?.stop();
  }
  hasListeners() {
    return this._size > 0;
  }
};
var jn = class {
  constructor() {
    this.i = -1;
    this.end = 0;
  }
  enqueue(t, e, i) {
    this.i = 0, this.end = i, this.current = t, this.value = e;
  }
  reset() {
    this.i = this.end, this.current = void 0, this.value = void 0;
  }
};
var gr = class gr2 {
  constructor() {
    this.mapWindowIdToZoomLevel = /* @__PURE__ */ new Map();
    this._onDidChangeZoomLevel = new v();
    this.onDidChangeZoomLevel = this._onDidChangeZoomLevel.event;
    this.mapWindowIdToZoomFactor = /* @__PURE__ */ new Map();
    this._onDidChangeFullscreen = new v();
    this.onDidChangeFullscreen = this._onDidChangeFullscreen.event;
    this.mapWindowIdToFullScreen = /* @__PURE__ */ new Map();
  }
  getZoomLevel(t) {
    return this.mapWindowIdToZoomLevel.get(this.getWindowId(t)) ?? 0;
  }
  setZoomLevel(t, e) {
    if (this.getZoomLevel(e) === t) return;
    let i = this.getWindowId(e);
    this.mapWindowIdToZoomLevel.set(i, t), this._onDidChangeZoomLevel.fire(i);
  }
  getZoomFactor(t) {
    return this.mapWindowIdToZoomFactor.get(this.getWindowId(t)) ?? 1;
  }
  setZoomFactor(t, e) {
    this.mapWindowIdToZoomFactor.set(this.getWindowId(e), t);
  }
  setFullscreen(t, e) {
    if (this.isFullscreen(e) === t) return;
    let i = this.getWindowId(e);
    this.mapWindowIdToFullScreen.set(i, t), this._onDidChangeFullscreen.fire(i);
  }
  isFullscreen(t) {
    return !!this.mapWindowIdToFullScreen.get(this.getWindowId(t));
  }
  getWindowId(t) {
    return t.vscodeWindowId;
  }
};
gr.INSTANCE = new gr();
var Si = gr;
function Xl(s15, t, e) {
  typeof t == "string" && (t = s15.matchMedia(t)), t.addEventListener("change", e);
}
var Eu = Si.INSTANCE.onDidChangeZoomLevel;
function mo(s15) {
  return Si.INSTANCE.getZoomFactor(s15);
}
var Tu = Si.INSTANCE.onDidChangeFullscreen;
var Ot = typeof navigator == "object" ? navigator.userAgent : "";
var Ei = Ot.indexOf("Firefox") >= 0;
var Bt = Ot.indexOf("AppleWebKit") >= 0;
var Ti = Ot.indexOf("Chrome") >= 0;
var Sr = !Ti && Ot.indexOf("Safari") >= 0;
var Iu = Ot.indexOf("Electron/") >= 0;
var yu = Ot.indexOf("Android") >= 0;
var vr = false;
if (typeof fe.matchMedia == "function") {
  let s15 = fe.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"), t = fe.matchMedia("(display-mode: fullscreen)");
  vr = s15.matches, Xl(fe, s15, ({ matches: e }) => {
    vr && t.matches || (vr = e);
  });
}
function _o() {
  return vr;
}
var Nt = "en";
var yr = false;
var xr = false;
var Ii = false;
var Zl = false;
var vo = false;
var go = false;
var Jl = false;
var Ql = false;
var ea = false;
var ta = false;
var Tr;
var Ir = Nt;
var bo = Nt;
var ia;
var $e;
var Ve = globalThis;
var xe;
typeof Ve.vscode < "u" && typeof Ve.vscode.process < "u" ? xe = Ve.vscode.process : typeof process < "u" && typeof process?.versions?.node == "string" && (xe = process);
var So = typeof xe?.versions?.electron == "string";
var ra = So && xe?.type === "renderer";
if (typeof xe == "object") {
  yr = xe.platform === "win32", xr = xe.platform === "darwin", Ii = xe.platform === "linux", Zl = Ii && !!xe.env.SNAP && !!xe.env.SNAP_REVISION, Jl = So, ea = !!xe.env.CI || !!xe.env.BUILD_ARTIFACTSTAGINGDIRECTORY, Tr = Nt, Ir = Nt;
  let s15 = xe.env.VSCODE_NLS_CONFIG;
  if (s15) try {
    let t = JSON.parse(s15);
    Tr = t.userLocale, bo = t.osLocale, Ir = t.resolvedLanguage || Nt, ia = t.languagePack?.translationsConfigFile;
  } catch {
  }
  vo = true;
} else typeof navigator == "object" && !ra ? ($e = navigator.userAgent, yr = $e.indexOf("Windows") >= 0, xr = $e.indexOf("Macintosh") >= 0, Ql = ($e.indexOf("Macintosh") >= 0 || $e.indexOf("iPad") >= 0 || $e.indexOf("iPhone") >= 0) && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0, Ii = $e.indexOf("Linux") >= 0, ta = $e?.indexOf("Mobi") >= 0, go = true, Ir = globalThis._VSCODE_NLS_LANGUAGE || Nt, Tr = navigator.language.toLowerCase(), bo = Tr) : console.error("Unable to resolve platform.");
var Xn = 0;
xr ? Xn = 1 : yr ? Xn = 3 : Ii && (Xn = 2);
var wr = yr;
var Te = xr;
var Zn = Ii;
var Dr = vo;
var na = go && typeof Ve.importScripts == "function";
var xu = na ? Ve.origin : void 0;
var Fe = $e;
var st = Ir;
var sa;
((i) => {
  function s15() {
    return st;
  }
  i.value = s15;
  function t() {
    return st.length === 2 ? st === "en" : st.length >= 3 ? st[0] === "e" && st[1] === "n" && st[2] === "-" : false;
  }
  i.isDefaultVariant = t;
  function e() {
    return st === "en";
  }
  i.isDefault = e;
})(sa ||= {});
var oa = typeof Ve.postMessage == "function" && !Ve.importScripts;
var Eo = (() => {
  if (oa) {
    let s15 = [];
    Ve.addEventListener("message", (e) => {
      if (e.data && e.data.vscodeScheduleAsyncWork) for (let i = 0, r = s15.length; i < r; i++) {
        let n = s15[i];
        if (n.id === e.data.vscodeScheduleAsyncWork) {
          s15.splice(i, 1), n.callback();
          return;
        }
      }
    });
    let t = 0;
    return (e) => {
      let i = ++t;
      s15.push({ id: i, callback: e }), Ve.postMessage({ vscodeScheduleAsyncWork: i }, "*");
    };
  }
  return (s15) => setTimeout(s15);
})();
var la = !!(Fe && Fe.indexOf("Chrome") >= 0);
var wu = !!(Fe && Fe.indexOf("Firefox") >= 0);
var Du = !!(!la && Fe && Fe.indexOf("Safari") >= 0);
var Ru = !!(Fe && Fe.indexOf("Edg/") >= 0);
var Lu = !!(Fe && Fe.indexOf("Android") >= 0);
var ot = typeof navigator == "object" ? navigator : {};
var aa = { clipboard: { writeText: Dr || document.queryCommandSupported && document.queryCommandSupported("copy") || !!(ot && ot.clipboard && ot.clipboard.writeText), readText: Dr || !!(ot && ot.clipboard && ot.clipboard.readText) }, keyboard: Dr || _o() ? 0 : ot.keyboard || Sr ? 1 : 2, touch: "ontouchstart" in fe || ot.maxTouchPoints > 0, pointerEvents: fe.PointerEvent && ("ontouchstart" in fe || navigator.maxTouchPoints > 0) };
var yi = class {
  constructor() {
    this._keyCodeToStr = [], this._strToKeyCode = /* @__PURE__ */ Object.create(null);
  }
  define(t, e) {
    this._keyCodeToStr[t] = e, this._strToKeyCode[e.toLowerCase()] = t;
  }
  keyCodeToStr(t) {
    return this._keyCodeToStr[t];
  }
  strToKeyCode(t) {
    return this._strToKeyCode[t.toLowerCase()] || 0;
  }
};
var Jn = new yi();
var To = new yi();
var Io = new yi();
var yo = new Array(230);
var Qn;
((o2) => {
  function s15(l) {
    return Jn.keyCodeToStr(l);
  }
  o2.toString = s15;
  function t(l) {
    return Jn.strToKeyCode(l);
  }
  o2.fromString = t;
  function e(l) {
    return To.keyCodeToStr(l);
  }
  o2.toUserSettingsUS = e;
  function i(l) {
    return Io.keyCodeToStr(l);
  }
  o2.toUserSettingsGeneral = i;
  function r(l) {
    return To.strToKeyCode(l) || Io.strToKeyCode(l);
  }
  o2.fromUserSettings = r;
  function n(l) {
    if (l >= 98 && l <= 113) return null;
    switch (l) {
      case 16:
        return "Up";
      case 18:
        return "Down";
      case 15:
        return "Left";
      case 17:
        return "Right";
    }
    return Jn.keyCodeToStr(l);
  }
  o2.toElectronAccelerator = n;
})(Qn ||= {});
var Rr = class s8 {
  constructor(t, e, i, r, n) {
    this.ctrlKey = t;
    this.shiftKey = e;
    this.altKey = i;
    this.metaKey = r;
    this.keyCode = n;
  }
  equals(t) {
    return t instanceof s8 && this.ctrlKey === t.ctrlKey && this.shiftKey === t.shiftKey && this.altKey === t.altKey && this.metaKey === t.metaKey && this.keyCode === t.keyCode;
  }
  getHashCode() {
    let t = this.ctrlKey ? "1" : "0", e = this.shiftKey ? "1" : "0", i = this.altKey ? "1" : "0", r = this.metaKey ? "1" : "0";
    return `K${t}${e}${i}${r}${this.keyCode}`;
  }
  isModifierKey() {
    return this.keyCode === 0 || this.keyCode === 5 || this.keyCode === 57 || this.keyCode === 6 || this.keyCode === 4;
  }
  toKeybinding() {
    return new es([this]);
  }
  isDuplicateModifierCase() {
    return this.ctrlKey && this.keyCode === 5 || this.shiftKey && this.keyCode === 4 || this.altKey && this.keyCode === 6 || this.metaKey && this.keyCode === 57;
  }
};
var es = class {
  constructor(t) {
    if (t.length === 0) throw eo("chords");
    this.chords = t;
  }
  getHashCode() {
    let t = "";
    for (let e = 0, i = this.chords.length; e < i; e++) e !== 0 && (t += ";"), t += this.chords[e].getHashCode();
    return t;
  }
  equals(t) {
    if (t === null || this.chords.length !== t.chords.length) return false;
    for (let e = 0; e < this.chords.length; e++) if (!this.chords[e].equals(t.chords[e])) return false;
    return true;
  }
};
function ca(s15) {
  if (s15.charCode) {
    let e = String.fromCharCode(s15.charCode).toUpperCase();
    return Qn.fromString(e);
  }
  let t = s15.keyCode;
  if (t === 3) return 7;
  if (Ei) switch (t) {
    case 59:
      return 85;
    case 60:
      if (Zn) return 97;
      break;
    case 61:
      return 86;
    case 107:
      return 109;
    case 109:
      return 111;
    case 173:
      return 88;
    case 224:
      if (Te) return 57;
      break;
  }
  else if (Bt) {
    if (Te && t === 93) return 57;
    if (!Te && t === 92) return 57;
  }
  return yo[t] || 0;
}
var ua = Te ? 256 : 2048;
var ha = 512;
var da = 1024;
var fa = Te ? 2048 : 256;
var ft = class {
  constructor(t) {
    this._standardKeyboardEventBrand = true;
    let e = t;
    this.browserEvent = e, this.target = e.target, this.ctrlKey = e.ctrlKey, this.shiftKey = e.shiftKey, this.altKey = e.altKey, this.metaKey = e.metaKey, this.altGraphKey = e.getModifierState?.("AltGraph"), this.keyCode = ca(e), this.code = e.code, this.ctrlKey = this.ctrlKey || this.keyCode === 5, this.altKey = this.altKey || this.keyCode === 6, this.shiftKey = this.shiftKey || this.keyCode === 4, this.metaKey = this.metaKey || this.keyCode === 57, this._asKeybinding = this._computeKeybinding(), this._asKeyCodeChord = this._computeKeyCodeChord();
  }
  preventDefault() {
    this.browserEvent && this.browserEvent.preventDefault && this.browserEvent.preventDefault();
  }
  stopPropagation() {
    this.browserEvent && this.browserEvent.stopPropagation && this.browserEvent.stopPropagation();
  }
  toKeyCodeChord() {
    return this._asKeyCodeChord;
  }
  equals(t) {
    return this._asKeybinding === t;
  }
  _computeKeybinding() {
    let t = 0;
    this.keyCode !== 5 && this.keyCode !== 4 && this.keyCode !== 6 && this.keyCode !== 57 && (t = this.keyCode);
    let e = 0;
    return this.ctrlKey && (e |= ua), this.altKey && (e |= ha), this.shiftKey && (e |= da), this.metaKey && (e |= fa), e |= t, e;
  }
  _computeKeyCodeChord() {
    let t = 0;
    return this.keyCode !== 5 && this.keyCode !== 4 && this.keyCode !== 6 && this.keyCode !== 57 && (t = this.keyCode), new Rr(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, t);
  }
};
var wo = /* @__PURE__ */ new WeakMap();
function pa(s15) {
  if (!s15.parent || s15.parent === s15) return null;
  try {
    let t = s15.location, e = s15.parent.location;
    if (t.origin !== "null" && e.origin !== "null" && t.origin !== e.origin) return null;
  } catch {
    return null;
  }
  return s15.parent;
}
var Lr = class {
  static getSameOriginWindowChain(t) {
    let e = wo.get(t);
    if (!e) {
      e = [], wo.set(t, e);
      let i = t, r;
      do
        r = pa(i), r ? e.push({ window: new WeakRef(i), iframeElement: i.frameElement || null }) : e.push({ window: new WeakRef(i), iframeElement: null }), i = r;
      while (i);
    }
    return e.slice(0);
  }
  static getPositionOfChildWindowRelativeToAncestorWindow(t, e) {
    if (!e || t === e) return { top: 0, left: 0 };
    let i = 0, r = 0, n = this.getSameOriginWindowChain(t);
    for (let o2 of n) {
      let l = o2.window.deref();
      if (i += l?.scrollY ?? 0, r += l?.scrollX ?? 0, l === e || !o2.iframeElement) break;
      let a = o2.iframeElement.getBoundingClientRect();
      i += a.top, r += a.left;
    }
    return { top: i, left: r };
  }
};
var qe = class {
  constructor(t, e) {
    this.timestamp = Date.now(), this.browserEvent = e, this.leftButton = e.button === 0, this.middleButton = e.button === 1, this.rightButton = e.button === 2, this.buttons = e.buttons, this.target = e.target, this.detail = e.detail || 1, e.type === "dblclick" && (this.detail = 2), this.ctrlKey = e.ctrlKey, this.shiftKey = e.shiftKey, this.altKey = e.altKey, this.metaKey = e.metaKey, typeof e.pageX == "number" ? (this.posx = e.pageX, this.posy = e.pageY) : (this.posx = e.clientX + this.target.ownerDocument.body.scrollLeft + this.target.ownerDocument.documentElement.scrollLeft, this.posy = e.clientY + this.target.ownerDocument.body.scrollTop + this.target.ownerDocument.documentElement.scrollTop);
    let i = Lr.getPositionOfChildWindowRelativeToAncestorWindow(t, e.view);
    this.posx -= i.left, this.posy -= i.top;
  }
  preventDefault() {
    this.browserEvent.preventDefault();
  }
  stopPropagation() {
    this.browserEvent.stopPropagation();
  }
};
var xi = class {
  constructor(t, e = 0, i = 0) {
    this.browserEvent = t || null, this.target = t ? t.target || t.targetNode || t.srcElement : null, this.deltaY = i, this.deltaX = e;
    let r = false;
    if (Ti) {
      let n = navigator.userAgent.match(/Chrome\/(\d+)/);
      r = (n ? parseInt(n[1]) : 123) <= 122;
    }
    if (t) {
      let n = t, o2 = t, l = t.view?.devicePixelRatio || 1;
      if (typeof n.wheelDeltaY < "u") r ? this.deltaY = n.wheelDeltaY / (120 * l) : this.deltaY = n.wheelDeltaY / 120;
      else if (typeof o2.VERTICAL_AXIS < "u" && o2.axis === o2.VERTICAL_AXIS) this.deltaY = -o2.detail / 3;
      else if (t.type === "wheel") {
        let a = t;
        a.deltaMode === a.DOM_DELTA_LINE ? Ei && !Te ? this.deltaY = -t.deltaY / 3 : this.deltaY = -t.deltaY : this.deltaY = -t.deltaY / 40;
      }
      if (typeof n.wheelDeltaX < "u") Sr && wr ? this.deltaX = -(n.wheelDeltaX / 120) : r ? this.deltaX = n.wheelDeltaX / (120 * l) : this.deltaX = n.wheelDeltaX / 120;
      else if (typeof o2.HORIZONTAL_AXIS < "u" && o2.axis === o2.HORIZONTAL_AXIS) this.deltaX = -t.detail / 3;
      else if (t.type === "wheel") {
        let a = t;
        a.deltaMode === a.DOM_DELTA_LINE ? Ei && !Te ? this.deltaX = -t.deltaX / 3 : this.deltaX = -t.deltaX : this.deltaX = -t.deltaX / 40;
      }
      this.deltaY === 0 && this.deltaX === 0 && t.wheelDelta && (r ? this.deltaY = t.wheelDelta / (120 * l) : this.deltaY = t.wheelDelta / 120);
    }
  }
  preventDefault() {
    this.browserEvent?.preventDefault();
  }
  stopPropagation() {
    this.browserEvent?.stopPropagation();
  }
};
var Do = Object.freeze(function(s15, t) {
  let e = setTimeout(s15.bind(t), 0);
  return { dispose() {
    clearTimeout(e);
  } };
});
var ma;
((i) => {
  function s15(r) {
    return r === i.None || r === i.Cancelled || r instanceof ts ? true : !r || typeof r != "object" ? false : typeof r.isCancellationRequested == "boolean" && typeof r.onCancellationRequested == "function";
  }
  i.isCancellationToken = s15, i.None = Object.freeze({ isCancellationRequested: false, onCancellationRequested: $.None }), i.Cancelled = Object.freeze({ isCancellationRequested: true, onCancellationRequested: Do });
})(ma ||= {});
var ts = class {
  constructor() {
    this._isCancelled = false;
    this._emitter = null;
  }
  cancel() {
    this._isCancelled || (this._isCancelled = true, this._emitter && (this._emitter.fire(void 0), this.dispose()));
  }
  get isCancellationRequested() {
    return this._isCancelled;
  }
  get onCancellationRequested() {
    return this._isCancelled ? Do : (this._emitter || (this._emitter = new v()), this._emitter.event);
  }
  dispose() {
    this._emitter && (this._emitter.dispose(), this._emitter = null);
  }
};
var Ye = class {
  constructor(t, e) {
    this._isDisposed = false;
    this._token = -1, typeof t == "function" && typeof e == "number" && this.setIfNotSet(t, e);
  }
  dispose() {
    this.cancel(), this._isDisposed = true;
  }
  cancel() {
    this._token !== -1 && (clearTimeout(this._token), this._token = -1);
  }
  cancelAndSet(t, e) {
    if (this._isDisposed) throw new Rt("Calling 'cancelAndSet' on a disposed TimeoutTimer");
    this.cancel(), this._token = setTimeout(() => {
      this._token = -1, t();
    }, e);
  }
  setIfNotSet(t, e) {
    if (this._isDisposed) throw new Rt("Calling 'setIfNotSet' on a disposed TimeoutTimer");
    this._token === -1 && (this._token = setTimeout(() => {
      this._token = -1, t();
    }, e));
  }
};
var kr = class {
  constructor() {
    this.disposable = void 0;
    this.isDisposed = false;
  }
  cancel() {
    this.disposable?.dispose(), this.disposable = void 0;
  }
  cancelAndSet(t, e, i = globalThis) {
    if (this.isDisposed) throw new Rt("Calling 'cancelAndSet' on a disposed IntervalTimer");
    this.cancel();
    let r = i.setInterval(() => {
      t();
    }, e);
    this.disposable = C(() => {
      i.clearInterval(r), this.disposable = void 0;
    });
  }
  dispose() {
    this.cancel(), this.isDisposed = true;
  }
};
var ba;
var Ar;
(function() {
  typeof globalThis.requestIdleCallback != "function" || typeof globalThis.cancelIdleCallback != "function" ? Ar = (s15, t) => {
    Eo(() => {
      if (e) return;
      let i = Date.now() + 15;
      t(Object.freeze({ didTimeout: true, timeRemaining() {
        return Math.max(0, i - Date.now());
      } }));
    });
    let e = false;
    return { dispose() {
      e || (e = true);
    } };
  } : Ar = (s15, t, e) => {
    let i = s15.requestIdleCallback(t, typeof e == "number" ? { timeout: e } : void 0), r = false;
    return { dispose() {
      r || (r = true, s15.cancelIdleCallback(i));
    } };
  }, ba = (s15) => Ar(globalThis, s15);
})();
var va;
((e) => {
  async function s15(i) {
    let r, n = await Promise.all(i.map((o2) => o2.then((l) => l, (l) => {
      r || (r = l);
    })));
    if (typeof r < "u") throw r;
    return n;
  }
  e.settled = s15;
  function t(i) {
    return new Promise(async (r, n) => {
      try {
        await i(r, n);
      } catch (o2) {
        n(o2);
      }
    });
  }
  e.withAsyncBody = t;
})(va ||= {});
var _e = class _e2 {
  static fromArray(t) {
    return new _e2((e) => {
      e.emitMany(t);
    });
  }
  static fromPromise(t) {
    return new _e2(async (e) => {
      e.emitMany(await t);
    });
  }
  static fromPromises(t) {
    return new _e2(async (e) => {
      await Promise.all(t.map(async (i) => e.emitOne(await i)));
    });
  }
  static merge(t) {
    return new _e2(async (e) => {
      await Promise.all(t.map(async (i) => {
        for await (let r of i) e.emitOne(r);
      }));
    });
  }
  constructor(t, e) {
    this._state = 0, this._results = [], this._error = null, this._onReturn = e, this._onStateChanged = new v(), queueMicrotask(async () => {
      let i = { emitOne: (r) => this.emitOne(r), emitMany: (r) => this.emitMany(r), reject: (r) => this.reject(r) };
      try {
        await Promise.resolve(t(i)), this.resolve();
      } catch (r) {
        this.reject(r);
      } finally {
        i.emitOne = void 0, i.emitMany = void 0, i.reject = void 0;
      }
    });
  }
  [Symbol.asyncIterator]() {
    let t = 0;
    return { next: async () => {
      do {
        if (this._state === 2) throw this._error;
        if (t < this._results.length) return { done: false, value: this._results[t++] };
        if (this._state === 1) return { done: true, value: void 0 };
        await $.toPromise(this._onStateChanged.event);
      } while (true);
    }, return: async () => (this._onReturn?.(), { done: true, value: void 0 }) };
  }
  static map(t, e) {
    return new _e2(async (i) => {
      for await (let r of t) i.emitOne(e(r));
    });
  }
  map(t) {
    return _e2.map(this, t);
  }
  static filter(t, e) {
    return new _e2(async (i) => {
      for await (let r of t) e(r) && i.emitOne(r);
    });
  }
  filter(t) {
    return _e2.filter(this, t);
  }
  static coalesce(t) {
    return _e2.filter(t, (e) => !!e);
  }
  coalesce() {
    return _e2.coalesce(this);
  }
  static async toPromise(t) {
    let e = [];
    for await (let i of t) e.push(i);
    return e;
  }
  toPromise() {
    return _e2.toPromise(this);
  }
  emitOne(t) {
    this._state === 0 && (this._results.push(t), this._onStateChanged.fire());
  }
  emitMany(t) {
    this._state === 0 && (this._results = this._results.concat(t), this._onStateChanged.fire());
  }
  resolve() {
    this._state === 0 && (this._state = 1, this._onStateChanged.fire());
  }
  reject(t) {
    this._state === 0 && (this._state = 2, this._error = t, this._onStateChanged.fire());
  }
};
_e.EMPTY = _e.fromArray([]);
function Lo(s15) {
  return 55296 <= s15 && s15 <= 56319;
}
function is(s15) {
  return 56320 <= s15 && s15 <= 57343;
}
function Ao(s15, t) {
  return (s15 - 55296 << 10) + (t - 56320) + 65536;
}
function Mo(s15) {
  return ns(s15, 0);
}
function ns(s15, t) {
  switch (typeof s15) {
    case "object":
      return s15 === null ? je(349, t) : Array.isArray(s15) ? Ea(s15, t) : Ta(s15, t);
    case "string":
      return Po(s15, t);
    case "boolean":
      return Sa(s15, t);
    case "number":
      return je(s15, t);
    case "undefined":
      return je(937, t);
    default:
      return je(617, t);
  }
}
function je(s15, t) {
  return (t << 5) - t + s15 | 0;
}
function Sa(s15, t) {
  return je(s15 ? 433 : 863, t);
}
function Po(s15, t) {
  t = je(149417, t);
  for (let e = 0, i = s15.length; e < i; e++) t = je(s15.charCodeAt(e), t);
  return t;
}
function Ea(s15, t) {
  return t = je(104579, t), s15.reduce((e, i) => ns(i, e), t);
}
function Ta(s15, t) {
  return t = je(181387, t), Object.keys(s15).sort().reduce((e, i) => (e = Po(i, e), ns(s15[i], e)), t);
}
function rs(s15, t, e = 32) {
  let i = e - t, r = ~((1 << i) - 1);
  return (s15 << t | (r & s15) >>> i) >>> 0;
}
function ko(s15, t = 0, e = s15.byteLength, i = 0) {
  for (let r = 0; r < e; r++) s15[t + r] = i;
}
function Ia(s15, t, e = "0") {
  for (; s15.length < t; ) s15 = e + s15;
  return s15;
}
function wi(s15, t = 32) {
  return s15 instanceof ArrayBuffer ? Array.from(new Uint8Array(s15)).map((e) => e.toString(16).padStart(2, "0")).join("") : Ia((s15 >>> 0).toString(16), t / 4);
}
var Cr = class Cr2 {
  constructor() {
    this._h0 = 1732584193;
    this._h1 = 4023233417;
    this._h2 = 2562383102;
    this._h3 = 271733878;
    this._h4 = 3285377520;
    this._buff = new Uint8Array(67), this._buffDV = new DataView(this._buff.buffer), this._buffLen = 0, this._totalLen = 0, this._leftoverHighSurrogate = 0, this._finished = false;
  }
  update(t) {
    let e = t.length;
    if (e === 0) return;
    let i = this._buff, r = this._buffLen, n = this._leftoverHighSurrogate, o2, l;
    for (n !== 0 ? (o2 = n, l = -1, n = 0) : (o2 = t.charCodeAt(0), l = 0); ; ) {
      let a = o2;
      if (Lo(o2)) if (l + 1 < e) {
        let u = t.charCodeAt(l + 1);
        is(u) ? (l++, a = Ao(o2, u)) : a = 65533;
      } else {
        n = o2;
        break;
      }
      else is(o2) && (a = 65533);
      if (r = this._push(i, r, a), l++, l < e) o2 = t.charCodeAt(l);
      else break;
    }
    this._buffLen = r, this._leftoverHighSurrogate = n;
  }
  _push(t, e, i) {
    return i < 128 ? t[e++] = i : i < 2048 ? (t[e++] = 192 | (i & 1984) >>> 6, t[e++] = 128 | (i & 63) >>> 0) : i < 65536 ? (t[e++] = 224 | (i & 61440) >>> 12, t[e++] = 128 | (i & 4032) >>> 6, t[e++] = 128 | (i & 63) >>> 0) : (t[e++] = 240 | (i & 1835008) >>> 18, t[e++] = 128 | (i & 258048) >>> 12, t[e++] = 128 | (i & 4032) >>> 6, t[e++] = 128 | (i & 63) >>> 0), e >= 64 && (this._step(), e -= 64, this._totalLen += 64, t[0] = t[64], t[1] = t[65], t[2] = t[66]), e;
  }
  digest() {
    return this._finished || (this._finished = true, this._leftoverHighSurrogate && (this._leftoverHighSurrogate = 0, this._buffLen = this._push(this._buff, this._buffLen, 65533)), this._totalLen += this._buffLen, this._wrapUp()), wi(this._h0) + wi(this._h1) + wi(this._h2) + wi(this._h3) + wi(this._h4);
  }
  _wrapUp() {
    this._buff[this._buffLen++] = 128, ko(this._buff, this._buffLen), this._buffLen > 56 && (this._step(), ko(this._buff));
    let t = 8 * this._totalLen;
    this._buffDV.setUint32(56, Math.floor(t / 4294967296), false), this._buffDV.setUint32(60, t % 4294967296, false), this._step();
  }
  _step() {
    let t = Cr2._bigBlock32, e = this._buffDV;
    for (let c = 0; c < 64; c += 4) t.setUint32(c, e.getUint32(c, false), false);
    for (let c = 64; c < 320; c += 4) t.setUint32(c, rs(t.getUint32(c - 12, false) ^ t.getUint32(c - 32, false) ^ t.getUint32(c - 56, false) ^ t.getUint32(c - 64, false), 1), false);
    let i = this._h0, r = this._h1, n = this._h2, o2 = this._h3, l = this._h4, a, u, h2;
    for (let c = 0; c < 80; c++) c < 20 ? (a = r & n | ~r & o2, u = 1518500249) : c < 40 ? (a = r ^ n ^ o2, u = 1859775393) : c < 60 ? (a = r & n | r & o2 | n & o2, u = 2400959708) : (a = r ^ n ^ o2, u = 3395469782), h2 = rs(i, 5) + a + l + u + t.getUint32(c * 4, false) & 4294967295, l = o2, o2 = n, n = rs(r, 30), r = i, i = h2;
    this._h0 = this._h0 + i & 4294967295, this._h1 = this._h1 + r & 4294967295, this._h2 = this._h2 + n & 4294967295, this._h3 = this._h3 + o2 & 4294967295, this._h4 = this._h4 + l & 4294967295;
  }
};
Cr._bigBlock32 = new DataView(new ArrayBuffer(320));
var { registerWindow: Bh, getWindow: be, getDocument: Nh, getWindows: Fh, getWindowsCount: Hh, getWindowId: Oo, getWindowById: Wh, hasWindow: Uh, onDidRegisterWindow: No, onWillUnregisterWindow: Kh, onDidUnregisterWindow: zh } = (function() {
  let s15 = /* @__PURE__ */ new Map();
  fe;
  let t = { window: fe, disposables: new Ee() };
  s15.set(fe.vscodeWindowId, t);
  let e = new v(), i = new v(), r = new v();
  function n(o2, l) {
    return (typeof o2 == "number" ? s15.get(o2) : void 0) ?? (l ? t : void 0);
  }
  return { onDidRegisterWindow: e.event, onWillUnregisterWindow: r.event, onDidUnregisterWindow: i.event, registerWindow(o2) {
    if (s15.has(o2.vscodeWindowId)) return D.None;
    let l = new Ee(), a = { window: o2, disposables: l.add(new Ee()) };
    return s15.set(o2.vscodeWindowId, a), l.add(C(() => {
      s15.delete(o2.vscodeWindowId), i.fire(o2);
    })), l.add(L(o2, Y.BEFORE_UNLOAD, () => {
      r.fire(o2);
    })), e.fire(a), l;
  }, getWindows() {
    return s15.values();
  }, getWindowsCount() {
    return s15.size;
  }, getWindowId(o2) {
    return o2.vscodeWindowId;
  }, hasWindow(o2) {
    return s15.has(o2);
  }, getWindowById: n, getWindow(o2) {
    let l = o2;
    if (l?.ownerDocument?.defaultView) return l.ownerDocument.defaultView.window;
    let a = o2;
    return a?.view ? a.view.window : fe;
  }, getDocument(o2) {
    return be(o2).document;
  } };
})();
var ss = class {
  constructor(t, e, i, r) {
    this._node = t, this._type = e, this._handler = i, this._options = r || false, this._node.addEventListener(this._type, this._handler, this._options);
  }
  dispose() {
    this._handler && (this._node.removeEventListener(this._type, this._handler, this._options), this._node = null, this._handler = null);
  }
};
function L(s15, t, e, i) {
  return new ss(s15, t, e, i);
}
function ya(s15, t) {
  return function(e) {
    return t(new qe(s15, e));
  };
}
function xa(s15) {
  return function(t) {
    return s15(new ft(t));
  };
}
var os = function(t, e, i, r) {
  let n = i;
  return e === "click" || e === "mousedown" || e === "contextmenu" ? n = ya(be(t), i) : (e === "keydown" || e === "keypress" || e === "keyup") && (n = xa(i)), L(t, e, n, r);
};
var wa;
var mt;
var Mr = class extends kr {
  constructor(t) {
    super(), this.defaultTarget = t && be(t);
  }
  cancelAndSet(t, e, i) {
    return super.cancelAndSet(t, e, i ?? this.defaultTarget);
  }
};
var Di = class {
  constructor(t, e = 0) {
    this._runner = t, this.priority = e, this._canceled = false;
  }
  dispose() {
    this._canceled = true;
  }
  execute() {
    if (!this._canceled) try {
      this._runner();
    } catch (t) {
      Lt(t);
    }
  }
  static sort(t, e) {
    return e.priority - t.priority;
  }
};
(function() {
  let s15 = /* @__PURE__ */ new Map(), t = /* @__PURE__ */ new Map(), e = /* @__PURE__ */ new Map(), i = /* @__PURE__ */ new Map(), r = (n) => {
    e.set(n, false);
    let o2 = s15.get(n) ?? [];
    for (t.set(n, o2), s15.set(n, []), i.set(n, true); o2.length > 0; ) o2.sort(Di.sort), o2.shift().execute();
    i.set(n, false);
  };
  mt = (n, o2, l = 0) => {
    let a = Oo(n), u = new Di(o2, l), h2 = s15.get(a);
    return h2 || (h2 = [], s15.set(a, h2)), h2.push(u), e.get(a) || (e.set(a, true), n.requestAnimationFrame(() => r(a))), u;
  }, wa = (n, o2, l) => {
    let a = Oo(n);
    if (i.get(a)) {
      let u = new Di(o2, l), h2 = t.get(a);
      return h2 || (h2 = [], t.set(a, h2)), h2.push(u), u;
    } else return mt(n, o2, l);
  };
})();
var pt = class pt2 {
  constructor(t, e) {
    this.width = t;
    this.height = e;
  }
  with(t = this.width, e = this.height) {
    return t !== this.width || e !== this.height ? new pt2(t, e) : this;
  }
  static is(t) {
    return typeof t == "object" && typeof t.height == "number" && typeof t.width == "number";
  }
  static lift(t) {
    return t instanceof pt2 ? t : new pt2(t.width, t.height);
  }
  static equals(t, e) {
    return t === e ? true : !t || !e ? false : t.width === e.width && t.height === e.height;
  }
};
pt.None = new pt(0, 0);
function Fo(s15) {
  let t = s15.getBoundingClientRect(), e = be(s15);
  return { left: t.left + e.scrollX, top: t.top + e.scrollY, width: t.width, height: t.height };
}
var Gh = new class {
  constructor() {
    this.mutationObservers = /* @__PURE__ */ new Map();
  }
  observe(s15, t, e) {
    let i = this.mutationObservers.get(s15);
    i || (i = /* @__PURE__ */ new Map(), this.mutationObservers.set(s15, i));
    let r = Mo(e), n = i.get(r);
    if (n) n.users += 1;
    else {
      let o2 = new v(), l = new MutationObserver((u) => o2.fire(u));
      l.observe(s15, e);
      let a = n = { users: 1, observer: l, onDidMutate: o2.event };
      t.add(C(() => {
        a.users -= 1, a.users === 0 && (o2.dispose(), l.disconnect(), i?.delete(r), i?.size === 0 && this.mutationObservers.delete(s15));
      })), i.set(r, n);
    }
    return n.onDidMutate;
  }
}();
var Y = { CLICK: "click", AUXCLICK: "auxclick", DBLCLICK: "dblclick", MOUSE_UP: "mouseup", MOUSE_DOWN: "mousedown", MOUSE_OVER: "mouseover", MOUSE_MOVE: "mousemove", MOUSE_OUT: "mouseout", MOUSE_ENTER: "mouseenter", MOUSE_LEAVE: "mouseleave", MOUSE_WHEEL: "wheel", POINTER_UP: "pointerup", POINTER_DOWN: "pointerdown", POINTER_MOVE: "pointermove", POINTER_LEAVE: "pointerleave", CONTEXT_MENU: "contextmenu", WHEEL: "wheel", KEY_DOWN: "keydown", KEY_PRESS: "keypress", KEY_UP: "keyup", LOAD: "load", BEFORE_UNLOAD: "beforeunload", UNLOAD: "unload", PAGE_SHOW: "pageshow", PAGE_HIDE: "pagehide", PASTE: "paste", ABORT: "abort", ERROR: "error", RESIZE: "resize", SCROLL: "scroll", FULLSCREEN_CHANGE: "fullscreenchange", WK_FULLSCREEN_CHANGE: "webkitfullscreenchange", SELECT: "select", CHANGE: "change", SUBMIT: "submit", RESET: "reset", FOCUS: "focus", FOCUS_IN: "focusin", FOCUS_OUT: "focusout", BLUR: "blur", INPUT: "input", STORAGE: "storage", DRAG_START: "dragstart", DRAG: "drag", DRAG_ENTER: "dragenter", DRAG_LEAVE: "dragleave", DRAG_OVER: "dragover", DROP: "drop", DRAG_END: "dragend", ANIMATION_START: Bt ? "webkitAnimationStart" : "animationstart", ANIMATION_END: Bt ? "webkitAnimationEnd" : "animationend", ANIMATION_ITERATION: Bt ? "webkitAnimationIteration" : "animationiteration" };
var Da = /([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;
function Ho(s15, t, e, ...i) {
  let r = Da.exec(t);
  if (!r) throw new Error("Bad use of emmet");
  let n = r[1] || "div", o2;
  return s15 !== "http://www.w3.org/1999/xhtml" ? o2 = document.createElementNS(s15, n) : o2 = document.createElement(n), r[3] && (o2.id = r[3]), r[4] && (o2.className = r[4].replace(/\./g, " ").trim()), e && Object.entries(e).forEach(([l, a]) => {
    typeof a > "u" || (/^on\w+$/.test(l) ? o2[l] = a : l === "selected" ? a && o2.setAttribute(l, "true") : o2.setAttribute(l, a));
  }), o2.append(...i), o2;
}
function Ra(s15, t, ...e) {
  return Ho("http://www.w3.org/1999/xhtml", s15, t, ...e);
}
Ra.SVG = function(s15, t, ...e) {
  return Ho("http://www.w3.org/2000/svg", s15, t, ...e);
};
var ls = class {
  constructor(t) {
    this.domNode = t;
    this._maxWidth = "";
    this._width = "";
    this._height = "";
    this._top = "";
    this._left = "";
    this._bottom = "";
    this._right = "";
    this._paddingTop = "";
    this._paddingLeft = "";
    this._paddingBottom = "";
    this._paddingRight = "";
    this._fontFamily = "";
    this._fontWeight = "";
    this._fontSize = "";
    this._fontStyle = "";
    this._fontFeatureSettings = "";
    this._fontVariationSettings = "";
    this._textDecoration = "";
    this._lineHeight = "";
    this._letterSpacing = "";
    this._className = "";
    this._display = "";
    this._position = "";
    this._visibility = "";
    this._color = "";
    this._backgroundColor = "";
    this._layerHint = false;
    this._contain = "none";
    this._boxShadow = "";
  }
  setMaxWidth(t) {
    let e = Ie(t);
    this._maxWidth !== e && (this._maxWidth = e, this.domNode.style.maxWidth = this._maxWidth);
  }
  setWidth(t) {
    let e = Ie(t);
    this._width !== e && (this._width = e, this.domNode.style.width = this._width);
  }
  setHeight(t) {
    let e = Ie(t);
    this._height !== e && (this._height = e, this.domNode.style.height = this._height);
  }
  setTop(t) {
    let e = Ie(t);
    this._top !== e && (this._top = e, this.domNode.style.top = this._top);
  }
  setLeft(t) {
    let e = Ie(t);
    this._left !== e && (this._left = e, this.domNode.style.left = this._left);
  }
  setBottom(t) {
    let e = Ie(t);
    this._bottom !== e && (this._bottom = e, this.domNode.style.bottom = this._bottom);
  }
  setRight(t) {
    let e = Ie(t);
    this._right !== e && (this._right = e, this.domNode.style.right = this._right);
  }
  setPaddingTop(t) {
    let e = Ie(t);
    this._paddingTop !== e && (this._paddingTop = e, this.domNode.style.paddingTop = this._paddingTop);
  }
  setPaddingLeft(t) {
    let e = Ie(t);
    this._paddingLeft !== e && (this._paddingLeft = e, this.domNode.style.paddingLeft = this._paddingLeft);
  }
  setPaddingBottom(t) {
    let e = Ie(t);
    this._paddingBottom !== e && (this._paddingBottom = e, this.domNode.style.paddingBottom = this._paddingBottom);
  }
  setPaddingRight(t) {
    let e = Ie(t);
    this._paddingRight !== e && (this._paddingRight = e, this.domNode.style.paddingRight = this._paddingRight);
  }
  setFontFamily(t) {
    this._fontFamily !== t && (this._fontFamily = t, this.domNode.style.fontFamily = this._fontFamily);
  }
  setFontWeight(t) {
    this._fontWeight !== t && (this._fontWeight = t, this.domNode.style.fontWeight = this._fontWeight);
  }
  setFontSize(t) {
    let e = Ie(t);
    this._fontSize !== e && (this._fontSize = e, this.domNode.style.fontSize = this._fontSize);
  }
  setFontStyle(t) {
    this._fontStyle !== t && (this._fontStyle = t, this.domNode.style.fontStyle = this._fontStyle);
  }
  setFontFeatureSettings(t) {
    this._fontFeatureSettings !== t && (this._fontFeatureSettings = t, this.domNode.style.fontFeatureSettings = this._fontFeatureSettings);
  }
  setFontVariationSettings(t) {
    this._fontVariationSettings !== t && (this._fontVariationSettings = t, this.domNode.style.fontVariationSettings = this._fontVariationSettings);
  }
  setTextDecoration(t) {
    this._textDecoration !== t && (this._textDecoration = t, this.domNode.style.textDecoration = this._textDecoration);
  }
  setLineHeight(t) {
    let e = Ie(t);
    this._lineHeight !== e && (this._lineHeight = e, this.domNode.style.lineHeight = this._lineHeight);
  }
  setLetterSpacing(t) {
    let e = Ie(t);
    this._letterSpacing !== e && (this._letterSpacing = e, this.domNode.style.letterSpacing = this._letterSpacing);
  }
  setClassName(t) {
    this._className !== t && (this._className = t, this.domNode.className = this._className);
  }
  toggleClassName(t, e) {
    this.domNode.classList.toggle(t, e), this._className = this.domNode.className;
  }
  setDisplay(t) {
    this._display !== t && (this._display = t, this.domNode.style.display = this._display);
  }
  setPosition(t) {
    this._position !== t && (this._position = t, this.domNode.style.position = this._position);
  }
  setVisibility(t) {
    this._visibility !== t && (this._visibility = t, this.domNode.style.visibility = this._visibility);
  }
  setColor(t) {
    this._color !== t && (this._color = t, this.domNode.style.color = this._color);
  }
  setBackgroundColor(t) {
    this._backgroundColor !== t && (this._backgroundColor = t, this.domNode.style.backgroundColor = this._backgroundColor);
  }
  setLayerHinting(t) {
    this._layerHint !== t && (this._layerHint = t, this.domNode.style.transform = this._layerHint ? "translate3d(0px, 0px, 0px)" : "");
  }
  setBoxShadow(t) {
    this._boxShadow !== t && (this._boxShadow = t, this.domNode.style.boxShadow = t);
  }
  setContain(t) {
    this._contain !== t && (this._contain = t, this.domNode.style.contain = this._contain);
  }
  setAttribute(t, e) {
    this.domNode.setAttribute(t, e);
  }
  removeAttribute(t) {
    this.domNode.removeAttribute(t);
  }
  appendChild(t) {
    this.domNode.appendChild(t.domNode);
  }
  removeChild(t) {
    this.domNode.removeChild(t.domNode);
  }
};
function Ie(s15) {
  return typeof s15 == "number" ? `${s15}px` : s15;
}
function _t(s15) {
  return new ls(s15);
}
var Wt = class {
  constructor() {
    this._hooks = new Ee();
    this._pointerMoveCallback = null;
    this._onStopCallback = null;
  }
  dispose() {
    this.stopMonitoring(false), this._hooks.dispose();
  }
  stopMonitoring(t, e) {
    if (!this.isMonitoring()) return;
    this._hooks.clear(), this._pointerMoveCallback = null;
    let i = this._onStopCallback;
    this._onStopCallback = null, t && i && i(e);
  }
  isMonitoring() {
    return !!this._pointerMoveCallback;
  }
  startMonitoring(t, e, i, r, n) {
    this.isMonitoring() && this.stopMonitoring(false), this._pointerMoveCallback = r, this._onStopCallback = n;
    let o2 = t;
    try {
      t.setPointerCapture(e), this._hooks.add(C(() => {
        try {
          t.releasePointerCapture(e);
        } catch {
        }
      }));
    } catch {
      o2 = be(t);
    }
    this._hooks.add(L(o2, Y.POINTER_MOVE, (l) => {
      if (l.buttons !== i) {
        this.stopMonitoring(true);
        return;
      }
      l.preventDefault(), this._pointerMoveCallback(l);
    })), this._hooks.add(L(o2, Y.POINTER_UP, (l) => this.stopMonitoring(true)));
  }
};
function Wo(s15, t, e) {
  let i = null, r = null;
  if (typeof e.value == "function" ? (i = "value", r = e.value, r.length !== 0 && console.warn("Memoize should only be used in functions with zero parameters")) : typeof e.get == "function" && (i = "get", r = e.get), !r) throw new Error("not supported");
  let n = `$memoize$${t}`;
  e[i] = function(...o2) {
    return this.hasOwnProperty(n) || Object.defineProperty(this, n, { configurable: false, enumerable: false, writable: false, value: r.apply(this, o2) }), this[n];
  };
}
var He;
((n) => (n.Tap = "-xterm-gesturetap", n.Change = "-xterm-gesturechange", n.Start = "-xterm-gesturestart", n.End = "-xterm-gesturesend", n.Contextmenu = "-xterm-gesturecontextmenu"))(He ||= {});
var Q = class Q2 extends D {
  constructor() {
    super();
    this.dispatched = false;
    this.targets = new Ct();
    this.ignoreTargets = new Ct();
    this.activeTouches = {}, this.handle = null, this._lastSetTapCountTime = 0, this._register($.runAndSubscribe(No, ({ window: e, disposables: i }) => {
      i.add(L(e.document, "touchstart", (r) => this.onTouchStart(r), { passive: false })), i.add(L(e.document, "touchend", (r) => this.onTouchEnd(e, r))), i.add(L(e.document, "touchmove", (r) => this.onTouchMove(r), { passive: false }));
    }, { window: fe, disposables: this._store }));
  }
  static addTarget(e) {
    if (!Q2.isTouchDevice()) return D.None;
    Q2.INSTANCE || (Q2.INSTANCE = Gn(new Q2()));
    let i = Q2.INSTANCE.targets.push(e);
    return C(i);
  }
  static ignoreTarget(e) {
    if (!Q2.isTouchDevice()) return D.None;
    Q2.INSTANCE || (Q2.INSTANCE = Gn(new Q2()));
    let i = Q2.INSTANCE.ignoreTargets.push(e);
    return C(i);
  }
  static isTouchDevice() {
    return "ontouchstart" in fe || navigator.maxTouchPoints > 0;
  }
  dispose() {
    this.handle && (this.handle.dispose(), this.handle = null), super.dispose();
  }
  onTouchStart(e) {
    let i = Date.now();
    this.handle && (this.handle.dispose(), this.handle = null);
    for (let r = 0, n = e.targetTouches.length; r < n; r++) {
      let o2 = e.targetTouches.item(r);
      this.activeTouches[o2.identifier] = { id: o2.identifier, initialTarget: o2.target, initialTimeStamp: i, initialPageX: o2.pageX, initialPageY: o2.pageY, rollingTimestamps: [i], rollingPageX: [o2.pageX], rollingPageY: [o2.pageY] };
      let l = this.newGestureEvent(He.Start, o2.target);
      l.pageX = o2.pageX, l.pageY = o2.pageY, this.dispatchEvent(l);
    }
    this.dispatched && (e.preventDefault(), e.stopPropagation(), this.dispatched = false);
  }
  onTouchEnd(e, i) {
    let r = Date.now(), n = Object.keys(this.activeTouches).length;
    for (let o2 = 0, l = i.changedTouches.length; o2 < l; o2++) {
      let a = i.changedTouches.item(o2);
      if (!this.activeTouches.hasOwnProperty(String(a.identifier))) {
        console.warn("move of an UNKNOWN touch", a);
        continue;
      }
      let u = this.activeTouches[a.identifier], h2 = Date.now() - u.initialTimeStamp;
      if (h2 < Q2.HOLD_DELAY && Math.abs(u.initialPageX - Se(u.rollingPageX)) < 30 && Math.abs(u.initialPageY - Se(u.rollingPageY)) < 30) {
        let c = this.newGestureEvent(He.Tap, u.initialTarget);
        c.pageX = Se(u.rollingPageX), c.pageY = Se(u.rollingPageY), this.dispatchEvent(c);
      } else if (h2 >= Q2.HOLD_DELAY && Math.abs(u.initialPageX - Se(u.rollingPageX)) < 30 && Math.abs(u.initialPageY - Se(u.rollingPageY)) < 30) {
        let c = this.newGestureEvent(He.Contextmenu, u.initialTarget);
        c.pageX = Se(u.rollingPageX), c.pageY = Se(u.rollingPageY), this.dispatchEvent(c);
      } else if (n === 1) {
        let c = Se(u.rollingPageX), d = Se(u.rollingPageY), _2 = Se(u.rollingTimestamps) - u.rollingTimestamps[0], p = c - u.rollingPageX[0], m = d - u.rollingPageY[0], f = [...this.targets].filter((A) => u.initialTarget instanceof Node && A.contains(u.initialTarget));
        this.inertia(e, f, r, Math.abs(p) / _2, p > 0 ? 1 : -1, c, Math.abs(m) / _2, m > 0 ? 1 : -1, d);
      }
      this.dispatchEvent(this.newGestureEvent(He.End, u.initialTarget)), delete this.activeTouches[a.identifier];
    }
    this.dispatched && (i.preventDefault(), i.stopPropagation(), this.dispatched = false);
  }
  newGestureEvent(e, i) {
    let r = document.createEvent("CustomEvent");
    return r.initEvent(e, false, true), r.initialTarget = i, r.tapCount = 0, r;
  }
  dispatchEvent(e) {
    if (e.type === He.Tap) {
      let i = (/* @__PURE__ */ new Date()).getTime(), r = 0;
      i - this._lastSetTapCountTime > Q2.CLEAR_TAP_COUNT_TIME ? r = 1 : r = 2, this._lastSetTapCountTime = i, e.tapCount = r;
    } else (e.type === He.Change || e.type === He.Contextmenu) && (this._lastSetTapCountTime = 0);
    if (e.initialTarget instanceof Node) {
      for (let r of this.ignoreTargets) if (r.contains(e.initialTarget)) return;
      let i = [];
      for (let r of this.targets) if (r.contains(e.initialTarget)) {
        let n = 0, o2 = e.initialTarget;
        for (; o2 && o2 !== r; ) n++, o2 = o2.parentElement;
        i.push([n, r]);
      }
      i.sort((r, n) => r[0] - n[0]);
      for (let [r, n] of i) n.dispatchEvent(e), this.dispatched = true;
    }
  }
  inertia(e, i, r, n, o2, l, a, u, h2) {
    this.handle = mt(e, () => {
      let c = Date.now(), d = c - r, _2 = 0, p = 0, m = true;
      n += Q2.SCROLL_FRICTION * d, a += Q2.SCROLL_FRICTION * d, n > 0 && (m = false, _2 = o2 * n * d), a > 0 && (m = false, p = u * a * d);
      let f = this.newGestureEvent(He.Change);
      f.translationX = _2, f.translationY = p, i.forEach((A) => A.dispatchEvent(f)), m || this.inertia(e, i, c, n, o2, l + _2, a, u, h2 + p);
    });
  }
  onTouchMove(e) {
    let i = Date.now();
    for (let r = 0, n = e.changedTouches.length; r < n; r++) {
      let o2 = e.changedTouches.item(r);
      if (!this.activeTouches.hasOwnProperty(String(o2.identifier))) {
        console.warn("end of an UNKNOWN touch", o2);
        continue;
      }
      let l = this.activeTouches[o2.identifier], a = this.newGestureEvent(He.Change, l.initialTarget);
      a.translationX = o2.pageX - Se(l.rollingPageX), a.translationY = o2.pageY - Se(l.rollingPageY), a.pageX = o2.pageX, a.pageY = o2.pageY, this.dispatchEvent(a), l.rollingPageX.length > 3 && (l.rollingPageX.shift(), l.rollingPageY.shift(), l.rollingTimestamps.shift()), l.rollingPageX.push(o2.pageX), l.rollingPageY.push(o2.pageY), l.rollingTimestamps.push(i);
    }
    this.dispatched && (e.preventDefault(), e.stopPropagation(), this.dispatched = false);
  }
};
Q.SCROLL_FRICTION = -5e-3, Q.HOLD_DELAY = 700, Q.CLEAR_TAP_COUNT_TIME = 400, M([Wo], Q, "isTouchDevice", 1);
var Pr = Q;
var lt = class extends D {
  onclick(t, e) {
    this._register(L(t, Y.CLICK, (i) => e(new qe(be(t), i))));
  }
  onmousedown(t, e) {
    this._register(L(t, Y.MOUSE_DOWN, (i) => e(new qe(be(t), i))));
  }
  onmouseover(t, e) {
    this._register(L(t, Y.MOUSE_OVER, (i) => e(new qe(be(t), i))));
  }
  onmouseleave(t, e) {
    this._register(L(t, Y.MOUSE_LEAVE, (i) => e(new qe(be(t), i))));
  }
  onkeydown(t, e) {
    this._register(L(t, Y.KEY_DOWN, (i) => e(new ft(i))));
  }
  onkeyup(t, e) {
    this._register(L(t, Y.KEY_UP, (i) => e(new ft(i))));
  }
  oninput(t, e) {
    this._register(L(t, Y.INPUT, e));
  }
  onblur(t, e) {
    this._register(L(t, Y.BLUR, e));
  }
  onfocus(t, e) {
    this._register(L(t, Y.FOCUS, e));
  }
  onchange(t, e) {
    this._register(L(t, Y.CHANGE, e));
  }
  ignoreGesture(t) {
    return Pr.ignoreTarget(t);
  }
};
var Uo = 11;
var Or = class extends lt {
  constructor(t) {
    super(), this._onActivate = t.onActivate, this.bgDomNode = document.createElement("div"), this.bgDomNode.className = "arrow-background", this.bgDomNode.style.position = "absolute", this.bgDomNode.style.width = t.bgWidth + "px", this.bgDomNode.style.height = t.bgHeight + "px", typeof t.top < "u" && (this.bgDomNode.style.top = "0px"), typeof t.left < "u" && (this.bgDomNode.style.left = "0px"), typeof t.bottom < "u" && (this.bgDomNode.style.bottom = "0px"), typeof t.right < "u" && (this.bgDomNode.style.right = "0px"), this.domNode = document.createElement("div"), this.domNode.className = t.className, this.domNode.style.position = "absolute", this.domNode.style.width = Uo + "px", this.domNode.style.height = Uo + "px", typeof t.top < "u" && (this.domNode.style.top = t.top + "px"), typeof t.left < "u" && (this.domNode.style.left = t.left + "px"), typeof t.bottom < "u" && (this.domNode.style.bottom = t.bottom + "px"), typeof t.right < "u" && (this.domNode.style.right = t.right + "px"), this._pointerMoveMonitor = this._register(new Wt()), this._register(os(this.bgDomNode, Y.POINTER_DOWN, (e) => this._arrowPointerDown(e))), this._register(os(this.domNode, Y.POINTER_DOWN, (e) => this._arrowPointerDown(e))), this._pointerdownRepeatTimer = this._register(new Mr()), this._pointerdownScheduleRepeatTimer = this._register(new Ye());
  }
  _arrowPointerDown(t) {
    if (!t.target || !(t.target instanceof Element)) return;
    let e = () => {
      this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1e3 / 24, be(t));
    };
    this._onActivate(), this._pointerdownRepeatTimer.cancel(), this._pointerdownScheduleRepeatTimer.cancelAndSet(e, 200), this._pointerMoveMonitor.startMonitoring(t.target, t.pointerId, t.buttons, (i) => {
    }, () => {
      this._pointerdownRepeatTimer.cancel(), this._pointerdownScheduleRepeatTimer.cancel();
    }), t.preventDefault();
  }
};
var cs = class s9 {
  constructor(t, e, i, r, n, o2, l) {
    this._forceIntegerValues = t;
    this._scrollStateBrand = void 0;
    this._forceIntegerValues && (e = e | 0, i = i | 0, r = r | 0, n = n | 0, o2 = o2 | 0, l = l | 0), this.rawScrollLeft = r, this.rawScrollTop = l, e < 0 && (e = 0), r + e > i && (r = i - e), r < 0 && (r = 0), n < 0 && (n = 0), l + n > o2 && (l = o2 - n), l < 0 && (l = 0), this.width = e, this.scrollWidth = i, this.scrollLeft = r, this.height = n, this.scrollHeight = o2, this.scrollTop = l;
  }
  equals(t) {
    return this.rawScrollLeft === t.rawScrollLeft && this.rawScrollTop === t.rawScrollTop && this.width === t.width && this.scrollWidth === t.scrollWidth && this.scrollLeft === t.scrollLeft && this.height === t.height && this.scrollHeight === t.scrollHeight && this.scrollTop === t.scrollTop;
  }
  withScrollDimensions(t, e) {
    return new s9(this._forceIntegerValues, typeof t.width < "u" ? t.width : this.width, typeof t.scrollWidth < "u" ? t.scrollWidth : this.scrollWidth, e ? this.rawScrollLeft : this.scrollLeft, typeof t.height < "u" ? t.height : this.height, typeof t.scrollHeight < "u" ? t.scrollHeight : this.scrollHeight, e ? this.rawScrollTop : this.scrollTop);
  }
  withScrollPosition(t) {
    return new s9(this._forceIntegerValues, this.width, this.scrollWidth, typeof t.scrollLeft < "u" ? t.scrollLeft : this.rawScrollLeft, this.height, this.scrollHeight, typeof t.scrollTop < "u" ? t.scrollTop : this.rawScrollTop);
  }
  createScrollEvent(t, e) {
    let i = this.width !== t.width, r = this.scrollWidth !== t.scrollWidth, n = this.scrollLeft !== t.scrollLeft, o2 = this.height !== t.height, l = this.scrollHeight !== t.scrollHeight, a = this.scrollTop !== t.scrollTop;
    return { inSmoothScrolling: e, oldWidth: t.width, oldScrollWidth: t.scrollWidth, oldScrollLeft: t.scrollLeft, width: this.width, scrollWidth: this.scrollWidth, scrollLeft: this.scrollLeft, oldHeight: t.height, oldScrollHeight: t.scrollHeight, oldScrollTop: t.scrollTop, height: this.height, scrollHeight: this.scrollHeight, scrollTop: this.scrollTop, widthChanged: i, scrollWidthChanged: r, scrollLeftChanged: n, heightChanged: o2, scrollHeightChanged: l, scrollTopChanged: a };
  }
};
var Ri = class extends D {
  constructor(e) {
    super();
    this._scrollableBrand = void 0;
    this._onScroll = this._register(new v());
    this.onScroll = this._onScroll.event;
    this._smoothScrollDuration = e.smoothScrollDuration, this._scheduleAtNextAnimationFrame = e.scheduleAtNextAnimationFrame, this._state = new cs(e.forceIntegerValues, 0, 0, 0, 0, 0, 0), this._smoothScrolling = null;
  }
  dispose() {
    this._smoothScrolling && (this._smoothScrolling.dispose(), this._smoothScrolling = null), super.dispose();
  }
  setSmoothScrollDuration(e) {
    this._smoothScrollDuration = e;
  }
  validateScrollPosition(e) {
    return this._state.withScrollPosition(e);
  }
  getScrollDimensions() {
    return this._state;
  }
  setScrollDimensions(e, i) {
    let r = this._state.withScrollDimensions(e, i);
    this._setState(r, !!this._smoothScrolling), this._smoothScrolling?.acceptScrollDimensions(this._state);
  }
  getFutureScrollPosition() {
    return this._smoothScrolling ? this._smoothScrolling.to : this._state;
  }
  getCurrentScrollPosition() {
    return this._state;
  }
  setScrollPositionNow(e) {
    let i = this._state.withScrollPosition(e);
    this._smoothScrolling && (this._smoothScrolling.dispose(), this._smoothScrolling = null), this._setState(i, false);
  }
  setScrollPositionSmooth(e, i) {
    if (this._smoothScrollDuration === 0) return this.setScrollPositionNow(e);
    if (this._smoothScrolling) {
      e = { scrollLeft: typeof e.scrollLeft > "u" ? this._smoothScrolling.to.scrollLeft : e.scrollLeft, scrollTop: typeof e.scrollTop > "u" ? this._smoothScrolling.to.scrollTop : e.scrollTop };
      let r = this._state.withScrollPosition(e);
      if (this._smoothScrolling.to.scrollLeft === r.scrollLeft && this._smoothScrolling.to.scrollTop === r.scrollTop) return;
      let n;
      i ? n = new Nr(this._smoothScrolling.from, r, this._smoothScrolling.startTime, this._smoothScrolling.duration) : n = this._smoothScrolling.combine(this._state, r, this._smoothScrollDuration), this._smoothScrolling.dispose(), this._smoothScrolling = n;
    } else {
      let r = this._state.withScrollPosition(e);
      this._smoothScrolling = Nr.start(this._state, r, this._smoothScrollDuration);
    }
    this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(() => {
      this._smoothScrolling && (this._smoothScrolling.animationFrameDisposable = null, this._performSmoothScrolling());
    });
  }
  hasPendingScrollAnimation() {
    return !!this._smoothScrolling;
  }
  _performSmoothScrolling() {
    if (!this._smoothScrolling) return;
    let e = this._smoothScrolling.tick(), i = this._state.withScrollPosition(e);
    if (this._setState(i, true), !!this._smoothScrolling) {
      if (e.isDone) {
        this._smoothScrolling.dispose(), this._smoothScrolling = null;
        return;
      }
      this._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(() => {
        this._smoothScrolling && (this._smoothScrolling.animationFrameDisposable = null, this._performSmoothScrolling());
      });
    }
  }
  _setState(e, i) {
    let r = this._state;
    r.equals(e) || (this._state = e, this._onScroll.fire(this._state.createScrollEvent(r, i)));
  }
};
var Br = class {
  constructor(t, e, i) {
    this.scrollLeft = t, this.scrollTop = e, this.isDone = i;
  }
};
function as(s15, t) {
  let e = t - s15;
  return function(i) {
    return s15 + e * ka(i);
  };
}
function La(s15, t, e) {
  return function(i) {
    return i < e ? s15(i / e) : t((i - e) / (1 - e));
  };
}
var Nr = class s10 {
  constructor(t, e, i, r) {
    this.from = t, this.to = e, this.duration = r, this.startTime = i, this.animationFrameDisposable = null, this._initAnimations();
  }
  _initAnimations() {
    this.scrollLeft = this._initAnimation(this.from.scrollLeft, this.to.scrollLeft, this.to.width), this.scrollTop = this._initAnimation(this.from.scrollTop, this.to.scrollTop, this.to.height);
  }
  _initAnimation(t, e, i) {
    if (Math.abs(t - e) > 2.5 * i) {
      let n, o2;
      return t < e ? (n = t + 0.75 * i, o2 = e - 0.75 * i) : (n = t - 0.75 * i, o2 = e + 0.75 * i), La(as(t, n), as(o2, e), 0.33);
    }
    return as(t, e);
  }
  dispose() {
    this.animationFrameDisposable !== null && (this.animationFrameDisposable.dispose(), this.animationFrameDisposable = null);
  }
  acceptScrollDimensions(t) {
    this.to = t.withScrollPosition(this.to), this._initAnimations();
  }
  tick() {
    return this._tick(Date.now());
  }
  _tick(t) {
    let e = (t - this.startTime) / this.duration;
    if (e < 1) {
      let i = this.scrollLeft(e), r = this.scrollTop(e);
      return new Br(i, r, false);
    }
    return new Br(this.to.scrollLeft, this.to.scrollTop, true);
  }
  combine(t, e, i) {
    return s10.start(t, e, i);
  }
  static start(t, e, i) {
    i = i + 10;
    let r = Date.now() - 10;
    return new s10(t, e, r, i);
  }
};
function Aa(s15) {
  return Math.pow(s15, 3);
}
function ka(s15) {
  return 1 - Aa(1 - s15);
}
var Fr = class extends D {
  constructor(t, e, i) {
    super(), this._visibility = t, this._visibleClassName = e, this._invisibleClassName = i, this._domNode = null, this._isVisible = false, this._isNeeded = false, this._rawShouldBeVisible = false, this._shouldBeVisible = false, this._revealTimer = this._register(new Ye());
  }
  setVisibility(t) {
    this._visibility !== t && (this._visibility = t, this._updateShouldBeVisible());
  }
  setShouldBeVisible(t) {
    this._rawShouldBeVisible = t, this._updateShouldBeVisible();
  }
  _applyVisibilitySetting() {
    return this._visibility === 2 ? false : this._visibility === 3 ? true : this._rawShouldBeVisible;
  }
  _updateShouldBeVisible() {
    let t = this._applyVisibilitySetting();
    this._shouldBeVisible !== t && (this._shouldBeVisible = t, this.ensureVisibility());
  }
  setIsNeeded(t) {
    this._isNeeded !== t && (this._isNeeded = t, this.ensureVisibility());
  }
  setDomNode(t) {
    this._domNode = t, this._domNode.setClassName(this._invisibleClassName), this.setShouldBeVisible(false);
  }
  ensureVisibility() {
    if (!this._isNeeded) {
      this._hide(false);
      return;
    }
    this._shouldBeVisible ? this._reveal() : this._hide(true);
  }
  _reveal() {
    this._isVisible || (this._isVisible = true, this._revealTimer.setIfNotSet(() => {
      this._domNode?.setClassName(this._visibleClassName);
    }, 0));
  }
  _hide(t) {
    this._revealTimer.cancel(), this._isVisible && (this._isVisible = false, this._domNode?.setClassName(this._invisibleClassName + (t ? " fade" : "")));
  }
};
var Ca = 140;
var Ut = class extends lt {
  constructor(t) {
    super(), this._lazyRender = t.lazyRender, this._host = t.host, this._scrollable = t.scrollable, this._scrollByPage = t.scrollByPage, this._scrollbarState = t.scrollbarState, this._visibilityController = this._register(new Fr(t.visibility, "visible scrollbar " + t.extraScrollbarClassName, "invisible scrollbar " + t.extraScrollbarClassName)), this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()), this._pointerMoveMonitor = this._register(new Wt()), this._shouldRender = true, this.domNode = _t(document.createElement("div")), this.domNode.setAttribute("role", "presentation"), this.domNode.setAttribute("aria-hidden", "true"), this._visibilityController.setDomNode(this.domNode), this.domNode.setPosition("absolute"), this._register(L(this.domNode.domNode, Y.POINTER_DOWN, (e) => this._domNodePointerDown(e)));
  }
  _createArrow(t) {
    let e = this._register(new Or(t));
    this.domNode.domNode.appendChild(e.bgDomNode), this.domNode.domNode.appendChild(e.domNode);
  }
  _createSlider(t, e, i, r) {
    this.slider = _t(document.createElement("div")), this.slider.setClassName("slider"), this.slider.setPosition("absolute"), this.slider.setTop(t), this.slider.setLeft(e), typeof i == "number" && this.slider.setWidth(i), typeof r == "number" && this.slider.setHeight(r), this.slider.setLayerHinting(true), this.slider.setContain("strict"), this.domNode.domNode.appendChild(this.slider.domNode), this._register(L(this.slider.domNode, Y.POINTER_DOWN, (n) => {
      n.button === 0 && (n.preventDefault(), this._sliderPointerDown(n));
    })), this.onclick(this.slider.domNode, (n) => {
      n.leftButton && n.stopPropagation();
    });
  }
  _onElementSize(t) {
    return this._scrollbarState.setVisibleSize(t) && (this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()), this._shouldRender = true, this._lazyRender || this.render()), this._shouldRender;
  }
  _onElementScrollSize(t) {
    return this._scrollbarState.setScrollSize(t) && (this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()), this._shouldRender = true, this._lazyRender || this.render()), this._shouldRender;
  }
  _onElementScrollPosition(t) {
    return this._scrollbarState.setScrollPosition(t) && (this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()), this._shouldRender = true, this._lazyRender || this.render()), this._shouldRender;
  }
  beginReveal() {
    this._visibilityController.setShouldBeVisible(true);
  }
  beginHide() {
    this._visibilityController.setShouldBeVisible(false);
  }
  render() {
    this._shouldRender && (this._shouldRender = false, this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize()), this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition()));
  }
  _domNodePointerDown(t) {
    t.target === this.domNode.domNode && this._onPointerDown(t);
  }
  delegatePointerDown(t) {
    let e = this.domNode.domNode.getClientRects()[0].top, i = e + this._scrollbarState.getSliderPosition(), r = e + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize(), n = this._sliderPointerPosition(t);
    i <= n && n <= r ? t.button === 0 && (t.preventDefault(), this._sliderPointerDown(t)) : this._onPointerDown(t);
  }
  _onPointerDown(t) {
    let e, i;
    if (t.target === this.domNode.domNode && typeof t.offsetX == "number" && typeof t.offsetY == "number") e = t.offsetX, i = t.offsetY;
    else {
      let n = Fo(this.domNode.domNode);
      e = t.pageX - n.left, i = t.pageY - n.top;
    }
    let r = this._pointerDownRelativePosition(e, i);
    this._setDesiredScrollPositionNow(this._scrollByPage ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(r) : this._scrollbarState.getDesiredScrollPositionFromOffset(r)), t.button === 0 && (t.preventDefault(), this._sliderPointerDown(t));
  }
  _sliderPointerDown(t) {
    if (!t.target || !(t.target instanceof Element)) return;
    let e = this._sliderPointerPosition(t), i = this._sliderOrthogonalPointerPosition(t), r = this._scrollbarState.clone();
    this.slider.toggleClassName("active", true), this._pointerMoveMonitor.startMonitoring(t.target, t.pointerId, t.buttons, (n) => {
      let o2 = this._sliderOrthogonalPointerPosition(n), l = Math.abs(o2 - i);
      if (wr && l > Ca) {
        this._setDesiredScrollPositionNow(r.getScrollPosition());
        return;
      }
      let u = this._sliderPointerPosition(n) - e;
      this._setDesiredScrollPositionNow(r.getDesiredScrollPositionFromDelta(u));
    }, () => {
      this.slider.toggleClassName("active", false), this._host.onDragEnd();
    }), this._host.onDragStart();
  }
  _setDesiredScrollPositionNow(t) {
    let e = {};
    this.writeScrollPosition(e, t), this._scrollable.setScrollPositionNow(e);
  }
  updateScrollbarSize(t) {
    this._updateScrollbarSize(t), this._scrollbarState.setScrollbarSize(t), this._shouldRender = true, this._lazyRender || this.render();
  }
  isNeeded() {
    return this._scrollbarState.isNeeded();
  }
};
var Kt = class s11 {
  constructor(t, e, i, r, n, o2) {
    this._scrollbarSize = Math.round(e), this._oppositeScrollbarSize = Math.round(i), this._arrowSize = Math.round(t), this._visibleSize = r, this._scrollSize = n, this._scrollPosition = o2, this._computedAvailableSize = 0, this._computedIsNeeded = false, this._computedSliderSize = 0, this._computedSliderRatio = 0, this._computedSliderPosition = 0, this._refreshComputedValues();
  }
  clone() {
    return new s11(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);
  }
  setVisibleSize(t) {
    let e = Math.round(t);
    return this._visibleSize !== e ? (this._visibleSize = e, this._refreshComputedValues(), true) : false;
  }
  setScrollSize(t) {
    let e = Math.round(t);
    return this._scrollSize !== e ? (this._scrollSize = e, this._refreshComputedValues(), true) : false;
  }
  setScrollPosition(t) {
    let e = Math.round(t);
    return this._scrollPosition !== e ? (this._scrollPosition = e, this._refreshComputedValues(), true) : false;
  }
  setScrollbarSize(t) {
    this._scrollbarSize = Math.round(t);
  }
  setOppositeScrollbarSize(t) {
    this._oppositeScrollbarSize = Math.round(t);
  }
  static _computeValues(t, e, i, r, n) {
    let o2 = Math.max(0, i - t), l = Math.max(0, o2 - 2 * e), a = r > 0 && r > i;
    if (!a) return { computedAvailableSize: Math.round(o2), computedIsNeeded: a, computedSliderSize: Math.round(l), computedSliderRatio: 0, computedSliderPosition: 0 };
    let u = Math.round(Math.max(20, Math.floor(i * l / r))), h2 = (l - u) / (r - i), c = n * h2;
    return { computedAvailableSize: Math.round(o2), computedIsNeeded: a, computedSliderSize: Math.round(u), computedSliderRatio: h2, computedSliderPosition: Math.round(c) };
  }
  _refreshComputedValues() {
    let t = s11._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);
    this._computedAvailableSize = t.computedAvailableSize, this._computedIsNeeded = t.computedIsNeeded, this._computedSliderSize = t.computedSliderSize, this._computedSliderRatio = t.computedSliderRatio, this._computedSliderPosition = t.computedSliderPosition;
  }
  getArrowSize() {
    return this._arrowSize;
  }
  getScrollPosition() {
    return this._scrollPosition;
  }
  getRectangleLargeSize() {
    return this._computedAvailableSize;
  }
  getRectangleSmallSize() {
    return this._scrollbarSize;
  }
  isNeeded() {
    return this._computedIsNeeded;
  }
  getSliderSize() {
    return this._computedSliderSize;
  }
  getSliderPosition() {
    return this._computedSliderPosition;
  }
  getDesiredScrollPositionFromOffset(t) {
    if (!this._computedIsNeeded) return 0;
    let e = t - this._arrowSize - this._computedSliderSize / 2;
    return Math.round(e / this._computedSliderRatio);
  }
  getDesiredScrollPositionFromOffsetPaged(t) {
    if (!this._computedIsNeeded) return 0;
    let e = t - this._arrowSize, i = this._scrollPosition;
    return e < this._computedSliderPosition ? i -= this._visibleSize : i += this._visibleSize, i;
  }
  getDesiredScrollPositionFromDelta(t) {
    if (!this._computedIsNeeded) return 0;
    let e = this._computedSliderPosition + t;
    return Math.round(e / this._computedSliderRatio);
  }
};
var Wr = class extends Ut {
  constructor(t, e, i) {
    let r = t.getScrollDimensions(), n = t.getCurrentScrollPosition();
    if (super({ lazyRender: e.lazyRender, host: i, scrollbarState: new Kt(e.horizontalHasArrows ? e.arrowSize : 0, e.horizontal === 2 ? 0 : e.horizontalScrollbarSize, e.vertical === 2 ? 0 : e.verticalScrollbarSize, r.width, r.scrollWidth, n.scrollLeft), visibility: e.horizontal, extraScrollbarClassName: "horizontal", scrollable: t, scrollByPage: e.scrollByPage }), e.horizontalHasArrows) throw new Error("horizontalHasArrows is not supported in xterm.js");
    this._createSlider(Math.floor((e.horizontalScrollbarSize - e.horizontalSliderSize) / 2), 0, void 0, e.horizontalSliderSize);
  }
  _updateSlider(t, e) {
    this.slider.setWidth(t), this.slider.setLeft(e);
  }
  _renderDomNode(t, e) {
    this.domNode.setWidth(t), this.domNode.setHeight(e), this.domNode.setLeft(0), this.domNode.setBottom(0);
  }
  onDidScroll(t) {
    return this._shouldRender = this._onElementScrollSize(t.scrollWidth) || this._shouldRender, this._shouldRender = this._onElementScrollPosition(t.scrollLeft) || this._shouldRender, this._shouldRender = this._onElementSize(t.width) || this._shouldRender, this._shouldRender;
  }
  _pointerDownRelativePosition(t, e) {
    return t;
  }
  _sliderPointerPosition(t) {
    return t.pageX;
  }
  _sliderOrthogonalPointerPosition(t) {
    return t.pageY;
  }
  _updateScrollbarSize(t) {
    this.slider.setHeight(t);
  }
  writeScrollPosition(t, e) {
    t.scrollLeft = e;
  }
  updateOptions(t) {
    this.updateScrollbarSize(t.horizontal === 2 ? 0 : t.horizontalScrollbarSize), this._scrollbarState.setOppositeScrollbarSize(t.vertical === 2 ? 0 : t.verticalScrollbarSize), this._visibilityController.setVisibility(t.horizontal), this._scrollByPage = t.scrollByPage;
  }
};
var Ur = class extends Ut {
  constructor(t, e, i) {
    let r = t.getScrollDimensions(), n = t.getCurrentScrollPosition();
    if (super({ lazyRender: e.lazyRender, host: i, scrollbarState: new Kt(e.verticalHasArrows ? e.arrowSize : 0, e.vertical === 2 ? 0 : e.verticalScrollbarSize, 0, r.height, r.scrollHeight, n.scrollTop), visibility: e.vertical, extraScrollbarClassName: "vertical", scrollable: t, scrollByPage: e.scrollByPage }), e.verticalHasArrows) throw new Error("horizontalHasArrows is not supported in xterm.js");
    this._createSlider(0, Math.floor((e.verticalScrollbarSize - e.verticalSliderSize) / 2), e.verticalSliderSize, void 0);
  }
  _updateSlider(t, e) {
    this.slider.setHeight(t), this.slider.setTop(e);
  }
  _renderDomNode(t, e) {
    this.domNode.setWidth(e), this.domNode.setHeight(t), this.domNode.setRight(0), this.domNode.setTop(0);
  }
  onDidScroll(t) {
    return this._shouldRender = this._onElementScrollSize(t.scrollHeight) || this._shouldRender, this._shouldRender = this._onElementScrollPosition(t.scrollTop) || this._shouldRender, this._shouldRender = this._onElementSize(t.height) || this._shouldRender, this._shouldRender;
  }
  _pointerDownRelativePosition(t, e) {
    return e;
  }
  _sliderPointerPosition(t) {
    return t.pageY;
  }
  _sliderOrthogonalPointerPosition(t) {
    return t.pageX;
  }
  _updateScrollbarSize(t) {
    this.slider.setWidth(t);
  }
  writeScrollPosition(t, e) {
    t.scrollTop = e;
  }
  updateOptions(t) {
    this.updateScrollbarSize(t.vertical === 2 ? 0 : t.verticalScrollbarSize), this._scrollbarState.setOppositeScrollbarSize(0), this._visibilityController.setVisibility(t.vertical), this._scrollByPage = t.scrollByPage;
  }
};
var Ma = 500;
var Ko = 50;
var zo = true;
var us = class {
  constructor(t, e, i) {
    this.timestamp = t, this.deltaX = e, this.deltaY = i, this.score = 0;
  }
};
var zr = class zr2 {
  constructor() {
    this._capacity = 5, this._memory = [], this._front = -1, this._rear = -1;
  }
  isPhysicalMouseWheel() {
    if (this._front === -1 && this._rear === -1) return false;
    let t = 1, e = 0, i = 1, r = this._rear;
    do {
      let n = r === this._front ? t : Math.pow(2, -i);
      if (t -= n, e += this._memory[r].score * n, r === this._front) break;
      r = (this._capacity + r - 1) % this._capacity, i++;
    } while (true);
    return e <= 0.5;
  }
  acceptStandardWheelEvent(t) {
    if (Ti) {
      let e = be(t.browserEvent), i = mo(e);
      this.accept(Date.now(), t.deltaX * i, t.deltaY * i);
    } else this.accept(Date.now(), t.deltaX, t.deltaY);
  }
  accept(t, e, i) {
    let r = null, n = new us(t, e, i);
    this._front === -1 && this._rear === -1 ? (this._memory[0] = n, this._front = 0, this._rear = 0) : (r = this._memory[this._rear], this._rear = (this._rear + 1) % this._capacity, this._rear === this._front && (this._front = (this._front + 1) % this._capacity), this._memory[this._rear] = n), n.score = this._computeScore(n, r);
  }
  _computeScore(t, e) {
    if (Math.abs(t.deltaX) > 0 && Math.abs(t.deltaY) > 0) return 1;
    let i = 0.5;
    if ((!this._isAlmostInt(t.deltaX) || !this._isAlmostInt(t.deltaY)) && (i += 0.25), e) {
      let r = Math.abs(t.deltaX), n = Math.abs(t.deltaY), o2 = Math.abs(e.deltaX), l = Math.abs(e.deltaY), a = Math.max(Math.min(r, o2), 1), u = Math.max(Math.min(n, l), 1), h2 = Math.max(r, o2), c = Math.max(n, l);
      h2 % a === 0 && c % u === 0 && (i -= 0.5);
    }
    return Math.min(Math.max(i, 0), 1);
  }
  _isAlmostInt(t) {
    return Math.abs(Math.round(t) - t) < 0.01;
  }
};
zr.INSTANCE = new zr();
var hs = zr;
var ds = class extends lt {
  constructor(e, i, r) {
    super();
    this._onScroll = this._register(new v());
    this.onScroll = this._onScroll.event;
    this._onWillScroll = this._register(new v());
    this.onWillScroll = this._onWillScroll.event;
    this._options = Pa(i), this._scrollable = r, this._register(this._scrollable.onScroll((o2) => {
      this._onWillScroll.fire(o2), this._onDidScroll(o2), this._onScroll.fire(o2);
    }));
    let n = { onMouseWheel: (o2) => this._onMouseWheel(o2), onDragStart: () => this._onDragStart(), onDragEnd: () => this._onDragEnd() };
    this._verticalScrollbar = this._register(new Ur(this._scrollable, this._options, n)), this._horizontalScrollbar = this._register(new Wr(this._scrollable, this._options, n)), this._domNode = document.createElement("div"), this._domNode.className = "xterm-scrollable-element " + this._options.className, this._domNode.setAttribute("role", "presentation"), this._domNode.style.position = "relative", this._domNode.appendChild(e), this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode), this._domNode.appendChild(this._verticalScrollbar.domNode.domNode), this._options.useShadows ? (this._leftShadowDomNode = _t(document.createElement("div")), this._leftShadowDomNode.setClassName("shadow"), this._domNode.appendChild(this._leftShadowDomNode.domNode), this._topShadowDomNode = _t(document.createElement("div")), this._topShadowDomNode.setClassName("shadow"), this._domNode.appendChild(this._topShadowDomNode.domNode), this._topLeftShadowDomNode = _t(document.createElement("div")), this._topLeftShadowDomNode.setClassName("shadow"), this._domNode.appendChild(this._topLeftShadowDomNode.domNode)) : (this._leftShadowDomNode = null, this._topShadowDomNode = null, this._topLeftShadowDomNode = null), this._listenOnDomNode = this._options.listenOnDomNode || this._domNode, this._mouseWheelToDispose = [], this._setListeningToMouseWheel(this._options.handleMouseWheel), this.onmouseover(this._listenOnDomNode, (o2) => this._onMouseOver(o2)), this.onmouseleave(this._listenOnDomNode, (o2) => this._onMouseLeave(o2)), this._hideTimeout = this._register(new Ye()), this._isDragging = false, this._mouseIsOver = false, this._shouldRender = true, this._revealOnScroll = true;
  }
  get options() {
    return this._options;
  }
  dispose() {
    this._mouseWheelToDispose = Ne(this._mouseWheelToDispose), super.dispose();
  }
  getDomNode() {
    return this._domNode;
  }
  getOverviewRulerLayoutInfo() {
    return { parent: this._domNode, insertBefore: this._verticalScrollbar.domNode.domNode };
  }
  delegateVerticalScrollbarPointerDown(e) {
    this._verticalScrollbar.delegatePointerDown(e);
  }
  getScrollDimensions() {
    return this._scrollable.getScrollDimensions();
  }
  setScrollDimensions(e) {
    this._scrollable.setScrollDimensions(e, false);
  }
  updateClassName(e) {
    this._options.className = e, Te && (this._options.className += " mac"), this._domNode.className = "xterm-scrollable-element " + this._options.className;
  }
  updateOptions(e) {
    typeof e.handleMouseWheel < "u" && (this._options.handleMouseWheel = e.handleMouseWheel, this._setListeningToMouseWheel(this._options.handleMouseWheel)), typeof e.mouseWheelScrollSensitivity < "u" && (this._options.mouseWheelScrollSensitivity = e.mouseWheelScrollSensitivity), typeof e.fastScrollSensitivity < "u" && (this._options.fastScrollSensitivity = e.fastScrollSensitivity), typeof e.scrollPredominantAxis < "u" && (this._options.scrollPredominantAxis = e.scrollPredominantAxis), typeof e.horizontal < "u" && (this._options.horizontal = e.horizontal), typeof e.vertical < "u" && (this._options.vertical = e.vertical), typeof e.horizontalScrollbarSize < "u" && (this._options.horizontalScrollbarSize = e.horizontalScrollbarSize), typeof e.verticalScrollbarSize < "u" && (this._options.verticalScrollbarSize = e.verticalScrollbarSize), typeof e.scrollByPage < "u" && (this._options.scrollByPage = e.scrollByPage), this._horizontalScrollbar.updateOptions(this._options), this._verticalScrollbar.updateOptions(this._options), this._options.lazyRender || this._render();
  }
  setRevealOnScroll(e) {
    this._revealOnScroll = e;
  }
  delegateScrollFromMouseWheelEvent(e) {
    this._onMouseWheel(new xi(e));
  }
  _setListeningToMouseWheel(e) {
    if (this._mouseWheelToDispose.length > 0 !== e && (this._mouseWheelToDispose = Ne(this._mouseWheelToDispose), e)) {
      let r = (n) => {
        this._onMouseWheel(new xi(n));
      };
      this._mouseWheelToDispose.push(L(this._listenOnDomNode, Y.MOUSE_WHEEL, r, { passive: false }));
    }
  }
  _onMouseWheel(e) {
    if (e.browserEvent?.defaultPrevented) return;
    let i = hs.INSTANCE;
    zo && i.acceptStandardWheelEvent(e);
    let r = false;
    if (e.deltaY || e.deltaX) {
      let o2 = e.deltaY * this._options.mouseWheelScrollSensitivity, l = e.deltaX * this._options.mouseWheelScrollSensitivity;
      this._options.scrollPredominantAxis && (this._options.scrollYToX && l + o2 === 0 ? l = o2 = 0 : Math.abs(o2) >= Math.abs(l) ? l = 0 : o2 = 0), this._options.flipAxes && ([o2, l] = [l, o2]);
      let a = !Te && e.browserEvent && e.browserEvent.shiftKey;
      (this._options.scrollYToX || a) && !l && (l = o2, o2 = 0), e.browserEvent && e.browserEvent.altKey && (l = l * this._options.fastScrollSensitivity, o2 = o2 * this._options.fastScrollSensitivity);
      let u = this._scrollable.getFutureScrollPosition(), h2 = {};
      if (o2) {
        let c = Ko * o2, d = u.scrollTop - (c < 0 ? Math.floor(c) : Math.ceil(c));
        this._verticalScrollbar.writeScrollPosition(h2, d);
      }
      if (l) {
        let c = Ko * l, d = u.scrollLeft - (c < 0 ? Math.floor(c) : Math.ceil(c));
        this._horizontalScrollbar.writeScrollPosition(h2, d);
      }
      h2 = this._scrollable.validateScrollPosition(h2), (u.scrollLeft !== h2.scrollLeft || u.scrollTop !== h2.scrollTop) && (zo && this._options.mouseWheelSmoothScroll && i.isPhysicalMouseWheel() ? this._scrollable.setScrollPositionSmooth(h2) : this._scrollable.setScrollPositionNow(h2), r = true);
    }
    let n = r;
    !n && this._options.alwaysConsumeMouseWheel && (n = true), !n && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded()) && (n = true), n && (e.preventDefault(), e.stopPropagation());
  }
  _onDidScroll(e) {
    this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender, this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender, this._options.useShadows && (this._shouldRender = true), this._revealOnScroll && this._reveal(), this._options.lazyRender || this._render();
  }
  renderNow() {
    if (!this._options.lazyRender) throw new Error("Please use `lazyRender` together with `renderNow`!");
    this._render();
  }
  _render() {
    if (this._shouldRender && (this._shouldRender = false, this._horizontalScrollbar.render(), this._verticalScrollbar.render(), this._options.useShadows)) {
      let e = this._scrollable.getCurrentScrollPosition(), i = e.scrollTop > 0, r = e.scrollLeft > 0, n = r ? " left" : "", o2 = i ? " top" : "", l = r || i ? " top-left-corner" : "";
      this._leftShadowDomNode.setClassName(`shadow${n}`), this._topShadowDomNode.setClassName(`shadow${o2}`), this._topLeftShadowDomNode.setClassName(`shadow${l}${o2}${n}`);
    }
  }
  _onDragStart() {
    this._isDragging = true, this._reveal();
  }
  _onDragEnd() {
    this._isDragging = false, this._hide();
  }
  _onMouseLeave(e) {
    this._mouseIsOver = false, this._hide();
  }
  _onMouseOver(e) {
    this._mouseIsOver = true, this._reveal();
  }
  _reveal() {
    this._verticalScrollbar.beginReveal(), this._horizontalScrollbar.beginReveal(), this._scheduleHide();
  }
  _hide() {
    !this._mouseIsOver && !this._isDragging && (this._verticalScrollbar.beginHide(), this._horizontalScrollbar.beginHide());
  }
  _scheduleHide() {
    !this._mouseIsOver && !this._isDragging && this._hideTimeout.cancelAndSet(() => this._hide(), Ma);
  }
};
var Kr = class extends ds {
  constructor(t, e, i) {
    super(t, e, i);
  }
  setScrollPosition(t) {
    t.reuseAnimation ? this._scrollable.setScrollPositionSmooth(t, t.reuseAnimation) : this._scrollable.setScrollPositionNow(t);
  }
  getScrollPosition() {
    return this._scrollable.getCurrentScrollPosition();
  }
};
function Pa(s15) {
  let t = { lazyRender: typeof s15.lazyRender < "u" ? s15.lazyRender : false, className: typeof s15.className < "u" ? s15.className : "", useShadows: typeof s15.useShadows < "u" ? s15.useShadows : true, handleMouseWheel: typeof s15.handleMouseWheel < "u" ? s15.handleMouseWheel : true, flipAxes: typeof s15.flipAxes < "u" ? s15.flipAxes : false, consumeMouseWheelIfScrollbarIsNeeded: typeof s15.consumeMouseWheelIfScrollbarIsNeeded < "u" ? s15.consumeMouseWheelIfScrollbarIsNeeded : false, alwaysConsumeMouseWheel: typeof s15.alwaysConsumeMouseWheel < "u" ? s15.alwaysConsumeMouseWheel : false, scrollYToX: typeof s15.scrollYToX < "u" ? s15.scrollYToX : false, mouseWheelScrollSensitivity: typeof s15.mouseWheelScrollSensitivity < "u" ? s15.mouseWheelScrollSensitivity : 1, fastScrollSensitivity: typeof s15.fastScrollSensitivity < "u" ? s15.fastScrollSensitivity : 5, scrollPredominantAxis: typeof s15.scrollPredominantAxis < "u" ? s15.scrollPredominantAxis : true, mouseWheelSmoothScroll: typeof s15.mouseWheelSmoothScroll < "u" ? s15.mouseWheelSmoothScroll : true, arrowSize: typeof s15.arrowSize < "u" ? s15.arrowSize : 11, listenOnDomNode: typeof s15.listenOnDomNode < "u" ? s15.listenOnDomNode : null, horizontal: typeof s15.horizontal < "u" ? s15.horizontal : 1, horizontalScrollbarSize: typeof s15.horizontalScrollbarSize < "u" ? s15.horizontalScrollbarSize : 10, horizontalSliderSize: typeof s15.horizontalSliderSize < "u" ? s15.horizontalSliderSize : 0, horizontalHasArrows: typeof s15.horizontalHasArrows < "u" ? s15.horizontalHasArrows : false, vertical: typeof s15.vertical < "u" ? s15.vertical : 1, verticalScrollbarSize: typeof s15.verticalScrollbarSize < "u" ? s15.verticalScrollbarSize : 10, verticalHasArrows: typeof s15.verticalHasArrows < "u" ? s15.verticalHasArrows : false, verticalSliderSize: typeof s15.verticalSliderSize < "u" ? s15.verticalSliderSize : 0, scrollByPage: typeof s15.scrollByPage < "u" ? s15.scrollByPage : false };
  return t.horizontalSliderSize = typeof s15.horizontalSliderSize < "u" ? s15.horizontalSliderSize : t.horizontalScrollbarSize, t.verticalSliderSize = typeof s15.verticalSliderSize < "u" ? s15.verticalSliderSize : t.verticalScrollbarSize, Te && (t.className += " mac"), t;
}
var zt = class extends D {
  constructor(e, i, r, n, o2, l, a, u) {
    super();
    this._bufferService = r;
    this._optionsService = a;
    this._renderService = u;
    this._onRequestScrollLines = this._register(new v());
    this.onRequestScrollLines = this._onRequestScrollLines.event;
    this._isSyncing = false;
    this._isHandlingScroll = false;
    this._suppressOnScrollHandler = false;
    let h2 = this._register(new Ri({ forceIntegerValues: false, smoothScrollDuration: this._optionsService.rawOptions.smoothScrollDuration, scheduleAtNextAnimationFrame: (c) => mt(n.window, c) }));
    this._register(this._optionsService.onSpecificOptionChange("smoothScrollDuration", () => {
      h2.setSmoothScrollDuration(this._optionsService.rawOptions.smoothScrollDuration);
    })), this._scrollableElement = this._register(new Kr(i, { vertical: 1, horizontal: 2, useShadows: false, mouseWheelSmoothScroll: true, ...this._getChangeOptions() }, h2)), this._register(this._optionsService.onMultipleOptionChange(["scrollSensitivity", "fastScrollSensitivity", "overviewRuler"], () => this._scrollableElement.updateOptions(this._getChangeOptions()))), this._register(o2.onProtocolChange((c) => {
      this._scrollableElement.updateOptions({ handleMouseWheel: !(c & 16) });
    })), this._scrollableElement.setScrollDimensions({ height: 0, scrollHeight: 0 }), this._register($.runAndSubscribe(l.onChangeColors, () => {
      this._scrollableElement.getDomNode().style.backgroundColor = l.colors.background.css;
    })), e.appendChild(this._scrollableElement.getDomNode()), this._register(C(() => this._scrollableElement.getDomNode().remove())), this._styleElement = n.mainDocument.createElement("style"), i.appendChild(this._styleElement), this._register(C(() => this._styleElement.remove())), this._register($.runAndSubscribe(l.onChangeColors, () => {
      this._styleElement.textContent = [".xterm .xterm-scrollable-element > .scrollbar > .slider {", `  background: ${l.colors.scrollbarSliderBackground.css};`, "}", ".xterm .xterm-scrollable-element > .scrollbar > .slider:hover {", `  background: ${l.colors.scrollbarSliderHoverBackground.css};`, "}", ".xterm .xterm-scrollable-element > .scrollbar > .slider.active {", `  background: ${l.colors.scrollbarSliderActiveBackground.css};`, "}"].join(`
`);
    })), this._register(this._bufferService.onResize(() => this.queueSync())), this._register(this._bufferService.buffers.onBufferActivate(() => {
      this._latestYDisp = void 0, this.queueSync();
    })), this._register(this._bufferService.onScroll(() => this._sync())), this._register(this._scrollableElement.onScroll((c) => this._handleScroll(c)));
  }
  scrollLines(e) {
    let i = this._scrollableElement.getScrollPosition();
    this._scrollableElement.setScrollPosition({ reuseAnimation: true, scrollTop: i.scrollTop + e * this._renderService.dimensions.css.cell.height });
  }
  scrollToLine(e, i) {
    i && (this._latestYDisp = e), this._scrollableElement.setScrollPosition({ reuseAnimation: !i, scrollTop: e * this._renderService.dimensions.css.cell.height });
  }
  _getChangeOptions() {
    return { mouseWheelScrollSensitivity: this._optionsService.rawOptions.scrollSensitivity, fastScrollSensitivity: this._optionsService.rawOptions.fastScrollSensitivity, verticalScrollbarSize: this._optionsService.rawOptions.overviewRuler?.width || 14 };
  }
  queueSync(e) {
    e !== void 0 && (this._latestYDisp = e), this._queuedAnimationFrame === void 0 && (this._queuedAnimationFrame = this._renderService.addRefreshCallback(() => {
      this._queuedAnimationFrame = void 0, this._sync(this._latestYDisp);
    }));
  }
  _sync(e = this._bufferService.buffer.ydisp) {
    !this._renderService || this._isSyncing || (this._isSyncing = true, this._suppressOnScrollHandler = true, this._scrollableElement.setScrollDimensions({ height: this._renderService.dimensions.css.canvas.height, scrollHeight: this._renderService.dimensions.css.cell.height * this._bufferService.buffer.lines.length }), this._suppressOnScrollHandler = false, e !== this._latestYDisp && this._scrollableElement.setScrollPosition({ scrollTop: e * this._renderService.dimensions.css.cell.height }), this._isSyncing = false);
  }
  _handleScroll(e) {
    if (!this._renderService || this._isHandlingScroll || this._suppressOnScrollHandler) return;
    this._isHandlingScroll = true;
    let i = Math.round(e.scrollTop / this._renderService.dimensions.css.cell.height), r = i - this._bufferService.buffer.ydisp;
    r !== 0 && (this._latestYDisp = i, this._onRequestScrollLines.fire(r)), this._isHandlingScroll = false;
  }
};
zt = M([S(2, F), S(3, ae), S(4, rr), S(5, Re), S(6, H), S(7, ce)], zt);
var Gt = class extends D {
  constructor(e, i, r, n, o2) {
    super();
    this._screenElement = e;
    this._bufferService = i;
    this._coreBrowserService = r;
    this._decorationService = n;
    this._renderService = o2;
    this._decorationElements = /* @__PURE__ */ new Map();
    this._altBufferIsActive = false;
    this._dimensionsChanged = false;
    this._container = document.createElement("div"), this._container.classList.add("xterm-decoration-container"), this._screenElement.appendChild(this._container), this._register(this._renderService.onRenderedViewportChange(() => this._doRefreshDecorations())), this._register(this._renderService.onDimensionsChange(() => {
      this._dimensionsChanged = true, this._queueRefresh();
    })), this._register(this._coreBrowserService.onDprChange(() => this._queueRefresh())), this._register(this._bufferService.buffers.onBufferActivate(() => {
      this._altBufferIsActive = this._bufferService.buffer === this._bufferService.buffers.alt;
    })), this._register(this._decorationService.onDecorationRegistered(() => this._queueRefresh())), this._register(this._decorationService.onDecorationRemoved((l) => this._removeDecoration(l))), this._register(C(() => {
      this._container.remove(), this._decorationElements.clear();
    }));
  }
  _queueRefresh() {
    this._animationFrame === void 0 && (this._animationFrame = this._renderService.addRefreshCallback(() => {
      this._doRefreshDecorations(), this._animationFrame = void 0;
    }));
  }
  _doRefreshDecorations() {
    for (let e of this._decorationService.decorations) this._renderDecoration(e);
    this._dimensionsChanged = false;
  }
  _renderDecoration(e) {
    this._refreshStyle(e), this._dimensionsChanged && this._refreshXPosition(e);
  }
  _createElement(e) {
    let i = this._coreBrowserService.mainDocument.createElement("div");
    i.classList.add("xterm-decoration"), i.classList.toggle("xterm-decoration-top-layer", e?.options?.layer === "top"), i.style.width = `${Math.round((e.options.width || 1) * this._renderService.dimensions.css.cell.width)}px`, i.style.height = `${(e.options.height || 1) * this._renderService.dimensions.css.cell.height}px`, i.style.top = `${(e.marker.line - this._bufferService.buffers.active.ydisp) * this._renderService.dimensions.css.cell.height}px`, i.style.lineHeight = `${this._renderService.dimensions.css.cell.height}px`;
    let r = e.options.x ?? 0;
    return r && r > this._bufferService.cols && (i.style.display = "none"), this._refreshXPosition(e, i), i;
  }
  _refreshStyle(e) {
    let i = e.marker.line - this._bufferService.buffers.active.ydisp;
    if (i < 0 || i >= this._bufferService.rows) e.element && (e.element.style.display = "none", e.onRenderEmitter.fire(e.element));
    else {
      let r = this._decorationElements.get(e);
      r || (r = this._createElement(e), e.element = r, this._decorationElements.set(e, r), this._container.appendChild(r), e.onDispose(() => {
        this._decorationElements.delete(e), r.remove();
      })), r.style.display = this._altBufferIsActive ? "none" : "block", this._altBufferIsActive || (r.style.width = `${Math.round((e.options.width || 1) * this._renderService.dimensions.css.cell.width)}px`, r.style.height = `${(e.options.height || 1) * this._renderService.dimensions.css.cell.height}px`, r.style.top = `${i * this._renderService.dimensions.css.cell.height}px`, r.style.lineHeight = `${this._renderService.dimensions.css.cell.height}px`), e.onRenderEmitter.fire(r);
    }
  }
  _refreshXPosition(e, i = e.element) {
    if (!i) return;
    let r = e.options.x ?? 0;
    (e.options.anchor || "left") === "right" ? i.style.right = r ? `${r * this._renderService.dimensions.css.cell.width}px` : "" : i.style.left = r ? `${r * this._renderService.dimensions.css.cell.width}px` : "";
  }
  _removeDecoration(e) {
    this._decorationElements.get(e)?.remove(), this._decorationElements.delete(e), e.dispose();
  }
};
Gt = M([S(1, F), S(2, ae), S(3, Be), S(4, ce)], Gt);
var Gr = class {
  constructor() {
    this._zones = [];
    this._zonePool = [];
    this._zonePoolIndex = 0;
    this._linePadding = { full: 0, left: 0, center: 0, right: 0 };
  }
  get zones() {
    return this._zonePool.length = Math.min(this._zonePool.length, this._zones.length), this._zones;
  }
  clear() {
    this._zones.length = 0, this._zonePoolIndex = 0;
  }
  addDecoration(t) {
    if (t.options.overviewRulerOptions) {
      for (let e of this._zones) if (e.color === t.options.overviewRulerOptions.color && e.position === t.options.overviewRulerOptions.position) {
        if (this._lineIntersectsZone(e, t.marker.line)) return;
        if (this._lineAdjacentToZone(e, t.marker.line, t.options.overviewRulerOptions.position)) {
          this._addLineToZone(e, t.marker.line);
          return;
        }
      }
      if (this._zonePoolIndex < this._zonePool.length) {
        this._zonePool[this._zonePoolIndex].color = t.options.overviewRulerOptions.color, this._zonePool[this._zonePoolIndex].position = t.options.overviewRulerOptions.position, this._zonePool[this._zonePoolIndex].startBufferLine = t.marker.line, this._zonePool[this._zonePoolIndex].endBufferLine = t.marker.line, this._zones.push(this._zonePool[this._zonePoolIndex++]);
        return;
      }
      this._zones.push({ color: t.options.overviewRulerOptions.color, position: t.options.overviewRulerOptions.position, startBufferLine: t.marker.line, endBufferLine: t.marker.line }), this._zonePool.push(this._zones[this._zones.length - 1]), this._zonePoolIndex++;
    }
  }
  setPadding(t) {
    this._linePadding = t;
  }
  _lineIntersectsZone(t, e) {
    return e >= t.startBufferLine && e <= t.endBufferLine;
  }
  _lineAdjacentToZone(t, e, i) {
    return e >= t.startBufferLine - this._linePadding[i || "full"] && e <= t.endBufferLine + this._linePadding[i || "full"];
  }
  _addLineToZone(t, e) {
    t.startBufferLine = Math.min(t.startBufferLine, e), t.endBufferLine = Math.max(t.endBufferLine, e);
  }
};
var We = { full: 0, left: 0, center: 0, right: 0 };
var at = { full: 0, left: 0, center: 0, right: 0 };
var Li = { full: 0, left: 0, center: 0, right: 0 };
var bt = class extends D {
  constructor(e, i, r, n, o2, l, a, u) {
    super();
    this._viewportElement = e;
    this._screenElement = i;
    this._bufferService = r;
    this._decorationService = n;
    this._renderService = o2;
    this._optionsService = l;
    this._themeService = a;
    this._coreBrowserService = u;
    this._colorZoneStore = new Gr();
    this._shouldUpdateDimensions = true;
    this._shouldUpdateAnchor = true;
    this._lastKnownBufferLength = 0;
    this._canvas = this._coreBrowserService.mainDocument.createElement("canvas"), this._canvas.classList.add("xterm-decoration-overview-ruler"), this._refreshCanvasDimensions(), this._viewportElement.parentElement?.insertBefore(this._canvas, this._viewportElement), this._register(C(() => this._canvas?.remove()));
    let h2 = this._canvas.getContext("2d");
    if (h2) this._ctx = h2;
    else throw new Error("Ctx cannot be null");
    this._register(this._decorationService.onDecorationRegistered(() => this._queueRefresh(void 0, true))), this._register(this._decorationService.onDecorationRemoved(() => this._queueRefresh(void 0, true))), this._register(this._renderService.onRenderedViewportChange(() => this._queueRefresh())), this._register(this._bufferService.buffers.onBufferActivate(() => {
      this._canvas.style.display = this._bufferService.buffer === this._bufferService.buffers.alt ? "none" : "block";
    })), this._register(this._bufferService.onScroll(() => {
      this._lastKnownBufferLength !== this._bufferService.buffers.normal.lines.length && (this._refreshDrawHeightConstants(), this._refreshColorZonePadding());
    })), this._register(this._renderService.onRender(() => {
      (!this._containerHeight || this._containerHeight !== this._screenElement.clientHeight) && (this._queueRefresh(true), this._containerHeight = this._screenElement.clientHeight);
    })), this._register(this._coreBrowserService.onDprChange(() => this._queueRefresh(true))), this._register(this._optionsService.onSpecificOptionChange("overviewRuler", () => this._queueRefresh(true))), this._register(this._themeService.onChangeColors(() => this._queueRefresh())), this._queueRefresh(true);
  }
  get _width() {
    return this._optionsService.options.overviewRuler?.width || 0;
  }
  _refreshDrawConstants() {
    let e = Math.floor((this._canvas.width - 1) / 3), i = Math.ceil((this._canvas.width - 1) / 3);
    at.full = this._canvas.width, at.left = e, at.center = i, at.right = e, this._refreshDrawHeightConstants(), Li.full = 1, Li.left = 1, Li.center = 1 + at.left, Li.right = 1 + at.left + at.center;
  }
  _refreshDrawHeightConstants() {
    We.full = Math.round(2 * this._coreBrowserService.dpr);
    let e = this._canvas.height / this._bufferService.buffer.lines.length, i = Math.round(Math.max(Math.min(e, 12), 6) * this._coreBrowserService.dpr);
    We.left = i, We.center = i, We.right = i;
  }
  _refreshColorZonePadding() {
    this._colorZoneStore.setPadding({ full: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * We.full), left: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * We.left), center: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * We.center), right: Math.floor(this._bufferService.buffers.active.lines.length / (this._canvas.height - 1) * We.right) }), this._lastKnownBufferLength = this._bufferService.buffers.normal.lines.length;
  }
  _refreshCanvasDimensions() {
    this._canvas.style.width = `${this._width}px`, this._canvas.width = Math.round(this._width * this._coreBrowserService.dpr), this._canvas.style.height = `${this._screenElement.clientHeight}px`, this._canvas.height = Math.round(this._screenElement.clientHeight * this._coreBrowserService.dpr), this._refreshDrawConstants(), this._refreshColorZonePadding();
  }
  _refreshDecorations() {
    this._shouldUpdateDimensions && this._refreshCanvasDimensions(), this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height), this._colorZoneStore.clear();
    for (let i of this._decorationService.decorations) this._colorZoneStore.addDecoration(i);
    this._ctx.lineWidth = 1, this._renderRulerOutline();
    let e = this._colorZoneStore.zones;
    for (let i of e) i.position !== "full" && this._renderColorZone(i);
    for (let i of e) i.position === "full" && this._renderColorZone(i);
    this._shouldUpdateDimensions = false, this._shouldUpdateAnchor = false;
  }
  _renderRulerOutline() {
    this._ctx.fillStyle = this._themeService.colors.overviewRulerBorder.css, this._ctx.fillRect(0, 0, 1, this._canvas.height), this._optionsService.rawOptions.overviewRuler.showTopBorder && this._ctx.fillRect(1, 0, this._canvas.width - 1, 1), this._optionsService.rawOptions.overviewRuler.showBottomBorder && this._ctx.fillRect(1, this._canvas.height - 1, this._canvas.width - 1, this._canvas.height);
  }
  _renderColorZone(e) {
    this._ctx.fillStyle = e.color, this._ctx.fillRect(Li[e.position || "full"], Math.round((this._canvas.height - 1) * (e.startBufferLine / this._bufferService.buffers.active.lines.length) - We[e.position || "full"] / 2), at[e.position || "full"], Math.round((this._canvas.height - 1) * ((e.endBufferLine - e.startBufferLine) / this._bufferService.buffers.active.lines.length) + We[e.position || "full"]));
  }
  _queueRefresh(e, i) {
    this._shouldUpdateDimensions = e || this._shouldUpdateDimensions, this._shouldUpdateAnchor = i || this._shouldUpdateAnchor, this._animationFrame === void 0 && (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => {
      this._refreshDecorations(), this._animationFrame = void 0;
    }));
  }
};
bt = M([S(2, F), S(3, Be), S(4, ce), S(5, H), S(6, Re), S(7, ae)], bt);
var b;
((E) => (E.NUL = "\0", E.SOH = "", E.STX = "", E.ETX = "", E.EOT = "", E.ENQ = "", E.ACK = "", E.BEL = "\x07", E.BS = "\b", E.HT = "	", E.LF = `
`, E.VT = "\v", E.FF = "\f", E.CR = "\r", E.SO = "", E.SI = "", E.DLE = "", E.DC1 = "", E.DC2 = "", E.DC3 = "", E.DC4 = "", E.NAK = "", E.SYN = "", E.ETB = "", E.CAN = "", E.EM = "", E.SUB = "", E.ESC = "\x1B", E.FS = "", E.GS = "", E.RS = "", E.US = "", E.SP = " ", E.DEL = "\x7F"))(b ||= {});
var Ai;
((g) => (g.PAD = "\x80", g.HOP = "\x81", g.BPH = "\x82", g.NBH = "\x83", g.IND = "\x84", g.NEL = "\x85", g.SSA = "\x86", g.ESA = "\x87", g.HTS = "\x88", g.HTJ = "\x89", g.VTS = "\x8A", g.PLD = "\x8B", g.PLU = "\x8C", g.RI = "\x8D", g.SS2 = "\x8E", g.SS3 = "\x8F", g.DCS = "\x90", g.PU1 = "\x91", g.PU2 = "\x92", g.STS = "\x93", g.CCH = "\x94", g.MW = "\x95", g.SPA = "\x96", g.EPA = "\x97", g.SOS = "\x98", g.SGCI = "\x99", g.SCI = "\x9A", g.CSI = "\x9B", g.ST = "\x9C", g.OSC = "\x9D", g.PM = "\x9E", g.APC = "\x9F"))(Ai ||= {});
var fs;
((t) => t.ST = `${b.ESC}\\`)(fs ||= {});
var $t = class {
  constructor(t, e, i, r, n, o2) {
    this._textarea = t;
    this._compositionView = e;
    this._bufferService = i;
    this._optionsService = r;
    this._coreService = n;
    this._renderService = o2;
    this._isComposing = false, this._isSendingComposition = false, this._compositionPosition = { start: 0, end: 0 }, this._dataAlreadySent = "";
  }
  get isComposing() {
    return this._isComposing;
  }
  compositionstart() {
    this._isComposing = true, this._compositionPosition.start = this._textarea.value.length, this._compositionView.textContent = "", this._dataAlreadySent = "", this._compositionView.classList.add("active");
  }
  compositionupdate(t) {
    this._compositionView.textContent = t.data, this.updateCompositionElements(), setTimeout(() => {
      this._compositionPosition.end = this._textarea.value.length;
    }, 0);
  }
  compositionend() {
    this._finalizeComposition(true);
  }
  keydown(t) {
    if (this._isComposing || this._isSendingComposition) {
      if (t.keyCode === 20 || t.keyCode === 229 || t.keyCode === 16 || t.keyCode === 17 || t.keyCode === 18) return false;
      this._finalizeComposition(false);
    }
    return t.keyCode === 229 ? (this._handleAnyTextareaChanges(), false) : true;
  }
  _finalizeComposition(t) {
    if (this._compositionView.classList.remove("active"), this._isComposing = false, t) {
      let e = { start: this._compositionPosition.start, end: this._compositionPosition.end };
      this._isSendingComposition = true, setTimeout(() => {
        if (this._isSendingComposition) {
          this._isSendingComposition = false;
          let i;
          e.start += this._dataAlreadySent.length, this._isComposing ? i = this._textarea.value.substring(e.start, this._compositionPosition.start) : i = this._textarea.value.substring(e.start), i.length > 0 && this._coreService.triggerDataEvent(i, true);
        }
      }, 0);
    } else {
      this._isSendingComposition = false;
      let e = this._textarea.value.substring(this._compositionPosition.start, this._compositionPosition.end);
      this._coreService.triggerDataEvent(e, true);
    }
  }
  _handleAnyTextareaChanges() {
    let t = this._textarea.value;
    setTimeout(() => {
      if (!this._isComposing) {
        let e = this._textarea.value, i = e.replace(t, "");
        this._dataAlreadySent = i, e.length > t.length ? this._coreService.triggerDataEvent(i, true) : e.length < t.length ? this._coreService.triggerDataEvent(`${b.DEL}`, true) : e.length === t.length && e !== t && this._coreService.triggerDataEvent(e, true);
      }
    }, 0);
  }
  updateCompositionElements(t) {
    if (this._isComposing) {
      if (this._bufferService.buffer.isCursorInViewport) {
        let e = Math.min(this._bufferService.buffer.x, this._bufferService.cols - 1), i = this._renderService.dimensions.css.cell.height, r = this._bufferService.buffer.y * this._renderService.dimensions.css.cell.height, n = e * this._renderService.dimensions.css.cell.width;
        this._compositionView.style.left = n + "px", this._compositionView.style.top = r + "px", this._compositionView.style.height = i + "px", this._compositionView.style.lineHeight = i + "px", this._compositionView.style.fontFamily = this._optionsService.rawOptions.fontFamily, this._compositionView.style.fontSize = this._optionsService.rawOptions.fontSize + "px";
        let o2 = this._compositionView.getBoundingClientRect();
        this._textarea.style.left = n + "px", this._textarea.style.top = r + "px", this._textarea.style.width = Math.max(o2.width, 1) + "px", this._textarea.style.height = Math.max(o2.height, 1) + "px", this._textarea.style.lineHeight = o2.height + "px";
      }
      t || setTimeout(() => this.updateCompositionElements(true), 0);
    }
  }
};
$t = M([S(2, F), S(3, H), S(4, ge), S(5, ce)], $t);
var ue = 0;
var he = 0;
var de = 0;
var J = 0;
var ps = { css: "#00000000", rgba: 0 };
var j;
((i) => {
  function s15(r, n, o2, l) {
    return l !== void 0 ? `#${vt(r)}${vt(n)}${vt(o2)}${vt(l)}` : `#${vt(r)}${vt(n)}${vt(o2)}`;
  }
  i.toCss = s15;
  function t(r, n, o2, l = 255) {
    return (r << 24 | n << 16 | o2 << 8 | l) >>> 0;
  }
  i.toRgba = t;
  function e(r, n, o2, l) {
    return { css: i.toCss(r, n, o2, l), rgba: i.toRgba(r, n, o2, l) };
  }
  i.toColor = e;
})(j ||= {});
var U;
((l) => {
  function s15(a, u) {
    if (J = (u.rgba & 255) / 255, J === 1) return { css: u.css, rgba: u.rgba };
    let h2 = u.rgba >> 24 & 255, c = u.rgba >> 16 & 255, d = u.rgba >> 8 & 255, _2 = a.rgba >> 24 & 255, p = a.rgba >> 16 & 255, m = a.rgba >> 8 & 255;
    ue = _2 + Math.round((h2 - _2) * J), he = p + Math.round((c - p) * J), de = m + Math.round((d - m) * J);
    let f = j.toCss(ue, he, de), A = j.toRgba(ue, he, de);
    return { css: f, rgba: A };
  }
  l.blend = s15;
  function t(a) {
    return (a.rgba & 255) === 255;
  }
  l.isOpaque = t;
  function e(a, u, h2) {
    let c = $r.ensureContrastRatio(a.rgba, u.rgba, h2);
    if (c) return j.toColor(c >> 24 & 255, c >> 16 & 255, c >> 8 & 255);
  }
  l.ensureContrastRatio = e;
  function i(a) {
    let u = (a.rgba | 255) >>> 0;
    return [ue, he, de] = $r.toChannels(u), { css: j.toCss(ue, he, de), rgba: u };
  }
  l.opaque = i;
  function r(a, u) {
    return J = Math.round(u * 255), [ue, he, de] = $r.toChannels(a.rgba), { css: j.toCss(ue, he, de, J), rgba: j.toRgba(ue, he, de, J) };
  }
  l.opacity = r;
  function n(a, u) {
    return J = a.rgba & 255, r(a, J * u / 255);
  }
  l.multiplyOpacity = n;
  function o2(a) {
    return [a.rgba >> 24 & 255, a.rgba >> 16 & 255, a.rgba >> 8 & 255];
  }
  l.toColorRGB = o2;
})(U ||= {});
var z;
((i) => {
  let s15, t;
  try {
    let r = document.createElement("canvas");
    r.width = 1, r.height = 1;
    let n = r.getContext("2d", { willReadFrequently: true });
    n && (s15 = n, s15.globalCompositeOperation = "copy", t = s15.createLinearGradient(0, 0, 1, 1));
  } catch {
  }
  function e(r) {
    if (r.match(/#[\da-f]{3,8}/i)) switch (r.length) {
      case 4:
        return ue = parseInt(r.slice(1, 2).repeat(2), 16), he = parseInt(r.slice(2, 3).repeat(2), 16), de = parseInt(r.slice(3, 4).repeat(2), 16), j.toColor(ue, he, de);
      case 5:
        return ue = parseInt(r.slice(1, 2).repeat(2), 16), he = parseInt(r.slice(2, 3).repeat(2), 16), de = parseInt(r.slice(3, 4).repeat(2), 16), J = parseInt(r.slice(4, 5).repeat(2), 16), j.toColor(ue, he, de, J);
      case 7:
        return { css: r, rgba: (parseInt(r.slice(1), 16) << 8 | 255) >>> 0 };
      case 9:
        return { css: r, rgba: parseInt(r.slice(1), 16) >>> 0 };
    }
    let n = r.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);
    if (n) return ue = parseInt(n[1]), he = parseInt(n[2]), de = parseInt(n[3]), J = Math.round((n[5] === void 0 ? 1 : parseFloat(n[5])) * 255), j.toColor(ue, he, de, J);
    if (!s15 || !t) throw new Error("css.toColor: Unsupported css format");
    if (s15.fillStyle = t, s15.fillStyle = r, typeof s15.fillStyle != "string") throw new Error("css.toColor: Unsupported css format");
    if (s15.fillRect(0, 0, 1, 1), [ue, he, de, J] = s15.getImageData(0, 0, 1, 1).data, J !== 255) throw new Error("css.toColor: Unsupported css format");
    return { rgba: j.toRgba(ue, he, de, J), css: r };
  }
  i.toColor = e;
})(z ||= {});
var ve;
((e) => {
  function s15(i) {
    return t(i >> 16 & 255, i >> 8 & 255, i & 255);
  }
  e.relativeLuminance = s15;
  function t(i, r, n) {
    let o2 = i / 255, l = r / 255, a = n / 255, u = o2 <= 0.03928 ? o2 / 12.92 : Math.pow((o2 + 0.055) / 1.055, 2.4), h2 = l <= 0.03928 ? l / 12.92 : Math.pow((l + 0.055) / 1.055, 2.4), c = a <= 0.03928 ? a / 12.92 : Math.pow((a + 0.055) / 1.055, 2.4);
    return u * 0.2126 + h2 * 0.7152 + c * 0.0722;
  }
  e.relativeLuminance2 = t;
})(ve ||= {});
var $r;
((n) => {
  function s15(o2, l) {
    if (J = (l & 255) / 255, J === 1) return l;
    let a = l >> 24 & 255, u = l >> 16 & 255, h2 = l >> 8 & 255, c = o2 >> 24 & 255, d = o2 >> 16 & 255, _2 = o2 >> 8 & 255;
    return ue = c + Math.round((a - c) * J), he = d + Math.round((u - d) * J), de = _2 + Math.round((h2 - _2) * J), j.toRgba(ue, he, de);
  }
  n.blend = s15;
  function t(o2, l, a) {
    let u = ve.relativeLuminance(o2 >> 8), h2 = ve.relativeLuminance(l >> 8);
    if (Xe(u, h2) < a) {
      if (h2 < u) {
        let p = e(o2, l, a), m = Xe(u, ve.relativeLuminance(p >> 8));
        if (m < a) {
          let f = i(o2, l, a), A = Xe(u, ve.relativeLuminance(f >> 8));
          return m > A ? p : f;
        }
        return p;
      }
      let d = i(o2, l, a), _2 = Xe(u, ve.relativeLuminance(d >> 8));
      if (_2 < a) {
        let p = e(o2, l, a), m = Xe(u, ve.relativeLuminance(p >> 8));
        return _2 > m ? d : p;
      }
      return d;
    }
  }
  n.ensureContrastRatio = t;
  function e(o2, l, a) {
    let u = o2 >> 24 & 255, h2 = o2 >> 16 & 255, c = o2 >> 8 & 255, d = l >> 24 & 255, _2 = l >> 16 & 255, p = l >> 8 & 255, m = Xe(ve.relativeLuminance2(d, _2, p), ve.relativeLuminance2(u, h2, c));
    for (; m < a && (d > 0 || _2 > 0 || p > 0); ) d -= Math.max(0, Math.ceil(d * 0.1)), _2 -= Math.max(0, Math.ceil(_2 * 0.1)), p -= Math.max(0, Math.ceil(p * 0.1)), m = Xe(ve.relativeLuminance2(d, _2, p), ve.relativeLuminance2(u, h2, c));
    return (d << 24 | _2 << 16 | p << 8 | 255) >>> 0;
  }
  n.reduceLuminance = e;
  function i(o2, l, a) {
    let u = o2 >> 24 & 255, h2 = o2 >> 16 & 255, c = o2 >> 8 & 255, d = l >> 24 & 255, _2 = l >> 16 & 255, p = l >> 8 & 255, m = Xe(ve.relativeLuminance2(d, _2, p), ve.relativeLuminance2(u, h2, c));
    for (; m < a && (d < 255 || _2 < 255 || p < 255); ) d = Math.min(255, d + Math.ceil((255 - d) * 0.1)), _2 = Math.min(255, _2 + Math.ceil((255 - _2) * 0.1)), p = Math.min(255, p + Math.ceil((255 - p) * 0.1)), m = Xe(ve.relativeLuminance2(d, _2, p), ve.relativeLuminance2(u, h2, c));
    return (d << 24 | _2 << 16 | p << 8 | 255) >>> 0;
  }
  n.increaseLuminance = i;
  function r(o2) {
    return [o2 >> 24 & 255, o2 >> 16 & 255, o2 >> 8 & 255, o2 & 255];
  }
  n.toChannels = r;
})($r ||= {});
function vt(s15) {
  let t = s15.toString(16);
  return t.length < 2 ? "0" + t : t;
}
function Xe(s15, t) {
  return s15 < t ? (t + 0.05) / (s15 + 0.05) : (s15 + 0.05) / (t + 0.05);
}
var Vr = class extends De {
  constructor(e, i, r) {
    super();
    this.content = 0;
    this.combinedData = "";
    this.fg = e.fg, this.bg = e.bg, this.combinedData = i, this._width = r;
  }
  isCombined() {
    return 2097152;
  }
  getWidth() {
    return this._width;
  }
  getChars() {
    return this.combinedData;
  }
  getCode() {
    return 2097151;
  }
  setFromCharData(e) {
    throw new Error("not implemented");
  }
  getAsCharData() {
    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];
  }
};
var ct = class {
  constructor(t) {
    this._bufferService = t;
    this._characterJoiners = [];
    this._nextCharacterJoinerId = 0;
    this._workCell = new q();
  }
  register(t) {
    let e = { id: this._nextCharacterJoinerId++, handler: t };
    return this._characterJoiners.push(e), e.id;
  }
  deregister(t) {
    for (let e = 0; e < this._characterJoiners.length; e++) if (this._characterJoiners[e].id === t) return this._characterJoiners.splice(e, 1), true;
    return false;
  }
  getJoinedCharacters(t) {
    if (this._characterJoiners.length === 0) return [];
    let e = this._bufferService.buffer.lines.get(t);
    if (!e || e.length === 0) return [];
    let i = [], r = e.translateToString(true), n = 0, o2 = 0, l = 0, a = e.getFg(0), u = e.getBg(0);
    for (let h2 = 0; h2 < e.getTrimmedLength(); h2++) if (e.loadCell(h2, this._workCell), this._workCell.getWidth() !== 0) {
      if (this._workCell.fg !== a || this._workCell.bg !== u) {
        if (h2 - n > 1) {
          let c = this._getJoinedRanges(r, l, o2, e, n);
          for (let d = 0; d < c.length; d++) i.push(c[d]);
        }
        n = h2, l = o2, a = this._workCell.fg, u = this._workCell.bg;
      }
      o2 += this._workCell.getChars().length || we.length;
    }
    if (this._bufferService.cols - n > 1) {
      let h2 = this._getJoinedRanges(r, l, o2, e, n);
      for (let c = 0; c < h2.length; c++) i.push(h2[c]);
    }
    return i;
  }
  _getJoinedRanges(t, e, i, r, n) {
    let o2 = t.substring(e, i), l = [];
    try {
      l = this._characterJoiners[0].handler(o2);
    } catch (a) {
      console.error(a);
    }
    for (let a = 1; a < this._characterJoiners.length; a++) try {
      let u = this._characterJoiners[a].handler(o2);
      for (let h2 = 0; h2 < u.length; h2++) ct._mergeRanges(l, u[h2]);
    } catch (u) {
      console.error(u);
    }
    return this._stringRangesToCellRanges(l, r, n), l;
  }
  _stringRangesToCellRanges(t, e, i) {
    let r = 0, n = false, o2 = 0, l = t[r];
    if (l) {
      for (let a = i; a < this._bufferService.cols; a++) {
        let u = e.getWidth(a), h2 = e.getString(a).length || we.length;
        if (u !== 0) {
          if (!n && l[0] <= o2 && (l[0] = a, n = true), l[1] <= o2) {
            if (l[1] = a, l = t[++r], !l) break;
            l[0] <= o2 ? (l[0] = a, n = true) : n = false;
          }
          o2 += h2;
        }
      }
      l && (l[1] = this._bufferService.cols);
    }
  }
  static _mergeRanges(t, e) {
    let i = false;
    for (let r = 0; r < t.length; r++) {
      let n = t[r];
      if (i) {
        if (e[1] <= n[0]) return t[r - 1][1] = e[1], t;
        if (e[1] <= n[1]) return t[r - 1][1] = Math.max(e[1], n[1]), t.splice(r, 1), t;
        t.splice(r, 1), r--;
      } else {
        if (e[1] <= n[0]) return t.splice(r, 0, e), t;
        if (e[1] <= n[1]) return n[0] = Math.min(e[0], n[0]), t;
        e[0] < n[1] && (n[0] = Math.min(e[0], n[0]), i = true);
        continue;
      }
    }
    return i ? t[t.length - 1][1] = e[1] : t.push(e), t;
  }
};
ct = M([S(0, F)], ct);
function Oa(s15) {
  return 57508 <= s15 && s15 <= 57558;
}
function Ba(s15) {
  return 9472 <= s15 && s15 <= 9631;
}
function $o(s15) {
  return Oa(s15) || Ba(s15);
}
function Vo() {
  return { css: { canvas: qr(), cell: qr() }, device: { canvas: qr(), cell: qr(), char: { width: 0, height: 0, left: 0, top: 0 } } };
}
function qr() {
  return { width: 0, height: 0 };
}
var Vt = class {
  constructor(t, e, i, r, n, o2, l) {
    this._document = t;
    this._characterJoinerService = e;
    this._optionsService = i;
    this._coreBrowserService = r;
    this._coreService = n;
    this._decorationService = o2;
    this._themeService = l;
    this._workCell = new q();
    this._columnSelectMode = false;
    this.defaultSpacing = 0;
  }
  handleSelectionChanged(t, e, i) {
    this._selectionStart = t, this._selectionEnd = e, this._columnSelectMode = i;
  }
  createRow(t, e, i, r, n, o2, l, a, u, h2, c) {
    let d = [], _2 = this._characterJoinerService.getJoinedCharacters(e), p = this._themeService.colors, m = t.getNoBgTrimmedLength();
    i && m < o2 + 1 && (m = o2 + 1);
    let f, A = 0, R = "", O = 0, I = 0, k = 0, P = 0, oe = false, Me = 0, Pe = false, Ke = 0, di = 0, V = [], Qe = h2 !== -1 && c !== -1;
    for (let y = 0; y < m; y++) {
      t.loadCell(y, this._workCell);
      let T = this._workCell.getWidth();
      if (T === 0) continue;
      let g = false, w = y >= di, E = y, x = this._workCell;
      if (_2.length > 0 && y === _2[0][0] && w) {
        let W = _2.shift(), An = this._isCellInSelection(W[0], e);
        for (O = W[0] + 1; O < W[1]; O++) w &&= An === this._isCellInSelection(O, e);
        w &&= !i || o2 < W[0] || o2 >= W[1], w ? (g = true, x = new Vr(this._workCell, t.translateToString(true, W[0], W[1]), W[1] - W[0]), E = W[1] - 1, T = x.getWidth()) : di = W[1];
      }
      let N = this._isCellInSelection(y, e), Z = i && y === o2, te = Qe && y >= h2 && y <= c, Oe = false;
      this._decorationService.forEachDecorationAtCell(y, e, void 0, (W) => {
        Oe = true;
      });
      let ze = x.getChars() || we;
      if (ze === " " && (x.isUnderline() || x.isOverline()) && (ze = "\xA0"), Ke = T * a - u.get(ze, x.isBold(), x.isItalic()), !f) f = this._document.createElement("span");
      else if (A && (N && Pe || !N && !Pe && x.bg === I) && (N && Pe && p.selectionForeground || x.fg === k) && x.extended.ext === P && te === oe && Ke === Me && !Z && !g && !Oe && w) {
        x.isInvisible() ? R += we : R += ze, A++;
        continue;
      } else A && (f.textContent = R), f = this._document.createElement("span"), A = 0, R = "";
      if (I = x.bg, k = x.fg, P = x.extended.ext, oe = te, Me = Ke, Pe = N, g && o2 >= y && o2 <= E && (o2 = y), !this._coreService.isCursorHidden && Z && this._coreService.isCursorInitialized) {
        if (V.push("xterm-cursor"), this._coreBrowserService.isFocused) l && V.push("xterm-cursor-blink"), V.push(r === "bar" ? "xterm-cursor-bar" : r === "underline" ? "xterm-cursor-underline" : "xterm-cursor-block");
        else if (n) switch (n) {
          case "outline":
            V.push("xterm-cursor-outline");
            break;
          case "block":
            V.push("xterm-cursor-block");
            break;
          case "bar":
            V.push("xterm-cursor-bar");
            break;
          case "underline":
            V.push("xterm-cursor-underline");
            break;
          default:
            break;
        }
      }
      if (x.isBold() && V.push("xterm-bold"), x.isItalic() && V.push("xterm-italic"), x.isDim() && V.push("xterm-dim"), x.isInvisible() ? R = we : R = x.getChars() || we, x.isUnderline() && (V.push(`xterm-underline-${x.extended.underlineStyle}`), R === " " && (R = "\xA0"), !x.isUnderlineColorDefault())) if (x.isUnderlineColorRGB()) f.style.textDecorationColor = `rgb(${De.toColorRGB(x.getUnderlineColor()).join(",")})`;
      else {
        let W = x.getUnderlineColor();
        this._optionsService.rawOptions.drawBoldTextInBrightColors && x.isBold() && W < 8 && (W += 8), f.style.textDecorationColor = p.ansi[W].css;
      }
      x.isOverline() && (V.push("xterm-overline"), R === " " && (R = "\xA0")), x.isStrikethrough() && V.push("xterm-strikethrough"), te && (f.style.textDecoration = "underline");
      let le = x.getFgColor(), et = x.getFgColorMode(), me = x.getBgColor(), ht = x.getBgColorMode(), fi = !!x.isInverse();
      if (fi) {
        let W = le;
        le = me, me = W;
        let An = et;
        et = ht, ht = An;
      }
      let tt, Qi, pi = false;
      this._decorationService.forEachDecorationAtCell(y, e, void 0, (W) => {
        W.options.layer !== "top" && pi || (W.backgroundColorRGB && (ht = 50331648, me = W.backgroundColorRGB.rgba >> 8 & 16777215, tt = W.backgroundColorRGB), W.foregroundColorRGB && (et = 50331648, le = W.foregroundColorRGB.rgba >> 8 & 16777215, Qi = W.foregroundColorRGB), pi = W.options.layer === "top");
      }), !pi && N && (tt = this._coreBrowserService.isFocused ? p.selectionBackgroundOpaque : p.selectionInactiveBackgroundOpaque, me = tt.rgba >> 8 & 16777215, ht = 50331648, pi = true, p.selectionForeground && (et = 50331648, le = p.selectionForeground.rgba >> 8 & 16777215, Qi = p.selectionForeground)), pi && V.push("xterm-decoration-top");
      let it;
      switch (ht) {
        case 16777216:
        case 33554432:
          it = p.ansi[me], V.push(`xterm-bg-${me}`);
          break;
        case 50331648:
          it = j.toColor(me >> 16, me >> 8 & 255, me & 255), this._addStyle(f, `background-color:#${qo((me >>> 0).toString(16), "0", 6)}`);
          break;
        case 0:
        default:
          fi ? (it = p.foreground, V.push(`xterm-bg-${257}`)) : it = p.background;
      }
      switch (tt || x.isDim() && (tt = U.multiplyOpacity(it, 0.5)), et) {
        case 16777216:
        case 33554432:
          x.isBold() && le < 8 && this._optionsService.rawOptions.drawBoldTextInBrightColors && (le += 8), this._applyMinimumContrast(f, it, p.ansi[le], x, tt, void 0) || V.push(`xterm-fg-${le}`);
          break;
        case 50331648:
          let W = j.toColor(le >> 16 & 255, le >> 8 & 255, le & 255);
          this._applyMinimumContrast(f, it, W, x, tt, Qi) || this._addStyle(f, `color:#${qo(le.toString(16), "0", 6)}`);
          break;
        case 0:
        default:
          this._applyMinimumContrast(f, it, p.foreground, x, tt, Qi) || fi && V.push(`xterm-fg-${257}`);
      }
      V.length && (f.className = V.join(" "), V.length = 0), !Z && !g && !Oe && w ? A++ : f.textContent = R, Ke !== this.defaultSpacing && (f.style.letterSpacing = `${Ke}px`), d.push(f), y = E;
    }
    return f && A && (f.textContent = R), d;
  }
  _applyMinimumContrast(t, e, i, r, n, o2) {
    if (this._optionsService.rawOptions.minimumContrastRatio === 1 || $o(r.getCode())) return false;
    let l = this._getContrastCache(r), a;
    if (!n && !o2 && (a = l.getColor(e.rgba, i.rgba)), a === void 0) {
      let u = this._optionsService.rawOptions.minimumContrastRatio / (r.isDim() ? 2 : 1);
      a = U.ensureContrastRatio(n || e, o2 || i, u), l.setColor((n || e).rgba, (o2 || i).rgba, a ?? null);
    }
    return a ? (this._addStyle(t, `color:${a.css}`), true) : false;
  }
  _getContrastCache(t) {
    return t.isDim() ? this._themeService.colors.halfContrastCache : this._themeService.colors.contrastCache;
  }
  _addStyle(t, e) {
    t.setAttribute("style", `${t.getAttribute("style") || ""}${e};`);
  }
  _isCellInSelection(t, e) {
    let i = this._selectionStart, r = this._selectionEnd;
    return !i || !r ? false : this._columnSelectMode ? i[0] <= r[0] ? t >= i[0] && e >= i[1] && t < r[0] && e <= r[1] : t < i[0] && e >= i[1] && t >= r[0] && e <= r[1] : e > i[1] && e < r[1] || i[1] === r[1] && e === i[1] && t >= i[0] && t < r[0] || i[1] < r[1] && e === r[1] && t < r[0] || i[1] < r[1] && e === i[1] && t >= i[0];
  }
};
Vt = M([S(1, or), S(2, H), S(3, ae), S(4, ge), S(5, Be), S(6, Re)], Vt);
function qo(s15, t, e) {
  for (; s15.length < e; ) s15 = t + s15;
  return s15;
}
var Yr = class {
  constructor(t, e) {
    this._flat = new Float32Array(256);
    this._font = "";
    this._fontSize = 0;
    this._weight = "normal";
    this._weightBold = "bold";
    this._measureElements = [];
    this._container = t.createElement("div"), this._container.classList.add("xterm-width-cache-measure-container"), this._container.setAttribute("aria-hidden", "true"), this._container.style.whiteSpace = "pre", this._container.style.fontKerning = "none";
    let i = t.createElement("span");
    i.classList.add("xterm-char-measure-element");
    let r = t.createElement("span");
    r.classList.add("xterm-char-measure-element"), r.style.fontWeight = "bold";
    let n = t.createElement("span");
    n.classList.add("xterm-char-measure-element"), n.style.fontStyle = "italic";
    let o2 = t.createElement("span");
    o2.classList.add("xterm-char-measure-element"), o2.style.fontWeight = "bold", o2.style.fontStyle = "italic", this._measureElements = [i, r, n, o2], this._container.appendChild(i), this._container.appendChild(r), this._container.appendChild(n), this._container.appendChild(o2), e.appendChild(this._container), this.clear();
  }
  dispose() {
    this._container.remove(), this._measureElements.length = 0, this._holey = void 0;
  }
  clear() {
    this._flat.fill(-9999), this._holey = /* @__PURE__ */ new Map();
  }
  setFont(t, e, i, r) {
    t === this._font && e === this._fontSize && i === this._weight && r === this._weightBold || (this._font = t, this._fontSize = e, this._weight = i, this._weightBold = r, this._container.style.fontFamily = this._font, this._container.style.fontSize = `${this._fontSize}px`, this._measureElements[0].style.fontWeight = `${i}`, this._measureElements[1].style.fontWeight = `${r}`, this._measureElements[2].style.fontWeight = `${i}`, this._measureElements[3].style.fontWeight = `${r}`, this.clear());
  }
  get(t, e, i) {
    let r = 0;
    if (!e && !i && t.length === 1 && (r = t.charCodeAt(0)) < 256) {
      if (this._flat[r] !== -9999) return this._flat[r];
      let l = this._measure(t, 0);
      return l > 0 && (this._flat[r] = l), l;
    }
    let n = t;
    e && (n += "B"), i && (n += "I");
    let o2 = this._holey.get(n);
    if (o2 === void 0) {
      let l = 0;
      e && (l |= 1), i && (l |= 2), o2 = this._measure(t, l), o2 > 0 && this._holey.set(n, o2);
    }
    return o2;
  }
  _measure(t, e) {
    let i = this._measureElements[e];
    return i.textContent = t.repeat(32), i.offsetWidth / 32;
  }
};
var ms = class {
  constructor() {
    this.clear();
  }
  clear() {
    this.hasSelection = false, this.columnSelectMode = false, this.viewportStartRow = 0, this.viewportEndRow = 0, this.viewportCappedStartRow = 0, this.viewportCappedEndRow = 0, this.startCol = 0, this.endCol = 0, this.selectionStart = void 0, this.selectionEnd = void 0;
  }
  update(t, e, i, r = false) {
    if (this.selectionStart = e, this.selectionEnd = i, !e || !i || e[0] === i[0] && e[1] === i[1]) {
      this.clear();
      return;
    }
    let n = t.buffers.active.ydisp, o2 = e[1] - n, l = i[1] - n, a = Math.max(o2, 0), u = Math.min(l, t.rows - 1);
    if (a >= t.rows || u < 0) {
      this.clear();
      return;
    }
    this.hasSelection = true, this.columnSelectMode = r, this.viewportStartRow = o2, this.viewportEndRow = l, this.viewportCappedStartRow = a, this.viewportCappedEndRow = u, this.startCol = e[0], this.endCol = i[0];
  }
  isCellSelected(t, e, i) {
    return this.hasSelection ? (i -= t.buffer.active.viewportY, this.columnSelectMode ? this.startCol <= this.endCol ? e >= this.startCol && i >= this.viewportCappedStartRow && e < this.endCol && i <= this.viewportCappedEndRow : e < this.startCol && i >= this.viewportCappedStartRow && e >= this.endCol && i <= this.viewportCappedEndRow : i > this.viewportStartRow && i < this.viewportEndRow || this.viewportStartRow === this.viewportEndRow && i === this.viewportStartRow && e >= this.startCol && e < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportEndRow && e < this.endCol || this.viewportStartRow < this.viewportEndRow && i === this.viewportStartRow && e >= this.startCol) : false;
  }
};
function Yo() {
  return new ms();
}
var _s = "xterm-dom-renderer-owner-";
var Le = "xterm-rows";
var jr = "xterm-fg-";
var jo = "xterm-bg-";
var ki = "xterm-focus";
var Xr = "xterm-selection";
var Na = 1;
var Yt = class extends D {
  constructor(e, i, r, n, o2, l, a, u, h2, c, d, _2, p, m) {
    super();
    this._terminal = e;
    this._document = i;
    this._element = r;
    this._screenElement = n;
    this._viewportElement = o2;
    this._helperContainer = l;
    this._linkifier2 = a;
    this._charSizeService = h2;
    this._optionsService = c;
    this._bufferService = d;
    this._coreService = _2;
    this._coreBrowserService = p;
    this._themeService = m;
    this._terminalClass = Na++;
    this._rowElements = [];
    this._selectionRenderModel = Yo();
    this.onRequestRedraw = this._register(new v()).event;
    this._rowContainer = this._document.createElement("div"), this._rowContainer.classList.add(Le), this._rowContainer.style.lineHeight = "normal", this._rowContainer.setAttribute("aria-hidden", "true"), this._refreshRowElements(this._bufferService.cols, this._bufferService.rows), this._selectionContainer = this._document.createElement("div"), this._selectionContainer.classList.add(Xr), this._selectionContainer.setAttribute("aria-hidden", "true"), this.dimensions = Vo(), this._updateDimensions(), this._register(this._optionsService.onOptionChange(() => this._handleOptionsChanged())), this._register(this._themeService.onChangeColors((f) => this._injectCss(f))), this._injectCss(this._themeService.colors), this._rowFactory = u.createInstance(Vt, document), this._element.classList.add(_s + this._terminalClass), this._screenElement.appendChild(this._rowContainer), this._screenElement.appendChild(this._selectionContainer), this._register(this._linkifier2.onShowLinkUnderline((f) => this._handleLinkHover(f))), this._register(this._linkifier2.onHideLinkUnderline((f) => this._handleLinkLeave(f))), this._register(C(() => {
      this._element.classList.remove(_s + this._terminalClass), this._rowContainer.remove(), this._selectionContainer.remove(), this._widthCache.dispose(), this._themeStyleElement.remove(), this._dimensionsStyleElement.remove();
    })), this._widthCache = new Yr(this._document, this._helperContainer), this._widthCache.setFont(this._optionsService.rawOptions.fontFamily, this._optionsService.rawOptions.fontSize, this._optionsService.rawOptions.fontWeight, this._optionsService.rawOptions.fontWeightBold), this._setDefaultSpacing();
  }
  _updateDimensions() {
    let e = this._coreBrowserService.dpr;
    this.dimensions.device.char.width = this._charSizeService.width * e, this.dimensions.device.char.height = Math.ceil(this._charSizeService.height * e), this.dimensions.device.cell.width = this.dimensions.device.char.width + Math.round(this._optionsService.rawOptions.letterSpacing), this.dimensions.device.cell.height = Math.floor(this.dimensions.device.char.height * this._optionsService.rawOptions.lineHeight), this.dimensions.device.char.left = 0, this.dimensions.device.char.top = 0, this.dimensions.device.canvas.width = this.dimensions.device.cell.width * this._bufferService.cols, this.dimensions.device.canvas.height = this.dimensions.device.cell.height * this._bufferService.rows, this.dimensions.css.canvas.width = Math.round(this.dimensions.device.canvas.width / e), this.dimensions.css.canvas.height = Math.round(this.dimensions.device.canvas.height / e), this.dimensions.css.cell.width = this.dimensions.css.canvas.width / this._bufferService.cols, this.dimensions.css.cell.height = this.dimensions.css.canvas.height / this._bufferService.rows;
    for (let r of this._rowElements) r.style.width = `${this.dimensions.css.canvas.width}px`, r.style.height = `${this.dimensions.css.cell.height}px`, r.style.lineHeight = `${this.dimensions.css.cell.height}px`, r.style.overflow = "hidden";
    this._dimensionsStyleElement || (this._dimensionsStyleElement = this._document.createElement("style"), this._screenElement.appendChild(this._dimensionsStyleElement));
    let i = `${this._terminalSelector} .${Le} span { display: inline-block; height: 100%; vertical-align: top;}`;
    this._dimensionsStyleElement.textContent = i, this._selectionContainer.style.height = this._viewportElement.style.height, this._screenElement.style.width = `${this.dimensions.css.canvas.width}px`, this._screenElement.style.height = `${this.dimensions.css.canvas.height}px`;
  }
  _injectCss(e) {
    this._themeStyleElement || (this._themeStyleElement = this._document.createElement("style"), this._screenElement.appendChild(this._themeStyleElement));
    let i = `${this._terminalSelector} .${Le} { pointer-events: none; color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;
    i += `${this._terminalSelector} .${Le} .xterm-dim { color: ${U.multiplyOpacity(e.foreground, 0.5).css};}`, i += `${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;
    let r = `blink_underline_${this._terminalClass}`, n = `blink_bar_${this._terminalClass}`, o2 = `blink_block_${this._terminalClass}`;
    i += `@keyframes ${r} { 50% {  border-bottom-style: hidden; }}`, i += `@keyframes ${n} { 50% {  box-shadow: none; }}`, i += `@keyframes ${o2} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`, i += `${this._terminalSelector} .${Le}.${ki} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${Le}.${ki} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${n} 1s step-end infinite;}${this._terminalSelector} .${Le}.${ki} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${o2} 1s step-end infinite;}${this._terminalSelector} .${Le} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${Le} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${Le} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${Le} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${Le} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`, i += `${this._terminalSelector} .${Xr} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${Xr} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${Xr} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;
    for (let [l, a] of e.ansi.entries()) i += `${this._terminalSelector} .${jr}${l} { color: ${a.css}; }${this._terminalSelector} .${jr}${l}.xterm-dim { color: ${U.multiplyOpacity(a, 0.5).css}; }${this._terminalSelector} .${jo}${l} { background-color: ${a.css}; }`;
    i += `${this._terminalSelector} .${jr}${257} { color: ${U.opaque(e.background).css}; }${this._terminalSelector} .${jr}${257}.xterm-dim { color: ${U.multiplyOpacity(U.opaque(e.background), 0.5).css}; }${this._terminalSelector} .${jo}${257} { background-color: ${e.foreground.css}; }`, this._themeStyleElement.textContent = i;
  }
  _setDefaultSpacing() {
    let e = this.dimensions.css.cell.width - this._widthCache.get("W", false, false);
    this._rowContainer.style.letterSpacing = `${e}px`, this._rowFactory.defaultSpacing = e;
  }
  handleDevicePixelRatioChange() {
    this._updateDimensions(), this._widthCache.clear(), this._setDefaultSpacing();
  }
  _refreshRowElements(e, i) {
    for (let r = this._rowElements.length; r <= i; r++) {
      let n = this._document.createElement("div");
      this._rowContainer.appendChild(n), this._rowElements.push(n);
    }
    for (; this._rowElements.length > i; ) this._rowContainer.removeChild(this._rowElements.pop());
  }
  handleResize(e, i) {
    this._refreshRowElements(e, i), this._updateDimensions(), this.handleSelectionChanged(this._selectionRenderModel.selectionStart, this._selectionRenderModel.selectionEnd, this._selectionRenderModel.columnSelectMode);
  }
  handleCharSizeChanged() {
    this._updateDimensions(), this._widthCache.clear(), this._setDefaultSpacing();
  }
  handleBlur() {
    this._rowContainer.classList.remove(ki), this.renderRows(0, this._bufferService.rows - 1);
  }
  handleFocus() {
    this._rowContainer.classList.add(ki), this.renderRows(this._bufferService.buffer.y, this._bufferService.buffer.y);
  }
  handleSelectionChanged(e, i, r) {
    if (this._selectionContainer.replaceChildren(), this._rowFactory.handleSelectionChanged(e, i, r), this.renderRows(0, this._bufferService.rows - 1), !e || !i || (this._selectionRenderModel.update(this._terminal, e, i, r), !this._selectionRenderModel.hasSelection)) return;
    let n = this._selectionRenderModel.viewportStartRow, o2 = this._selectionRenderModel.viewportEndRow, l = this._selectionRenderModel.viewportCappedStartRow, a = this._selectionRenderModel.viewportCappedEndRow, u = this._document.createDocumentFragment();
    if (r) {
      let h2 = e[0] > i[0];
      u.appendChild(this._createSelectionElement(l, h2 ? i[0] : e[0], h2 ? e[0] : i[0], a - l + 1));
    } else {
      let h2 = n === l ? e[0] : 0, c = l === o2 ? i[0] : this._bufferService.cols;
      u.appendChild(this._createSelectionElement(l, h2, c));
      let d = a - l - 1;
      if (u.appendChild(this._createSelectionElement(l + 1, 0, this._bufferService.cols, d)), l !== a) {
        let _2 = o2 === a ? i[0] : this._bufferService.cols;
        u.appendChild(this._createSelectionElement(a, 0, _2));
      }
    }
    this._selectionContainer.appendChild(u);
  }
  _createSelectionElement(e, i, r, n = 1) {
    let o2 = this._document.createElement("div"), l = i * this.dimensions.css.cell.width, a = this.dimensions.css.cell.width * (r - i);
    return l + a > this.dimensions.css.canvas.width && (a = this.dimensions.css.canvas.width - l), o2.style.height = `${n * this.dimensions.css.cell.height}px`, o2.style.top = `${e * this.dimensions.css.cell.height}px`, o2.style.left = `${l}px`, o2.style.width = `${a}px`, o2;
  }
  handleCursorMove() {
  }
  _handleOptionsChanged() {
    this._updateDimensions(), this._injectCss(this._themeService.colors), this._widthCache.setFont(this._optionsService.rawOptions.fontFamily, this._optionsService.rawOptions.fontSize, this._optionsService.rawOptions.fontWeight, this._optionsService.rawOptions.fontWeightBold), this._setDefaultSpacing();
  }
  clear() {
    for (let e of this._rowElements) e.replaceChildren();
  }
  renderRows(e, i) {
    let r = this._bufferService.buffer, n = r.ybase + r.y, o2 = Math.min(r.x, this._bufferService.cols - 1), l = this._coreService.decPrivateModes.cursorBlink ?? this._optionsService.rawOptions.cursorBlink, a = this._coreService.decPrivateModes.cursorStyle ?? this._optionsService.rawOptions.cursorStyle, u = this._optionsService.rawOptions.cursorInactiveStyle;
    for (let h2 = e; h2 <= i; h2++) {
      let c = h2 + r.ydisp, d = this._rowElements[h2], _2 = r.lines.get(c);
      if (!d || !_2) break;
      d.replaceChildren(...this._rowFactory.createRow(_2, c, c === n, a, u, o2, l, this.dimensions.css.cell.width, this._widthCache, -1, -1));
    }
  }
  get _terminalSelector() {
    return `.${_s}${this._terminalClass}`;
  }
  _handleLinkHover(e) {
    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, true);
  }
  _handleLinkLeave(e) {
    this._setCellUnderline(e.x1, e.x2, e.y1, e.y2, e.cols, false);
  }
  _setCellUnderline(e, i, r, n, o2, l) {
    r < 0 && (e = 0), n < 0 && (i = 0);
    let a = this._bufferService.rows - 1;
    r = Math.max(Math.min(r, a), 0), n = Math.max(Math.min(n, a), 0), o2 = Math.min(o2, this._bufferService.cols);
    let u = this._bufferService.buffer, h2 = u.ybase + u.y, c = Math.min(u.x, o2 - 1), d = this._optionsService.rawOptions.cursorBlink, _2 = this._optionsService.rawOptions.cursorStyle, p = this._optionsService.rawOptions.cursorInactiveStyle;
    for (let m = r; m <= n; ++m) {
      let f = m + u.ydisp, A = this._rowElements[m], R = u.lines.get(f);
      if (!A || !R) break;
      A.replaceChildren(...this._rowFactory.createRow(R, f, f === h2, _2, p, c, d, this.dimensions.css.cell.width, this._widthCache, l ? m === r ? e : 0 : -1, l ? (m === n ? i : o2) - 1 : -1));
    }
  }
};
Yt = M([S(7, xt), S(8, nt), S(9, H), S(10, F), S(11, ge), S(12, ae), S(13, Re)], Yt);
var jt = class extends D {
  constructor(e, i, r) {
    super();
    this._optionsService = r;
    this.width = 0;
    this.height = 0;
    this._onCharSizeChange = this._register(new v());
    this.onCharSizeChange = this._onCharSizeChange.event;
    try {
      this._measureStrategy = this._register(new vs(this._optionsService));
    } catch {
      this._measureStrategy = this._register(new bs(e, i, this._optionsService));
    }
    this._register(this._optionsService.onMultipleOptionChange(["fontFamily", "fontSize"], () => this.measure()));
  }
  get hasValidSize() {
    return this.width > 0 && this.height > 0;
  }
  measure() {
    let e = this._measureStrategy.measure();
    (e.width !== this.width || e.height !== this.height) && (this.width = e.width, this.height = e.height, this._onCharSizeChange.fire());
  }
};
jt = M([S(2, H)], jt);
var Zr = class extends D {
  constructor() {
    super(...arguments);
    this._result = { width: 0, height: 0 };
  }
  _validateAndSet(e, i) {
    e !== void 0 && e > 0 && i !== void 0 && i > 0 && (this._result.width = e, this._result.height = i);
  }
};
var bs = class extends Zr {
  constructor(e, i, r) {
    super();
    this._document = e;
    this._parentElement = i;
    this._optionsService = r;
    this._measureElement = this._document.createElement("span"), this._measureElement.classList.add("xterm-char-measure-element"), this._measureElement.textContent = "W".repeat(32), this._measureElement.setAttribute("aria-hidden", "true"), this._measureElement.style.whiteSpace = "pre", this._measureElement.style.fontKerning = "none", this._parentElement.appendChild(this._measureElement);
  }
  measure() {
    return this._measureElement.style.fontFamily = this._optionsService.rawOptions.fontFamily, this._measureElement.style.fontSize = `${this._optionsService.rawOptions.fontSize}px`, this._validateAndSet(Number(this._measureElement.offsetWidth) / 32, Number(this._measureElement.offsetHeight)), this._result;
  }
};
var vs = class extends Zr {
  constructor(e) {
    super();
    this._optionsService = e;
    this._canvas = new OffscreenCanvas(100, 100), this._ctx = this._canvas.getContext("2d");
    let i = this._ctx.measureText("W");
    if (!("width" in i && "fontBoundingBoxAscent" in i && "fontBoundingBoxDescent" in i)) throw new Error("Required font metrics not supported");
  }
  measure() {
    this._ctx.font = `${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;
    let e = this._ctx.measureText("W");
    return this._validateAndSet(e.width, e.fontBoundingBoxAscent + e.fontBoundingBoxDescent), this._result;
  }
};
var Jr = class extends D {
  constructor(e, i, r) {
    super();
    this._textarea = e;
    this._window = i;
    this.mainDocument = r;
    this._isFocused = false;
    this._cachedIsFocused = void 0;
    this._screenDprMonitor = this._register(new gs(this._window));
    this._onDprChange = this._register(new v());
    this.onDprChange = this._onDprChange.event;
    this._onWindowChange = this._register(new v());
    this.onWindowChange = this._onWindowChange.event;
    this._register(this.onWindowChange((n) => this._screenDprMonitor.setWindow(n))), this._register($.forward(this._screenDprMonitor.onDprChange, this._onDprChange)), this._register(L(this._textarea, "focus", () => this._isFocused = true)), this._register(L(this._textarea, "blur", () => this._isFocused = false));
  }
  get window() {
    return this._window;
  }
  set window(e) {
    this._window !== e && (this._window = e, this._onWindowChange.fire(this._window));
  }
  get dpr() {
    return this.window.devicePixelRatio;
  }
  get isFocused() {
    return this._cachedIsFocused === void 0 && (this._cachedIsFocused = this._isFocused && this._textarea.ownerDocument.hasFocus(), queueMicrotask(() => this._cachedIsFocused = void 0)), this._cachedIsFocused;
  }
};
var gs = class extends D {
  constructor(e) {
    super();
    this._parentWindow = e;
    this._windowResizeListener = this._register(new ye());
    this._onDprChange = this._register(new v());
    this.onDprChange = this._onDprChange.event;
    this._outerListener = () => this._setDprAndFireIfDiffers(), this._currentDevicePixelRatio = this._parentWindow.devicePixelRatio, this._updateDpr(), this._setWindowResizeListener(), this._register(C(() => this.clearListener()));
  }
  setWindow(e) {
    this._parentWindow = e, this._setWindowResizeListener(), this._setDprAndFireIfDiffers();
  }
  _setWindowResizeListener() {
    this._windowResizeListener.value = L(this._parentWindow, "resize", () => this._setDprAndFireIfDiffers());
  }
  _setDprAndFireIfDiffers() {
    this._parentWindow.devicePixelRatio !== this._currentDevicePixelRatio && this._onDprChange.fire(this._parentWindow.devicePixelRatio), this._updateDpr();
  }
  _updateDpr() {
    this._outerListener && (this._resolutionMediaMatchList?.removeListener(this._outerListener), this._currentDevicePixelRatio = this._parentWindow.devicePixelRatio, this._resolutionMediaMatchList = this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`), this._resolutionMediaMatchList.addListener(this._outerListener));
  }
  clearListener() {
    !this._resolutionMediaMatchList || !this._outerListener || (this._resolutionMediaMatchList.removeListener(this._outerListener), this._resolutionMediaMatchList = void 0, this._outerListener = void 0);
  }
};
var Qr = class extends D {
  constructor() {
    super();
    this.linkProviders = [];
    this._register(C(() => this.linkProviders.length = 0));
  }
  registerLinkProvider(e) {
    return this.linkProviders.push(e), { dispose: () => {
      let i = this.linkProviders.indexOf(e);
      i !== -1 && this.linkProviders.splice(i, 1);
    } };
  }
};
function Ci(s15, t, e) {
  let i = e.getBoundingClientRect(), r = s15.getComputedStyle(e), n = parseInt(r.getPropertyValue("padding-left")), o2 = parseInt(r.getPropertyValue("padding-top"));
  return [t.clientX - i.left - n, t.clientY - i.top - o2];
}
function Xo(s15, t, e, i, r, n, o2, l, a) {
  if (!n) return;
  let u = Ci(s15, t, e);
  if (u) return u[0] = Math.ceil((u[0] + (a ? o2 / 2 : 0)) / o2), u[1] = Math.ceil(u[1] / l), u[0] = Math.min(Math.max(u[0], 1), i + (a ? 1 : 0)), u[1] = Math.min(Math.max(u[1], 1), r), u;
}
var Xt = class {
  constructor(t, e) {
    this._renderService = t;
    this._charSizeService = e;
  }
  getCoords(t, e, i, r, n) {
    return Xo(window, t, e, i, r, this._charSizeService.hasValidSize, this._renderService.dimensions.css.cell.width, this._renderService.dimensions.css.cell.height, n);
  }
  getMouseReportCoords(t, e) {
    let i = Ci(window, t, e);
    if (this._charSizeService.hasValidSize) return i[0] = Math.min(Math.max(i[0], 0), this._renderService.dimensions.css.canvas.width - 1), i[1] = Math.min(Math.max(i[1], 0), this._renderService.dimensions.css.canvas.height - 1), { col: Math.floor(i[0] / this._renderService.dimensions.css.cell.width), row: Math.floor(i[1] / this._renderService.dimensions.css.cell.height), x: Math.floor(i[0]), y: Math.floor(i[1]) };
  }
};
Xt = M([S(0, ce), S(1, nt)], Xt);
var en = class {
  constructor(t, e) {
    this._renderCallback = t;
    this._coreBrowserService = e;
    this._refreshCallbacks = [];
  }
  dispose() {
    this._animationFrame && (this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame), this._animationFrame = void 0);
  }
  addRefreshCallback(t) {
    return this._refreshCallbacks.push(t), this._animationFrame || (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => this._innerRefresh())), this._animationFrame;
  }
  refresh(t, e, i) {
    this._rowCount = i, t = t !== void 0 ? t : 0, e = e !== void 0 ? e : this._rowCount - 1, this._rowStart = this._rowStart !== void 0 ? Math.min(this._rowStart, t) : t, this._rowEnd = this._rowEnd !== void 0 ? Math.max(this._rowEnd, e) : e, !this._animationFrame && (this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => this._innerRefresh()));
  }
  _innerRefresh() {
    if (this._animationFrame = void 0, this._rowStart === void 0 || this._rowEnd === void 0 || this._rowCount === void 0) {
      this._runRefreshCallbacks();
      return;
    }
    let t = Math.max(this._rowStart, 0), e = Math.min(this._rowEnd, this._rowCount - 1);
    this._rowStart = void 0, this._rowEnd = void 0, this._renderCallback(t, e), this._runRefreshCallbacks();
  }
  _runRefreshCallbacks() {
    for (let t of this._refreshCallbacks) t(0);
    this._refreshCallbacks = [];
  }
};
var tn = {};
Ll(tn, { getSafariVersion: () => Ha, isChromeOS: () => Ts, isFirefox: () => Ss, isIpad: () => Wa, isIphone: () => Ua, isLegacyEdge: () => Fa, isLinux: () => Bi, isMac: () => Zt, isNode: () => Mi, isSafari: () => Zo, isWindows: () => Es });
var Mi = typeof process < "u" && "title" in process;
var Pi = Mi ? "node" : navigator.userAgent;
var Oi = Mi ? "node" : navigator.platform;
var Ss = Pi.includes("Firefox");
var Fa = Pi.includes("Edge");
var Zo = /^((?!chrome|android).)*safari/i.test(Pi);
function Ha() {
  if (!Zo) return 0;
  let s15 = Pi.match(/Version\/(\d+)/);
  return s15 === null || s15.length < 2 ? 0 : parseInt(s15[1]);
}
var Zt = ["Macintosh", "MacIntel", "MacPPC", "Mac68K"].includes(Oi);
var Wa = Oi === "iPad";
var Ua = Oi === "iPhone";
var Es = ["Windows", "Win16", "Win32", "WinCE"].includes(Oi);
var Bi = Oi.indexOf("Linux") >= 0;
var Ts = /\bCrOS\b/.test(Pi);
var rn = class {
  constructor() {
    this._tasks = [];
    this._i = 0;
  }
  enqueue(t) {
    this._tasks.push(t), this._start();
  }
  flush() {
    for (; this._i < this._tasks.length; ) this._tasks[this._i]() || this._i++;
    this.clear();
  }
  clear() {
    this._idleCallback && (this._cancelCallback(this._idleCallback), this._idleCallback = void 0), this._i = 0, this._tasks.length = 0;
  }
  _start() {
    this._idleCallback || (this._idleCallback = this._requestCallback(this._process.bind(this)));
  }
  _process(t) {
    this._idleCallback = void 0;
    let e = 0, i = 0, r = t.timeRemaining(), n = 0;
    for (; this._i < this._tasks.length; ) {
      if (e = performance.now(), this._tasks[this._i]() || this._i++, e = Math.max(1, performance.now() - e), i = Math.max(e, i), n = t.timeRemaining(), i * 1.5 > n) {
        r - e < -20 && console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r - e))}ms`), this._start();
        return;
      }
      r = n;
    }
    this.clear();
  }
};
var Is = class extends rn {
  _requestCallback(t) {
    return setTimeout(() => t(this._createDeadline(16)));
  }
  _cancelCallback(t) {
    clearTimeout(t);
  }
  _createDeadline(t) {
    let e = performance.now() + t;
    return { timeRemaining: () => Math.max(0, e - performance.now()) };
  }
};
var ys = class extends rn {
  _requestCallback(t) {
    return requestIdleCallback(t);
  }
  _cancelCallback(t) {
    cancelIdleCallback(t);
  }
};
var Jt = !Mi && "requestIdleCallback" in window ? ys : Is;
var nn = class {
  constructor() {
    this._queue = new Jt();
  }
  set(t) {
    this._queue.clear(), this._queue.enqueue(t);
  }
  flush() {
    this._queue.flush();
  }
};
var Qt = class extends D {
  constructor(e, i, r, n, o2, l, a, u, h2) {
    super();
    this._rowCount = e;
    this._optionsService = r;
    this._charSizeService = n;
    this._coreService = o2;
    this._coreBrowserService = u;
    this._renderer = this._register(new ye());
    this._pausedResizeTask = new nn();
    this._observerDisposable = this._register(new ye());
    this._isPaused = false;
    this._needsFullRefresh = false;
    this._isNextRenderRedrawOnly = true;
    this._needsSelectionRefresh = false;
    this._canvasWidth = 0;
    this._canvasHeight = 0;
    this._selectionState = { start: void 0, end: void 0, columnSelectMode: false };
    this._onDimensionsChange = this._register(new v());
    this.onDimensionsChange = this._onDimensionsChange.event;
    this._onRenderedViewportChange = this._register(new v());
    this.onRenderedViewportChange = this._onRenderedViewportChange.event;
    this._onRender = this._register(new v());
    this.onRender = this._onRender.event;
    this._onRefreshRequest = this._register(new v());
    this.onRefreshRequest = this._onRefreshRequest.event;
    this._renderDebouncer = new en((c, d) => this._renderRows(c, d), this._coreBrowserService), this._register(this._renderDebouncer), this._syncOutputHandler = new xs(this._coreBrowserService, this._coreService, () => this._fullRefresh()), this._register(C(() => this._syncOutputHandler.dispose())), this._register(this._coreBrowserService.onDprChange(() => this.handleDevicePixelRatioChange())), this._register(a.onResize(() => this._fullRefresh())), this._register(a.buffers.onBufferActivate(() => this._renderer.value?.clear())), this._register(this._optionsService.onOptionChange(() => this._handleOptionsChanged())), this._register(this._charSizeService.onCharSizeChange(() => this.handleCharSizeChanged())), this._register(l.onDecorationRegistered(() => this._fullRefresh())), this._register(l.onDecorationRemoved(() => this._fullRefresh())), this._register(this._optionsService.onMultipleOptionChange(["customGlyphs", "drawBoldTextInBrightColors", "letterSpacing", "lineHeight", "fontFamily", "fontSize", "fontWeight", "fontWeightBold", "minimumContrastRatio", "rescaleOverlappingGlyphs"], () => {
      this.clear(), this.handleResize(a.cols, a.rows), this._fullRefresh();
    })), this._register(this._optionsService.onMultipleOptionChange(["cursorBlink", "cursorStyle"], () => this.refreshRows(a.buffer.y, a.buffer.y, true))), this._register(h2.onChangeColors(() => this._fullRefresh())), this._registerIntersectionObserver(this._coreBrowserService.window, i), this._register(this._coreBrowserService.onWindowChange((c) => this._registerIntersectionObserver(c, i)));
  }
  get dimensions() {
    return this._renderer.value.dimensions;
  }
  _registerIntersectionObserver(e, i) {
    if ("IntersectionObserver" in e) {
      let r = new e.IntersectionObserver((n) => this._handleIntersectionChange(n[n.length - 1]), { threshold: 0 });
      r.observe(i), this._observerDisposable.value = C(() => r.disconnect());
    }
  }
  _handleIntersectionChange(e) {
    this._isPaused = e.isIntersecting === void 0 ? e.intersectionRatio === 0 : !e.isIntersecting, !this._isPaused && !this._charSizeService.hasValidSize && this._charSizeService.measure(), !this._isPaused && this._needsFullRefresh && (this._pausedResizeTask.flush(), this.refreshRows(0, this._rowCount - 1), this._needsFullRefresh = false);
  }
  refreshRows(e, i, r = false) {
    if (this._isPaused) {
      this._needsFullRefresh = true;
      return;
    }
    if (this._coreService.decPrivateModes.synchronizedOutput) {
      this._syncOutputHandler.bufferRows(e, i);
      return;
    }
    let n = this._syncOutputHandler.flush();
    n && (e = Math.min(e, n.start), i = Math.max(i, n.end)), r || (this._isNextRenderRedrawOnly = false), this._renderDebouncer.refresh(e, i, this._rowCount);
  }
  _renderRows(e, i) {
    if (this._renderer.value) {
      if (this._coreService.decPrivateModes.synchronizedOutput) {
        this._syncOutputHandler.bufferRows(e, i);
        return;
      }
      e = Math.min(e, this._rowCount - 1), i = Math.min(i, this._rowCount - 1), this._renderer.value.renderRows(e, i), this._needsSelectionRefresh && (this._renderer.value.handleSelectionChanged(this._selectionState.start, this._selectionState.end, this._selectionState.columnSelectMode), this._needsSelectionRefresh = false), this._isNextRenderRedrawOnly || this._onRenderedViewportChange.fire({ start: e, end: i }), this._onRender.fire({ start: e, end: i }), this._isNextRenderRedrawOnly = true;
    }
  }
  resize(e, i) {
    this._rowCount = i, this._fireOnCanvasResize();
  }
  _handleOptionsChanged() {
    this._renderer.value && (this.refreshRows(0, this._rowCount - 1), this._fireOnCanvasResize());
  }
  _fireOnCanvasResize() {
    this._renderer.value && (this._renderer.value.dimensions.css.canvas.width === this._canvasWidth && this._renderer.value.dimensions.css.canvas.height === this._canvasHeight || this._onDimensionsChange.fire(this._renderer.value.dimensions));
  }
  hasRenderer() {
    return !!this._renderer.value;
  }
  setRenderer(e) {
    this._renderer.value = e, this._renderer.value && (this._renderer.value.onRequestRedraw((i) => this.refreshRows(i.start, i.end, true)), this._needsSelectionRefresh = true, this._fullRefresh());
  }
  addRefreshCallback(e) {
    return this._renderDebouncer.addRefreshCallback(e);
  }
  _fullRefresh() {
    this._isPaused ? this._needsFullRefresh = true : this.refreshRows(0, this._rowCount - 1);
  }
  clearTextureAtlas() {
    this._renderer.value && (this._renderer.value.clearTextureAtlas?.(), this._fullRefresh());
  }
  handleDevicePixelRatioChange() {
    this._charSizeService.measure(), this._renderer.value && (this._renderer.value.handleDevicePixelRatioChange(), this.refreshRows(0, this._rowCount - 1));
  }
  handleResize(e, i) {
    this._renderer.value && (this._isPaused ? this._pausedResizeTask.set(() => this._renderer.value?.handleResize(e, i)) : this._renderer.value.handleResize(e, i), this._fullRefresh());
  }
  handleCharSizeChanged() {
    this._renderer.value?.handleCharSizeChanged();
  }
  handleBlur() {
    this._renderer.value?.handleBlur();
  }
  handleFocus() {
    this._renderer.value?.handleFocus();
  }
  handleSelectionChanged(e, i, r) {
    this._selectionState.start = e, this._selectionState.end = i, this._selectionState.columnSelectMode = r, this._renderer.value?.handleSelectionChanged(e, i, r);
  }
  handleCursorMove() {
    this._renderer.value?.handleCursorMove();
  }
  clear() {
    this._renderer.value?.clear();
  }
};
Qt = M([S(2, H), S(3, nt), S(4, ge), S(5, Be), S(6, F), S(7, ae), S(8, Re)], Qt);
var xs = class {
  constructor(t, e, i) {
    this._coreBrowserService = t;
    this._coreService = e;
    this._onTimeout = i;
    this._start = 0;
    this._end = 0;
    this._isBuffering = false;
  }
  bufferRows(t, e) {
    this._isBuffering ? (this._start = Math.min(this._start, t), this._end = Math.max(this._end, e)) : (this._start = t, this._end = e, this._isBuffering = true), this._timeout === void 0 && (this._timeout = this._coreBrowserService.window.setTimeout(() => {
      this._timeout = void 0, this._coreService.decPrivateModes.synchronizedOutput = false, this._onTimeout();
    }, 1e3));
  }
  flush() {
    if (this._timeout !== void 0 && (this._coreBrowserService.window.clearTimeout(this._timeout), this._timeout = void 0), !this._isBuffering) return;
    let t = { start: this._start, end: this._end };
    return this._isBuffering = false, t;
  }
  dispose() {
    this._timeout !== void 0 && (this._coreBrowserService.window.clearTimeout(this._timeout), this._timeout = void 0);
  }
};
function Jo(s15, t, e, i) {
  let r = e.buffer.x, n = e.buffer.y;
  if (!e.buffer.hasScrollback) return Ga(r, n, s15, t, e, i) + sn(n, t, e, i) + $a(r, n, s15, t, e, i);
  let o2;
  if (n === t) return o2 = r > s15 ? "D" : "C", Fi(Math.abs(r - s15), Ni(o2, i));
  o2 = n > t ? "D" : "C";
  let l = Math.abs(n - t), a = za(n > t ? s15 : r, e) + (l - 1) * e.cols + 1 + Ka(n > t ? r : s15, e);
  return Fi(a, Ni(o2, i));
}
function Ka(s15, t) {
  return s15 - 1;
}
function za(s15, t) {
  return t.cols - s15;
}
function Ga(s15, t, e, i, r, n) {
  return sn(t, i, r, n).length === 0 ? "" : Fi(el(s15, t, s15, t - gt(t, r), false, r).length, Ni("D", n));
}
function sn(s15, t, e, i) {
  let r = s15 - gt(s15, e), n = t - gt(t, e), o2 = Math.abs(r - n) - Va(s15, t, e);
  return Fi(o2, Ni(Qo(s15, t), i));
}
function $a(s15, t, e, i, r, n) {
  let o2;
  sn(t, i, r, n).length > 0 ? o2 = i - gt(i, r) : o2 = t;
  let l = i, a = qa(s15, t, e, i, r, n);
  return Fi(el(s15, o2, e, l, a === "C", r).length, Ni(a, n));
}
function Va(s15, t, e) {
  let i = 0, r = s15 - gt(s15, e), n = t - gt(t, e);
  for (let o2 = 0; o2 < Math.abs(r - n); o2++) {
    let l = Qo(s15, t) === "A" ? -1 : 1;
    e.buffer.lines.get(r + l * o2)?.isWrapped && i++;
  }
  return i;
}
function gt(s15, t) {
  let e = 0, i = t.buffer.lines.get(s15), r = i?.isWrapped;
  for (; r && s15 >= 0 && s15 < t.rows; ) e++, i = t.buffer.lines.get(--s15), r = i?.isWrapped;
  return e;
}
function qa(s15, t, e, i, r, n) {
  let o2;
  return sn(e, i, r, n).length > 0 ? o2 = i - gt(i, r) : o2 = t, s15 < e && o2 <= i || s15 >= e && o2 < i ? "C" : "D";
}
function Qo(s15, t) {
  return s15 > t ? "A" : "B";
}
function el(s15, t, e, i, r, n) {
  let o2 = s15, l = t, a = "";
  for (; (o2 !== e || l !== i) && l >= 0 && l < n.buffer.lines.length; ) o2 += r ? 1 : -1, r && o2 > n.cols - 1 ? (a += n.buffer.translateBufferLineToString(l, false, s15, o2), o2 = 0, s15 = 0, l++) : !r && o2 < 0 && (a += n.buffer.translateBufferLineToString(l, false, 0, s15 + 1), o2 = n.cols - 1, s15 = o2, l--);
  return a + n.buffer.translateBufferLineToString(l, false, s15, o2);
}
function Ni(s15, t) {
  let e = t ? "O" : "[";
  return b.ESC + e + s15;
}
function Fi(s15, t) {
  s15 = Math.floor(s15);
  let e = "";
  for (let i = 0; i < s15; i++) e += t;
  return e;
}
var on = class {
  constructor(t) {
    this._bufferService = t;
    this.isSelectAllActive = false;
    this.selectionStartLength = 0;
  }
  clearSelection() {
    this.selectionStart = void 0, this.selectionEnd = void 0, this.isSelectAllActive = false, this.selectionStartLength = 0;
  }
  get finalSelectionStart() {
    return this.isSelectAllActive ? [0, 0] : !this.selectionEnd || !this.selectionStart ? this.selectionStart : this.areSelectionValuesReversed() ? this.selectionEnd : this.selectionStart;
  }
  get finalSelectionEnd() {
    if (this.isSelectAllActive) return [this._bufferService.cols, this._bufferService.buffer.ybase + this._bufferService.rows - 1];
    if (this.selectionStart) {
      if (!this.selectionEnd || this.areSelectionValuesReversed()) {
        let t = this.selectionStart[0] + this.selectionStartLength;
        return t > this._bufferService.cols ? t % this._bufferService.cols === 0 ? [this._bufferService.cols, this.selectionStart[1] + Math.floor(t / this._bufferService.cols) - 1] : [t % this._bufferService.cols, this.selectionStart[1] + Math.floor(t / this._bufferService.cols)] : [t, this.selectionStart[1]];
      }
      if (this.selectionStartLength && this.selectionEnd[1] === this.selectionStart[1]) {
        let t = this.selectionStart[0] + this.selectionStartLength;
        return t > this._bufferService.cols ? [t % this._bufferService.cols, this.selectionStart[1] + Math.floor(t / this._bufferService.cols)] : [Math.max(t, this.selectionEnd[0]), this.selectionEnd[1]];
      }
      return this.selectionEnd;
    }
  }
  areSelectionValuesReversed() {
    let t = this.selectionStart, e = this.selectionEnd;
    return !t || !e ? false : t[1] > e[1] || t[1] === e[1] && t[0] > e[0];
  }
  handleTrim(t) {
    return this.selectionStart && (this.selectionStart[1] -= t), this.selectionEnd && (this.selectionEnd[1] -= t), this.selectionEnd && this.selectionEnd[1] < 0 ? (this.clearSelection(), true) : (this.selectionStart && this.selectionStart[1] < 0 && (this.selectionStart[1] = 0), false);
  }
};
function ws(s15, t) {
  if (s15.start.y > s15.end.y) throw new Error(`Buffer range end (${s15.end.x}, ${s15.end.y}) cannot be before start (${s15.start.x}, ${s15.start.y})`);
  return t * (s15.end.y - s15.start.y) + (s15.end.x - s15.start.x + 1);
}
var Ds = 50;
var Ya = 15;
var ja = 50;
var Xa = 500;
var Za = "\xA0";
var Ja = new RegExp(Za, "g");
var ei = class extends D {
  constructor(e, i, r, n, o2, l, a, u, h2) {
    super();
    this._element = e;
    this._screenElement = i;
    this._linkifier = r;
    this._bufferService = n;
    this._coreService = o2;
    this._mouseService = l;
    this._optionsService = a;
    this._renderService = u;
    this._coreBrowserService = h2;
    this._dragScrollAmount = 0;
    this._enabled = true;
    this._workCell = new q();
    this._mouseDownTimeStamp = 0;
    this._oldHasSelection = false;
    this._oldSelectionStart = void 0;
    this._oldSelectionEnd = void 0;
    this._onLinuxMouseSelection = this._register(new v());
    this.onLinuxMouseSelection = this._onLinuxMouseSelection.event;
    this._onRedrawRequest = this._register(new v());
    this.onRequestRedraw = this._onRedrawRequest.event;
    this._onSelectionChange = this._register(new v());
    this.onSelectionChange = this._onSelectionChange.event;
    this._onRequestScrollLines = this._register(new v());
    this.onRequestScrollLines = this._onRequestScrollLines.event;
    this._mouseMoveListener = (c) => this._handleMouseMove(c), this._mouseUpListener = (c) => this._handleMouseUp(c), this._coreService.onUserInput(() => {
      this.hasSelection && this.clearSelection();
    }), this._trimListener = this._bufferService.buffer.lines.onTrim((c) => this._handleTrim(c)), this._register(this._bufferService.buffers.onBufferActivate((c) => this._handleBufferActivate(c))), this.enable(), this._model = new on(this._bufferService), this._activeSelectionMode = 0, this._register(C(() => {
      this._removeMouseDownListeners();
    })), this._register(this._bufferService.onResize((c) => {
      c.rowsChanged && this.clearSelection();
    }));
  }
  reset() {
    this.clearSelection();
  }
  disable() {
    this.clearSelection(), this._enabled = false;
  }
  enable() {
    this._enabled = true;
  }
  get selectionStart() {
    return this._model.finalSelectionStart;
  }
  get selectionEnd() {
    return this._model.finalSelectionEnd;
  }
  get hasSelection() {
    let e = this._model.finalSelectionStart, i = this._model.finalSelectionEnd;
    return !e || !i ? false : e[0] !== i[0] || e[1] !== i[1];
  }
  get selectionText() {
    let e = this._model.finalSelectionStart, i = this._model.finalSelectionEnd;
    if (!e || !i) return "";
    let r = this._bufferService.buffer, n = [];
    if (this._activeSelectionMode === 3) {
      if (e[0] === i[0]) return "";
      let l = e[0] < i[0] ? e[0] : i[0], a = e[0] < i[0] ? i[0] : e[0];
      for (let u = e[1]; u <= i[1]; u++) {
        let h2 = r.translateBufferLineToString(u, true, l, a);
        n.push(h2);
      }
    } else {
      let l = e[1] === i[1] ? i[0] : void 0;
      n.push(r.translateBufferLineToString(e[1], true, e[0], l));
      for (let a = e[1] + 1; a <= i[1] - 1; a++) {
        let u = r.lines.get(a), h2 = r.translateBufferLineToString(a, true);
        u?.isWrapped ? n[n.length - 1] += h2 : n.push(h2);
      }
      if (e[1] !== i[1]) {
        let a = r.lines.get(i[1]), u = r.translateBufferLineToString(i[1], true, 0, i[0]);
        a && a.isWrapped ? n[n.length - 1] += u : n.push(u);
      }
    }
    return n.map((l) => l.replace(Ja, " ")).join(Es ? `\r
` : `
`);
  }
  clearSelection() {
    this._model.clearSelection(), this._removeMouseDownListeners(), this.refresh(), this._onSelectionChange.fire();
  }
  refresh(e) {
    this._refreshAnimationFrame || (this._refreshAnimationFrame = this._coreBrowserService.window.requestAnimationFrame(() => this._refresh())), Bi && e && this.selectionText.length && this._onLinuxMouseSelection.fire(this.selectionText);
  }
  _refresh() {
    this._refreshAnimationFrame = void 0, this._onRedrawRequest.fire({ start: this._model.finalSelectionStart, end: this._model.finalSelectionEnd, columnSelectMode: this._activeSelectionMode === 3 });
  }
  _isClickInSelection(e) {
    let i = this._getMouseBufferCoords(e), r = this._model.finalSelectionStart, n = this._model.finalSelectionEnd;
    return !r || !n || !i ? false : this._areCoordsInSelection(i, r, n);
  }
  isCellInSelection(e, i) {
    let r = this._model.finalSelectionStart, n = this._model.finalSelectionEnd;
    return !r || !n ? false : this._areCoordsInSelection([e, i], r, n);
  }
  _areCoordsInSelection(e, i, r) {
    return e[1] > i[1] && e[1] < r[1] || i[1] === r[1] && e[1] === i[1] && e[0] >= i[0] && e[0] < r[0] || i[1] < r[1] && e[1] === r[1] && e[0] < r[0] || i[1] < r[1] && e[1] === i[1] && e[0] >= i[0];
  }
  _selectWordAtCursor(e, i) {
    let r = this._linkifier.currentLink?.link?.range;
    if (r) return this._model.selectionStart = [r.start.x - 1, r.start.y - 1], this._model.selectionStartLength = ws(r, this._bufferService.cols), this._model.selectionEnd = void 0, true;
    let n = this._getMouseBufferCoords(e);
    return n ? (this._selectWordAt(n, i), this._model.selectionEnd = void 0, true) : false;
  }
  selectAll() {
    this._model.isSelectAllActive = true, this.refresh(), this._onSelectionChange.fire();
  }
  selectLines(e, i) {
    this._model.clearSelection(), e = Math.max(e, 0), i = Math.min(i, this._bufferService.buffer.lines.length - 1), this._model.selectionStart = [0, e], this._model.selectionEnd = [this._bufferService.cols, i], this.refresh(), this._onSelectionChange.fire();
  }
  _handleTrim(e) {
    this._model.handleTrim(e) && this.refresh();
  }
  _getMouseBufferCoords(e) {
    let i = this._mouseService.getCoords(e, this._screenElement, this._bufferService.cols, this._bufferService.rows, true);
    if (i) return i[0]--, i[1]--, i[1] += this._bufferService.buffer.ydisp, i;
  }
  _getMouseEventScrollAmount(e) {
    let i = Ci(this._coreBrowserService.window, e, this._screenElement)[1], r = this._renderService.dimensions.css.canvas.height;
    return i >= 0 && i <= r ? 0 : (i > r && (i -= r), i = Math.min(Math.max(i, -Ds), Ds), i /= Ds, i / Math.abs(i) + Math.round(i * (Ya - 1)));
  }
  shouldForceSelection(e) {
    return Zt ? e.altKey && this._optionsService.rawOptions.macOptionClickForcesSelection : e.shiftKey;
  }
  handleMouseDown(e) {
    if (this._mouseDownTimeStamp = e.timeStamp, !(e.button === 2 && this.hasSelection) && e.button === 0) {
      if (!this._enabled) {
        if (!this.shouldForceSelection(e)) return;
        e.stopPropagation();
      }
      e.preventDefault(), this._dragScrollAmount = 0, this._enabled && e.shiftKey ? this._handleIncrementalClick(e) : e.detail === 1 ? this._handleSingleClick(e) : e.detail === 2 ? this._handleDoubleClick(e) : e.detail === 3 && this._handleTripleClick(e), this._addMouseDownListeners(), this.refresh(true);
    }
  }
  _addMouseDownListeners() {
    this._screenElement.ownerDocument && (this._screenElement.ownerDocument.addEventListener("mousemove", this._mouseMoveListener), this._screenElement.ownerDocument.addEventListener("mouseup", this._mouseUpListener)), this._dragScrollIntervalTimer = this._coreBrowserService.window.setInterval(() => this._dragScroll(), ja);
  }
  _removeMouseDownListeners() {
    this._screenElement.ownerDocument && (this._screenElement.ownerDocument.removeEventListener("mousemove", this._mouseMoveListener), this._screenElement.ownerDocument.removeEventListener("mouseup", this._mouseUpListener)), this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer), this._dragScrollIntervalTimer = void 0;
  }
  _handleIncrementalClick(e) {
    this._model.selectionStart && (this._model.selectionEnd = this._getMouseBufferCoords(e));
  }
  _handleSingleClick(e) {
    if (this._model.selectionStartLength = 0, this._model.isSelectAllActive = false, this._activeSelectionMode = this.shouldColumnSelect(e) ? 3 : 0, this._model.selectionStart = this._getMouseBufferCoords(e), !this._model.selectionStart) return;
    this._model.selectionEnd = void 0;
    let i = this._bufferService.buffer.lines.get(this._model.selectionStart[1]);
    i && i.length !== this._model.selectionStart[0] && i.hasWidth(this._model.selectionStart[0]) === 0 && this._model.selectionStart[0]++;
  }
  _handleDoubleClick(e) {
    this._selectWordAtCursor(e, true) && (this._activeSelectionMode = 1);
  }
  _handleTripleClick(e) {
    let i = this._getMouseBufferCoords(e);
    i && (this._activeSelectionMode = 2, this._selectLineAt(i[1]));
  }
  shouldColumnSelect(e) {
    return e.altKey && !(Zt && this._optionsService.rawOptions.macOptionClickForcesSelection);
  }
  _handleMouseMove(e) {
    if (e.stopImmediatePropagation(), !this._model.selectionStart) return;
    let i = this._model.selectionEnd ? [this._model.selectionEnd[0], this._model.selectionEnd[1]] : null;
    if (this._model.selectionEnd = this._getMouseBufferCoords(e), !this._model.selectionEnd) {
      this.refresh(true);
      return;
    }
    this._activeSelectionMode === 2 ? this._model.selectionEnd[1] < this._model.selectionStart[1] ? this._model.selectionEnd[0] = 0 : this._model.selectionEnd[0] = this._bufferService.cols : this._activeSelectionMode === 1 && this._selectToWordAt(this._model.selectionEnd), this._dragScrollAmount = this._getMouseEventScrollAmount(e), this._activeSelectionMode !== 3 && (this._dragScrollAmount > 0 ? this._model.selectionEnd[0] = this._bufferService.cols : this._dragScrollAmount < 0 && (this._model.selectionEnd[0] = 0));
    let r = this._bufferService.buffer;
    if (this._model.selectionEnd[1] < r.lines.length) {
      let n = r.lines.get(this._model.selectionEnd[1]);
      n && n.hasWidth(this._model.selectionEnd[0]) === 0 && this._model.selectionEnd[0] < this._bufferService.cols && this._model.selectionEnd[0]++;
    }
    (!i || i[0] !== this._model.selectionEnd[0] || i[1] !== this._model.selectionEnd[1]) && this.refresh(true);
  }
  _dragScroll() {
    if (!(!this._model.selectionEnd || !this._model.selectionStart) && this._dragScrollAmount) {
      this._onRequestScrollLines.fire({ amount: this._dragScrollAmount, suppressScrollEvent: false });
      let e = this._bufferService.buffer;
      this._dragScrollAmount > 0 ? (this._activeSelectionMode !== 3 && (this._model.selectionEnd[0] = this._bufferService.cols), this._model.selectionEnd[1] = Math.min(e.ydisp + this._bufferService.rows, e.lines.length - 1)) : (this._activeSelectionMode !== 3 && (this._model.selectionEnd[0] = 0), this._model.selectionEnd[1] = e.ydisp), this.refresh();
    }
  }
  _handleMouseUp(e) {
    let i = e.timeStamp - this._mouseDownTimeStamp;
    if (this._removeMouseDownListeners(), this.selectionText.length <= 1 && i < Xa && e.altKey && this._optionsService.rawOptions.altClickMovesCursor) {
      if (this._bufferService.buffer.ybase === this._bufferService.buffer.ydisp) {
        let r = this._mouseService.getCoords(e, this._element, this._bufferService.cols, this._bufferService.rows, false);
        if (r && r[0] !== void 0 && r[1] !== void 0) {
          let n = Jo(r[0] - 1, r[1] - 1, this._bufferService, this._coreService.decPrivateModes.applicationCursorKeys);
          this._coreService.triggerDataEvent(n, true);
        }
      }
    } else this._fireEventIfSelectionChanged();
  }
  _fireEventIfSelectionChanged() {
    let e = this._model.finalSelectionStart, i = this._model.finalSelectionEnd, r = !!e && !!i && (e[0] !== i[0] || e[1] !== i[1]);
    if (!r) {
      this._oldHasSelection && this._fireOnSelectionChange(e, i, r);
      return;
    }
    !e || !i || (!this._oldSelectionStart || !this._oldSelectionEnd || e[0] !== this._oldSelectionStart[0] || e[1] !== this._oldSelectionStart[1] || i[0] !== this._oldSelectionEnd[0] || i[1] !== this._oldSelectionEnd[1]) && this._fireOnSelectionChange(e, i, r);
  }
  _fireOnSelectionChange(e, i, r) {
    this._oldSelectionStart = e, this._oldSelectionEnd = i, this._oldHasSelection = r, this._onSelectionChange.fire();
  }
  _handleBufferActivate(e) {
    this.clearSelection(), this._trimListener.dispose(), this._trimListener = e.activeBuffer.lines.onTrim((i) => this._handleTrim(i));
  }
  _convertViewportColToCharacterIndex(e, i) {
    let r = i;
    for (let n = 0; i >= n; n++) {
      let o2 = e.loadCell(n, this._workCell).getChars().length;
      this._workCell.getWidth() === 0 ? r-- : o2 > 1 && i !== n && (r += o2 - 1);
    }
    return r;
  }
  setSelection(e, i, r) {
    this._model.clearSelection(), this._removeMouseDownListeners(), this._model.selectionStart = [e, i], this._model.selectionStartLength = r, this.refresh(), this._fireEventIfSelectionChanged();
  }
  rightClickSelect(e) {
    this._isClickInSelection(e) || (this._selectWordAtCursor(e, false) && this.refresh(true), this._fireEventIfSelectionChanged());
  }
  _getWordAt(e, i, r = true, n = true) {
    if (e[0] >= this._bufferService.cols) return;
    let o2 = this._bufferService.buffer, l = o2.lines.get(e[1]);
    if (!l) return;
    let a = o2.translateBufferLineToString(e[1], false), u = this._convertViewportColToCharacterIndex(l, e[0]), h2 = u, c = e[0] - u, d = 0, _2 = 0, p = 0, m = 0;
    if (a.charAt(u) === " ") {
      for (; u > 0 && a.charAt(u - 1) === " "; ) u--;
      for (; h2 < a.length && a.charAt(h2 + 1) === " "; ) h2++;
    } else {
      let R = e[0], O = e[0];
      l.getWidth(R) === 0 && (d++, R--), l.getWidth(O) === 2 && (_2++, O++);
      let I = l.getString(O).length;
      for (I > 1 && (m += I - 1, h2 += I - 1); R > 0 && u > 0 && !this._isCharWordSeparator(l.loadCell(R - 1, this._workCell)); ) {
        l.loadCell(R - 1, this._workCell);
        let k = this._workCell.getChars().length;
        this._workCell.getWidth() === 0 ? (d++, R--) : k > 1 && (p += k - 1, u -= k - 1), u--, R--;
      }
      for (; O < l.length && h2 + 1 < a.length && !this._isCharWordSeparator(l.loadCell(O + 1, this._workCell)); ) {
        l.loadCell(O + 1, this._workCell);
        let k = this._workCell.getChars().length;
        this._workCell.getWidth() === 2 ? (_2++, O++) : k > 1 && (m += k - 1, h2 += k - 1), h2++, O++;
      }
    }
    h2++;
    let f = u + c - d + p, A = Math.min(this._bufferService.cols, h2 - u + d + _2 - p - m);
    if (!(!i && a.slice(u, h2).trim() === "")) {
      if (r && f === 0 && l.getCodePoint(0) !== 32) {
        let R = o2.lines.get(e[1] - 1);
        if (R && l.isWrapped && R.getCodePoint(this._bufferService.cols - 1) !== 32) {
          let O = this._getWordAt([this._bufferService.cols - 1, e[1] - 1], false, true, false);
          if (O) {
            let I = this._bufferService.cols - O.start;
            f -= I, A += I;
          }
        }
      }
      if (n && f + A === this._bufferService.cols && l.getCodePoint(this._bufferService.cols - 1) !== 32) {
        let R = o2.lines.get(e[1] + 1);
        if (R?.isWrapped && R.getCodePoint(0) !== 32) {
          let O = this._getWordAt([0, e[1] + 1], false, false, true);
          O && (A += O.length);
        }
      }
      return { start: f, length: A };
    }
  }
  _selectWordAt(e, i) {
    let r = this._getWordAt(e, i);
    if (r) {
      for (; r.start < 0; ) r.start += this._bufferService.cols, e[1]--;
      this._model.selectionStart = [r.start, e[1]], this._model.selectionStartLength = r.length;
    }
  }
  _selectToWordAt(e) {
    let i = this._getWordAt(e, true);
    if (i) {
      let r = e[1];
      for (; i.start < 0; ) i.start += this._bufferService.cols, r--;
      if (!this._model.areSelectionValuesReversed()) for (; i.start + i.length > this._bufferService.cols; ) i.length -= this._bufferService.cols, r++;
      this._model.selectionEnd = [this._model.areSelectionValuesReversed() ? i.start : i.start + i.length, r];
    }
  }
  _isCharWordSeparator(e) {
    return e.getWidth() === 0 ? false : this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars()) >= 0;
  }
  _selectLineAt(e) {
    let i = this._bufferService.buffer.getWrappedRangeForLine(e), r = { start: { x: 0, y: i.first }, end: { x: this._bufferService.cols - 1, y: i.last } };
    this._model.selectionStart = [0, i.first], this._model.selectionEnd = void 0, this._model.selectionStartLength = ws(r, this._bufferService.cols);
  }
};
ei = M([S(3, F), S(4, ge), S(5, Dt), S(6, H), S(7, ce), S(8, ae)], ei);
var Hi = class {
  constructor() {
    this._data = {};
  }
  set(t, e, i) {
    this._data[t] || (this._data[t] = {}), this._data[t][e] = i;
  }
  get(t, e) {
    return this._data[t] ? this._data[t][e] : void 0;
  }
  clear() {
    this._data = {};
  }
};
var Wi = class {
  constructor() {
    this._color = new Hi();
    this._css = new Hi();
  }
  setCss(t, e, i) {
    this._css.set(t, e, i);
  }
  getCss(t, e) {
    return this._css.get(t, e);
  }
  setColor(t, e, i) {
    this._color.set(t, e, i);
  }
  getColor(t, e) {
    return this._color.get(t, e);
  }
  clear() {
    this._color.clear(), this._css.clear();
  }
};
var re = Object.freeze((() => {
  let s15 = [z.toColor("#2e3436"), z.toColor("#cc0000"), z.toColor("#4e9a06"), z.toColor("#c4a000"), z.toColor("#3465a4"), z.toColor("#75507b"), z.toColor("#06989a"), z.toColor("#d3d7cf"), z.toColor("#555753"), z.toColor("#ef2929"), z.toColor("#8ae234"), z.toColor("#fce94f"), z.toColor("#729fcf"), z.toColor("#ad7fa8"), z.toColor("#34e2e2"), z.toColor("#eeeeec")], t = [0, 95, 135, 175, 215, 255];
  for (let e = 0; e < 216; e++) {
    let i = t[e / 36 % 6 | 0], r = t[e / 6 % 6 | 0], n = t[e % 6];
    s15.push({ css: j.toCss(i, r, n), rgba: j.toRgba(i, r, n) });
  }
  for (let e = 0; e < 24; e++) {
    let i = 8 + e * 10;
    s15.push({ css: j.toCss(i, i, i), rgba: j.toRgba(i, i, i) });
  }
  return s15;
})());
var St = z.toColor("#ffffff");
var Ki = z.toColor("#000000");
var tl = z.toColor("#ffffff");
var il = Ki;
var Ui = { css: "rgba(255, 255, 255, 0.3)", rgba: 4294967117 };
var Qa = St;
var ti = class extends D {
  constructor(e) {
    super();
    this._optionsService = e;
    this._contrastCache = new Wi();
    this._halfContrastCache = new Wi();
    this._onChangeColors = this._register(new v());
    this.onChangeColors = this._onChangeColors.event;
    this._colors = { foreground: St, background: Ki, cursor: tl, cursorAccent: il, selectionForeground: void 0, selectionBackgroundTransparent: Ui, selectionBackgroundOpaque: U.blend(Ki, Ui), selectionInactiveBackgroundTransparent: Ui, selectionInactiveBackgroundOpaque: U.blend(Ki, Ui), scrollbarSliderBackground: U.opacity(St, 0.2), scrollbarSliderHoverBackground: U.opacity(St, 0.4), scrollbarSliderActiveBackground: U.opacity(St, 0.5), overviewRulerBorder: St, ansi: re.slice(), contrastCache: this._contrastCache, halfContrastCache: this._halfContrastCache }, this._updateRestoreColors(), this._setTheme(this._optionsService.rawOptions.theme), this._register(this._optionsService.onSpecificOptionChange("minimumContrastRatio", () => this._contrastCache.clear())), this._register(this._optionsService.onSpecificOptionChange("theme", () => this._setTheme(this._optionsService.rawOptions.theme)));
  }
  get colors() {
    return this._colors;
  }
  _setTheme(e = {}) {
    let i = this._colors;
    if (i.foreground = K(e.foreground, St), i.background = K(e.background, Ki), i.cursor = U.blend(i.background, K(e.cursor, tl)), i.cursorAccent = U.blend(i.background, K(e.cursorAccent, il)), i.selectionBackgroundTransparent = K(e.selectionBackground, Ui), i.selectionBackgroundOpaque = U.blend(i.background, i.selectionBackgroundTransparent), i.selectionInactiveBackgroundTransparent = K(e.selectionInactiveBackground, i.selectionBackgroundTransparent), i.selectionInactiveBackgroundOpaque = U.blend(i.background, i.selectionInactiveBackgroundTransparent), i.selectionForeground = e.selectionForeground ? K(e.selectionForeground, ps) : void 0, i.selectionForeground === ps && (i.selectionForeground = void 0), U.isOpaque(i.selectionBackgroundTransparent) && (i.selectionBackgroundTransparent = U.opacity(i.selectionBackgroundTransparent, 0.3)), U.isOpaque(i.selectionInactiveBackgroundTransparent) && (i.selectionInactiveBackgroundTransparent = U.opacity(i.selectionInactiveBackgroundTransparent, 0.3)), i.scrollbarSliderBackground = K(e.scrollbarSliderBackground, U.opacity(i.foreground, 0.2)), i.scrollbarSliderHoverBackground = K(e.scrollbarSliderHoverBackground, U.opacity(i.foreground, 0.4)), i.scrollbarSliderActiveBackground = K(e.scrollbarSliderActiveBackground, U.opacity(i.foreground, 0.5)), i.overviewRulerBorder = K(e.overviewRulerBorder, Qa), i.ansi = re.slice(), i.ansi[0] = K(e.black, re[0]), i.ansi[1] = K(e.red, re[1]), i.ansi[2] = K(e.green, re[2]), i.ansi[3] = K(e.yellow, re[3]), i.ansi[4] = K(e.blue, re[4]), i.ansi[5] = K(e.magenta, re[5]), i.ansi[6] = K(e.cyan, re[6]), i.ansi[7] = K(e.white, re[7]), i.ansi[8] = K(e.brightBlack, re[8]), i.ansi[9] = K(e.brightRed, re[9]), i.ansi[10] = K(e.brightGreen, re[10]), i.ansi[11] = K(e.brightYellow, re[11]), i.ansi[12] = K(e.brightBlue, re[12]), i.ansi[13] = K(e.brightMagenta, re[13]), i.ansi[14] = K(e.brightCyan, re[14]), i.ansi[15] = K(e.brightWhite, re[15]), e.extendedAnsi) {
      let r = Math.min(i.ansi.length - 16, e.extendedAnsi.length);
      for (let n = 0; n < r; n++) i.ansi[n + 16] = K(e.extendedAnsi[n], re[n + 16]);
    }
    this._contrastCache.clear(), this._halfContrastCache.clear(), this._updateRestoreColors(), this._onChangeColors.fire(this.colors);
  }
  restoreColor(e) {
    this._restoreColor(e), this._onChangeColors.fire(this.colors);
  }
  _restoreColor(e) {
    if (e === void 0) {
      for (let i = 0; i < this._restoreColors.ansi.length; ++i) this._colors.ansi[i] = this._restoreColors.ansi[i];
      return;
    }
    switch (e) {
      case 256:
        this._colors.foreground = this._restoreColors.foreground;
        break;
      case 257:
        this._colors.background = this._restoreColors.background;
        break;
      case 258:
        this._colors.cursor = this._restoreColors.cursor;
        break;
      default:
        this._colors.ansi[e] = this._restoreColors.ansi[e];
    }
  }
  modifyColors(e) {
    e(this._colors), this._onChangeColors.fire(this.colors);
  }
  _updateRestoreColors() {
    this._restoreColors = { foreground: this._colors.foreground, background: this._colors.background, cursor: this._colors.cursor, ansi: this._colors.ansi.slice() };
  }
};
ti = M([S(0, H)], ti);
function K(s15, t) {
  if (s15 !== void 0) try {
    return z.toColor(s15);
  } catch {
  }
  return t;
}
var Rs = class {
  constructor(...t) {
    this._entries = /* @__PURE__ */ new Map();
    for (let [e, i] of t) this.set(e, i);
  }
  set(t, e) {
    let i = this._entries.get(t);
    return this._entries.set(t, e), i;
  }
  forEach(t) {
    for (let [e, i] of this._entries.entries()) t(e, i);
  }
  has(t) {
    return this._entries.has(t);
  }
  get(t) {
    return this._entries.get(t);
  }
};
var ln = class {
  constructor() {
    this._services = new Rs();
    this._services.set(xt, this);
  }
  setService(t, e) {
    this._services.set(t, e);
  }
  getService(t) {
    return this._services.get(t);
  }
  createInstance(t, ...e) {
    let i = Xs(t).sort((o2, l) => o2.index - l.index), r = [];
    for (let o2 of i) {
      let l = this._services.get(o2.id);
      if (!l) throw new Error(`[createInstance] ${t.name} depends on UNKNOWN service ${o2.id._id}.`);
      r.push(l);
    }
    let n = i.length > 0 ? i[0].index : e.length;
    if (e.length !== n) throw new Error(`[createInstance] First service dependency of ${t.name} at position ${n + 1} conflicts with ${e.length} static arguments`);
    return new t(...e, ...r);
  }
};
var ec = { trace: 0, debug: 1, info: 2, warn: 3, error: 4, off: 5 };
var tc = "xterm.js: ";
var ii = class extends D {
  constructor(e) {
    super();
    this._optionsService = e;
    this._logLevel = 5;
    this._updateLogLevel(), this._register(this._optionsService.onSpecificOptionChange("logLevel", () => this._updateLogLevel())), ic = this;
  }
  get logLevel() {
    return this._logLevel;
  }
  _updateLogLevel() {
    this._logLevel = ec[this._optionsService.rawOptions.logLevel];
  }
  _evalLazyOptionalParams(e) {
    for (let i = 0; i < e.length; i++) typeof e[i] == "function" && (e[i] = e[i]());
  }
  _log(e, i, r) {
    this._evalLazyOptionalParams(r), e.call(console, (this._optionsService.options.logger ? "" : tc) + i, ...r);
  }
  trace(e, ...i) {
    this._logLevel <= 0 && this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, e, i);
  }
  debug(e, ...i) {
    this._logLevel <= 1 && this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, e, i);
  }
  info(e, ...i) {
    this._logLevel <= 2 && this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, e, i);
  }
  warn(e, ...i) {
    this._logLevel <= 3 && this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, e, i);
  }
  error(e, ...i) {
    this._logLevel <= 4 && this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, e, i);
  }
};
ii = M([S(0, H)], ii);
var ic;
var zi = class extends D {
  constructor(e) {
    super();
    this._maxLength = e;
    this.onDeleteEmitter = this._register(new v());
    this.onDelete = this.onDeleteEmitter.event;
    this.onInsertEmitter = this._register(new v());
    this.onInsert = this.onInsertEmitter.event;
    this.onTrimEmitter = this._register(new v());
    this.onTrim = this.onTrimEmitter.event;
    this._array = new Array(this._maxLength), this._startIndex = 0, this._length = 0;
  }
  get maxLength() {
    return this._maxLength;
  }
  set maxLength(e) {
    if (this._maxLength === e) return;
    let i = new Array(e);
    for (let r = 0; r < Math.min(e, this.length); r++) i[r] = this._array[this._getCyclicIndex(r)];
    this._array = i, this._maxLength = e, this._startIndex = 0;
  }
  get length() {
    return this._length;
  }
  set length(e) {
    if (e > this._length) for (let i = this._length; i < e; i++) this._array[i] = void 0;
    this._length = e;
  }
  get(e) {
    return this._array[this._getCyclicIndex(e)];
  }
  set(e, i) {
    this._array[this._getCyclicIndex(e)] = i;
  }
  push(e) {
    this._array[this._getCyclicIndex(this._length)] = e, this._length === this._maxLength ? (this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1)) : this._length++;
  }
  recycle() {
    if (this._length !== this._maxLength) throw new Error("Can only recycle when the buffer is full");
    return this._startIndex = ++this._startIndex % this._maxLength, this.onTrimEmitter.fire(1), this._array[this._getCyclicIndex(this._length - 1)];
  }
  get isFull() {
    return this._length === this._maxLength;
  }
  pop() {
    return this._array[this._getCyclicIndex(this._length-- - 1)];
  }
  splice(e, i, ...r) {
    if (i) {
      for (let n = e; n < this._length - i; n++) this._array[this._getCyclicIndex(n)] = this._array[this._getCyclicIndex(n + i)];
      this._length -= i, this.onDeleteEmitter.fire({ index: e, amount: i });
    }
    for (let n = this._length - 1; n >= e; n--) this._array[this._getCyclicIndex(n + r.length)] = this._array[this._getCyclicIndex(n)];
    for (let n = 0; n < r.length; n++) this._array[this._getCyclicIndex(e + n)] = r[n];
    if (r.length && this.onInsertEmitter.fire({ index: e, amount: r.length }), this._length + r.length > this._maxLength) {
      let n = this._length + r.length - this._maxLength;
      this._startIndex += n, this._length = this._maxLength, this.onTrimEmitter.fire(n);
    } else this._length += r.length;
  }
  trimStart(e) {
    e > this._length && (e = this._length), this._startIndex += e, this._length -= e, this.onTrimEmitter.fire(e);
  }
  shiftElements(e, i, r) {
    if (!(i <= 0)) {
      if (e < 0 || e >= this._length) throw new Error("start argument out of range");
      if (e + r < 0) throw new Error("Cannot shift elements in list beyond index 0");
      if (r > 0) {
        for (let o2 = i - 1; o2 >= 0; o2--) this.set(e + o2 + r, this.get(e + o2));
        let n = e + i + r - this._length;
        if (n > 0) for (this._length += n; this._length > this._maxLength; ) this._length--, this._startIndex++, this.onTrimEmitter.fire(1);
      } else for (let n = 0; n < i; n++) this.set(e + n + r, this.get(e + n));
    }
  }
  _getCyclicIndex(e) {
    return (this._startIndex + e) % this._maxLength;
  }
};
var B = 3;
var X = Object.freeze(new De());
var an = 0;
var Ls = 2;
var Ze = class s12 {
  constructor(t, e, i = false) {
    this.isWrapped = i;
    this._combined = {};
    this._extendedAttrs = {};
    this._data = new Uint32Array(t * B);
    let r = e || q.fromCharData([0, ir, 1, 0]);
    for (let n = 0; n < t; ++n) this.setCell(n, r);
    this.length = t;
  }
  get(t) {
    let e = this._data[t * B + 0], i = e & 2097151;
    return [this._data[t * B + 1], e & 2097152 ? this._combined[t] : i ? Ce(i) : "", e >> 22, e & 2097152 ? this._combined[t].charCodeAt(this._combined[t].length - 1) : i];
  }
  set(t, e) {
    this._data[t * B + 1] = e[0], e[1].length > 1 ? (this._combined[t] = e[1], this._data[t * B + 0] = t | 2097152 | e[2] << 22) : this._data[t * B + 0] = e[1].charCodeAt(0) | e[2] << 22;
  }
  getWidth(t) {
    return this._data[t * B + 0] >> 22;
  }
  hasWidth(t) {
    return this._data[t * B + 0] & 12582912;
  }
  getFg(t) {
    return this._data[t * B + 1];
  }
  getBg(t) {
    return this._data[t * B + 2];
  }
  hasContent(t) {
    return this._data[t * B + 0] & 4194303;
  }
  getCodePoint(t) {
    let e = this._data[t * B + 0];
    return e & 2097152 ? this._combined[t].charCodeAt(this._combined[t].length - 1) : e & 2097151;
  }
  isCombined(t) {
    return this._data[t * B + 0] & 2097152;
  }
  getString(t) {
    let e = this._data[t * B + 0];
    return e & 2097152 ? this._combined[t] : e & 2097151 ? Ce(e & 2097151) : "";
  }
  isProtected(t) {
    return this._data[t * B + 2] & 536870912;
  }
  loadCell(t, e) {
    return an = t * B, e.content = this._data[an + 0], e.fg = this._data[an + 1], e.bg = this._data[an + 2], e.content & 2097152 && (e.combinedData = this._combined[t]), e.bg & 268435456 && (e.extended = this._extendedAttrs[t]), e;
  }
  setCell(t, e) {
    e.content & 2097152 && (this._combined[t] = e.combinedData), e.bg & 268435456 && (this._extendedAttrs[t] = e.extended), this._data[t * B + 0] = e.content, this._data[t * B + 1] = e.fg, this._data[t * B + 2] = e.bg;
  }
  setCellFromCodepoint(t, e, i, r) {
    r.bg & 268435456 && (this._extendedAttrs[t] = r.extended), this._data[t * B + 0] = e | i << 22, this._data[t * B + 1] = r.fg, this._data[t * B + 2] = r.bg;
  }
  addCodepointToCell(t, e, i) {
    let r = this._data[t * B + 0];
    r & 2097152 ? this._combined[t] += Ce(e) : r & 2097151 ? (this._combined[t] = Ce(r & 2097151) + Ce(e), r &= -2097152, r |= 2097152) : r = e | 1 << 22, i && (r &= -12582913, r |= i << 22), this._data[t * B + 0] = r;
  }
  insertCells(t, e, i) {
    if (t %= this.length, t && this.getWidth(t - 1) === 2 && this.setCellFromCodepoint(t - 1, 0, 1, i), e < this.length - t) {
      let r = new q();
      for (let n = this.length - t - e - 1; n >= 0; --n) this.setCell(t + e + n, this.loadCell(t + n, r));
      for (let n = 0; n < e; ++n) this.setCell(t + n, i);
    } else for (let r = t; r < this.length; ++r) this.setCell(r, i);
    this.getWidth(this.length - 1) === 2 && this.setCellFromCodepoint(this.length - 1, 0, 1, i);
  }
  deleteCells(t, e, i) {
    if (t %= this.length, e < this.length - t) {
      let r = new q();
      for (let n = 0; n < this.length - t - e; ++n) this.setCell(t + n, this.loadCell(t + e + n, r));
      for (let n = this.length - e; n < this.length; ++n) this.setCell(n, i);
    } else for (let r = t; r < this.length; ++r) this.setCell(r, i);
    t && this.getWidth(t - 1) === 2 && this.setCellFromCodepoint(t - 1, 0, 1, i), this.getWidth(t) === 0 && !this.hasContent(t) && this.setCellFromCodepoint(t, 0, 1, i);
  }
  replaceCells(t, e, i, r = false) {
    if (r) {
      for (t && this.getWidth(t - 1) === 2 && !this.isProtected(t - 1) && this.setCellFromCodepoint(t - 1, 0, 1, i), e < this.length && this.getWidth(e - 1) === 2 && !this.isProtected(e) && this.setCellFromCodepoint(e, 0, 1, i); t < e && t < this.length; ) this.isProtected(t) || this.setCell(t, i), t++;
      return;
    }
    for (t && this.getWidth(t - 1) === 2 && this.setCellFromCodepoint(t - 1, 0, 1, i), e < this.length && this.getWidth(e - 1) === 2 && this.setCellFromCodepoint(e, 0, 1, i); t < e && t < this.length; ) this.setCell(t++, i);
  }
  resize(t, e) {
    if (t === this.length) return this._data.length * 4 * Ls < this._data.buffer.byteLength;
    let i = t * B;
    if (t > this.length) {
      if (this._data.buffer.byteLength >= i * 4) this._data = new Uint32Array(this._data.buffer, 0, i);
      else {
        let r = new Uint32Array(i);
        r.set(this._data), this._data = r;
      }
      for (let r = this.length; r < t; ++r) this.setCell(r, e);
    } else {
      this._data = this._data.subarray(0, i);
      let r = Object.keys(this._combined);
      for (let o2 = 0; o2 < r.length; o2++) {
        let l = parseInt(r[o2], 10);
        l >= t && delete this._combined[l];
      }
      let n = Object.keys(this._extendedAttrs);
      for (let o2 = 0; o2 < n.length; o2++) {
        let l = parseInt(n[o2], 10);
        l >= t && delete this._extendedAttrs[l];
      }
    }
    return this.length = t, i * 4 * Ls < this._data.buffer.byteLength;
  }
  cleanupMemory() {
    if (this._data.length * 4 * Ls < this._data.buffer.byteLength) {
      let t = new Uint32Array(this._data.length);
      return t.set(this._data), this._data = t, 1;
    }
    return 0;
  }
  fill(t, e = false) {
    if (e) {
      for (let i = 0; i < this.length; ++i) this.isProtected(i) || this.setCell(i, t);
      return;
    }
    this._combined = {}, this._extendedAttrs = {};
    for (let i = 0; i < this.length; ++i) this.setCell(i, t);
  }
  copyFrom(t) {
    this.length !== t.length ? this._data = new Uint32Array(t._data) : this._data.set(t._data), this.length = t.length, this._combined = {};
    for (let e in t._combined) this._combined[e] = t._combined[e];
    this._extendedAttrs = {};
    for (let e in t._extendedAttrs) this._extendedAttrs[e] = t._extendedAttrs[e];
    this.isWrapped = t.isWrapped;
  }
  clone() {
    let t = new s12(0);
    t._data = new Uint32Array(this._data), t.length = this.length;
    for (let e in this._combined) t._combined[e] = this._combined[e];
    for (let e in this._extendedAttrs) t._extendedAttrs[e] = this._extendedAttrs[e];
    return t.isWrapped = this.isWrapped, t;
  }
  getTrimmedLength() {
    for (let t = this.length - 1; t >= 0; --t) if (this._data[t * B + 0] & 4194303) return t + (this._data[t * B + 0] >> 22);
    return 0;
  }
  getNoBgTrimmedLength() {
    for (let t = this.length - 1; t >= 0; --t) if (this._data[t * B + 0] & 4194303 || this._data[t * B + 2] & 50331648) return t + (this._data[t * B + 0] >> 22);
    return 0;
  }
  copyCellsFrom(t, e, i, r, n) {
    let o2 = t._data;
    if (n) for (let a = r - 1; a >= 0; a--) {
      for (let u = 0; u < B; u++) this._data[(i + a) * B + u] = o2[(e + a) * B + u];
      o2[(e + a) * B + 2] & 268435456 && (this._extendedAttrs[i + a] = t._extendedAttrs[e + a]);
    }
    else for (let a = 0; a < r; a++) {
      for (let u = 0; u < B; u++) this._data[(i + a) * B + u] = o2[(e + a) * B + u];
      o2[(e + a) * B + 2] & 268435456 && (this._extendedAttrs[i + a] = t._extendedAttrs[e + a]);
    }
    let l = Object.keys(t._combined);
    for (let a = 0; a < l.length; a++) {
      let u = parseInt(l[a], 10);
      u >= e && (this._combined[u - e + i] = t._combined[u]);
    }
  }
  translateToString(t, e, i, r) {
    e = e ?? 0, i = i ?? this.length, t && (i = Math.min(i, this.getTrimmedLength())), r && (r.length = 0);
    let n = "";
    for (; e < i; ) {
      let o2 = this._data[e * B + 0], l = o2 & 2097151, a = o2 & 2097152 ? this._combined[e] : l ? Ce(l) : we;
      if (n += a, r) for (let u = 0; u < a.length; ++u) r.push(e);
      e += o2 >> 22 || 1;
    }
    return r && r.push(e), n;
  }
};
function sl(s15, t, e, i, r, n) {
  let o2 = [];
  for (let l = 0; l < s15.length - 1; l++) {
    let a = l, u = s15.get(++a);
    if (!u.isWrapped) continue;
    let h2 = [s15.get(l)];
    for (; a < s15.length && u.isWrapped; ) h2.push(u), u = s15.get(++a);
    if (!n && i >= l && i < a) {
      l += h2.length - 1;
      continue;
    }
    let c = 0, d = ri(h2, c, t), _2 = 1, p = 0;
    for (; _2 < h2.length; ) {
      let f = ri(h2, _2, t), A = f - p, R = e - d, O = Math.min(A, R);
      h2[c].copyCellsFrom(h2[_2], p, d, O, false), d += O, d === e && (c++, d = 0), p += O, p === f && (_2++, p = 0), d === 0 && c !== 0 && h2[c - 1].getWidth(e - 1) === 2 && (h2[c].copyCellsFrom(h2[c - 1], e - 1, d++, 1, false), h2[c - 1].setCell(e - 1, r));
    }
    h2[c].replaceCells(d, e, r);
    let m = 0;
    for (let f = h2.length - 1; f > 0 && (f > c || h2[f].getTrimmedLength() === 0); f--) m++;
    m > 0 && (o2.push(l + h2.length - m), o2.push(m)), l += h2.length - 1;
  }
  return o2;
}
function ol(s15, t) {
  let e = [], i = 0, r = t[i], n = 0;
  for (let o2 = 0; o2 < s15.length; o2++) if (r === o2) {
    let l = t[++i];
    s15.onDeleteEmitter.fire({ index: o2 - n, amount: l }), o2 += l - 1, n += l, r = t[++i];
  } else e.push(o2);
  return { layout: e, countRemoved: n };
}
function ll(s15, t) {
  let e = [];
  for (let i = 0; i < t.length; i++) e.push(s15.get(t[i]));
  for (let i = 0; i < e.length; i++) s15.set(i, e[i]);
  s15.length = t.length;
}
function al(s15, t, e) {
  let i = [], r = s15.map((a, u) => ri(s15, u, t)).reduce((a, u) => a + u), n = 0, o2 = 0, l = 0;
  for (; l < r; ) {
    if (r - l < e) {
      i.push(r - l);
      break;
    }
    n += e;
    let a = ri(s15, o2, t);
    n > a && (n -= a, o2++);
    let u = s15[o2].getWidth(n - 1) === 2;
    u && n--;
    let h2 = u ? e - 1 : e;
    i.push(h2), l += h2;
  }
  return i;
}
function ri(s15, t, e) {
  if (t === s15.length - 1) return s15[t].getTrimmedLength();
  let i = !s15[t].hasContent(e - 1) && s15[t].getWidth(e - 1) === 1, r = s15[t + 1].getWidth(0) === 2;
  return i && r ? e - 1 : e;
}
var un = class un2 {
  constructor(t) {
    this.line = t;
    this.isDisposed = false;
    this._disposables = [];
    this._id = un2._nextId++;
    this._onDispose = this.register(new v());
    this.onDispose = this._onDispose.event;
  }
  get id() {
    return this._id;
  }
  dispose() {
    this.isDisposed || (this.isDisposed = true, this.line = -1, this._onDispose.fire(), Ne(this._disposables), this._disposables.length = 0);
  }
  register(t) {
    return this._disposables.push(t), t;
  }
};
un._nextId = 1;
var cn = un;
var ne = {};
var Je = ne.B;
ne[0] = { "`": "\u25C6", a: "\u2592", b: "\u2409", c: "\u240C", d: "\u240D", e: "\u240A", f: "\xB0", g: "\xB1", h: "\u2424", i: "\u240B", j: "\u2518", k: "\u2510", l: "\u250C", m: "\u2514", n: "\u253C", o: "\u23BA", p: "\u23BB", q: "\u2500", r: "\u23BC", s: "\u23BD", t: "\u251C", u: "\u2524", v: "\u2534", w: "\u252C", x: "\u2502", y: "\u2264", z: "\u2265", "{": "\u03C0", "|": "\u2260", "}": "\xA3", "~": "\xB7" };
ne.A = { "#": "\xA3" };
ne.B = void 0;
ne[4] = { "#": "\xA3", "@": "\xBE", "[": "ij", "\\": "\xBD", "]": "|", "{": "\xA8", "|": "f", "}": "\xBC", "~": "\xB4" };
ne.C = ne[5] = { "[": "\xC4", "\\": "\xD6", "]": "\xC5", "^": "\xDC", "`": "\xE9", "{": "\xE4", "|": "\xF6", "}": "\xE5", "~": "\xFC" };
ne.R = { "#": "\xA3", "@": "\xE0", "[": "\xB0", "\\": "\xE7", "]": "\xA7", "{": "\xE9", "|": "\xF9", "}": "\xE8", "~": "\xA8" };
ne.Q = { "@": "\xE0", "[": "\xE2", "\\": "\xE7", "]": "\xEA", "^": "\xEE", "`": "\xF4", "{": "\xE9", "|": "\xF9", "}": "\xE8", "~": "\xFB" };
ne.K = { "@": "\xA7", "[": "\xC4", "\\": "\xD6", "]": "\xDC", "{": "\xE4", "|": "\xF6", "}": "\xFC", "~": "\xDF" };
ne.Y = { "#": "\xA3", "@": "\xA7", "[": "\xB0", "\\": "\xE7", "]": "\xE9", "`": "\xF9", "{": "\xE0", "|": "\xF2", "}": "\xE8", "~": "\xEC" };
ne.E = ne[6] = { "@": "\xC4", "[": "\xC6", "\\": "\xD8", "]": "\xC5", "^": "\xDC", "`": "\xE4", "{": "\xE6", "|": "\xF8", "}": "\xE5", "~": "\xFC" };
ne.Z = { "#": "\xA3", "@": "\xA7", "[": "\xA1", "\\": "\xD1", "]": "\xBF", "{": "\xB0", "|": "\xF1", "}": "\xE7" };
ne.H = ne[7] = { "@": "\xC9", "[": "\xC4", "\\": "\xD6", "]": "\xC5", "^": "\xDC", "`": "\xE9", "{": "\xE4", "|": "\xF6", "}": "\xE5", "~": "\xFC" };
ne["="] = { "#": "\xF9", "@": "\xE0", "[": "\xE9", "\\": "\xE7", "]": "\xEA", "^": "\xEE", _: "\xE8", "`": "\xF4", "{": "\xE4", "|": "\xF6", "}": "\xFC", "~": "\xFB" };
var cl = 4294967295;
var $i = class {
  constructor(t, e, i) {
    this._hasScrollback = t;
    this._optionsService = e;
    this._bufferService = i;
    this.ydisp = 0;
    this.ybase = 0;
    this.y = 0;
    this.x = 0;
    this.tabs = {};
    this.savedY = 0;
    this.savedX = 0;
    this.savedCurAttrData = X.clone();
    this.savedCharset = Je;
    this.markers = [];
    this._nullCell = q.fromCharData([0, ir, 1, 0]);
    this._whitespaceCell = q.fromCharData([0, we, 1, 32]);
    this._isClearing = false;
    this._memoryCleanupQueue = new Jt();
    this._memoryCleanupPosition = 0;
    this._cols = this._bufferService.cols, this._rows = this._bufferService.rows, this.lines = new zi(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops();
  }
  getNullCell(t) {
    return t ? (this._nullCell.fg = t.fg, this._nullCell.bg = t.bg, this._nullCell.extended = t.extended) : (this._nullCell.fg = 0, this._nullCell.bg = 0, this._nullCell.extended = new rt()), this._nullCell;
  }
  getWhitespaceCell(t) {
    return t ? (this._whitespaceCell.fg = t.fg, this._whitespaceCell.bg = t.bg, this._whitespaceCell.extended = t.extended) : (this._whitespaceCell.fg = 0, this._whitespaceCell.bg = 0, this._whitespaceCell.extended = new rt()), this._whitespaceCell;
  }
  getBlankLine(t, e) {
    return new Ze(this._bufferService.cols, this.getNullCell(t), e);
  }
  get hasScrollback() {
    return this._hasScrollback && this.lines.maxLength > this._rows;
  }
  get isCursorInViewport() {
    let e = this.ybase + this.y - this.ydisp;
    return e >= 0 && e < this._rows;
  }
  _getCorrectBufferLength(t) {
    if (!this._hasScrollback) return t;
    let e = t + this._optionsService.rawOptions.scrollback;
    return e > cl ? cl : e;
  }
  fillViewportRows(t) {
    if (this.lines.length === 0) {
      t === void 0 && (t = X);
      let e = this._rows;
      for (; e--; ) this.lines.push(this.getBlankLine(t));
    }
  }
  clear() {
    this.ydisp = 0, this.ybase = 0, this.y = 0, this.x = 0, this.lines = new zi(this._getCorrectBufferLength(this._rows)), this.scrollTop = 0, this.scrollBottom = this._rows - 1, this.setupTabStops();
  }
  resize(t, e) {
    let i = this.getNullCell(X), r = 0, n = this._getCorrectBufferLength(e);
    if (n > this.lines.maxLength && (this.lines.maxLength = n), this.lines.length > 0) {
      if (this._cols < t) for (let l = 0; l < this.lines.length; l++) r += +this.lines.get(l).resize(t, i);
      let o2 = 0;
      if (this._rows < e) for (let l = this._rows; l < e; l++) this.lines.length < e + this.ybase && (this._optionsService.rawOptions.windowsMode || this._optionsService.rawOptions.windowsPty.backend !== void 0 || this._optionsService.rawOptions.windowsPty.buildNumber !== void 0 ? this.lines.push(new Ze(t, i)) : this.ybase > 0 && this.lines.length <= this.ybase + this.y + o2 + 1 ? (this.ybase--, o2++, this.ydisp > 0 && this.ydisp--) : this.lines.push(new Ze(t, i)));
      else for (let l = this._rows; l > e; l--) this.lines.length > e + this.ybase && (this.lines.length > this.ybase + this.y + 1 ? this.lines.pop() : (this.ybase++, this.ydisp++));
      if (n < this.lines.maxLength) {
        let l = this.lines.length - n;
        l > 0 && (this.lines.trimStart(l), this.ybase = Math.max(this.ybase - l, 0), this.ydisp = Math.max(this.ydisp - l, 0), this.savedY = Math.max(this.savedY - l, 0)), this.lines.maxLength = n;
      }
      this.x = Math.min(this.x, t - 1), this.y = Math.min(this.y, e - 1), o2 && (this.y += o2), this.savedX = Math.min(this.savedX, t - 1), this.scrollTop = 0;
    }
    if (this.scrollBottom = e - 1, this._isReflowEnabled && (this._reflow(t, e), this._cols > t)) for (let o2 = 0; o2 < this.lines.length; o2++) r += +this.lines.get(o2).resize(t, i);
    this._cols = t, this._rows = e, this._memoryCleanupQueue.clear(), r > 0.1 * this.lines.length && (this._memoryCleanupPosition = 0, this._memoryCleanupQueue.enqueue(() => this._batchedMemoryCleanup()));
  }
  _batchedMemoryCleanup() {
    let t = true;
    this._memoryCleanupPosition >= this.lines.length && (this._memoryCleanupPosition = 0, t = false);
    let e = 0;
    for (; this._memoryCleanupPosition < this.lines.length; ) if (e += this.lines.get(this._memoryCleanupPosition++).cleanupMemory(), e > 100) return true;
    return t;
  }
  get _isReflowEnabled() {
    let t = this._optionsService.rawOptions.windowsPty;
    return t && t.buildNumber ? this._hasScrollback && t.backend === "conpty" && t.buildNumber >= 21376 : this._hasScrollback && !this._optionsService.rawOptions.windowsMode;
  }
  _reflow(t, e) {
    this._cols !== t && (t > this._cols ? this._reflowLarger(t, e) : this._reflowSmaller(t, e));
  }
  _reflowLarger(t, e) {
    let i = this._optionsService.rawOptions.reflowCursorLine, r = sl(this.lines, this._cols, t, this.ybase + this.y, this.getNullCell(X), i);
    if (r.length > 0) {
      let n = ol(this.lines, r);
      ll(this.lines, n.layout), this._reflowLargerAdjustViewport(t, e, n.countRemoved);
    }
  }
  _reflowLargerAdjustViewport(t, e, i) {
    let r = this.getNullCell(X), n = i;
    for (; n-- > 0; ) this.ybase === 0 ? (this.y > 0 && this.y--, this.lines.length < e && this.lines.push(new Ze(t, r))) : (this.ydisp === this.ybase && this.ydisp--, this.ybase--);
    this.savedY = Math.max(this.savedY - i, 0);
  }
  _reflowSmaller(t, e) {
    let i = this._optionsService.rawOptions.reflowCursorLine, r = this.getNullCell(X), n = [], o2 = 0;
    for (let l = this.lines.length - 1; l >= 0; l--) {
      let a = this.lines.get(l);
      if (!a || !a.isWrapped && a.getTrimmedLength() <= t) continue;
      let u = [a];
      for (; a.isWrapped && l > 0; ) a = this.lines.get(--l), u.unshift(a);
      if (!i) {
        let I = this.ybase + this.y;
        if (I >= l && I < l + u.length) continue;
      }
      let h2 = u[u.length - 1].getTrimmedLength(), c = al(u, this._cols, t), d = c.length - u.length, _2;
      this.ybase === 0 && this.y !== this.lines.length - 1 ? _2 = Math.max(0, this.y - this.lines.maxLength + d) : _2 = Math.max(0, this.lines.length - this.lines.maxLength + d);
      let p = [];
      for (let I = 0; I < d; I++) {
        let k = this.getBlankLine(X, true);
        p.push(k);
      }
      p.length > 0 && (n.push({ start: l + u.length + o2, newLines: p }), o2 += p.length), u.push(...p);
      let m = c.length - 1, f = c[m];
      f === 0 && (m--, f = c[m]);
      let A = u.length - d - 1, R = h2;
      for (; A >= 0; ) {
        let I = Math.min(R, f);
        if (u[m] === void 0) break;
        if (u[m].copyCellsFrom(u[A], R - I, f - I, I, true), f -= I, f === 0 && (m--, f = c[m]), R -= I, R === 0) {
          A--;
          let k = Math.max(A, 0);
          R = ri(u, k, this._cols);
        }
      }
      for (let I = 0; I < u.length; I++) c[I] < t && u[I].setCell(c[I], r);
      let O = d - _2;
      for (; O-- > 0; ) this.ybase === 0 ? this.y < e - 1 ? (this.y++, this.lines.pop()) : (this.ybase++, this.ydisp++) : this.ybase < Math.min(this.lines.maxLength, this.lines.length + o2) - e && (this.ybase === this.ydisp && this.ydisp++, this.ybase++);
      this.savedY = Math.min(this.savedY + d, this.ybase + e - 1);
    }
    if (n.length > 0) {
      let l = [], a = [];
      for (let f = 0; f < this.lines.length; f++) a.push(this.lines.get(f));
      let u = this.lines.length, h2 = u - 1, c = 0, d = n[c];
      this.lines.length = Math.min(this.lines.maxLength, this.lines.length + o2);
      let _2 = 0;
      for (let f = Math.min(this.lines.maxLength - 1, u + o2 - 1); f >= 0; f--) if (d && d.start > h2 + _2) {
        for (let A = d.newLines.length - 1; A >= 0; A--) this.lines.set(f--, d.newLines[A]);
        f++, l.push({ index: h2 + 1, amount: d.newLines.length }), _2 += d.newLines.length, d = n[++c];
      } else this.lines.set(f, a[h2--]);
      let p = 0;
      for (let f = l.length - 1; f >= 0; f--) l[f].index += p, this.lines.onInsertEmitter.fire(l[f]), p += l[f].amount;
      let m = Math.max(0, u + o2 - this.lines.maxLength);
      m > 0 && this.lines.onTrimEmitter.fire(m);
    }
  }
  translateBufferLineToString(t, e, i = 0, r) {
    let n = this.lines.get(t);
    return n ? n.translateToString(e, i, r) : "";
  }
  getWrappedRangeForLine(t) {
    let e = t, i = t;
    for (; e > 0 && this.lines.get(e).isWrapped; ) e--;
    for (; i + 1 < this.lines.length && this.lines.get(i + 1).isWrapped; ) i++;
    return { first: e, last: i };
  }
  setupTabStops(t) {
    for (t != null ? this.tabs[t] || (t = this.prevStop(t)) : (this.tabs = {}, t = 0); t < this._cols; t += this._optionsService.rawOptions.tabStopWidth) this.tabs[t] = true;
  }
  prevStop(t) {
    for (t == null && (t = this.x); !this.tabs[--t] && t > 0; ) ;
    return t >= this._cols ? this._cols - 1 : t < 0 ? 0 : t;
  }
  nextStop(t) {
    for (t == null && (t = this.x); !this.tabs[++t] && t < this._cols; ) ;
    return t >= this._cols ? this._cols - 1 : t < 0 ? 0 : t;
  }
  clearMarkers(t) {
    this._isClearing = true;
    for (let e = 0; e < this.markers.length; e++) this.markers[e].line === t && (this.markers[e].dispose(), this.markers.splice(e--, 1));
    this._isClearing = false;
  }
  clearAllMarkers() {
    this._isClearing = true;
    for (let t = 0; t < this.markers.length; t++) this.markers[t].dispose();
    this.markers.length = 0, this._isClearing = false;
  }
  addMarker(t) {
    let e = new cn(t);
    return this.markers.push(e), e.register(this.lines.onTrim((i) => {
      e.line -= i, e.line < 0 && e.dispose();
    })), e.register(this.lines.onInsert((i) => {
      e.line >= i.index && (e.line += i.amount);
    })), e.register(this.lines.onDelete((i) => {
      e.line >= i.index && e.line < i.index + i.amount && e.dispose(), e.line > i.index && (e.line -= i.amount);
    })), e.register(e.onDispose(() => this._removeMarker(e))), e;
  }
  _removeMarker(t) {
    this._isClearing || this.markers.splice(this.markers.indexOf(t), 1);
  }
};
var hn = class extends D {
  constructor(e, i) {
    super();
    this._optionsService = e;
    this._bufferService = i;
    this._onBufferActivate = this._register(new v());
    this.onBufferActivate = this._onBufferActivate.event;
    this.reset(), this._register(this._optionsService.onSpecificOptionChange("scrollback", () => this.resize(this._bufferService.cols, this._bufferService.rows))), this._register(this._optionsService.onSpecificOptionChange("tabStopWidth", () => this.setupTabStops()));
  }
  reset() {
    this._normal = new $i(true, this._optionsService, this._bufferService), this._normal.fillViewportRows(), this._alt = new $i(false, this._optionsService, this._bufferService), this._activeBuffer = this._normal, this._onBufferActivate.fire({ activeBuffer: this._normal, inactiveBuffer: this._alt }), this.setupTabStops();
  }
  get alt() {
    return this._alt;
  }
  get active() {
    return this._activeBuffer;
  }
  get normal() {
    return this._normal;
  }
  activateNormalBuffer() {
    this._activeBuffer !== this._normal && (this._normal.x = this._alt.x, this._normal.y = this._alt.y, this._alt.clearAllMarkers(), this._alt.clear(), this._activeBuffer = this._normal, this._onBufferActivate.fire({ activeBuffer: this._normal, inactiveBuffer: this._alt }));
  }
  activateAltBuffer(e) {
    this._activeBuffer !== this._alt && (this._alt.fillViewportRows(e), this._alt.x = this._normal.x, this._alt.y = this._normal.y, this._activeBuffer = this._alt, this._onBufferActivate.fire({ activeBuffer: this._alt, inactiveBuffer: this._normal }));
  }
  resize(e, i) {
    this._normal.resize(e, i), this._alt.resize(e, i), this.setupTabStops(e);
  }
  setupTabStops(e) {
    this._normal.setupTabStops(e), this._alt.setupTabStops(e);
  }
};
var ks = 2;
var Cs = 1;
var ni = class extends D {
  constructor(e) {
    super();
    this.isUserScrolling = false;
    this._onResize = this._register(new v());
    this.onResize = this._onResize.event;
    this._onScroll = this._register(new v());
    this.onScroll = this._onScroll.event;
    this.cols = Math.max(e.rawOptions.cols || 0, ks), this.rows = Math.max(e.rawOptions.rows || 0, Cs), this.buffers = this._register(new hn(e, this)), this._register(this.buffers.onBufferActivate((i) => {
      this._onScroll.fire(i.activeBuffer.ydisp);
    }));
  }
  get buffer() {
    return this.buffers.active;
  }
  resize(e, i) {
    let r = this.cols !== e, n = this.rows !== i;
    this.cols = e, this.rows = i, this.buffers.resize(e, i), this._onResize.fire({ cols: e, rows: i, colsChanged: r, rowsChanged: n });
  }
  reset() {
    this.buffers.reset(), this.isUserScrolling = false;
  }
  scroll(e, i = false) {
    let r = this.buffer, n;
    n = this._cachedBlankLine, (!n || n.length !== this.cols || n.getFg(0) !== e.fg || n.getBg(0) !== e.bg) && (n = r.getBlankLine(e, i), this._cachedBlankLine = n), n.isWrapped = i;
    let o2 = r.ybase + r.scrollTop, l = r.ybase + r.scrollBottom;
    if (r.scrollTop === 0) {
      let a = r.lines.isFull;
      l === r.lines.length - 1 ? a ? r.lines.recycle().copyFrom(n) : r.lines.push(n.clone()) : r.lines.splice(l + 1, 0, n.clone()), a ? this.isUserScrolling && (r.ydisp = Math.max(r.ydisp - 1, 0)) : (r.ybase++, this.isUserScrolling || r.ydisp++);
    } else {
      let a = l - o2 + 1;
      r.lines.shiftElements(o2 + 1, a - 1, -1), r.lines.set(l, n.clone());
    }
    this.isUserScrolling || (r.ydisp = r.ybase), this._onScroll.fire(r.ydisp);
  }
  scrollLines(e, i) {
    let r = this.buffer;
    if (e < 0) {
      if (r.ydisp === 0) return;
      this.isUserScrolling = true;
    } else e + r.ydisp >= r.ybase && (this.isUserScrolling = false);
    let n = r.ydisp;
    r.ydisp = Math.max(Math.min(r.ydisp + e, r.ybase), 0), n !== r.ydisp && (i || this._onScroll.fire(r.ydisp));
  }
};
ni = M([S(0, H)], ni);
var si = { cols: 80, rows: 24, cursorBlink: false, cursorStyle: "block", cursorWidth: 1, cursorInactiveStyle: "outline", customGlyphs: true, drawBoldTextInBrightColors: true, documentOverride: null, fastScrollModifier: "alt", fastScrollSensitivity: 5, fontFamily: "monospace", fontSize: 15, fontWeight: "normal", fontWeightBold: "bold", ignoreBracketedPasteMode: false, lineHeight: 1, letterSpacing: 0, linkHandler: null, logLevel: "info", logger: null, scrollback: 1e3, scrollOnEraseInDisplay: false, scrollOnUserInput: true, scrollSensitivity: 1, screenReaderMode: false, smoothScrollDuration: 0, macOptionIsMeta: false, macOptionClickForcesSelection: false, minimumContrastRatio: 1, disableStdin: false, allowProposedApi: false, allowTransparency: false, tabStopWidth: 8, theme: {}, reflowCursorLine: false, rescaleOverlappingGlyphs: false, rightClickSelectsWord: Zt, windowOptions: {}, windowsMode: false, windowsPty: {}, wordSeparator: " ()[]{}',\"`", altClickMovesCursor: true, convertEol: false, termName: "xterm", cancelEvents: false, overviewRuler: {} };
var nc = ["normal", "bold", "100", "200", "300", "400", "500", "600", "700", "800", "900"];
var dn = class extends D {
  constructor(e) {
    super();
    this._onOptionChange = this._register(new v());
    this.onOptionChange = this._onOptionChange.event;
    let i = { ...si };
    for (let r in e) if (r in i) try {
      let n = e[r];
      i[r] = this._sanitizeAndValidateOption(r, n);
    } catch (n) {
      console.error(n);
    }
    this.rawOptions = i, this.options = { ...i }, this._setupOptions(), this._register(C(() => {
      this.rawOptions.linkHandler = null, this.rawOptions.documentOverride = null;
    }));
  }
  onSpecificOptionChange(e, i) {
    return this.onOptionChange((r) => {
      r === e && i(this.rawOptions[e]);
    });
  }
  onMultipleOptionChange(e, i) {
    return this.onOptionChange((r) => {
      e.indexOf(r) !== -1 && i();
    });
  }
  _setupOptions() {
    let e = (r) => {
      if (!(r in si)) throw new Error(`No option with key "${r}"`);
      return this.rawOptions[r];
    }, i = (r, n) => {
      if (!(r in si)) throw new Error(`No option with key "${r}"`);
      n = this._sanitizeAndValidateOption(r, n), this.rawOptions[r] !== n && (this.rawOptions[r] = n, this._onOptionChange.fire(r));
    };
    for (let r in this.rawOptions) {
      let n = { get: e.bind(this, r), set: i.bind(this, r) };
      Object.defineProperty(this.options, r, n);
    }
  }
  _sanitizeAndValidateOption(e, i) {
    switch (e) {
      case "cursorStyle":
        if (i || (i = si[e]), !sc(i)) throw new Error(`"${i}" is not a valid value for ${e}`);
        break;
      case "wordSeparator":
        i || (i = si[e]);
        break;
      case "fontWeight":
      case "fontWeightBold":
        if (typeof i == "number" && 1 <= i && i <= 1e3) break;
        i = nc.includes(i) ? i : si[e];
        break;
      case "cursorWidth":
        i = Math.floor(i);
      case "lineHeight":
      case "tabStopWidth":
        if (i < 1) throw new Error(`${e} cannot be less than 1, value: ${i}`);
        break;
      case "minimumContrastRatio":
        i = Math.max(1, Math.min(21, Math.round(i * 10) / 10));
        break;
      case "scrollback":
        if (i = Math.min(i, 4294967295), i < 0) throw new Error(`${e} cannot be less than 0, value: ${i}`);
        break;
      case "fastScrollSensitivity":
      case "scrollSensitivity":
        if (i <= 0) throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);
        break;
      case "rows":
      case "cols":
        if (!i && i !== 0) throw new Error(`${e} must be numeric, value: ${i}`);
        break;
      case "windowsPty":
        i = i ?? {};
        break;
    }
    return i;
  }
};
function sc(s15) {
  return s15 === "block" || s15 === "underline" || s15 === "bar";
}
function oi(s15, t = 5) {
  if (typeof s15 != "object") return s15;
  let e = Array.isArray(s15) ? [] : {};
  for (let i in s15) e[i] = t <= 1 ? s15[i] : s15[i] && oi(s15[i], t - 1);
  return e;
}
var ul = Object.freeze({ insertMode: false });
var hl = Object.freeze({ applicationCursorKeys: false, applicationKeypad: false, bracketedPasteMode: false, cursorBlink: void 0, cursorStyle: void 0, origin: false, reverseWraparound: false, sendFocus: false, synchronizedOutput: false, wraparound: true });
var li = class extends D {
  constructor(e, i, r) {
    super();
    this._bufferService = e;
    this._logService = i;
    this._optionsService = r;
    this.isCursorInitialized = false;
    this.isCursorHidden = false;
    this._onData = this._register(new v());
    this.onData = this._onData.event;
    this._onUserInput = this._register(new v());
    this.onUserInput = this._onUserInput.event;
    this._onBinary = this._register(new v());
    this.onBinary = this._onBinary.event;
    this._onRequestScrollToBottom = this._register(new v());
    this.onRequestScrollToBottom = this._onRequestScrollToBottom.event;
    this.modes = oi(ul), this.decPrivateModes = oi(hl);
  }
  reset() {
    this.modes = oi(ul), this.decPrivateModes = oi(hl);
  }
  triggerDataEvent(e, i = false) {
    if (this._optionsService.rawOptions.disableStdin) return;
    let r = this._bufferService.buffer;
    i && this._optionsService.rawOptions.scrollOnUserInput && r.ybase !== r.ydisp && this._onRequestScrollToBottom.fire(), i && this._onUserInput.fire(), this._logService.debug(`sending data "${e}"`), this._logService.trace("sending data (codes)", () => e.split("").map((n) => n.charCodeAt(0))), this._onData.fire(e);
  }
  triggerBinaryEvent(e) {
    this._optionsService.rawOptions.disableStdin || (this._logService.debug(`sending binary "${e}"`), this._logService.trace("sending binary (codes)", () => e.split("").map((i) => i.charCodeAt(0))), this._onBinary.fire(e));
  }
};
li = M([S(0, F), S(1, nr), S(2, H)], li);
var dl = { NONE: { events: 0, restrict: () => false }, X10: { events: 1, restrict: (s15) => s15.button === 4 || s15.action !== 1 ? false : (s15.ctrl = false, s15.alt = false, s15.shift = false, true) }, VT200: { events: 19, restrict: (s15) => s15.action !== 32 }, DRAG: { events: 23, restrict: (s15) => !(s15.action === 32 && s15.button === 3) }, ANY: { events: 31, restrict: (s15) => true } };
function Ms(s15, t) {
  let e = (s15.ctrl ? 16 : 0) | (s15.shift ? 4 : 0) | (s15.alt ? 8 : 0);
  return s15.button === 4 ? (e |= 64, e |= s15.action) : (e |= s15.button & 3, s15.button & 4 && (e |= 64), s15.button & 8 && (e |= 128), s15.action === 32 ? e |= 32 : s15.action === 0 && !t && (e |= 3)), e;
}
var Ps = String.fromCharCode;
var fl = { DEFAULT: (s15) => {
  let t = [Ms(s15, false) + 32, s15.col + 32, s15.row + 32];
  return t[0] > 255 || t[1] > 255 || t[2] > 255 ? "" : `\x1B[M${Ps(t[0])}${Ps(t[1])}${Ps(t[2])}`;
}, SGR: (s15) => {
  let t = s15.action === 0 && s15.button !== 4 ? "m" : "M";
  return `\x1B[<${Ms(s15, true)};${s15.col};${s15.row}${t}`;
}, SGR_PIXELS: (s15) => {
  let t = s15.action === 0 && s15.button !== 4 ? "m" : "M";
  return `\x1B[<${Ms(s15, true)};${s15.x};${s15.y}${t}`;
} };
var ai = class extends D {
  constructor(e, i, r) {
    super();
    this._bufferService = e;
    this._coreService = i;
    this._optionsService = r;
    this._protocols = {};
    this._encodings = {};
    this._activeProtocol = "";
    this._activeEncoding = "";
    this._lastEvent = null;
    this._wheelPartialScroll = 0;
    this._onProtocolChange = this._register(new v());
    this.onProtocolChange = this._onProtocolChange.event;
    for (let n of Object.keys(dl)) this.addProtocol(n, dl[n]);
    for (let n of Object.keys(fl)) this.addEncoding(n, fl[n]);
    this.reset();
  }
  addProtocol(e, i) {
    this._protocols[e] = i;
  }
  addEncoding(e, i) {
    this._encodings[e] = i;
  }
  get activeProtocol() {
    return this._activeProtocol;
  }
  get areMouseEventsActive() {
    return this._protocols[this._activeProtocol].events !== 0;
  }
  set activeProtocol(e) {
    if (!this._protocols[e]) throw new Error(`unknown protocol "${e}"`);
    this._activeProtocol = e, this._onProtocolChange.fire(this._protocols[e].events);
  }
  get activeEncoding() {
    return this._activeEncoding;
  }
  set activeEncoding(e) {
    if (!this._encodings[e]) throw new Error(`unknown encoding "${e}"`);
    this._activeEncoding = e;
  }
  reset() {
    this.activeProtocol = "NONE", this.activeEncoding = "DEFAULT", this._lastEvent = null, this._wheelPartialScroll = 0;
  }
  consumeWheelEvent(e, i, r) {
    if (e.deltaY === 0 || e.shiftKey || i === void 0 || r === void 0) return 0;
    let n = i / r, o2 = this._applyScrollModifier(e.deltaY, e);
    return e.deltaMode === WheelEvent.DOM_DELTA_PIXEL ? (o2 /= n + 0, Math.abs(e.deltaY) < 50 && (o2 *= 0.3), this._wheelPartialScroll += o2, o2 = Math.floor(Math.abs(this._wheelPartialScroll)) * (this._wheelPartialScroll > 0 ? 1 : -1), this._wheelPartialScroll %= 1) : e.deltaMode === WheelEvent.DOM_DELTA_PAGE && (o2 *= this._bufferService.rows), o2;
  }
  _applyScrollModifier(e, i) {
    return i.altKey || i.ctrlKey || i.shiftKey ? e * this._optionsService.rawOptions.fastScrollSensitivity * this._optionsService.rawOptions.scrollSensitivity : e * this._optionsService.rawOptions.scrollSensitivity;
  }
  triggerMouseEvent(e) {
    if (e.col < 0 || e.col >= this._bufferService.cols || e.row < 0 || e.row >= this._bufferService.rows || e.button === 4 && e.action === 32 || e.button === 3 && e.action !== 32 || e.button !== 4 && (e.action === 2 || e.action === 3) || (e.col++, e.row++, e.action === 32 && this._lastEvent && this._equalEvents(this._lastEvent, e, this._activeEncoding === "SGR_PIXELS")) || !this._protocols[this._activeProtocol].restrict(e)) return false;
    let i = this._encodings[this._activeEncoding](e);
    return i && (this._activeEncoding === "DEFAULT" ? this._coreService.triggerBinaryEvent(i) : this._coreService.triggerDataEvent(i, true)), this._lastEvent = e, true;
  }
  explainEvents(e) {
    return { down: !!(e & 1), up: !!(e & 2), drag: !!(e & 4), move: !!(e & 8), wheel: !!(e & 16) };
  }
  _equalEvents(e, i, r) {
    if (r) {
      if (e.x !== i.x || e.y !== i.y) return false;
    } else if (e.col !== i.col || e.row !== i.row) return false;
    return !(e.button !== i.button || e.action !== i.action || e.ctrl !== i.ctrl || e.alt !== i.alt || e.shift !== i.shift);
  }
};
ai = M([S(0, F), S(1, ge), S(2, H)], ai);
var Os = [[768, 879], [1155, 1158], [1160, 1161], [1425, 1469], [1471, 1471], [1473, 1474], [1476, 1477], [1479, 1479], [1536, 1539], [1552, 1557], [1611, 1630], [1648, 1648], [1750, 1764], [1767, 1768], [1770, 1773], [1807, 1807], [1809, 1809], [1840, 1866], [1958, 1968], [2027, 2035], [2305, 2306], [2364, 2364], [2369, 2376], [2381, 2381], [2385, 2388], [2402, 2403], [2433, 2433], [2492, 2492], [2497, 2500], [2509, 2509], [2530, 2531], [2561, 2562], [2620, 2620], [2625, 2626], [2631, 2632], [2635, 2637], [2672, 2673], [2689, 2690], [2748, 2748], [2753, 2757], [2759, 2760], [2765, 2765], [2786, 2787], [2817, 2817], [2876, 2876], [2879, 2879], [2881, 2883], [2893, 2893], [2902, 2902], [2946, 2946], [3008, 3008], [3021, 3021], [3134, 3136], [3142, 3144], [3146, 3149], [3157, 3158], [3260, 3260], [3263, 3263], [3270, 3270], [3276, 3277], [3298, 3299], [3393, 3395], [3405, 3405], [3530, 3530], [3538, 3540], [3542, 3542], [3633, 3633], [3636, 3642], [3655, 3662], [3761, 3761], [3764, 3769], [3771, 3772], [3784, 3789], [3864, 3865], [3893, 3893], [3895, 3895], [3897, 3897], [3953, 3966], [3968, 3972], [3974, 3975], [3984, 3991], [3993, 4028], [4038, 4038], [4141, 4144], [4146, 4146], [4150, 4151], [4153, 4153], [4184, 4185], [4448, 4607], [4959, 4959], [5906, 5908], [5938, 5940], [5970, 5971], [6002, 6003], [6068, 6069], [6071, 6077], [6086, 6086], [6089, 6099], [6109, 6109], [6155, 6157], [6313, 6313], [6432, 6434], [6439, 6440], [6450, 6450], [6457, 6459], [6679, 6680], [6912, 6915], [6964, 6964], [6966, 6970], [6972, 6972], [6978, 6978], [7019, 7027], [7616, 7626], [7678, 7679], [8203, 8207], [8234, 8238], [8288, 8291], [8298, 8303], [8400, 8431], [12330, 12335], [12441, 12442], [43014, 43014], [43019, 43019], [43045, 43046], [64286, 64286], [65024, 65039], [65056, 65059], [65279, 65279], [65529, 65531]];
var ac = [[68097, 68099], [68101, 68102], [68108, 68111], [68152, 68154], [68159, 68159], [119143, 119145], [119155, 119170], [119173, 119179], [119210, 119213], [119362, 119364], [917505, 917505], [917536, 917631], [917760, 917999]];
var se;
function cc(s15, t) {
  let e = 0, i = t.length - 1, r;
  if (s15 < t[0][0] || s15 > t[i][1]) return false;
  for (; i >= e; ) if (r = e + i >> 1, s15 > t[r][1]) e = r + 1;
  else if (s15 < t[r][0]) i = r - 1;
  else return true;
  return false;
}
var fn = class {
  constructor() {
    this.version = "6";
    if (!se) {
      se = new Uint8Array(65536), se.fill(1), se[0] = 0, se.fill(0, 1, 32), se.fill(0, 127, 160), se.fill(2, 4352, 4448), se[9001] = 2, se[9002] = 2, se.fill(2, 11904, 42192), se[12351] = 1, se.fill(2, 44032, 55204), se.fill(2, 63744, 64256), se.fill(2, 65040, 65050), se.fill(2, 65072, 65136), se.fill(2, 65280, 65377), se.fill(2, 65504, 65511);
      for (let t = 0; t < Os.length; ++t) se.fill(0, Os[t][0], Os[t][1] + 1);
    }
  }
  wcwidth(t) {
    return t < 32 ? 0 : t < 127 ? 1 : t < 65536 ? se[t] : cc(t, ac) ? 0 : t >= 131072 && t <= 196605 || t >= 196608 && t <= 262141 ? 2 : 1;
  }
  charProperties(t, e) {
    let i = this.wcwidth(t), r = i === 0 && e !== 0;
    if (r) {
      let n = Ae.extractWidth(e);
      n === 0 ? r = false : n > i && (i = n);
    }
    return Ae.createPropertyValue(0, i, r);
  }
};
var Ae = class s13 {
  constructor() {
    this._providers = /* @__PURE__ */ Object.create(null);
    this._active = "";
    this._onChange = new v();
    this.onChange = this._onChange.event;
    let t = new fn();
    this.register(t), this._active = t.version, this._activeProvider = t;
  }
  static extractShouldJoin(t) {
    return (t & 1) !== 0;
  }
  static extractWidth(t) {
    return t >> 1 & 3;
  }
  static extractCharKind(t) {
    return t >> 3;
  }
  static createPropertyValue(t, e, i = false) {
    return (t & 16777215) << 3 | (e & 3) << 1 | (i ? 1 : 0);
  }
  dispose() {
    this._onChange.dispose();
  }
  get versions() {
    return Object.keys(this._providers);
  }
  get activeVersion() {
    return this._active;
  }
  set activeVersion(t) {
    if (!this._providers[t]) throw new Error(`unknown Unicode version "${t}"`);
    this._active = t, this._activeProvider = this._providers[t], this._onChange.fire(t);
  }
  register(t) {
    this._providers[t.version] = t;
  }
  wcwidth(t) {
    return this._activeProvider.wcwidth(t);
  }
  getStringCellWidth(t) {
    let e = 0, i = 0, r = t.length;
    for (let n = 0; n < r; ++n) {
      let o2 = t.charCodeAt(n);
      if (55296 <= o2 && o2 <= 56319) {
        if (++n >= r) return e + this.wcwidth(o2);
        let u = t.charCodeAt(n);
        56320 <= u && u <= 57343 ? o2 = (o2 - 55296) * 1024 + u - 56320 + 65536 : e += this.wcwidth(u);
      }
      let l = this.charProperties(o2, i), a = s13.extractWidth(l);
      s13.extractShouldJoin(l) && (a -= s13.extractWidth(i)), e += a, i = l;
    }
    return e;
  }
  charProperties(t, e) {
    return this._activeProvider.charProperties(t, e);
  }
};
var pn = class {
  constructor() {
    this.glevel = 0;
    this._charsets = [];
  }
  reset() {
    this.charset = void 0, this._charsets = [], this.glevel = 0;
  }
  setgLevel(t) {
    this.glevel = t, this.charset = this._charsets[t];
  }
  setgCharset(t, e) {
    this._charsets[t] = e, this.glevel === t && (this.charset = e);
  }
};
function Bs(s15) {
  let e = s15.buffer.lines.get(s15.buffer.ybase + s15.buffer.y - 1)?.get(s15.cols - 1), i = s15.buffer.lines.get(s15.buffer.ybase + s15.buffer.y);
  i && e && (i.isWrapped = e[3] !== 0 && e[3] !== 32);
}
var Vi = 2147483647;
var uc = 256;
var ci = class s14 {
  constructor(t = 32, e = 32) {
    this.maxLength = t;
    this.maxSubParamsLength = e;
    if (e > uc) throw new Error("maxSubParamsLength must not be greater than 256");
    this.params = new Int32Array(t), this.length = 0, this._subParams = new Int32Array(e), this._subParamsLength = 0, this._subParamsIdx = new Uint16Array(t), this._rejectDigits = false, this._rejectSubDigits = false, this._digitIsSub = false;
  }
  static fromArray(t) {
    let e = new s14();
    if (!t.length) return e;
    for (let i = Array.isArray(t[0]) ? 1 : 0; i < t.length; ++i) {
      let r = t[i];
      if (Array.isArray(r)) for (let n = 0; n < r.length; ++n) e.addSubParam(r[n]);
      else e.addParam(r);
    }
    return e;
  }
  clone() {
    let t = new s14(this.maxLength, this.maxSubParamsLength);
    return t.params.set(this.params), t.length = this.length, t._subParams.set(this._subParams), t._subParamsLength = this._subParamsLength, t._subParamsIdx.set(this._subParamsIdx), t._rejectDigits = this._rejectDigits, t._rejectSubDigits = this._rejectSubDigits, t._digitIsSub = this._digitIsSub, t;
  }
  toArray() {
    let t = [];
    for (let e = 0; e < this.length; ++e) {
      t.push(this.params[e]);
      let i = this._subParamsIdx[e] >> 8, r = this._subParamsIdx[e] & 255;
      r - i > 0 && t.push(Array.prototype.slice.call(this._subParams, i, r));
    }
    return t;
  }
  reset() {
    this.length = 0, this._subParamsLength = 0, this._rejectDigits = false, this._rejectSubDigits = false, this._digitIsSub = false;
  }
  addParam(t) {
    if (this._digitIsSub = false, this.length >= this.maxLength) {
      this._rejectDigits = true;
      return;
    }
    if (t < -1) throw new Error("values lesser than -1 are not allowed");
    this._subParamsIdx[this.length] = this._subParamsLength << 8 | this._subParamsLength, this.params[this.length++] = t > Vi ? Vi : t;
  }
  addSubParam(t) {
    if (this._digitIsSub = true, !!this.length) {
      if (this._rejectDigits || this._subParamsLength >= this.maxSubParamsLength) {
        this._rejectSubDigits = true;
        return;
      }
      if (t < -1) throw new Error("values lesser than -1 are not allowed");
      this._subParams[this._subParamsLength++] = t > Vi ? Vi : t, this._subParamsIdx[this.length - 1]++;
    }
  }
  hasSubParams(t) {
    return (this._subParamsIdx[t] & 255) - (this._subParamsIdx[t] >> 8) > 0;
  }
  getSubParams(t) {
    let e = this._subParamsIdx[t] >> 8, i = this._subParamsIdx[t] & 255;
    return i - e > 0 ? this._subParams.subarray(e, i) : null;
  }
  getSubParamsAll() {
    let t = {};
    for (let e = 0; e < this.length; ++e) {
      let i = this._subParamsIdx[e] >> 8, r = this._subParamsIdx[e] & 255;
      r - i > 0 && (t[e] = this._subParams.slice(i, r));
    }
    return t;
  }
  addDigit(t) {
    let e;
    if (this._rejectDigits || !(e = this._digitIsSub ? this._subParamsLength : this.length) || this._digitIsSub && this._rejectSubDigits) return;
    let i = this._digitIsSub ? this._subParams : this.params, r = i[e - 1];
    i[e - 1] = ~r ? Math.min(r * 10 + t, Vi) : t;
  }
};
var qi = [];
var mn = class {
  constructor() {
    this._state = 0;
    this._active = qi;
    this._id = -1;
    this._handlers = /* @__PURE__ */ Object.create(null);
    this._handlerFb = () => {
    };
    this._stack = { paused: false, loopPosition: 0, fallThrough: false };
  }
  registerHandler(t, e) {
    this._handlers[t] === void 0 && (this._handlers[t] = []);
    let i = this._handlers[t];
    return i.push(e), { dispose: () => {
      let r = i.indexOf(e);
      r !== -1 && i.splice(r, 1);
    } };
  }
  clearHandler(t) {
    this._handlers[t] && delete this._handlers[t];
  }
  setHandlerFallback(t) {
    this._handlerFb = t;
  }
  dispose() {
    this._handlers = /* @__PURE__ */ Object.create(null), this._handlerFb = () => {
    }, this._active = qi;
  }
  reset() {
    if (this._state === 2) for (let t = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; t >= 0; --t) this._active[t].end(false);
    this._stack.paused = false, this._active = qi, this._id = -1, this._state = 0;
  }
  _start() {
    if (this._active = this._handlers[this._id] || qi, !this._active.length) this._handlerFb(this._id, "START");
    else for (let t = this._active.length - 1; t >= 0; t--) this._active[t].start();
  }
  _put(t, e, i) {
    if (!this._active.length) this._handlerFb(this._id, "PUT", It(t, e, i));
    else for (let r = this._active.length - 1; r >= 0; r--) this._active[r].put(t, e, i);
  }
  start() {
    this.reset(), this._state = 1;
  }
  put(t, e, i) {
    if (this._state !== 3) {
      if (this._state === 1) for (; e < i; ) {
        let r = t[e++];
        if (r === 59) {
          this._state = 2, this._start();
          break;
        }
        if (r < 48 || 57 < r) {
          this._state = 3;
          return;
        }
        this._id === -1 && (this._id = 0), this._id = this._id * 10 + r - 48;
      }
      this._state === 2 && i - e > 0 && this._put(t, e, i);
    }
  }
  end(t, e = true) {
    if (this._state !== 0) {
      if (this._state !== 3) if (this._state === 1 && this._start(), !this._active.length) this._handlerFb(this._id, "END", t);
      else {
        let i = false, r = this._active.length - 1, n = false;
        if (this._stack.paused && (r = this._stack.loopPosition - 1, i = e, n = this._stack.fallThrough, this._stack.paused = false), !n && i === false) {
          for (; r >= 0 && (i = this._active[r].end(t), i !== true); r--) if (i instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = r, this._stack.fallThrough = false, i;
          r--;
        }
        for (; r >= 0; r--) if (i = this._active[r].end(false), i instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = r, this._stack.fallThrough = true, i;
      }
      this._active = qi, this._id = -1, this._state = 0;
    }
  }
};
var pe = class {
  constructor(t) {
    this._handler = t;
    this._data = "";
    this._hitLimit = false;
  }
  start() {
    this._data = "", this._hitLimit = false;
  }
  put(t, e, i) {
    this._hitLimit || (this._data += It(t, e, i), this._data.length > 1e7 && (this._data = "", this._hitLimit = true));
  }
  end(t) {
    let e = false;
    if (this._hitLimit) e = false;
    else if (t && (e = this._handler(this._data), e instanceof Promise)) return e.then((i) => (this._data = "", this._hitLimit = false, i));
    return this._data = "", this._hitLimit = false, e;
  }
};
var Yi = [];
var _n = class {
  constructor() {
    this._handlers = /* @__PURE__ */ Object.create(null);
    this._active = Yi;
    this._ident = 0;
    this._handlerFb = () => {
    };
    this._stack = { paused: false, loopPosition: 0, fallThrough: false };
  }
  dispose() {
    this._handlers = /* @__PURE__ */ Object.create(null), this._handlerFb = () => {
    }, this._active = Yi;
  }
  registerHandler(t, e) {
    this._handlers[t] === void 0 && (this._handlers[t] = []);
    let i = this._handlers[t];
    return i.push(e), { dispose: () => {
      let r = i.indexOf(e);
      r !== -1 && i.splice(r, 1);
    } };
  }
  clearHandler(t) {
    this._handlers[t] && delete this._handlers[t];
  }
  setHandlerFallback(t) {
    this._handlerFb = t;
  }
  reset() {
    if (this._active.length) for (let t = this._stack.paused ? this._stack.loopPosition - 1 : this._active.length - 1; t >= 0; --t) this._active[t].unhook(false);
    this._stack.paused = false, this._active = Yi, this._ident = 0;
  }
  hook(t, e) {
    if (this.reset(), this._ident = t, this._active = this._handlers[t] || Yi, !this._active.length) this._handlerFb(this._ident, "HOOK", e);
    else for (let i = this._active.length - 1; i >= 0; i--) this._active[i].hook(e);
  }
  put(t, e, i) {
    if (!this._active.length) this._handlerFb(this._ident, "PUT", It(t, e, i));
    else for (let r = this._active.length - 1; r >= 0; r--) this._active[r].put(t, e, i);
  }
  unhook(t, e = true) {
    if (!this._active.length) this._handlerFb(this._ident, "UNHOOK", t);
    else {
      let i = false, r = this._active.length - 1, n = false;
      if (this._stack.paused && (r = this._stack.loopPosition - 1, i = e, n = this._stack.fallThrough, this._stack.paused = false), !n && i === false) {
        for (; r >= 0 && (i = this._active[r].unhook(t), i !== true); r--) if (i instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = r, this._stack.fallThrough = false, i;
        r--;
      }
      for (; r >= 0; r--) if (i = this._active[r].unhook(false), i instanceof Promise) return this._stack.paused = true, this._stack.loopPosition = r, this._stack.fallThrough = true, i;
    }
    this._active = Yi, this._ident = 0;
  }
};
var ji = new ci();
ji.addParam(0);
var Xi = class {
  constructor(t) {
    this._handler = t;
    this._data = "";
    this._params = ji;
    this._hitLimit = false;
  }
  hook(t) {
    this._params = t.length > 1 || t.params[0] ? t.clone() : ji, this._data = "", this._hitLimit = false;
  }
  put(t, e, i) {
    this._hitLimit || (this._data += It(t, e, i), this._data.length > 1e7 && (this._data = "", this._hitLimit = true));
  }
  unhook(t) {
    let e = false;
    if (this._hitLimit) e = false;
    else if (t && (e = this._handler(this._data, this._params), e instanceof Promise)) return e.then((i) => (this._params = ji, this._data = "", this._hitLimit = false, i));
    return this._params = ji, this._data = "", this._hitLimit = false, e;
  }
};
var Fs = class {
  constructor(t) {
    this.table = new Uint8Array(t);
  }
  setDefault(t, e) {
    this.table.fill(t << 4 | e);
  }
  add(t, e, i, r) {
    this.table[e << 8 | t] = i << 4 | r;
  }
  addMany(t, e, i, r) {
    for (let n = 0; n < t.length; n++) this.table[e << 8 | t[n]] = i << 4 | r;
  }
};
var ke = 160;
var hc = (function() {
  let s15 = new Fs(4095), e = Array.apply(null, Array(256)).map((a, u) => u), i = (a, u) => e.slice(a, u), r = i(32, 127), n = i(0, 24);
  n.push(25), n.push.apply(n, i(28, 32));
  let o2 = i(0, 14), l;
  s15.setDefault(1, 0), s15.addMany(r, 0, 2, 0);
  for (l in o2) s15.addMany([24, 26, 153, 154], l, 3, 0), s15.addMany(i(128, 144), l, 3, 0), s15.addMany(i(144, 152), l, 3, 0), s15.add(156, l, 0, 0), s15.add(27, l, 11, 1), s15.add(157, l, 4, 8), s15.addMany([152, 158, 159], l, 0, 7), s15.add(155, l, 11, 3), s15.add(144, l, 11, 9);
  return s15.addMany(n, 0, 3, 0), s15.addMany(n, 1, 3, 1), s15.add(127, 1, 0, 1), s15.addMany(n, 8, 0, 8), s15.addMany(n, 3, 3, 3), s15.add(127, 3, 0, 3), s15.addMany(n, 4, 3, 4), s15.add(127, 4, 0, 4), s15.addMany(n, 6, 3, 6), s15.addMany(n, 5, 3, 5), s15.add(127, 5, 0, 5), s15.addMany(n, 2, 3, 2), s15.add(127, 2, 0, 2), s15.add(93, 1, 4, 8), s15.addMany(r, 8, 5, 8), s15.add(127, 8, 5, 8), s15.addMany([156, 27, 24, 26, 7], 8, 6, 0), s15.addMany(i(28, 32), 8, 0, 8), s15.addMany([88, 94, 95], 1, 0, 7), s15.addMany(r, 7, 0, 7), s15.addMany(n, 7, 0, 7), s15.add(156, 7, 0, 0), s15.add(127, 7, 0, 7), s15.add(91, 1, 11, 3), s15.addMany(i(64, 127), 3, 7, 0), s15.addMany(i(48, 60), 3, 8, 4), s15.addMany([60, 61, 62, 63], 3, 9, 4), s15.addMany(i(48, 60), 4, 8, 4), s15.addMany(i(64, 127), 4, 7, 0), s15.addMany([60, 61, 62, 63], 4, 0, 6), s15.addMany(i(32, 64), 6, 0, 6), s15.add(127, 6, 0, 6), s15.addMany(i(64, 127), 6, 0, 0), s15.addMany(i(32, 48), 3, 9, 5), s15.addMany(i(32, 48), 5, 9, 5), s15.addMany(i(48, 64), 5, 0, 6), s15.addMany(i(64, 127), 5, 7, 0), s15.addMany(i(32, 48), 4, 9, 5), s15.addMany(i(32, 48), 1, 9, 2), s15.addMany(i(32, 48), 2, 9, 2), s15.addMany(i(48, 127), 2, 10, 0), s15.addMany(i(48, 80), 1, 10, 0), s15.addMany(i(81, 88), 1, 10, 0), s15.addMany([89, 90, 92], 1, 10, 0), s15.addMany(i(96, 127), 1, 10, 0), s15.add(80, 1, 11, 9), s15.addMany(n, 9, 0, 9), s15.add(127, 9, 0, 9), s15.addMany(i(28, 32), 9, 0, 9), s15.addMany(i(32, 48), 9, 9, 12), s15.addMany(i(48, 60), 9, 8, 10), s15.addMany([60, 61, 62, 63], 9, 9, 10), s15.addMany(n, 11, 0, 11), s15.addMany(i(32, 128), 11, 0, 11), s15.addMany(i(28, 32), 11, 0, 11), s15.addMany(n, 10, 0, 10), s15.add(127, 10, 0, 10), s15.addMany(i(28, 32), 10, 0, 10), s15.addMany(i(48, 60), 10, 8, 10), s15.addMany([60, 61, 62, 63], 10, 0, 11), s15.addMany(i(32, 48), 10, 9, 12), s15.addMany(n, 12, 0, 12), s15.add(127, 12, 0, 12), s15.addMany(i(28, 32), 12, 0, 12), s15.addMany(i(32, 48), 12, 9, 12), s15.addMany(i(48, 64), 12, 0, 11), s15.addMany(i(64, 127), 12, 12, 13), s15.addMany(i(64, 127), 10, 12, 13), s15.addMany(i(64, 127), 9, 12, 13), s15.addMany(n, 13, 13, 13), s15.addMany(r, 13, 13, 13), s15.add(127, 13, 0, 13), s15.addMany([27, 156, 24, 26], 13, 14, 0), s15.add(ke, 0, 2, 0), s15.add(ke, 8, 5, 8), s15.add(ke, 6, 0, 6), s15.add(ke, 11, 0, 11), s15.add(ke, 13, 13, 13), s15;
})();
var bn = class extends D {
  constructor(e = hc) {
    super();
    this._transitions = e;
    this._parseStack = { state: 0, handlers: [], handlerPos: 0, transition: 0, chunkPos: 0 };
    this.initialState = 0, this.currentState = this.initialState, this._params = new ci(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, this._printHandlerFb = (i, r, n) => {
    }, this._executeHandlerFb = (i) => {
    }, this._csiHandlerFb = (i, r) => {
    }, this._escHandlerFb = (i) => {
    }, this._errorHandlerFb = (i) => i, this._printHandler = this._printHandlerFb, this._executeHandlers = /* @__PURE__ */ Object.create(null), this._csiHandlers = /* @__PURE__ */ Object.create(null), this._escHandlers = /* @__PURE__ */ Object.create(null), this._register(C(() => {
      this._csiHandlers = /* @__PURE__ */ Object.create(null), this._executeHandlers = /* @__PURE__ */ Object.create(null), this._escHandlers = /* @__PURE__ */ Object.create(null);
    })), this._oscParser = this._register(new mn()), this._dcsParser = this._register(new _n()), this._errorHandler = this._errorHandlerFb, this.registerEscHandler({ final: "\\" }, () => true);
  }
  _identifier(e, i = [64, 126]) {
    let r = 0;
    if (e.prefix) {
      if (e.prefix.length > 1) throw new Error("only one byte as prefix supported");
      if (r = e.prefix.charCodeAt(0), r && 60 > r || r > 63) throw new Error("prefix must be in range 0x3c .. 0x3f");
    }
    if (e.intermediates) {
      if (e.intermediates.length > 2) throw new Error("only two bytes as intermediates are supported");
      for (let o2 = 0; o2 < e.intermediates.length; ++o2) {
        let l = e.intermediates.charCodeAt(o2);
        if (32 > l || l > 47) throw new Error("intermediate must be in range 0x20 .. 0x2f");
        r <<= 8, r |= l;
      }
    }
    if (e.final.length !== 1) throw new Error("final must be a single byte");
    let n = e.final.charCodeAt(0);
    if (i[0] > n || n > i[1]) throw new Error(`final must be in range ${i[0]} .. ${i[1]}`);
    return r <<= 8, r |= n, r;
  }
  identToString(e) {
    let i = [];
    for (; e; ) i.push(String.fromCharCode(e & 255)), e >>= 8;
    return i.reverse().join("");
  }
  setPrintHandler(e) {
    this._printHandler = e;
  }
  clearPrintHandler() {
    this._printHandler = this._printHandlerFb;
  }
  registerEscHandler(e, i) {
    let r = this._identifier(e, [48, 126]);
    this._escHandlers[r] === void 0 && (this._escHandlers[r] = []);
    let n = this._escHandlers[r];
    return n.push(i), { dispose: () => {
      let o2 = n.indexOf(i);
      o2 !== -1 && n.splice(o2, 1);
    } };
  }
  clearEscHandler(e) {
    this._escHandlers[this._identifier(e, [48, 126])] && delete this._escHandlers[this._identifier(e, [48, 126])];
  }
  setEscHandlerFallback(e) {
    this._escHandlerFb = e;
  }
  setExecuteHandler(e, i) {
    this._executeHandlers[e.charCodeAt(0)] = i;
  }
  clearExecuteHandler(e) {
    this._executeHandlers[e.charCodeAt(0)] && delete this._executeHandlers[e.charCodeAt(0)];
  }
  setExecuteHandlerFallback(e) {
    this._executeHandlerFb = e;
  }
  registerCsiHandler(e, i) {
    let r = this._identifier(e);
    this._csiHandlers[r] === void 0 && (this._csiHandlers[r] = []);
    let n = this._csiHandlers[r];
    return n.push(i), { dispose: () => {
      let o2 = n.indexOf(i);
      o2 !== -1 && n.splice(o2, 1);
    } };
  }
  clearCsiHandler(e) {
    this._csiHandlers[this._identifier(e)] && delete this._csiHandlers[this._identifier(e)];
  }
  setCsiHandlerFallback(e) {
    this._csiHandlerFb = e;
  }
  registerDcsHandler(e, i) {
    return this._dcsParser.registerHandler(this._identifier(e), i);
  }
  clearDcsHandler(e) {
    this._dcsParser.clearHandler(this._identifier(e));
  }
  setDcsHandlerFallback(e) {
    this._dcsParser.setHandlerFallback(e);
  }
  registerOscHandler(e, i) {
    return this._oscParser.registerHandler(e, i);
  }
  clearOscHandler(e) {
    this._oscParser.clearHandler(e);
  }
  setOscHandlerFallback(e) {
    this._oscParser.setHandlerFallback(e);
  }
  setErrorHandler(e) {
    this._errorHandler = e;
  }
  clearErrorHandler() {
    this._errorHandler = this._errorHandlerFb;
  }
  reset() {
    this.currentState = this.initialState, this._oscParser.reset(), this._dcsParser.reset(), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0, this._parseStack.state !== 0 && (this._parseStack.state = 2, this._parseStack.handlers = []);
  }
  _preserveStack(e, i, r, n, o2) {
    this._parseStack.state = e, this._parseStack.handlers = i, this._parseStack.handlerPos = r, this._parseStack.transition = n, this._parseStack.chunkPos = o2;
  }
  parse(e, i, r) {
    let n = 0, o2 = 0, l = 0, a;
    if (this._parseStack.state) if (this._parseStack.state === 2) this._parseStack.state = 0, l = this._parseStack.chunkPos + 1;
    else {
      if (r === void 0 || this._parseStack.state === 1) throw this._parseStack.state = 1, new Error("improper continuation due to previous async handler, giving up parsing");
      let u = this._parseStack.handlers, h2 = this._parseStack.handlerPos - 1;
      switch (this._parseStack.state) {
        case 3:
          if (r === false && h2 > -1) {
            for (; h2 >= 0 && (a = u[h2](this._params), a !== true); h2--) if (a instanceof Promise) return this._parseStack.handlerPos = h2, a;
          }
          this._parseStack.handlers = [];
          break;
        case 4:
          if (r === false && h2 > -1) {
            for (; h2 >= 0 && (a = u[h2](), a !== true); h2--) if (a instanceof Promise) return this._parseStack.handlerPos = h2, a;
          }
          this._parseStack.handlers = [];
          break;
        case 6:
          if (n = e[this._parseStack.chunkPos], a = this._dcsParser.unhook(n !== 24 && n !== 26, r), a) return a;
          n === 27 && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0;
          break;
        case 5:
          if (n = e[this._parseStack.chunkPos], a = this._oscParser.end(n !== 24 && n !== 26, r), a) return a;
          n === 27 && (this._parseStack.transition |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0;
          break;
      }
      this._parseStack.state = 0, l = this._parseStack.chunkPos + 1, this.precedingJoinState = 0, this.currentState = this._parseStack.transition & 15;
    }
    for (let u = l; u < i; ++u) {
      switch (n = e[u], o2 = this._transitions.table[this.currentState << 8 | (n < 160 ? n : ke)], o2 >> 4) {
        case 2:
          for (let m = u + 1; ; ++m) {
            if (m >= i || (n = e[m]) < 32 || n > 126 && n < ke) {
              this._printHandler(e, u, m), u = m - 1;
              break;
            }
            if (++m >= i || (n = e[m]) < 32 || n > 126 && n < ke) {
              this._printHandler(e, u, m), u = m - 1;
              break;
            }
            if (++m >= i || (n = e[m]) < 32 || n > 126 && n < ke) {
              this._printHandler(e, u, m), u = m - 1;
              break;
            }
            if (++m >= i || (n = e[m]) < 32 || n > 126 && n < ke) {
              this._printHandler(e, u, m), u = m - 1;
              break;
            }
          }
          break;
        case 3:
          this._executeHandlers[n] ? this._executeHandlers[n]() : this._executeHandlerFb(n), this.precedingJoinState = 0;
          break;
        case 0:
          break;
        case 1:
          if (this._errorHandler({ position: u, code: n, currentState: this.currentState, collect: this._collect, params: this._params, abort: false }).abort) return;
          break;
        case 7:
          let c = this._csiHandlers[this._collect << 8 | n], d = c ? c.length - 1 : -1;
          for (; d >= 0 && (a = c[d](this._params), a !== true); d--) if (a instanceof Promise) return this._preserveStack(3, c, d, o2, u), a;
          d < 0 && this._csiHandlerFb(this._collect << 8 | n, this._params), this.precedingJoinState = 0;
          break;
        case 8:
          do
            switch (n) {
              case 59:
                this._params.addParam(0);
                break;
              case 58:
                this._params.addSubParam(-1);
                break;
              default:
                this._params.addDigit(n - 48);
            }
          while (++u < i && (n = e[u]) > 47 && n < 60);
          u--;
          break;
        case 9:
          this._collect <<= 8, this._collect |= n;
          break;
        case 10:
          let _2 = this._escHandlers[this._collect << 8 | n], p = _2 ? _2.length - 1 : -1;
          for (; p >= 0 && (a = _2[p](), a !== true); p--) if (a instanceof Promise) return this._preserveStack(4, _2, p, o2, u), a;
          p < 0 && this._escHandlerFb(this._collect << 8 | n), this.precedingJoinState = 0;
          break;
        case 11:
          this._params.reset(), this._params.addParam(0), this._collect = 0;
          break;
        case 12:
          this._dcsParser.hook(this._collect << 8 | n, this._params);
          break;
        case 13:
          for (let m = u + 1; ; ++m) if (m >= i || (n = e[m]) === 24 || n === 26 || n === 27 || n > 127 && n < ke) {
            this._dcsParser.put(e, u, m), u = m - 1;
            break;
          }
          break;
        case 14:
          if (a = this._dcsParser.unhook(n !== 24 && n !== 26), a) return this._preserveStack(6, [], 0, o2, u), a;
          n === 27 && (o2 |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0;
          break;
        case 4:
          this._oscParser.start();
          break;
        case 5:
          for (let m = u + 1; ; m++) if (m >= i || (n = e[m]) < 32 || n > 127 && n < ke) {
            this._oscParser.put(e, u, m), u = m - 1;
            break;
          }
          break;
        case 6:
          if (a = this._oscParser.end(n !== 24 && n !== 26), a) return this._preserveStack(5, [], 0, o2, u), a;
          n === 27 && (o2 |= 1), this._params.reset(), this._params.addParam(0), this._collect = 0, this.precedingJoinState = 0;
          break;
      }
      this.currentState = o2 & 15;
    }
  }
};
var dc = /^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/;
var fc = /^[\da-f]+$/;
function Ws(s15) {
  if (!s15) return;
  let t = s15.toLowerCase();
  if (t.indexOf("rgb:") === 0) {
    t = t.slice(4);
    let e = dc.exec(t);
    if (e) {
      let i = e[1] ? 15 : e[4] ? 255 : e[7] ? 4095 : 65535;
      return [Math.round(parseInt(e[1] || e[4] || e[7] || e[10], 16) / i * 255), Math.round(parseInt(e[2] || e[5] || e[8] || e[11], 16) / i * 255), Math.round(parseInt(e[3] || e[6] || e[9] || e[12], 16) / i * 255)];
    }
  } else if (t.indexOf("#") === 0 && (t = t.slice(1), fc.exec(t) && [3, 6, 9, 12].includes(t.length))) {
    let e = t.length / 3, i = [0, 0, 0];
    for (let r = 0; r < 3; ++r) {
      let n = parseInt(t.slice(e * r, e * r + e), 16);
      i[r] = e === 1 ? n << 4 : e === 2 ? n : e === 3 ? n >> 4 : n >> 8;
    }
    return i;
  }
}
function Hs(s15, t) {
  let e = s15.toString(16), i = e.length < 2 ? "0" + e : e;
  switch (t) {
    case 4:
      return e[0];
    case 8:
      return i;
    case 12:
      return (i + i).slice(0, 3);
    default:
      return i + i;
  }
}
function ml(s15, t = 16) {
  let [e, i, r] = s15;
  return `rgb:${Hs(e, t)}/${Hs(i, t)}/${Hs(r, t)}`;
}
var mc = { "(": 0, ")": 1, "*": 2, "+": 3, "-": 1, ".": 2 };
var ut = 131072;
var _l = 10;
function bl(s15, t) {
  if (s15 > 24) return t.setWinLines || false;
  switch (s15) {
    case 1:
      return !!t.restoreWin;
    case 2:
      return !!t.minimizeWin;
    case 3:
      return !!t.setWinPosition;
    case 4:
      return !!t.setWinSizePixels;
    case 5:
      return !!t.raiseWin;
    case 6:
      return !!t.lowerWin;
    case 7:
      return !!t.refreshWin;
    case 8:
      return !!t.setWinSizeChars;
    case 9:
      return !!t.maximizeWin;
    case 10:
      return !!t.fullscreenWin;
    case 11:
      return !!t.getWinState;
    case 13:
      return !!t.getWinPosition;
    case 14:
      return !!t.getWinSizePixels;
    case 15:
      return !!t.getScreenSizePixels;
    case 16:
      return !!t.getCellSizePixels;
    case 18:
      return !!t.getWinSizeChars;
    case 19:
      return !!t.getScreenSizeChars;
    case 20:
      return !!t.getIconTitle;
    case 21:
      return !!t.getWinTitle;
    case 22:
      return !!t.pushTitle;
    case 23:
      return !!t.popTitle;
    case 24:
      return !!t.setWinLines;
  }
  return false;
}
var vl = 5e3;
var gl = 0;
var vn = class extends D {
  constructor(e, i, r, n, o2, l, a, u, h2 = new bn()) {
    super();
    this._bufferService = e;
    this._charsetService = i;
    this._coreService = r;
    this._logService = n;
    this._optionsService = o2;
    this._oscLinkService = l;
    this._coreMouseService = a;
    this._unicodeService = u;
    this._parser = h2;
    this._parseBuffer = new Uint32Array(4096);
    this._stringDecoder = new er();
    this._utf8Decoder = new tr();
    this._windowTitle = "";
    this._iconName = "";
    this._windowTitleStack = [];
    this._iconNameStack = [];
    this._curAttrData = X.clone();
    this._eraseAttrDataInternal = X.clone();
    this._onRequestBell = this._register(new v());
    this.onRequestBell = this._onRequestBell.event;
    this._onRequestRefreshRows = this._register(new v());
    this.onRequestRefreshRows = this._onRequestRefreshRows.event;
    this._onRequestReset = this._register(new v());
    this.onRequestReset = this._onRequestReset.event;
    this._onRequestSendFocus = this._register(new v());
    this.onRequestSendFocus = this._onRequestSendFocus.event;
    this._onRequestSyncScrollBar = this._register(new v());
    this.onRequestSyncScrollBar = this._onRequestSyncScrollBar.event;
    this._onRequestWindowsOptionsReport = this._register(new v());
    this.onRequestWindowsOptionsReport = this._onRequestWindowsOptionsReport.event;
    this._onA11yChar = this._register(new v());
    this.onA11yChar = this._onA11yChar.event;
    this._onA11yTab = this._register(new v());
    this.onA11yTab = this._onA11yTab.event;
    this._onCursorMove = this._register(new v());
    this.onCursorMove = this._onCursorMove.event;
    this._onLineFeed = this._register(new v());
    this.onLineFeed = this._onLineFeed.event;
    this._onScroll = this._register(new v());
    this.onScroll = this._onScroll.event;
    this._onTitleChange = this._register(new v());
    this.onTitleChange = this._onTitleChange.event;
    this._onColor = this._register(new v());
    this.onColor = this._onColor.event;
    this._parseStack = { paused: false, cursorStartX: 0, cursorStartY: 0, decodedLength: 0, position: 0 };
    this._specialColors = [256, 257, 258];
    this._register(this._parser), this._dirtyRowTracker = new Zi(this._bufferService), this._activeBuffer = this._bufferService.buffer, this._register(this._bufferService.buffers.onBufferActivate((c) => this._activeBuffer = c.activeBuffer)), this._parser.setCsiHandlerFallback((c, d) => {
      this._logService.debug("Unknown CSI code: ", { identifier: this._parser.identToString(c), params: d.toArray() });
    }), this._parser.setEscHandlerFallback((c) => {
      this._logService.debug("Unknown ESC code: ", { identifier: this._parser.identToString(c) });
    }), this._parser.setExecuteHandlerFallback((c) => {
      this._logService.debug("Unknown EXECUTE code: ", { code: c });
    }), this._parser.setOscHandlerFallback((c, d, _2) => {
      this._logService.debug("Unknown OSC code: ", { identifier: c, action: d, data: _2 });
    }), this._parser.setDcsHandlerFallback((c, d, _2) => {
      d === "HOOK" && (_2 = _2.toArray()), this._logService.debug("Unknown DCS code: ", { identifier: this._parser.identToString(c), action: d, payload: _2 });
    }), this._parser.setPrintHandler((c, d, _2) => this.print(c, d, _2)), this._parser.registerCsiHandler({ final: "@" }, (c) => this.insertChars(c)), this._parser.registerCsiHandler({ intermediates: " ", final: "@" }, (c) => this.scrollLeft(c)), this._parser.registerCsiHandler({ final: "A" }, (c) => this.cursorUp(c)), this._parser.registerCsiHandler({ intermediates: " ", final: "A" }, (c) => this.scrollRight(c)), this._parser.registerCsiHandler({ final: "B" }, (c) => this.cursorDown(c)), this._parser.registerCsiHandler({ final: "C" }, (c) => this.cursorForward(c)), this._parser.registerCsiHandler({ final: "D" }, (c) => this.cursorBackward(c)), this._parser.registerCsiHandler({ final: "E" }, (c) => this.cursorNextLine(c)), this._parser.registerCsiHandler({ final: "F" }, (c) => this.cursorPrecedingLine(c)), this._parser.registerCsiHandler({ final: "G" }, (c) => this.cursorCharAbsolute(c)), this._parser.registerCsiHandler({ final: "H" }, (c) => this.cursorPosition(c)), this._parser.registerCsiHandler({ final: "I" }, (c) => this.cursorForwardTab(c)), this._parser.registerCsiHandler({ final: "J" }, (c) => this.eraseInDisplay(c, false)), this._parser.registerCsiHandler({ prefix: "?", final: "J" }, (c) => this.eraseInDisplay(c, true)), this._parser.registerCsiHandler({ final: "K" }, (c) => this.eraseInLine(c, false)), this._parser.registerCsiHandler({ prefix: "?", final: "K" }, (c) => this.eraseInLine(c, true)), this._parser.registerCsiHandler({ final: "L" }, (c) => this.insertLines(c)), this._parser.registerCsiHandler({ final: "M" }, (c) => this.deleteLines(c)), this._parser.registerCsiHandler({ final: "P" }, (c) => this.deleteChars(c)), this._parser.registerCsiHandler({ final: "S" }, (c) => this.scrollUp(c)), this._parser.registerCsiHandler({ final: "T" }, (c) => this.scrollDown(c)), this._parser.registerCsiHandler({ final: "X" }, (c) => this.eraseChars(c)), this._parser.registerCsiHandler({ final: "Z" }, (c) => this.cursorBackwardTab(c)), this._parser.registerCsiHandler({ final: "`" }, (c) => this.charPosAbsolute(c)), this._parser.registerCsiHandler({ final: "a" }, (c) => this.hPositionRelative(c)), this._parser.registerCsiHandler({ final: "b" }, (c) => this.repeatPrecedingCharacter(c)), this._parser.registerCsiHandler({ final: "c" }, (c) => this.sendDeviceAttributesPrimary(c)), this._parser.registerCsiHandler({ prefix: ">", final: "c" }, (c) => this.sendDeviceAttributesSecondary(c)), this._parser.registerCsiHandler({ final: "d" }, (c) => this.linePosAbsolute(c)), this._parser.registerCsiHandler({ final: "e" }, (c) => this.vPositionRelative(c)), this._parser.registerCsiHandler({ final: "f" }, (c) => this.hVPosition(c)), this._parser.registerCsiHandler({ final: "g" }, (c) => this.tabClear(c)), this._parser.registerCsiHandler({ final: "h" }, (c) => this.setMode(c)), this._parser.registerCsiHandler({ prefix: "?", final: "h" }, (c) => this.setModePrivate(c)), this._parser.registerCsiHandler({ final: "l" }, (c) => this.resetMode(c)), this._parser.registerCsiHandler({ prefix: "?", final: "l" }, (c) => this.resetModePrivate(c)), this._parser.registerCsiHandler({ final: "m" }, (c) => this.charAttributes(c)), this._parser.registerCsiHandler({ final: "n" }, (c) => this.deviceStatus(c)), this._parser.registerCsiHandler({ prefix: "?", final: "n" }, (c) => this.deviceStatusPrivate(c)), this._parser.registerCsiHandler({ intermediates: "!", final: "p" }, (c) => this.softReset(c)), this._parser.registerCsiHandler({ intermediates: " ", final: "q" }, (c) => this.setCursorStyle(c)), this._parser.registerCsiHandler({ final: "r" }, (c) => this.setScrollRegion(c)), this._parser.registerCsiHandler({ final: "s" }, (c) => this.saveCursor(c)), this._parser.registerCsiHandler({ final: "t" }, (c) => this.windowOptions(c)), this._parser.registerCsiHandler({ final: "u" }, (c) => this.restoreCursor(c)), this._parser.registerCsiHandler({ intermediates: "'", final: "}" }, (c) => this.insertColumns(c)), this._parser.registerCsiHandler({ intermediates: "'", final: "~" }, (c) => this.deleteColumns(c)), this._parser.registerCsiHandler({ intermediates: '"', final: "q" }, (c) => this.selectProtected(c)), this._parser.registerCsiHandler({ intermediates: "$", final: "p" }, (c) => this.requestMode(c, true)), this._parser.registerCsiHandler({ prefix: "?", intermediates: "$", final: "p" }, (c) => this.requestMode(c, false)), this._parser.setExecuteHandler(b.BEL, () => this.bell()), this._parser.setExecuteHandler(b.LF, () => this.lineFeed()), this._parser.setExecuteHandler(b.VT, () => this.lineFeed()), this._parser.setExecuteHandler(b.FF, () => this.lineFeed()), this._parser.setExecuteHandler(b.CR, () => this.carriageReturn()), this._parser.setExecuteHandler(b.BS, () => this.backspace()), this._parser.setExecuteHandler(b.HT, () => this.tab()), this._parser.setExecuteHandler(b.SO, () => this.shiftOut()), this._parser.setExecuteHandler(b.SI, () => this.shiftIn()), this._parser.setExecuteHandler(Ai.IND, () => this.index()), this._parser.setExecuteHandler(Ai.NEL, () => this.nextLine()), this._parser.setExecuteHandler(Ai.HTS, () => this.tabSet()), this._parser.registerOscHandler(0, new pe((c) => (this.setTitle(c), this.setIconName(c), true))), this._parser.registerOscHandler(1, new pe((c) => this.setIconName(c))), this._parser.registerOscHandler(2, new pe((c) => this.setTitle(c))), this._parser.registerOscHandler(4, new pe((c) => this.setOrReportIndexedColor(c))), this._parser.registerOscHandler(8, new pe((c) => this.setHyperlink(c))), this._parser.registerOscHandler(10, new pe((c) => this.setOrReportFgColor(c))), this._parser.registerOscHandler(11, new pe((c) => this.setOrReportBgColor(c))), this._parser.registerOscHandler(12, new pe((c) => this.setOrReportCursorColor(c))), this._parser.registerOscHandler(104, new pe((c) => this.restoreIndexedColor(c))), this._parser.registerOscHandler(110, new pe((c) => this.restoreFgColor(c))), this._parser.registerOscHandler(111, new pe((c) => this.restoreBgColor(c))), this._parser.registerOscHandler(112, new pe((c) => this.restoreCursorColor(c))), this._parser.registerEscHandler({ final: "7" }, () => this.saveCursor()), this._parser.registerEscHandler({ final: "8" }, () => this.restoreCursor()), this._parser.registerEscHandler({ final: "D" }, () => this.index()), this._parser.registerEscHandler({ final: "E" }, () => this.nextLine()), this._parser.registerEscHandler({ final: "H" }, () => this.tabSet()), this._parser.registerEscHandler({ final: "M" }, () => this.reverseIndex()), this._parser.registerEscHandler({ final: "=" }, () => this.keypadApplicationMode()), this._parser.registerEscHandler({ final: ">" }, () => this.keypadNumericMode()), this._parser.registerEscHandler({ final: "c" }, () => this.fullReset()), this._parser.registerEscHandler({ final: "n" }, () => this.setgLevel(2)), this._parser.registerEscHandler({ final: "o" }, () => this.setgLevel(3)), this._parser.registerEscHandler({ final: "|" }, () => this.setgLevel(3)), this._parser.registerEscHandler({ final: "}" }, () => this.setgLevel(2)), this._parser.registerEscHandler({ final: "~" }, () => this.setgLevel(1)), this._parser.registerEscHandler({ intermediates: "%", final: "@" }, () => this.selectDefaultCharset()), this._parser.registerEscHandler({ intermediates: "%", final: "G" }, () => this.selectDefaultCharset());
    for (let c in ne) this._parser.registerEscHandler({ intermediates: "(", final: c }, () => this.selectCharset("(" + c)), this._parser.registerEscHandler({ intermediates: ")", final: c }, () => this.selectCharset(")" + c)), this._parser.registerEscHandler({ intermediates: "*", final: c }, () => this.selectCharset("*" + c)), this._parser.registerEscHandler({ intermediates: "+", final: c }, () => this.selectCharset("+" + c)), this._parser.registerEscHandler({ intermediates: "-", final: c }, () => this.selectCharset("-" + c)), this._parser.registerEscHandler({ intermediates: ".", final: c }, () => this.selectCharset("." + c)), this._parser.registerEscHandler({ intermediates: "/", final: c }, () => this.selectCharset("/" + c));
    this._parser.registerEscHandler({ intermediates: "#", final: "8" }, () => this.screenAlignmentPattern()), this._parser.setErrorHandler((c) => (this._logService.error("Parsing error: ", c), c)), this._parser.registerDcsHandler({ intermediates: "$", final: "q" }, new Xi((c, d) => this.requestStatusString(c, d)));
  }
  getAttrData() {
    return this._curAttrData;
  }
  _preserveStack(e, i, r, n) {
    this._parseStack.paused = true, this._parseStack.cursorStartX = e, this._parseStack.cursorStartY = i, this._parseStack.decodedLength = r, this._parseStack.position = n;
  }
  _logSlowResolvingAsync(e) {
    this._logService.logLevel <= 3 && Promise.race([e, new Promise((i, r) => setTimeout(() => r("#SLOW_TIMEOUT"), vl))]).catch((i) => {
      if (i !== "#SLOW_TIMEOUT") throw i;
      console.warn(`async parser handler taking longer than ${vl} ms`);
    });
  }
  _getCurrentLinkId() {
    return this._curAttrData.extended.urlId;
  }
  parse(e, i) {
    let r, n = this._activeBuffer.x, o2 = this._activeBuffer.y, l = 0, a = this._parseStack.paused;
    if (a) {
      if (r = this._parser.parse(this._parseBuffer, this._parseStack.decodedLength, i)) return this._logSlowResolvingAsync(r), r;
      n = this._parseStack.cursorStartX, o2 = this._parseStack.cursorStartY, this._parseStack.paused = false, e.length > ut && (l = this._parseStack.position + ut);
    }
    if (this._logService.logLevel <= 1 && this._logService.debug(`parsing data ${typeof e == "string" ? ` "${e}"` : ` "${Array.prototype.map.call(e, (c) => String.fromCharCode(c)).join("")}"`}`), this._logService.logLevel === 0 && this._logService.trace("parsing data (codes)", typeof e == "string" ? e.split("").map((c) => c.charCodeAt(0)) : e), this._parseBuffer.length < e.length && this._parseBuffer.length < ut && (this._parseBuffer = new Uint32Array(Math.min(e.length, ut))), a || this._dirtyRowTracker.clearRange(), e.length > ut) for (let c = l; c < e.length; c += ut) {
      let d = c + ut < e.length ? c + ut : e.length, _2 = typeof e == "string" ? this._stringDecoder.decode(e.substring(c, d), this._parseBuffer) : this._utf8Decoder.decode(e.subarray(c, d), this._parseBuffer);
      if (r = this._parser.parse(this._parseBuffer, _2)) return this._preserveStack(n, o2, _2, c), this._logSlowResolvingAsync(r), r;
    }
    else if (!a) {
      let c = typeof e == "string" ? this._stringDecoder.decode(e, this._parseBuffer) : this._utf8Decoder.decode(e, this._parseBuffer);
      if (r = this._parser.parse(this._parseBuffer, c)) return this._preserveStack(n, o2, c, 0), this._logSlowResolvingAsync(r), r;
    }
    (this._activeBuffer.x !== n || this._activeBuffer.y !== o2) && this._onCursorMove.fire();
    let u = this._dirtyRowTracker.end + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp), h2 = this._dirtyRowTracker.start + (this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
    h2 < this._bufferService.rows && this._onRequestRefreshRows.fire({ start: Math.min(h2, this._bufferService.rows - 1), end: Math.min(u, this._bufferService.rows - 1) });
  }
  print(e, i, r) {
    let n, o2, l = this._charsetService.charset, a = this._optionsService.rawOptions.screenReaderMode, u = this._bufferService.cols, h2 = this._coreService.decPrivateModes.wraparound, c = this._coreService.modes.insertMode, d = this._curAttrData, _2 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
    this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._activeBuffer.x && r - i > 0 && _2.getWidth(this._activeBuffer.x - 1) === 2 && _2.setCellFromCodepoint(this._activeBuffer.x - 1, 0, 1, d);
    let p = this._parser.precedingJoinState;
    for (let m = i; m < r; ++m) {
      if (n = e[m], n < 127 && l) {
        let O = l[String.fromCharCode(n)];
        O && (n = O.charCodeAt(0));
      }
      let f = this._unicodeService.charProperties(n, p);
      o2 = Ae.extractWidth(f);
      let A = Ae.extractShouldJoin(f), R = A ? Ae.extractWidth(p) : 0;
      if (p = f, a && this._onA11yChar.fire(Ce(n)), this._getCurrentLinkId() && this._oscLinkService.addLineToLink(this._getCurrentLinkId(), this._activeBuffer.ybase + this._activeBuffer.y), this._activeBuffer.x + o2 - R > u) {
        if (h2) {
          let O = _2, I = this._activeBuffer.x - R;
          for (this._activeBuffer.x = R, this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData(), true)) : (this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = true), _2 = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y), R > 0 && _2 instanceof Ze && _2.copyCellsFrom(O, I, 0, R, false); I < u; ) O.setCellFromCodepoint(I++, 0, 1, d);
        } else if (this._activeBuffer.x = u - 1, o2 === 2) continue;
      }
      if (A && this._activeBuffer.x) {
        let O = _2.getWidth(this._activeBuffer.x - 1) ? 1 : 2;
        _2.addCodepointToCell(this._activeBuffer.x - O, n, o2);
        for (let I = o2 - R; --I >= 0; ) _2.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, d);
        continue;
      }
      if (c && (_2.insertCells(this._activeBuffer.x, o2 - R, this._activeBuffer.getNullCell(d)), _2.getWidth(u - 1) === 2 && _2.setCellFromCodepoint(u - 1, 0, 1, d)), _2.setCellFromCodepoint(this._activeBuffer.x++, n, o2, d), o2 > 0) for (; --o2; ) _2.setCellFromCodepoint(this._activeBuffer.x++, 0, 0, d);
    }
    this._parser.precedingJoinState = p, this._activeBuffer.x < u && r - i > 0 && _2.getWidth(this._activeBuffer.x) === 0 && !_2.hasContent(this._activeBuffer.x) && _2.setCellFromCodepoint(this._activeBuffer.x, 0, 1, d), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
  }
  registerCsiHandler(e, i) {
    return e.final === "t" && !e.prefix && !e.intermediates ? this._parser.registerCsiHandler(e, (r) => bl(r.params[0], this._optionsService.rawOptions.windowOptions) ? i(r) : true) : this._parser.registerCsiHandler(e, i);
  }
  registerDcsHandler(e, i) {
    return this._parser.registerDcsHandler(e, new Xi(i));
  }
  registerEscHandler(e, i) {
    return this._parser.registerEscHandler(e, i);
  }
  registerOscHandler(e, i) {
    return this._parser.registerOscHandler(e, new pe(i));
  }
  bell() {
    return this._onRequestBell.fire(), true;
  }
  lineFeed() {
    return this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._optionsService.rawOptions.convertEol && (this._activeBuffer.x = 0), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows ? this._activeBuffer.y = this._bufferService.rows - 1 : this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = false, this._activeBuffer.x >= this._bufferService.cols && this._activeBuffer.x--, this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._onLineFeed.fire(), true;
  }
  carriageReturn() {
    return this._activeBuffer.x = 0, true;
  }
  backspace() {
    if (!this._coreService.decPrivateModes.reverseWraparound) return this._restrictCursor(), this._activeBuffer.x > 0 && this._activeBuffer.x--, true;
    if (this._restrictCursor(this._bufferService.cols), this._activeBuffer.x > 0) this._activeBuffer.x--;
    else if (this._activeBuffer.x === 0 && this._activeBuffer.y > this._activeBuffer.scrollTop && this._activeBuffer.y <= this._activeBuffer.scrollBottom && this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y)?.isWrapped) {
      this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).isWrapped = false, this._activeBuffer.y--, this._activeBuffer.x = this._bufferService.cols - 1;
      let e = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
      e.hasWidth(this._activeBuffer.x) && !e.hasContent(this._activeBuffer.x) && this._activeBuffer.x--;
    }
    return this._restrictCursor(), true;
  }
  tab() {
    if (this._activeBuffer.x >= this._bufferService.cols) return true;
    let e = this._activeBuffer.x;
    return this._activeBuffer.x = this._activeBuffer.nextStop(), this._optionsService.rawOptions.screenReaderMode && this._onA11yTab.fire(this._activeBuffer.x - e), true;
  }
  shiftOut() {
    return this._charsetService.setgLevel(1), true;
  }
  shiftIn() {
    return this._charsetService.setgLevel(0), true;
  }
  _restrictCursor(e = this._bufferService.cols - 1) {
    this._activeBuffer.x = Math.min(e, Math.max(0, this._activeBuffer.x)), this._activeBuffer.y = this._coreService.decPrivateModes.origin ? Math.min(this._activeBuffer.scrollBottom, Math.max(this._activeBuffer.scrollTop, this._activeBuffer.y)) : Math.min(this._bufferService.rows - 1, Math.max(0, this._activeBuffer.y)), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
  }
  _setCursor(e, i) {
    this._dirtyRowTracker.markDirty(this._activeBuffer.y), this._coreService.decPrivateModes.origin ? (this._activeBuffer.x = e, this._activeBuffer.y = this._activeBuffer.scrollTop + i) : (this._activeBuffer.x = e, this._activeBuffer.y = i), this._restrictCursor(), this._dirtyRowTracker.markDirty(this._activeBuffer.y);
  }
  _moveCursor(e, i) {
    this._restrictCursor(), this._setCursor(this._activeBuffer.x + e, this._activeBuffer.y + i);
  }
  cursorUp(e) {
    let i = this._activeBuffer.y - this._activeBuffer.scrollTop;
    return i >= 0 ? this._moveCursor(0, -Math.min(i, e.params[0] || 1)) : this._moveCursor(0, -(e.params[0] || 1)), true;
  }
  cursorDown(e) {
    let i = this._activeBuffer.scrollBottom - this._activeBuffer.y;
    return i >= 0 ? this._moveCursor(0, Math.min(i, e.params[0] || 1)) : this._moveCursor(0, e.params[0] || 1), true;
  }
  cursorForward(e) {
    return this._moveCursor(e.params[0] || 1, 0), true;
  }
  cursorBackward(e) {
    return this._moveCursor(-(e.params[0] || 1), 0), true;
  }
  cursorNextLine(e) {
    return this.cursorDown(e), this._activeBuffer.x = 0, true;
  }
  cursorPrecedingLine(e) {
    return this.cursorUp(e), this._activeBuffer.x = 0, true;
  }
  cursorCharAbsolute(e) {
    return this._setCursor((e.params[0] || 1) - 1, this._activeBuffer.y), true;
  }
  cursorPosition(e) {
    return this._setCursor(e.length >= 2 ? (e.params[1] || 1) - 1 : 0, (e.params[0] || 1) - 1), true;
  }
  charPosAbsolute(e) {
    return this._setCursor((e.params[0] || 1) - 1, this._activeBuffer.y), true;
  }
  hPositionRelative(e) {
    return this._moveCursor(e.params[0] || 1, 0), true;
  }
  linePosAbsolute(e) {
    return this._setCursor(this._activeBuffer.x, (e.params[0] || 1) - 1), true;
  }
  vPositionRelative(e) {
    return this._moveCursor(0, e.params[0] || 1), true;
  }
  hVPosition(e) {
    return this.cursorPosition(e), true;
  }
  tabClear(e) {
    let i = e.params[0];
    return i === 0 ? delete this._activeBuffer.tabs[this._activeBuffer.x] : i === 3 && (this._activeBuffer.tabs = {}), true;
  }
  cursorForwardTab(e) {
    if (this._activeBuffer.x >= this._bufferService.cols) return true;
    let i = e.params[0] || 1;
    for (; i--; ) this._activeBuffer.x = this._activeBuffer.nextStop();
    return true;
  }
  cursorBackwardTab(e) {
    if (this._activeBuffer.x >= this._bufferService.cols) return true;
    let i = e.params[0] || 1;
    for (; i--; ) this._activeBuffer.x = this._activeBuffer.prevStop();
    return true;
  }
  selectProtected(e) {
    let i = e.params[0];
    return i === 1 && (this._curAttrData.bg |= 536870912), (i === 2 || i === 0) && (this._curAttrData.bg &= -536870913), true;
  }
  _eraseInBufferLine(e, i, r, n = false, o2 = false) {
    let l = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
    l.replaceCells(i, r, this._activeBuffer.getNullCell(this._eraseAttrData()), o2), n && (l.isWrapped = false);
  }
  _resetBufferLine(e, i = false) {
    let r = this._activeBuffer.lines.get(this._activeBuffer.ybase + e);
    r && (r.fill(this._activeBuffer.getNullCell(this._eraseAttrData()), i), this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase + e), r.isWrapped = false);
  }
  eraseInDisplay(e, i = false) {
    this._restrictCursor(this._bufferService.cols);
    let r;
    switch (e.params[0]) {
      case 0:
        for (r = this._activeBuffer.y, this._dirtyRowTracker.markDirty(r), this._eraseInBufferLine(r++, this._activeBuffer.x, this._bufferService.cols, this._activeBuffer.x === 0, i); r < this._bufferService.rows; r++) this._resetBufferLine(r, i);
        this._dirtyRowTracker.markDirty(r);
        break;
      case 1:
        for (r = this._activeBuffer.y, this._dirtyRowTracker.markDirty(r), this._eraseInBufferLine(r, 0, this._activeBuffer.x + 1, true, i), this._activeBuffer.x + 1 >= this._bufferService.cols && (this._activeBuffer.lines.get(r + 1).isWrapped = false); r--; ) this._resetBufferLine(r, i);
        this._dirtyRowTracker.markDirty(0);
        break;
      case 2:
        if (this._optionsService.rawOptions.scrollOnEraseInDisplay) {
          for (r = this._bufferService.rows, this._dirtyRowTracker.markRangeDirty(0, r - 1); r-- && !this._activeBuffer.lines.get(this._activeBuffer.ybase + r)?.getTrimmedLength(); ) ;
          for (; r >= 0; r--) this._bufferService.scroll(this._eraseAttrData());
        } else {
          for (r = this._bufferService.rows, this._dirtyRowTracker.markDirty(r - 1); r--; ) this._resetBufferLine(r, i);
          this._dirtyRowTracker.markDirty(0);
        }
        break;
      case 3:
        let n = this._activeBuffer.lines.length - this._bufferService.rows;
        n > 0 && (this._activeBuffer.lines.trimStart(n), this._activeBuffer.ybase = Math.max(this._activeBuffer.ybase - n, 0), this._activeBuffer.ydisp = Math.max(this._activeBuffer.ydisp - n, 0), this._onScroll.fire(0));
        break;
    }
    return true;
  }
  eraseInLine(e, i = false) {
    switch (this._restrictCursor(this._bufferService.cols), e.params[0]) {
      case 0:
        this._eraseInBufferLine(this._activeBuffer.y, this._activeBuffer.x, this._bufferService.cols, this._activeBuffer.x === 0, i);
        break;
      case 1:
        this._eraseInBufferLine(this._activeBuffer.y, 0, this._activeBuffer.x + 1, false, i);
        break;
      case 2:
        this._eraseInBufferLine(this._activeBuffer.y, 0, this._bufferService.cols, true, i);
        break;
    }
    return this._dirtyRowTracker.markDirty(this._activeBuffer.y), true;
  }
  insertLines(e) {
    this._restrictCursor();
    let i = e.params[0] || 1;
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let r = this._activeBuffer.ybase + this._activeBuffer.y, n = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom, o2 = this._bufferService.rows - 1 + this._activeBuffer.ybase - n + 1;
    for (; i--; ) this._activeBuffer.lines.splice(o2 - 1, 1), this._activeBuffer.lines.splice(r, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, true;
  }
  deleteLines(e) {
    this._restrictCursor();
    let i = e.params[0] || 1;
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let r = this._activeBuffer.ybase + this._activeBuffer.y, n;
    for (n = this._bufferService.rows - 1 - this._activeBuffer.scrollBottom, n = this._bufferService.rows - 1 + this._activeBuffer.ybase - n; i--; ) this._activeBuffer.lines.splice(r, 1), this._activeBuffer.lines.splice(n, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y, this._activeBuffer.scrollBottom), this._activeBuffer.x = 0, true;
  }
  insertChars(e) {
    this._restrictCursor();
    let i = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
    return i && (i.insertCells(this._activeBuffer.x, e.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
  }
  deleteChars(e) {
    this._restrictCursor();
    let i = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
    return i && (i.deleteCells(this._activeBuffer.x, e.params[0] || 1, this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
  }
  scrollUp(e) {
    let i = e.params[0] || 1;
    for (; i--; ) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 0, this._activeBuffer.getBlankLine(this._eraseAttrData()));
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  scrollDown(e) {
    let i = e.params[0] || 1;
    for (; i--; ) this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollBottom, 1), this._activeBuffer.lines.splice(this._activeBuffer.ybase + this._activeBuffer.scrollTop, 0, this._activeBuffer.getBlankLine(X));
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  scrollLeft(e) {
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let i = e.params[0] || 1;
    for (let r = this._activeBuffer.scrollTop; r <= this._activeBuffer.scrollBottom; ++r) {
      let n = this._activeBuffer.lines.get(this._activeBuffer.ybase + r);
      n.deleteCells(0, i, this._activeBuffer.getNullCell(this._eraseAttrData())), n.isWrapped = false;
    }
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  scrollRight(e) {
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let i = e.params[0] || 1;
    for (let r = this._activeBuffer.scrollTop; r <= this._activeBuffer.scrollBottom; ++r) {
      let n = this._activeBuffer.lines.get(this._activeBuffer.ybase + r);
      n.insertCells(0, i, this._activeBuffer.getNullCell(this._eraseAttrData())), n.isWrapped = false;
    }
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  insertColumns(e) {
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let i = e.params[0] || 1;
    for (let r = this._activeBuffer.scrollTop; r <= this._activeBuffer.scrollBottom; ++r) {
      let n = this._activeBuffer.lines.get(this._activeBuffer.ybase + r);
      n.insertCells(this._activeBuffer.x, i, this._activeBuffer.getNullCell(this._eraseAttrData())), n.isWrapped = false;
    }
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  deleteColumns(e) {
    if (this._activeBuffer.y > this._activeBuffer.scrollBottom || this._activeBuffer.y < this._activeBuffer.scrollTop) return true;
    let i = e.params[0] || 1;
    for (let r = this._activeBuffer.scrollTop; r <= this._activeBuffer.scrollBottom; ++r) {
      let n = this._activeBuffer.lines.get(this._activeBuffer.ybase + r);
      n.deleteCells(this._activeBuffer.x, i, this._activeBuffer.getNullCell(this._eraseAttrData())), n.isWrapped = false;
    }
    return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom), true;
  }
  eraseChars(e) {
    this._restrictCursor();
    let i = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y);
    return i && (i.replaceCells(this._activeBuffer.x, this._activeBuffer.x + (e.params[0] || 1), this._activeBuffer.getNullCell(this._eraseAttrData())), this._dirtyRowTracker.markDirty(this._activeBuffer.y)), true;
  }
  repeatPrecedingCharacter(e) {
    let i = this._parser.precedingJoinState;
    if (!i) return true;
    let r = e.params[0] || 1, n = Ae.extractWidth(i), o2 = this._activeBuffer.x - n, a = this._activeBuffer.lines.get(this._activeBuffer.ybase + this._activeBuffer.y).getString(o2), u = new Uint32Array(a.length * r), h2 = 0;
    for (let d = 0; d < a.length; ) {
      let _2 = a.codePointAt(d) || 0;
      u[h2++] = _2, d += _2 > 65535 ? 2 : 1;
    }
    let c = h2;
    for (let d = 1; d < r; ++d) u.copyWithin(c, 0, h2), c += h2;
    return this.print(u, 0, c), true;
  }
  sendDeviceAttributesPrimary(e) {
    return e.params[0] > 0 || (this._is("xterm") || this._is("rxvt-unicode") || this._is("screen") ? this._coreService.triggerDataEvent(b.ESC + "[?1;2c") : this._is("linux") && this._coreService.triggerDataEvent(b.ESC + "[?6c")), true;
  }
  sendDeviceAttributesSecondary(e) {
    return e.params[0] > 0 || (this._is("xterm") ? this._coreService.triggerDataEvent(b.ESC + "[>0;276;0c") : this._is("rxvt-unicode") ? this._coreService.triggerDataEvent(b.ESC + "[>85;95;0c") : this._is("linux") ? this._coreService.triggerDataEvent(e.params[0] + "c") : this._is("screen") && this._coreService.triggerDataEvent(b.ESC + "[>83;40003;0c")), true;
  }
  _is(e) {
    return (this._optionsService.rawOptions.termName + "").indexOf(e) === 0;
  }
  setMode(e) {
    for (let i = 0; i < e.length; i++) switch (e.params[i]) {
      case 4:
        this._coreService.modes.insertMode = true;
        break;
      case 20:
        this._optionsService.options.convertEol = true;
        break;
    }
    return true;
  }
  setModePrivate(e) {
    for (let i = 0; i < e.length; i++) switch (e.params[i]) {
      case 1:
        this._coreService.decPrivateModes.applicationCursorKeys = true;
        break;
      case 2:
        this._charsetService.setgCharset(0, Je), this._charsetService.setgCharset(1, Je), this._charsetService.setgCharset(2, Je), this._charsetService.setgCharset(3, Je);
        break;
      case 3:
        this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(132, this._bufferService.rows), this._onRequestReset.fire());
        break;
      case 6:
        this._coreService.decPrivateModes.origin = true, this._setCursor(0, 0);
        break;
      case 7:
        this._coreService.decPrivateModes.wraparound = true;
        break;
      case 12:
        this._optionsService.options.cursorBlink = true;
        break;
      case 45:
        this._coreService.decPrivateModes.reverseWraparound = true;
        break;
      case 66:
        this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = true, this._onRequestSyncScrollBar.fire();
        break;
      case 9:
        this._coreMouseService.activeProtocol = "X10";
        break;
      case 1e3:
        this._coreMouseService.activeProtocol = "VT200";
        break;
      case 1002:
        this._coreMouseService.activeProtocol = "DRAG";
        break;
      case 1003:
        this._coreMouseService.activeProtocol = "ANY";
        break;
      case 1004:
        this._coreService.decPrivateModes.sendFocus = true, this._onRequestSendFocus.fire();
        break;
      case 1005:
        this._logService.debug("DECSET 1005 not supported (see #2507)");
        break;
      case 1006:
        this._coreMouseService.activeEncoding = "SGR";
        break;
      case 1015:
        this._logService.debug("DECSET 1015 not supported (see #2507)");
        break;
      case 1016:
        this._coreMouseService.activeEncoding = "SGR_PIXELS";
        break;
      case 25:
        this._coreService.isCursorHidden = false;
        break;
      case 1048:
        this.saveCursor();
        break;
      case 1049:
        this.saveCursor();
      case 47:
      case 1047:
        this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()), this._coreService.isCursorInitialized = true, this._onRequestRefreshRows.fire(void 0), this._onRequestSyncScrollBar.fire();
        break;
      case 2004:
        this._coreService.decPrivateModes.bracketedPasteMode = true;
        break;
      case 2026:
        this._coreService.decPrivateModes.synchronizedOutput = true;
        break;
    }
    return true;
  }
  resetMode(e) {
    for (let i = 0; i < e.length; i++) switch (e.params[i]) {
      case 4:
        this._coreService.modes.insertMode = false;
        break;
      case 20:
        this._optionsService.options.convertEol = false;
        break;
    }
    return true;
  }
  resetModePrivate(e) {
    for (let i = 0; i < e.length; i++) switch (e.params[i]) {
      case 1:
        this._coreService.decPrivateModes.applicationCursorKeys = false;
        break;
      case 3:
        this._optionsService.rawOptions.windowOptions.setWinLines && (this._bufferService.resize(80, this._bufferService.rows), this._onRequestReset.fire());
        break;
      case 6:
        this._coreService.decPrivateModes.origin = false, this._setCursor(0, 0);
        break;
      case 7:
        this._coreService.decPrivateModes.wraparound = false;
        break;
      case 12:
        this._optionsService.options.cursorBlink = false;
        break;
      case 45:
        this._coreService.decPrivateModes.reverseWraparound = false;
        break;
      case 66:
        this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = false, this._onRequestSyncScrollBar.fire();
        break;
      case 9:
      case 1e3:
      case 1002:
      case 1003:
        this._coreMouseService.activeProtocol = "NONE";
        break;
      case 1004:
        this._coreService.decPrivateModes.sendFocus = false;
        break;
      case 1005:
        this._logService.debug("DECRST 1005 not supported (see #2507)");
        break;
      case 1006:
        this._coreMouseService.activeEncoding = "DEFAULT";
        break;
      case 1015:
        this._logService.debug("DECRST 1015 not supported (see #2507)");
        break;
      case 1016:
        this._coreMouseService.activeEncoding = "DEFAULT";
        break;
      case 25:
        this._coreService.isCursorHidden = true;
        break;
      case 1048:
        this.restoreCursor();
        break;
      case 1049:
      case 47:
      case 1047:
        this._bufferService.buffers.activateNormalBuffer(), e.params[i] === 1049 && this.restoreCursor(), this._coreService.isCursorInitialized = true, this._onRequestRefreshRows.fire(void 0), this._onRequestSyncScrollBar.fire();
        break;
      case 2004:
        this._coreService.decPrivateModes.bracketedPasteMode = false;
        break;
      case 2026:
        this._coreService.decPrivateModes.synchronizedOutput = false, this._onRequestRefreshRows.fire(void 0);
        break;
    }
    return true;
  }
  requestMode(e, i) {
    let r;
    ((P) => (P[P.NOT_RECOGNIZED = 0] = "NOT_RECOGNIZED", P[P.SET = 1] = "SET", P[P.RESET = 2] = "RESET", P[P.PERMANENTLY_SET = 3] = "PERMANENTLY_SET", P[P.PERMANENTLY_RESET = 4] = "PERMANENTLY_RESET"))(r ||= {});
    let n = this._coreService.decPrivateModes, { activeProtocol: o2, activeEncoding: l } = this._coreMouseService, a = this._coreService, { buffers: u, cols: h2 } = this._bufferService, { active: c, alt: d } = u, _2 = this._optionsService.rawOptions, p = (A, R) => (a.triggerDataEvent(`${b.ESC}[${i ? "" : "?"}${A};${R}$y`), true), m = (A) => A ? 1 : 2, f = e.params[0];
    return i ? f === 2 ? p(f, 4) : f === 4 ? p(f, m(a.modes.insertMode)) : f === 12 ? p(f, 3) : f === 20 ? p(f, m(_2.convertEol)) : p(f, 0) : f === 1 ? p(f, m(n.applicationCursorKeys)) : f === 3 ? p(f, _2.windowOptions.setWinLines ? h2 === 80 ? 2 : h2 === 132 ? 1 : 0 : 0) : f === 6 ? p(f, m(n.origin)) : f === 7 ? p(f, m(n.wraparound)) : f === 8 ? p(f, 3) : f === 9 ? p(f, m(o2 === "X10")) : f === 12 ? p(f, m(_2.cursorBlink)) : f === 25 ? p(f, m(!a.isCursorHidden)) : f === 45 ? p(f, m(n.reverseWraparound)) : f === 66 ? p(f, m(n.applicationKeypad)) : f === 67 ? p(f, 4) : f === 1e3 ? p(f, m(o2 === "VT200")) : f === 1002 ? p(f, m(o2 === "DRAG")) : f === 1003 ? p(f, m(o2 === "ANY")) : f === 1004 ? p(f, m(n.sendFocus)) : f === 1005 ? p(f, 4) : f === 1006 ? p(f, m(l === "SGR")) : f === 1015 ? p(f, 4) : f === 1016 ? p(f, m(l === "SGR_PIXELS")) : f === 1048 ? p(f, 1) : f === 47 || f === 1047 || f === 1049 ? p(f, m(c === d)) : f === 2004 ? p(f, m(n.bracketedPasteMode)) : f === 2026 ? p(f, m(n.synchronizedOutput)) : p(f, 0);
  }
  _updateAttrColor(e, i, r, n, o2) {
    return i === 2 ? (e |= 50331648, e &= -16777216, e |= De.fromColorRGB([r, n, o2])) : i === 5 && (e &= -50331904, e |= 33554432 | r & 255), e;
  }
  _extractColor(e, i, r) {
    let n = [0, 0, -1, 0, 0, 0], o2 = 0, l = 0;
    do {
      if (n[l + o2] = e.params[i + l], e.hasSubParams(i + l)) {
        let a = e.getSubParams(i + l), u = 0;
        do
          n[1] === 5 && (o2 = 1), n[l + u + 1 + o2] = a[u];
        while (++u < a.length && u + l + 1 + o2 < n.length);
        break;
      }
      if (n[1] === 5 && l + o2 >= 2 || n[1] === 2 && l + o2 >= 5) break;
      n[1] && (o2 = 1);
    } while (++l + i < e.length && l + o2 < n.length);
    for (let a = 2; a < n.length; ++a) n[a] === -1 && (n[a] = 0);
    switch (n[0]) {
      case 38:
        r.fg = this._updateAttrColor(r.fg, n[1], n[3], n[4], n[5]);
        break;
      case 48:
        r.bg = this._updateAttrColor(r.bg, n[1], n[3], n[4], n[5]);
        break;
      case 58:
        r.extended = r.extended.clone(), r.extended.underlineColor = this._updateAttrColor(r.extended.underlineColor, n[1], n[3], n[4], n[5]);
    }
    return l;
  }
  _processUnderline(e, i) {
    i.extended = i.extended.clone(), (!~e || e > 5) && (e = 1), i.extended.underlineStyle = e, i.fg |= 268435456, e === 0 && (i.fg &= -268435457), i.updateExtended();
  }
  _processSGR0(e) {
    e.fg = X.fg, e.bg = X.bg, e.extended = e.extended.clone(), e.extended.underlineStyle = 0, e.extended.underlineColor &= -67108864, e.updateExtended();
  }
  charAttributes(e) {
    if (e.length === 1 && e.params[0] === 0) return this._processSGR0(this._curAttrData), true;
    let i = e.length, r, n = this._curAttrData;
    for (let o2 = 0; o2 < i; o2++) r = e.params[o2], r >= 30 && r <= 37 ? (n.fg &= -50331904, n.fg |= 16777216 | r - 30) : r >= 40 && r <= 47 ? (n.bg &= -50331904, n.bg |= 16777216 | r - 40) : r >= 90 && r <= 97 ? (n.fg &= -50331904, n.fg |= 16777216 | r - 90 | 8) : r >= 100 && r <= 107 ? (n.bg &= -50331904, n.bg |= 16777216 | r - 100 | 8) : r === 0 ? this._processSGR0(n) : r === 1 ? n.fg |= 134217728 : r === 3 ? n.bg |= 67108864 : r === 4 ? (n.fg |= 268435456, this._processUnderline(e.hasSubParams(o2) ? e.getSubParams(o2)[0] : 1, n)) : r === 5 ? n.fg |= 536870912 : r === 7 ? n.fg |= 67108864 : r === 8 ? n.fg |= 1073741824 : r === 9 ? n.fg |= 2147483648 : r === 2 ? n.bg |= 134217728 : r === 21 ? this._processUnderline(2, n) : r === 22 ? (n.fg &= -134217729, n.bg &= -134217729) : r === 23 ? n.bg &= -67108865 : r === 24 ? (n.fg &= -268435457, this._processUnderline(0, n)) : r === 25 ? n.fg &= -536870913 : r === 27 ? n.fg &= -67108865 : r === 28 ? n.fg &= -1073741825 : r === 29 ? n.fg &= 2147483647 : r === 39 ? (n.fg &= -67108864, n.fg |= X.fg & 16777215) : r === 49 ? (n.bg &= -67108864, n.bg |= X.bg & 16777215) : r === 38 || r === 48 || r === 58 ? o2 += this._extractColor(e, o2, n) : r === 53 ? n.bg |= 1073741824 : r === 55 ? n.bg &= -1073741825 : r === 59 ? (n.extended = n.extended.clone(), n.extended.underlineColor = -1, n.updateExtended()) : r === 100 ? (n.fg &= -67108864, n.fg |= X.fg & 16777215, n.bg &= -67108864, n.bg |= X.bg & 16777215) : this._logService.debug("Unknown SGR attribute: %d.", r);
    return true;
  }
  deviceStatus(e) {
    switch (e.params[0]) {
      case 5:
        this._coreService.triggerDataEvent(`${b.ESC}[0n`);
        break;
      case 6:
        let i = this._activeBuffer.y + 1, r = this._activeBuffer.x + 1;
        this._coreService.triggerDataEvent(`${b.ESC}[${i};${r}R`);
        break;
    }
    return true;
  }
  deviceStatusPrivate(e) {
    switch (e.params[0]) {
      case 6:
        let i = this._activeBuffer.y + 1, r = this._activeBuffer.x + 1;
        this._coreService.triggerDataEvent(`${b.ESC}[?${i};${r}R`);
        break;
      case 15:
        break;
      case 25:
        break;
      case 26:
        break;
      case 53:
        break;
    }
    return true;
  }
  softReset(e) {
    return this._coreService.isCursorHidden = false, this._onRequestSyncScrollBar.fire(), this._activeBuffer.scrollTop = 0, this._activeBuffer.scrollBottom = this._bufferService.rows - 1, this._curAttrData = X.clone(), this._coreService.reset(), this._charsetService.reset(), this._activeBuffer.savedX = 0, this._activeBuffer.savedY = this._activeBuffer.ybase, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, this._coreService.decPrivateModes.origin = false, true;
  }
  setCursorStyle(e) {
    let i = e.length === 0 ? 1 : e.params[0];
    if (i === 0) this._coreService.decPrivateModes.cursorStyle = void 0, this._coreService.decPrivateModes.cursorBlink = void 0;
    else {
      switch (i) {
        case 1:
        case 2:
          this._coreService.decPrivateModes.cursorStyle = "block";
          break;
        case 3:
        case 4:
          this._coreService.decPrivateModes.cursorStyle = "underline";
          break;
        case 5:
        case 6:
          this._coreService.decPrivateModes.cursorStyle = "bar";
          break;
      }
      let r = i % 2 === 1;
      this._coreService.decPrivateModes.cursorBlink = r;
    }
    return true;
  }
  setScrollRegion(e) {
    let i = e.params[0] || 1, r;
    return (e.length < 2 || (r = e.params[1]) > this._bufferService.rows || r === 0) && (r = this._bufferService.rows), r > i && (this._activeBuffer.scrollTop = i - 1, this._activeBuffer.scrollBottom = r - 1, this._setCursor(0, 0)), true;
  }
  windowOptions(e) {
    if (!bl(e.params[0], this._optionsService.rawOptions.windowOptions)) return true;
    let i = e.length > 1 ? e.params[1] : 0;
    switch (e.params[0]) {
      case 14:
        i !== 2 && this._onRequestWindowsOptionsReport.fire(0);
        break;
      case 16:
        this._onRequestWindowsOptionsReport.fire(1);
        break;
      case 18:
        this._bufferService && this._coreService.triggerDataEvent(`${b.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);
        break;
      case 22:
        (i === 0 || i === 2) && (this._windowTitleStack.push(this._windowTitle), this._windowTitleStack.length > _l && this._windowTitleStack.shift()), (i === 0 || i === 1) && (this._iconNameStack.push(this._iconName), this._iconNameStack.length > _l && this._iconNameStack.shift());
        break;
      case 23:
        (i === 0 || i === 2) && this._windowTitleStack.length && this.setTitle(this._windowTitleStack.pop()), (i === 0 || i === 1) && this._iconNameStack.length && this.setIconName(this._iconNameStack.pop());
        break;
    }
    return true;
  }
  saveCursor(e) {
    return this._activeBuffer.savedX = this._activeBuffer.x, this._activeBuffer.savedY = this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.savedCurAttrData.fg = this._curAttrData.fg, this._activeBuffer.savedCurAttrData.bg = this._curAttrData.bg, this._activeBuffer.savedCharset = this._charsetService.charset, true;
  }
  restoreCursor(e) {
    return this._activeBuffer.x = this._activeBuffer.savedX || 0, this._activeBuffer.y = Math.max(this._activeBuffer.savedY - this._activeBuffer.ybase, 0), this._curAttrData.fg = this._activeBuffer.savedCurAttrData.fg, this._curAttrData.bg = this._activeBuffer.savedCurAttrData.bg, this._charsetService.charset = this._savedCharset, this._activeBuffer.savedCharset && (this._charsetService.charset = this._activeBuffer.savedCharset), this._restrictCursor(), true;
  }
  setTitle(e) {
    return this._windowTitle = e, this._onTitleChange.fire(e), true;
  }
  setIconName(e) {
    return this._iconName = e, true;
  }
  setOrReportIndexedColor(e) {
    let i = [], r = e.split(";");
    for (; r.length > 1; ) {
      let n = r.shift(), o2 = r.shift();
      if (/^\d+$/.exec(n)) {
        let l = parseInt(n);
        if (Sl(l)) if (o2 === "?") i.push({ type: 0, index: l });
        else {
          let a = Ws(o2);
          a && i.push({ type: 1, index: l, color: a });
        }
      }
    }
    return i.length && this._onColor.fire(i), true;
  }
  setHyperlink(e) {
    let i = e.indexOf(";");
    if (i === -1) return true;
    let r = e.slice(0, i).trim(), n = e.slice(i + 1);
    return n ? this._createHyperlink(r, n) : r.trim() ? false : this._finishHyperlink();
  }
  _createHyperlink(e, i) {
    this._getCurrentLinkId() && this._finishHyperlink();
    let r = e.split(":"), n, o2 = r.findIndex((l) => l.startsWith("id="));
    return o2 !== -1 && (n = r[o2].slice(3) || void 0), this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = this._oscLinkService.registerLink({ id: n, uri: i }), this._curAttrData.updateExtended(), true;
  }
  _finishHyperlink() {
    return this._curAttrData.extended = this._curAttrData.extended.clone(), this._curAttrData.extended.urlId = 0, this._curAttrData.updateExtended(), true;
  }
  _setOrReportSpecialColor(e, i) {
    let r = e.split(";");
    for (let n = 0; n < r.length && !(i >= this._specialColors.length); ++n, ++i) if (r[n] === "?") this._onColor.fire([{ type: 0, index: this._specialColors[i] }]);
    else {
      let o2 = Ws(r[n]);
      o2 && this._onColor.fire([{ type: 1, index: this._specialColors[i], color: o2 }]);
    }
    return true;
  }
  setOrReportFgColor(e) {
    return this._setOrReportSpecialColor(e, 0);
  }
  setOrReportBgColor(e) {
    return this._setOrReportSpecialColor(e, 1);
  }
  setOrReportCursorColor(e) {
    return this._setOrReportSpecialColor(e, 2);
  }
  restoreIndexedColor(e) {
    if (!e) return this._onColor.fire([{ type: 2 }]), true;
    let i = [], r = e.split(";");
    for (let n = 0; n < r.length; ++n) if (/^\d+$/.exec(r[n])) {
      let o2 = parseInt(r[n]);
      Sl(o2) && i.push({ type: 2, index: o2 });
    }
    return i.length && this._onColor.fire(i), true;
  }
  restoreFgColor(e) {
    return this._onColor.fire([{ type: 2, index: 256 }]), true;
  }
  restoreBgColor(e) {
    return this._onColor.fire([{ type: 2, index: 257 }]), true;
  }
  restoreCursorColor(e) {
    return this._onColor.fire([{ type: 2, index: 258 }]), true;
  }
  nextLine() {
    return this._activeBuffer.x = 0, this.index(), true;
  }
  keypadApplicationMode() {
    return this._logService.debug("Serial port requested application keypad."), this._coreService.decPrivateModes.applicationKeypad = true, this._onRequestSyncScrollBar.fire(), true;
  }
  keypadNumericMode() {
    return this._logService.debug("Switching back to normal keypad."), this._coreService.decPrivateModes.applicationKeypad = false, this._onRequestSyncScrollBar.fire(), true;
  }
  selectDefaultCharset() {
    return this._charsetService.setgLevel(0), this._charsetService.setgCharset(0, Je), true;
  }
  selectCharset(e) {
    return e.length !== 2 ? (this.selectDefaultCharset(), true) : (e[0] === "/" || this._charsetService.setgCharset(mc[e[0]], ne[e[1]] || Je), true);
  }
  index() {
    return this._restrictCursor(), this._activeBuffer.y++, this._activeBuffer.y === this._activeBuffer.scrollBottom + 1 ? (this._activeBuffer.y--, this._bufferService.scroll(this._eraseAttrData())) : this._activeBuffer.y >= this._bufferService.rows && (this._activeBuffer.y = this._bufferService.rows - 1), this._restrictCursor(), true;
  }
  tabSet() {
    return this._activeBuffer.tabs[this._activeBuffer.x] = true, true;
  }
  reverseIndex() {
    if (this._restrictCursor(), this._activeBuffer.y === this._activeBuffer.scrollTop) {
      let e = this._activeBuffer.scrollBottom - this._activeBuffer.scrollTop;
      this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase + this._activeBuffer.y, e, 1), this._activeBuffer.lines.set(this._activeBuffer.ybase + this._activeBuffer.y, this._activeBuffer.getBlankLine(this._eraseAttrData())), this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop, this._activeBuffer.scrollBottom);
    } else this._activeBuffer.y--, this._restrictCursor();
    return true;
  }
  fullReset() {
    return this._parser.reset(), this._onRequestReset.fire(), true;
  }
  reset() {
    this._curAttrData = X.clone(), this._eraseAttrDataInternal = X.clone();
  }
  _eraseAttrData() {
    return this._eraseAttrDataInternal.bg &= -67108864, this._eraseAttrDataInternal.bg |= this._curAttrData.bg & 67108863, this._eraseAttrDataInternal;
  }
  setgLevel(e) {
    return this._charsetService.setgLevel(e), true;
  }
  screenAlignmentPattern() {
    let e = new q();
    e.content = 1 << 22 | 69, e.fg = this._curAttrData.fg, e.bg = this._curAttrData.bg, this._setCursor(0, 0);
    for (let i = 0; i < this._bufferService.rows; ++i) {
      let r = this._activeBuffer.ybase + this._activeBuffer.y + i, n = this._activeBuffer.lines.get(r);
      n && (n.fill(e), n.isWrapped = false);
    }
    return this._dirtyRowTracker.markAllDirty(), this._setCursor(0, 0), true;
  }
  requestStatusString(e, i) {
    let r = (a) => (this._coreService.triggerDataEvent(`${b.ESC}${a}${b.ESC}\\`), true), n = this._bufferService.buffer, o2 = this._optionsService.rawOptions, l = { block: 2, underline: 4, bar: 6 };
    return r(e === '"q' ? `P1$r${this._curAttrData.isProtected() ? 1 : 0}"q` : e === '"p' ? 'P1$r61;1"p' : e === "r" ? `P1$r${n.scrollTop + 1};${n.scrollBottom + 1}r` : e === "m" ? "P1$r0m" : e === " q" ? `P1$r${l[o2.cursorStyle] - (o2.cursorBlink ? 1 : 0)} q` : "P0$r");
  }
  markRangeDirty(e, i) {
    this._dirtyRowTracker.markRangeDirty(e, i);
  }
};
var Zi = class {
  constructor(t) {
    this._bufferService = t;
    this.clearRange();
  }
  clearRange() {
    this.start = this._bufferService.buffer.y, this.end = this._bufferService.buffer.y;
  }
  markDirty(t) {
    t < this.start ? this.start = t : t > this.end && (this.end = t);
  }
  markRangeDirty(t, e) {
    t > e && (gl = t, t = e, e = gl), t < this.start && (this.start = t), e > this.end && (this.end = e);
  }
  markAllDirty() {
    this.markRangeDirty(0, this._bufferService.rows - 1);
  }
};
Zi = M([S(0, F)], Zi);
function Sl(s15) {
  return 0 <= s15 && s15 < 256;
}
var _c = 5e7;
var El = 12;
var bc = 50;
var gn = class extends D {
  constructor(e) {
    super();
    this._action = e;
    this._writeBuffer = [];
    this._callbacks = [];
    this._pendingData = 0;
    this._bufferOffset = 0;
    this._isSyncWriting = false;
    this._syncCalls = 0;
    this._didUserInput = false;
    this._onWriteParsed = this._register(new v());
    this.onWriteParsed = this._onWriteParsed.event;
  }
  handleUserInput() {
    this._didUserInput = true;
  }
  writeSync(e, i) {
    if (i !== void 0 && this._syncCalls > i) {
      this._syncCalls = 0;
      return;
    }
    if (this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(void 0), this._syncCalls++, this._isSyncWriting) return;
    this._isSyncWriting = true;
    let r;
    for (; r = this._writeBuffer.shift(); ) {
      this._action(r);
      let n = this._callbacks.shift();
      n && n();
    }
    this._pendingData = 0, this._bufferOffset = 2147483647, this._isSyncWriting = false, this._syncCalls = 0;
  }
  write(e, i) {
    if (this._pendingData > _c) throw new Error("write data discarded, use flow control to avoid losing data");
    if (!this._writeBuffer.length) {
      if (this._bufferOffset = 0, this._didUserInput) {
        this._didUserInput = false, this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(i), this._innerWrite();
        return;
      }
      setTimeout(() => this._innerWrite());
    }
    this._pendingData += e.length, this._writeBuffer.push(e), this._callbacks.push(i);
  }
  _innerWrite(e = 0, i = true) {
    let r = e || performance.now();
    for (; this._writeBuffer.length > this._bufferOffset; ) {
      let n = this._writeBuffer[this._bufferOffset], o2 = this._action(n, i);
      if (o2) {
        let a = (u) => performance.now() - r >= El ? setTimeout(() => this._innerWrite(0, u)) : this._innerWrite(r, u);
        o2.catch((u) => (queueMicrotask(() => {
          throw u;
        }), Promise.resolve(false))).then(a);
        return;
      }
      let l = this._callbacks[this._bufferOffset];
      if (l && l(), this._bufferOffset++, this._pendingData -= n.length, performance.now() - r >= El) break;
    }
    this._writeBuffer.length > this._bufferOffset ? (this._bufferOffset > bc && (this._writeBuffer = this._writeBuffer.slice(this._bufferOffset), this._callbacks = this._callbacks.slice(this._bufferOffset), this._bufferOffset = 0), setTimeout(() => this._innerWrite())) : (this._writeBuffer.length = 0, this._callbacks.length = 0, this._pendingData = 0, this._bufferOffset = 0), this._onWriteParsed.fire();
  }
};
var ui = class {
  constructor(t) {
    this._bufferService = t;
    this._nextId = 1;
    this._entriesWithId = /* @__PURE__ */ new Map();
    this._dataByLinkId = /* @__PURE__ */ new Map();
  }
  registerLink(t) {
    let e = this._bufferService.buffer;
    if (t.id === void 0) {
      let a = e.addMarker(e.ybase + e.y), u = { data: t, id: this._nextId++, lines: [a] };
      return a.onDispose(() => this._removeMarkerFromLink(u, a)), this._dataByLinkId.set(u.id, u), u.id;
    }
    let i = t, r = this._getEntryIdKey(i), n = this._entriesWithId.get(r);
    if (n) return this.addLineToLink(n.id, e.ybase + e.y), n.id;
    let o2 = e.addMarker(e.ybase + e.y), l = { id: this._nextId++, key: this._getEntryIdKey(i), data: i, lines: [o2] };
    return o2.onDispose(() => this._removeMarkerFromLink(l, o2)), this._entriesWithId.set(l.key, l), this._dataByLinkId.set(l.id, l), l.id;
  }
  addLineToLink(t, e) {
    let i = this._dataByLinkId.get(t);
    if (i && i.lines.every((r) => r.line !== e)) {
      let r = this._bufferService.buffer.addMarker(e);
      i.lines.push(r), r.onDispose(() => this._removeMarkerFromLink(i, r));
    }
  }
  getLinkData(t) {
    return this._dataByLinkId.get(t)?.data;
  }
  _getEntryIdKey(t) {
    return `${t.id};;${t.uri}`;
  }
  _removeMarkerFromLink(t, e) {
    let i = t.lines.indexOf(e);
    i !== -1 && (t.lines.splice(i, 1), t.lines.length === 0 && (t.data.id !== void 0 && this._entriesWithId.delete(t.key), this._dataByLinkId.delete(t.id)));
  }
};
ui = M([S(0, F)], ui);
var Tl = false;
var Sn = class extends D {
  constructor(e) {
    super();
    this._windowsWrappingHeuristics = this._register(new ye());
    this._onBinary = this._register(new v());
    this.onBinary = this._onBinary.event;
    this._onData = this._register(new v());
    this.onData = this._onData.event;
    this._onLineFeed = this._register(new v());
    this.onLineFeed = this._onLineFeed.event;
    this._onResize = this._register(new v());
    this.onResize = this._onResize.event;
    this._onWriteParsed = this._register(new v());
    this.onWriteParsed = this._onWriteParsed.event;
    this._onScroll = this._register(new v());
    this._instantiationService = new ln(), this.optionsService = this._register(new dn(e)), this._instantiationService.setService(H, this.optionsService), this._bufferService = this._register(this._instantiationService.createInstance(ni)), this._instantiationService.setService(F, this._bufferService), this._logService = this._register(this._instantiationService.createInstance(ii)), this._instantiationService.setService(nr, this._logService), this.coreService = this._register(this._instantiationService.createInstance(li)), this._instantiationService.setService(ge, this.coreService), this.coreMouseService = this._register(this._instantiationService.createInstance(ai)), this._instantiationService.setService(rr, this.coreMouseService), this.unicodeService = this._register(this._instantiationService.createInstance(Ae)), this._instantiationService.setService(Js, this.unicodeService), this._charsetService = this._instantiationService.createInstance(pn), this._instantiationService.setService(Zs, this._charsetService), this._oscLinkService = this._instantiationService.createInstance(ui), this._instantiationService.setService(sr, this._oscLinkService), this._inputHandler = this._register(new vn(this._bufferService, this._charsetService, this.coreService, this._logService, this.optionsService, this._oscLinkService, this.coreMouseService, this.unicodeService)), this._register($.forward(this._inputHandler.onLineFeed, this._onLineFeed)), this._register(this._inputHandler), this._register($.forward(this._bufferService.onResize, this._onResize)), this._register($.forward(this.coreService.onData, this._onData)), this._register($.forward(this.coreService.onBinary, this._onBinary)), this._register(this.coreService.onRequestScrollToBottom(() => this.scrollToBottom(true))), this._register(this.coreService.onUserInput(() => this._writeBuffer.handleUserInput())), this._register(this.optionsService.onMultipleOptionChange(["windowsMode", "windowsPty"], () => this._handleWindowsPtyOptionChange())), this._register(this._bufferService.onScroll(() => {
      this._onScroll.fire({ position: this._bufferService.buffer.ydisp }), this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop, this._bufferService.buffer.scrollBottom);
    })), this._writeBuffer = this._register(new gn((i, r) => this._inputHandler.parse(i, r))), this._register($.forward(this._writeBuffer.onWriteParsed, this._onWriteParsed));
  }
  get onScroll() {
    return this._onScrollApi || (this._onScrollApi = this._register(new v()), this._onScroll.event((e) => {
      this._onScrollApi?.fire(e.position);
    })), this._onScrollApi.event;
  }
  get cols() {
    return this._bufferService.cols;
  }
  get rows() {
    return this._bufferService.rows;
  }
  get buffers() {
    return this._bufferService.buffers;
  }
  get options() {
    return this.optionsService.options;
  }
  set options(e) {
    for (let i in e) this.optionsService.options[i] = e[i];
  }
  write(e, i) {
    this._writeBuffer.write(e, i);
  }
  writeSync(e, i) {
    this._logService.logLevel <= 3 && !Tl && (this._logService.warn("writeSync is unreliable and will be removed soon."), Tl = true), this._writeBuffer.writeSync(e, i);
  }
  input(e, i = true) {
    this.coreService.triggerDataEvent(e, i);
  }
  resize(e, i) {
    isNaN(e) || isNaN(i) || (e = Math.max(e, ks), i = Math.max(i, Cs), this._bufferService.resize(e, i));
  }
  scroll(e, i = false) {
    this._bufferService.scroll(e, i);
  }
  scrollLines(e, i) {
    this._bufferService.scrollLines(e, i);
  }
  scrollPages(e) {
    this.scrollLines(e * (this.rows - 1));
  }
  scrollToTop() {
    this.scrollLines(-this._bufferService.buffer.ydisp);
  }
  scrollToBottom(e) {
    this.scrollLines(this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
  }
  scrollToLine(e) {
    let i = e - this._bufferService.buffer.ydisp;
    i !== 0 && this.scrollLines(i);
  }
  registerEscHandler(e, i) {
    return this._inputHandler.registerEscHandler(e, i);
  }
  registerDcsHandler(e, i) {
    return this._inputHandler.registerDcsHandler(e, i);
  }
  registerCsiHandler(e, i) {
    return this._inputHandler.registerCsiHandler(e, i);
  }
  registerOscHandler(e, i) {
    return this._inputHandler.registerOscHandler(e, i);
  }
  _setup() {
    this._handleWindowsPtyOptionChange();
  }
  reset() {
    this._inputHandler.reset(), this._bufferService.reset(), this._charsetService.reset(), this.coreService.reset(), this.coreMouseService.reset();
  }
  _handleWindowsPtyOptionChange() {
    let e = false, i = this.optionsService.rawOptions.windowsPty;
    i && i.buildNumber !== void 0 && i.buildNumber !== void 0 ? e = i.backend === "conpty" && i.buildNumber < 21376 : this.optionsService.rawOptions.windowsMode && (e = true), e ? this._enableWindowsWrappingHeuristics() : this._windowsWrappingHeuristics.clear();
  }
  _enableWindowsWrappingHeuristics() {
    if (!this._windowsWrappingHeuristics.value) {
      let e = [];
      e.push(this.onLineFeed(Bs.bind(null, this._bufferService))), e.push(this.registerCsiHandler({ final: "H" }, () => (Bs(this._bufferService), false))), this._windowsWrappingHeuristics.value = C(() => {
        for (let i of e) i.dispose();
      });
    }
  }
};
var gc = { 48: ["0", ")"], 49: ["1", "!"], 50: ["2", "@"], 51: ["3", "#"], 52: ["4", "$"], 53: ["5", "%"], 54: ["6", "^"], 55: ["7", "&"], 56: ["8", "*"], 57: ["9", "("], 186: [";", ":"], 187: ["=", "+"], 188: [",", "<"], 189: ["-", "_"], 190: [".", ">"], 191: ["/", "?"], 192: ["`", "~"], 219: ["[", "{"], 220: ["\\", "|"], 221: ["]", "}"], 222: ["'", '"'] };
function Il(s15, t, e, i) {
  let r = { type: 0, cancel: false, key: void 0 }, n = (s15.shiftKey ? 1 : 0) | (s15.altKey ? 2 : 0) | (s15.ctrlKey ? 4 : 0) | (s15.metaKey ? 8 : 0);
  switch (s15.keyCode) {
    case 0:
      s15.key === "UIKeyInputUpArrow" ? t ? r.key = b.ESC + "OA" : r.key = b.ESC + "[A" : s15.key === "UIKeyInputLeftArrow" ? t ? r.key = b.ESC + "OD" : r.key = b.ESC + "[D" : s15.key === "UIKeyInputRightArrow" ? t ? r.key = b.ESC + "OC" : r.key = b.ESC + "[C" : s15.key === "UIKeyInputDownArrow" && (t ? r.key = b.ESC + "OB" : r.key = b.ESC + "[B");
      break;
    case 8:
      r.key = s15.ctrlKey ? "\b" : b.DEL, s15.altKey && (r.key = b.ESC + r.key);
      break;
    case 9:
      if (s15.shiftKey) {
        r.key = b.ESC + "[Z";
        break;
      }
      r.key = b.HT, r.cancel = true;
      break;
    case 13:
      r.key = s15.altKey ? b.ESC + b.CR : b.CR, r.cancel = true;
      break;
    case 27:
      r.key = b.ESC, s15.altKey && (r.key = b.ESC + b.ESC), r.cancel = true;
      break;
    case 37:
      if (s15.metaKey) break;
      n ? r.key = b.ESC + "[1;" + (n + 1) + "D" : t ? r.key = b.ESC + "OD" : r.key = b.ESC + "[D";
      break;
    case 39:
      if (s15.metaKey) break;
      n ? r.key = b.ESC + "[1;" + (n + 1) + "C" : t ? r.key = b.ESC + "OC" : r.key = b.ESC + "[C";
      break;
    case 38:
      if (s15.metaKey) break;
      n ? r.key = b.ESC + "[1;" + (n + 1) + "A" : t ? r.key = b.ESC + "OA" : r.key = b.ESC + "[A";
      break;
    case 40:
      if (s15.metaKey) break;
      n ? r.key = b.ESC + "[1;" + (n + 1) + "B" : t ? r.key = b.ESC + "OB" : r.key = b.ESC + "[B";
      break;
    case 45:
      !s15.shiftKey && !s15.ctrlKey && (r.key = b.ESC + "[2~");
      break;
    case 46:
      n ? r.key = b.ESC + "[3;" + (n + 1) + "~" : r.key = b.ESC + "[3~";
      break;
    case 36:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "H" : t ? r.key = b.ESC + "OH" : r.key = b.ESC + "[H";
      break;
    case 35:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "F" : t ? r.key = b.ESC + "OF" : r.key = b.ESC + "[F";
      break;
    case 33:
      s15.shiftKey ? r.type = 2 : s15.ctrlKey ? r.key = b.ESC + "[5;" + (n + 1) + "~" : r.key = b.ESC + "[5~";
      break;
    case 34:
      s15.shiftKey ? r.type = 3 : s15.ctrlKey ? r.key = b.ESC + "[6;" + (n + 1) + "~" : r.key = b.ESC + "[6~";
      break;
    case 112:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "P" : r.key = b.ESC + "OP";
      break;
    case 113:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "Q" : r.key = b.ESC + "OQ";
      break;
    case 114:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "R" : r.key = b.ESC + "OR";
      break;
    case 115:
      n ? r.key = b.ESC + "[1;" + (n + 1) + "S" : r.key = b.ESC + "OS";
      break;
    case 116:
      n ? r.key = b.ESC + "[15;" + (n + 1) + "~" : r.key = b.ESC + "[15~";
      break;
    case 117:
      n ? r.key = b.ESC + "[17;" + (n + 1) + "~" : r.key = b.ESC + "[17~";
      break;
    case 118:
      n ? r.key = b.ESC + "[18;" + (n + 1) + "~" : r.key = b.ESC + "[18~";
      break;
    case 119:
      n ? r.key = b.ESC + "[19;" + (n + 1) + "~" : r.key = b.ESC + "[19~";
      break;
    case 120:
      n ? r.key = b.ESC + "[20;" + (n + 1) + "~" : r.key = b.ESC + "[20~";
      break;
    case 121:
      n ? r.key = b.ESC + "[21;" + (n + 1) + "~" : r.key = b.ESC + "[21~";
      break;
    case 122:
      n ? r.key = b.ESC + "[23;" + (n + 1) + "~" : r.key = b.ESC + "[23~";
      break;
    case 123:
      n ? r.key = b.ESC + "[24;" + (n + 1) + "~" : r.key = b.ESC + "[24~";
      break;
    default:
      if (s15.ctrlKey && !s15.shiftKey && !s15.altKey && !s15.metaKey) s15.keyCode >= 65 && s15.keyCode <= 90 ? r.key = String.fromCharCode(s15.keyCode - 64) : s15.keyCode === 32 ? r.key = b.NUL : s15.keyCode >= 51 && s15.keyCode <= 55 ? r.key = String.fromCharCode(s15.keyCode - 51 + 27) : s15.keyCode === 56 ? r.key = b.DEL : s15.keyCode === 219 ? r.key = b.ESC : s15.keyCode === 220 ? r.key = b.FS : s15.keyCode === 221 && (r.key = b.GS);
      else if ((!e || i) && s15.altKey && !s15.metaKey) {
        let l = gc[s15.keyCode]?.[s15.shiftKey ? 1 : 0];
        if (l) r.key = b.ESC + l;
        else if (s15.keyCode >= 65 && s15.keyCode <= 90) {
          let a = s15.ctrlKey ? s15.keyCode - 64 : s15.keyCode + 32, u = String.fromCharCode(a);
          s15.shiftKey && (u = u.toUpperCase()), r.key = b.ESC + u;
        } else if (s15.keyCode === 32) r.key = b.ESC + (s15.ctrlKey ? b.NUL : " ");
        else if (s15.key === "Dead" && s15.code.startsWith("Key")) {
          let a = s15.code.slice(3, 4);
          s15.shiftKey || (a = a.toLowerCase()), r.key = b.ESC + a, r.cancel = true;
        }
      } else e && !s15.altKey && !s15.ctrlKey && !s15.shiftKey && s15.metaKey ? s15.keyCode === 65 && (r.type = 1) : s15.key && !s15.ctrlKey && !s15.altKey && !s15.metaKey && s15.keyCode >= 48 && s15.key.length === 1 ? r.key = s15.key : s15.key && s15.ctrlKey && (s15.key === "_" && (r.key = b.US), s15.key === "@" && (r.key = b.NUL));
      break;
  }
  return r;
}
var ee = 0;
var En = class {
  constructor(t) {
    this._getKey = t;
    this._array = [];
    this._insertedValues = [];
    this._flushInsertedTask = new Jt();
    this._isFlushingInserted = false;
    this._deletedIndices = [];
    this._flushDeletedTask = new Jt();
    this._isFlushingDeleted = false;
  }
  clear() {
    this._array.length = 0, this._insertedValues.length = 0, this._flushInsertedTask.clear(), this._isFlushingInserted = false, this._deletedIndices.length = 0, this._flushDeletedTask.clear(), this._isFlushingDeleted = false;
  }
  insert(t) {
    this._flushCleanupDeleted(), this._insertedValues.length === 0 && this._flushInsertedTask.enqueue(() => this._flushInserted()), this._insertedValues.push(t);
  }
  _flushInserted() {
    let t = this._insertedValues.sort((n, o2) => this._getKey(n) - this._getKey(o2)), e = 0, i = 0, r = new Array(this._array.length + this._insertedValues.length);
    for (let n = 0; n < r.length; n++) i >= this._array.length || this._getKey(t[e]) <= this._getKey(this._array[i]) ? (r[n] = t[e], e++) : r[n] = this._array[i++];
    this._array = r, this._insertedValues.length = 0;
  }
  _flushCleanupInserted() {
    !this._isFlushingInserted && this._insertedValues.length > 0 && this._flushInsertedTask.flush();
  }
  delete(t) {
    if (this._flushCleanupInserted(), this._array.length === 0) return false;
    let e = this._getKey(t);
    if (e === void 0 || (ee = this._search(e), ee === -1) || this._getKey(this._array[ee]) !== e) return false;
    do
      if (this._array[ee] === t) return this._deletedIndices.length === 0 && this._flushDeletedTask.enqueue(() => this._flushDeleted()), this._deletedIndices.push(ee), true;
    while (++ee < this._array.length && this._getKey(this._array[ee]) === e);
    return false;
  }
  _flushDeleted() {
    this._isFlushingDeleted = true;
    let t = this._deletedIndices.sort((n, o2) => n - o2), e = 0, i = new Array(this._array.length - t.length), r = 0;
    for (let n = 0; n < this._array.length; n++) t[e] === n ? e++ : i[r++] = this._array[n];
    this._array = i, this._deletedIndices.length = 0, this._isFlushingDeleted = false;
  }
  _flushCleanupDeleted() {
    !this._isFlushingDeleted && this._deletedIndices.length > 0 && this._flushDeletedTask.flush();
  }
  *getKeyIterator(t) {
    if (this._flushCleanupInserted(), this._flushCleanupDeleted(), this._array.length !== 0 && (ee = this._search(t), !(ee < 0 || ee >= this._array.length) && this._getKey(this._array[ee]) === t)) do
      yield this._array[ee];
    while (++ee < this._array.length && this._getKey(this._array[ee]) === t);
  }
  forEachByKey(t, e) {
    if (this._flushCleanupInserted(), this._flushCleanupDeleted(), this._array.length !== 0 && (ee = this._search(t), !(ee < 0 || ee >= this._array.length) && this._getKey(this._array[ee]) === t)) do
      e(this._array[ee]);
    while (++ee < this._array.length && this._getKey(this._array[ee]) === t);
  }
  values() {
    return this._flushCleanupInserted(), this._flushCleanupDeleted(), [...this._array].values();
  }
  _search(t) {
    let e = 0, i = this._array.length - 1;
    for (; i >= e; ) {
      let r = e + i >> 1, n = this._getKey(this._array[r]);
      if (n > t) i = r - 1;
      else if (n < t) e = r + 1;
      else {
        for (; r > 0 && this._getKey(this._array[r - 1]) === t; ) r--;
        return r;
      }
    }
    return e;
  }
};
var Us = 0;
var yl = 0;
var Tn = class extends D {
  constructor() {
    super();
    this._decorations = new En((e) => e?.marker.line);
    this._onDecorationRegistered = this._register(new v());
    this.onDecorationRegistered = this._onDecorationRegistered.event;
    this._onDecorationRemoved = this._register(new v());
    this.onDecorationRemoved = this._onDecorationRemoved.event;
    this._register(C(() => this.reset()));
  }
  get decorations() {
    return this._decorations.values();
  }
  registerDecoration(e) {
    if (e.marker.isDisposed) return;
    let i = new Ks(e);
    if (i) {
      let r = i.marker.onDispose(() => i.dispose()), n = i.onDispose(() => {
        n.dispose(), i && (this._decorations.delete(i) && this._onDecorationRemoved.fire(i), r.dispose());
      });
      this._decorations.insert(i), this._onDecorationRegistered.fire(i);
    }
    return i;
  }
  reset() {
    for (let e of this._decorations.values()) e.dispose();
    this._decorations.clear();
  }
  *getDecorationsAtCell(e, i, r) {
    let n = 0, o2 = 0;
    for (let l of this._decorations.getKeyIterator(i)) n = l.options.x ?? 0, o2 = n + (l.options.width ?? 1), e >= n && e < o2 && (!r || (l.options.layer ?? "bottom") === r) && (yield l);
  }
  forEachDecorationAtCell(e, i, r, n) {
    this._decorations.forEachByKey(i, (o2) => {
      Us = o2.options.x ?? 0, yl = Us + (o2.options.width ?? 1), e >= Us && e < yl && (!r || (o2.options.layer ?? "bottom") === r) && n(o2);
    });
  }
};
var Ks = class extends Ee {
  constructor(e) {
    super();
    this.options = e;
    this.onRenderEmitter = this.add(new v());
    this.onRender = this.onRenderEmitter.event;
    this._onDispose = this.add(new v());
    this.onDispose = this._onDispose.event;
    this._cachedBg = null;
    this._cachedFg = null;
    this.marker = e.marker, this.options.overviewRulerOptions && !this.options.overviewRulerOptions.position && (this.options.overviewRulerOptions.position = "full");
  }
  get backgroundColorRGB() {
    return this._cachedBg === null && (this.options.backgroundColor ? this._cachedBg = z.toColor(this.options.backgroundColor) : this._cachedBg = void 0), this._cachedBg;
  }
  get foregroundColorRGB() {
    return this._cachedFg === null && (this.options.foregroundColor ? this._cachedFg = z.toColor(this.options.foregroundColor) : this._cachedFg = void 0), this._cachedFg;
  }
  dispose() {
    this._onDispose.fire(), super.dispose();
  }
};
var Sc = 1e3;
var In = class {
  constructor(t, e = Sc) {
    this._renderCallback = t;
    this._debounceThresholdMS = e;
    this._lastRefreshMs = 0;
    this._additionalRefreshRequested = false;
  }
  dispose() {
    this._refreshTimeoutID && clearTimeout(this._refreshTimeoutID);
  }
  refresh(t, e, i) {
    this._rowCount = i, t = t !== void 0 ? t : 0, e = e !== void 0 ? e : this._rowCount - 1, this._rowStart = this._rowStart !== void 0 ? Math.min(this._rowStart, t) : t, this._rowEnd = this._rowEnd !== void 0 ? Math.max(this._rowEnd, e) : e;
    let r = performance.now();
    if (r - this._lastRefreshMs >= this._debounceThresholdMS) this._lastRefreshMs = r, this._innerRefresh();
    else if (!this._additionalRefreshRequested) {
      let n = r - this._lastRefreshMs, o2 = this._debounceThresholdMS - n;
      this._additionalRefreshRequested = true, this._refreshTimeoutID = window.setTimeout(() => {
        this._lastRefreshMs = performance.now(), this._innerRefresh(), this._additionalRefreshRequested = false, this._refreshTimeoutID = void 0;
      }, o2);
    }
  }
  _innerRefresh() {
    if (this._rowStart === void 0 || this._rowEnd === void 0 || this._rowCount === void 0) return;
    let t = Math.max(this._rowStart, 0), e = Math.min(this._rowEnd, this._rowCount - 1);
    this._rowStart = void 0, this._rowEnd = void 0, this._renderCallback(t, e);
  }
};
var xl = 20;
var wl = false;
var Tt = class extends D {
  constructor(e, i, r, n) {
    super();
    this._terminal = e;
    this._coreBrowserService = r;
    this._renderService = n;
    this._rowColumns = /* @__PURE__ */ new WeakMap();
    this._liveRegionLineCount = 0;
    this._charsToConsume = [];
    this._charsToAnnounce = "";
    let o2 = this._coreBrowserService.mainDocument;
    this._accessibilityContainer = o2.createElement("div"), this._accessibilityContainer.classList.add("xterm-accessibility"), this._rowContainer = o2.createElement("div"), this._rowContainer.setAttribute("role", "list"), this._rowContainer.classList.add("xterm-accessibility-tree"), this._rowElements = [];
    for (let l = 0; l < this._terminal.rows; l++) this._rowElements[l] = this._createAccessibilityTreeNode(), this._rowContainer.appendChild(this._rowElements[l]);
    if (this._topBoundaryFocusListener = (l) => this._handleBoundaryFocus(l, 0), this._bottomBoundaryFocusListener = (l) => this._handleBoundaryFocus(l, 1), this._rowElements[0].addEventListener("focus", this._topBoundaryFocusListener), this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._accessibilityContainer.appendChild(this._rowContainer), this._liveRegion = o2.createElement("div"), this._liveRegion.classList.add("live-region"), this._liveRegion.setAttribute("aria-live", "assertive"), this._accessibilityContainer.appendChild(this._liveRegion), this._liveRegionDebouncer = this._register(new In(this._renderRows.bind(this))), !this._terminal.element) throw new Error("Cannot enable accessibility before Terminal.open");
    wl ? (this._accessibilityContainer.classList.add("debug"), this._rowContainer.classList.add("debug"), this._debugRootContainer = o2.createElement("div"), this._debugRootContainer.classList.add("xterm"), this._debugRootContainer.appendChild(o2.createTextNode("------start a11y------")), this._debugRootContainer.appendChild(this._accessibilityContainer), this._debugRootContainer.appendChild(o2.createTextNode("------end a11y------")), this._terminal.element.insertAdjacentElement("afterend", this._debugRootContainer)) : this._terminal.element.insertAdjacentElement("afterbegin", this._accessibilityContainer), this._register(this._terminal.onResize((l) => this._handleResize(l.rows))), this._register(this._terminal.onRender((l) => this._refreshRows(l.start, l.end))), this._register(this._terminal.onScroll(() => this._refreshRows())), this._register(this._terminal.onA11yChar((l) => this._handleChar(l))), this._register(this._terminal.onLineFeed(() => this._handleChar(`
`))), this._register(this._terminal.onA11yTab((l) => this._handleTab(l))), this._register(this._terminal.onKey((l) => this._handleKey(l.key))), this._register(this._terminal.onBlur(() => this._clearLiveRegion())), this._register(this._renderService.onDimensionsChange(() => this._refreshRowsDimensions())), this._register(L(o2, "selectionchange", () => this._handleSelectionChange())), this._register(this._coreBrowserService.onDprChange(() => this._refreshRowsDimensions())), this._refreshRowsDimensions(), this._refreshRows(), this._register(C(() => {
      wl ? this._debugRootContainer.remove() : this._accessibilityContainer.remove(), this._rowElements.length = 0;
    }));
  }
  _handleTab(e) {
    for (let i = 0; i < e; i++) this._handleChar(" ");
  }
  _handleChar(e) {
    this._liveRegionLineCount < xl + 1 && (this._charsToConsume.length > 0 ? this._charsToConsume.shift() !== e && (this._charsToAnnounce += e) : this._charsToAnnounce += e, e === `
` && (this._liveRegionLineCount++, this._liveRegionLineCount === xl + 1 && (this._liveRegion.textContent += _i.get())));
  }
  _clearLiveRegion() {
    this._liveRegion.textContent = "", this._liveRegionLineCount = 0;
  }
  _handleKey(e) {
    this._clearLiveRegion(), /\p{Control}/u.test(e) || this._charsToConsume.push(e);
  }
  _refreshRows(e, i) {
    this._liveRegionDebouncer.refresh(e, i, this._terminal.rows);
  }
  _renderRows(e, i) {
    let r = this._terminal.buffer, n = r.lines.length.toString();
    for (let o2 = e; o2 <= i; o2++) {
      let l = r.lines.get(r.ydisp + o2), a = [], u = l?.translateToString(true, void 0, void 0, a) || "", h2 = (r.ydisp + o2 + 1).toString(), c = this._rowElements[o2];
      c && (u.length === 0 ? (c.textContent = "\xA0", this._rowColumns.set(c, [0, 1])) : (c.textContent = u, this._rowColumns.set(c, a)), c.setAttribute("aria-posinset", h2), c.setAttribute("aria-setsize", n), this._alignRowWidth(c));
    }
    this._announceCharacters();
  }
  _announceCharacters() {
    this._charsToAnnounce.length !== 0 && (this._liveRegion.textContent += this._charsToAnnounce, this._charsToAnnounce = "");
  }
  _handleBoundaryFocus(e, i) {
    let r = e.target, n = this._rowElements[i === 0 ? 1 : this._rowElements.length - 2], o2 = r.getAttribute("aria-posinset"), l = i === 0 ? "1" : `${this._terminal.buffer.lines.length}`;
    if (o2 === l || e.relatedTarget !== n) return;
    let a, u;
    if (i === 0 ? (a = r, u = this._rowElements.pop(), this._rowContainer.removeChild(u)) : (a = this._rowElements.shift(), u = r, this._rowContainer.removeChild(a)), a.removeEventListener("focus", this._topBoundaryFocusListener), u.removeEventListener("focus", this._bottomBoundaryFocusListener), i === 0) {
      let h2 = this._createAccessibilityTreeNode();
      this._rowElements.unshift(h2), this._rowContainer.insertAdjacentElement("afterbegin", h2);
    } else {
      let h2 = this._createAccessibilityTreeNode();
      this._rowElements.push(h2), this._rowContainer.appendChild(h2);
    }
    this._rowElements[0].addEventListener("focus", this._topBoundaryFocusListener), this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._terminal.scrollLines(i === 0 ? -1 : 1), this._rowElements[i === 0 ? 1 : this._rowElements.length - 2].focus(), e.preventDefault(), e.stopImmediatePropagation();
  }
  _handleSelectionChange() {
    if (this._rowElements.length === 0) return;
    let e = this._coreBrowserService.mainDocument.getSelection();
    if (!e) return;
    if (e.isCollapsed) {
      this._rowContainer.contains(e.anchorNode) && this._terminal.clearSelection();
      return;
    }
    if (!e.anchorNode || !e.focusNode) {
      console.error("anchorNode and/or focusNode are null");
      return;
    }
    let i = { node: e.anchorNode, offset: e.anchorOffset }, r = { node: e.focusNode, offset: e.focusOffset };
    if ((i.node.compareDocumentPosition(r.node) & Node.DOCUMENT_POSITION_PRECEDING || i.node === r.node && i.offset > r.offset) && ([i, r] = [r, i]), i.node.compareDocumentPosition(this._rowElements[0]) & (Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING) && (i = { node: this._rowElements[0].childNodes[0], offset: 0 }), !this._rowContainer.contains(i.node)) return;
    let n = this._rowElements.slice(-1)[0];
    if (r.node.compareDocumentPosition(n) & (Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_PRECEDING) && (r = { node: n, offset: n.textContent?.length ?? 0 }), !this._rowContainer.contains(r.node)) return;
    let o2 = ({ node: u, offset: h2 }) => {
      let c = u instanceof Text ? u.parentNode : u, d = parseInt(c?.getAttribute("aria-posinset"), 10) - 1;
      if (isNaN(d)) return console.warn("row is invalid. Race condition?"), null;
      let _2 = this._rowColumns.get(c);
      if (!_2) return console.warn("columns is null. Race condition?"), null;
      let p = h2 < _2.length ? _2[h2] : _2.slice(-1)[0] + 1;
      return p >= this._terminal.cols && (++d, p = 0), { row: d, column: p };
    }, l = o2(i), a = o2(r);
    if (!(!l || !a)) {
      if (l.row > a.row || l.row === a.row && l.column >= a.column) throw new Error("invalid range");
      this._terminal.select(l.column, l.row, (a.row - l.row) * this._terminal.cols - l.column + a.column);
    }
  }
  _handleResize(e) {
    this._rowElements[this._rowElements.length - 1].removeEventListener("focus", this._bottomBoundaryFocusListener);
    for (let i = this._rowContainer.children.length; i < this._terminal.rows; i++) this._rowElements[i] = this._createAccessibilityTreeNode(), this._rowContainer.appendChild(this._rowElements[i]);
    for (; this._rowElements.length > e; ) this._rowContainer.removeChild(this._rowElements.pop());
    this._rowElements[this._rowElements.length - 1].addEventListener("focus", this._bottomBoundaryFocusListener), this._refreshRowsDimensions();
  }
  _createAccessibilityTreeNode() {
    let e = this._coreBrowserService.mainDocument.createElement("div");
    return e.setAttribute("role", "listitem"), e.tabIndex = -1, this._refreshRowDimensions(e), e;
  }
  _refreshRowsDimensions() {
    if (this._renderService.dimensions.css.cell.height) {
      Object.assign(this._accessibilityContainer.style, { width: `${this._renderService.dimensions.css.canvas.width}px`, fontSize: `${this._terminal.options.fontSize}px` }), this._rowElements.length !== this._terminal.rows && this._handleResize(this._terminal.rows);
      for (let e = 0; e < this._terminal.rows; e++) this._refreshRowDimensions(this._rowElements[e]), this._alignRowWidth(this._rowElements[e]);
    }
  }
  _refreshRowDimensions(e) {
    e.style.height = `${this._renderService.dimensions.css.cell.height}px`;
  }
  _alignRowWidth(e) {
    e.style.transform = "";
    let i = e.getBoundingClientRect().width, r = this._rowColumns.get(e)?.slice(-1)?.[0];
    if (!r) return;
    let n = r * this._renderService.dimensions.css.cell.width;
    e.style.transform = `scaleX(${n / i})`;
  }
};
Tt = M([S(1, xt), S(2, ae), S(3, ce)], Tt);
var hi = class extends D {
  constructor(e, i, r, n, o2) {
    super();
    this._element = e;
    this._mouseService = i;
    this._renderService = r;
    this._bufferService = n;
    this._linkProviderService = o2;
    this._linkCacheDisposables = [];
    this._isMouseOut = true;
    this._wasResized = false;
    this._activeLine = -1;
    this._onShowLinkUnderline = this._register(new v());
    this.onShowLinkUnderline = this._onShowLinkUnderline.event;
    this._onHideLinkUnderline = this._register(new v());
    this.onHideLinkUnderline = this._onHideLinkUnderline.event;
    this._register(C(() => {
      Ne(this._linkCacheDisposables), this._linkCacheDisposables.length = 0, this._lastMouseEvent = void 0, this._activeProviderReplies?.clear();
    })), this._register(this._bufferService.onResize(() => {
      this._clearCurrentLink(), this._wasResized = true;
    })), this._register(L(this._element, "mouseleave", () => {
      this._isMouseOut = true, this._clearCurrentLink();
    })), this._register(L(this._element, "mousemove", this._handleMouseMove.bind(this))), this._register(L(this._element, "mousedown", this._handleMouseDown.bind(this))), this._register(L(this._element, "mouseup", this._handleMouseUp.bind(this)));
  }
  get currentLink() {
    return this._currentLink;
  }
  _handleMouseMove(e) {
    this._lastMouseEvent = e;
    let i = this._positionFromMouseEvent(e, this._element, this._mouseService);
    if (!i) return;
    this._isMouseOut = false;
    let r = e.composedPath();
    for (let n = 0; n < r.length; n++) {
      let o2 = r[n];
      if (o2.classList.contains("xterm")) break;
      if (o2.classList.contains("xterm-hover")) return;
    }
    (!this._lastBufferCell || i.x !== this._lastBufferCell.x || i.y !== this._lastBufferCell.y) && (this._handleHover(i), this._lastBufferCell = i);
  }
  _handleHover(e) {
    if (this._activeLine !== e.y || this._wasResized) {
      this._clearCurrentLink(), this._askForLink(e, false), this._wasResized = false;
      return;
    }
    this._currentLink && this._linkAtPosition(this._currentLink.link, e) || (this._clearCurrentLink(), this._askForLink(e, true));
  }
  _askForLink(e, i) {
    (!this._activeProviderReplies || !i) && (this._activeProviderReplies?.forEach((n) => {
      n?.forEach((o2) => {
        o2.link.dispose && o2.link.dispose();
      });
    }), this._activeProviderReplies = /* @__PURE__ */ new Map(), this._activeLine = e.y);
    let r = false;
    for (let [n, o2] of this._linkProviderService.linkProviders.entries()) i ? this._activeProviderReplies?.get(n) && (r = this._checkLinkProviderResult(n, e, r)) : o2.provideLinks(e.y, (l) => {
      if (this._isMouseOut) return;
      let a = l?.map((u) => ({ link: u }));
      this._activeProviderReplies?.set(n, a), r = this._checkLinkProviderResult(n, e, r), this._activeProviderReplies?.size === this._linkProviderService.linkProviders.length && this._removeIntersectingLinks(e.y, this._activeProviderReplies);
    });
  }
  _removeIntersectingLinks(e, i) {
    let r = /* @__PURE__ */ new Set();
    for (let n = 0; n < i.size; n++) {
      let o2 = i.get(n);
      if (o2) for (let l = 0; l < o2.length; l++) {
        let a = o2[l], u = a.link.range.start.y < e ? 0 : a.link.range.start.x, h2 = a.link.range.end.y > e ? this._bufferService.cols : a.link.range.end.x;
        for (let c = u; c <= h2; c++) {
          if (r.has(c)) {
            o2.splice(l--, 1);
            break;
          }
          r.add(c);
        }
      }
    }
  }
  _checkLinkProviderResult(e, i, r) {
    if (!this._activeProviderReplies) return r;
    let n = this._activeProviderReplies.get(e), o2 = false;
    for (let l = 0; l < e; l++) (!this._activeProviderReplies.has(l) || this._activeProviderReplies.get(l)) && (o2 = true);
    if (!o2 && n) {
      let l = n.find((a) => this._linkAtPosition(a.link, i));
      l && (r = true, this._handleNewLink(l));
    }
    if (this._activeProviderReplies.size === this._linkProviderService.linkProviders.length && !r) for (let l = 0; l < this._activeProviderReplies.size; l++) {
      let a = this._activeProviderReplies.get(l)?.find((u) => this._linkAtPosition(u.link, i));
      if (a) {
        r = true, this._handleNewLink(a);
        break;
      }
    }
    return r;
  }
  _handleMouseDown() {
    this._mouseDownLink = this._currentLink;
  }
  _handleMouseUp(e) {
    if (!this._currentLink) return;
    let i = this._positionFromMouseEvent(e, this._element, this._mouseService);
    i && this._mouseDownLink && Ec(this._mouseDownLink.link, this._currentLink.link) && this._linkAtPosition(this._currentLink.link, i) && this._currentLink.link.activate(e, this._currentLink.link.text);
  }
  _clearCurrentLink(e, i) {
    !this._currentLink || !this._lastMouseEvent || (!e || !i || this._currentLink.link.range.start.y >= e && this._currentLink.link.range.end.y <= i) && (this._linkLeave(this._element, this._currentLink.link, this._lastMouseEvent), this._currentLink = void 0, Ne(this._linkCacheDisposables), this._linkCacheDisposables.length = 0);
  }
  _handleNewLink(e) {
    if (!this._lastMouseEvent) return;
    let i = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);
    i && this._linkAtPosition(e.link, i) && (this._currentLink = e, this._currentLink.state = { decorations: { underline: e.link.decorations === void 0 ? true : e.link.decorations.underline, pointerCursor: e.link.decorations === void 0 ? true : e.link.decorations.pointerCursor }, isHovered: true }, this._linkHover(this._element, e.link, this._lastMouseEvent), e.link.decorations = {}, Object.defineProperties(e.link.decorations, { pointerCursor: { get: () => this._currentLink?.state?.decorations.pointerCursor, set: (r) => {
      this._currentLink?.state && this._currentLink.state.decorations.pointerCursor !== r && (this._currentLink.state.decorations.pointerCursor = r, this._currentLink.state.isHovered && this._element.classList.toggle("xterm-cursor-pointer", r));
    } }, underline: { get: () => this._currentLink?.state?.decorations.underline, set: (r) => {
      this._currentLink?.state && this._currentLink?.state?.decorations.underline !== r && (this._currentLink.state.decorations.underline = r, this._currentLink.state.isHovered && this._fireUnderlineEvent(e.link, r));
    } } }), this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((r) => {
      if (!this._currentLink) return;
      let n = r.start === 0 ? 0 : r.start + 1 + this._bufferService.buffer.ydisp, o2 = this._bufferService.buffer.ydisp + 1 + r.end;
      if (this._currentLink.link.range.start.y >= n && this._currentLink.link.range.end.y <= o2 && (this._clearCurrentLink(n, o2), this._lastMouseEvent)) {
        let l = this._positionFromMouseEvent(this._lastMouseEvent, this._element, this._mouseService);
        l && this._askForLink(l, false);
      }
    })));
  }
  _linkHover(e, i, r) {
    this._currentLink?.state && (this._currentLink.state.isHovered = true, this._currentLink.state.decorations.underline && this._fireUnderlineEvent(i, true), this._currentLink.state.decorations.pointerCursor && e.classList.add("xterm-cursor-pointer")), i.hover && i.hover(r, i.text);
  }
  _fireUnderlineEvent(e, i) {
    let r = e.range, n = this._bufferService.buffer.ydisp, o2 = this._createLinkUnderlineEvent(r.start.x - 1, r.start.y - n - 1, r.end.x, r.end.y - n - 1, void 0);
    (i ? this._onShowLinkUnderline : this._onHideLinkUnderline).fire(o2);
  }
  _linkLeave(e, i, r) {
    this._currentLink?.state && (this._currentLink.state.isHovered = false, this._currentLink.state.decorations.underline && this._fireUnderlineEvent(i, false), this._currentLink.state.decorations.pointerCursor && e.classList.remove("xterm-cursor-pointer")), i.leave && i.leave(r, i.text);
  }
  _linkAtPosition(e, i) {
    let r = e.range.start.y * this._bufferService.cols + e.range.start.x, n = e.range.end.y * this._bufferService.cols + e.range.end.x, o2 = i.y * this._bufferService.cols + i.x;
    return r <= o2 && o2 <= n;
  }
  _positionFromMouseEvent(e, i, r) {
    let n = r.getCoords(e, i, this._bufferService.cols, this._bufferService.rows);
    if (n) return { x: n[0], y: n[1] + this._bufferService.buffer.ydisp };
  }
  _createLinkUnderlineEvent(e, i, r, n, o2) {
    return { x1: e, y1: i, x2: r, y2: n, cols: this._bufferService.cols, fg: o2 };
  }
};
hi = M([S(1, Dt), S(2, ce), S(3, F), S(4, lr)], hi);
function Ec(s15, t) {
  return s15.text === t.text && s15.range.start.x === t.range.start.x && s15.range.start.y === t.range.start.y && s15.range.end.x === t.range.end.x && s15.range.end.y === t.range.end.y;
}
var yn = class extends Sn {
  constructor(e = {}) {
    super(e);
    this._linkifier = this._register(new ye());
    this.browser = tn;
    this._keyDownHandled = false;
    this._keyDownSeen = false;
    this._keyPressHandled = false;
    this._unprocessedDeadKey = false;
    this._accessibilityManager = this._register(new ye());
    this._onCursorMove = this._register(new v());
    this.onCursorMove = this._onCursorMove.event;
    this._onKey = this._register(new v());
    this.onKey = this._onKey.event;
    this._onRender = this._register(new v());
    this.onRender = this._onRender.event;
    this._onSelectionChange = this._register(new v());
    this.onSelectionChange = this._onSelectionChange.event;
    this._onTitleChange = this._register(new v());
    this.onTitleChange = this._onTitleChange.event;
    this._onBell = this._register(new v());
    this.onBell = this._onBell.event;
    this._onFocus = this._register(new v());
    this._onBlur = this._register(new v());
    this._onA11yCharEmitter = this._register(new v());
    this._onA11yTabEmitter = this._register(new v());
    this._onWillOpen = this._register(new v());
    this._setup(), this._decorationService = this._instantiationService.createInstance(Tn), this._instantiationService.setService(Be, this._decorationService), this._linkProviderService = this._instantiationService.createInstance(Qr), this._instantiationService.setService(lr, this._linkProviderService), this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(wt)), this._register(this._inputHandler.onRequestBell(() => this._onBell.fire())), this._register(this._inputHandler.onRequestRefreshRows((i) => this.refresh(i?.start ?? 0, i?.end ?? this.rows - 1))), this._register(this._inputHandler.onRequestSendFocus(() => this._reportFocus())), this._register(this._inputHandler.onRequestReset(() => this.reset())), this._register(this._inputHandler.onRequestWindowsOptionsReport((i) => this._reportWindowsOptions(i))), this._register(this._inputHandler.onColor((i) => this._handleColorEvent(i))), this._register($.forward(this._inputHandler.onCursorMove, this._onCursorMove)), this._register($.forward(this._inputHandler.onTitleChange, this._onTitleChange)), this._register($.forward(this._inputHandler.onA11yChar, this._onA11yCharEmitter)), this._register($.forward(this._inputHandler.onA11yTab, this._onA11yTabEmitter)), this._register(this._bufferService.onResize((i) => this._afterResize(i.cols, i.rows))), this._register(C(() => {
      this._customKeyEventHandler = void 0, this.element?.parentNode?.removeChild(this.element);
    }));
  }
  get linkifier() {
    return this._linkifier.value;
  }
  get onFocus() {
    return this._onFocus.event;
  }
  get onBlur() {
    return this._onBlur.event;
  }
  get onA11yChar() {
    return this._onA11yCharEmitter.event;
  }
  get onA11yTab() {
    return this._onA11yTabEmitter.event;
  }
  get onWillOpen() {
    return this._onWillOpen.event;
  }
  _handleColorEvent(e) {
    if (this._themeService) for (let i of e) {
      let r, n = "";
      switch (i.index) {
        case 256:
          r = "foreground", n = "10";
          break;
        case 257:
          r = "background", n = "11";
          break;
        case 258:
          r = "cursor", n = "12";
          break;
        default:
          r = "ansi", n = "4;" + i.index;
      }
      switch (i.type) {
        case 0:
          let o2 = U.toColorRGB(r === "ansi" ? this._themeService.colors.ansi[i.index] : this._themeService.colors[r]);
          this.coreService.triggerDataEvent(`${b.ESC}]${n};${ml(o2)}${fs.ST}`);
          break;
        case 1:
          if (r === "ansi") this._themeService.modifyColors((l) => l.ansi[i.index] = j.toColor(...i.color));
          else {
            let l = r;
            this._themeService.modifyColors((a) => a[l] = j.toColor(...i.color));
          }
          break;
        case 2:
          this._themeService.restoreColor(i.index);
          break;
      }
    }
  }
  _setup() {
    super._setup(), this._customKeyEventHandler = void 0;
  }
  get buffer() {
    return this.buffers.active;
  }
  focus() {
    this.textarea && this.textarea.focus({ preventScroll: true });
  }
  _handleScreenReaderModeOptionChange(e) {
    e ? !this._accessibilityManager.value && this._renderService && (this._accessibilityManager.value = this._instantiationService.createInstance(Tt, this)) : this._accessibilityManager.clear();
  }
  _handleTextAreaFocus(e) {
    this.coreService.decPrivateModes.sendFocus && this.coreService.triggerDataEvent(b.ESC + "[I"), this.element.classList.add("focus"), this._showCursor(), this._onFocus.fire();
  }
  blur() {
    return this.textarea?.blur();
  }
  _handleTextAreaBlur() {
    this.textarea.value = "", this.refresh(this.buffer.y, this.buffer.y), this.coreService.decPrivateModes.sendFocus && this.coreService.triggerDataEvent(b.ESC + "[O"), this.element.classList.remove("focus"), this._onBlur.fire();
  }
  _syncTextArea() {
    if (!this.textarea || !this.buffer.isCursorInViewport || this._compositionHelper.isComposing || !this._renderService) return;
    let e = this.buffer.ybase + this.buffer.y, i = this.buffer.lines.get(e);
    if (!i) return;
    let r = Math.min(this.buffer.x, this.cols - 1), n = this._renderService.dimensions.css.cell.height, o2 = i.getWidth(r), l = this._renderService.dimensions.css.cell.width * o2, a = this.buffer.y * this._renderService.dimensions.css.cell.height, u = r * this._renderService.dimensions.css.cell.width;
    this.textarea.style.left = u + "px", this.textarea.style.top = a + "px", this.textarea.style.width = l + "px", this.textarea.style.height = n + "px", this.textarea.style.lineHeight = n + "px", this.textarea.style.zIndex = "-5";
  }
  _initGlobal() {
    this._bindKeys(), this._register(L(this.element, "copy", (i) => {
      this.hasSelection() && Vs(i, this._selectionService);
    }));
    let e = (i) => qs(i, this.textarea, this.coreService, this.optionsService);
    this._register(L(this.textarea, "paste", e)), this._register(L(this.element, "paste", e)), Ss ? this._register(L(this.element, "mousedown", (i) => {
      i.button === 2 && Pn(i, this.textarea, this.screenElement, this._selectionService, this.options.rightClickSelectsWord);
    })) : this._register(L(this.element, "contextmenu", (i) => {
      Pn(i, this.textarea, this.screenElement, this._selectionService, this.options.rightClickSelectsWord);
    })), Bi && this._register(L(this.element, "auxclick", (i) => {
      i.button === 1 && Mn(i, this.textarea, this.screenElement);
    }));
  }
  _bindKeys() {
    this._register(L(this.textarea, "keyup", (e) => this._keyUp(e), true)), this._register(L(this.textarea, "keydown", (e) => this._keyDown(e), true)), this._register(L(this.textarea, "keypress", (e) => this._keyPress(e), true)), this._register(L(this.textarea, "compositionstart", () => this._compositionHelper.compositionstart())), this._register(L(this.textarea, "compositionupdate", (e) => this._compositionHelper.compositionupdate(e))), this._register(L(this.textarea, "compositionend", () => this._compositionHelper.compositionend())), this._register(L(this.textarea, "input", (e) => this._inputEvent(e), true)), this._register(this.onRender(() => this._compositionHelper.updateCompositionElements()));
  }
  open(e) {
    if (!e) throw new Error("Terminal requires a parent element.");
    if (e.isConnected || this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"), this.element?.ownerDocument.defaultView && this._coreBrowserService) {
      this.element.ownerDocument.defaultView !== this._coreBrowserService.window && (this._coreBrowserService.window = this.element.ownerDocument.defaultView);
      return;
    }
    this._document = e.ownerDocument, this.options.documentOverride && this.options.documentOverride instanceof Document && (this._document = this.optionsService.rawOptions.documentOverride), this.element = this._document.createElement("div"), this.element.dir = "ltr", this.element.classList.add("terminal"), this.element.classList.add("xterm"), e.appendChild(this.element);
    let i = this._document.createDocumentFragment();
    this._viewportElement = this._document.createElement("div"), this._viewportElement.classList.add("xterm-viewport"), i.appendChild(this._viewportElement), this.screenElement = this._document.createElement("div"), this.screenElement.classList.add("xterm-screen"), this._register(L(this.screenElement, "mousemove", (o2) => this.updateCursorStyle(o2))), this._helperContainer = this._document.createElement("div"), this._helperContainer.classList.add("xterm-helpers"), this.screenElement.appendChild(this._helperContainer), i.appendChild(this.screenElement);
    let r = this.textarea = this._document.createElement("textarea");
    this.textarea.classList.add("xterm-helper-textarea"), this.textarea.setAttribute("aria-label", mi.get()), Ts || this.textarea.setAttribute("aria-multiline", "false"), this.textarea.setAttribute("autocorrect", "off"), this.textarea.setAttribute("autocapitalize", "off"), this.textarea.setAttribute("spellcheck", "false"), this.textarea.tabIndex = 0, this._register(this.optionsService.onSpecificOptionChange("disableStdin", () => r.readOnly = this.optionsService.rawOptions.disableStdin)), this.textarea.readOnly = this.optionsService.rawOptions.disableStdin, this._coreBrowserService = this._register(this._instantiationService.createInstance(Jr, this.textarea, e.ownerDocument.defaultView ?? window, this._document ?? typeof window < "u" ? window.document : null)), this._instantiationService.setService(ae, this._coreBrowserService), this._register(L(this.textarea, "focus", (o2) => this._handleTextAreaFocus(o2))), this._register(L(this.textarea, "blur", () => this._handleTextAreaBlur())), this._helperContainer.appendChild(this.textarea), this._charSizeService = this._instantiationService.createInstance(jt, this._document, this._helperContainer), this._instantiationService.setService(nt, this._charSizeService), this._themeService = this._instantiationService.createInstance(ti), this._instantiationService.setService(Re, this._themeService), this._characterJoinerService = this._instantiationService.createInstance(ct), this._instantiationService.setService(or, this._characterJoinerService), this._renderService = this._register(this._instantiationService.createInstance(Qt, this.rows, this.screenElement)), this._instantiationService.setService(ce, this._renderService), this._register(this._renderService.onRenderedViewportChange((o2) => this._onRender.fire(o2))), this.onResize((o2) => this._renderService.resize(o2.cols, o2.rows)), this._compositionView = this._document.createElement("div"), this._compositionView.classList.add("composition-view"), this._compositionHelper = this._instantiationService.createInstance($t, this.textarea, this._compositionView), this._helperContainer.appendChild(this._compositionView), this._mouseService = this._instantiationService.createInstance(Xt), this._instantiationService.setService(Dt, this._mouseService);
    let n = this._linkifier.value = this._register(this._instantiationService.createInstance(hi, this.screenElement));
    this.element.appendChild(i);
    try {
      this._onWillOpen.fire(this.element);
    } catch {
    }
    this._renderService.hasRenderer() || this._renderService.setRenderer(this._createRenderer()), this._register(this.onCursorMove(() => {
      this._renderService.handleCursorMove(), this._syncTextArea();
    })), this._register(this.onResize(() => this._renderService.handleResize(this.cols, this.rows))), this._register(this.onBlur(() => this._renderService.handleBlur())), this._register(this.onFocus(() => this._renderService.handleFocus())), this._viewport = this._register(this._instantiationService.createInstance(zt, this.element, this.screenElement)), this._register(this._viewport.onRequestScrollLines((o2) => {
      super.scrollLines(o2, false), this.refresh(0, this.rows - 1);
    })), this._selectionService = this._register(this._instantiationService.createInstance(ei, this.element, this.screenElement, n)), this._instantiationService.setService(Qs, this._selectionService), this._register(this._selectionService.onRequestScrollLines((o2) => this.scrollLines(o2.amount, o2.suppressScrollEvent))), this._register(this._selectionService.onSelectionChange(() => this._onSelectionChange.fire())), this._register(this._selectionService.onRequestRedraw((o2) => this._renderService.handleSelectionChanged(o2.start, o2.end, o2.columnSelectMode))), this._register(this._selectionService.onLinuxMouseSelection((o2) => {
      this.textarea.value = o2, this.textarea.focus(), this.textarea.select();
    })), this._register($.any(this._onScroll.event, this._inputHandler.onScroll)(() => {
      this._selectionService.refresh(), this._viewport?.queueSync();
    })), this._register(this._instantiationService.createInstance(Gt, this.screenElement)), this._register(L(this.element, "mousedown", (o2) => this._selectionService.handleMouseDown(o2))), this.coreMouseService.areMouseEventsActive ? (this._selectionService.disable(), this.element.classList.add("enable-mouse-events")) : this._selectionService.enable(), this.options.screenReaderMode && (this._accessibilityManager.value = this._instantiationService.createInstance(Tt, this)), this._register(this.optionsService.onSpecificOptionChange("screenReaderMode", (o2) => this._handleScreenReaderModeOptionChange(o2))), this.options.overviewRuler.width && (this._overviewRulerRenderer = this._register(this._instantiationService.createInstance(bt, this._viewportElement, this.screenElement))), this.optionsService.onSpecificOptionChange("overviewRuler", (o2) => {
      !this._overviewRulerRenderer && o2 && this._viewportElement && this.screenElement && (this._overviewRulerRenderer = this._register(this._instantiationService.createInstance(bt, this._viewportElement, this.screenElement)));
    }), this._charSizeService.measure(), this.refresh(0, this.rows - 1), this._initGlobal(), this.bindMouse();
  }
  _createRenderer() {
    return this._instantiationService.createInstance(Yt, this, this._document, this.element, this.screenElement, this._viewportElement, this._helperContainer, this.linkifier);
  }
  bindMouse() {
    let e = this, i = this.element;
    function r(l) {
      let a = e._mouseService.getMouseReportCoords(l, e.screenElement);
      if (!a) return false;
      let u, h2;
      switch (l.overrideType || l.type) {
        case "mousemove":
          h2 = 32, l.buttons === void 0 ? (u = 3, l.button !== void 0 && (u = l.button < 3 ? l.button : 3)) : u = l.buttons & 1 ? 0 : l.buttons & 4 ? 1 : l.buttons & 2 ? 2 : 3;
          break;
        case "mouseup":
          h2 = 0, u = l.button < 3 ? l.button : 3;
          break;
        case "mousedown":
          h2 = 1, u = l.button < 3 ? l.button : 3;
          break;
        case "wheel":
          if (e._customWheelEventHandler && e._customWheelEventHandler(l) === false) return false;
          let c = l.deltaY;
          if (c === 0 || e.coreMouseService.consumeWheelEvent(l, e._renderService?.dimensions?.device?.cell?.height, e._coreBrowserService?.dpr) === 0) return false;
          h2 = c < 0 ? 0 : 1, u = 4;
          break;
        default:
          return false;
      }
      return h2 === void 0 || u === void 0 || u > 4 ? false : e.coreMouseService.triggerMouseEvent({ col: a.col, row: a.row, x: a.x, y: a.y, button: u, action: h2, ctrl: l.ctrlKey, alt: l.altKey, shift: l.shiftKey });
    }
    let n = { mouseup: null, wheel: null, mousedrag: null, mousemove: null }, o2 = { mouseup: (l) => (r(l), l.buttons || (this._document.removeEventListener("mouseup", n.mouseup), n.mousedrag && this._document.removeEventListener("mousemove", n.mousedrag)), this.cancel(l)), wheel: (l) => (r(l), this.cancel(l, true)), mousedrag: (l) => {
      l.buttons && r(l);
    }, mousemove: (l) => {
      l.buttons || r(l);
    } };
    this._register(this.coreMouseService.onProtocolChange((l) => {
      l ? (this.optionsService.rawOptions.logLevel === "debug" && this._logService.debug("Binding to mouse events:", this.coreMouseService.explainEvents(l)), this.element.classList.add("enable-mouse-events"), this._selectionService.disable()) : (this._logService.debug("Unbinding from mouse events."), this.element.classList.remove("enable-mouse-events"), this._selectionService.enable()), l & 8 ? n.mousemove || (i.addEventListener("mousemove", o2.mousemove), n.mousemove = o2.mousemove) : (i.removeEventListener("mousemove", n.mousemove), n.mousemove = null), l & 16 ? n.wheel || (i.addEventListener("wheel", o2.wheel, { passive: false }), n.wheel = o2.wheel) : (i.removeEventListener("wheel", n.wheel), n.wheel = null), l & 2 ? n.mouseup || (n.mouseup = o2.mouseup) : (this._document.removeEventListener("mouseup", n.mouseup), n.mouseup = null), l & 4 ? n.mousedrag || (n.mousedrag = o2.mousedrag) : (this._document.removeEventListener("mousemove", n.mousedrag), n.mousedrag = null);
    })), this.coreMouseService.activeProtocol = this.coreMouseService.activeProtocol, this._register(L(i, "mousedown", (l) => {
      if (l.preventDefault(), this.focus(), !(!this.coreMouseService.areMouseEventsActive || this._selectionService.shouldForceSelection(l))) return r(l), n.mouseup && this._document.addEventListener("mouseup", n.mouseup), n.mousedrag && this._document.addEventListener("mousemove", n.mousedrag), this.cancel(l);
    })), this._register(L(i, "wheel", (l) => {
      if (!n.wheel) {
        if (this._customWheelEventHandler && this._customWheelEventHandler(l) === false) return false;
        if (!this.buffer.hasScrollback) {
          if (l.deltaY === 0) return false;
          if (e.coreMouseService.consumeWheelEvent(l, e._renderService?.dimensions?.device?.cell?.height, e._coreBrowserService?.dpr) === 0) return this.cancel(l, true);
          let h2 = b.ESC + (this.coreService.decPrivateModes.applicationCursorKeys ? "O" : "[") + (l.deltaY < 0 ? "A" : "B");
          return this.coreService.triggerDataEvent(h2, true), this.cancel(l, true);
        }
      }
    }, { passive: false }));
  }
  refresh(e, i) {
    this._renderService?.refreshRows(e, i);
  }
  updateCursorStyle(e) {
    this._selectionService?.shouldColumnSelect(e) ? this.element.classList.add("column-select") : this.element.classList.remove("column-select");
  }
  _showCursor() {
    this.coreService.isCursorInitialized || (this.coreService.isCursorInitialized = true, this.refresh(this.buffer.y, this.buffer.y));
  }
  scrollLines(e, i) {
    this._viewport ? this._viewport.scrollLines(e) : super.scrollLines(e, i), this.refresh(0, this.rows - 1);
  }
  scrollPages(e) {
    this.scrollLines(e * (this.rows - 1));
  }
  scrollToTop() {
    this.scrollLines(-this._bufferService.buffer.ydisp);
  }
  scrollToBottom(e) {
    e && this._viewport ? this._viewport.scrollToLine(this.buffer.ybase, true) : this.scrollLines(this._bufferService.buffer.ybase - this._bufferService.buffer.ydisp);
  }
  scrollToLine(e) {
    let i = e - this._bufferService.buffer.ydisp;
    i !== 0 && this.scrollLines(i);
  }
  paste(e) {
    Cn(e, this.textarea, this.coreService, this.optionsService);
  }
  attachCustomKeyEventHandler(e) {
    this._customKeyEventHandler = e;
  }
  attachCustomWheelEventHandler(e) {
    this._customWheelEventHandler = e;
  }
  registerLinkProvider(e) {
    return this._linkProviderService.registerLinkProvider(e);
  }
  registerCharacterJoiner(e) {
    if (!this._characterJoinerService) throw new Error("Terminal must be opened first");
    let i = this._characterJoinerService.register(e);
    return this.refresh(0, this.rows - 1), i;
  }
  deregisterCharacterJoiner(e) {
    if (!this._characterJoinerService) throw new Error("Terminal must be opened first");
    this._characterJoinerService.deregister(e) && this.refresh(0, this.rows - 1);
  }
  get markers() {
    return this.buffer.markers;
  }
  registerMarker(e) {
    return this.buffer.addMarker(this.buffer.ybase + this.buffer.y + e);
  }
  registerDecoration(e) {
    return this._decorationService.registerDecoration(e);
  }
  hasSelection() {
    return this._selectionService ? this._selectionService.hasSelection : false;
  }
  select(e, i, r) {
    this._selectionService.setSelection(e, i, r);
  }
  getSelection() {
    return this._selectionService ? this._selectionService.selectionText : "";
  }
  getSelectionPosition() {
    if (!(!this._selectionService || !this._selectionService.hasSelection)) return { start: { x: this._selectionService.selectionStart[0], y: this._selectionService.selectionStart[1] }, end: { x: this._selectionService.selectionEnd[0], y: this._selectionService.selectionEnd[1] } };
  }
  clearSelection() {
    this._selectionService?.clearSelection();
  }
  selectAll() {
    this._selectionService?.selectAll();
  }
  selectLines(e, i) {
    this._selectionService?.selectLines(e, i);
  }
  _keyDown(e) {
    if (this._keyDownHandled = false, this._keyDownSeen = true, this._customKeyEventHandler && this._customKeyEventHandler(e) === false) return false;
    let i = this.browser.isMac && this.options.macOptionIsMeta && e.altKey;
    if (!i && !this._compositionHelper.keydown(e)) return this.options.scrollOnUserInput && this.buffer.ybase !== this.buffer.ydisp && this.scrollToBottom(true), false;
    !i && (e.key === "Dead" || e.key === "AltGraph") && (this._unprocessedDeadKey = true);
    let r = Il(e, this.coreService.decPrivateModes.applicationCursorKeys, this.browser.isMac, this.options.macOptionIsMeta);
    if (this.updateCursorStyle(e), r.type === 3 || r.type === 2) {
      let n = this.rows - 1;
      return this.scrollLines(r.type === 2 ? -n : n), this.cancel(e, true);
    }
    if (r.type === 1 && this.selectAll(), this._isThirdLevelShift(this.browser, e) || (r.cancel && this.cancel(e, true), !r.key) || e.key && !e.ctrlKey && !e.altKey && !e.metaKey && e.key.length === 1 && e.key.charCodeAt(0) >= 65 && e.key.charCodeAt(0) <= 90) return true;
    if (this._unprocessedDeadKey) return this._unprocessedDeadKey = false, true;
    if ((r.key === b.ETX || r.key === b.CR) && (this.textarea.value = ""), this._onKey.fire({ key: r.key, domEvent: e }), this._showCursor(), this.coreService.triggerDataEvent(r.key, true), !this.optionsService.rawOptions.screenReaderMode || e.altKey || e.ctrlKey) return this.cancel(e, true);
    this._keyDownHandled = true;
  }
  _isThirdLevelShift(e, i) {
    let r = e.isMac && !this.options.macOptionIsMeta && i.altKey && !i.ctrlKey && !i.metaKey || e.isWindows && i.altKey && i.ctrlKey && !i.metaKey || e.isWindows && i.getModifierState("AltGraph");
    return i.type === "keypress" ? r : r && (!i.keyCode || i.keyCode > 47);
  }
  _keyUp(e) {
    this._keyDownSeen = false, !(this._customKeyEventHandler && this._customKeyEventHandler(e) === false) && (Tc(e) || this.focus(), this.updateCursorStyle(e), this._keyPressHandled = false);
  }
  _keyPress(e) {
    let i;
    if (this._keyPressHandled = false, this._keyDownHandled || this._customKeyEventHandler && this._customKeyEventHandler(e) === false) return false;
    if (this.cancel(e), e.charCode) i = e.charCode;
    else if (e.which === null || e.which === void 0) i = e.keyCode;
    else if (e.which !== 0 && e.charCode !== 0) i = e.which;
    else return false;
    return !i || (e.altKey || e.ctrlKey || e.metaKey) && !this._isThirdLevelShift(this.browser, e) ? false : (i = String.fromCharCode(i), this._onKey.fire({ key: i, domEvent: e }), this._showCursor(), this.coreService.triggerDataEvent(i, true), this._keyPressHandled = true, this._unprocessedDeadKey = false, true);
  }
  _inputEvent(e) {
    if (e.data && e.inputType === "insertText" && (!e.composed || !this._keyDownSeen) && !this.optionsService.rawOptions.screenReaderMode) {
      if (this._keyPressHandled) return false;
      this._unprocessedDeadKey = false;
      let i = e.data;
      return this.coreService.triggerDataEvent(i, true), this.cancel(e), true;
    }
    return false;
  }
  resize(e, i) {
    if (e === this.cols && i === this.rows) {
      this._charSizeService && !this._charSizeService.hasValidSize && this._charSizeService.measure();
      return;
    }
    super.resize(e, i);
  }
  _afterResize(e, i) {
    this._charSizeService?.measure();
  }
  clear() {
    if (!(this.buffer.ybase === 0 && this.buffer.y === 0)) {
      this.buffer.clearAllMarkers(), this.buffer.lines.set(0, this.buffer.lines.get(this.buffer.ybase + this.buffer.y)), this.buffer.lines.length = 1, this.buffer.ydisp = 0, this.buffer.ybase = 0, this.buffer.y = 0;
      for (let e = 1; e < this.rows; e++) this.buffer.lines.push(this.buffer.getBlankLine(X));
      this._onScroll.fire({ position: this.buffer.ydisp }), this.refresh(0, this.rows - 1);
    }
  }
  reset() {
    this.options.rows = this.rows, this.options.cols = this.cols;
    let e = this._customKeyEventHandler;
    this._setup(), super.reset(), this._selectionService?.reset(), this._decorationService.reset(), this._customKeyEventHandler = e, this.refresh(0, this.rows - 1);
  }
  clearTextureAtlas() {
    this._renderService?.clearTextureAtlas();
  }
  _reportFocus() {
    this.element?.classList.contains("focus") ? this.coreService.triggerDataEvent(b.ESC + "[I") : this.coreService.triggerDataEvent(b.ESC + "[O");
  }
  _reportWindowsOptions(e) {
    if (this._renderService) switch (e) {
      case 0:
        let i = this._renderService.dimensions.css.canvas.width.toFixed(0), r = this._renderService.dimensions.css.canvas.height.toFixed(0);
        this.coreService.triggerDataEvent(`${b.ESC}[4;${r};${i}t`);
        break;
      case 1:
        let n = this._renderService.dimensions.css.cell.width.toFixed(0), o2 = this._renderService.dimensions.css.cell.height.toFixed(0);
        this.coreService.triggerDataEvent(`${b.ESC}[6;${o2};${n}t`);
        break;
    }
  }
  cancel(e, i) {
    if (!(!this.options.cancelEvents && !i)) return e.preventDefault(), e.stopPropagation(), false;
  }
};
function Tc(s15) {
  return s15.keyCode === 16 || s15.keyCode === 17 || s15.keyCode === 18;
}
var xn = class {
  constructor() {
    this._addons = [];
  }
  dispose() {
    for (let t = this._addons.length - 1; t >= 0; t--) this._addons[t].instance.dispose();
  }
  loadAddon(t, e) {
    let i = { instance: e, dispose: e.dispose, isDisposed: false };
    this._addons.push(i), e.dispose = () => this._wrappedAddonDispose(i), e.activate(t);
  }
  _wrappedAddonDispose(t) {
    if (t.isDisposed) return;
    let e = -1;
    for (let i = 0; i < this._addons.length; i++) if (this._addons[i] === t) {
      e = i;
      break;
    }
    if (e === -1) throw new Error("Could not dispose an addon that has not been loaded");
    t.isDisposed = true, t.dispose.apply(t.instance), this._addons.splice(e, 1);
  }
};
var wn = class {
  constructor(t) {
    this._line = t;
  }
  get isWrapped() {
    return this._line.isWrapped;
  }
  get length() {
    return this._line.length;
  }
  getCell(t, e) {
    if (!(t < 0 || t >= this._line.length)) return e ? (this._line.loadCell(t, e), e) : this._line.loadCell(t, new q());
  }
  translateToString(t, e, i) {
    return this._line.translateToString(t, e, i);
  }
};
var Ji = class {
  constructor(t, e) {
    this._buffer = t;
    this.type = e;
  }
  init(t) {
    return this._buffer = t, this;
  }
  get cursorY() {
    return this._buffer.y;
  }
  get cursorX() {
    return this._buffer.x;
  }
  get viewportY() {
    return this._buffer.ydisp;
  }
  get baseY() {
    return this._buffer.ybase;
  }
  get length() {
    return this._buffer.lines.length;
  }
  getLine(t) {
    let e = this._buffer.lines.get(t);
    if (e) return new wn(e);
  }
  getNullCell() {
    return new q();
  }
};
var Dn = class extends D {
  constructor(e) {
    super();
    this._core = e;
    this._onBufferChange = this._register(new v());
    this.onBufferChange = this._onBufferChange.event;
    this._normal = new Ji(this._core.buffers.normal, "normal"), this._alternate = new Ji(this._core.buffers.alt, "alternate"), this._core.buffers.onBufferActivate(() => this._onBufferChange.fire(this.active));
  }
  get active() {
    if (this._core.buffers.active === this._core.buffers.normal) return this.normal;
    if (this._core.buffers.active === this._core.buffers.alt) return this.alternate;
    throw new Error("Active buffer is neither normal nor alternate");
  }
  get normal() {
    return this._normal.init(this._core.buffers.normal);
  }
  get alternate() {
    return this._alternate.init(this._core.buffers.alt);
  }
};
var Rn = class {
  constructor(t) {
    this._core = t;
  }
  registerCsiHandler(t, e) {
    return this._core.registerCsiHandler(t, (i) => e(i.toArray()));
  }
  addCsiHandler(t, e) {
    return this.registerCsiHandler(t, e);
  }
  registerDcsHandler(t, e) {
    return this._core.registerDcsHandler(t, (i, r) => e(i, r.toArray()));
  }
  addDcsHandler(t, e) {
    return this.registerDcsHandler(t, e);
  }
  registerEscHandler(t, e) {
    return this._core.registerEscHandler(t, e);
  }
  addEscHandler(t, e) {
    return this.registerEscHandler(t, e);
  }
  registerOscHandler(t, e) {
    return this._core.registerOscHandler(t, e);
  }
  addOscHandler(t, e) {
    return this.registerOscHandler(t, e);
  }
};
var Ln = class {
  constructor(t) {
    this._core = t;
  }
  register(t) {
    this._core.unicodeService.register(t);
  }
  get versions() {
    return this._core.unicodeService.versions;
  }
  get activeVersion() {
    return this._core.unicodeService.activeVersion;
  }
  set activeVersion(t) {
    this._core.unicodeService.activeVersion = t;
  }
};
var Ic = ["cols", "rows"];
var Ue = 0;
var Dl = class extends D {
  constructor(t) {
    super(), this._core = this._register(new yn(t)), this._addonManager = this._register(new xn()), this._publicOptions = { ...this._core.options };
    let e = (r) => this._core.options[r], i = (r, n) => {
      this._checkReadonlyOptions(r), this._core.options[r] = n;
    };
    for (let r in this._core.options) {
      let n = { get: e.bind(this, r), set: i.bind(this, r) };
      Object.defineProperty(this._publicOptions, r, n);
    }
  }
  _checkReadonlyOptions(t) {
    if (Ic.includes(t)) throw new Error(`Option "${t}" can only be set in the constructor`);
  }
  _checkProposedApi() {
    if (!this._core.optionsService.rawOptions.allowProposedApi) throw new Error("You must set the allowProposedApi option to true to use proposed API");
  }
  get onBell() {
    return this._core.onBell;
  }
  get onBinary() {
    return this._core.onBinary;
  }
  get onCursorMove() {
    return this._core.onCursorMove;
  }
  get onData() {
    return this._core.onData;
  }
  get onKey() {
    return this._core.onKey;
  }
  get onLineFeed() {
    return this._core.onLineFeed;
  }
  get onRender() {
    return this._core.onRender;
  }
  get onResize() {
    return this._core.onResize;
  }
  get onScroll() {
    return this._core.onScroll;
  }
  get onSelectionChange() {
    return this._core.onSelectionChange;
  }
  get onTitleChange() {
    return this._core.onTitleChange;
  }
  get onWriteParsed() {
    return this._core.onWriteParsed;
  }
  get element() {
    return this._core.element;
  }
  get parser() {
    return this._parser || (this._parser = new Rn(this._core)), this._parser;
  }
  get unicode() {
    return this._checkProposedApi(), new Ln(this._core);
  }
  get textarea() {
    return this._core.textarea;
  }
  get rows() {
    return this._core.rows;
  }
  get cols() {
    return this._core.cols;
  }
  get buffer() {
    return this._buffer || (this._buffer = this._register(new Dn(this._core))), this._buffer;
  }
  get markers() {
    return this._checkProposedApi(), this._core.markers;
  }
  get modes() {
    let t = this._core.coreService.decPrivateModes, e = "none";
    switch (this._core.coreMouseService.activeProtocol) {
      case "X10":
        e = "x10";
        break;
      case "VT200":
        e = "vt200";
        break;
      case "DRAG":
        e = "drag";
        break;
      case "ANY":
        e = "any";
        break;
    }
    return { applicationCursorKeysMode: t.applicationCursorKeys, applicationKeypadMode: t.applicationKeypad, bracketedPasteMode: t.bracketedPasteMode, insertMode: this._core.coreService.modes.insertMode, mouseTrackingMode: e, originMode: t.origin, reverseWraparoundMode: t.reverseWraparound, sendFocusMode: t.sendFocus, synchronizedOutputMode: t.synchronizedOutput, wraparoundMode: t.wraparound };
  }
  get options() {
    return this._publicOptions;
  }
  set options(t) {
    for (let e in t) this._publicOptions[e] = t[e];
  }
  blur() {
    this._core.blur();
  }
  focus() {
    this._core.focus();
  }
  input(t, e = true) {
    this._core.input(t, e);
  }
  resize(t, e) {
    this._verifyIntegers(t, e), this._core.resize(t, e);
  }
  open(t) {
    this._core.open(t);
  }
  attachCustomKeyEventHandler(t) {
    this._core.attachCustomKeyEventHandler(t);
  }
  attachCustomWheelEventHandler(t) {
    this._core.attachCustomWheelEventHandler(t);
  }
  registerLinkProvider(t) {
    return this._core.registerLinkProvider(t);
  }
  registerCharacterJoiner(t) {
    return this._checkProposedApi(), this._core.registerCharacterJoiner(t);
  }
  deregisterCharacterJoiner(t) {
    this._checkProposedApi(), this._core.deregisterCharacterJoiner(t);
  }
  registerMarker(t = 0) {
    return this._verifyIntegers(t), this._core.registerMarker(t);
  }
  registerDecoration(t) {
    return this._checkProposedApi(), this._verifyPositiveIntegers(t.x ?? 0, t.width ?? 0, t.height ?? 0), this._core.registerDecoration(t);
  }
  hasSelection() {
    return this._core.hasSelection();
  }
  select(t, e, i) {
    this._verifyIntegers(t, e, i), this._core.select(t, e, i);
  }
  getSelection() {
    return this._core.getSelection();
  }
  getSelectionPosition() {
    return this._core.getSelectionPosition();
  }
  clearSelection() {
    this._core.clearSelection();
  }
  selectAll() {
    this._core.selectAll();
  }
  selectLines(t, e) {
    this._verifyIntegers(t, e), this._core.selectLines(t, e);
  }
  dispose() {
    super.dispose();
  }
  scrollLines(t) {
    this._verifyIntegers(t), this._core.scrollLines(t);
  }
  scrollPages(t) {
    this._verifyIntegers(t), this._core.scrollPages(t);
  }
  scrollToTop() {
    this._core.scrollToTop();
  }
  scrollToBottom() {
    this._core.scrollToBottom();
  }
  scrollToLine(t) {
    this._verifyIntegers(t), this._core.scrollToLine(t);
  }
  clear() {
    this._core.clear();
  }
  write(t, e) {
    this._core.write(t, e);
  }
  writeln(t, e) {
    this._core.write(t), this._core.write(`\r
`, e);
  }
  paste(t) {
    this._core.paste(t);
  }
  refresh(t, e) {
    this._verifyIntegers(t, e), this._core.refresh(t, e);
  }
  reset() {
    this._core.reset();
  }
  clearTextureAtlas() {
    this._core.clearTextureAtlas();
  }
  loadAddon(t) {
    this._addonManager.loadAddon(this, t);
  }
  static get strings() {
    return { get promptLabel() {
      return mi.get();
    }, set promptLabel(t) {
      mi.set(t);
    }, get tooMuchOutput() {
      return _i.get();
    }, set tooMuchOutput(t) {
      _i.set(t);
    } };
  }
  _verifyIntegers(...t) {
    for (Ue of t) if (Ue === 1 / 0 || isNaN(Ue) || Ue % 1 !== 0) throw new Error("This API only accepts integers");
  }
  _verifyPositiveIntegers(...t) {
    for (Ue of t) if (Ue && (Ue === 1 / 0 || isNaN(Ue) || Ue % 1 !== 0 || Ue < 0)) throw new Error("This API only accepts positive integers");
  }
};

// ../node_modules/@xterm/addon-fit/lib/addon-fit.mjs
var h = 2;
var _ = 1;
var o = class {
  activate(e) {
    this._terminal = e;
  }
  dispose() {
  }
  fit() {
    let e = this.proposeDimensions();
    if (!e || !this._terminal || isNaN(e.cols) || isNaN(e.rows)) return;
    let t = this._terminal._core;
    (this._terminal.rows !== e.rows || this._terminal.cols !== e.cols) && (t._renderService.clear(), this._terminal.resize(e.cols, e.rows));
  }
  proposeDimensions() {
    if (!this._terminal || !this._terminal.element || !this._terminal.element.parentElement) return;
    let t = this._terminal._core._renderService.dimensions;
    if (t.css.cell.width === 0 || t.css.cell.height === 0) return;
    let s15 = this._terminal.options.scrollback === 0 ? 0 : this._terminal.options.overviewRuler?.width || 14, r = window.getComputedStyle(this._terminal.element.parentElement), l = parseInt(r.getPropertyValue("height")), a = Math.max(0, parseInt(r.getPropertyValue("width"))), i = window.getComputedStyle(this._terminal.element), n = { top: parseInt(i.getPropertyValue("padding-top")), bottom: parseInt(i.getPropertyValue("padding-bottom")), right: parseInt(i.getPropertyValue("padding-right")), left: parseInt(i.getPropertyValue("padding-left")) }, m = n.top + n.bottom, d = n.right + n.left, c = l - m, p = a - d - s15;
    return { cols: Math.max(h, Math.floor(p / t.css.cell.width)), rows: Math.max(_, Math.floor(c / t.css.cell.height)) };
  }
};

// src/index.ts
var top_addon;
var top_term;
function top_call_fit() {
  const rows_before = top_term.rows;
  top_addon.fit();
  const rows_after = top_term.rows;
  const rows_after_refresh = top_term.rows;
  console.log({ rows_before, rows_after, rows_after_refresh });
}
function create_terminal(selector, asterix) {
  const term = new Dl();
  top_term = term;
  const fitAddon = new o();
  top_addon = fitAddon;
  function call_fit() {
    const rows_before = term.rows;
    const rows_after = term.rows;
    term.refresh(0, 1e3);
    const rows_after_refresh = term.rows;
    console.log({ rows_before, rows_after, rows_after_refresh });
  }
  term.loadAddon(fitAddon);
  const container = document.querySelector(selector);
  term.open(container);
  const initialSize = term.cols && term.rows ? { cols: term.cols, rows: term.rows } : null;
  if (initialSize) {
    term.write(`\r
Terminal size: ${initialSize.cols} cols x ${initialSize.rows} rows\r
`);
  }
  window.addEventListener("resize", call_fit);
  setInterval(call_fit, 1e3);
  const resizeObserver = new ResizeObserver(call_fit);
  resizeObserver.observe(container);
  term.write("*");
  term.onResize(({ rows, cols }) => {
    console.log(`resize ${rows} , ${cols}`);
    term.write(`\r
[Resize] New size: ${cols} cols x ${rows} rows\r
`);
  });
  for (let i = 0; i < 40; i++) {
    for (let j2 = 0; j2 < i; j2++)
      term.write(`${asterix}${asterix}`);
    term.write("\r\n");
  }
}
function make_toggle(id) {
  return function() {
    const element = document.body.querySelector(`#xterm${id}`);
    if (!element) return;
    const current = window.getComputedStyle(element).display;
    element.style.display = current === "none" ? "flex" : "none";
  };
}
function doit() {
  document.getElementById("1")?.addEventListener("click", make_toggle("1"));
  document.getElementById("2")?.addEventListener("click", make_toggle("2"));
  document.getElementById("fit")?.addEventListener("click", top_call_fit);
  create_terminal("#xterm1", "1");
}
doit();
/*! Bundled license information:

@xterm/xterm/lib/xterm.mjs:
@xterm/addon-fit/lib/addon-fit.mjs:
  (**
   * Copyright (c) 2014-2024 The xterm.js authors. All rights reserved.
   * @license MIT
   *
   * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
   * @license MIT
   *
   * Originally forked from (with the author's permission):
   *   Fabrice Bellard's javascript vt100 for jslinux:
   *   http://bellard.org/jslinux/
   *   Copyright (c) 2011 Fabrice Bellard
   *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9Mb2NhbGl6YWJsZVN0cmluZ3MudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9DbGlwYm9hcmQudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2lucHV0L1RleHREZWNvZGVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vYnVmZmVyL0NlbGxEYXRhLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlUmVnaXN0cnkudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvT3NjTGlua1Byb3ZpZGVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vZXJyb3JzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2FycmF5c0ZpbmQudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vYXJyYXlzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2NvbGxlY3Rpb25zLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL21hcC50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2NvbW1vbi9mdW5jdGlvbmFsLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2l0ZXJhdG9yLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2Jyb3dzZXIvd2luZG93LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2xpbmtlZExpc3QudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vc3RvcHdhdGNoLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2V2ZW50LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9icm93c2VyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL3BsYXRmb3JtLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9jYW5JVXNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2tleUNvZGVzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL2tleWJpbmRpbmdzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9rZXlib2FyZEV2ZW50LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9pZnJhbWUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL21vdXNlRXZlbnQudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vY2FuY2VsbGF0aW9uLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL3N5bWJvbHMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vYXN5bmMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vc3RyaW5ncy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2NvbW1vbi9oYXNoLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9kb20udHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL2Zhc3REb21Ob2RlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci9nbG9iYWxQb2ludGVyTW92ZU1vbml0b3IudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9jb21tb24vZGVjb3JhdG9ycy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2Jyb3dzZXIvdG91Y2gudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL3VpL3dpZGdldC50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL3Njcm9sbGJhckFycm93LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvY29tbW9uL3Njcm9sbGFibGUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL3VpL3Njcm9sbGJhci9zY3JvbGxiYXJWaXNpYmlsaXR5Q29udHJvbGxlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy92cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL2Fic3RyYWN0U2Nyb2xsYmFyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvc2Nyb2xsYmFyU3RhdGUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL3VpL3Njcm9sbGJhci9ob3Jpem9udGFsU2Nyb2xsYmFyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvdmVydGljYWxTY3JvbGxiYXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvdnMvYmFzZS9icm93c2VyL3VpL3Njcm9sbGJhci9zY3JvbGxhYmxlRWxlbWVudC50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL1ZpZXdwb3J0LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvZGVjb3JhdGlvbnMvQnVmZmVyRGVjb3JhdGlvblJlbmRlcmVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvZGVjb3JhdGlvbnMvQ29sb3Jab25lU3RvcmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9kZWNvcmF0aW9ucy9PdmVydmlld1J1bGVyUmVuZGVyZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvaW5wdXQvQ29tcG9zaXRpb25IZWxwZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL0NvbG9yLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ2hhcmFjdGVySm9pbmVyU2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL3JlbmRlcmVyL3NoYXJlZC9SZW5kZXJlclV0aWxzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyUm93RmFjdG9yeS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL3JlbmRlcmVyL2RvbS9XaWR0aENhY2hlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvc2hhcmVkL1NlbGVjdGlvblJlbmRlck1vZGVsLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ2hhclNpemVTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvQ29yZUJyb3dzZXJTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvTGlua1Byb3ZpZGVyU2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL2lucHV0L01vdXNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvTW91c2VTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvUmVuZGVyRGVib3VuY2VyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9QbGF0Zm9ybS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vVGFza1F1ZXVlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvc2VydmljZXMvUmVuZGVyU2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL2lucHV0L01vdmVUb0NlbGwudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9zZWxlY3Rpb24vU2VsZWN0aW9uTW9kZWwudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXJSYW5nZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL3NlcnZpY2VzL1NlbGVjdGlvblNlcnZpY2UudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL011bHRpS2V5TWFwLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvQ29sb3JDb250cmFzdENhY2hlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvVHlwZXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9zZXJ2aWNlcy9UaGVtZVNlcnZpY2UudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Mb2dTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9DaXJjdWxhckxpc3QudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyUmVmbG93LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvTWFya2VyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9kYXRhL0NoYXJzZXRzLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9idWZmZXIvQnVmZmVyU2V0LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9CdWZmZXJTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9PcHRpb25zU2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vQ2xvbmUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL0NvcmVTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9Db3JlTW91c2VTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9pbnB1dC9Vbmljb2RlVjYudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL1VuaWNvZGVTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vV2luZG93c01vZGUudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9QYXJhbXMudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9Pc2NQYXJzZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9EY3NQYXJzZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3BhcnNlci9Fc2NhcGVTZXF1ZW5jZVBhcnNlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vaW5wdXQvWFBhcnNlQ29sb3IudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL0lucHV0SGFuZGxlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vaW5wdXQvV3JpdGVCdWZmZXIudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL3NlcnZpY2VzL09zY0xpbmtTZXJ2aWNlLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9Db3JlVGVybWluYWwudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvY29tbW9uL2lucHV0L0tleWJvYXJkLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9Tb3J0ZWRMaXN0LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9zZXJ2aWNlcy9EZWNvcmF0aW9uU2VydmljZS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL1RpbWVCYXNlZERlYm91bmNlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9icm93c2VyL0FjY2Vzc2liaWxpdHlNYW5hZ2VyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvTGlua2lmaWVyLnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2Jyb3dzZXIvQ29yZUJyb3dzZXJUZXJtaW5hbC50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vcHVibGljL0FkZG9uTWFuYWdlci50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vcHVibGljL0J1ZmZlckxpbmVBcGlWaWV3LnRzIiwgIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9AeHRlcm0veHRlcm0vc3JjL2NvbW1vbi9wdWJsaWMvQnVmZmVyQXBpVmlldy50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vcHVibGljL0J1ZmZlck5hbWVzcGFjZUFwaS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vcHVibGljL1BhcnNlckFwaS50cyIsICIuLi8uLi8uLi9ub2RlX21vZHVsZXMvQHh0ZXJtL3h0ZXJtL3NyYy9jb21tb24vcHVibGljL1VuaWNvZGVBcGkudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS94dGVybS9zcmMvYnJvd3Nlci9wdWJsaWMvVGVybWluYWwudHMiLCAiLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0B4dGVybS9hZGRvbi1maXQvc3JjL0ZpdEFkZG9uLnRzIiwgIi4uLy4uL3NyYy9pbmRleC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vLyBUaGlzIGZpbGUgY29udGFpbnMgc3RyaW5ncyB0aGF0IGdldCBleHBvcnRlZCBpbiB0aGUgQVBJIHNvIHRoZXkgY2FuIGJlIGxvY2FsaXplZFxuXG5sZXQgcHJvbXB0TGFiZWxJbnRlcm5hbCA9ICdUZXJtaW5hbCBpbnB1dCc7XG5jb25zdCBwcm9tcHRMYWJlbCA9IHtcbiAgZ2V0OiAoKSA9PiBwcm9tcHRMYWJlbEludGVybmFsLFxuICBzZXQ6ICh2YWx1ZTogc3RyaW5nKSA9PiBwcm9tcHRMYWJlbEludGVybmFsID0gdmFsdWVcbn07XG5cbmxldCB0b29NdWNoT3V0cHV0SW50ZXJuYWwgPSAnVG9vIG11Y2ggb3V0cHV0IHRvIGFubm91bmNlLCBuYXZpZ2F0ZSB0byByb3dzIG1hbnVhbGx5IHRvIHJlYWQnO1xuY29uc3QgdG9vTXVjaE91dHB1dCA9IHtcbiAgZ2V0OiAoKSA9PiB0b29NdWNoT3V0cHV0SW50ZXJuYWwsXG4gIHNldDogKHZhbHVlOiBzdHJpbmcpID0+IHRvb011Y2hPdXRwdXRJbnRlcm5hbCA9IHZhbHVlXG59O1xuXG5leHBvcnQge1xuICBwcm9tcHRMYWJlbCxcbiAgdG9vTXVjaE91dHB1dFxufTtcbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElTZWxlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ29yZVNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogUHJlcGFyZXMgdGV4dCB0byBiZSBwYXN0ZWQgaW50byB0aGUgdGVybWluYWwgYnkgbm9ybWFsaXppbmcgdGhlIGxpbmUgZW5kaW5nc1xuICogQHBhcmFtIHRleHQgVGhlIHBhc3RlZCB0ZXh0IHRoYXQgbmVlZHMgcHJvY2Vzc2luZyBiZWZvcmUgaW5zZXJ0aW5nIGludG8gdGhlIHRlcm1pbmFsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmVwYXJlVGV4dEZvclRlcm1pbmFsKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xccj9cXG4vZywgJ1xccicpO1xufVxuXG4vKipcbiAqIEJyYWNrZXQgdGV4dCBmb3IgcGFzdGUsIGlmIG5lY2Vzc2FyeSwgYXMgcGVyIGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZVxuICogQHBhcmFtIHRleHQgVGhlIHBhc3RlZCB0ZXh0IHRvIGJyYWNrZXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJyYWNrZXRUZXh0Rm9yUGFzdGUodGV4dDogc3RyaW5nLCBicmFja2V0ZWRQYXN0ZU1vZGU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBpZiAoYnJhY2tldGVkUGFzdGVNb2RlKSB7XG4gICAgcmV0dXJuICdcXHgxYlsyMDB+JyArIHRleHQgKyAnXFx4MWJbMjAxfic7XG4gIH1cbiAgcmV0dXJuIHRleHQ7XG59XG5cbi8qKlxuICogQmluZHMgY29weSBmdW5jdGlvbmFsaXR5IHRvIHRoZSBnaXZlbiB0ZXJtaW5hbC5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgY29weSBldmVudCB0byBiZSBoYW5kbGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5SGFuZGxlcihldjogQ2xpcGJvYXJkRXZlbnQsIHNlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlKTogdm9pZCB7XG4gIGlmIChldi5jbGlwYm9hcmREYXRhKSB7XG4gICAgZXYuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCd0ZXh0L3BsYWluJywgc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0KTtcbiAgfVxuICAvLyBQcmV2ZW50IG9yIHRoZSBvcmlnaW5hbCB0ZXh0IHdpbGwgYmUgY29waWVkLlxuICBldi5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG4vKipcbiAqIFJlZGlyZWN0IHRoZSBjbGlwYm9hcmQncyBkYXRhIHRvIHRoZSB0ZXJtaW5hbCdzIGlucHV0IGhhbmRsZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQYXN0ZUV2ZW50KGV2OiBDbGlwYm9hcmRFdmVudCwgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQsIGNvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UpOiB2b2lkIHtcbiAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIGlmIChldi5jbGlwYm9hcmREYXRhKSB7XG4gICAgY29uc3QgdGV4dCA9IGV2LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIHBhc3RlKHRleHQsIHRleHRhcmVhLCBjb3JlU2VydmljZSwgb3B0aW9uc1NlcnZpY2UpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXN0ZSh0ZXh0OiBzdHJpbmcsIHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBjb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLCBvcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlKTogdm9pZCB7XG4gIHRleHQgPSBwcmVwYXJlVGV4dEZvclRlcm1pbmFsKHRleHQpO1xuICB0ZXh0ID0gYnJhY2tldFRleHRGb3JQYXN0ZSh0ZXh0LCBjb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlICYmIG9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuaWdub3JlQnJhY2tldGVkUGFzdGVNb2RlICE9PSB0cnVlKTtcbiAgY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0ZXh0LCB0cnVlKTtcbiAgdGV4dGFyZWEudmFsdWUgPSAnJztcbn1cblxuLyoqXG4gKiBNb3ZlcyB0aGUgdGV4dGFyZWEgdW5kZXIgdGhlIG1vdXNlIGN1cnNvciBhbmQgZm9jdXNlcyBpdC5cbiAqIEBwYXJhbSBldiBUaGUgb3JpZ2luYWwgcmlnaHQgY2xpY2sgZXZlbnQgdG8gYmUgaGFuZGxlZC5cbiAqIEBwYXJhbSB0ZXh0YXJlYSBUaGUgdGVybWluYWwncyB0ZXh0YXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXY6IE1vdXNlRXZlbnQsIHRleHRhcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBzY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXG4gIC8vIENhbGN1bGF0ZSB0ZXh0YXJlYSBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgc2NyZWVuIGVsZW1lbnRcbiAgY29uc3QgcG9zID0gc2NyZWVuRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3QgbGVmdCA9IGV2LmNsaWVudFggLSBwb3MubGVmdCAtIDEwO1xuICBjb25zdCB0b3AgPSBldi5jbGllbnRZIC0gcG9zLnRvcCAtIDEwO1xuXG4gIC8vIEJyaW5nIHRleHRhcmVhIGF0IHRoZSBjdXJzb3IgcG9zaXRpb25cbiAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMjBweCc7XG4gIHRleHRhcmVhLnN0eWxlLmhlaWdodCA9ICcyMHB4JztcbiAgdGV4dGFyZWEuc3R5bGUubGVmdCA9IGAke2xlZnR9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS50b3AgPSBgJHt0b3B9cHhgO1xuICB0ZXh0YXJlYS5zdHlsZS56SW5kZXggPSAnMTAwMCc7XG5cbiAgdGV4dGFyZWEuZm9jdXMoKTtcbn1cblxuLyoqXG4gKiBCaW5kIHRvIHJpZ2h0LWNsaWNrIGV2ZW50IGFuZCBhbGxvdyByaWdodC1jbGljayBjb3B5IGFuZCBwYXN0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2OiBNb3VzZUV2ZW50LCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsIHNlbGVjdGlvblNlcnZpY2U6IElTZWxlY3Rpb25TZXJ2aWNlLCBzaG91bGRTZWxlY3RXb3JkOiBib29sZWFuKTogdm9pZCB7XG4gIG1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IoZXYsIHRleHRhcmVhLCBzY3JlZW5FbGVtZW50KTtcblxuICBpZiAoc2hvdWxkU2VsZWN0V29yZCkge1xuICAgIHNlbGVjdGlvblNlcnZpY2UucmlnaHRDbGlja1NlbGVjdChldik7XG4gIH1cblxuICAvLyBHZXQgdGV4dGFyZWEgcmVhZHkgdG8gY29weSBmcm9tIHRoZSBjb250ZXh0IG1lbnVcbiAgdGV4dGFyZWEudmFsdWUgPSBzZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ7XG4gIHRleHRhcmVhLnNlbGVjdCgpO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuLyoqXG4gKiBQb2x5ZmlsbCAtIENvbnZlcnQgVVRGMzIgY29kZXBvaW50IGludG8gSlMgc3RyaW5nLlxuICogTm90ZTogVGhlIGJ1aWx0LWluIFN0cmluZy5mcm9tQ29kZVBvaW50IGhhcHBlbnMgdG8gYmUgbXVjaCBzbG93ZXJcbiAqICAgICAgIGR1ZSB0byBhZGRpdGlvbmFsIHNhbml0eSBjaGVja3MuIFdlIGNhbiBhdm9pZCB0aGVtIHNpbmNlXG4gKiAgICAgICB3ZSBhbHdheXMgb3BlcmF0ZSBvbiBsZWdhbCBVVEYzMiAoZ3JhbnRlZCBieSB0aGUgaW5wdXQgZGVjb2RlcnMpXG4gKiAgICAgICBhbmQgdXNlIHRoaXMgZmFzdGVyIHZlcnNpb24gaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29kZVBvaW50OiBudW1iZXIpOiBzdHJpbmcge1xuICBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVQb2ludCA+PiAxMCkgKyAweEQ4MDApICsgU3RyaW5nLmZyb21DaGFyQ29kZSgoY29kZVBvaW50ICUgMHg0MDApICsgMHhEQzAwKTtcbiAgfVxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlUG9pbnQpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgVVRGMzIgY2hhciBjb2RlcyBpbnRvIEpTIHN0cmluZy5cbiAqIEJhc2ljYWxseSB0aGUgc2FtZSBhcyBgc3RyaW5nRnJvbUNvZGVQb2ludGAgYnV0IGZvciBtdWx0aXBsZSBjb2RlcG9pbnRzXG4gKiBpbiBhIGxvb3AgKHdoaWNoIGlzIGEgbG90IGZhc3RlcikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1dGYzMlRvU3RyaW5nKGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyID0gMCwgZW5kOiBudW1iZXIgPSBkYXRhLmxlbmd0aCk6IHN0cmluZyB7XG4gIGxldCByZXN1bHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICBsZXQgY29kZXBvaW50ID0gZGF0YVtpXTtcbiAgICBpZiAoY29kZXBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBKUyBzdHJpbmdzIGFyZSBlbmNvZGVkIGFzIFVURjE2LCB0aHVzIGEgbm9uIEJNUCBjb2RlcG9pbnQgZ2V0cyBjb252ZXJ0ZWQgaW50byBhIHN1cnJvZ2F0ZVxuICAgICAgLy8gcGFpciBjb252ZXJzaW9uIHJ1bGVzOlxuICAgICAgLy8gIC0gc3VidHJhY3QgMHgxMDAwMCBmcm9tIGNvZGUgcG9pbnQsIGxlYXZpbmcgYSAyMCBiaXQgbnVtYmVyXG4gICAgICAvLyAgLSBhZGQgaGlnaCAxMCBiaXRzIHRvIDB4RDgwMCAgLS0+IGZpcnN0IHN1cnJvZ2F0ZVxuICAgICAgLy8gIC0gYWRkIGxvdyAxMCBiaXRzIHRvIDB4REMwMCAgIC0tPiBzZWNvbmQgc3Vycm9nYXRlXG4gICAgICBjb2RlcG9pbnQgLT0gMHgxMDAwMDtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjb2RlcG9pbnQgPj4gMTApICsgMHhEODAwKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoKGNvZGVwb2ludCAlIDB4NDAwKSArIDB4REMwMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGVwb2ludCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU3RyaW5nVG9VdGYzMiAtIGRlY29kZXMgVVRGMTYgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqIFRvIGtlZXAgdGhlIGRlY29kZXIgaW4gbGluZSB3aXRoIEpTIHN0cmluZ3MgaXQgaGFuZGxlcyBzaW5nbGUgc3Vycm9nYXRlcyBhcyBVQ1MyLlxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nVG9VdGYzMiB7XG4gIHByaXZhdGUgX2ludGVyaW06IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIENsZWFycyBpbnRlcmltIGFuZCByZXNldHMgZGVjb2RlciB0byBjbGVhbiBzdGF0ZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9pbnRlcmltID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWNvZGUgSlMgc3RyaW5nIHRvIFVURjMyIGNvZGVwb2ludHMuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZFxuICAgKiBzdXJyb2dhdGUgcGFpcnMgYW5kIGRlY29kZSB0aGVtIHdpdGggdGhlIG5leHQgZGF0YSBjaHVuay5cbiAgICogTm90ZTogVGhlIG1ldGhvZCBkb2VzIG5vIGJvdW5kIGNoZWNrcyBmb3IgdGFyZ2V0LCB0aGVyZWZvcmUgbWFrZSBzdXJlXG4gICAqIHRoZSBwcm92aWRlZCBpbnB1dCBkYXRhIGRvZXMgbm90IGV4Y2VlZCB0aGUgc2l6ZSBvZiBgdGFyZ2V0YC5cbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdyaXR0ZW4gY29kZXBvaW50cyBpbiBgdGFyZ2V0YC5cbiAgICovXG4gIHB1YmxpYyBkZWNvZGUoaW5wdXQ6IHN0cmluZywgdGFyZ2V0OiBVaW50MzJBcnJheSk6IG51bWJlciB7XG4gICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGxldCBzaXplID0gMDtcbiAgICBsZXQgc3RhcnRQb3MgPSAwO1xuXG4gICAgLy8gaGFuZGxlIGxlZnRvdmVyIHN1cnJvZ2F0ZSBoaWdoXG4gICAgaWYgKHRoaXMuX2ludGVyaW0pIHtcbiAgICAgIGNvbnN0IHNlY29uZCA9IGlucHV0LmNoYXJDb2RlQXQoc3RhcnRQb3MrKyk7XG4gICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gKHRoaXMuX2ludGVyaW0gLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgKFVTQzIgaGFuZGxpbmcpXG4gICAgICAgIHRhcmdldFtzaXplKytdID0gdGhpcy5faW50ZXJpbTtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBzZWNvbmQ7XG4gICAgICB9XG4gICAgICB0aGlzLl9pbnRlcmltID0gMDtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gc3RhcnRQb3M7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XG4gICAgICAvLyBzdXJyb2dhdGUgcGFpciBmaXJzdFxuICAgICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGKSB7XG4gICAgICAgIGlmICgrK2kgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5faW50ZXJpbSA9IGNvZGU7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vjb25kID0gaW5wdXQuY2hhckNvZGVBdChpKTtcbiAgICAgICAgaWYgKDB4REMwMCA8PSBzZWNvbmQgJiYgc2Vjb25kIDw9IDB4REZGRikge1xuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50IChVU0MyIGhhbmRsaW5nKVxuICAgICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZTtcbiAgICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IHNlY29uZDtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjb2RlID09PSAweEZFRkYpIHtcbiAgICAgICAgLy8gQk9NXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxufVxuXG4vKipcbiAqIFV0ZjhEZWNvZGVyIC0gZGVjb2RlcyBVVEY4IGJ5dGUgc2VxdWVuY2VzIGludG8gVVRGMzIgY29kZXBvaW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFV0ZjhUb1V0ZjMyIHtcbiAgcHVibGljIGludGVyaW06IFVpbnQ4QXJyYXkgPSBuZXcgVWludDhBcnJheSgzKTtcblxuICAvKipcbiAgICogQ2xlYXJzIGludGVyaW0gYnl0ZXMgYW5kIHJlc2V0cyBkZWNvZGVyIHRvIGNsZWFuIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuaW50ZXJpbS5maWxsKDApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY29kZXMgVVRGOCBieXRlIHNlcXVlbmNlcyBpbiBgaW5wdXRgIHRvIFVURjMyIGNvZGVwb2ludHMgaW4gYHRhcmdldGAuXG4gICAqIFRoZSBtZXRob2RzIGFzc3VtZXMgc3RyZWFtIGlucHV0IGFuZCB3aWxsIHN0b3JlIHBhcnRseSB0cmFuc21pdHRlZCBieXRlc1xuICAgKiBhbmQgZGVjb2RlIHRoZW0gd2l0aCB0aGUgbmV4dCBkYXRhIGNodW5rLlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIGRvZXMgbm8gYm91bmQgY2hlY2tzIGZvciB0YXJnZXQsIHRoZXJlZm9yZSBtYWtlIHN1cmVcbiAgICogdGhlIHByb3ZpZGVkIGRhdGEgY2h1bmsgZG9lcyBub3QgZXhjZWVkIHRoZSBzaXplIG9mIGB0YXJnZXRgLlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd3JpdHRlbiBjb2RlcG9pbnRzIGluIGB0YXJnZXRgLlxuICAgKi9cbiAgcHVibGljIGRlY29kZShpbnB1dDogVWludDhBcnJheSwgdGFyZ2V0OiBVaW50MzJBcnJheSk6IG51bWJlciB7XG4gICAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGxldCBzaXplID0gMDtcbiAgICBsZXQgYnl0ZTE6IG51bWJlcjtcbiAgICBsZXQgYnl0ZTI6IG51bWJlcjtcbiAgICBsZXQgYnl0ZTM6IG51bWJlcjtcbiAgICBsZXQgYnl0ZTQ6IG51bWJlcjtcbiAgICBsZXQgY29kZXBvaW50ID0gMDtcbiAgICBsZXQgc3RhcnRQb3MgPSAwO1xuXG4gICAgLy8gaGFuZGxlIGxlZnRvdmVyIGJ5dGVzXG4gICAgaWYgKHRoaXMuaW50ZXJpbVswXSkge1xuICAgICAgbGV0IGRpc2NhcmRJbnRlcmltID0gZmFsc2U7XG4gICAgICBsZXQgY3AgPSB0aGlzLmludGVyaW1bMF07XG4gICAgICBjcCAmPSAoKCgoY3AgJiAweEUwKSA9PT0gMHhDMCkpID8gMHgxRiA6ICgoKGNwICYgMHhGMCkgPT09IDB4RTApKSA/IDB4MEYgOiAweDA3KTtcbiAgICAgIGxldCBwb3MgPSAwO1xuICAgICAgbGV0IHRtcDogbnVtYmVyO1xuICAgICAgd2hpbGUgKCh0bXAgPSB0aGlzLmludGVyaW1bKytwb3NdICYgMHgzRikgJiYgcG9zIDwgNCkge1xuICAgICAgICBjcCA8PD0gNjtcbiAgICAgICAgY3AgfD0gdG1wO1xuICAgICAgfVxuICAgICAgLy8gbWlzc2luZyBieXRlcyAtIHJlYWQgYWhlYWQgZnJvbSBpbnB1dFxuICAgICAgY29uc3QgdHlwZSA9ICgoKHRoaXMuaW50ZXJpbVswXSAmIDB4RTApID09PSAweEMwKSkgPyAyIDogKCgodGhpcy5pbnRlcmltWzBdICYgMHhGMCkgPT09IDB4RTApKSA/IDMgOiA0O1xuICAgICAgY29uc3QgbWlzc2luZyA9IHR5cGUgLSBwb3M7XG4gICAgICB3aGlsZSAoc3RhcnRQb3MgPCBtaXNzaW5nKSB7XG4gICAgICAgIGlmIChzdGFydFBvcyA+PSBsZW5ndGgpIHtcbiAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICB0bXAgPSBpbnB1dFtzdGFydFBvcysrXTtcbiAgICAgICAgaWYgKCh0bXAgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvbiwgZGlzY2FyZCBpbnRlcmltIGJ5dGVzIGNvbXBsZXRlbHlcbiAgICAgICAgICBzdGFydFBvcy0tO1xuICAgICAgICAgIGRpc2NhcmRJbnRlcmltID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBuZWVkIHRvIHNhdmUgc28gd2UgY2FuIGNvbnRpbnVlIHNob3J0IGlucHV0cyBpbiBuZXh0IGNhbGxcbiAgICAgICAgICB0aGlzLmludGVyaW1bcG9zKytdID0gdG1wO1xuICAgICAgICAgIGNwIDw8PSA2O1xuICAgICAgICAgIGNwIHw9IHRtcCAmIDB4M0Y7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghZGlzY2FyZEludGVyaW0pIHtcbiAgICAgICAgLy8gZmluYWwgdGVzdCBpcyB0eXBlIGRlcGVuZGVudFxuICAgICAgICBpZiAodHlwZSA9PT0gMikge1xuICAgICAgICAgIGlmIChjcCA8IDB4ODApIHtcbiAgICAgICAgICAgIC8vIHdyb25nIHN0YXJ0ZXIgYnl0ZVxuICAgICAgICAgICAgc3RhcnRQb3MtLTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjcDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gMykge1xuICAgICAgICAgIGlmIChjcCA8IDB4MDgwMCB8fCAoY3AgPj0gMHhEODAwICYmIGNwIDw9IDB4REZGRikgfHwgY3AgPT09IDB4RkVGRikge1xuICAgICAgICAgICAgLy8gaWxsZWdhbCBjb2RlcG9pbnQgb3IgQk9NXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFtzaXplKytdID0gY3A7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChjcCA8IDB4MDEwMDAwIHx8IGNwID4gMHgxMEZGRkYpIHtcbiAgICAgICAgICAgIC8vIGlsbGVnYWwgY29kZXBvaW50XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldFtzaXplKytdID0gY3A7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmludGVyaW0uZmlsbCgwKTtcbiAgICB9XG5cbiAgICAvLyBsb29wIHRocm91Z2ggaW5wdXRcbiAgICBjb25zdCBmb3VyU3RvcCA9IGxlbmd0aCAtIDQ7XG4gICAgbGV0IGkgPSBzdGFydFBvcztcbiAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgLyoqXG4gICAgICAgKiBBU0NJSSBzaG9ydGN1dCB3aXRoIGxvb3AgdW5yb2xsZWQgdG8gNCBjb25zZWN1dGl2ZSBBU0NJSSBjaGFycy5cbiAgICAgICAqIFRoaXMgaXMgYSBjb21wcm9taXNlIGJldHdlZW4gc3BlZWQgZ2FpbiBmb3IgQVNDSUlcbiAgICAgICAqIGFuZCBwZW5hbHR5IGZvciBub24gQVNDSUk6XG4gICAgICAgKiBGb3IgYmVzdCBBU0NJSSBwZXJmb3JtYW5jZSB0aGUgY2hhciBzaG91bGQgYmUgc3RvcmVkIGRpcmVjdGx5IGludG8gdGFyZ2V0LFxuICAgICAgICogYnV0IGV2ZW4gYSBzaW5nbGUgYXR0ZW1wdCB0byB3cml0ZSB0byB0YXJnZXQgYW5kIGNvbXBhcmUgYWZ0ZXJ3YXJkc1xuICAgICAgICogcGVuYWxpemVzIG5vbiBBU0NJSSByZWFsbHkgYmFkICgtNTAlKSwgdGh1cyB3ZSBsb2FkIHRoZSBjaGFyIGludG8gYnl0ZVggZmlyc3QsXG4gICAgICAgKiB3aGljaCByZWR1Y2VzIEFTQ0lJIHBlcmZvcm1hbmNlIGJ5IH4xNSUuXG4gICAgICAgKiBUaGlzIHRyaWFsIGZvciBBU0NJSSByZWR1Y2VzIG5vbiBBU0NJSSBwZXJmb3JtYW5jZSBieSB+MTAlIHdoaWNoIHNlZW1zIGFjY2VwdGlibGVcbiAgICAgICAqIGNvbXBhcmVkIHRvIHRoZSBnYWlucy5cbiAgICAgICAqIE5vdGUgdGhhdCB0aGlzIG9wdGltaXphdGlvbiBvbmx5IHRha2VzIHBsYWNlIGZvciA0IGNvbnNlY3V0aXZlIEFTQ0lJIGNoYXJzLFxuICAgICAgICogZm9yIGFueSBzaG9ydGVyIGl0IGJhaWxzIG91dC4gV29yc3QgY2FzZSAtIGFsbCA0IGJ5dGVzIGJlaW5nIHJlYWQgYnV0XG4gICAgICAgKiB0aHJvd24gYXdheSBkdWUgdG8gdGhlIGxhc3QgYmVpbmcgYSBub24gQVNDSUkgY2hhciAoLTEwJSBwZXJmb3JtYW5jZSkuXG4gICAgICAgKi9cbiAgICAgIHdoaWxlIChpIDwgZm91clN0b3BcbiAgICAgICAgJiYgISgoYnl0ZTEgPSBpbnB1dFtpXSkgJiAweDgwKVxuICAgICAgICAmJiAhKChieXRlMiA9IGlucHV0W2kgKyAxXSkgJiAweDgwKVxuICAgICAgICAmJiAhKChieXRlMyA9IGlucHV0W2kgKyAyXSkgJiAweDgwKVxuICAgICAgICAmJiAhKChieXRlNCA9IGlucHV0W2kgKyAzXSkgJiAweDgwKSlcbiAgICAgIHtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlMTtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlMjtcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlMztcbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBieXRlNDtcbiAgICAgICAgaSArPSA0O1xuICAgICAgfVxuXG4gICAgICAvLyByZXJlYWQgYnl0ZTFcbiAgICAgIGJ5dGUxID0gaW5wdXRbaSsrXTtcblxuICAgICAgLy8gMSBieXRlXG4gICAgICBpZiAoYnl0ZTEgPCAweDgwKSB7XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gYnl0ZTE7XG5cbiAgICAgICAgLy8gMiBieXRlc1xuICAgICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweEUwKSA9PT0gMHhDMCkge1xuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMiA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTIgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnQgPSAoYnl0ZTEgJiAweDFGKSA8PCA2IHwgKGJ5dGUyICYgMHgzRik7XG4gICAgICAgIGlmIChjb2RlcG9pbnQgPCAweDgwKSB7XG4gICAgICAgICAgLy8gd3Jvbmcgc3RhcnRlciBieXRlXG4gICAgICAgICAgaS0tO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldFtzaXplKytdID0gY29kZXBvaW50O1xuXG4gICAgICAgIC8vIDMgYnl0ZXNcbiAgICAgIH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhGMCkgPT09IDB4RTApIHtcbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTIgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUyICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzBdID0gYnl0ZTE7XG4gICAgICAgICAgdGhpcy5pbnRlcmltWzFdID0gYnl0ZTI7XG4gICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICAgICAgYnl0ZTMgPSBpbnB1dFtpKytdO1xuICAgICAgICBpZiAoKGJ5dGUzICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgICAvLyB3cm9uZyBjb250aW51YXRpb25cbiAgICAgICAgICBpLS07XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29kZXBvaW50ID0gKGJ5dGUxICYgMHgwRikgPDwgMTIgfCAoYnl0ZTIgJiAweDNGKSA8PCA2IHwgKGJ5dGUzICYgMHgzRik7XG4gICAgICAgIGlmIChjb2RlcG9pbnQgPCAweDA4MDAgfHwgKGNvZGVwb2ludCA+PSAweEQ4MDAgJiYgY29kZXBvaW50IDw9IDB4REZGRikgfHwgY29kZXBvaW50ID09PSAweEZFRkYpIHtcbiAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCBvciBCT00sIG5vIGktLSBoZXJlXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W3NpemUrK10gPSBjb2RlcG9pbnQ7XG5cbiAgICAgICAgLy8gNCBieXRlc1xuICAgICAgfSBlbHNlIGlmICgoYnl0ZTEgJiAweEY4KSA9PT0gMHhGMCkge1xuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMiA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTIgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlMyA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTMgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMF0gPSBieXRlMTtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMV0gPSBieXRlMjtcbiAgICAgICAgICB0aGlzLmludGVyaW1bMl0gPSBieXRlMztcbiAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBieXRlNCA9IGlucHV0W2krK107XG4gICAgICAgIGlmICgoYnl0ZTQgJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgICAgIC8vIHdyb25nIGNvbnRpbnVhdGlvblxuICAgICAgICAgIGktLTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb2RlcG9pbnQgPSAoYnl0ZTEgJiAweDA3KSA8PCAxOCB8IChieXRlMiAmIDB4M0YpIDw8IDEyIHwgKGJ5dGUzICYgMHgzRikgPDwgNiB8IChieXRlNCAmIDB4M0YpO1xuICAgICAgICBpZiAoY29kZXBvaW50IDwgMHgwMTAwMDAgfHwgY29kZXBvaW50ID4gMHgxMEZGRkYpIHtcbiAgICAgICAgICAvLyBpbGxlZ2FsIGNvZGVwb2ludCwgbm8gaS0tIGhlcmVcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRbc2l6ZSsrXSA9IGNvZGVwb2ludDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlsbGVnYWwgYnl0ZSwganVzdCBza2lwXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaXplO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9DT0xPUiA9IDA7XG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSID0gKDAgPDwgMTgpIHwgKERFRkFVTFRfQ09MT1IgPDwgOSkgfCAoMjU2IDw8IDApO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRVhUID0gMDtcblxuZXhwb3J0IGNvbnN0IENIQVJfREFUQV9BVFRSX0lOREVYID0gMDtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ0hBUl9JTkRFWCA9IDE7XG5leHBvcnQgY29uc3QgQ0hBUl9EQVRBX1dJRFRIX0lOREVYID0gMjtcbmV4cG9ydCBjb25zdCBDSEFSX0RBVEFfQ09ERV9JTkRFWCA9IDM7XG5cbi8qKlxuICogTnVsbCBjZWxsIC0gYSByZWFsIGVtcHR5IGNlbGwgKGNvbnRhaW5pbmcgbm90aGluZykuXG4gKiBOb3RlIHRoYXQgY29kZSBzaG91bGQgYWx3YXlzIGJlIDAgZm9yIGEgbnVsbCBjZWxsIGFzXG4gKiBzZXZlcmFsIHRlc3QgY29uZGl0aW9uIG9mIHRoZSBidWZmZXIgbGluZSByZWx5IG9uIHRoaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBOVUxMX0NFTExfQ0hBUiA9ICcnO1xuZXhwb3J0IGNvbnN0IE5VTExfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgTlVMTF9DRUxMX0NPREUgPSAwO1xuXG4vKipcbiAqIFdoaXRlc3BhY2UgY2VsbC5cbiAqIFRoaXMgaXMgbWVhbnQgYXMgYSByZXBsYWNlbWVudCBmb3IgZW1wdHkgY2VsbHMgd2hlbiBuZWVkZWRcbiAqIGR1cmluZyByZW5kZXJpbmcgbGluZXMgdG8gcHJlc2VydmUgY29ycmVjdCBhbGlnbWVudC5cbiAqL1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9DSEFSID0gJyAnO1xuZXhwb3J0IGNvbnN0IFdISVRFU1BBQ0VfQ0VMTF9XSURUSCA9IDE7XG5leHBvcnQgY29uc3QgV0hJVEVTUEFDRV9DRUxMX0NPREUgPSAzMjtcblxuLyoqXG4gKiBCaXRtYXNrcyBmb3IgYWNjZXNzaW5nIGRhdGEgaW4gYGNvbnRlbnRgLlxuICovXG5leHBvcnQgY29uc3QgZW51bSBDb250ZW50IHtcbiAgLyoqXG4gICAqIGJpdCAxLi4yMSAgICBjb2RlcG9pbnQsIG1heCBhbGxvd2VkIGluIFVURjMyIGlzIDB4MTBGRkZGICgyMSBiaXRzIHRha2VuKVxuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgY29kZXBvaW50ID0gY29udGVudCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9IGNvZGVwb2ludCAmIENvbnRlbnQuY29kZXBvaW50TWFzaztgXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHNob3J0Y3V0IGlmIHByZWNvbmRpdGlvbiBgY29kZXBvaW50IDw9IDB4MTBGRkZGYCBpcyBtZXQ6XG4gICAqICAgICAgICAgICAgICAgICAgICAgIGBjb250ZW50IHw9IGNvZGVwb2ludDtgXG4gICAqL1xuICBDT0RFUE9JTlRfTUFTSyA9IDB4MUZGRkZGLFxuXG4gIC8qKlxuICAgKiBiaXQgMjIgICAgICAgZmxhZyBpbmRpY2F0aW9uIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGNvbWJpbmVkIGNvbnRlbnRcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYGlzQ29tYmluZWQgPSBjb250ZW50ICYgQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIHNldDogICAgYGNvbnRlbnQgfD0gQ29udGVudC5pc0NvbWJpbmVkO2BcbiAgICogICAgICAgICAgICAgIGNsZWFyOiAgYGNvbnRlbnQgJj0gfkNvbnRlbnQuaXNDb21iaW5lZDtgXG4gICAqL1xuICBJU19DT01CSU5FRF9NQVNLID0gMHgyMDAwMDAsICAvLyAxIDw8IDIxXG5cbiAgLyoqXG4gICAqIGJpdCAxLi4yMiAgICBtYXNrIHRvIGNoZWNrIHdoZXRoZXIgYSBjZWxsIGNvbnRhaW5zIGFueSBzdHJpbmcgZGF0YVxuICAgKiAgICAgICAgICAgICAgd2UgbmVlZCB0byBjaGVjayBmb3IgY29kZXBvaW50IGFuZCBpc0NvbWJpbmVkIGJpdHMgdG8gc2VlXG4gICAqICAgICAgICAgICAgICB3aGV0aGVyIGEgY2VsbCBjb250YWlucyBhbnl0aGluZ1xuICAgKiAgICAgICAgICAgICAgcmVhZDogICBgaXNFbXB0eSA9ICEoY29udGVudCAmIENvbnRlbnQuaGFzQ29udGVudClgXG4gICAqL1xuICBIQVNfQ09OVEVOVF9NQVNLID0gMHgzRkZGRkYsXG5cbiAgLyoqXG4gICAqIGJpdCAyMy4uMjQgICB3Y3dpZHRoIHZhbHVlIG9mIGNlbGwsIHRha2VzIDIgYml0cyAocmFuZ2VzIGZyb20gMC4uMilcbiAgICogICAgICAgICAgICAgIHJlYWQ6ICAgYHdpZHRoID0gKGNvbnRlbnQgJiBDb250ZW50LndpZHRoTWFzaykgPj4gQ29udGVudC53aWR0aFNoaWZ0O2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYGhhc1dpZHRoID0gY29udGVudCAmIENvbnRlbnQud2lkdGhNYXNrO2BcbiAgICogICAgICAgICAgICAgICAgICAgICAgYXMgbG9uZyBhcyB3Y3dpZHRoIGlzIGhpZ2hlc3QgdmFsdWUgaW4gYGNvbnRlbnRgOlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgd2lkdGggPSBjb250ZW50ID4+IENvbnRlbnQud2lkdGhTaGlmdDtgXG4gICAqICAgICAgICAgICAgICB3cml0ZTogIGBjb250ZW50IHw9ICh3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQpICYgQ29udGVudC53aWR0aE1hc2s7YFxuICAgKiAgICAgICAgICAgICAgICAgICAgICBzaG9ydGN1dCBpZiBwcmVjb25kaXRpb24gYDAgPD0gd2lkdGggPD0gM2AgaXMgbWV0OlxuICAgKiAgICAgICAgICAgICAgICAgICAgICBgY29udGVudCB8PSB3aWR0aCA8PCBDb250ZW50LndpZHRoU2hpZnQ7YFxuICAgKi9cbiAgV0lEVEhfTUFTSyA9IDB4QzAwMDAwLCAgIC8vIDMgPDwgMjJcbiAgV0lEVEhfU0hJRlQgPSAyMlxufVxuXG5leHBvcnQgY29uc3QgZW51bSBBdHRyaWJ1dGVzIHtcbiAgLyoqXG4gICAqIGJpdCAxLi44ICAgICBibHVlIGluIFJHQiwgY29sb3IgaW4gUDI1NiBhbmQgUDE2XG4gICAqL1xuICBCTFVFX01BU0sgPSAweEZGLFxuICBCTFVFX1NISUZUID0gMCxcbiAgUENPTE9SX01BU0sgPSAweEZGLFxuICBQQ09MT1JfU0hJRlQgPSAwLFxuXG4gIC8qKlxuICAgKiBiaXQgOS4uMTYgICAgZ3JlZW4gaW4gUkdCXG4gICAqL1xuICBHUkVFTl9NQVNLID0gMHhGRjAwLFxuICBHUkVFTl9TSElGVCA9IDgsXG5cbiAgLyoqXG4gICAqIGJpdCAxNy4uMjQgICByZWQgaW4gUkdCXG4gICAqL1xuICBSRURfTUFTSyA9IDB4RkYwMDAwLFxuICBSRURfU0hJRlQgPSAxNixcblxuICAvKipcbiAgICogYml0IDI1Li4yNiAgIGNvbG9yIG1vZGU6IERFRkFVTFQgKDApIHwgUDE2ICgxKSB8IFAyNTYgKDIpIHwgUkdCICgzKVxuICAgKi9cbiAgQ01fTUFTSyA9IDB4MzAwMDAwMCxcbiAgQ01fREVGQVVMVCA9IDAsXG4gIENNX1AxNiA9IDB4MTAwMDAwMCxcbiAgQ01fUDI1NiA9IDB4MjAwMDAwMCxcbiAgQ01fUkdCID0gMHgzMDAwMDAwLFxuXG4gIC8qKlxuICAgKiBiaXQgMS4uMjQgIFJHQiByb29tXG4gICAqL1xuICBSR0JfTUFTSyA9IDB4RkZGRkZGXG59XG5cbmV4cG9ydCBjb25zdCBlbnVtIEZnRmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4zMlxuICAgKi9cbiAgSU5WRVJTRSA9IDB4NDAwMDAwMCxcbiAgQk9MRCA9IDB4ODAwMDAwMCxcbiAgVU5ERVJMSU5FID0gMHgxMDAwMDAwMCxcbiAgQkxJTksgPSAweDIwMDAwMDAwLFxuICBJTlZJU0lCTEUgPSAweDQwMDAwMDAwLFxuICBTVFJJS0VUSFJPVUdIID0gMHg4MDAwMDAwMCxcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gQmdGbGFncyB7XG4gIC8qKlxuICAgKiBiaXQgMjcuLjMyICh1cHBlciAyIHVudXNlZClcbiAgICovXG4gIElUQUxJQyA9IDB4NDAwMDAwMCxcbiAgRElNID0gMHg4MDAwMDAwLFxuICBIQVNfRVhURU5ERUQgPSAweDEwMDAwMDAwLFxuICBQUk9URUNURUQgPSAweDIwMDAwMDAwLFxuICBPVkVSTElORSA9IDB4NDAwMDAwMDBcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gRXh0RmxhZ3Mge1xuICAvKipcbiAgICogYml0IDI3Li4yOVxuICAgKi9cbiAgVU5ERVJMSU5FX1NUWUxFID0gMHgxQzAwMDAwMCxcblxuICAvKipcbiAgICogYml0IDMwLi4zMlxuICAgKlxuICAgKiBBbiBvcHRpb25hbCB2YXJpYW50IGZvciB0aGUgZ2x5cGgsIHRoaXMgY2FuIGJlIHVzZWQgZm9yIGV4YW1wbGUgdG8gb2Zmc2V0IHVuZGVybGluZXMgYnkgYVxuICAgKiBudW1iZXIgb2YgcGl4ZWxzIHRvIGNyZWF0ZSBhIHBlcmZlY3QgcGF0dGVybi5cbiAgICovXG4gIFZBUklBTlRfT0ZGU0VUID0gMHhFMDAwMDAwMFxufVxuXG5leHBvcnQgY29uc3QgZW51bSBVbmRlcmxpbmVTdHlsZSB7XG4gIE5PTkUgPSAwLFxuICBTSU5HTEUgPSAxLFxuICBET1VCTEUgPSAyLFxuICBDVVJMWSA9IDMsXG4gIERPVFRFRCA9IDQsXG4gIERBU0hFRCA9IDVcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhLCBJQ29sb3JSR0IsIElFeHRlbmRlZEF0dHJzIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MsIFVuZGVybGluZVN0eWxlLCBFeHRGbGFncyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQXR0cmlidXRlRGF0YSB7XG4gIHB1YmxpYyBzdGF0aWMgdG9Db2xvclJHQih2YWx1ZTogbnVtYmVyKTogSUNvbG9yUkdCIHtcbiAgICByZXR1cm4gW1xuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuUkVEX1NISUZUICYgMjU1LFxuICAgICAgdmFsdWUgPj4+IEF0dHJpYnV0ZXMuR1JFRU5fU0hJRlQgJiAyNTUsXG4gICAgICB2YWx1ZSAmIDI1NVxuICAgIF07XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGZyb21Db2xvclJHQih2YWx1ZTogSUNvbG9yUkdCKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHZhbHVlWzBdICYgMjU1KSA8PCBBdHRyaWJ1dGVzLlJFRF9TSElGVCB8ICh2YWx1ZVsxXSAmIDI1NSkgPDwgQXR0cmlidXRlcy5HUkVFTl9TSElGVCB8IHZhbHVlWzJdICYgMjU1O1xuICB9XG5cbiAgcHVibGljIGNsb25lKCk6IElBdHRyaWJ1dGVEYXRhIHtcbiAgICBjb25zdCBuZXdPYmogPSBuZXcgQXR0cmlidXRlRGF0YSgpO1xuICAgIG5ld09iai5mZyA9IHRoaXMuZmc7XG4gICAgbmV3T2JqLmJnID0gdGhpcy5iZztcbiAgICBuZXdPYmouZXh0ZW5kZWQgPSB0aGlzLmV4dGVuZGVkLmNsb25lKCk7XG4gICAgcmV0dXJuIG5ld09iajtcbiAgfVxuXG4gIC8vIGRhdGFcbiAgcHVibGljIGZnID0gMDtcbiAgcHVibGljIGJnID0gMDtcbiAgcHVibGljIGV4dGVuZGVkOiBJRXh0ZW5kZWRBdHRycyA9IG5ldyBFeHRlbmRlZEF0dHJzKCk7XG5cbiAgLy8gZmxhZ3NcbiAgcHVibGljIGlzSW52ZXJzZSgpOiBudW1iZXIgICAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WRVJTRTsgfVxuICBwdWJsaWMgaXNCb2xkKCk6IG51bWJlciAgICAgICAgICB7IHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5CT0xEOyB9XG4gIHB1YmxpYyBpc1VuZGVybGluZSgpOiBudW1iZXIgICAgIHtcbiAgICBpZiAodGhpcy5oYXNFeHRlbmRlZEF0dHJzKCkgJiYgdGhpcy5leHRlbmRlZC51bmRlcmxpbmVTdHlsZSAhPT0gVW5kZXJsaW5lU3R5bGUuTk9ORSkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmZnICYgRmdGbGFncy5VTkRFUkxJTkU7XG4gIH1cbiAgcHVibGljIGlzQmxpbmsoKTogbnVtYmVyICAgICAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuQkxJTks7IH1cbiAgcHVibGljIGlzSW52aXNpYmxlKCk6IG51bWJlciAgICAgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuSU5WSVNJQkxFOyB9XG4gIHB1YmxpYyBpc0l0YWxpYygpOiBudW1iZXIgICAgICAgIHsgcmV0dXJuIHRoaXMuYmcgJiBCZ0ZsYWdzLklUQUxJQzsgfVxuICBwdWJsaWMgaXNEaW0oKTogbnVtYmVyICAgICAgICAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5ESU07IH1cbiAgcHVibGljIGlzU3RyaWtldGhyb3VnaCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuU1RSSUtFVEhST1VHSDsgfVxuICBwdWJsaWMgaXNQcm90ZWN0ZWQoKTogbnVtYmVyICAgICB7IHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5QUk9URUNURUQ7IH1cbiAgcHVibGljIGlzT3ZlcmxpbmUoKTogbnVtYmVyICAgICAgeyByZXR1cm4gdGhpcy5iZyAmIEJnRmxhZ3MuT1ZFUkxJTkU7IH1cblxuICAvLyBjb2xvciBtb2Rlc1xuICBwdWJsaWMgZ2V0RmdDb2xvck1vZGUoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0s7IH1cbiAgcHVibGljIGdldEJnQ29sb3JNb2RlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLOyB9XG4gIHB1YmxpYyBpc0ZnUkdCKCk6IGJvb2xlYW4gICAgICAgeyByZXR1cm4gKHRoaXMuZmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1JHQjsgfVxuICBwdWJsaWMgaXNCZ1JHQigpOiBib29sZWFuICAgICAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9SR0I7IH1cbiAgcHVibGljIGlzRmdQYWxldHRlKCk6IGJvb2xlYW4gICB7IHJldHVybiAodGhpcy5mZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDE2IHx8ICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2OyB9XG4gIHB1YmxpYyBpc0JnUGFsZXR0ZSgpOiBib29sZWFuICAgeyByZXR1cm4gKHRoaXMuYmcgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNiB8fCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUDI1NjsgfVxuICBwdWJsaWMgaXNGZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuICBwdWJsaWMgaXNCZ0RlZmF1bHQoKTogYm9vbGVhbiAgIHsgcmV0dXJuICh0aGlzLmJnICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMDsgfVxuICBwdWJsaWMgaXNBdHRyaWJ1dGVEZWZhdWx0KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5mZyA9PT0gMCAmJiB0aGlzLmJnID09PSAwOyB9XG5cbiAgLy8gY29sb3JzXG4gIHB1YmxpYyBnZXRGZ0NvbG9yKCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0aGlzLmZnICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUDE2OlxuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6ICByZXR1cm4gdGhpcy5mZyAmIEF0dHJpYnV0ZXMuUENPTE9SX01BU0s7XG4gICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmZnICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgIGRlZmF1bHQ6ICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xOyAgLy8gQ01fREVGQVVMVCBkZWZhdWx0cyB0byAtMVxuICAgIH1cbiAgfVxuICBwdWJsaWMgZ2V0QmdDb2xvcigpOiBudW1iZXIge1xuICAgIHN3aXRjaCAodGhpcy5iZyAmIEF0dHJpYnV0ZXMuQ01fTUFTSykge1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuYmcgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1JHQjogICByZXR1cm4gdGhpcy5iZyAmIEF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICBkZWZhdWx0OiAgICAgICAgICAgICAgICAgIHJldHVybiAtMTsgIC8vIENNX0RFRkFVTFQgZGVmYXVsdHMgdG8gLTFcbiAgICB9XG4gIH1cblxuICAvLyBleHRlbmRlZCBhdHRyc1xuICBwdWJsaWMgaGFzRXh0ZW5kZWRBdHRycygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gIH1cbiAgcHVibGljIHVwZGF0ZUV4dGVuZGVkKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmV4dGVuZGVkLmlzRW1wdHkoKSkge1xuICAgICAgdGhpcy5iZyAmPSB+QmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmcgfD0gQmdGbGFncy5IQVNfRVhURU5ERUQ7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXRVbmRlcmxpbmVDb2xvcigpOiBudW1iZXIge1xuICAgIGlmICgodGhpcy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSAmJiB+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcikge1xuICAgICAgc3dpdGNoICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSB7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OiAgcmV0dXJuIHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLO1xuICAgICAgICBjYXNlIEF0dHJpYnV0ZXMuQ01fUkdCOiAgIHJldHVybiB0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5SR0JfTUFTSztcbiAgICAgICAgZGVmYXVsdDogICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGZ0NvbG9yKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEZnQ29sb3IoKTtcbiAgfVxuICBwdWJsaWMgZ2V0VW5kZXJsaW5lQ29sb3JNb2RlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yXG4gICAgICA/IHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0tcbiAgICAgIDogdGhpcy5nZXRGZ0NvbG9yTW9kZSgpO1xuICB9XG4gIHB1YmxpYyBpc1VuZGVybGluZUNvbG9yUkdCKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5iZyAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSAmJiB+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvclxuICAgICAgPyAodGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvciAmIEF0dHJpYnV0ZXMuQ01fTUFTSykgPT09IEF0dHJpYnV0ZXMuQ01fUkdCXG4gICAgICA6IHRoaXMuaXNGZ1JHQigpO1xuICB9XG4gIHB1YmxpYyBpc1VuZGVybGluZUNvbG9yUGFsZXR0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkgJiYgfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3JcbiAgICAgID8gKHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJiBBdHRyaWJ1dGVzLkNNX01BU0spID09PSBBdHRyaWJ1dGVzLkNNX1AxNlxuICAgICAgICAgIHx8ICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gQXR0cmlidXRlcy5DTV9QMjU2XG4gICAgICA6IHRoaXMuaXNGZ1BhbGV0dGUoKTtcbiAgfVxuICBwdWJsaWMgaXNVbmRlcmxpbmVDb2xvckRlZmF1bHQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpICYmIH50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yXG4gICAgICA/ICh0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yICYgQXR0cmlidXRlcy5DTV9NQVNLKSA9PT0gMFxuICAgICAgOiB0aGlzLmlzRmdEZWZhdWx0KCk7XG4gIH1cbiAgcHVibGljIGdldFVuZGVybGluZVN0eWxlKCk6IFVuZGVybGluZVN0eWxlIHtcbiAgICByZXR1cm4gdGhpcy5mZyAmIEZnRmxhZ3MuVU5ERVJMSU5FXG4gICAgICA/ICh0aGlzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQgPyB0aGlzLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlIDogVW5kZXJsaW5lU3R5bGUuU0lOR0xFKVxuICAgICAgOiBVbmRlcmxpbmVTdHlsZS5OT05FO1xuICB9XG4gIHB1YmxpYyBnZXRVbmRlcmxpbmVWYXJpYW50T2Zmc2V0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lVmFyaWFudE9mZnNldDtcbiAgfVxufVxuXG5cbi8qKlxuICogRXh0ZW5kZWQgYXR0cmlidXRlcyBmb3IgYSBjZWxsLlxuICogSG9sZHMgaW5mb3JtYXRpb24gYWJvdXQgZGlmZmVyZW50IHVuZGVybGluZSBzdHlsZXMgYW5kIGNvbG9yLlxuICovXG5leHBvcnQgY2xhc3MgRXh0ZW5kZWRBdHRycyBpbXBsZW1lbnRzIElFeHRlbmRlZEF0dHJzIHtcbiAgcHJpdmF0ZSBfZXh0OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZ2V0IGV4dCgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLl91cmxJZCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgKHRoaXMuX2V4dCAmIH5FeHRGbGFncy5VTkRFUkxJTkVfU1RZTEUpIHxcbiAgICAgICAgKHRoaXMudW5kZXJsaW5lU3R5bGUgPDwgMjYpXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZXh0O1xuICB9XG4gIHB1YmxpYyBzZXQgZXh0KHZhbHVlOiBudW1iZXIpIHsgdGhpcy5fZXh0ID0gdmFsdWU7IH1cblxuICBwdWJsaWMgZ2V0IHVuZGVybGluZVN0eWxlKCk6IFVuZGVybGluZVN0eWxlIHtcbiAgICAvLyBBbHdheXMgcmV0dXJuIHRoZSBVUkwgc3R5bGUgaWYgaXQgaGFzIG9uZVxuICAgIGlmICh0aGlzLl91cmxJZCkge1xuICAgICAgcmV0dXJuIFVuZGVybGluZVN0eWxlLkRBU0hFRDtcbiAgICB9XG4gICAgcmV0dXJuICh0aGlzLl9leHQgJiBFeHRGbGFncy5VTkRFUkxJTkVfU1RZTEUpID4+IDI2O1xuICB9XG4gIHB1YmxpYyBzZXQgdW5kZXJsaW5lU3R5bGUodmFsdWU6IFVuZGVybGluZVN0eWxlKSB7XG4gICAgdGhpcy5fZXh0ICY9IH5FeHRGbGFncy5VTkRFUkxJTkVfU1RZTEU7XG4gICAgdGhpcy5fZXh0IHw9ICh2YWx1ZSA8PCAyNikgJiBFeHRGbGFncy5VTkRFUkxJTkVfU1RZTEU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHVuZGVybGluZUNvbG9yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2V4dCAmIChBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgfVxuICBwdWJsaWMgc2V0IHVuZGVybGluZUNvbG9yKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9leHQgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICB0aGlzLl9leHQgfD0gdmFsdWUgJiAoQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gIH1cblxuICBwcml2YXRlIF91cmxJZDogbnVtYmVyID0gMDtcbiAgcHVibGljIGdldCB1cmxJZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl91cmxJZDtcbiAgfVxuICBwdWJsaWMgc2V0IHVybElkKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl91cmxJZCA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldCB1bmRlcmxpbmVWYXJpYW50T2Zmc2V0KCk6IG51bWJlciB7XG4gICAgY29uc3QgdmFsID0gKHRoaXMuX2V4dCAmIEV4dEZsYWdzLlZBUklBTlRfT0ZGU0VUKSA+PiAyOTtcbiAgICBpZiAodmFsIDwgMCkge1xuICAgICAgcmV0dXJuIHZhbCBeIDB4RkZGRkZGRjg7XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgcHVibGljIHNldCB1bmRlcmxpbmVWYXJpYW50T2Zmc2V0KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9leHQgJj0gfkV4dEZsYWdzLlZBUklBTlRfT0ZGU0VUO1xuICAgIHRoaXMuX2V4dCB8PSAodmFsdWUgPDwgMjkpICYgRXh0RmxhZ3MuVkFSSUFOVF9PRkZTRVQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBleHQ6IG51bWJlciA9IDAsXG4gICAgdXJsSWQ6IG51bWJlciA9IDBcbiAgKSB7XG4gICAgdGhpcy5fZXh0ID0gZXh0O1xuICAgIHRoaXMuX3VybElkID0gdXJsSWQ7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogSUV4dGVuZGVkQXR0cnMge1xuICAgIHJldHVybiBuZXcgRXh0ZW5kZWRBdHRycyh0aGlzLl9leHQsIHRoaXMuX3VybElkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZW5pZW50IG1ldGhvZCB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBvYmplY3QgaG9sZHMgbm8gYWRkaXRpb25hbCBpbmZvcm1hdGlvbixcbiAgICogdGhhdCBuZWVkcyB0byBiZSBwZXJzaXN0YW50IGluIHRoZSBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgaXNFbXB0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy51bmRlcmxpbmVTdHlsZSA9PT0gVW5kZXJsaW5lU3R5bGUuTk9ORSAmJiB0aGlzLl91cmxJZCA9PT0gMDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElDZWxsRGF0YSwgSUV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgc3RyaW5nRnJvbUNvZGVQb2ludCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBDSEFSX0RBVEFfQ0hBUl9JTkRFWCwgQ0hBUl9EQVRBX1dJRFRIX0lOREVYLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEsIEV4dGVuZGVkQXR0cnMgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuXG4vKipcbiAqIENlbGxEYXRhIC0gcmVwcmVzZW50cyBhIHNpbmdsZSBDZWxsIGluIHRoZSB0ZXJtaW5hbCBidWZmZXIuXG4gKi9cbmV4cG9ydCBjbGFzcyBDZWxsRGF0YSBleHRlbmRzIEF0dHJpYnV0ZURhdGEgaW1wbGVtZW50cyBJQ2VsbERhdGEge1xuICAvKiogSGVscGVyIHRvIGNyZWF0ZSBDZWxsRGF0YSBmcm9tIENoYXJEYXRhLiAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiBDZWxsRGF0YSB7XG4gICAgY29uc3Qgb2JqID0gbmV3IENlbGxEYXRhKCk7XG4gICAgb2JqLnNldEZyb21DaGFyRGF0YSh2YWx1ZSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICAvKiogUHJpbWl0aXZlcyBmcm9tIHRlcm1pbmFsIGJ1ZmZlci4gKi9cbiAgcHVibGljIGNvbnRlbnQgPSAwO1xuICBwdWJsaWMgZmcgPSAwO1xuICBwdWJsaWMgYmcgPSAwO1xuICBwdWJsaWMgZXh0ZW5kZWQ6IElFeHRlbmRlZEF0dHJzID0gbmV3IEV4dGVuZGVkQXR0cnMoKTtcbiAgcHVibGljIGNvbWJpbmVkRGF0YSA9ICcnO1xuICAvKiogV2hldGhlciBjZWxsIGNvbnRhaW5zIGEgY29tYmluZWQgc3RyaW5nLiAqL1xuICBwdWJsaWMgaXNDb21iaW5lZCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gIH1cbiAgLyoqIFdpZHRoIG9mIHRoZSBjZWxsLiAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZW50ID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cbiAgLyoqIEpTIHN0cmluZyBvZiB0aGUgY29udGVudC4gKi9cbiAgcHVibGljIGdldENoYXJzKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgcmV0dXJuIHRoaXMuY29tYmluZWREYXRhO1xuICAgIH1cbiAgICBpZiAodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykge1xuICAgICAgcmV0dXJuIHN0cmluZ0Zyb21Db2RlUG9pbnQodGhpcy5jb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSyk7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfVxuICAvKipcbiAgICogQ29kZXBvaW50IG9mIGNlbGxcbiAgICogTm90ZSB0aGlzIHJldHVybnMgdGhlIFVURjMyIGNvZGVwb2ludCBvZiBzaW5nbGUgY2hhcnMsXG4gICAqIGlmIGNvbnRlbnQgaXMgYSBjb21iaW5lZCBzdHJpbmcgaXQgcmV0dXJucyB0aGUgY29kZXBvaW50XG4gICAqIG9mIHRoZSBsYXN0IGNoYXIgaW4gc3RyaW5nIHRvIGJlIGluIGxpbmUgd2l0aCBjb2RlIGluIENoYXJEYXRhLlxuICAgKi9cbiAgcHVibGljIGdldENvZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuaXNDb21iaW5lZCgpKVxuICAgICAgPyB0aGlzLmNvbWJpbmVkRGF0YS5jaGFyQ29kZUF0KHRoaXMuY29tYmluZWREYXRhLmxlbmd0aCAtIDEpXG4gICAgICA6IHRoaXMuY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0s7XG4gIH1cbiAgLyoqIFNldCBkYXRhIGZyb20gQ2hhckRhdGEgKi9cbiAgcHVibGljIHNldEZyb21DaGFyRGF0YSh2YWx1ZTogQ2hhckRhdGEpOiB2b2lkIHtcbiAgICB0aGlzLmZnID0gdmFsdWVbQ0hBUl9EQVRBX0FUVFJfSU5ERVhdO1xuICAgIHRoaXMuYmcgPSAwO1xuICAgIGxldCBjb21iaW5lZCA9IGZhbHNlO1xuICAgIC8vIHN1cnJvZ2F0ZXMgYW5kIGNvbWJpbmVkIHN0cmluZ3MgbmVlZCBzcGVjaWFsIHRyZWF0bWVudFxuICAgIGlmICh2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoID4gMikge1xuICAgICAgY29tYmluZWQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmICh2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoID09PSAyKSB7XG4gICAgICBjb25zdCBjb2RlID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAvLyBpZiB0aGUgMi1jaGFyIHN0cmluZyBpcyBhIHN1cnJvZ2F0ZSBjcmVhdGUgc2luZ2xlIGNvZGVwb2ludFxuICAgICAgLy8gZXZlcnl0aGluZyBlbHNlIGlzIGNvbWJpbmVkXG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgY29uc3Qgc2Vjb25kID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMSk7XG4gICAgICAgIGlmICgweERDMDAgPD0gc2Vjb25kICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgICAgICB0aGlzLmNvbnRlbnQgPSAoKGNvZGUgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwKSB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbWJpbmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmNvbnRlbnQgPSB2YWx1ZVtDSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKSB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH1cbiAgICBpZiAoY29tYmluZWQpIHtcbiAgICAgIHRoaXMuY29tYmluZWREYXRhID0gdmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdO1xuICAgICAgdGhpcy5jb250ZW50ID0gQ29udGVudC5JU19DT01CSU5FRF9NQVNLIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICB9XG4gIC8qKiBHZXQgZGF0YSBhcyBDaGFyRGF0YS4gKi9cbiAgcHVibGljIGdldEFzQ2hhckRhdGEoKTogQ2hhckRhdGEge1xuICAgIHJldHVybiBbdGhpcy5mZywgdGhpcy5nZXRDaGFycygpLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0Q29kZSgpXTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogVGhpcyB3YXMgaGVhdmlseSBpbnNwaXJlZCBmcm9tIG1pY3Jvc29mdC92c2NvZGUncyBkZXBlbmRlbmN5IGluamVjdGlvbiBzeXN0ZW0gKE1JVCkuXG4gKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBJU2VydmljZUlkZW50aWZpZXIgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBESV9UQVJHRVQgPSAnZGkkdGFyZ2V0JztcbmNvbnN0IERJX0RFUEVOREVOQ0lFUyA9ICdkaSRkZXBlbmRlbmNpZXMnO1xuXG5leHBvcnQgY29uc3Qgc2VydmljZVJlZ2lzdHJ5OiBNYXA8c3RyaW5nLCBJU2VydmljZUlkZW50aWZpZXI8YW55Pj4gPSBuZXcgTWFwKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlRGVwZW5kZW5jaWVzKGN0b3I6IGFueSk6IHsgaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+LCBpbmRleDogbnVtYmVyLCBvcHRpb25hbDogYm9vbGVhbiB9W10ge1xuICByZXR1cm4gY3RvcltESV9ERVBFTkRFTkNJRVNdIHx8IFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRGVjb3JhdG9yPFQ+KGlkOiBzdHJpbmcpOiBJU2VydmljZUlkZW50aWZpZXI8VD4ge1xuICBpZiAoc2VydmljZVJlZ2lzdHJ5LmhhcyhpZCkpIHtcbiAgICByZXR1cm4gc2VydmljZVJlZ2lzdHJ5LmdldChpZCkhO1xuICB9XG5cbiAgY29uc3QgZGVjb3JhdG9yOiBhbnkgPSBmdW5jdGlvbiAodGFyZ2V0OiBGdW5jdGlvbiwga2V5OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiBhbnkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0BJU2VydmljZU5hbWUtZGVjb3JhdG9yIGNhbiBvbmx5IGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBwYXJhbWV0ZXInKTtcbiAgICB9XG5cbiAgICBzdG9yZVNlcnZpY2VEZXBlbmRlbmN5KGRlY29yYXRvciwgdGFyZ2V0LCBpbmRleCk7XG4gIH07XG5cbiAgZGVjb3JhdG9yLl9pZCA9IGlkO1xuXG4gIHNlcnZpY2VSZWdpc3RyeS5zZXQoaWQsIGRlY29yYXRvcik7XG4gIHJldHVybiBkZWNvcmF0b3I7XG59XG5cbmZ1bmN0aW9uIHN0b3JlU2VydmljZURlcGVuZGVuY3koaWQ6IEZ1bmN0aW9uLCB0YXJnZXQ6IEZ1bmN0aW9uLCBpbmRleDogbnVtYmVyKTogdm9pZCB7XG4gIGlmICgodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9PT0gdGFyZ2V0KSB7XG4gICAgKHRhcmdldCBhcyBhbnkpW0RJX0RFUEVOREVOQ0lFU10ucHVzaCh7IGlkLCBpbmRleCB9KTtcbiAgfSBlbHNlIHtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfREVQRU5ERU5DSUVTXSA9IFt7IGlkLCBpbmRleCB9XTtcbiAgICAodGFyZ2V0IGFzIGFueSlbRElfVEFSR0VUXSA9IHRhcmdldDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURlY29yYXRpb24sIElEZWNvcmF0aW9uT3B0aW9ucywgSUxpbmtIYW5kbGVyLCBJTG9nZ2VyLCBJV2luZG93c1B0eSwgdHlwZSBJT3ZlcnZpZXdSdWxlck9wdGlvbnMgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuaW1wb3J0IHsgQ29yZU1vdXNlRW5jb2RpbmcsIENvcmVNb3VzZUV2ZW50VHlwZSwgQ3Vyc29ySW5hY3RpdmVTdHlsZSwgQ3Vyc29yU3R5bGUsIElBdHRyaWJ1dGVEYXRhLCBJQ2hhcnNldCwgSUNvbG9yLCBJQ29yZU1vdXNlRXZlbnQsIElDb3JlTW91c2VQcm90b2NvbCwgSURlY1ByaXZhdGVNb2RlcywgSURpc3Bvc2FibGUsIElNb2RlcywgSU9zY0xpbmtEYXRhLCBJV2luZG93T3B0aW9ucyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyLCBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBjcmVhdGVEZWNvcmF0b3IgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcbmltcG9ydCB0eXBlIHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5cbmV4cG9ydCBjb25zdCBJQnVmZmVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQnVmZmVyU2VydmljZT4oJ0J1ZmZlclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlclNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSBjb2xzOiBudW1iZXI7XG4gIHJlYWRvbmx5IHJvd3M6IG51bWJlcjtcbiAgcmVhZG9ubHkgYnVmZmVyOiBJQnVmZmVyO1xuICByZWFkb25seSBidWZmZXJzOiBJQnVmZmVyU2V0O1xuICBpc1VzZXJTY3JvbGxpbmc6IGJvb2xlYW47XG4gIG9uUmVzaXplOiBFdmVudDxJQnVmZmVyUmVzaXplRXZlbnQ+O1xuICBvblNjcm9sbDogRXZlbnQ8bnVtYmVyPjtcbiAgc2Nyb2xsKGVyYXNlQXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZD86IGJvb2xlYW4pOiB2b2lkO1xuICBzY3JvbGxMaW5lcyhkaXNwOiBudW1iZXIsIHN1cHByZXNzU2Nyb2xsRXZlbnQ/OiBib29sZWFuKTogdm9pZDtcbiAgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZDtcbiAgcmVzZXQoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyUmVzaXplRXZlbnQge1xuICBjb2xzOiBudW1iZXI7XG4gIHJvd3M6IG51bWJlcjtcbiAgY29sc0NoYW5nZWQ6IGJvb2xlYW47XG4gIHJvd3NDaGFuZ2VkOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVNb3VzZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNvcmVNb3VzZVNlcnZpY2U+KCdDb3JlTW91c2VTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlTW91c2VTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgYWN0aXZlUHJvdG9jb2w6IHN0cmluZztcbiAgYWN0aXZlRW5jb2Rpbmc6IHN0cmluZztcbiAgYXJlTW91c2VFdmVudHNBY3RpdmU6IGJvb2xlYW47XG4gIGFkZFByb3RvY29sKG5hbWU6IHN0cmluZywgcHJvdG9jb2w6IElDb3JlTW91c2VQcm90b2NvbCk6IHZvaWQ7XG4gIGFkZEVuY29kaW5nKG5hbWU6IHN0cmluZywgZW5jb2Rpbmc6IENvcmVNb3VzZUVuY29kaW5nKTogdm9pZDtcbiAgcmVzZXQoKTogdm9pZDtcblxuICAvKipcbiAgICogVHJpZ2dlcnMgYSBtb3VzZSBldmVudCB0byBiZSBzZW50LlxuICAgKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGV2ZW50IHBhc3NlZCBhbGwgcHJvdG9jb2wgcmVzdHJpY3Rpb25zIGFuZCBhIHJlcG9ydFxuICAgKiB3YXMgc2VudCwgb3RoZXJ3aXNlIGZhbHNlLiBUaGUgcmV0dXJuIHZhbHVlIG1heSBiZSB1c2VkIHRvIGRlY2lkZSB3aGV0aGVyXG4gICAqIHRoZSBkZWZhdWx0IGV2ZW50IGFjdGlvbiBpbiB0aGUgYm93c2VyIGNvbXBvbmVudCBzaG91bGQgYmUgb21pdHRlZC5cbiAgICpcbiAgICogTm90ZTogVGhlIG1ldGhvZCB3aWxsIGNoYW5nZSB2YWx1ZXMgb2YgdGhlIGdpdmVuIGV2ZW50IG9iamVjdFxuICAgKiB0byBmdWxsZmlsbCBwcm90b2NvbCBhbmQgZW5jb2RpbmcgcmVzdHJpY3Rpb25zLlxuICAgKi9cbiAgdHJpZ2dlck1vdXNlRXZlbnQoZXZlbnQ6IElDb3JlTW91c2VFdmVudCk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEV2ZW50IHRvIGFubm91bmNlIGNoYW5nZXMgaW4gbW91c2UgdHJhY2tpbmcuXG4gICAqL1xuICBvblByb3RvY29sQ2hhbmdlOiBFdmVudDxDb3JlTW91c2VFdmVudFR5cGU+O1xuXG4gIC8qKlxuICAgKiBIdW1hbiByZWFkYWJsZSB2ZXJzaW9uIG9mIG1vdXNlIGV2ZW50cy5cbiAgICovXG4gIGV4cGxhaW5FdmVudHMoZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUpOiB7IFtldmVudDogc3RyaW5nXTogYm9vbGVhbiB9O1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzIHdoZWVsIGV2ZW50IHRha2luZyBwYXJ0aWFsIHNjcm9sbCBpbnRvIGFjY291bnQuXG4gICAqL1xuICBjb25zdW1lV2hlZWxFdmVudChldjogV2hlZWxFdmVudCwgY2VsbEhlaWdodD86IG51bWJlciwgZHByPzogbnVtYmVyKTogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgSUNvcmVTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDb3JlU2VydmljZT4oJ0NvcmVTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDb3JlU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsbHkgdGhlIGN1cnNvciB3aWxsIG5vdCBiZSB2aXNpYmxlIHVudGlsIHRoZSBmaXJzdCB0aW1lIHRoZSB0ZXJtaW5hbFxuICAgKiBpcyBmb2N1c2VkLlxuICAgKi9cbiAgaXNDdXJzb3JJbml0aWFsaXplZDogYm9vbGVhbjtcbiAgaXNDdXJzb3JIaWRkZW46IGJvb2xlYW47XG5cbiAgcmVhZG9ubHkgbW9kZXM6IElNb2RlcztcbiAgcmVhZG9ubHkgZGVjUHJpdmF0ZU1vZGVzOiBJRGVjUHJpdmF0ZU1vZGVzO1xuXG4gIHJlYWRvbmx5IG9uRGF0YTogRXZlbnQ8c3RyaW5nPjtcbiAgcmVhZG9ubHkgb25Vc2VySW5wdXQ6IEV2ZW50PHZvaWQ+O1xuICByZWFkb25seSBvbkJpbmFyeTogRXZlbnQ8c3RyaW5nPjtcbiAgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b206IEV2ZW50PHZvaWQ+O1xuXG4gIHJlc2V0KCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRyaWdnZXJzIHRoZSBvbkRhdGEgZXZlbnQgaW4gdGhlIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRoYXQgaXMgYmVpbmcgZW1pdHRlZC5cbiAgICogQHBhcmFtIHdhc1VzZXJJbnB1dCBXaGV0aGVyIHRoZSBkYXRhIG9yaWdpbmF0ZWQgZnJvbSB0aGUgdXNlciAoYXMgb3Bwb3NlZCB0b1xuICAgKiByZXN1bHRpbmcgZnJvbSBwYXJzaW5nIGluY29taW5nIGRhdGEpLiBXaGVuIHRydWUgdGhpcyB3aWxsIGFsc286XG4gICAqIC0gU2Nyb2xsIHRvIHRoZSBib3R0b20gb2YgdGhlIGJ1ZmZlciBpZiBvcHRpb24gc2Nyb2xsT25Vc2VySW5wdXQgaXMgdHJ1ZS5cbiAgICogLSBGaXJlIHRoZSBgb25Vc2VySW5wdXRgIGV2ZW50IChzbyBzZWxlY3Rpb24gY2FuIGJlIGNsZWFyZWQpLlxuICAgKi9cbiAgdHJpZ2dlckRhdGFFdmVudChkYXRhOiBzdHJpbmcsIHdhc1VzZXJJbnB1dD86IGJvb2xlYW4pOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyB0aGUgb25CaW5hcnkgZXZlbnQgaW4gdGhlIHB1YmxpYyBBUEkuXG4gICAqIEBwYXJhbSBkYXRhIFRoZSBkYXRhIHRoYXQgaXMgYmVpbmcgZW1pdHRlZC5cbiAgICovXG4gIHRyaWdnZXJCaW5hcnlFdmVudChkYXRhOiBzdHJpbmcpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSUNoYXJzZXRTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDaGFyc2V0U2VydmljZT4oJ0NoYXJzZXRTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDaGFyc2V0U2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIGNoYXJzZXQ6IElDaGFyc2V0IHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBnbGV2ZWw6IG51bWJlcjtcblxuICByZXNldCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gZ1xuICAgKi9cbiAgc2V0Z0xldmVsKGc6IG51bWJlcik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2hhcnNldCBmb3IgdGhlIGdpdmVuIEcgbGV2ZWwgb2YgdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gZ1xuICAgKiBAcGFyYW0gY2hhcnNldFxuICAgKi9cbiAgc2V0Z0NoYXJzZXQoZzogbnVtYmVyLCBjaGFyc2V0OiBJQ2hhcnNldCB8IHVuZGVmaW5lZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNlcnZpY2VJZGVudGlmaWVyPFQ+IHtcbiAgKC4uLmFyZ3M6IGFueVtdKTogdm9pZDtcbiAgdHlwZTogVDtcbiAgX2lkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJyYW5kZWRTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG59XG5cbnR5cGUgR2V0TGVhZGluZ05vblNlcnZpY2VBcmdzPFRBcmdzIGV4dGVuZHMgYW55W10+ID0gVEFyZ3MgZXh0ZW5kcyBbXSA/IFtdXG4gIDogVEFyZ3MgZXh0ZW5kcyBbLi4uaW5mZXIgVEZpcnN0LCBpbmZlciBUTGFzdF0gPyBUTGFzdCBleHRlbmRzIElCcmFuZGVkU2VydmljZSA/IEdldExlYWRpbmdOb25TZXJ2aWNlQXJnczxURmlyc3Q+IDogVEFyZ3NcbiAgICA6IG5ldmVyO1xuXG5leHBvcnQgY29uc3QgSUluc3RhbnRpYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElJbnN0YW50aWF0aW9uU2VydmljZT4oJ0luc3RhbnRpYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElJbnN0YW50aWF0aW9uU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHNldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPiwgaW5zdGFuY2U6IFQpOiB2b2lkO1xuICBnZXRTZXJ2aWNlPFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4pOiBUIHwgdW5kZWZpbmVkO1xuICBjcmVhdGVJbnN0YW5jZTxDdG9yIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55LCBSIGV4dGVuZHMgSW5zdGFuY2VUeXBlPEN0b3I+Pih0OiBDdG9yLCAuLi5hcmdzOiBHZXRMZWFkaW5nTm9uU2VydmljZUFyZ3M8Q29uc3RydWN0b3JQYXJhbWV0ZXJzPEN0b3I+Pik6IFI7XG59XG5cbmV4cG9ydCBlbnVtIExvZ0xldmVsRW51bSB7XG4gIFRSQUNFID0gMCxcbiAgREVCVUcgPSAxLFxuICBJTkZPID0gMixcbiAgV0FSTiA9IDMsXG4gIEVSUk9SID0gNCxcbiAgT0ZGID0gNVxufVxuXG5leHBvcnQgY29uc3QgSUxvZ1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUxvZ1NlcnZpY2U+KCdMb2dTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElMb2dTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgbG9nTGV2ZWw6IExvZ0xldmVsRW51bTtcblxuICB0cmFjZShtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIGRlYnVnKG1lc3NhZ2U6IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZDtcbiAgaW5mbyhtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG4gIHdhcm4obWVzc2FnZTogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkO1xuICBlcnJvcihtZXNzYWdlOiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJT3B0aW9uc1NlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SU9wdGlvbnNTZXJ2aWNlPignT3B0aW9uc1NlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSU9wdGlvbnNTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJlYWQgb25seSBhY2Nlc3MgdG8gdGhlIHJhdyBvcHRpb25zIG9iamVjdCwgdGhpcyBpcyBhbiBpbnRlcm5hbC1vbmx5IGZhc3QgcGF0aCBmb3IgYWNjZXNzaW5nXG4gICAqIHNpbmdsZSBvcHRpb25zIHdpdGhvdXQgYW55IHZhbGlkYXRpb24gYXMgd2UgdHJ1c3QgVHlwZVNjcmlwdCB0byBlbmZvcmNlIGNvcnJlY3QgdXNhZ2VcbiAgICogaW50ZXJuYWxseS5cbiAgICovXG4gIHJlYWRvbmx5IHJhd09wdGlvbnM6IFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+O1xuXG4gIC8qKlxuICAgKiBPcHRpb25zIGFzIGV4cG9zZWQgdGhyb3VnaCB0aGUgcHVibGljIEFQSSwgdGhpcyBwcm9wZXJ0eSB1c2VzIGdldHRlcnMgYW5kIHNldHRlcnMgd2l0aFxuICAgKiB2YWxpZGF0aW9uIHdoaWNoIG1ha2VzIGl0IHNhZmVyIGJ1dCBzbG93ZXIuIHtAbGluayByYXdPcHRpb25zfSBzaG91bGQgYmUgdXNlZCBmb3IgcHJldHR5IG11Y2hcbiAgICogYWxsIGludGVybmFsIHVzYWdlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zLlxuICAgKi9cbiAgcmVhZG9ubHkgb3B0aW9uczogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz47XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHdoZW4gYW55IG9wdGlvbiBjaGFuZ2VzLlxuICAgKi9cbiAgcmVhZG9ubHkgb25PcHRpb25DaGFuZ2U6IEV2ZW50PGtleW9mIElUZXJtaW5hbE9wdGlvbnM+O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIGZvciB3aGVuIGEgc3BlY2lmaWMgb3B0aW9uIGNoYW5nZXMsIHRoaXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2QgdGhhdCBpc1xuICAgKiBwcmVmZXJyZWQgb3ZlciB7QGxpbmsgb25PcHRpb25DaGFuZ2V9IHdoZW4gb25seSBhIHNpbmdsZSBvcHRpb24gaXMgYmVpbmcgbGlzdGVuZWQgdG8uXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25hbWluZy1jb252ZW50aW9uXG4gIG9uU3BlY2lmaWNPcHRpb25DaGFuZ2U8VCBleHRlbmRzIGtleW9mIElUZXJtaW5hbE9wdGlvbnM+KGtleTogVCwgbGlzdGVuZXI6IChhcmcxOiBSZXF1aXJlZDxJVGVybWluYWxPcHRpb25zPltUXSkgPT4gYW55KTogSURpc3Bvc2FibGU7XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHdoZW4gYSBzZXQgb2Ygc3BlY2lmaWMgb3B0aW9ucyBjaGFuZ2UsIHRoaXMgaXMgYSBjb252ZW5pZW5jZSBtZXRob2RcbiAgICogdGhhdCBpcyBwcmVmZXJyZWQgb3ZlciB7QGxpbmsgb25PcHRpb25DaGFuZ2V9IHdoZW4gbXVsdGlwbGUgb3B0aW9ucyBhcmUgYmVpbmcgbGlzdGVuZWQgdG8gYW5kXG4gICAqIGhhbmRsZWQgdGhlIHNhbWUgd2F5LlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICBvbk11bHRpcGxlT3B0aW9uQ2hhbmdlKGtleXM6IChrZXlvZiBJVGVybWluYWxPcHRpb25zKVtdLCBsaXN0ZW5lcjogKCkgPT4gYW55KTogSURpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCB0eXBlIEZvbnRXZWlnaHQgPSAnbm9ybWFsJyB8ICdib2xkJyB8ICcxMDAnIHwgJzIwMCcgfCAnMzAwJyB8ICc0MDAnIHwgJzUwMCcgfCAnNjAwJyB8ICc3MDAnIHwgJzgwMCcgfCAnOTAwJyB8IG51bWJlcjtcbmV4cG9ydCB0eXBlIExvZ0xldmVsID0gJ3RyYWNlJyB8ICdkZWJ1ZycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIHwgJ29mZic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlcm1pbmFsT3B0aW9ucyB7XG4gIGFsbG93UHJvcG9zZWRBcGk/OiBib29sZWFuO1xuICBhbGxvd1RyYW5zcGFyZW5jeT86IGJvb2xlYW47XG4gIGFsdENsaWNrTW92ZXNDdXJzb3I/OiBib29sZWFuO1xuICBjb2xzPzogbnVtYmVyO1xuICBjb252ZXJ0RW9sPzogYm9vbGVhbjtcbiAgY3Vyc29yQmxpbms/OiBib29sZWFuO1xuICBjdXJzb3JTdHlsZT86IEN1cnNvclN0eWxlO1xuICBjdXJzb3JXaWR0aD86IG51bWJlcjtcbiAgY3Vyc29ySW5hY3RpdmVTdHlsZT86IEN1cnNvckluYWN0aXZlU3R5bGU7XG4gIGN1c3RvbUdseXBocz86IGJvb2xlYW47XG4gIGRpc2FibGVTdGRpbj86IGJvb2xlYW47XG4gIGRvY3VtZW50T3ZlcnJpZGU/OiBhbnkgfCBudWxsO1xuICBkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycz86IGJvb2xlYW47XG4gIC8qKiBAZGVwcmVjYXRlZCBObyBsb25nZXIgc3VwcG9ydGVkICovXG4gIGZhc3RTY3JvbGxNb2RpZmllcj86ICdub25lJyB8ICdhbHQnIHwgJ2N0cmwnIHwgJ3NoaWZ0JztcbiAgZmFzdFNjcm9sbFNlbnNpdGl2aXR5PzogbnVtYmVyO1xuICBmb250U2l6ZT86IG51bWJlcjtcbiAgZm9udEZhbWlseT86IHN0cmluZztcbiAgZm9udFdlaWdodD86IEZvbnRXZWlnaHQ7XG4gIGZvbnRXZWlnaHRCb2xkPzogRm9udFdlaWdodDtcbiAgaWdub3JlQnJhY2tldGVkUGFzdGVNb2RlPzogYm9vbGVhbjtcbiAgbGV0dGVyU3BhY2luZz86IG51bWJlcjtcbiAgbGluZUhlaWdodD86IG51bWJlcjtcbiAgbGlua0hhbmRsZXI/OiBJTGlua0hhbmRsZXIgfCBudWxsO1xuICBsb2dMZXZlbD86IExvZ0xldmVsO1xuICBsb2dnZXI/OiBJTG9nZ2VyIHwgbnVsbDtcbiAgbWFjT3B0aW9uSXNNZXRhPzogYm9vbGVhbjtcbiAgbWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24/OiBib29sZWFuO1xuICBtaW5pbXVtQ29udHJhc3RSYXRpbz86IG51bWJlcjtcbiAgcmVmbG93Q3Vyc29yTGluZT86IGJvb2xlYW47XG4gIHJlc2NhbGVPdmVybGFwcGluZ0dseXBocz86IGJvb2xlYW47XG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZD86IGJvb2xlYW47XG4gIHJvd3M/OiBudW1iZXI7XG4gIHNjcmVlblJlYWRlck1vZGU/OiBib29sZWFuO1xuICBzY3JvbGxiYWNrPzogbnVtYmVyO1xuICBzY3JvbGxPblVzZXJJbnB1dD86IGJvb2xlYW47XG4gIHNjcm9sbFNlbnNpdGl2aXR5PzogbnVtYmVyO1xuICBzbW9vdGhTY3JvbGxEdXJhdGlvbj86IG51bWJlcjtcbiAgdGFiU3RvcFdpZHRoPzogbnVtYmVyO1xuICB0aGVtZT86IElUaGVtZTtcbiAgd2luZG93c01vZGU/OiBib29sZWFuO1xuICB3aW5kb3dzUHR5PzogSVdpbmRvd3NQdHk7XG4gIHdpbmRvd09wdGlvbnM/OiBJV2luZG93T3B0aW9ucztcbiAgd29yZFNlcGFyYXRvcj86IHN0cmluZztcbiAgb3ZlcnZpZXdSdWxlcj86IElPdmVydmlld1J1bGVyT3B0aW9ucztcbiAgc2Nyb2xsT25FcmFzZUluRGlzcGxheT86IGJvb2xlYW47XG5cbiAgW2tleTogc3RyaW5nXTogYW55O1xuICBjYW5jZWxFdmVudHM6IGJvb2xlYW47XG4gIHRlcm1OYW1lOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRoZW1lIHtcbiAgZm9yZWdyb3VuZD86IHN0cmluZztcbiAgYmFja2dyb3VuZD86IHN0cmluZztcbiAgY3Vyc29yPzogc3RyaW5nO1xuICBjdXJzb3JBY2NlbnQ/OiBzdHJpbmc7XG4gIHNlbGVjdGlvbkZvcmVncm91bmQ/OiBzdHJpbmc7XG4gIHNlbGVjdGlvbkJhY2tncm91bmQ/OiBzdHJpbmc7XG4gIHNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZD86IHN0cmluZztcbiAgc2Nyb2xsYmFyU2xpZGVyQmFja2dyb3VuZD86IHN0cmluZztcbiAgc2Nyb2xsYmFyU2xpZGVySG92ZXJCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBzY3JvbGxiYXJTbGlkZXJBY3RpdmVCYWNrZ3JvdW5kPzogc3RyaW5nO1xuICBvdmVydmlld1J1bGVyQm9yZGVyPzogc3RyaW5nO1xuICBibGFjaz86IHN0cmluZztcbiAgcmVkPzogc3RyaW5nO1xuICBncmVlbj86IHN0cmluZztcbiAgeWVsbG93Pzogc3RyaW5nO1xuICBibHVlPzogc3RyaW5nO1xuICBtYWdlbnRhPzogc3RyaW5nO1xuICBjeWFuPzogc3RyaW5nO1xuICB3aGl0ZT86IHN0cmluZztcbiAgYnJpZ2h0QmxhY2s/OiBzdHJpbmc7XG4gIGJyaWdodFJlZD86IHN0cmluZztcbiAgYnJpZ2h0R3JlZW4/OiBzdHJpbmc7XG4gIGJyaWdodFllbGxvdz86IHN0cmluZztcbiAgYnJpZ2h0Qmx1ZT86IHN0cmluZztcbiAgYnJpZ2h0TWFnZW50YT86IHN0cmluZztcbiAgYnJpZ2h0Q3lhbj86IHN0cmluZztcbiAgYnJpZ2h0V2hpdGU/OiBzdHJpbmc7XG4gIGV4dGVuZGVkQW5zaT86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgY29uc3QgSU9zY0xpbmtTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElPc2NMaW5rU2VydmljZT4oJ09zY0xpbmtTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElPc2NMaW5rU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGluayB0byB0aGUgc2VydmljZSwgcmV0dXJuaW5nIHRoZSBsaW5rIElELiBUaGUgbGluayBkYXRhIGlzIG1hbmFnZWQgYnkgdGhpc1xuICAgKiBzZXJ2aWNlIGFuZCB3aWxsIGJlIGZyZWVkIHdoZW4gdGhpcyBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiBpcyB0cmltbWVkIG9mZiB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcmVnaXN0ZXJMaW5rKGxpbmtEYXRhOiBJT3NjTGlua0RhdGEpOiBudW1iZXI7XG4gIC8qKlxuICAgKiBBZGRzIGEgbGluZSB0byBhIGxpbmsgaWYgbmVlZGVkLlxuICAgKi9cbiAgYWRkTGluZVRvTGluayhsaW5rSWQ6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZDtcbiAgLyoqIEdldCB0aGUgbGluayBkYXRhIGFzc29jaWF0ZWQgd2l0aCBhIGxpbmsgSUQuICovXG4gIGdldExpbmtEYXRhKGxpbmtJZDogbnVtYmVyKTogSU9zY0xpbmtEYXRhIHwgdW5kZWZpbmVkO1xufVxuXG4vKlxuICogV2lkdGggYW5kIEdyYXBoZW1lX0NsdXN0ZXJfQnJlYWsgcHJvcGVydGllcyBvZiBhIGNoYXJhY3RlciBhcyBhIGJpdCBtYXNrLlxuICpcbiAqIGJpdCAwOiBzaG91bGRKb2luIC0gc2hvdWxkIGNvbWJpbmUgd2l0aCBwcmVjZWRpbmcgY2hhcmFjdGVyLlxuICogYml0IDEuLjI6IHdjd2lkdGggLSBzZWUgVW5pY29kZUNoYXJXaWR0aC5cbiAqIGJpdCAzLi4zMTogY2xhc3Mgb2YgY2hhcmFjdGVyIChjdXJyZW50bHkgb25seSA0IGJpdHMgYXJlIHVzZWQpLlxuICogICBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lZCBncmFwaGVtZSBjbHVzdGVyaW5nIC0gaS5lLiB3aGljaCBjb2RlcG9pbnRzXG4gKiAgIGFyZSB0byBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIGNvbXBvdW5kIGNoYXJhY3Rlci5cbiAqXG4gKiBVc2UgdGhlIFVuaWNvZGVTZXJ2aWNlIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVQcm9wZXJ0eVZhbHVlIHRvIGNyZWF0ZSBhXG4gKiBVbmljb2RlQ2hhclByb3BlcnRpZXM7IHVzZSBleHRyYWN0U2hvdWxkSm9pbiwgZXh0cmFjdFdpZHRoLCBhbmRcbiAqIGV4dHJhY3RDaGFyS2luZCB0byBleHRyYWN0IHRoZSBjb21wb25lbnRzLlxuICovXG5leHBvcnQgdHlwZSBVbmljb2RlQ2hhclByb3BlcnRpZXMgPSBudW1iZXI7XG5cbi8qKlxuICogV2lkdGggaW4gY29sdW1ucyBvZiBhIGNoYXJhY3Rlci5cbiAqIEluIGEgQ0pLIGNvbnRleHQsIFwiaGFsZi13aWR0aFwiIGNoYXJhY3RlcnMgKHN1Y2ggYXMgTGF0aW4pIGFyZSB3aWR0aCAxLFxuICogd2hpbGUgXCJmdWxsLXdpZHRoXCIgY2hhcmFjdGVycyAoc3VjaCBhcyBLYW5qaSkgYXJlIDIgY29sdW1ucyB3aWRlLlxuICogQ29tYmluaW5nIGNoYXJhY3RlcnMgKHN1Y2ggYXMgYWNjZW50cykgYXJlIHdpZHRoIDAuXG4gKi9cbmV4cG9ydCB0eXBlIFVuaWNvZGVDaGFyV2lkdGggPSAwIHwgMSB8IDI7XG5cbmV4cG9ydCBjb25zdCBJVW5pY29kZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVVuaWNvZGVTZXJ2aWNlPignVW5pY29kZVNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVVuaWNvZGVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG4gIC8qKiBSZWdpc3RlciBhbiBVbmljb2RlIHZlcnNpb24gcHJvdmlkZXIuICovXG4gIHJlZ2lzdGVyKHByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcik6IHZvaWQ7XG4gIC8qKiBSZWdpc3RlcmVkIFVuaWNvZGUgdmVyc2lvbnMuICovXG4gIHJlYWRvbmx5IHZlcnNpb25zOiBzdHJpbmdbXTtcbiAgLyoqIEN1cnJlbnRseSBhY3RpdmUgdmVyc2lvbi4gKi9cbiAgYWN0aXZlVmVyc2lvbjogc3RyaW5nO1xuICAvKiogRXZlbnQgdHJpZ2dlcmVkLCB3aGVuIGFjdGl2YXRlIHZlcnNpb24gY2hhbmdlZC4gKi9cbiAgcmVhZG9ubHkgb25DaGFuZ2U6IEV2ZW50PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgdmVyc2lvbiBkZXBlbmRlbnRcbiAgICovXG4gIHdjd2lkdGgoY29kZXBvaW50OiBudW1iZXIpOiBVbmljb2RlQ2hhcldpZHRoO1xuICBnZXRTdHJpbmdDZWxsV2lkdGgoczogc3RyaW5nKTogbnVtYmVyO1xuICAvKipcbiAgICogUmV0dXJuIGNoYXJhY3RlciB3aWR0aCBhbmQgdHlwZSBmb3IgZ3JhcGhlbWUgY2x1c3RlcmluZy5cbiAgICogSWYgcHJlY2VkaW5nICE9IDAsIGl0IGlzIHRoZSByZXR1cm4gY29kZSBmcm9tIHRoZSBwcmV2aW91cyBjaGFyYWN0ZXI7XG4gICAqIGluIHRoYXQgY2FzZSB0aGUgcmVzdWx0IHNwZWNpZmllcyBpZiB0aGUgY2hhcmFjdGVycyBzaG91bGQgYmUgam9pbmVkLlxuICAgKi9cbiAgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcmVhZG9ubHkgdmVyc2lvbjogc3RyaW5nO1xuICB3Y3dpZHRoKHVjczogbnVtYmVyKTogVW5pY29kZUNoYXJXaWR0aDtcbiAgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzO1xufVxuXG5leHBvcnQgY29uc3QgSURlY29yYXRpb25TZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElEZWNvcmF0aW9uU2VydmljZT4oJ0RlY29yYXRpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElEZWNvcmF0aW9uU2VydmljZSBleHRlbmRzIElEaXNwb3NhYmxlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGRlY29yYXRpb25zOiBJdGVyYWJsZUl0ZXJhdG9yPElJbnRlcm5hbERlY29yYXRpb24+O1xuICByZWFkb25seSBvbkRlY29yYXRpb25SZWdpc3RlcmVkOiBFdmVudDxJSW50ZXJuYWxEZWNvcmF0aW9uPjtcbiAgcmVhZG9ubHkgb25EZWNvcmF0aW9uUmVtb3ZlZDogRXZlbnQ8SUludGVybmFsRGVjb3JhdGlvbj47XG4gIHJlZ2lzdGVyRGVjb3JhdGlvbihkZWNvcmF0aW9uT3B0aW9uczogSURlY29yYXRpb25PcHRpb25zKTogSURlY29yYXRpb24gfCB1bmRlZmluZWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2FsbGJhY2sgb3ZlciB0aGUgZGVjb3JhdGlvbiBhdCBhIGNlbGwgKGluIG5vIHBhcnRpY3VsYXIgb3JkZXIpLiBUaGlzIHVzZXMgYSBjYWxsYmFja1xuICAgKiBpbnN0ZWFkIG9mIGFuIGl0ZXJhdG9yIGFzIGl0J3MgdHlwaWNhbGx5IHVzZWQgaW4gaG90IGNvZGUgcGF0aHMuXG4gICAqL1xuICBmb3JFYWNoRGVjb3JhdGlvbkF0Q2VsbCh4OiBudW1iZXIsIGxpbmU6IG51bWJlciwgbGF5ZXI6ICdib3R0b20nIHwgJ3RvcCcgfCB1bmRlZmluZWQsIGNhbGxiYWNrOiAoZGVjb3JhdGlvbjogSUludGVybmFsRGVjb3JhdGlvbikgPT4gdm9pZCk6IHZvaWQ7XG59XG5leHBvcnQgaW50ZXJmYWNlIElJbnRlcm5hbERlY29yYXRpb24gZXh0ZW5kcyBJRGVjb3JhdGlvbiB7XG4gIHJlYWRvbmx5IG9wdGlvbnM6IElEZWNvcmF0aW9uT3B0aW9ucztcbiAgcmVhZG9ubHkgYmFja2dyb3VuZENvbG9yUkdCOiBJQ29sb3IgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGZvcmVncm91bmRDb2xvclJHQjogSUNvbG9yIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBvblJlbmRlckVtaXR0ZXI6IEVtaXR0ZXI8SFRNTEVsZW1lbnQ+O1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclJhbmdlLCBJTGluayB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUxpbmtQcm92aWRlciB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElPc2NMaW5rU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBPc2NMaW5rUHJvdmlkZXIgaW1wbGVtZW50cyBJTGlua1Byb3ZpZGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBASU9zY0xpbmtTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29zY0xpbmtTZXJ2aWNlOiBJT3NjTGlua1NlcnZpY2VcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgcHJvdmlkZUxpbmtzKHk6IG51bWJlciwgY2FsbGJhY2s6IChsaW5rczogSUxpbmtbXSB8IHVuZGVmaW5lZCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoeSAtIDEpO1xuICAgIGlmICghbGluZSkge1xuICAgICAgY2FsbGJhY2sodW5kZWZpbmVkKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQ6IElMaW5rW10gPSBbXTtcbiAgICBjb25zdCBsaW5rSGFuZGxlciA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGlua0hhbmRsZXI7XG4gICAgY29uc3QgY2VsbCA9IG5ldyBDZWxsRGF0YSgpO1xuICAgIGNvbnN0IGxpbmVMZW5ndGggPSBsaW5lLmdldFRyaW1tZWRMZW5ndGgoKTtcbiAgICBsZXQgY3VycmVudExpbmtJZCA9IC0xO1xuICAgIGxldCBjdXJyZW50U3RhcnQgPSAtMTtcbiAgICBsZXQgZmluaXNoTGluayA9IGZhbHNlO1xuICAgIGZvciAobGV0IHggPSAwOyB4IDwgbGluZUxlbmd0aDsgeCsrKSB7XG4gICAgICAvLyBNaW5vciBvcHRpbWl6YXRpb24sIG9ubHkgY2hlY2sgZm9yIGNvbnRlbnQgaWYgdGhlcmUgaXNuJ3QgYSBsaW5rIGluIGNhc2UgdGhlIGxpbmsgZW5kcyB3aXRoXG4gICAgICAvLyBhIG51bGwgY2VsbFxuICAgICAgaWYgKGN1cnJlbnRTdGFydCA9PT0gLTEgJiYgIWxpbmUuaGFzQ29udGVudCh4KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGluZS5sb2FkQ2VsbCh4LCBjZWxsKTtcbiAgICAgIGlmIChjZWxsLmhhc0V4dGVuZGVkQXR0cnMoKSAmJiBjZWxsLmV4dGVuZGVkLnVybElkKSB7XG4gICAgICAgIGlmIChjdXJyZW50U3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgY3VycmVudFN0YXJ0ID0geDtcbiAgICAgICAgICBjdXJyZW50TGlua0lkID0gY2VsbC5leHRlbmRlZC51cmxJZDtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaW5pc2hMaW5rID0gY2VsbC5leHRlbmRlZC51cmxJZCAhPT0gY3VycmVudExpbmtJZDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnJlbnRTdGFydCAhPT0gLTEpIHtcbiAgICAgICAgICBmaW5pc2hMaW5rID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluaXNoTGluayB8fCAoY3VycmVudFN0YXJ0ICE9PSAtMSAmJiB4ID09PSBsaW5lTGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuX29zY0xpbmtTZXJ2aWNlLmdldExpbmtEYXRhKGN1cnJlbnRMaW5rSWQpPy51cmk7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgLy8gVGhlc2UgcmFuZ2VzIGFyZSAxLWJhc2VkXG4gICAgICAgICAgY29uc3QgcmFuZ2U6IElCdWZmZXJSYW5nZSA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiB7XG4gICAgICAgICAgICAgIHg6IGN1cnJlbnRTdGFydCArIDEsXG4gICAgICAgICAgICAgIHlcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbmQ6IHtcbiAgICAgICAgICAgICAgLy8gT2Zmc2V0IGVuZCB4IGlmIGl0J3MgYSBsaW5rIHRoYXQgZW5kcyBvbiB0aGUgbGFzdCBjZWxsIGluIHRoZSBsaW5lXG4gICAgICAgICAgICAgIHg6IHggKyAoIWZpbmlzaExpbmsgJiYgeCA9PT0gbGluZUxlbmd0aCAtIDEgPyAxIDogMCksXG4gICAgICAgICAgICAgIHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgbGV0IGlnbm9yZUxpbmsgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIWxpbmtIYW5kbGVyPy5hbGxvd05vbkh0dHBQcm90b2NvbHMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBVUkwodGV4dCk7XG4gICAgICAgICAgICAgIGlmICghWydodHRwOicsICdodHRwczonXS5pbmNsdWRlcyhwYXJzZWQucHJvdG9jb2wpKSB7XG4gICAgICAgICAgICAgICAgaWdub3JlTGluayA9IHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgLy8gSWdub3JlIGludmFsaWQgVVJMcyB0byBwcmV2ZW50IHVuZXhwZWN0ZWQgYmVoYXZpb3JzXG4gICAgICAgICAgICAgIGlnbm9yZUxpbmsgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaWdub3JlTGluaykge1xuICAgICAgICAgICAgLy8gT1NDIGxpbmtzIGFsd2F5cyB1c2UgdW5kZXJsaW5lIGFuZCBwb2ludGVyIGRlY29yYXRpb25zXG4gICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgIHJhbmdlLFxuICAgICAgICAgICAgICBhY3RpdmF0ZTogKGUsIHRleHQpID0+IChsaW5rSGFuZGxlciA/IGxpbmtIYW5kbGVyLmFjdGl2YXRlKGUsIHRleHQsIHJhbmdlKSA6IGRlZmF1bHRBY3RpdmF0ZShlLCB0ZXh0KSksXG4gICAgICAgICAgICAgIGhvdmVyOiAoZSwgdGV4dCkgPT4gbGlua0hhbmRsZXI/LmhvdmVyPy4oZSwgdGV4dCwgcmFuZ2UpLFxuICAgICAgICAgICAgICBsZWF2ZTogKGUsIHRleHQpID0+IGxpbmtIYW5kbGVyPy5sZWF2ZT8uKGUsIHRleHQsIHJhbmdlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbmlzaExpbmsgPSBmYWxzZTtcblxuICAgICAgICAvLyBDbGVhciBsaW5rIG9yIHN0YXJ0IGEgbmV3IGxpbmsgaWYgb25lIHN0YXJ0cyBpbW1lZGlhdGVseVxuICAgICAgICBpZiAoY2VsbC5oYXNFeHRlbmRlZEF0dHJzKCkgJiYgY2VsbC5leHRlbmRlZC51cmxJZCkge1xuICAgICAgICAgIGN1cnJlbnRTdGFydCA9IHg7XG4gICAgICAgICAgY3VycmVudExpbmtJZCA9IGNlbGwuZXh0ZW5kZWQudXJsSWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFN0YXJ0ID0gLTE7XG4gICAgICAgICAgY3VycmVudExpbmtJZCA9IC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETzogSGFuZGxlIGZldGNoaW5nIGFuZCByZXR1cm5pbmcgb3RoZXIgbGluayByYW5nZXMgdG8gdW5kZXJsaW5lIG90aGVyIGxpbmtzIHdpdGggdGhlIHNhbWVcbiAgICAvLyAgICAgICBpZFxuICAgIGNhbGxiYWNrKHJlc3VsdCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdEFjdGl2YXRlKGU6IE1vdXNlRXZlbnQsIHVyaTogc3RyaW5nKTogdm9pZCB7XG4gIGNvbnN0IGFuc3dlciA9IGNvbmZpcm0oYERvIHlvdSB3YW50IHRvIG5hdmlnYXRlIHRvICR7dXJpfT9cXG5cXG5XQVJOSU5HOiBUaGlzIGxpbmsgY291bGQgcG90ZW50aWFsbHkgYmUgZGFuZ2Vyb3VzYCk7XG4gIGlmIChhbnN3ZXIpIHtcbiAgICBjb25zdCBuZXdXaW5kb3cgPSB3aW5kb3cub3BlbigpO1xuICAgIGlmIChuZXdXaW5kb3cpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ld1dpbmRvdy5vcGVuZXIgPSBudWxsO1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIC8vIG5vLW9wLCBFbGVjdHJvbiBjYW4gdGhyb3dcbiAgICAgIH1cbiAgICAgIG5ld1dpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ09wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCcpO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvc2hhcmVkL1R5cGVzJztcbmltcG9ydCB7IElDb2xvclNldCwgSUxpbmssIFJlYWRvbmx5Q29sb3JTZXQgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IElTZWxlY3Rpb25SZWRyYXdSZXF1ZXN0RXZlbnQgYXMgSVNlbGVjdGlvblJlcXVlc3RSZWRyYXdFdmVudCwgSVNlbGVjdGlvblJlcXVlc3RTY3JvbGxMaW5lc0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vVHlwZXMnO1xuaW1wb3J0IHsgY3JlYXRlRGVjb3JhdG9yIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VSZWdpc3RyeSc7XG5pbXBvcnQgeyBBbGxDb2xvckluZGV4LCBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgdHlwZSB7IEV2ZW50IH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuXG5leHBvcnQgY29uc3QgSUNoYXJTaXplU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJQ2hhclNpemVTZXJ2aWNlPignQ2hhclNpemVTZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElDaGFyU2l6ZVNlcnZpY2Uge1xuICBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICByZWFkb25seSB3aWR0aDogbnVtYmVyO1xuICByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgaGFzVmFsaWRTaXplOiBib29sZWFuO1xuXG4gIHJlYWRvbmx5IG9uQ2hhclNpemVDaGFuZ2U6IEV2ZW50PHZvaWQ+O1xuXG4gIG1lYXN1cmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGNvbnN0IElDb3JlQnJvd3NlclNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SUNvcmVCcm93c2VyU2VydmljZT4oJ0NvcmVCcm93c2VyU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ29yZUJyb3dzZXJTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgaXNGb2N1c2VkOiBib29sZWFuO1xuXG4gIHJlYWRvbmx5IG9uRHByQ2hhbmdlOiBFdmVudDxudW1iZXI+O1xuICByZWFkb25seSBvbldpbmRvd0NoYW5nZTogRXZlbnQ8V2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXM+O1xuXG4gIC8qKlxuICAgKiBHZXRzIG9yIHNldHMgdGhlIHBhcmVudCB3aW5kb3cgdGhhdCB0aGUgdGVybWluYWwgaXMgcmVuZGVyZWQgaW50by4gRE9NIGFuZCByZW5kZXJpbmcgQVBJcyAoZS5nLlxuICAgKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHNob3VsZCBiZSBpbnZva2VkIGluIHRoZSBjb250ZXh0IG9mIHRoaXMgd2luZG93LiBUaGlzIHNob3VsZCBiZSBzZXQgd2hlblxuICAgKiB0aGUgd2luZG93IGhvc3RpbmcgdGhlIHh0ZXJtLmpzIGluc3RhbmNlIGNoYW5nZXMuXG4gICAqL1xuICB3aW5kb3c6IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzO1xuICAvKipcbiAgICogVGhlIGRvY3VtZW50IG9mIHRoZSBwcmltYXJ5IHdpbmRvdyB0byBiZSB1c2VkIHRvIGNyZWF0ZSBlbGVtZW50cyB3aGVuIHdvcmtpbmcgd2l0aCBtdWx0aXBsZVxuICAgKiB3aW5kb3dzLiBUaGlzIGlzIGRlZmluZWQgYnkgdGhlIGRvY3VtZW50T3ZlcnJpZGUgc2V0dGluZy5cbiAgICovXG4gIHJlYWRvbmx5IG1haW5Eb2N1bWVudDogRG9jdW1lbnQ7XG4gIC8qKlxuICAgKiBIZWxwZXIgZm9yIGdldHRpbmcgdGhlIGRldmljZVBpeGVsUmF0aW8gb2YgdGhlIHBhcmVudCB3aW5kb3cuXG4gICAqL1xuICByZWFkb25seSBkcHI6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IElNb3VzZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SU1vdXNlU2VydmljZT4oJ01vdXNlU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJTW91c2VTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgZ2V0Q29vcmRzKGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgY29sQ291bnQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciwgaXNTZWxlY3Rpb24/OiBib29sZWFuKTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgZ2V0TW91c2VSZXBvcnRDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogeyBjb2w6IG51bWJlciwgcm93OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBJUmVuZGVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJUmVuZGVyU2VydmljZT4oJ1JlbmRlclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSVJlbmRlclNlcnZpY2UgZXh0ZW5kcyBJRGlzcG9zYWJsZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIG9uRGltZW5zaW9uc0NoYW5nZTogRXZlbnQ8SVJlbmRlckRpbWVuc2lvbnM+O1xuICAvKipcbiAgICogRmlyZXMgd2hlbiBidWZmZXIgY2hhbmdlcyBhcmUgcmVuZGVyZWQuIFRoaXMgZG9lcyBub3QgZmlyZSB3aGVuIG9ubHkgY3Vyc29yXG4gICAqIG9yIHNlbGVjdGlvbnMgYXJlIHJlbmRlcmVkLlxuICAgKi9cbiAgb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlOiBFdmVudDx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+O1xuICAvKipcbiAgICogRmlyZXMgb24gcmVuZGVyXG4gICAqL1xuICBvblJlbmRlcjogRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PjtcbiAgb25SZWZyZXNoUmVxdWVzdDogRXZlbnQ8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PjtcblxuICBkaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9ucztcblxuICBhZGRSZWZyZXNoQ2FsbGJhY2soY2FsbGJhY2s6IEZyYW1lUmVxdWVzdENhbGxiYWNrKTogbnVtYmVyO1xuXG4gIHJlZnJlc2hSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZDtcbiAgY2xlYXJUZXh0dXJlQXRsYXMoKTogdm9pZDtcbiAgcmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZDtcbiAgaGFzUmVuZGVyZXIoKTogYm9vbGVhbjtcbiAgc2V0UmVuZGVyZXIocmVuZGVyZXI6IElSZW5kZXJlcik6IHZvaWQ7XG4gIGhhbmRsZURldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZDtcbiAgaGFuZGxlUmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZDtcbiAgaGFuZGxlQ2hhclNpemVDaGFuZ2VkKCk6IHZvaWQ7XG4gIGhhbmRsZUJsdXIoKTogdm9pZDtcbiAgaGFuZGxlRm9jdXMoKTogdm9pZDtcbiAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZDtcbiAgaGFuZGxlQ3Vyc29yTW92ZSgpOiB2b2lkO1xuICBjbGVhcigpOiB2b2lkO1xufVxuXG5leHBvcnQgY29uc3QgSVNlbGVjdGlvblNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVNlbGVjdGlvblNlcnZpY2U+KCdTZWxlY3Rpb25TZXJ2aWNlJyk7XG5leHBvcnQgaW50ZXJmYWNlIElTZWxlY3Rpb25TZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgc2VsZWN0aW9uVGV4dDogc3RyaW5nO1xuICByZWFkb25seSBoYXNTZWxlY3Rpb246IGJvb2xlYW47XG4gIHJlYWRvbmx5IHNlbGVjdGlvblN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkO1xuICByZWFkb25seSBzZWxlY3Rpb25FbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgb25MaW51eE1vdXNlU2VsZWN0aW9uOiBFdmVudDxzdHJpbmc+O1xuICByZWFkb25seSBvblJlcXVlc3RSZWRyYXc6IEV2ZW50PElTZWxlY3Rpb25SZXF1ZXN0UmVkcmF3RXZlbnQ+O1xuICByZWFkb25seSBvblJlcXVlc3RTY3JvbGxMaW5lczogRXZlbnQ8SVNlbGVjdGlvblJlcXVlc3RTY3JvbGxMaW5lc0V2ZW50PjtcbiAgcmVhZG9ubHkgb25TZWxlY3Rpb25DaGFuZ2U6IEV2ZW50PHZvaWQ+O1xuXG4gIGRpc2FibGUoKTogdm9pZDtcbiAgZW5hYmxlKCk6IHZvaWQ7XG4gIHJlc2V0KCk6IHZvaWQ7XG4gIHNldFNlbGVjdGlvbihyb3c6IG51bWJlciwgY29sOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZDtcbiAgc2VsZWN0QWxsKCk6IHZvaWQ7XG4gIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZDtcbiAgY2xlYXJTZWxlY3Rpb24oKTogdm9pZDtcbiAgcmlnaHRDbGlja1NlbGVjdChldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gIHNob3VsZENvbHVtblNlbGVjdChldmVudDogS2V5Ym9hcmRFdmVudCB8IE1vdXNlRXZlbnQpOiBib29sZWFuO1xuICBzaG91bGRGb3JjZVNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW47XG4gIHJlZnJlc2goaXNMaW51eE1vdXNlU2VsZWN0aW9uPzogYm9vbGVhbik6IHZvaWQ7XG4gIGhhbmRsZU1vdXNlRG93bihldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gIGlzQ2VsbEluU2VsZWN0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlID0gY3JlYXRlRGVjb3JhdG9yPElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPignQ2hhcmFjdGVySm9pbmVyU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHJlZ2lzdGVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlcjtcbiAgZGVyZWdpc3Rlcihqb2luZXJJZDogbnVtYmVyKTogYm9vbGVhbjtcbiAgZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyb3c6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXTtcbn1cblxuZXhwb3J0IGNvbnN0IElUaGVtZVNlcnZpY2UgPSBjcmVhdGVEZWNvcmF0b3I8SVRoZW1lU2VydmljZT4oJ1RoZW1lU2VydmljZScpO1xuZXhwb3J0IGludGVyZmFjZSBJVGhlbWVTZXJ2aWNlIHtcbiAgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgY29sb3JzOiBSZWFkb25seUNvbG9yU2V0O1xuXG4gIHJlYWRvbmx5IG9uQ2hhbmdlQ29sb3JzOiBFdmVudDxSZWFkb25seUNvbG9yU2V0PjtcblxuICByZXN0b3JlQ29sb3Ioc2xvdD86IEFsbENvbG9ySW5kZXgpOiB2b2lkO1xuICAvKipcbiAgICogQWxsb3dzIGV4dGVybmFsIG1vZGlmeWluZyBvZiBjb2xvcnMgaW4gdGhlIHRoZW1lLCB0aGlzIGlzIHVzZWQgaW5zdGVhZCBvZiB7QGxpbmsgY29sb3JzfSB0b1xuICAgKiBwcmV2ZW50IGFjY2lkZW50YWwgd3JpdGVzLlxuICAgKi9cbiAgbW9kaWZ5Q29sb3JzKGNhbGxiYWNrOiAoY29sb3JzOiBJQ29sb3JTZXQpID0+IHZvaWQpOiB2b2lkO1xufVxuXG5cbmV4cG9ydCBjb25zdCBJTGlua1Byb3ZpZGVyU2VydmljZSA9IGNyZWF0ZURlY29yYXRvcjxJTGlua1Byb3ZpZGVyU2VydmljZT4oJ0xpbmtQcm92aWRlclNlcnZpY2UnKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmtQcm92aWRlclNlcnZpY2UgZXh0ZW5kcyBJRGlzcG9zYWJsZSB7XG4gIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuICByZWFkb25seSBsaW5rUHJvdmlkZXJzOiBSZWFkb25seUFycmF5PElMaW5rUHJvdmlkZXI+O1xuICByZWdpc3RlckxpbmtQcm92aWRlcihsaW5rUHJvdmlkZXI6IElMaW5rUHJvdmlkZXIpOiBJRGlzcG9zYWJsZTtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmtQcm92aWRlciB7XG4gIHByb3ZpZGVMaW5rcyh5OiBudW1iZXIsIGNhbGxiYWNrOiAobGlua3M6IElMaW5rW10gfCB1bmRlZmluZWQpID0+IHZvaWQpOiB2b2lkO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yTGlzdGVuZXJDYWxsYmFjayB7XG5cdChlcnJvcjogYW55KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckxpc3RlbmVyVW5iaW5kIHtcblx0KCk6IHZvaWQ7XG59XG5cbi8vIEF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY3kgb24gRXZlbnRFbWl0dGVyIGJ5IGltcGxlbWVudGluZyBhIHN1YnNldCBvZiB0aGUgaW50ZXJmYWNlLlxuZXhwb3J0IGNsYXNzIEVycm9ySGFuZGxlciB7XG5cdHByaXZhdGUgdW5leHBlY3RlZEVycm9ySGFuZGxlcjogKGU6IGFueSkgPT4gdm9pZDtcblx0cHJpdmF0ZSBsaXN0ZW5lcnM6IEVycm9yTGlzdGVuZXJDYWxsYmFja1tdO1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXG5cdFx0dGhpcy5saXN0ZW5lcnMgPSBbXTtcblxuXHRcdHRoaXMudW5leHBlY3RlZEVycm9ySGFuZGxlciA9IGZ1bmN0aW9uIChlOiBhbnkpIHtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAoZS5zdGFjaykge1xuXHRcdFx0XHRcdGlmIChFcnJvck5vVGVsZW1ldHJ5LmlzRXJyb3JOb1RlbGVtZXRyeShlKSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yTm9UZWxlbWV0cnkoZS5tZXNzYWdlICsgJ1xcblxcbicgKyBlLnN0YWNrKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoZS5tZXNzYWdlICsgJ1xcblxcbicgKyBlLnN0YWNrKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRocm93IGU7XG5cdFx0XHR9LCAwKTtcblx0XHR9O1xuXHR9XG5cblx0YWRkTGlzdGVuZXIobGlzdGVuZXI6IEVycm9yTGlzdGVuZXJDYWxsYmFjayk6IEVycm9yTGlzdGVuZXJVbmJpbmQge1xuXHRcdHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuXG5cdFx0cmV0dXJuICgpID0+IHtcblx0XHRcdHRoaXMuX3JlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKTtcblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSBlbWl0KGU6IGFueSk6IHZvaWQge1xuXHRcdHRoaXMubGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG5cdFx0XHRsaXN0ZW5lcihlKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgX3JlbW92ZUxpc3RlbmVyKGxpc3RlbmVyOiBFcnJvckxpc3RlbmVyQ2FsbGJhY2spOiB2b2lkIHtcblx0XHR0aGlzLmxpc3RlbmVycy5zcGxpY2UodGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lciksIDEpO1xuXHR9XG5cblx0c2V0VW5leHBlY3RlZEVycm9ySGFuZGxlcihuZXdVbmV4cGVjdGVkRXJyb3JIYW5kbGVyOiAoZTogYW55KSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0dGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyID0gbmV3VW5leHBlY3RlZEVycm9ySGFuZGxlcjtcblx0fVxuXG5cdGdldFVuZXhwZWN0ZWRFcnJvckhhbmRsZXIoKTogKGU6IGFueSkgPT4gdm9pZCB7XG5cdFx0cmV0dXJuIHRoaXMudW5leHBlY3RlZEVycm9ySGFuZGxlcjtcblx0fVxuXG5cdG9uVW5leHBlY3RlZEVycm9yKGU6IGFueSk6IHZvaWQge1xuXHRcdHRoaXMudW5leHBlY3RlZEVycm9ySGFuZGxlcihlKTtcblx0XHR0aGlzLmVtaXQoZSk7XG5cdH1cblxuXHQvLyBGb3IgZXh0ZXJuYWwgZXJyb3JzLCB3ZSBkb24ndCB3YW50IHRoZSBsaXN0ZW5lcnMgdG8gYmUgY2FsbGVkXG5cdG9uVW5leHBlY3RlZEV4dGVybmFsRXJyb3IoZTogYW55KTogdm9pZCB7XG5cdFx0dGhpcy51bmV4cGVjdGVkRXJyb3JIYW5kbGVyKGUpO1xuXHR9XG59XG5cbmV4cG9ydCBjb25zdCBlcnJvckhhbmRsZXIgPSBuZXcgRXJyb3JIYW5kbGVyKCk7XG5cbi8qKiBAc2tpcE1hbmdsZSAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFVuZXhwZWN0ZWRFcnJvckhhbmRsZXIobmV3VW5leHBlY3RlZEVycm9ySGFuZGxlcjogKGU6IGFueSkgPT4gdm9pZCk6IHZvaWQge1xuXHRlcnJvckhhbmRsZXIuc2V0VW5leHBlY3RlZEVycm9ySGFuZGxlcihuZXdVbmV4cGVjdGVkRXJyb3JIYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGlmIHRoZSBlcnJvciBpcyBhIFNJR1BJUEUgZXJyb3IuIFNJR1BJUEUgZXJyb3JzIHNob3VsZCBnZW5lcmFsbHkgYmVcbiAqIGxvZ2dlZCBhdCBtb3N0IG9uY2UsIHRvIGF2b2lkIGEgbG9vcC5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlLXJlbW90ZS1yZWxlYXNlL2lzc3Vlcy82NDgxXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NpZ1BpcGVFcnJvcihlOiB1bmtub3duKTogZSBpcyBFcnJvciB7XG5cdGlmICghZSB8fCB0eXBlb2YgZSAhPT0gJ29iamVjdCcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRjb25zdCBjYXN0ID0gZSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+O1xuXHRyZXR1cm4gY2FzdC5jb2RlID09PSAnRVBJUEUnICYmIGNhc3Quc3lzY2FsbD8udG9VcHBlckNhc2UoKSA9PT0gJ1dSSVRFJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9uVW5leHBlY3RlZEVycm9yKGU6IGFueSk6IHVuZGVmaW5lZCB7XG5cdC8vIGlnbm9yZSBlcnJvcnMgZnJvbSBjYW5jZWxsZWQgcHJvbWlzZXNcblx0aWYgKCFpc0NhbmNlbGxhdGlvbkVycm9yKGUpKSB7XG5cdFx0ZXJyb3JIYW5kbGVyLm9uVW5leHBlY3RlZEVycm9yKGUpO1xuXHR9XG5cdHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvblVuZXhwZWN0ZWRFeHRlcm5hbEVycm9yKGU6IGFueSk6IHVuZGVmaW5lZCB7XG5cdC8vIGlnbm9yZSBlcnJvcnMgZnJvbSBjYW5jZWxsZWQgcHJvbWlzZXNcblx0aWYgKCFpc0NhbmNlbGxhdGlvbkVycm9yKGUpKSB7XG5cdFx0ZXJyb3JIYW5kbGVyLm9uVW5leHBlY3RlZEV4dGVybmFsRXJyb3IoZSk7XG5cdH1cblx0cmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTZXJpYWxpemVkRXJyb3Ige1xuXHRyZWFkb25seSAkaXNFcnJvcjogdHJ1ZTtcblx0cmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuXHRyZWFkb25seSBtZXNzYWdlOiBzdHJpbmc7XG5cdHJlYWRvbmx5IHN0YWNrOiBzdHJpbmc7XG5cdHJlYWRvbmx5IG5vVGVsZW1ldHJ5OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRXJyb3JGb3JTZXJpYWxpemF0aW9uKGVycm9yOiBFcnJvcik6IFNlcmlhbGl6ZWRFcnJvcjtcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FcnJvckZvclNlcmlhbGl6YXRpb24oZXJyb3I6IGFueSk6IGFueTtcbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FcnJvckZvclNlcmlhbGl6YXRpb24oZXJyb3I6IGFueSk6IGFueSB7XG5cdGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG5cdFx0Y29uc3QgeyBuYW1lLCBtZXNzYWdlIH0gPSBlcnJvcjtcblx0XHRjb25zdCBzdGFjazogc3RyaW5nID0gKDxhbnk+ZXJyb3IpLnN0YWNrdHJhY2UgfHwgKDxhbnk+ZXJyb3IpLnN0YWNrO1xuXHRcdHJldHVybiB7XG5cdFx0XHQkaXNFcnJvcjogdHJ1ZSxcblx0XHRcdG5hbWUsXG5cdFx0XHRtZXNzYWdlLFxuXHRcdFx0c3RhY2ssXG5cdFx0XHRub1RlbGVtZXRyeTogRXJyb3JOb1RlbGVtZXRyeS5pc0Vycm9yTm9UZWxlbWV0cnkoZXJyb3IpXG5cdFx0fTtcblx0fVxuXG5cdC8vIHJldHVybiBhcyBpc1xuXHRyZXR1cm4gZXJyb3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FcnJvckZyb21TZXJpYWxpemF0aW9uKGRhdGE6IFNlcmlhbGl6ZWRFcnJvcik6IEVycm9yIHtcblx0bGV0IGVycm9yOiBFcnJvcjtcblx0aWYgKGRhdGEubm9UZWxlbWV0cnkpIHtcblx0XHRlcnJvciA9IG5ldyBFcnJvck5vVGVsZW1ldHJ5KCk7XG5cdH0gZWxzZSB7XG5cdFx0ZXJyb3IgPSBuZXcgRXJyb3IoKTtcblx0XHRlcnJvci5uYW1lID0gZGF0YS5uYW1lO1xuXHR9XG5cdGVycm9yLm1lc3NhZ2UgPSBkYXRhLm1lc3NhZ2U7XG5cdGVycm9yLnN0YWNrID0gZGF0YS5zdGFjaztcblx0cmV0dXJuIGVycm9yO1xufVxuXG4vLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Y4L3Y4L3dpa2kvU3RhY2slMjBUcmFjZSUyMEFQSSNiYXNpYy1zdGFjay10cmFjZXNcbmV4cG9ydCBpbnRlcmZhY2UgVjhDYWxsU2l0ZSB7XG5cdGdldFRoaXMoKTogdW5rbm93bjtcblx0Z2V0VHlwZU5hbWUoKTogc3RyaW5nIHwgbnVsbDtcblx0Z2V0RnVuY3Rpb24oKTogRnVuY3Rpb24gfCB1bmRlZmluZWQ7XG5cdGdldEZ1bmN0aW9uTmFtZSgpOiBzdHJpbmcgfCBudWxsO1xuXHRnZXRNZXRob2ROYW1lKCk6IHN0cmluZyB8IG51bGw7XG5cdGdldEZpbGVOYW1lKCk6IHN0cmluZyB8IG51bGw7XG5cdGdldExpbmVOdW1iZXIoKTogbnVtYmVyIHwgbnVsbDtcblx0Z2V0Q29sdW1uTnVtYmVyKCk6IG51bWJlciB8IG51bGw7XG5cdGdldEV2YWxPcmlnaW4oKTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXHRpc1RvcGxldmVsKCk6IGJvb2xlYW47XG5cdGlzRXZhbCgpOiBib29sZWFuO1xuXHRpc05hdGl2ZSgpOiBib29sZWFuO1xuXHRpc0NvbnN0cnVjdG9yKCk6IGJvb2xlYW47XG5cdHRvU3RyaW5nKCk6IHN0cmluZztcbn1cblxuY29uc3QgY2FuY2VsZWROYW1lID0gJ0NhbmNlbGVkJztcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGVycm9yIGlzIGEgcHJvbWlzZSBpbiBjYW5jZWxlZCBzdGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDYW5jZWxsYXRpb25FcnJvcihlcnJvcjogYW55KTogYm9vbGVhbiB7XG5cdGlmIChlcnJvciBpbnN0YW5jZW9mIENhbmNlbGxhdGlvbkVycm9yKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0cmV0dXJuIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gY2FuY2VsZWROYW1lICYmIGVycm9yLm1lc3NhZ2UgPT09IGNhbmNlbGVkTmFtZTtcbn1cblxuLy8gISEhSU1QT1JUQU5UISEhXG4vLyBEbyBOT1QgY2hhbmdlIHRoaXMgY2xhc3MgYmVjYXVzZSBpdCBpcyBhbHNvIHVzZWQgYXMgYW4gQVBJLXR5cGUuXG5leHBvcnQgY2xhc3MgQ2FuY2VsbGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKGNhbmNlbGVkTmFtZSk7XG5cdFx0dGhpcy5uYW1lID0gdGhpcy5tZXNzYWdlO1xuXHR9XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgdXNlIHtAbGluayBDYW5jZWxsYXRpb25FcnJvciBgbmV3IENhbmNlbGxhdGlvbkVycm9yKClgfSBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYW5jZWxlZCgpOiBFcnJvciB7XG5cdGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGNhbmNlbGVkTmFtZSk7XG5cdGVycm9yLm5hbWUgPSBlcnJvci5tZXNzYWdlO1xuXHRyZXR1cm4gZXJyb3I7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbGxlZ2FsQXJndW1lbnQobmFtZT86IHN0cmluZyk6IEVycm9yIHtcblx0aWYgKG5hbWUpIHtcblx0XHRyZXR1cm4gbmV3IEVycm9yKGBJbGxlZ2FsIGFyZ3VtZW50OiAke25hbWV9YCk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIG5ldyBFcnJvcignSWxsZWdhbCBhcmd1bWVudCcpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbGxlZ2FsU3RhdGUobmFtZT86IHN0cmluZyk6IEVycm9yIHtcblx0aWYgKG5hbWUpIHtcblx0XHRyZXR1cm4gbmV3IEVycm9yKGBJbGxlZ2FsIHN0YXRlOiAke25hbWV9YCk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIG5ldyBFcnJvcignSWxsZWdhbCBzdGF0ZScpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSZWFkb25seUVycm9yIGV4dGVuZHMgVHlwZUVycm9yIHtcblx0Y29uc3RydWN0b3IobmFtZT86IHN0cmluZykge1xuXHRcdHN1cGVyKG5hbWUgPyBgJHtuYW1lfSBpcyByZWFkLW9ubHkgYW5kIGNhbm5vdCBiZSBjaGFuZ2VkYCA6ICdDYW5ub3QgY2hhbmdlIHJlYWQtb25seSBwcm9wZXJ0eScpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFcnJvck1lc3NhZ2UoZXJyOiBhbnkpOiBzdHJpbmcge1xuXHRpZiAoIWVycikge1xuXHRcdHJldHVybiAnRXJyb3InO1xuXHR9XG5cblx0aWYgKGVyci5tZXNzYWdlKSB7XG5cdFx0cmV0dXJuIGVyci5tZXNzYWdlO1xuXHR9XG5cblx0aWYgKGVyci5zdGFjaykge1xuXHRcdHJldHVybiBlcnIuc3RhY2suc3BsaXQoJ1xcbicpWzBdO1xuXHR9XG5cblx0cmV0dXJuIFN0cmluZyhlcnIpO1xufVxuXG5leHBvcnQgY2xhc3MgTm90SW1wbGVtZW50ZWRFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZykge1xuXHRcdHN1cGVyKCdOb3RJbXBsZW1lbnRlZCcpO1xuXHRcdGlmIChtZXNzYWdlKSB7XG5cdFx0XHR0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTm90U3VwcG9ydGVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2U/OiBzdHJpbmcpIHtcblx0XHRzdXBlcignTm90U3VwcG9ydGVkJyk7XG5cdFx0aWYgKG1lc3NhZ2UpIHtcblx0XHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBFeHBlY3RlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRyZWFkb25seSBpc0V4cGVjdGVkID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBFcnJvciB0aGF0IHdoZW4gdGhyb3duIHdvbid0IGJlIGxvZ2dlZCBpbiB0ZWxlbWV0cnkgYXMgYW4gdW5oYW5kbGVkIGVycm9yLlxuICovXG5leHBvcnQgY2xhc3MgRXJyb3JOb1RlbGVtZXRyeSBleHRlbmRzIEVycm9yIHtcblx0b3ZlcnJpZGUgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuXG5cdGNvbnN0cnVjdG9yKG1zZz86IHN0cmluZykge1xuXHRcdHN1cGVyKG1zZyk7XG5cdFx0dGhpcy5uYW1lID0gJ0NvZGVFeHBlY3RlZEVycm9yJztcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZnJvbUVycm9yKGVycjogRXJyb3IpOiBFcnJvck5vVGVsZW1ldHJ5IHtcblx0XHRpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3JOb1RlbGVtZXRyeSkge1xuXHRcdFx0cmV0dXJuIGVycjtcblx0XHR9XG5cblx0XHRjb25zdCByZXN1bHQgPSBuZXcgRXJyb3JOb1RlbGVtZXRyeSgpO1xuXHRcdHJlc3VsdC5tZXNzYWdlID0gZXJyLm1lc3NhZ2U7XG5cdFx0cmVzdWx0LnN0YWNrID0gZXJyLnN0YWNrO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGlzRXJyb3JOb1RlbGVtZXRyeShlcnI6IEVycm9yKTogZXJyIGlzIEVycm9yTm9UZWxlbWV0cnkge1xuXHRcdHJldHVybiBlcnIubmFtZSA9PT0gJ0NvZGVFeHBlY3RlZEVycm9yJztcblx0fVxufVxuXG4vKipcbiAqIFRoaXMgZXJyb3IgaW5kaWNhdGVzIGEgYnVnLlxuICogRG8gbm90IHRocm93IHRoaXMgZm9yIGludmFsaWQgdXNlciBpbnB1dC5cbiAqIE9ubHkgY2F0Y2ggdGhpcyBlcnJvciB0byByZWNvdmVyIGdyYWNlZnVsbHkgZnJvbSBidWdzLlxuICovXG5leHBvcnQgY2xhc3MgQnVnSW5kaWNhdGluZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG5cdFx0c3VwZXIobWVzc2FnZSB8fCAnQW4gdW5leHBlY3RlZCBidWcgb2NjdXJyZWQuJyk7XG5cdFx0T2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEJ1Z0luZGljYXRpbmdFcnJvci5wcm90b3R5cGUpO1xuXG5cdFx0Ly8gQmVjYXVzZSB3ZSBrbm93IGZvciBzdXJlIG9ubHkgYnVnZ3kgY29kZSB0aHJvd3MgdGhpcyxcblx0XHQvLyB3ZSBkZWZpbml0ZWx5IHdhbnQgdG8gYnJlYWsgaGVyZSBhbmQgZml4IHRoZSBidWcuXG5cdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWRlYnVnZ2VyXG5cdFx0Ly8gZGVidWdnZXI7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgQ29tcGFyYXRvciB9IGZyb20gJy4vYXJyYXlzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0PFQ+KGFycmF5OiByZWFkb25seSBUW10sIHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkIHtcblx0Y29uc3QgaWR4ID0gZmluZExhc3RJZHgoYXJyYXksIHByZWRpY2F0ZSk7XG5cdGlmIChpZHggPT09IC0xKSB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXHRyZXR1cm4gYXJyYXlbaWR4XTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0SWR4PFQ+KGFycmF5OiByZWFkb25seSBUW10sIHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4sIGZyb21JbmRleCA9IGFycmF5Lmxlbmd0aCAtIDEpOiBudW1iZXIge1xuXHRmb3IgKGxldCBpID0gZnJvbUluZGV4OyBpID49IDA7IGktLSkge1xuXHRcdGNvbnN0IGVsZW1lbnQgPSBhcnJheVtpXTtcblxuXHRcdGlmIChwcmVkaWNhdGUoZWxlbWVudCkpIHtcblx0XHRcdHJldHVybiBpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBpdGVtIHdoZXJlIHByZWRpY2F0ZSBpcyB0cnVlIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKiBgcHJlZGljYXRlYCBtdXN0IGJlIG1vbm90b25vdXMsIGkuZS4gYGFyci5tYXAocHJlZGljYXRlKWAgbXVzdCBiZSBsaWtlIGBbdHJ1ZSwgLi4uLCB0cnVlLCBmYWxzZSwgLi4uLCBmYWxzZV1gIVxuICpcbiAqIEByZXR1cm5zIGB1bmRlZmluZWRgIGlmIG5vIGl0ZW0gbWF0Y2hlcywgb3RoZXJ3aXNlIHRoZSBsYXN0IGl0ZW0gdGhhdCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdE1vbm90b25vdXM8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSwgcHJlZGljYXRlOiAoaXRlbTogVCkgPT4gYm9vbGVhbik6IFQgfCB1bmRlZmluZWQge1xuXHRjb25zdCBpZHggPSBmaW5kTGFzdElkeE1vbm90b25vdXMoYXJyYXksIHByZWRpY2F0ZSk7XG5cdHJldHVybiBpZHggPT09IC0xID8gdW5kZWZpbmVkIDogYXJyYXlbaWR4XTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbGFzdCBpdGVtIHdoZXJlIHByZWRpY2F0ZSBpcyB0cnVlIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKiBgcHJlZGljYXRlYCBtdXN0IGJlIG1vbm90b25vdXMsIGkuZS4gYGFyci5tYXAocHJlZGljYXRlKWAgbXVzdCBiZSBsaWtlIGBbdHJ1ZSwgLi4uLCB0cnVlLCBmYWxzZSwgLi4uLCBmYWxzZV1gIVxuICpcbiAqIEByZXR1cm5zIGBzdGFydElkeCAtIDFgIGlmIHByZWRpY2F0ZSBpcyBmYWxzZSBmb3IgYWxsIGl0ZW1zLCBvdGhlcndpc2UgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGl0ZW0gdGhhdCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGFzdElkeE1vbm90b25vdXM8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSwgcHJlZGljYXRlOiAoaXRlbTogVCkgPT4gYm9vbGVhbiwgc3RhcnRJZHggPSAwLCBlbmRJZHhFeCA9IGFycmF5Lmxlbmd0aCk6IG51bWJlciB7XG5cdGxldCBpID0gc3RhcnRJZHg7XG5cdGxldCBqID0gZW5kSWR4RXg7XG5cdHdoaWxlIChpIDwgaikge1xuXHRcdGNvbnN0IGsgPSBNYXRoLmZsb29yKChpICsgaikgLyAyKTtcblx0XHRpZiAocHJlZGljYXRlKGFycmF5W2tdKSkge1xuXHRcdFx0aSA9IGsgKyAxO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqID0gaztcblx0XHR9XG5cdH1cblx0cmV0dXJuIGkgLSAxO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBpdGVtIHdoZXJlIHByZWRpY2F0ZSBpcyB0cnVlIHVzaW5nIGJpbmFyeSBzZWFyY2guXG4gKiBgcHJlZGljYXRlYCBtdXN0IGJlIG1vbm90b25vdXMsIGkuZS4gYGFyci5tYXAocHJlZGljYXRlKWAgbXVzdCBiZSBsaWtlIGBbZmFsc2UsIC4uLiwgZmFsc2UsIHRydWUsIC4uLiwgdHJ1ZV1gIVxuICpcbiAqIEByZXR1cm5zIGB1bmRlZmluZWRgIGlmIG5vIGl0ZW0gbWF0Y2hlcywgb3RoZXJ3aXNlIHRoZSBmaXJzdCBpdGVtIHRoYXQgbWF0Y2hlcyB0aGUgcHJlZGljYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0TW9ub3Rvbm91czxUPihhcnJheTogcmVhZG9ubHkgVFtdLCBwcmVkaWNhdGU6IChpdGVtOiBUKSA9PiBib29sZWFuKTogVCB8IHVuZGVmaW5lZCB7XG5cdGNvbnN0IGlkeCA9IGZpbmRGaXJzdElkeE1vbm90b25vdXNPckFyckxlbihhcnJheSwgcHJlZGljYXRlKTtcblx0cmV0dXJuIGlkeCA9PT0gYXJyYXkubGVuZ3RoID8gdW5kZWZpbmVkIDogYXJyYXlbaWR4XTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgaXRlbSB3aGVyZSBwcmVkaWNhdGUgaXMgdHJ1ZSB1c2luZyBiaW5hcnkgc2VhcmNoLlxuICogYHByZWRpY2F0ZWAgbXVzdCBiZSBtb25vdG9ub3VzLCBpLmUuIGBhcnIubWFwKHByZWRpY2F0ZSlgIG11c3QgYmUgbGlrZSBgW2ZhbHNlLCAuLi4sIGZhbHNlLCB0cnVlLCAuLi4sIHRydWVdYCFcbiAqXG4gKiBAcmV0dXJucyBgZW5kSWR4RXhgIGlmIHByZWRpY2F0ZSBpcyBmYWxzZSBmb3IgYWxsIGl0ZW1zLCBvdGhlcndpc2UgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBpdGVtIHRoYXQgbWF0Y2hlcyB0aGUgcHJlZGljYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0SWR4TW9ub3Rvbm91c09yQXJyTGVuPFQ+KGFycmF5OiByZWFkb25seSBUW10sIHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4sIHN0YXJ0SWR4ID0gMCwgZW5kSWR4RXggPSBhcnJheS5sZW5ndGgpOiBudW1iZXIge1xuXHRsZXQgaSA9IHN0YXJ0SWR4O1xuXHRsZXQgaiA9IGVuZElkeEV4O1xuXHR3aGlsZSAoaSA8IGopIHtcblx0XHRjb25zdCBrID0gTWF0aC5mbG9vcigoaSArIGopIC8gMik7XG5cdFx0aWYgKHByZWRpY2F0ZShhcnJheVtrXSkpIHtcblx0XHRcdGogPSBrO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpID0gayArIDE7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0SWR4TW9ub3Rvbm91czxUPihhcnJheTogcmVhZG9ubHkgVFtdLCBwcmVkaWNhdGU6IChpdGVtOiBUKSA9PiBib29sZWFuLCBzdGFydElkeCA9IDAsIGVuZElkeEV4ID0gYXJyYXkubGVuZ3RoKTogbnVtYmVyIHtcblx0Y29uc3QgaWR4ID0gZmluZEZpcnN0SWR4TW9ub3Rvbm91c09yQXJyTGVuKGFycmF5LCBwcmVkaWNhdGUsIHN0YXJ0SWR4LCBlbmRJZHhFeCk7XG5cdHJldHVybiBpZHggPT09IGFycmF5Lmxlbmd0aCA/IC0xIDogaWR4O1xufVxuXG4vKipcbiAqIFVzZSB0aGlzIHdoZW5cbiAqICogWW91IGhhdmUgYSBzb3J0ZWQgYXJyYXlcbiAqICogWW91IHF1ZXJ5IHRoaXMgYXJyYXkgd2l0aCBhIG1vbm90b25vdXMgcHJlZGljYXRlIHRvIGZpbmQgdGhlIGxhc3QgaXRlbSB0aGF0IGhhcyBhIGNlcnRhaW4gcHJvcGVydHkuXG4gKiAqIFlvdSBxdWVyeSB0aGlzIGFycmF5IG11bHRpcGxlIHRpbWVzIHdpdGggbW9ub3Rvbm91cyBwcmVkaWNhdGVzIHRoYXQgZ2V0IHdlYWtlciBhbmQgd2Vha2VyLlxuICovXG5leHBvcnQgY2xhc3MgTW9ub3Rvbm91c0FycmF5PFQ+IHtcblx0cHVibGljIHN0YXRpYyBhc3NlcnRJbnZhcmlhbnRzID0gZmFsc2U7XG5cblx0cHJpdmF0ZSBfZmluZExhc3RNb25vdG9ub3VzTGFzdElkeCA9IDA7XG5cdHByaXZhdGUgX3ByZXZGaW5kTGFzdFByZWRpY2F0ZTogKChpdGVtOiBUKSA9PiBib29sZWFuKSB8IHVuZGVmaW5lZDtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IF9hcnJheTogcmVhZG9ubHkgVFtdKSB7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHByZWRpY2F0ZSBtdXN0IGJlIG1vbm90b25vdXMsIGkuZS4gYGFyci5tYXAocHJlZGljYXRlKWAgbXVzdCBiZSBsaWtlIGBbdHJ1ZSwgLi4uLCB0cnVlLCBmYWxzZSwgLi4uLCBmYWxzZV1gIVxuXHQgKiBGb3Igc3Vic2VxdWVudCBjYWxscywgY3VycmVudCBwcmVkaWNhdGUgbXVzdCBiZSB3ZWFrZXIgdGhhbiAob3IgZXF1YWwgdG8pIHRoZSBwcmV2aW91cyBwcmVkaWNhdGUsIGkuZS4gbW9yZSBlbnRyaWVzIG11c3QgYmUgYHRydWVgLlxuXHQgKi9cblx0ZmluZExhc3RNb25vdG9ub3VzKHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRpZiAoTW9ub3Rvbm91c0FycmF5LmFzc2VydEludmFyaWFudHMpIHtcblx0XHRcdGlmICh0aGlzLl9wcmV2RmluZExhc3RQcmVkaWNhdGUpIHtcblx0XHRcdFx0Zm9yIChjb25zdCBpdGVtIG9mIHRoaXMuX2FycmF5KSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX3ByZXZGaW5kTGFzdFByZWRpY2F0ZShpdGVtKSAmJiAhcHJlZGljYXRlKGl0ZW0pKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01vbm90b25vdXNBcnJheTogY3VycmVudCBwcmVkaWNhdGUgbXVzdCBiZSB3ZWFrZXIgdGhhbiAob3IgZXF1YWwgdG8pIHRoZSBwcmV2aW91cyBwcmVkaWNhdGUuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9wcmV2RmluZExhc3RQcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgaWR4ID0gZmluZExhc3RJZHhNb25vdG9ub3VzKHRoaXMuX2FycmF5LCBwcmVkaWNhdGUsIHRoaXMuX2ZpbmRMYXN0TW9ub3Rvbm91c0xhc3RJZHgpO1xuXHRcdHRoaXMuX2ZpbmRMYXN0TW9ub3Rvbm91c0xhc3RJZHggPSBpZHggKyAxO1xuXHRcdHJldHVybiBpZHggPT09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5fYXJyYXlbaWR4XTtcblx0fVxufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IGl0ZW0gdGhhdCBpcyBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gZXZlcnkgb3RoZXIgaXRlbS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0TWF4PFQ+KGFycmF5OiByZWFkb25seSBUW10sIGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBUIHwgdW5kZWZpbmVkIHtcblx0aWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHRsZXQgbWF4ID0gYXJyYXlbMF07XG5cdGZvciAobGV0IGkgPSAxOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBpdGVtID0gYXJyYXlbaV07XG5cdFx0aWYgKGNvbXBhcmF0b3IoaXRlbSwgbWF4KSA+IDApIHtcblx0XHRcdG1heCA9IGl0ZW07XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXg7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBpdGVtIHRoYXQgaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIGV2ZXJ5IG90aGVyIGl0ZW0uXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMYXN0TWF4PFQ+KGFycmF5OiByZWFkb25seSBUW10sIGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBUIHwgdW5kZWZpbmVkIHtcblx0aWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHRsZXQgbWF4ID0gYXJyYXlbMF07XG5cdGZvciAobGV0IGkgPSAxOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBpdGVtID0gYXJyYXlbaV07XG5cdFx0aWYgKGNvbXBhcmF0b3IoaXRlbSwgbWF4KSA+PSAwKSB7XG5cdFx0XHRtYXggPSBpdGVtO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gbWF4O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IGl0ZW0gdGhhdCBpcyBlcXVhbCB0byBvciBsZXNzIHRoYW4gZXZlcnkgb3RoZXIgaXRlbS5cbiovXG5leHBvcnQgZnVuY3Rpb24gZmluZEZpcnN0TWluPFQ+KGFycmF5OiByZWFkb25seSBUW10sIGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBUIHwgdW5kZWZpbmVkIHtcblx0cmV0dXJuIGZpbmRGaXJzdE1heChhcnJheSwgKGEsIGIpID0+IC1jb21wYXJhdG9yKGEsIGIpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRNYXhJZHg8VD4oYXJyYXk6IHJlYWRvbmx5IFRbXSwgY29tcGFyYXRvcjogQ29tcGFyYXRvcjxUPik6IG51bWJlciB7XG5cdGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gLTE7XG5cdH1cblxuXHRsZXQgbWF4SWR4ID0gMDtcblx0Zm9yIChsZXQgaSA9IDE7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnN0IGl0ZW0gPSBhcnJheVtpXTtcblx0XHRpZiAoY29tcGFyYXRvcihpdGVtLCBhcnJheVttYXhJZHhdKSA+IDApIHtcblx0XHRcdG1heElkeCA9IGk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXhJZHg7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3QgbWFwcGVkIHZhbHVlIG9mIHRoZSBhcnJheSB3aGljaCBpcyBub3QgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwRmluZEZpcnN0PFQsIFI+KGl0ZW1zOiBJdGVyYWJsZTxUPiwgbWFwRm46ICh2YWx1ZTogVCkgPT4gUiB8IHVuZGVmaW5lZCk6IFIgfCB1bmRlZmluZWQge1xuXHRmb3IgKGNvbnN0IHZhbHVlIG9mIGl0ZW1zKSB7XG5cdFx0Y29uc3QgbWFwcGVkID0gbWFwRm4odmFsdWUpO1xuXHRcdGlmIChtYXBwZWQgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIG1hcHBlZDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdW5kZWZpbmVkO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlbiB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2NhbmNlbGxhdGlvbic7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25FcnJvciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2Vycm9ycyc7XG5pbXBvcnQgeyBJU3BsaWNlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vc2VxdWVuY2UnO1xuaW1wb3J0IHsgZmluZEZpcnN0SWR4TW9ub3Rvbm91c09yQXJyTGVuIH0gZnJvbSAnLi9hcnJheXNGaW5kJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuXG4gKiBAcGFyYW0gYXJyYXkgVGhlIGFycmF5LlxuICogQHBhcmFtIG4gV2hpY2ggZWxlbWVudCBmcm9tIHRoZSBlbmQgKGRlZmF1bHQgaXMgemVybykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0YWlsPFQ+KGFycmF5OiBBcnJheUxpa2U8VD4sIG46IG51bWJlciA9IDApOiBUIHwgdW5kZWZpbmVkIHtcblx0cmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtICgxICsgbildO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGFpbDI8VD4oYXJyOiBUW10pOiBbVFtdLCBUXSB7XG5cdGlmIChhcnIubGVuZ3RoID09PSAwKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRhaWwgY2FsbCcpO1xuXHR9XG5cblx0cmV0dXJuIFthcnIuc2xpY2UoMCwgYXJyLmxlbmd0aCAtIDEpLCBhcnJbYXJyLmxlbmd0aCAtIDFdXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVxdWFsczxUPihvbmU6IFJlYWRvbmx5QXJyYXk8VD4gfCB1bmRlZmluZWQsIG90aGVyOiBSZWFkb25seUFycmF5PFQ+IHwgdW5kZWZpbmVkLCBpdGVtRXF1YWxzOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbiA9IChhLCBiKSA9PiBhID09PSBiKTogYm9vbGVhbiB7XG5cdGlmIChvbmUgPT09IG90aGVyKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAoIW9uZSB8fCAhb3RoZXIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAob25lLmxlbmd0aCAhPT0gb3RoZXIubGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IG9uZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdGlmICghaXRlbUVxdWFscyhvbmVbaV0sIG90aGVyW2ldKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFJlbW92ZSB0aGUgZWxlbWVudCBhdCBgaW5kZXhgIGJ5IHJlcGxhY2luZyBpdCB3aXRoIHRoZSBsYXN0IGVsZW1lbnQuIFRoaXMgaXMgZmFzdGVyIHRoYW4gYHNwbGljZWBcbiAqIGJ1dCBjaGFuZ2VzIHRoZSBvcmRlciBvZiB0aGUgYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZhc3RXaXRob3V0S2VlcGluZ09yZGVyPFQ+KGFycmF5OiBUW10sIGluZGV4OiBudW1iZXIpIHtcblx0Y29uc3QgbGFzdCA9IGFycmF5Lmxlbmd0aCAtIDE7XG5cdGlmIChpbmRleCA8IGxhc3QpIHtcblx0XHRhcnJheVtpbmRleF0gPSBhcnJheVtsYXN0XTtcblx0fVxuXHRhcnJheS5wb3AoKTtcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBhIGJpbmFyeSBzZWFyY2ggYWxnb3JpdGhtIG92ZXIgYSBzb3J0ZWQgYXJyYXkuXG4gKlxuICogQHBhcmFtIGFycmF5IFRoZSBhcnJheSBiZWluZyBzZWFyY2hlZC5cbiAqIEBwYXJhbSBrZXkgVGhlIHZhbHVlIHdlIHNlYXJjaCBmb3IuXG4gKiBAcGFyYW0gY29tcGFyYXRvciBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdHdvIGFycmF5IGVsZW1lbnRzIGFuZCByZXR1cm5zIHplcm9cbiAqICAgaWYgdGhleSBhcmUgZXF1YWwsIGEgbmVnYXRpdmUgbnVtYmVyIGlmIHRoZSBmaXJzdCBlbGVtZW50IHByZWNlZGVzIHRoZVxuICogICBzZWNvbmQgb25lIGluIHRoZSBzb3J0aW5nIG9yZGVyLCBvciBhIHBvc2l0aXZlIG51bWJlciBpZiB0aGUgc2Vjb25kIGVsZW1lbnRcbiAqICAgcHJlY2VkZXMgdGhlIGZpcnN0IG9uZS5cbiAqIEByZXR1cm4gU2VlIHtAbGluayBiaW5hcnlTZWFyY2gyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYmluYXJ5U2VhcmNoPFQ+KGFycmF5OiBSZWFkb25seUFycmF5PFQ+LCBrZXk6IFQsIGNvbXBhcmF0b3I6IChvcDE6IFQsIG9wMjogVCkgPT4gbnVtYmVyKTogbnVtYmVyIHtcblx0cmV0dXJuIGJpbmFyeVNlYXJjaDIoYXJyYXkubGVuZ3RoLCBpID0+IGNvbXBhcmF0b3IoYXJyYXlbaV0sIGtleSkpO1xufVxuXG4vKipcbiAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBhbGdvcml0aG0gb3ZlciBhIHNvcnRlZCBjb2xsZWN0aW9uLiBVc2VmdWwgZm9yIGNhc2VzXG4gKiB3aGVuIHdlIG5lZWQgdG8gcGVyZm9ybSBhIGJpbmFyeSBzZWFyY2ggb3ZlciBzb21ldGhpbmcgdGhhdCBpc24ndCBhY3R1YWxseSBhblxuICogYXJyYXksIGFuZCBjb252ZXJ0aW5nIGRhdGEgdG8gYW4gYXJyYXkgd291bGQgZGVmZWF0IHRoZSB1c2Ugb2YgYmluYXJ5IHNlYXJjaFxuICogaW4gdGhlIGZpcnN0IHBsYWNlLlxuICpcbiAqIEBwYXJhbSBsZW5ndGggVGhlIGNvbGxlY3Rpb24gbGVuZ3RoLlxuICogQHBhcmFtIGNvbXBhcmVUb0tleSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4gaW5kZXggb2YgYW4gZWxlbWVudCBpbiB0aGVcbiAqICAgY29sbGVjdGlvbiBhbmQgcmV0dXJucyB6ZXJvIGlmIHRoZSB2YWx1ZSBhdCB0aGlzIGluZGV4IGlzIGVxdWFsIHRvIHRoZVxuICogICBzZWFyY2gga2V5LCBhIG5lZ2F0aXZlIG51bWJlciBpZiB0aGUgdmFsdWUgcHJlY2VkZXMgdGhlIHNlYXJjaCBrZXkgaW4gdGhlXG4gKiAgIHNvcnRpbmcgb3JkZXIsIG9yIGEgcG9zaXRpdmUgbnVtYmVyIGlmIHRoZSBzZWFyY2gga2V5IHByZWNlZGVzIHRoZSB2YWx1ZS5cbiAqIEByZXR1cm4gQSBub24tbmVnYXRpdmUgaW5kZXggb2YgYW4gZWxlbWVudCwgaWYgZm91bmQuIElmIG5vdCBmb3VuZCwgdGhlXG4gKiAgIHJlc3VsdCBpcyAtKG4rMSkgKG9yIH5uLCB1c2luZyBiaXR3aXNlIG5vdGF0aW9uKSwgd2hlcmUgbiBpcyB0aGUgaW5kZXhcbiAqICAgd2hlcmUgdGhlIGtleSBzaG91bGQgYmUgaW5zZXJ0ZWQgdG8gbWFpbnRhaW4gdGhlIHNvcnRpbmcgb3JkZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTZWFyY2gyKGxlbmd0aDogbnVtYmVyLCBjb21wYXJlVG9LZXk6IChpbmRleDogbnVtYmVyKSA9PiBudW1iZXIpOiBudW1iZXIge1xuXHRsZXQgbG93ID0gMCxcblx0XHRoaWdoID0gbGVuZ3RoIC0gMTtcblxuXHR3aGlsZSAobG93IDw9IGhpZ2gpIHtcblx0XHRjb25zdCBtaWQgPSAoKGxvdyArIGhpZ2gpIC8gMikgfCAwO1xuXHRcdGNvbnN0IGNvbXAgPSBjb21wYXJlVG9LZXkobWlkKTtcblx0XHRpZiAoY29tcCA8IDApIHtcblx0XHRcdGxvdyA9IG1pZCArIDE7XG5cdFx0fSBlbHNlIGlmIChjb21wID4gMCkge1xuXHRcdFx0aGlnaCA9IG1pZCAtIDE7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBtaWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiAtKGxvdyArIDEpO1xufVxuXG50eXBlIENvbXBhcmU8VD4gPSAoYTogVCwgYjogVCkgPT4gbnVtYmVyO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBxdWlja1NlbGVjdDxUPihudGg6IG51bWJlciwgZGF0YTogVFtdLCBjb21wYXJlOiBDb21wYXJlPFQ+KTogVCB7XG5cblx0bnRoID0gbnRoIHwgMDtcblxuXHRpZiAobnRoID49IGRhdGEubGVuZ3RoKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignaW52YWxpZCBpbmRleCcpO1xuXHR9XG5cblx0Y29uc3QgcGl2b3RWYWx1ZSA9IGRhdGFbTWF0aC5mbG9vcihkYXRhLmxlbmd0aCAqIE1hdGgucmFuZG9tKCkpXTtcblx0Y29uc3QgbG93ZXI6IFRbXSA9IFtdO1xuXHRjb25zdCBoaWdoZXI6IFRbXSA9IFtdO1xuXHRjb25zdCBwaXZvdHM6IFRbXSA9IFtdO1xuXG5cdGZvciAoY29uc3QgdmFsdWUgb2YgZGF0YSkge1xuXHRcdGNvbnN0IHZhbCA9IGNvbXBhcmUodmFsdWUsIHBpdm90VmFsdWUpO1xuXHRcdGlmICh2YWwgPCAwKSB7XG5cdFx0XHRsb3dlci5wdXNoKHZhbHVlKTtcblx0XHR9IGVsc2UgaWYgKHZhbCA+IDApIHtcblx0XHRcdGhpZ2hlci5wdXNoKHZhbHVlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cGl2b3RzLnB1c2godmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdGlmIChudGggPCBsb3dlci5sZW5ndGgpIHtcblx0XHRyZXR1cm4gcXVpY2tTZWxlY3QobnRoLCBsb3dlciwgY29tcGFyZSk7XG5cdH0gZWxzZSBpZiAobnRoIDwgbG93ZXIubGVuZ3RoICsgcGl2b3RzLmxlbmd0aCkge1xuXHRcdHJldHVybiBwaXZvdHNbMF07XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHF1aWNrU2VsZWN0KG50aCAtIChsb3dlci5sZW5ndGggKyBwaXZvdHMubGVuZ3RoKSwgaGlnaGVyLCBjb21wYXJlKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBCeTxUPihkYXRhOiBSZWFkb25seUFycmF5PFQ+LCBjb21wYXJlOiAoYTogVCwgYjogVCkgPT4gbnVtYmVyKTogVFtdW10ge1xuXHRjb25zdCByZXN1bHQ6IFRbXVtdID0gW107XG5cdGxldCBjdXJyZW50R3JvdXA6IFRbXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGRhdGEuc2xpY2UoMCkuc29ydChjb21wYXJlKSkge1xuXHRcdGlmICghY3VycmVudEdyb3VwIHx8IGNvbXBhcmUoY3VycmVudEdyb3VwWzBdLCBlbGVtZW50KSAhPT0gMCkge1xuXHRcdFx0Y3VycmVudEdyb3VwID0gW2VsZW1lbnRdO1xuXHRcdFx0cmVzdWx0LnB1c2goY3VycmVudEdyb3VwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VycmVudEdyb3VwLnB1c2goZWxlbWVudCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogU3BsaXRzIHRoZSBnaXZlbiBpdGVtcyBpbnRvIGEgbGlzdCBvZiAobm9uLWVtcHR5KSBncm91cHMuXG4gKiBgc2hvdWxkQmVHcm91cGVkYCBpcyB1c2VkIHRvIGRlY2lkZSBpZiB0d28gY29uc2VjdXRpdmUgaXRlbXMgc2hvdWxkIGJlIGluIHRoZSBzYW1lIGdyb3VwLlxuICogVGhlIG9yZGVyIG9mIHRoZSBpdGVtcyBpcyBwcmVzZXJ2ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiogZ3JvdXBBZGphY2VudEJ5PFQ+KGl0ZW1zOiBJdGVyYWJsZTxUPiwgc2hvdWxkQmVHcm91cGVkOiAoaXRlbTE6IFQsIGl0ZW0yOiBUKSA9PiBib29sZWFuKTogSXRlcmFibGU8VFtdPiB7XG5cdGxldCBjdXJyZW50R3JvdXA6IFRbXSB8IHVuZGVmaW5lZDtcblx0bGV0IGxhc3Q6IFQgfCB1bmRlZmluZWQ7XG5cdGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuXHRcdGlmIChsYXN0ICE9PSB1bmRlZmluZWQgJiYgc2hvdWxkQmVHcm91cGVkKGxhc3QsIGl0ZW0pKSB7XG5cdFx0XHRjdXJyZW50R3JvdXAhLnB1c2goaXRlbSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChjdXJyZW50R3JvdXApIHtcblx0XHRcdFx0eWllbGQgY3VycmVudEdyb3VwO1xuXHRcdFx0fVxuXHRcdFx0Y3VycmVudEdyb3VwID0gW2l0ZW1dO1xuXHRcdH1cblx0XHRsYXN0ID0gaXRlbTtcblx0fVxuXHRpZiAoY3VycmVudEdyb3VwKSB7XG5cdFx0eWllbGQgY3VycmVudEdyb3VwO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoQWRqYWNlbnQ8VD4oYXJyOiBUW10sIGY6IChpdGVtMTogVCB8IHVuZGVmaW5lZCwgaXRlbTI6IFQgfCB1bmRlZmluZWQpID0+IHZvaWQpOiB2b2lkIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0ZihpID09PSAwID8gdW5kZWZpbmVkIDogYXJyW2kgLSAxXSwgaSA9PT0gYXJyLmxlbmd0aCA/IHVuZGVmaW5lZCA6IGFycltpXSk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hXaXRoTmVpZ2hib3JzPFQ+KGFycjogVFtdLCBmOiAoYmVmb3JlOiBUIHwgdW5kZWZpbmVkLCBlbGVtZW50OiBULCBhZnRlcjogVCB8IHVuZGVmaW5lZCkgPT4gdm9pZCk6IHZvaWQge1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHRcdGYoaSA9PT0gMCA/IHVuZGVmaW5lZCA6IGFycltpIC0gMV0sIGFycltpXSwgaSArIDEgPT09IGFyci5sZW5ndGggPyB1bmRlZmluZWQgOiBhcnJbaSArIDFdKTtcblx0fVxufVxuXG5pbnRlcmZhY2UgSU11dGFibGVTcGxpY2U8VD4gZXh0ZW5kcyBJU3BsaWNlPFQ+IHtcblx0cmVhZG9ubHkgdG9JbnNlcnQ6IFRbXTtcblx0ZGVsZXRlQ291bnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBEaWZmcyB0d28gKnNvcnRlZCogYXJyYXlzIGFuZCBjb21wdXRlcyB0aGUgc3BsaWNlcyB3aGljaCBhcHBseSB0aGUgZGlmZi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRlZERpZmY8VD4oYmVmb3JlOiBSZWFkb25seUFycmF5PFQ+LCBhZnRlcjogUmVhZG9ubHlBcnJheTxUPiwgY29tcGFyZTogKGE6IFQsIGI6IFQpID0+IG51bWJlcik6IElTcGxpY2U8VD5bXSB7XG5cdGNvbnN0IHJlc3VsdDogSU11dGFibGVTcGxpY2U8VD5bXSA9IFtdO1xuXG5cdGZ1bmN0aW9uIHB1c2hTcGxpY2Uoc3RhcnQ6IG51bWJlciwgZGVsZXRlQ291bnQ6IG51bWJlciwgdG9JbnNlcnQ6IFRbXSk6IHZvaWQge1xuXHRcdGlmIChkZWxldGVDb3VudCA9PT0gMCAmJiB0b0luc2VydC5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBsYXRlc3QgPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuXG5cdFx0aWYgKGxhdGVzdCAmJiBsYXRlc3Quc3RhcnQgKyBsYXRlc3QuZGVsZXRlQ291bnQgPT09IHN0YXJ0KSB7XG5cdFx0XHRsYXRlc3QuZGVsZXRlQ291bnQgKz0gZGVsZXRlQ291bnQ7XG5cdFx0XHRsYXRlc3QudG9JbnNlcnQucHVzaCguLi50b0luc2VydCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdC5wdXNoKHsgc3RhcnQsIGRlbGV0ZUNvdW50LCB0b0luc2VydCB9KTtcblx0XHR9XG5cdH1cblxuXHRsZXQgYmVmb3JlSWR4ID0gMDtcblx0bGV0IGFmdGVySWR4ID0gMDtcblxuXHR3aGlsZSAodHJ1ZSkge1xuXHRcdGlmIChiZWZvcmVJZHggPT09IGJlZm9yZS5sZW5ndGgpIHtcblx0XHRcdHB1c2hTcGxpY2UoYmVmb3JlSWR4LCAwLCBhZnRlci5zbGljZShhZnRlcklkeCkpO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGlmIChhZnRlcklkeCA9PT0gYWZ0ZXIubGVuZ3RoKSB7XG5cdFx0XHRwdXNoU3BsaWNlKGJlZm9yZUlkeCwgYmVmb3JlLmxlbmd0aCAtIGJlZm9yZUlkeCwgW10pO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Y29uc3QgYmVmb3JlRWxlbWVudCA9IGJlZm9yZVtiZWZvcmVJZHhdO1xuXHRcdGNvbnN0IGFmdGVyRWxlbWVudCA9IGFmdGVyW2FmdGVySWR4XTtcblx0XHRjb25zdCBuID0gY29tcGFyZShiZWZvcmVFbGVtZW50LCBhZnRlckVsZW1lbnQpO1xuXHRcdGlmIChuID09PSAwKSB7XG5cdFx0XHQvLyBlcXVhbFxuXHRcdFx0YmVmb3JlSWR4ICs9IDE7XG5cdFx0XHRhZnRlcklkeCArPSAxO1xuXHRcdH0gZWxzZSBpZiAobiA8IDApIHtcblx0XHRcdC8vIGJlZm9yZUVsZW1lbnQgaXMgc21hbGxlciAtPiBiZWZvcmUgZWxlbWVudCByZW1vdmVkXG5cdFx0XHRwdXNoU3BsaWNlKGJlZm9yZUlkeCwgMSwgW10pO1xuXHRcdFx0YmVmb3JlSWR4ICs9IDE7XG5cdFx0fSBlbHNlIGlmIChuID4gMCkge1xuXHRcdFx0Ly8gYmVmb3JlRWxlbWVudCBpcyBncmVhdGVyIC0+IGFmdGVyIGVsZW1lbnQgYWRkZWRcblx0XHRcdHB1c2hTcGxpY2UoYmVmb3JlSWR4LCAwLCBbYWZ0ZXJFbGVtZW50XSk7XG5cdFx0XHRhZnRlcklkeCArPSAxO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogVGFrZXMgdHdvICpzb3J0ZWQqIGFycmF5cyBhbmQgY29tcHV0ZXMgdGhlaXIgZGVsdGEgKHJlbW92ZWQsIGFkZGVkIGVsZW1lbnRzKS5cbiAqIEZpbmlzaGVzIGluIGBNYXRoLm1pbihiZWZvcmUubGVuZ3RoLCBhZnRlci5sZW5ndGgpYCBzdGVwcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbHRhPFQ+KGJlZm9yZTogUmVhZG9ubHlBcnJheTxUPiwgYWZ0ZXI6IFJlYWRvbmx5QXJyYXk8VD4sIGNvbXBhcmU6IChhOiBULCBiOiBUKSA9PiBudW1iZXIpOiB7IHJlbW92ZWQ6IFRbXTsgYWRkZWQ6IFRbXSB9IHtcblx0Y29uc3Qgc3BsaWNlcyA9IHNvcnRlZERpZmYoYmVmb3JlLCBhZnRlciwgY29tcGFyZSk7XG5cdGNvbnN0IHJlbW92ZWQ6IFRbXSA9IFtdO1xuXHRjb25zdCBhZGRlZDogVFtdID0gW107XG5cblx0Zm9yIChjb25zdCBzcGxpY2Ugb2Ygc3BsaWNlcykge1xuXHRcdHJlbW92ZWQucHVzaCguLi5iZWZvcmUuc2xpY2Uoc3BsaWNlLnN0YXJ0LCBzcGxpY2Uuc3RhcnQgKyBzcGxpY2UuZGVsZXRlQ291bnQpKTtcblx0XHRhZGRlZC5wdXNoKC4uLnNwbGljZS50b0luc2VydCk7XG5cdH1cblxuXHRyZXR1cm4geyByZW1vdmVkLCBhZGRlZCB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHRvcCBOIGVsZW1lbnRzIGZyb20gdGhlIGFycmF5LlxuICpcbiAqIEZhc3RlciB0aGFuIHNvcnRpbmcgdGhlIGVudGlyZSBhcnJheSB3aGVuIHRoZSBhcnJheSBpcyBhIGxvdCBsYXJnZXIgdGhhbiBOLlxuICpcbiAqIEBwYXJhbSBhcnJheSBUaGUgdW5zb3J0ZWQgYXJyYXkuXG4gKiBAcGFyYW0gY29tcGFyZSBBIHNvcnQgZnVuY3Rpb24gZm9yIHRoZSBlbGVtZW50cy5cbiAqIEBwYXJhbSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLlxuICogQHJldHVybiBUaGUgZmlyc3QgbiBlbGVtZW50cyBmcm9tIGFycmF5IHdoZW4gc29ydGVkIHdpdGggY29tcGFyZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvcDxUPihhcnJheTogUmVhZG9ubHlBcnJheTxUPiwgY29tcGFyZTogKGE6IFQsIGI6IFQpID0+IG51bWJlciwgbjogbnVtYmVyKTogVFtdIHtcblx0aWYgKG4gPT09IDApIHtcblx0XHRyZXR1cm4gW107XG5cdH1cblx0Y29uc3QgcmVzdWx0ID0gYXJyYXkuc2xpY2UoMCwgbikuc29ydChjb21wYXJlKTtcblx0dG9wU3RlcChhcnJheSwgY29tcGFyZSwgcmVzdWx0LCBuLCBhcnJheS5sZW5ndGgpO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEFzeW5jaHJvbm91cyB2YXJpYW50IG9mIGB0b3AoKWAgYWxsb3dpbmcgZm9yIHNwbGl0dGluZyB1cCB3b3JrIGluIGJhdGNoZXMgYmV0d2VlbiB3aGljaCB0aGUgZXZlbnQgbG9vcCBjYW4gcnVuLlxuICpcbiAqIFJldHVybnMgdGhlIHRvcCBOIGVsZW1lbnRzIGZyb20gdGhlIGFycmF5LlxuICpcbiAqIEZhc3RlciB0aGFuIHNvcnRpbmcgdGhlIGVudGlyZSBhcnJheSB3aGVuIHRoZSBhcnJheSBpcyBhIGxvdCBsYXJnZXIgdGhhbiBOLlxuICpcbiAqIEBwYXJhbSBhcnJheSBUaGUgdW5zb3J0ZWQgYXJyYXkuXG4gKiBAcGFyYW0gY29tcGFyZSBBIHNvcnQgZnVuY3Rpb24gZm9yIHRoZSBlbGVtZW50cy5cbiAqIEBwYXJhbSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gcmV0dXJuLlxuICogQHBhcmFtIGJhdGNoIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgdG8gZXhhbWluZSBiZWZvcmUgeWllbGRpbmcgdG8gdGhlIGV2ZW50IGxvb3AuXG4gKiBAcmV0dXJuIFRoZSBmaXJzdCBuIGVsZW1lbnRzIGZyb20gYXJyYXkgd2hlbiBzb3J0ZWQgd2l0aCBjb21wYXJlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9wQXN5bmM8VD4oYXJyYXk6IFRbXSwgY29tcGFyZTogKGE6IFQsIGI6IFQpID0+IG51bWJlciwgbjogbnVtYmVyLCBiYXRjaDogbnVtYmVyLCB0b2tlbj86IENhbmNlbGxhdGlvblRva2VuKTogUHJvbWlzZTxUW10+IHtcblx0aWYgKG4gPT09IDApIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcblx0fVxuXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0KGFzeW5jICgpID0+IHtcblx0XHRcdGNvbnN0IG8gPSBhcnJheS5sZW5ndGg7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBhcnJheS5zbGljZSgwLCBuKS5zb3J0KGNvbXBhcmUpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IG4sIG0gPSBNYXRoLm1pbihuICsgYmF0Y2gsIG8pOyBpIDwgbzsgaSA9IG0sIG0gPSBNYXRoLm1pbihtICsgYmF0Y2gsIG8pKSB7XG5cdFx0XHRcdGlmIChpID4gbikge1xuXHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlKSk7IC8vIGFueSBvdGhlciBkZWxheSBmdW5jdGlvbiB3b3VsZCBzdGFydmUgSS9PXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRva2VuICYmIHRva2VuLmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IENhbmNlbGxhdGlvbkVycm9yKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dG9wU3RlcChhcnJheSwgY29tcGFyZSwgcmVzdWx0LCBpLCBtKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSkoKVxuXHRcdFx0LnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHRvcFN0ZXA8VD4oYXJyYXk6IFJlYWRvbmx5QXJyYXk8VD4sIGNvbXBhcmU6IChhOiBULCBiOiBUKSA9PiBudW1iZXIsIHJlc3VsdDogVFtdLCBpOiBudW1iZXIsIG06IG51bWJlcik6IHZvaWQge1xuXHRmb3IgKGNvbnN0IG4gPSByZXN1bHQubGVuZ3RoOyBpIDwgbTsgaSsrKSB7XG5cdFx0Y29uc3QgZWxlbWVudCA9IGFycmF5W2ldO1xuXHRcdGlmIChjb21wYXJlKGVsZW1lbnQsIHJlc3VsdFtuIC0gMV0pIDwgMCkge1xuXHRcdFx0cmVzdWx0LnBvcCgpO1xuXHRcdFx0Y29uc3QgaiA9IGZpbmRGaXJzdElkeE1vbm90b25vdXNPckFyckxlbihyZXN1bHQsIGUgPT4gY29tcGFyZShlbGVtZW50LCBlKSA8IDApO1xuXHRcdFx0cmVzdWx0LnNwbGljZShqLCAwLCBlbGVtZW50KTtcblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyBOZXcgYXJyYXkgd2l0aCBhbGwgZmFsc3kgdmFsdWVzIHJlbW92ZWQuIFRoZSBvcmlnaW5hbCBhcnJheSBJUyBOT1QgbW9kaWZpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb2FsZXNjZTxUPihhcnJheTogUmVhZG9ubHlBcnJheTxUIHwgdW5kZWZpbmVkIHwgbnVsbD4pOiBUW10ge1xuXHRyZXR1cm4gYXJyYXkuZmlsdGVyKChlKTogZSBpcyBUID0+ICEhZSk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBgYXJyYXlgLiBUaGUgb3JpZ2luYWwgYXJyYXkgSVMgbW9kaWZpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb2FsZXNjZUluUGxhY2U8VD4oYXJyYXk6IEFycmF5PFQgfCB1bmRlZmluZWQgfCBudWxsPik6IGFzc2VydHMgYXJyYXkgaXMgQXJyYXk8VD4ge1xuXHRsZXQgdG8gPSAwO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0aWYgKCEhYXJyYXlbaV0pIHtcblx0XHRcdGFycmF5W3RvXSA9IGFycmF5W2ldO1xuXHRcdFx0dG8gKz0gMTtcblx0XHR9XG5cdH1cblx0YXJyYXkubGVuZ3RoID0gdG87XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgVXNlIGBBcnJheS5jb3B5V2l0aGluYCBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlKGFycmF5OiBhbnlbXSwgZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyKTogdm9pZCB7XG5cdGFycmF5LnNwbGljZSh0bywgMCwgYXJyYXkuc3BsaWNlKGZyb20sIDEpWzBdKTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyBmYWxzZSBpZiB0aGUgcHJvdmlkZWQgb2JqZWN0IGlzIGFuIGFycmF5IGFuZCBub3QgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0ZhbHN5T3JFbXB0eShvYmo6IGFueSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gIUFycmF5LmlzQXJyYXkob2JqKSB8fCBvYmoubGVuZ3RoID09PSAwO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIFRydWUgaWYgdGhlIHByb3ZpZGVkIG9iamVjdCBpcyBhbiBhcnJheSBhbmQgaGFzIGF0IGxlYXN0IG9uZSBlbGVtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUFycmF5PFQ+KG9iajogVFtdIHwgdW5kZWZpbmVkIHwgbnVsbCk6IG9iaiBpcyBUW107XG5leHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUFycmF5PFQ+KG9iajogcmVhZG9ubHkgVFtdIHwgdW5kZWZpbmVkIHwgbnVsbCk6IG9iaiBpcyByZWFkb25seSBUW107XG5leHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUFycmF5PFQ+KG9iajogVFtdIHwgcmVhZG9ubHkgVFtdIHwgdW5kZWZpbmVkIHwgbnVsbCk6IG9iaiBpcyBUW10gfCByZWFkb25seSBUW10ge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShvYmopICYmIG9iai5sZW5ndGggPiAwO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIHRoZSBnaXZlbiBhcnJheS4gVGhlIG9wdGlvbmFsIGtleUZuIGFsbG93cyB0byBzcGVjaWZ5XG4gKiBob3cgZWxlbWVudHMgYXJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5IGJ5IHJldHVybmluZyBhbiBhbHRlcm5hdGUgdmFsdWUgZm9yIGVhY2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0aW5jdDxUPihhcnJheTogUmVhZG9ubHlBcnJheTxUPiwga2V5Rm46ICh2YWx1ZTogVCkgPT4gYW55ID0gdmFsdWUgPT4gdmFsdWUpOiBUW10ge1xuXHRjb25zdCBzZWVuID0gbmV3IFNldDxhbnk+KCk7XG5cblx0cmV0dXJuIGFycmF5LmZpbHRlcihlbGVtZW50ID0+IHtcblx0XHRjb25zdCBrZXkgPSBrZXlGbiEoZWxlbWVudCk7XG5cdFx0aWYgKHNlZW4uaGFzKGtleSkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0c2Vlbi5hZGQoa2V5KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmlxdWVGaWx0ZXI8VCwgUj4oa2V5Rm46ICh0OiBUKSA9PiBSKTogKHQ6IFQpID0+IGJvb2xlYW4ge1xuXHRjb25zdCBzZWVuID0gbmV3IFNldDxSPigpO1xuXG5cdHJldHVybiBlbGVtZW50ID0+IHtcblx0XHRjb25zdCBrZXkgPSBrZXlGbihlbGVtZW50KTtcblxuXHRcdGlmIChzZWVuLmhhcyhrZXkpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0c2Vlbi5hZGQoa2V5KTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0T3JEZWZhdWx0PFQsIE5vdEZvdW5kID0gVD4oYXJyYXk6IFJlYWRvbmx5QXJyYXk8VD4sIG5vdEZvdW5kVmFsdWU6IE5vdEZvdW5kKTogVCB8IE5vdEZvdW5kO1xuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0T3JEZWZhdWx0PFQ+KGFycmF5OiBSZWFkb25seUFycmF5PFQ+KTogVCB8IHVuZGVmaW5lZDtcbmV4cG9ydCBmdW5jdGlvbiBmaXJzdE9yRGVmYXVsdDxULCBOb3RGb3VuZCA9IFQ+KGFycmF5OiBSZWFkb25seUFycmF5PFQ+LCBub3RGb3VuZFZhbHVlPzogTm90Rm91bmQpOiBUIHwgTm90Rm91bmQgfCB1bmRlZmluZWQge1xuXHRyZXR1cm4gYXJyYXkubGVuZ3RoID4gMCA/IGFycmF5WzBdIDogbm90Rm91bmRWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxhc3RPckRlZmF1bHQ8VCwgTm90Rm91bmQgPSBUPihhcnJheTogUmVhZG9ubHlBcnJheTxUPiwgbm90Rm91bmRWYWx1ZTogTm90Rm91bmQpOiBUIHwgTm90Rm91bmQ7XG5leHBvcnQgZnVuY3Rpb24gbGFzdE9yRGVmYXVsdDxUPihhcnJheTogUmVhZG9ubHlBcnJheTxUPik6IFQgfCB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gbGFzdE9yRGVmYXVsdDxULCBOb3RGb3VuZCA9IFQ+KGFycmF5OiBSZWFkb25seUFycmF5PFQ+LCBub3RGb3VuZFZhbHVlPzogTm90Rm91bmQpOiBUIHwgTm90Rm91bmQgfCB1bmRlZmluZWQge1xuXHRyZXR1cm4gYXJyYXkubGVuZ3RoID4gMCA/IGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdIDogbm90Rm91bmRWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbW1vblByZWZpeExlbmd0aDxUPihvbmU6IFJlYWRvbmx5QXJyYXk8VD4sIG90aGVyOiBSZWFkb25seUFycmF5PFQ+LCBlcXVhbHM6IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gKGEsIGIpID0+IGEgPT09IGIpOiBudW1iZXIge1xuXHRsZXQgcmVzdWx0ID0gMDtcblxuXHRmb3IgKGxldCBpID0gMCwgbGVuID0gTWF0aC5taW4ob25lLmxlbmd0aCwgb3RoZXIubGVuZ3RoKTsgaSA8IGxlbiAmJiBlcXVhbHMob25lW2ldLCBvdGhlcltpXSk7IGkrKykge1xuXHRcdHJlc3VsdCsrO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJhbmdlKHRvOiBudW1iZXIpOiBudW1iZXJbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZShmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIpOiBudW1iZXJbXTtcbmV4cG9ydCBmdW5jdGlvbiByYW5nZShhcmc6IG51bWJlciwgdG8/OiBudW1iZXIpOiBudW1iZXJbXSB7XG5cdGxldCBmcm9tID0gdHlwZW9mIHRvID09PSAnbnVtYmVyJyA/IGFyZyA6IDA7XG5cblx0aWYgKHR5cGVvZiB0byA9PT0gJ251bWJlcicpIHtcblx0XHRmcm9tID0gYXJnO1xuXHR9IGVsc2Uge1xuXHRcdGZyb20gPSAwO1xuXHRcdHRvID0gYXJnO1xuXHR9XG5cblx0Y29uc3QgcmVzdWx0OiBudW1iZXJbXSA9IFtdO1xuXG5cdGlmIChmcm9tIDw9IHRvKSB7XG5cdFx0Zm9yIChsZXQgaSA9IGZyb207IGkgPCB0bzsgaSsrKSB7XG5cdFx0XHRyZXN1bHQucHVzaChpKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0Zm9yIChsZXQgaSA9IGZyb207IGkgPiB0bzsgaS0tKSB7XG5cdFx0XHRyZXN1bHQucHVzaChpKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5kZXg8VD4oYXJyYXk6IFJlYWRvbmx5QXJyYXk8VD4sIGluZGV4ZXI6ICh0OiBUKSA9PiBzdHJpbmcpOiB7IFtrZXk6IHN0cmluZ106IFQgfTtcbmV4cG9ydCBmdW5jdGlvbiBpbmRleDxULCBSPihhcnJheTogUmVhZG9ubHlBcnJheTxUPiwgaW5kZXhlcjogKHQ6IFQpID0+IHN0cmluZywgbWFwcGVyOiAodDogVCkgPT4gUik6IHsgW2tleTogc3RyaW5nXTogUiB9O1xuZXhwb3J0IGZ1bmN0aW9uIGluZGV4PFQsIFI+KGFycmF5OiBSZWFkb25seUFycmF5PFQ+LCBpbmRleGVyOiAodDogVCkgPT4gc3RyaW5nLCBtYXBwZXI/OiAodDogVCkgPT4gUik6IHsgW2tleTogc3RyaW5nXTogUiB9IHtcblx0cmV0dXJuIGFycmF5LnJlZHVjZSgociwgdCkgPT4ge1xuXHRcdHJbaW5kZXhlcih0KV0gPSBtYXBwZXIgPyBtYXBwZXIodCkgOiB0O1xuXHRcdHJldHVybiByO1xuXHR9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbn1cblxuLyoqXG4gKiBJbnNlcnRzIGFuIGVsZW1lbnQgaW50byBhbiBhcnJheS4gUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoLCB3aGVuXG4gKiBjYWxsZWQsIHdpbGwgcmVtb3ZlIHRoYXQgZWxlbWVudCBmcm9tIHRoZSBhcnJheS5cbiAqXG4gKiBAZGVwcmVjYXRlZCBJbiBhbG1vc3QgYWxsIGNhc2VzLCB1c2UgYSBgU2V0PFQ+YCBpbnN0ZWFkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zZXJ0PFQ+KGFycmF5OiBUW10sIGVsZW1lbnQ6IFQpOiAoKSA9PiB2b2lkIHtcblx0YXJyYXkucHVzaChlbGVtZW50KTtcblxuXHRyZXR1cm4gKCkgPT4gcmVtb3ZlKGFycmF5LCBlbGVtZW50KTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFuIGVsZW1lbnQgZnJvbSBhbiBhcnJheSBpZiBpdCBjYW4gYmUgZm91bmQuXG4gKlxuICogQGRlcHJlY2F0ZWQgSW4gYWxtb3N0IGFsbCBjYXNlcywgdXNlIGEgYFNldDxUPmAgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTogVFtdLCBlbGVtZW50OiBUKTogVCB8IHVuZGVmaW5lZCB7XG5cdGNvbnN0IGluZGV4ID0gYXJyYXkuaW5kZXhPZihlbGVtZW50KTtcblx0aWYgKGluZGV4ID4gLTEpIHtcblx0XHRhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuXG5cdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdH1cblxuXHRyZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEluc2VydCBgaW5zZXJ0QXJyYCBpbnNpZGUgYHRhcmdldGAgYXQgYGluc2VydEluZGV4YC5cbiAqIFBsZWFzZSBkb24ndCB0b3VjaCB1bmxlc3MgeW91IHVuZGVyc3RhbmQgaHR0cHM6Ly9qc3BlcmYuY29tL2luc2VydGluZy1hbi1hcnJheS13aXRoaW4tYW4tYXJyYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5SW5zZXJ0PFQ+KHRhcmdldDogVFtdLCBpbnNlcnRJbmRleDogbnVtYmVyLCBpbnNlcnRBcnI6IFRbXSk6IFRbXSB7XG5cdGNvbnN0IGJlZm9yZSA9IHRhcmdldC5zbGljZSgwLCBpbnNlcnRJbmRleCk7XG5cdGNvbnN0IGFmdGVyID0gdGFyZ2V0LnNsaWNlKGluc2VydEluZGV4KTtcblx0cmV0dXJuIGJlZm9yZS5jb25jYXQoaW5zZXJ0QXJyLCBhZnRlcik7XG59XG5cbi8qKlxuICogVXNlcyBGaXNoZXItWWF0ZXMgc2h1ZmZsZSB0byBzaHVmZmxlIHRoZSBnaXZlbiBhcnJheVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2h1ZmZsZTxUPihhcnJheTogVFtdLCBfc2VlZD86IG51bWJlcik6IHZvaWQge1xuXHRsZXQgcmFuZDogKCkgPT4gbnVtYmVyO1xuXG5cdGlmICh0eXBlb2YgX3NlZWQgPT09ICdudW1iZXInKSB7XG5cdFx0bGV0IHNlZWQgPSBfc2VlZDtcblx0XHQvLyBTZWVkZWQgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgaW4gSlMuIE1vZGlmaWVkIGZyb206XG5cdFx0Ly8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTIxMjk1L3NlZWRpbmctdGhlLXJhbmRvbS1udW1iZXItZ2VuZXJhdG9yLWluLWphdmFzY3JpcHRcblx0XHRyYW5kID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgeCA9IE1hdGguc2luKHNlZWQrKykgKiAxNzk0MjY1NDk7IC8vIHRocm93IGF3YXkgbW9zdCBzaWduaWZpY2FudCBkaWdpdHMgYW5kIHJlZHVjZSBhbnkgcG90ZW50aWFsIGJpYXNcblx0XHRcdHJldHVybiB4IC0gTWF0aC5mbG9vcih4KTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHJhbmQgPSBNYXRoLnJhbmRvbTtcblx0fVxuXG5cdGZvciAobGV0IGkgPSBhcnJheS5sZW5ndGggLSAxOyBpID4gMDsgaSAtPSAxKSB7XG5cdFx0Y29uc3QgaiA9IE1hdGguZmxvb3IocmFuZCgpICogKGkgKyAxKSk7XG5cdFx0Y29uc3QgdGVtcCA9IGFycmF5W2ldO1xuXHRcdGFycmF5W2ldID0gYXJyYXlbal07XG5cdFx0YXJyYXlbal0gPSB0ZW1wO1xuXHR9XG59XG5cbi8qKlxuICogUHVzaGVzIGFuIGVsZW1lbnQgdG8gdGhlIHN0YXJ0IG9mIHRoZSBhcnJheSwgaWYgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoVG9TdGFydDxUPihhcnI6IFRbXSwgdmFsdWU6IFQpOiB2b2lkIHtcblx0Y29uc3QgaW5kZXggPSBhcnIuaW5kZXhPZih2YWx1ZSk7XG5cblx0aWYgKGluZGV4ID4gLTEpIHtcblx0XHRhcnIuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRhcnIudW5zaGlmdCh2YWx1ZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBQdXNoZXMgYW4gZWxlbWVudCB0byB0aGUgZW5kIG9mIHRoZSBhcnJheSwgaWYgZm91bmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwdXNoVG9FbmQ8VD4oYXJyOiBUW10sIHZhbHVlOiBUKTogdm9pZCB7XG5cdGNvbnN0IGluZGV4ID0gYXJyLmluZGV4T2YodmFsdWUpO1xuXG5cdGlmIChpbmRleCA+IC0xKSB7XG5cdFx0YXJyLnNwbGljZShpbmRleCwgMSk7XG5cdFx0YXJyLnB1c2godmFsdWUpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwdXNoTWFueTxUPihhcnI6IFRbXSwgaXRlbXM6IFJlYWRvbmx5QXJyYXk8VD4pOiB2b2lkIHtcblx0Zm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG5cdFx0YXJyLnB1c2goaXRlbSk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcEFycmF5T3JOb3Q8VCwgVT4oaXRlbXM6IFQgfCBUW10sIGZuOiAoXzogVCkgPT4gVSk6IFUgfCBVW10ge1xuXHRyZXR1cm4gQXJyYXkuaXNBcnJheShpdGVtcykgP1xuXHRcdGl0ZW1zLm1hcChmbikgOlxuXHRcdGZuKGl0ZW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXk8VD4oeDogVCB8IFRbXSk6IFRbXTtcbmV4cG9ydCBmdW5jdGlvbiBhc0FycmF5PFQ+KHg6IFQgfCByZWFkb25seSBUW10pOiByZWFkb25seSBUW107XG5leHBvcnQgZnVuY3Rpb24gYXNBcnJheTxUPih4OiBUIHwgVFtdKTogVFtdIHtcblx0cmV0dXJuIEFycmF5LmlzQXJyYXkoeCkgPyB4IDogW3hdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tRWxlbWVudDxUPihhcnI6IFRbXSk6IFQgfCB1bmRlZmluZWQge1xuXHRyZXR1cm4gYXJyW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFyci5sZW5ndGgpXTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgdGhlIG5ldyBpdGVtcyBpbiB0aGUgYXJyYXkuXG4gKiBAcGFyYW0gYXJyYXkgVGhlIG9yaWdpbmFsIGFycmF5LlxuICogQHBhcmFtIHN0YXJ0IFRoZSB6ZXJvLWJhc2VkIGxvY2F0aW9uIGluIHRoZSBhcnJheSBmcm9tIHdoaWNoIHRvIHN0YXJ0IGluc2VydGluZyBlbGVtZW50cy5cbiAqIEBwYXJhbSBuZXdJdGVtcyBUaGUgaXRlbXMgdG8gYmUgaW5zZXJ0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc2VydEludG88VD4oYXJyYXk6IFRbXSwgc3RhcnQ6IG51bWJlciwgbmV3SXRlbXM6IFRbXSk6IHZvaWQge1xuXHRjb25zdCBzdGFydElkeCA9IGdldEFjdHVhbFN0YXJ0SW5kZXgoYXJyYXksIHN0YXJ0KTtcblx0Y29uc3Qgb3JpZ2luYWxMZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdGNvbnN0IG5ld0l0ZW1zTGVuZ3RoID0gbmV3SXRlbXMubGVuZ3RoO1xuXHRhcnJheS5sZW5ndGggPSBvcmlnaW5hbExlbmd0aCArIG5ld0l0ZW1zTGVuZ3RoO1xuXHQvLyBNb3ZlIHRoZSBpdGVtcyBhZnRlciB0aGUgc3RhcnQgaW5kZXgsIHN0YXJ0IGZyb20gdGhlIGVuZCBzbyB0aGF0IHdlIGRvbid0IG92ZXJ3cml0ZSBhbnkgdmFsdWUuXG5cdGZvciAobGV0IGkgPSBvcmlnaW5hbExlbmd0aCAtIDE7IGkgPj0gc3RhcnRJZHg7IGktLSkge1xuXHRcdGFycmF5W2kgKyBuZXdJdGVtc0xlbmd0aF0gPSBhcnJheVtpXTtcblx0fVxuXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbmV3SXRlbXNMZW5ndGg7IGkrKykge1xuXHRcdGFycmF5W2kgKyBzdGFydElkeF0gPSBuZXdJdGVtc1tpXTtcblx0fVxufVxuXG4vKipcbiAqIFJlbW92ZXMgZWxlbWVudHMgZnJvbSBhbiBhcnJheSBhbmQgaW5zZXJ0cyBuZXcgZWxlbWVudHMgaW4gdGhlaXIgcGxhY2UsIHJldHVybmluZyB0aGUgZGVsZXRlZCBlbGVtZW50cy4gQWx0ZXJuYXRpdmUgdG8gdGhlIG5hdGl2ZSBBcnJheS5zcGxpY2UgbWV0aG9kLCBpdFxuICogY2FuIG9ubHkgc3VwcG9ydCBsaW1pdGVkIG51bWJlciBvZiBpdGVtcyBkdWUgdG8gdGhlIG1heGltdW0gY2FsbCBzdGFjayBzaXplIGxpbWl0LlxuICogQHBhcmFtIGFycmF5IFRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBzdGFydCBUaGUgemVyby1iYXNlZCBsb2NhdGlvbiBpbiB0aGUgYXJyYXkgZnJvbSB3aGljaCB0byBzdGFydCByZW1vdmluZyBlbGVtZW50cy5cbiAqIEBwYXJhbSBkZWxldGVDb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIHRoYXQgd2VyZSBkZWxldGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3BsaWNlPFQ+KGFycmF5OiBUW10sIHN0YXJ0OiBudW1iZXIsIGRlbGV0ZUNvdW50OiBudW1iZXIsIG5ld0l0ZW1zOiBUW10pOiBUW10ge1xuXHRjb25zdCBpbmRleCA9IGdldEFjdHVhbFN0YXJ0SW5kZXgoYXJyYXksIHN0YXJ0KTtcblx0bGV0IHJlc3VsdCA9IGFycmF5LnNwbGljZShpbmRleCwgZGVsZXRlQ291bnQpO1xuXHRpZiAocmVzdWx0ID09PSB1bmRlZmluZWQpIHtcblx0XHQvLyBzZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTI2MTE0MFxuXHRcdHJlc3VsdCA9IFtdO1xuXHR9XG5cdGluc2VydEludG8oYXJyYXksIGluZGV4LCBuZXdJdGVtcyk7XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSBhY3R1YWwgc3RhcnQgaW5kZXggKHNhbWUgbG9naWMgYXMgdGhlIG5hdGl2ZSBzcGxpY2UoKSBvciBzbGljZSgpKVxuICogSWYgZ3JlYXRlciB0aGFuIHRoZSBsZW5ndGggb2YgdGhlIGFycmF5LCBzdGFydCB3aWxsIGJlIHNldCB0byB0aGUgbGVuZ3RoIG9mIHRoZSBhcnJheS4gSW4gdGhpcyBjYXNlLCBubyBlbGVtZW50IHdpbGwgYmUgZGVsZXRlZCBidXQgdGhlIG1ldGhvZCB3aWxsIGJlaGF2ZSBhcyBhbiBhZGRpbmcgZnVuY3Rpb24sIGFkZGluZyBhcyBtYW55IGVsZW1lbnQgYXMgaXRlbVtuKl0gcHJvdmlkZWQuXG4gKiBJZiBuZWdhdGl2ZSwgaXQgd2lsbCBiZWdpbiB0aGF0IG1hbnkgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBhcnJheS4gKEluIHRoaXMgY2FzZSwgdGhlIG9yaWdpbiAtMSwgbWVhbmluZyAtbiBpcyB0aGUgaW5kZXggb2YgdGhlIG50aCBsYXN0IGVsZW1lbnQsIGFuZCBpcyB0aGVyZWZvcmUgZXF1aXZhbGVudCB0byB0aGUgaW5kZXggb2YgYXJyYXkubGVuZ3RoIC0gbi4pIElmIGFycmF5Lmxlbmd0aCArIHN0YXJ0IGlzIGxlc3MgdGhhbiAwLCBpdCB3aWxsIGJlZ2luIGZyb20gaW5kZXggMC5cbiAqIEBwYXJhbSBhcnJheSBUaGUgdGFyZ2V0IGFycmF5LlxuICogQHBhcmFtIHN0YXJ0IFRoZSBvcGVyYXRpb24gaW5kZXguXG4gKi9cbmZ1bmN0aW9uIGdldEFjdHVhbFN0YXJ0SW5kZXg8VD4oYXJyYXk6IFRbXSwgc3RhcnQ6IG51bWJlcik6IG51bWJlciB7XG5cdHJldHVybiBzdGFydCA8IDAgPyBNYXRoLm1heChzdGFydCArIGFycmF5Lmxlbmd0aCwgMCkgOiBNYXRoLm1pbihzdGFydCwgYXJyYXkubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBXaGVuIGNvbXBhcmluZyB0d28gdmFsdWVzLFxuICogYSBuZWdhdGl2ZSBudW1iZXIgaW5kaWNhdGVzIHRoYXQgdGhlIGZpcnN0IHZhbHVlIGlzIGxlc3MgdGhhbiB0aGUgc2Vjb25kLFxuICogYSBwb3NpdGl2ZSBudW1iZXIgaW5kaWNhdGVzIHRoYXQgdGhlIGZpcnN0IHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgc2Vjb25kLFxuICogYW5kIHplcm8gaW5kaWNhdGVzIHRoYXQgbmVpdGhlciBpcyB0aGUgY2FzZS5cbiovXG5leHBvcnQgdHlwZSBDb21wYXJlUmVzdWx0ID0gbnVtYmVyO1xuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBhcmVSZXN1bHQge1xuXHRleHBvcnQgZnVuY3Rpb24gaXNMZXNzVGhhbihyZXN1bHQ6IENvbXBhcmVSZXN1bHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gcmVzdWx0IDwgMDtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBpc0xlc3NUaGFuT3JFcXVhbChyZXN1bHQ6IENvbXBhcmVSZXN1bHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gcmVzdWx0IDw9IDA7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gaXNHcmVhdGVyVGhhbihyZXN1bHQ6IENvbXBhcmVSZXN1bHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gcmVzdWx0ID4gMDtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBpc05laXRoZXJMZXNzT3JHcmVhdGVyVGhhbihyZXN1bHQ6IENvbXBhcmVSZXN1bHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gcmVzdWx0ID09PSAwO1xuXHR9XG5cblx0ZXhwb3J0IGNvbnN0IGdyZWF0ZXJUaGFuID0gMTtcblx0ZXhwb3J0IGNvbnN0IGxlc3NUaGFuID0gLTE7XG5cdGV4cG9ydCBjb25zdCBuZWl0aGVyTGVzc09yR3JlYXRlclRoYW4gPSAwO1xufVxuXG4vKipcbiAqIEEgY29tcGFyYXRvciBgY2AgZGVmaW5lcyBhIHRvdGFsIG9yZGVyIGA8PWAgb24gYFRgIGFzIGZvbGxvd2luZzpcbiAqIGBjKGEsIGIpIDw9IDBgIGlmZiBgYWAgPD0gYGJgLlxuICogV2UgYWxzbyBoYXZlIGBjKGEsIGIpID09IDBgIGlmZiBgYyhiLCBhKSA9PSAwYC5cbiovXG5leHBvcnQgdHlwZSBDb21wYXJhdG9yPFQ+ID0gKGE6IFQsIGI6IFQpID0+IENvbXBhcmVSZXN1bHQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlQnk8VEl0ZW0sIFRDb21wYXJlQnk+KHNlbGVjdG9yOiAoaXRlbTogVEl0ZW0pID0+IFRDb21wYXJlQnksIGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VENvbXBhcmVCeT4pOiBDb21wYXJhdG9yPFRJdGVtPiB7XG5cdHJldHVybiAoYSwgYikgPT4gY29tcGFyYXRvcihzZWxlY3RvcihhKSwgc2VsZWN0b3IoYikpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGllQnJlYWtDb21wYXJhdG9yczxUSXRlbT4oLi4uY29tcGFyYXRvcnM6IENvbXBhcmF0b3I8VEl0ZW0+W10pOiBDb21wYXJhdG9yPFRJdGVtPiB7XG5cdHJldHVybiAoaXRlbTEsIGl0ZW0yKSA9PiB7XG5cdFx0Zm9yIChjb25zdCBjb21wYXJhdG9yIG9mIGNvbXBhcmF0b3JzKSB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSBjb21wYXJhdG9yKGl0ZW0xLCBpdGVtMik7XG5cdFx0XHRpZiAoIUNvbXBhcmVSZXN1bHQuaXNOZWl0aGVyTGVzc09yR3JlYXRlclRoYW4ocmVzdWx0KSkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gQ29tcGFyZVJlc3VsdC5uZWl0aGVyTGVzc09yR3JlYXRlclRoYW47XG5cdH07XG59XG5cbi8qKlxuICogVGhlIG5hdHVyYWwgb3JkZXIgb24gbnVtYmVycy5cbiovXG5leHBvcnQgY29uc3QgbnVtYmVyQ29tcGFyYXRvcjogQ29tcGFyYXRvcjxudW1iZXI+ID0gKGEsIGIpID0+IGEgLSBiO1xuXG5leHBvcnQgY29uc3QgYm9vbGVhbkNvbXBhcmF0b3I6IENvbXBhcmF0b3I8Ym9vbGVhbj4gPSAoYSwgYikgPT4gbnVtYmVyQ29tcGFyYXRvcihhID8gMSA6IDAsIGIgPyAxIDogMCk7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXZlcnNlT3JkZXI8VEl0ZW0+KGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VEl0ZW0+KTogQ29tcGFyYXRvcjxUSXRlbT4ge1xuXHRyZXR1cm4gKGEsIGIpID0+IC1jb21wYXJhdG9yKGEsIGIpO1xufVxuXG5leHBvcnQgY2xhc3MgQXJyYXlRdWV1ZTxUPiB7XG5cdHByaXZhdGUgZmlyc3RJZHggPSAwO1xuXHRwcml2YXRlIGxhc3RJZHggPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7XG5cblx0LyoqXG5cdCAqIENvbnN0cnVjdHMgYSBxdWV1ZSB0aGF0IGlzIGJhY2tlZCBieSB0aGUgZ2l2ZW4gYXJyYXkuIFJ1bnRpbWUgaXMgTygxKS5cblx0Ki9cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBpdGVtczogcmVhZG9ubHkgVFtdKSB7IH1cblxuXHRnZXQgbGVuZ3RoKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMubGFzdElkeCAtIHRoaXMuZmlyc3RJZHggKyAxO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnN1bWVzIGVsZW1lbnRzIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgcXVldWUgYXMgbG9uZyBhcyB0aGUgcHJlZGljYXRlIHJldHVybnMgdHJ1ZS5cblx0ICogSWYgbm8gZWxlbWVudHMgd2VyZSBjb25zdW1lZCwgYG51bGxgIGlzIHJldHVybmVkLiBIYXMgYSBydW50aW1lIG9mIE8ocmVzdWx0Lmxlbmd0aCkuXG5cdCovXG5cdHRha2VXaGlsZShwcmVkaWNhdGU6ICh2YWx1ZTogVCkgPT4gYm9vbGVhbik6IFRbXSB8IG51bGwge1xuXHRcdC8vIFAoaykgOj0gayA8PSB0aGlzLmxhc3RJZHggJiYgcHJlZGljYXRlKHRoaXMuaXRlbXNba10pXG5cdFx0Ly8gRmluZCBzIDo9IG1pbiB7IGsgfCBrID49IHRoaXMuZmlyc3RJZHggJiYgIVAoaykgfSBhbmQgcmV0dXJuIHRoaXMuZGF0YVt0aGlzLmZpcnN0SWR4Li4ucylcblxuXHRcdGxldCBzdGFydElkeCA9IHRoaXMuZmlyc3RJZHg7XG5cdFx0d2hpbGUgKHN0YXJ0SWR4IDwgdGhpcy5pdGVtcy5sZW5ndGggJiYgcHJlZGljYXRlKHRoaXMuaXRlbXNbc3RhcnRJZHhdKSkge1xuXHRcdFx0c3RhcnRJZHgrKztcblx0XHR9XG5cdFx0Y29uc3QgcmVzdWx0ID0gc3RhcnRJZHggPT09IHRoaXMuZmlyc3RJZHggPyBudWxsIDogdGhpcy5pdGVtcy5zbGljZSh0aGlzLmZpcnN0SWR4LCBzdGFydElkeCk7XG5cdFx0dGhpcy5maXJzdElkeCA9IHN0YXJ0SWR4O1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQ29uc3VtZXMgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBxdWV1ZSBhcyBsb25nIGFzIHRoZSBwcmVkaWNhdGUgcmV0dXJucyB0cnVlLlxuXHQgKiBJZiBubyBlbGVtZW50cyB3ZXJlIGNvbnN1bWVkLCBgbnVsbGAgaXMgcmV0dXJuZWQuXG5cdCAqIFRoZSByZXN1bHQgaGFzIHRoZSBzYW1lIG9yZGVyIGFzIHRoZSB1bmRlcmx5aW5nIGFycmF5IVxuXHQqL1xuXHR0YWtlRnJvbUVuZFdoaWxlKHByZWRpY2F0ZTogKHZhbHVlOiBUKSA9PiBib29sZWFuKTogVFtdIHwgbnVsbCB7XG5cdFx0Ly8gUChrKSA6PSB0aGlzLmZpcnN0SWR4ID49IGsgJiYgcHJlZGljYXRlKHRoaXMuaXRlbXNba10pXG5cdFx0Ly8gRmluZCBzIDo9IG1heCB7IGsgfCBrIDw9IHRoaXMubGFzdElkeCAmJiAhUChrKSB9IGFuZCByZXR1cm4gdGhpcy5kYXRhKHMuLi50aGlzLmxhc3RJZHhdXG5cblx0XHRsZXQgZW5kSWR4ID0gdGhpcy5sYXN0SWR4O1xuXHRcdHdoaWxlIChlbmRJZHggPj0gMCAmJiBwcmVkaWNhdGUodGhpcy5pdGVtc1tlbmRJZHhdKSkge1xuXHRcdFx0ZW5kSWR4LS07XG5cdFx0fVxuXHRcdGNvbnN0IHJlc3VsdCA9IGVuZElkeCA9PT0gdGhpcy5sYXN0SWR4ID8gbnVsbCA6IHRoaXMuaXRlbXMuc2xpY2UoZW5kSWR4ICsgMSwgdGhpcy5sYXN0SWR4ICsgMSk7XG5cdFx0dGhpcy5sYXN0SWR4ID0gZW5kSWR4O1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRwZWVrKCk6IFQgfCB1bmRlZmluZWQge1xuXHRcdGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuaXRlbXNbdGhpcy5maXJzdElkeF07XG5cdH1cblxuXHRwZWVrTGFzdCgpOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRpZiAodGhpcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLml0ZW1zW3RoaXMubGFzdElkeF07XG5cdH1cblxuXHRkZXF1ZXVlKCk6IFQgfCB1bmRlZmluZWQge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuaXRlbXNbdGhpcy5maXJzdElkeF07XG5cdFx0dGhpcy5maXJzdElkeCsrO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRyZW1vdmVMYXN0KCk6IFQgfCB1bmRlZmluZWQge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuaXRlbXNbdGhpcy5sYXN0SWR4XTtcblx0XHR0aGlzLmxhc3RJZHgtLTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0dGFrZUNvdW50KGNvdW50OiBudW1iZXIpOiBUW10ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IHRoaXMuaXRlbXMuc2xpY2UodGhpcy5maXJzdElkeCwgdGhpcy5maXJzdElkeCArIGNvdW50KTtcblx0XHR0aGlzLmZpcnN0SWR4ICs9IGNvdW50O1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGZhc3RlciB0aGFuIGFuIGl0ZXJhdG9yIGFuZCBhcnJheSBmb3IgbGF6eSBjb21wdXRlZCBkYXRhLlxuKi9cbmV4cG9ydCBjbGFzcyBDYWxsYmFja0l0ZXJhYmxlPFQ+IHtcblx0cHVibGljIHN0YXRpYyByZWFkb25seSBlbXB0eSA9IG5ldyBDYWxsYmFja0l0ZXJhYmxlPG5ldmVyPihfY2FsbGJhY2sgPT4geyB9KTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHQvKipcblx0XHQgKiBDYWxscyB0aGUgY2FsbGJhY2sgZm9yIGV2ZXJ5IGl0ZW0uXG5cdFx0ICogU3RvcHMgd2hlbiB0aGUgY2FsbGJhY2sgcmV0dXJucyBmYWxzZS5cblx0XHQqL1xuXHRcdHB1YmxpYyByZWFkb25seSBpdGVyYXRlOiAoY2FsbGJhY2s6IChpdGVtOiBUKSA9PiBib29sZWFuKSA9PiB2b2lkXG5cdCkge1xuXHR9XG5cblx0Zm9yRWFjaChoYW5kbGVyOiAoaXRlbTogVCkgPT4gdm9pZCkge1xuXHRcdHRoaXMuaXRlcmF0ZShpdGVtID0+IHsgaGFuZGxlcihpdGVtKTsgcmV0dXJuIHRydWU7IH0pO1xuXHR9XG5cblx0dG9BcnJheSgpOiBUW10ge1xuXHRcdGNvbnN0IHJlc3VsdDogVFtdID0gW107XG5cdFx0dGhpcy5pdGVyYXRlKGl0ZW0gPT4geyByZXN1bHQucHVzaChpdGVtKTsgcmV0dXJuIHRydWU7IH0pO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRmaWx0ZXIocHJlZGljYXRlOiAoaXRlbTogVCkgPT4gYm9vbGVhbik6IENhbGxiYWNrSXRlcmFibGU8VD4ge1xuXHRcdHJldHVybiBuZXcgQ2FsbGJhY2tJdGVyYWJsZShjYiA9PiB0aGlzLml0ZXJhdGUoaXRlbSA9PiBwcmVkaWNhdGUoaXRlbSkgPyBjYihpdGVtKSA6IHRydWUpKTtcblx0fVxuXG5cdG1hcDxUUmVzdWx0PihtYXBGbjogKGl0ZW06IFQpID0+IFRSZXN1bHQpOiBDYWxsYmFja0l0ZXJhYmxlPFRSZXN1bHQ+IHtcblx0XHRyZXR1cm4gbmV3IENhbGxiYWNrSXRlcmFibGU8VFJlc3VsdD4oY2IgPT4gdGhpcy5pdGVyYXRlKGl0ZW0gPT4gY2IobWFwRm4oaXRlbSkpKSk7XG5cdH1cblxuXHRzb21lKHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBib29sZWFuIHtcblx0XHRsZXQgcmVzdWx0ID0gZmFsc2U7XG5cdFx0dGhpcy5pdGVyYXRlKGl0ZW0gPT4geyByZXN1bHQgPSBwcmVkaWNhdGUoaXRlbSk7IHJldHVybiAhcmVzdWx0OyB9KTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0ZmluZEZpcnN0KHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRsZXQgcmVzdWx0OiBUIHwgdW5kZWZpbmVkO1xuXHRcdHRoaXMuaXRlcmF0ZShpdGVtID0+IHtcblx0XHRcdGlmIChwcmVkaWNhdGUoaXRlbSkpIHtcblx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdGZpbmRMYXN0KHByZWRpY2F0ZTogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRsZXQgcmVzdWx0OiBUIHwgdW5kZWZpbmVkO1xuXHRcdHRoaXMuaXRlcmF0ZShpdGVtID0+IHtcblx0XHRcdGlmIChwcmVkaWNhdGUoaXRlbSkpIHtcblx0XHRcdFx0cmVzdWx0ID0gaXRlbTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0pO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHRmaW5kTGFzdE1heEJ5KGNvbXBhcmF0b3I6IENvbXBhcmF0b3I8VD4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRsZXQgcmVzdWx0OiBUIHwgdW5kZWZpbmVkO1xuXHRcdGxldCBmaXJzdCA9IHRydWU7XG5cdFx0dGhpcy5pdGVyYXRlKGl0ZW0gPT4ge1xuXHRcdFx0aWYgKGZpcnN0IHx8IENvbXBhcmVSZXN1bHQuaXNHcmVhdGVyVGhhbihjb21wYXJhdG9yKGl0ZW0sIHJlc3VsdCEpKSkge1xuXHRcdFx0XHRmaXJzdCA9IGZhbHNlO1xuXHRcdFx0XHRyZXN1bHQgPSBpdGVtO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSByZS1hcnJhbmdlbWVudCBvZiBpdGVtcyBpbiBhbiBhcnJheS5cbiAqL1xuZXhwb3J0IGNsYXNzIFBlcm11dGF0aW9uIHtcblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBfaW5kZXhNYXA6IHJlYWRvbmx5IG51bWJlcltdKSB7IH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIHBlcm11dGF0aW9uIHRoYXQgc29ydHMgdGhlIGdpdmVuIGFycmF5IGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gY29tcGFyZSBmdW5jdGlvbi5cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgY3JlYXRlU29ydFBlcm11dGF0aW9uPFQ+KGFycjogcmVhZG9ubHkgVFtdLCBjb21wYXJlRm46IChhOiBULCBiOiBUKSA9PiBudW1iZXIpOiBQZXJtdXRhdGlvbiB7XG5cdFx0Y29uc3Qgc29ydEluZGljZXMgPSBBcnJheS5mcm9tKGFyci5rZXlzKCkpLnNvcnQoKGluZGV4MSwgaW5kZXgyKSA9PiBjb21wYXJlRm4oYXJyW2luZGV4MV0sIGFycltpbmRleDJdKSk7XG5cdFx0cmV0dXJuIG5ldyBQZXJtdXRhdGlvbihzb3J0SW5kaWNlcyk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIG5ldyBhcnJheSB3aXRoIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYXJyYXkgcmUtYXJyYW5nZWQgYWNjb3JkaW5nIHRvIHRoaXMgcGVybXV0YXRpb24uXG5cdCAqL1xuXHRhcHBseTxUPihhcnI6IHJlYWRvbmx5IFRbXSk6IFRbXSB7XG5cdFx0cmV0dXJuIGFyci5tYXAoKF8sIGluZGV4KSA9PiBhcnJbdGhpcy5faW5kZXhNYXBbaW5kZXhdXSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIG5ldyBwZXJtdXRhdGlvbiB0aGF0IHVuZG9lcyB0aGUgcmUtYXJyYW5nZW1lbnQgb2YgdGhpcyBwZXJtdXRhdGlvbi5cblx0Ki9cblx0aW52ZXJzZSgpOiBQZXJtdXRhdGlvbiB7XG5cdFx0Y29uc3QgaW52ZXJzZUluZGV4TWFwID0gdGhpcy5faW5kZXhNYXAuc2xpY2UoKTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2luZGV4TWFwLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpbnZlcnNlSW5kZXhNYXBbdGhpcy5faW5kZXhNYXBbaV1dID0gaTtcblx0XHR9XG5cdFx0cmV0dXJuIG5ldyBQZXJtdXRhdGlvbihpbnZlcnNlSW5kZXhNYXApO1xuXHR9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIGZvciBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXRcbiAqIGFjdHMgYSBkaWN0aW9uYXJ5LiBUaGUga2V5cyBhcmUgc3RyaW5ncy5cbiAqL1xuZXhwb3J0IHR5cGUgSVN0cmluZ0RpY3Rpb25hcnk8Vj4gPSBSZWNvcmQ8c3RyaW5nLCBWPjtcblxuLyoqXG4gKiBBbiBpbnRlcmZhY2UgZm9yIGEgSmF2YVNjcmlwdCBvYmplY3QgdGhhdFxuICogYWN0cyBhIGRpY3Rpb25hcnkuIFRoZSBrZXlzIGFyZSBudW1iZXJzLlxuICovXG5leHBvcnQgdHlwZSBJTnVtYmVyRGljdGlvbmFyeTxWPiA9IFJlY29yZDxudW1iZXIsIFY+O1xuXG4vKipcbiAqIEdyb3VwcyB0aGUgY29sbGVjdGlvbiBpbnRvIGEgZGljdGlvbmFyeSBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcbiAqIGdyb3VwIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBCeTxLIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyIHwgc3ltYm9sLCBWPihkYXRhOiBWW10sIGdyb3VwRm46IChlbGVtZW50OiBWKSA9PiBLKTogUmVjb3JkPEssIFZbXT4ge1xuXHRjb25zdCByZXN1bHQ6IFJlY29yZDxLLCBWW10+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGRhdGEpIHtcblx0XHRjb25zdCBrZXkgPSBncm91cEZuKGVsZW1lbnQpO1xuXHRcdGxldCB0YXJnZXQgPSByZXN1bHRba2V5XTtcblx0XHRpZiAoIXRhcmdldCkge1xuXHRcdFx0dGFyZ2V0ID0gcmVzdWx0W2tleV0gPSBbXTtcblx0XHR9XG5cdFx0dGFyZ2V0LnB1c2goZWxlbWVudCk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZTZXRzPFQ+KGJlZm9yZTogU2V0PFQ+LCBhZnRlcjogU2V0PFQ+KTogeyByZW1vdmVkOiBUW107IGFkZGVkOiBUW10gfSB7XG5cdGNvbnN0IHJlbW92ZWQ6IFRbXSA9IFtdO1xuXHRjb25zdCBhZGRlZDogVFtdID0gW107XG5cdGZvciAoY29uc3QgZWxlbWVudCBvZiBiZWZvcmUpIHtcblx0XHRpZiAoIWFmdGVyLmhhcyhlbGVtZW50KSkge1xuXHRcdFx0cmVtb3ZlZC5wdXNoKGVsZW1lbnQpO1xuXHRcdH1cblx0fVxuXHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgYWZ0ZXIpIHtcblx0XHRpZiAoIWJlZm9yZS5oYXMoZWxlbWVudCkpIHtcblx0XHRcdGFkZGVkLnB1c2goZWxlbWVudCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB7IHJlbW92ZWQsIGFkZGVkIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWZmTWFwczxLLCBWPihiZWZvcmU6IE1hcDxLLCBWPiwgYWZ0ZXI6IE1hcDxLLCBWPik6IHsgcmVtb3ZlZDogVltdOyBhZGRlZDogVltdIH0ge1xuXHRjb25zdCByZW1vdmVkOiBWW10gPSBbXTtcblx0Y29uc3QgYWRkZWQ6IFZbXSA9IFtdO1xuXHRmb3IgKGNvbnN0IFtpbmRleCwgdmFsdWVdIG9mIGJlZm9yZSkge1xuXHRcdGlmICghYWZ0ZXIuaGFzKGluZGV4KSkge1xuXHRcdFx0cmVtb3ZlZC5wdXNoKHZhbHVlKTtcblx0XHR9XG5cdH1cblx0Zm9yIChjb25zdCBbaW5kZXgsIHZhbHVlXSBvZiBhZnRlcikge1xuXHRcdGlmICghYmVmb3JlLmhhcyhpbmRleCkpIHtcblx0XHRcdGFkZGVkLnB1c2godmFsdWUpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4geyByZW1vdmVkLCBhZGRlZCB9O1xufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIHNldHMuXG4gKlxuICogQHBhcmFtIHNldEEgLSBUaGUgZmlyc3Qgc2V0LlxuICogQHBhcmFtIHNldEIgLSBUaGUgc2Vjb25kIGl0ZXJhYmxlLlxuICogQHJldHVybnMgQSBuZXcgc2V0IGNvbnRhaW5pbmcgdGhlIGVsZW1lbnRzIHRoYXQgYXJlIGluIGJvdGggYHNldEFgIGFuZCBgc2V0QmAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3Rpb248VD4oc2V0QTogU2V0PFQ+LCBzZXRCOiBJdGVyYWJsZTxUPik6IFNldDxUPiB7XG5cdGNvbnN0IHJlc3VsdCA9IG5ldyBTZXQ8VD4oKTtcblx0Zm9yIChjb25zdCBlbGVtIG9mIHNldEIpIHtcblx0XHRpZiAoc2V0QS5oYXMoZWxlbSkpIHtcblx0XHRcdHJlc3VsdC5hZGQoZWxlbSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjbGFzcyBTZXRXaXRoS2V5PFQ+IGltcGxlbWVudHMgU2V0PFQ+IHtcblx0cHJpdmF0ZSBfbWFwID0gbmV3IE1hcDxhbnksIFQ+KCk7XG5cblx0Y29uc3RydWN0b3IodmFsdWVzOiBUW10sIHByaXZhdGUgdG9LZXk6ICh0OiBUKSA9PiBhbnkpIHtcblx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuXHRcdFx0dGhpcy5hZGQodmFsdWUpO1xuXHRcdH1cblx0fVxuXG5cdGdldCBzaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX21hcC5zaXplO1xuXHR9XG5cblx0YWRkKHZhbHVlOiBUKTogdGhpcyB7XG5cdFx0Y29uc3Qga2V5ID0gdGhpcy50b0tleSh2YWx1ZSk7XG5cdFx0dGhpcy5fbWFwLnNldChrZXksIHZhbHVlKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGRlbGV0ZSh2YWx1ZTogVCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9tYXAuZGVsZXRlKHRoaXMudG9LZXkodmFsdWUpKTtcblx0fVxuXG5cdGhhcyh2YWx1ZTogVCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9tYXAuaGFzKHRoaXMudG9LZXkodmFsdWUpKTtcblx0fVxuXG5cdCplbnRyaWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8W1QsIFRdPiB7XG5cdFx0Zm9yIChjb25zdCBlbnRyeSBvZiB0aGlzLl9tYXAudmFsdWVzKCkpIHtcblx0XHRcdHlpZWxkIFtlbnRyeSwgZW50cnldO1xuXHRcdH1cblx0fVxuXG5cdGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxUPiB7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVzKCk7XG5cdH1cblxuXHQqdmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8VD4ge1xuXHRcdGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5fbWFwLnZhbHVlcygpKSB7XG5cdFx0XHR5aWVsZCBlbnRyeTtcblx0XHR9XG5cdH1cblxuXHRjbGVhcigpOiB2b2lkIHtcblx0XHR0aGlzLl9tYXAuY2xlYXIoKTtcblx0fVxuXG5cdGZvckVhY2goY2FsbGJhY2tmbjogKHZhbHVlOiBULCB2YWx1ZTI6IFQsIHNldDogU2V0PFQ+KSA9PiB2b2lkLCB0aGlzQXJnPzogYW55KTogdm9pZCB7XG5cdFx0dGhpcy5fbWFwLmZvckVhY2goZW50cnkgPT4gY2FsbGJhY2tmbi5jYWxsKHRoaXNBcmcsIGVudHJ5LCBlbnRyeSwgdGhpcykpO1xuXHR9XG5cblx0W1N5bWJvbC5pdGVyYXRvcl0oKTogSXRlcmFibGVJdGVyYXRvcjxUPiB7XG5cdFx0cmV0dXJuIHRoaXMudmFsdWVzKCk7XG5cdH1cblxuXHRbU3ltYm9sLnRvU3RyaW5nVGFnXTogc3RyaW5nID0gJ1NldFdpdGhLZXknO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JTZXQ8SywgVj4obWFwOiBNYXA8SywgVj4sIGtleTogSywgdmFsdWU6IFYpOiBWIHtcblx0bGV0IHJlc3VsdCA9IG1hcC5nZXQoa2V5KTtcblx0aWYgKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmVzdWx0ID0gdmFsdWU7XG5cdFx0bWFwLnNldChrZXksIHJlc3VsdCk7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwVG9TdHJpbmc8SywgVj4obWFwOiBNYXA8SywgVj4pOiBzdHJpbmcge1xuXHRjb25zdCBlbnRyaWVzOiBzdHJpbmdbXSA9IFtdO1xuXHRtYXAuZm9yRWFjaCgodmFsdWUsIGtleSkgPT4ge1xuXHRcdGVudHJpZXMucHVzaChgJHtrZXl9ID0+ICR7dmFsdWV9YCk7XG5cdH0pO1xuXG5cdHJldHVybiBgTWFwKCR7bWFwLnNpemV9KSB7JHtlbnRyaWVzLmpvaW4oJywgJyl9fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUb1N0cmluZzxLPihzZXQ6IFNldDxLPik6IHN0cmluZyB7XG5cdGNvbnN0IGVudHJpZXM6IEtbXSA9IFtdO1xuXHRzZXQuZm9yRWFjaCh2YWx1ZSA9PiB7XG5cdFx0ZW50cmllcy5wdXNoKHZhbHVlKTtcblx0fSk7XG5cblx0cmV0dXJuIGBTZXQoJHtzZXQuc2l6ZX0pIHske2VudHJpZXMuam9pbignLCAnKX19YDtcbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gVG91Y2gge1xuXHROb25lID0gMCxcblx0QXNPbGQgPSAxLFxuXHRBc05ldyA9IDJcbn1cblxuZXhwb3J0IGNsYXNzIENvdW50ZXJTZXQ8VD4ge1xuXG5cdHByaXZhdGUgbWFwID0gbmV3IE1hcDxULCBudW1iZXI+KCk7XG5cblx0YWRkKHZhbHVlOiBUKTogQ291bnRlclNldDxUPiB7XG5cdFx0dGhpcy5tYXAuc2V0KHZhbHVlLCAodGhpcy5tYXAuZ2V0KHZhbHVlKSB8fCAwKSArIDEpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0ZGVsZXRlKHZhbHVlOiBUKTogYm9vbGVhbiB7XG5cdFx0bGV0IGNvdW50ZXIgPSB0aGlzLm1hcC5nZXQodmFsdWUpIHx8IDA7XG5cblx0XHRpZiAoY291bnRlciA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvdW50ZXItLTtcblxuXHRcdGlmIChjb3VudGVyID09PSAwKSB7XG5cdFx0XHR0aGlzLm1hcC5kZWxldGUodmFsdWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLm1hcC5zZXQodmFsdWUsIGNvdW50ZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aGFzKHZhbHVlOiBUKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMubWFwLmhhcyh2YWx1ZSk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIG1hcCB0aGF0IGFsbG93cyBhY2Nlc3MgYm90aCBieSBrZXlzIGFuZCB2YWx1ZXMuXG4gKiAqKk5PVEUqKjogdmFsdWVzIG5lZWQgdG8gYmUgdW5pcXVlLlxuICovXG5leHBvcnQgY2xhc3MgQmlkaXJlY3Rpb25hbE1hcDxLLCBWPiB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfbTEgPSBuZXcgTWFwPEssIFY+KCk7XG5cdHByaXZhdGUgcmVhZG9ubHkgX20yID0gbmV3IE1hcDxWLCBLPigpO1xuXG5cdGNvbnN0cnVjdG9yKGVudHJpZXM/OiByZWFkb25seSAocmVhZG9ubHkgW0ssIFZdKVtdKSB7XG5cdFx0aWYgKGVudHJpZXMpIHtcblx0XHRcdGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGVudHJpZXMpIHtcblx0XHRcdFx0dGhpcy5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Y2xlYXIoKTogdm9pZCB7XG5cdFx0dGhpcy5fbTEuY2xlYXIoKTtcblx0XHR0aGlzLl9tMi5jbGVhcigpO1xuXHR9XG5cblx0c2V0KGtleTogSywgdmFsdWU6IFYpOiB2b2lkIHtcblx0XHR0aGlzLl9tMS5zZXQoa2V5LCB2YWx1ZSk7XG5cdFx0dGhpcy5fbTIuc2V0KHZhbHVlLCBrZXkpO1xuXHR9XG5cblx0Z2V0KGtleTogSyk6IFYgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLl9tMS5nZXQoa2V5KTtcblx0fVxuXG5cdGdldEtleSh2YWx1ZTogVik6IEsgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLl9tMi5nZXQodmFsdWUpO1xuXHR9XG5cblx0ZGVsZXRlKGtleTogSyk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IHZhbHVlID0gdGhpcy5fbTEuZ2V0KGtleSk7XG5cdFx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0dGhpcy5fbTEuZGVsZXRlKGtleSk7XG5cdFx0dGhpcy5fbTIuZGVsZXRlKHZhbHVlKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGZvckVhY2goY2FsbGJhY2tmbjogKHZhbHVlOiBWLCBrZXk6IEssIG1hcDogQmlkaXJlY3Rpb25hbE1hcDxLLCBWPikgPT4gdm9pZCwgdGhpc0FyZz86IGFueSk6IHZvaWQge1xuXHRcdHRoaXMuX20xLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcblx0XHRcdGNhbGxiYWNrZm4uY2FsbCh0aGlzQXJnLCB2YWx1ZSwga2V5LCB0aGlzKTtcblx0XHR9KTtcblx0fVxuXG5cdGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxLPiB7XG5cdFx0cmV0dXJuIHRoaXMuX20xLmtleXMoKTtcblx0fVxuXG5cdHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFY+IHtcblx0XHRyZXR1cm4gdGhpcy5fbTEudmFsdWVzKCk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFNldE1hcDxLLCBWPiB7XG5cblx0cHJpdmF0ZSBtYXAgPSBuZXcgTWFwPEssIFNldDxWPj4oKTtcblxuXHRhZGQoa2V5OiBLLCB2YWx1ZTogVik6IHZvaWQge1xuXHRcdGxldCB2YWx1ZXMgPSB0aGlzLm1hcC5nZXQoa2V5KTtcblxuXHRcdGlmICghdmFsdWVzKSB7XG5cdFx0XHR2YWx1ZXMgPSBuZXcgU2V0PFY+KCk7XG5cdFx0XHR0aGlzLm1hcC5zZXQoa2V5LCB2YWx1ZXMpO1xuXHRcdH1cblxuXHRcdHZhbHVlcy5hZGQodmFsdWUpO1xuXHR9XG5cblx0ZGVsZXRlKGtleTogSywgdmFsdWU6IFYpOiB2b2lkIHtcblx0XHRjb25zdCB2YWx1ZXMgPSB0aGlzLm1hcC5nZXQoa2V5KTtcblxuXHRcdGlmICghdmFsdWVzKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFsdWVzLmRlbGV0ZSh2YWx1ZSk7XG5cblx0XHRpZiAodmFsdWVzLnNpemUgPT09IDApIHtcblx0XHRcdHRoaXMubWFwLmRlbGV0ZShrZXkpO1xuXHRcdH1cblx0fVxuXG5cdGZvckVhY2goa2V5OiBLLCBmbjogKHZhbHVlOiBWKSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0Y29uc3QgdmFsdWVzID0gdGhpcy5tYXAuZ2V0KGtleSk7XG5cblx0XHRpZiAoIXZhbHVlcykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhbHVlcy5mb3JFYWNoKGZuKTtcblx0fVxuXG5cdGdldChrZXk6IEspOiBSZWFkb25seVNldDxWPiB7XG5cdFx0Y29uc3QgdmFsdWVzID0gdGhpcy5tYXAuZ2V0KGtleSk7XG5cdFx0aWYgKCF2YWx1ZXMpIHtcblx0XHRcdHJldHVybiBuZXcgU2V0PFY+KCk7XG5cdFx0fVxuXHRcdHJldHVybiB2YWx1ZXM7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcHNTdHJpY3RFcXVhbElnbm9yZU9yZGVyKGE6IE1hcDx1bmtub3duLCB1bmtub3duPiwgYjogTWFwPHVua25vd24sIHVua25vd24+KTogYm9vbGVhbiB7XG5cdGlmIChhID09PSBiKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAoYS5zaXplICE9PSBiLnNpemUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBhKSB7XG5cdFx0aWYgKCFiLmhhcyhrZXkpIHx8IGIuZ2V0KGtleSkgIT09IHZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChjb25zdCBba2V5XSBvZiBiKSB7XG5cdFx0aWYgKCFhLmhhcyhrZXkpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRydWU7XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogR2l2ZW4gYSBmdW5jdGlvbiwgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgb25seSBjYWxsaW5nIHRoYXQgZnVuY3Rpb24gb25jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUNhbGxGdW5jdGlvbjxUIGV4dGVuZHMgRnVuY3Rpb24+KHRoaXM6IHVua25vd24sIGZuOiBULCBmbkRpZFJ1bkNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IFQge1xuXHRjb25zdCBfdGhpcyA9IHRoaXM7XG5cdGxldCBkaWRDYWxsID0gZmFsc2U7XG5cdGxldCByZXN1bHQ6IHVua25vd247XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoZGlkQ2FsbCkge1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHRkaWRDYWxsID0gdHJ1ZTtcblx0XHRpZiAoZm5EaWRSdW5DYWxsYmFjaykge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0cmVzdWx0ID0gZm4uYXBwbHkoX3RoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRmbkRpZFJ1bkNhbGxiYWNrKCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IGZuLmFwcGx5KF90aGlzLCBhcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0gYXMgdW5rbm93biBhcyBUO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgbmFtZXNwYWNlIEl0ZXJhYmxlIHtcblxuXHRleHBvcnQgZnVuY3Rpb24gaXM8VCA9IGFueT4odGhpbmc6IGFueSk6IHRoaW5nIGlzIEl0ZXJhYmxlPFQ+IHtcblx0XHRyZXR1cm4gdGhpbmcgJiYgdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdGhpbmdbU3ltYm9sLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdGNvbnN0IF9lbXB0eTogSXRlcmFibGU8YW55PiA9IE9iamVjdC5mcmVlemUoW10pO1xuXHRleHBvcnQgZnVuY3Rpb24gZW1wdHk8VCA9IGFueT4oKTogSXRlcmFibGU8VD4ge1xuXHRcdHJldHVybiBfZW1wdHk7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24qIHNpbmdsZTxUPihlbGVtZW50OiBUKTogSXRlcmFibGU8VD4ge1xuXHRcdHlpZWxkIGVsZW1lbnQ7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gd3JhcDxUPihpdGVyYWJsZU9yRWxlbWVudDogSXRlcmFibGU8VD4gfCBUKTogSXRlcmFibGU8VD4ge1xuXHRcdGlmIChpcyhpdGVyYWJsZU9yRWxlbWVudCkpIHtcblx0XHRcdHJldHVybiBpdGVyYWJsZU9yRWxlbWVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHNpbmdsZShpdGVyYWJsZU9yRWxlbWVudCk7XG5cdFx0fVxuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGZyb208VD4oaXRlcmFibGU6IEl0ZXJhYmxlPFQ+IHwgdW5kZWZpbmVkIHwgbnVsbCk6IEl0ZXJhYmxlPFQ+IHtcblx0XHRyZXR1cm4gaXRlcmFibGUgfHwgX2VtcHR5O1xuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uKiByZXZlcnNlPFQ+KGFycmF5OiBBcnJheTxUPik6IEl0ZXJhYmxlPFQ+IHtcblx0XHRmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdHlpZWxkIGFycmF5W2ldO1xuXHRcdH1cblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5PFQ+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiB8IHVuZGVmaW5lZCB8IG51bGwpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gIWl0ZXJhYmxlIHx8IGl0ZXJhYmxlW1N5bWJvbC5pdGVyYXRvcl0oKS5uZXh0KCkuZG9uZSA9PT0gdHJ1ZTtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBmaXJzdDxUPihpdGVyYWJsZTogSXRlcmFibGU8VD4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gaXRlcmFibGVbU3ltYm9sLml0ZXJhdG9yXSgpLm5leHQoKS52YWx1ZTtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBzb21lPFQ+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwgcHJlZGljYXRlOiAodDogVCwgaTogbnVtYmVyKSA9PiB1bmtub3duKTogYm9vbGVhbiB7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiBpdGVyYWJsZSkge1xuXHRcdFx0aWYgKHByZWRpY2F0ZShlbGVtZW50LCBpKyspKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gZmluZDxULCBSIGV4dGVuZHMgVD4oaXRlcmFibGU6IEl0ZXJhYmxlPFQ+LCBwcmVkaWNhdGU6ICh0OiBUKSA9PiB0IGlzIFIpOiBSIHwgdW5kZWZpbmVkO1xuXHRleHBvcnQgZnVuY3Rpb24gZmluZDxUPihpdGVyYWJsZTogSXRlcmFibGU8VD4sIHByZWRpY2F0ZTogKHQ6IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkO1xuXHRleHBvcnQgZnVuY3Rpb24gZmluZDxUPihpdGVyYWJsZTogSXRlcmFibGU8VD4sIHByZWRpY2F0ZTogKHQ6IFQpID0+IGJvb2xlYW4pOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgaXRlcmFibGUpIHtcblx0XHRcdGlmIChwcmVkaWNhdGUoZWxlbWVudCkpIHtcblx0XHRcdFx0cmV0dXJuIGVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VCwgUiBleHRlbmRzIFQ+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwgcHJlZGljYXRlOiAodDogVCkgPT4gdCBpcyBSKTogSXRlcmFibGU8Uj47XG5cdGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oaXRlcmFibGU6IEl0ZXJhYmxlPFQ+LCBwcmVkaWNhdGU6ICh0OiBUKSA9PiBib29sZWFuKTogSXRlcmFibGU8VD47XG5cdGV4cG9ydCBmdW5jdGlvbiogZmlsdGVyPFQ+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwgcHJlZGljYXRlOiAodDogVCkgPT4gYm9vbGVhbik6IEl0ZXJhYmxlPFQ+IHtcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgaXRlcmFibGUpIHtcblx0XHRcdGlmIChwcmVkaWNhdGUoZWxlbWVudCkpIHtcblx0XHRcdFx0eWllbGQgZWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24qIG1hcDxULCBSPihpdGVyYWJsZTogSXRlcmFibGU8VD4sIGZuOiAodDogVCwgaW5kZXg6IG51bWJlcikgPT4gUik6IEl0ZXJhYmxlPFI+IHtcblx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiBpdGVyYWJsZSkge1xuXHRcdFx0eWllbGQgZm4oZWxlbWVudCwgaW5kZXgrKyk7XG5cdFx0fVxuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uKiBmbGF0TWFwPFQsIFI+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwgZm46ICh0OiBULCBpbmRleDogbnVtYmVyKSA9PiBJdGVyYWJsZTxSPik6IEl0ZXJhYmxlPFI+IHtcblx0XHRsZXQgaW5kZXggPSAwO1xuXHRcdGZvciAoY29uc3QgZWxlbWVudCBvZiBpdGVyYWJsZSkge1xuXHRcdFx0eWllbGQqIGZuKGVsZW1lbnQsIGluZGV4KyspO1xuXHRcdH1cblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiogY29uY2F0PFQ+KC4uLml0ZXJhYmxlczogSXRlcmFibGU8VD5bXSk6IEl0ZXJhYmxlPFQ+IHtcblx0XHRmb3IgKGNvbnN0IGl0ZXJhYmxlIG9mIGl0ZXJhYmxlcykge1xuXHRcdFx0eWllbGQqIGl0ZXJhYmxlO1xuXHRcdH1cblx0fVxuXG5cdGV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VCwgUj4oaXRlcmFibGU6IEl0ZXJhYmxlPFQ+LCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogUiwgY3VycmVudFZhbHVlOiBUKSA9PiBSLCBpbml0aWFsVmFsdWU6IFIpOiBSIHtcblx0XHRsZXQgdmFsdWUgPSBpbml0aWFsVmFsdWU7XG5cdFx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGl0ZXJhYmxlKSB7XG5cdFx0XHR2YWx1ZSA9IHJlZHVjZXIodmFsdWUsIGVsZW1lbnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhbiBpdGVyYWJsZSBzbGljZSBvZiB0aGUgYXJyYXksIHdpdGggdGhlIHNhbWUgc2VtYW50aWNzIGFzIGBhcnJheS5zbGljZSgpYC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiogc2xpY2U8VD4oYXJyOiBSZWFkb25seUFycmF5PFQ+LCBmcm9tOiBudW1iZXIsIHRvID0gYXJyLmxlbmd0aCk6IEl0ZXJhYmxlPFQ+IHtcblx0XHRpZiAoZnJvbSA8IDApIHtcblx0XHRcdGZyb20gKz0gYXJyLmxlbmd0aDtcblx0XHR9XG5cblx0XHRpZiAodG8gPCAwKSB7XG5cdFx0XHR0byArPSBhcnIubGVuZ3RoO1xuXHRcdH0gZWxzZSBpZiAodG8gPiBhcnIubGVuZ3RoKSB7XG5cdFx0XHR0byA9IGFyci5sZW5ndGg7XG5cdFx0fVxuXG5cdFx0Zm9yICg7IGZyb20gPCB0bzsgZnJvbSsrKSB7XG5cdFx0XHR5aWVsZCBhcnJbZnJvbV07XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIENvbnN1bWVzIGBhdE1vc3RgIGVsZW1lbnRzIGZyb20gaXRlcmFibGUgYW5kIHJldHVybnMgdGhlIGNvbnN1bWVkIGVsZW1lbnRzLFxuXHQgKiBhbmQgYW4gaXRlcmFibGUgZm9yIHRoZSByZXN0IG9mIHRoZSBlbGVtZW50cy5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBjb25zdW1lPFQ+KGl0ZXJhYmxlOiBJdGVyYWJsZTxUPiwgYXRNb3N0OiBudW1iZXIgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpOiBbVFtdLCBJdGVyYWJsZTxUPl0ge1xuXHRcdGNvbnN0IGNvbnN1bWVkOiBUW10gPSBbXTtcblxuXHRcdGlmIChhdE1vc3QgPT09IDApIHtcblx0XHRcdHJldHVybiBbY29uc3VtZWQsIGl0ZXJhYmxlXTtcblx0XHR9XG5cblx0XHRjb25zdCBpdGVyYXRvciA9IGl0ZXJhYmxlW1N5bWJvbC5pdGVyYXRvcl0oKTtcblxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYXRNb3N0OyBpKyspIHtcblx0XHRcdGNvbnN0IG5leHQgPSBpdGVyYXRvci5uZXh0KCk7XG5cblx0XHRcdGlmIChuZXh0LmRvbmUpIHtcblx0XHRcdFx0cmV0dXJuIFtjb25zdW1lZCwgSXRlcmFibGUuZW1wdHkoKV07XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN1bWVkLnB1c2gobmV4dC52YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFtjb25zdW1lZCwgeyBbU3ltYm9sLml0ZXJhdG9yXSgpIHsgcmV0dXJuIGl0ZXJhdG9yOyB9IH1dO1xuXHR9XG5cblx0ZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFzeW5jVG9BcnJheTxUPihpdGVyYWJsZTogQXN5bmNJdGVyYWJsZTxUPik6IFByb21pc2U8VFtdPiB7XG5cdFx0Y29uc3QgcmVzdWx0OiBUW10gPSBbXTtcblx0XHRmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgaXRlcmFibGUpIHtcblx0XHRcdHJlc3VsdC5wdXNoKGl0ZW0pO1xuXHRcdH1cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgY29tcGFyZUJ5LCBudW1iZXJDb21wYXJhdG9yIH0gZnJvbSAndnMvYmFzZS9jb21tb24vYXJyYXlzJztcbmltcG9ydCB7IGdyb3VwQnkgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgeyBTZXRNYXAgfSBmcm9tICcuL21hcCc7XG5pbXBvcnQgeyBjcmVhdGVTaW5nbGVDYWxsRnVuY3Rpb24gfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9mdW5jdGlvbmFsJztcbmltcG9ydCB7IEl0ZXJhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vaXRlcmF0b3InO1xuXG4vLyAjcmVnaW9uIERpc3Bvc2FibGUgVHJhY2tpbmdcblxuLyoqXG4gKiBFbmFibGVzIGxvZ2dpbmcgb2YgcG90ZW50aWFsbHkgbGVha2VkIGRpc3Bvc2FibGVzLlxuICpcbiAqIEEgZGlzcG9zYWJsZSBpcyBjb25zaWRlcmVkIGxlYWtlZCBpZiBpdCBpcyBub3QgZGlzcG9zZWQgb3Igbm90IHJlZ2lzdGVyZWQgYXMgdGhlIGNoaWxkIG9mXG4gKiBhbm90aGVyIGRpc3Bvc2FibGUuIFRoaXMgdHJhY2tpbmcgaXMgdmVyeSBzaW1wbGUgYW4gb25seSB3b3JrcyBmb3IgY2xhc3NlcyB0aGF0IGVpdGhlclxuICogZXh0ZW5kIERpc3Bvc2FibGUgb3IgdXNlIGEgRGlzcG9zYWJsZVN0b3JlLiBUaGlzIG1lYW5zIHRoZXJlIGFyZSBhIGxvdCBvZiBmYWxzZSBwb3NpdGl2ZXMuXG4gKi9cbmNvbnN0IFRSQUNLX0RJU1BPU0FCTEVTID0gZmFsc2U7XG5sZXQgZGlzcG9zYWJsZVRyYWNrZXI6IElEaXNwb3NhYmxlVHJhY2tlciB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgaW50ZXJmYWNlIElEaXNwb3NhYmxlVHJhY2tlciB7XG5cdC8qKlxuXHQgKiBJcyBjYWxsZWQgb24gY29uc3RydWN0aW9uIG9mIGEgZGlzcG9zYWJsZS5cblx0Ki9cblx0dHJhY2tEaXNwb3NhYmxlKGRpc3Bvc2FibGU6IElEaXNwb3NhYmxlKTogdm9pZDtcblxuXHQvKipcblx0ICogSXMgY2FsbGVkIHdoZW4gYSBkaXNwb3NhYmxlIGlzIHJlZ2lzdGVyZWQgYXMgY2hpbGQgb2YgYW5vdGhlciBkaXNwb3NhYmxlIChlLmcuIHtAbGluayBEaXNwb3NhYmxlU3RvcmV9KS5cblx0ICogSWYgcGFyZW50IGlzIGBudWxsYCwgdGhlIGRpc3Bvc2FibGUgaXMgcmVtb3ZlZCBmcm9tIGl0cyBmb3JtZXIgcGFyZW50LlxuXHQqL1xuXHRzZXRQYXJlbnQoY2hpbGQ6IElEaXNwb3NhYmxlLCBwYXJlbnQ6IElEaXNwb3NhYmxlIHwgbnVsbCk6IHZvaWQ7XG5cblx0LyoqXG5cdCAqIElzIGNhbGxlZCBhZnRlciBhIGRpc3Bvc2FibGUgaXMgZGlzcG9zZWQuXG5cdCovXG5cdG1hcmtBc0Rpc3Bvc2VkKGRpc3Bvc2FibGU6IElEaXNwb3NhYmxlKTogdm9pZDtcblxuXHQvKipcblx0ICogSW5kaWNhdGVzIHRoYXQgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHNpbmdsZXRvbiB3aGljaCBkb2VzIG5vdCBuZWVkIHRvIGJlIGRpc3Bvc2VkLlxuXHQqL1xuXHRtYXJrQXNTaW5nbGV0b24oZGlzcG9zYWJsZTogSURpc3Bvc2FibGUpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERpc3Bvc2FibGVJbmZvIHtcblx0dmFsdWU6IElEaXNwb3NhYmxlO1xuXHRzb3VyY2U6IHN0cmluZyB8IG51bGw7XG5cdHBhcmVudDogSURpc3Bvc2FibGUgfCBudWxsO1xuXHRpc1NpbmdsZXRvbjogYm9vbGVhbjtcblx0aWR4OiBudW1iZXI7XG59XG5cbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlVHJhY2tlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlVHJhY2tlciB7XG5cdHByaXZhdGUgc3RhdGljIGlkeCA9IDA7XG5cblx0cHJpdmF0ZSByZWFkb25seSBsaXZpbmdEaXNwb3NhYmxlcyA9IG5ldyBNYXA8SURpc3Bvc2FibGUsIERpc3Bvc2FibGVJbmZvPigpO1xuXG5cdHByaXZhdGUgZ2V0RGlzcG9zYWJsZURhdGEoZDogSURpc3Bvc2FibGUpOiBEaXNwb3NhYmxlSW5mbyB7XG5cdFx0bGV0IHZhbCA9IHRoaXMubGl2aW5nRGlzcG9zYWJsZXMuZ2V0KGQpO1xuXHRcdGlmICghdmFsKSB7XG5cdFx0XHR2YWwgPSB7IHBhcmVudDogbnVsbCwgc291cmNlOiBudWxsLCBpc1NpbmdsZXRvbjogZmFsc2UsIHZhbHVlOiBkLCBpZHg6IERpc3Bvc2FibGVUcmFja2VyLmlkeCsrIH07XG5cdFx0XHR0aGlzLmxpdmluZ0Rpc3Bvc2FibGVzLnNldChkLCB2YWwpO1xuXHRcdH1cblx0XHRyZXR1cm4gdmFsO1xuXHR9XG5cblx0dHJhY2tEaXNwb3NhYmxlKGQ6IElEaXNwb3NhYmxlKTogdm9pZCB7XG5cdFx0Y29uc3QgZGF0YSA9IHRoaXMuZ2V0RGlzcG9zYWJsZURhdGEoZCk7XG5cdFx0aWYgKCFkYXRhLnNvdXJjZSkge1xuXHRcdFx0ZGF0YS5zb3VyY2UgPVxuXHRcdFx0XHRuZXcgRXJyb3IoKS5zdGFjayE7XG5cdFx0fVxuXHR9XG5cblx0c2V0UGFyZW50KGNoaWxkOiBJRGlzcG9zYWJsZSwgcGFyZW50OiBJRGlzcG9zYWJsZSB8IG51bGwpOiB2b2lkIHtcblx0XHRjb25zdCBkYXRhID0gdGhpcy5nZXREaXNwb3NhYmxlRGF0YShjaGlsZCk7XG5cdFx0ZGF0YS5wYXJlbnQgPSBwYXJlbnQ7XG5cdH1cblxuXHRtYXJrQXNEaXNwb3NlZCh4OiBJRGlzcG9zYWJsZSk6IHZvaWQge1xuXHRcdHRoaXMubGl2aW5nRGlzcG9zYWJsZXMuZGVsZXRlKHgpO1xuXHR9XG5cblx0bWFya0FzU2luZ2xldG9uKGRpc3Bvc2FibGU6IElEaXNwb3NhYmxlKTogdm9pZCB7XG5cdFx0dGhpcy5nZXREaXNwb3NhYmxlRGF0YShkaXNwb3NhYmxlKS5pc1NpbmdsZXRvbiA9IHRydWU7XG5cdH1cblxuXHRwcml2YXRlIGdldFJvb3RQYXJlbnQoZGF0YTogRGlzcG9zYWJsZUluZm8sIGNhY2hlOiBNYXA8RGlzcG9zYWJsZUluZm8sIERpc3Bvc2FibGVJbmZvPik6IERpc3Bvc2FibGVJbmZvIHtcblx0XHRjb25zdCBjYWNoZVZhbHVlID0gY2FjaGUuZ2V0KGRhdGEpO1xuXHRcdGlmIChjYWNoZVZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gY2FjaGVWYWx1ZTtcblx0XHR9XG5cblx0XHRjb25zdCByZXN1bHQgPSBkYXRhLnBhcmVudCA/IHRoaXMuZ2V0Um9vdFBhcmVudCh0aGlzLmdldERpc3Bvc2FibGVEYXRhKGRhdGEucGFyZW50KSwgY2FjaGUpIDogZGF0YTtcblx0XHRjYWNoZS5zZXQoZGF0YSwgcmVzdWx0KTtcblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9XG5cblx0Z2V0VHJhY2tlZERpc3Bvc2FibGVzKCk6IElEaXNwb3NhYmxlW10ge1xuXHRcdGNvbnN0IHJvb3RQYXJlbnRDYWNoZSA9IG5ldyBNYXA8RGlzcG9zYWJsZUluZm8sIERpc3Bvc2FibGVJbmZvPigpO1xuXG5cdFx0Y29uc3QgbGVha2luZyA9IFsuLi50aGlzLmxpdmluZ0Rpc3Bvc2FibGVzLmVudHJpZXMoKV1cblx0XHRcdC5maWx0ZXIoKFssIHZdKSA9PiB2LnNvdXJjZSAhPT0gbnVsbCAmJiAhdGhpcy5nZXRSb290UGFyZW50KHYsIHJvb3RQYXJlbnRDYWNoZSkuaXNTaW5nbGV0b24pXG5cdFx0XHQuZmxhdE1hcCgoW2tdKSA9PiBrKTtcblxuXHRcdHJldHVybiBsZWFraW5nO1xuXHR9XG5cblx0Y29tcHV0ZUxlYWtpbmdEaXNwb3NhYmxlcyhtYXhSZXBvcnRlZCA9IDEwLCBwcmVDb21wdXRlZExlYWtzPzogRGlzcG9zYWJsZUluZm9bXSk6IHsgbGVha3M6IERpc3Bvc2FibGVJbmZvW107IGRldGFpbHM6IHN0cmluZyB9IHwgdW5kZWZpbmVkIHtcblx0XHRsZXQgdW5jb3ZlcmVkTGVha2luZ09ianM6IERpc3Bvc2FibGVJbmZvW10gfCB1bmRlZmluZWQ7XG5cdFx0aWYgKHByZUNvbXB1dGVkTGVha3MpIHtcblx0XHRcdHVuY292ZXJlZExlYWtpbmdPYmpzID0gcHJlQ29tcHV0ZWRMZWFrcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc3Qgcm9vdFBhcmVudENhY2hlID0gbmV3IE1hcDxEaXNwb3NhYmxlSW5mbywgRGlzcG9zYWJsZUluZm8+KCk7XG5cblx0XHRcdGNvbnN0IGxlYWtpbmdPYmplY3RzID0gWy4uLnRoaXMubGl2aW5nRGlzcG9zYWJsZXMudmFsdWVzKCldXG5cdFx0XHRcdC5maWx0ZXIoKGluZm8pID0+IGluZm8uc291cmNlICE9PSBudWxsICYmICF0aGlzLmdldFJvb3RQYXJlbnQoaW5mbywgcm9vdFBhcmVudENhY2hlKS5pc1NpbmdsZXRvbik7XG5cblx0XHRcdGlmIChsZWFraW5nT2JqZWN0cy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0Y29uc3QgbGVha2luZ09ianNTZXQgPSBuZXcgU2V0KGxlYWtpbmdPYmplY3RzLm1hcChvID0+IG8udmFsdWUpKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBvYmplY3RzIHRoYXQgYXJlIGEgY2hpbGQgb2Ygb3RoZXIgbGVha2luZyBvYmplY3RzLiBBc3N1bWVzIHRoZXJlIGFyZSBubyBjeWNsZXMuXG5cdFx0XHR1bmNvdmVyZWRMZWFraW5nT2JqcyA9IGxlYWtpbmdPYmplY3RzLmZpbHRlcihsID0+IHtcblx0XHRcdFx0cmV0dXJuICEobC5wYXJlbnQgJiYgbGVha2luZ09ianNTZXQuaGFzKGwucGFyZW50KSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHVuY292ZXJlZExlYWtpbmdPYmpzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGFyZSBjeWNsaWMgZGlwb3NhYmxlIGNoYWlucyEnKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIXVuY292ZXJlZExlYWtpbmdPYmpzKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldFN0YWNrVHJhY2VQYXRoKGxlYWtpbmc6IERpc3Bvc2FibGVJbmZvKTogc3RyaW5nW10ge1xuXHRcdFx0ZnVuY3Rpb24gcmVtb3ZlUHJlZml4KGFycmF5OiBzdHJpbmdbXSwgbGluZXNUb1JlbW92ZTogKHN0cmluZyB8IFJlZ0V4cClbXSkge1xuXHRcdFx0XHR3aGlsZSAoYXJyYXkubGVuZ3RoID4gMCAmJiBsaW5lc1RvUmVtb3ZlLnNvbWUocmVnZXhwID0+IHR5cGVvZiByZWdleHAgPT09ICdzdHJpbmcnID8gcmVnZXhwID09PSBhcnJheVswXSA6IGFycmF5WzBdLm1hdGNoKHJlZ2V4cCkpKSB7XG5cdFx0XHRcdFx0YXJyYXkuc2hpZnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBsaW5lcyA9IGxlYWtpbmcuc291cmNlIS5zcGxpdCgnXFxuJykubWFwKHAgPT4gcC50cmltKCkucmVwbGFjZSgnYXQgJywgJycpKS5maWx0ZXIobCA9PiBsICE9PSAnJyk7XG5cdFx0XHRyZW1vdmVQcmVmaXgobGluZXMsIFsnRXJyb3InLCAvXnRyYWNrRGlzcG9zYWJsZSBcXCguKlxcKSQvLCAvXkRpc3Bvc2FibGVUcmFja2VyLnRyYWNrRGlzcG9zYWJsZSBcXCguKlxcKSQvXSk7XG5cdFx0XHRyZXR1cm4gbGluZXMucmV2ZXJzZSgpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHN0YWNrVHJhY2VTdGFydHMgPSBuZXcgU2V0TWFwPHN0cmluZywgRGlzcG9zYWJsZUluZm8+KCk7XG5cdFx0Zm9yIChjb25zdCBsZWFraW5nIG9mIHVuY292ZXJlZExlYWtpbmdPYmpzKSB7XG5cdFx0XHRjb25zdCBzdGFja1RyYWNlUGF0aCA9IGdldFN0YWNrVHJhY2VQYXRoKGxlYWtpbmcpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gc3RhY2tUcmFjZVBhdGgubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0c3RhY2tUcmFjZVN0YXJ0cy5hZGQoc3RhY2tUcmFjZVBhdGguc2xpY2UoMCwgaSkuam9pbignXFxuJyksIGxlYWtpbmcpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFB1dCBlYXJsaWVyIGxlYWtzIGZpcnN0XG5cdFx0dW5jb3ZlcmVkTGVha2luZ09ianMuc29ydChjb21wYXJlQnkobCA9PiBsLmlkeCwgbnVtYmVyQ29tcGFyYXRvcikpO1xuXG5cdFx0bGV0IG1lc3NhZ2UgPSAnJztcblxuXHRcdGxldCBpID0gMDtcblx0XHRmb3IgKGNvbnN0IGxlYWtpbmcgb2YgdW5jb3ZlcmVkTGVha2luZ09ianMuc2xpY2UoMCwgbWF4UmVwb3J0ZWQpKSB7XG5cdFx0XHRpKys7XG5cdFx0XHRjb25zdCBzdGFja1RyYWNlUGF0aCA9IGdldFN0YWNrVHJhY2VQYXRoKGxlYWtpbmcpO1xuXHRcdFx0Y29uc3Qgc3RhY2tUcmFjZUZvcm1hdHRlZExpbmVzID0gW107XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3RhY2tUcmFjZVBhdGgubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bGV0IGxpbmUgPSBzdGFja1RyYWNlUGF0aFtpXTtcblx0XHRcdFx0Y29uc3Qgc3RhcnRzID0gc3RhY2tUcmFjZVN0YXJ0cy5nZXQoc3RhY2tUcmFjZVBhdGguc2xpY2UoMCwgaSArIDEpLmpvaW4oJ1xcbicpKTtcblx0XHRcdFx0bGluZSA9IGAoc2hhcmVkIHdpdGggJHtzdGFydHMuc2l6ZX0vJHt1bmNvdmVyZWRMZWFraW5nT2Jqcy5sZW5ndGh9IGxlYWtzKSBhdCAke2xpbmV9YDtcblxuXHRcdFx0XHRjb25zdCBwcmV2U3RhcnRzID0gc3RhY2tUcmFjZVN0YXJ0cy5nZXQoc3RhY2tUcmFjZVBhdGguc2xpY2UoMCwgaSkuam9pbignXFxuJykpO1xuXHRcdFx0XHRjb25zdCBjb250aW51YXRpb25zID0gZ3JvdXBCeShbLi4ucHJldlN0YXJ0c10ubWFwKGQgPT4gZ2V0U3RhY2tUcmFjZVBhdGgoZClbaV0pLCB2ID0+IHYpO1xuXHRcdFx0XHRkZWxldGUgY29udGludWF0aW9uc1tzdGFja1RyYWNlUGF0aFtpXV07XG5cdFx0XHRcdGZvciAoY29uc3QgW2NvbnQsIHNldF0gb2YgT2JqZWN0LmVudHJpZXMoY29udGludWF0aW9ucykpIHtcblx0XHRcdFx0XHRzdGFja1RyYWNlRm9ybWF0dGVkTGluZXMudW5zaGlmdChgICAgIC0gc3RhY2t0cmFjZXMgb2YgJHtzZXQubGVuZ3RofSBvdGhlciBsZWFrcyBjb250aW51ZSB3aXRoICR7Y29udH1gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHN0YWNrVHJhY2VGb3JtYXR0ZWRMaW5lcy51bnNoaWZ0KGxpbmUpO1xuXHRcdFx0fVxuXG5cdFx0XHRtZXNzYWdlICs9IGBcXG5cXG5cXG49PT09PT09PT09PT09PT09PT09PSBMZWFraW5nIGRpc3Bvc2FibGUgJHtpfS8ke3VuY292ZXJlZExlYWtpbmdPYmpzLmxlbmd0aH06ICR7bGVha2luZy52YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lfSA9PT09PT09PT09PT09PT09PT09PVxcbiR7c3RhY2tUcmFjZUZvcm1hdHRlZExpbmVzLmpvaW4oJ1xcbicpfVxcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcblxcbmA7XG5cdFx0fVxuXG5cdFx0aWYgKHVuY292ZXJlZExlYWtpbmdPYmpzLmxlbmd0aCA+IG1heFJlcG9ydGVkKSB7XG5cdFx0XHRtZXNzYWdlICs9IGBcXG5cXG5cXG4uLi4gYW5kICR7dW5jb3ZlcmVkTGVha2luZ09ianMubGVuZ3RoIC0gbWF4UmVwb3J0ZWR9IG1vcmUgbGVha2luZyBkaXNwb3NhYmxlc1xcblxcbmA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHsgbGVha3M6IHVuY292ZXJlZExlYWtpbmdPYmpzLCBkZXRhaWxzOiBtZXNzYWdlIH07XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERpc3Bvc2FibGVUcmFja2VyKHRyYWNrZXI6IElEaXNwb3NhYmxlVHJhY2tlciB8IG51bGwpOiB2b2lkIHtcblx0ZGlzcG9zYWJsZVRyYWNrZXIgPSB0cmFja2VyO1xufVxuXG5pZiAoVFJBQ0tfRElTUE9TQUJMRVMpIHtcblx0Y29uc3QgX19pc19kaXNwb3NhYmxlX3RyYWNrZWRfXyA9ICdfX2lzX2Rpc3Bvc2FibGVfdHJhY2tlZF9fJztcblx0c2V0RGlzcG9zYWJsZVRyYWNrZXIobmV3IGNsYXNzIGltcGxlbWVudHMgSURpc3Bvc2FibGVUcmFja2VyIHtcblx0XHR0cmFja0Rpc3Bvc2FibGUoeDogSURpc3Bvc2FibGUpOiB2b2lkIHtcblx0XHRcdGNvbnN0IHN0YWNrID0gbmV3IEVycm9yKCdQb3RlbnRpYWxseSBsZWFrZWQgZGlzcG9zYWJsZScpLnN0YWNrITtcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRpZiAoISh4IGFzIGFueSlbX19pc19kaXNwb3NhYmxlX3RyYWNrZWRfX10pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhzdGFjayk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIDMwMDApO1xuXHRcdH1cblxuXHRcdHNldFBhcmVudChjaGlsZDogSURpc3Bvc2FibGUsIHBhcmVudDogSURpc3Bvc2FibGUgfCBudWxsKTogdm9pZCB7XG5cdFx0XHRpZiAoY2hpbGQgJiYgY2hpbGQgIT09IERpc3Bvc2FibGUuTm9uZSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdChjaGlsZCBhcyBhbnkpW19faXNfZGlzcG9zYWJsZV90cmFja2VkX19dID0gdHJ1ZTtcblx0XHRcdFx0fSBjYXRjaCB7XG5cdFx0XHRcdFx0Ly8gbm9vcFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bWFya0FzRGlzcG9zZWQoZGlzcG9zYWJsZTogSURpc3Bvc2FibGUpOiB2b2lkIHtcblx0XHRcdGlmIChkaXNwb3NhYmxlICYmIGRpc3Bvc2FibGUgIT09IERpc3Bvc2FibGUuTm9uZSkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdChkaXNwb3NhYmxlIGFzIGFueSlbX19pc19kaXNwb3NhYmxlX3RyYWNrZWRfX10gPSB0cnVlO1xuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBub29wXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0bWFya0FzU2luZ2xldG9uKGRpc3Bvc2FibGU6IElEaXNwb3NhYmxlKTogdm9pZCB7IH1cblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFja0Rpc3Bvc2FibGU8VCBleHRlbmRzIElEaXNwb3NhYmxlPih4OiBUKTogVCB7XG5cdGRpc3Bvc2FibGVUcmFja2VyPy50cmFja0Rpc3Bvc2FibGUoeCk7XG5cdHJldHVybiB4O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFya0FzRGlzcG9zZWQoZGlzcG9zYWJsZTogSURpc3Bvc2FibGUpOiB2b2lkIHtcblx0ZGlzcG9zYWJsZVRyYWNrZXI/Lm1hcmtBc0Rpc3Bvc2VkKGRpc3Bvc2FibGUpO1xufVxuXG5mdW5jdGlvbiBzZXRQYXJlbnRPZkRpc3Bvc2FibGUoY2hpbGQ6IElEaXNwb3NhYmxlLCBwYXJlbnQ6IElEaXNwb3NhYmxlIHwgbnVsbCk6IHZvaWQge1xuXHRkaXNwb3NhYmxlVHJhY2tlcj8uc2V0UGFyZW50KGNoaWxkLCBwYXJlbnQpO1xufVxuXG5mdW5jdGlvbiBzZXRQYXJlbnRPZkRpc3Bvc2FibGVzKGNoaWxkcmVuOiBJRGlzcG9zYWJsZVtdLCBwYXJlbnQ6IElEaXNwb3NhYmxlIHwgbnVsbCk6IHZvaWQge1xuXHRpZiAoIWRpc3Bvc2FibGVUcmFja2VyKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdGZvciAoY29uc3QgY2hpbGQgb2YgY2hpbGRyZW4pIHtcblx0XHRkaXNwb3NhYmxlVHJhY2tlci5zZXRQYXJlbnQoY2hpbGQsIHBhcmVudCk7XG5cdH1cbn1cblxuLyoqXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgc2luZ2xldG9uIHdoaWNoIGRvZXMgbm90IG5lZWQgdG8gYmUgZGlzcG9zZWQuXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcmtBc1NpbmdsZXRvbjxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KHNpbmdsZXRvbjogVCk6IFQge1xuXHRkaXNwb3NhYmxlVHJhY2tlcj8ubWFya0FzU2luZ2xldG9uKHNpbmdsZXRvbik7XG5cdHJldHVybiBzaW5nbGV0b247XG59XG5cbi8vICNlbmRyZWdpb25cblxuLyoqXG4gKiBBbiBvYmplY3QgdGhhdCBwZXJmb3JtcyBhIGNsZWFudXAgb3BlcmF0aW9uIHdoZW4gYC5kaXNwb3NlKClgIGlzIGNhbGxlZC5cbiAqXG4gKiBTb21lIGV4YW1wbGVzIG9mIGhvdyBkaXNwb3NhYmxlcyBhcmUgdXNlZDpcbiAqXG4gKiAtIEFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgcmVtb3ZlcyBpdHNlbGYgd2hlbiBgLmRpc3Bvc2UoKWAgaXMgY2FsbGVkLlxuICogLSBBIHJlc291cmNlIHN1Y2ggYXMgYSBmaWxlIHN5c3RlbSB3YXRjaGVyIHRoYXQgY2xlYW5zIHVwIHRoZSByZXNvdXJjZSB3aGVuIGAuZGlzcG9zZSgpYCBpcyBjYWxsZWQuXG4gKiAtIFRoZSByZXR1cm4gdmFsdWUgZnJvbSByZWdpc3RlcmluZyBhIHByb3ZpZGVyLiBXaGVuIGAuZGlzcG9zZSgpYCBpcyBjYWxsZWQsIHRoZSBwcm92aWRlciBpcyB1bnJlZ2lzdGVyZWQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSURpc3Bvc2FibGUge1xuXHRkaXNwb3NlKCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYHRoaW5nYCBpcyB7QGxpbmsgSURpc3Bvc2FibGUgZGlzcG9zYWJsZX0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc3Bvc2FibGU8RSBleHRlbmRzIGFueT4odGhpbmc6IEUpOiB0aGluZyBpcyBFICYgSURpc3Bvc2FibGUge1xuXHRyZXR1cm4gdHlwZW9mIHRoaW5nID09PSAnb2JqZWN0JyAmJiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgKDxJRGlzcG9zYWJsZT48YW55PnRoaW5nKS5kaXNwb3NlID09PSAnZnVuY3Rpb24nICYmICg8SURpc3Bvc2FibGU+PGFueT50aGluZykuZGlzcG9zZS5sZW5ndGggPT09IDA7XG59XG5cbi8qKlxuICogRGlzcG9zZXMgb2YgdGhlIHZhbHVlKHMpIHBhc3NlZCBpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2U8VCBleHRlbmRzIElEaXNwb3NhYmxlPihkaXNwb3NhYmxlOiBUKTogVDtcbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZGlzcG9zYWJsZTogVCB8IHVuZGVmaW5lZCk6IFQgfCB1bmRlZmluZWQ7XG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZTxUIGV4dGVuZHMgSURpc3Bvc2FibGUsIEEgZXh0ZW5kcyBJdGVyYWJsZTxUPiA9IEl0ZXJhYmxlPFQ+PihkaXNwb3NhYmxlczogQSk6IEE7XG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZTxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGRpc3Bvc2FibGVzOiBBcnJheTxUPik6IEFycmF5PFQ+O1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2U8VCBleHRlbmRzIElEaXNwb3NhYmxlPihkaXNwb3NhYmxlczogUmVhZG9ubHlBcnJheTxUPik6IFJlYWRvbmx5QXJyYXk8VD47XG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZTxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KGFyZzogVCB8IEl0ZXJhYmxlPFQ+IHwgdW5kZWZpbmVkKTogYW55IHtcblx0aWYgKEl0ZXJhYmxlLmlzKGFyZykpIHtcblx0XHRjb25zdCBlcnJvcnM6IGFueVtdID0gW107XG5cblx0XHRmb3IgKGNvbnN0IGQgb2YgYXJnKSB7XG5cdFx0XHRpZiAoZCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGQuZGlzcG9zZSgpO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0ZXJyb3JzLnB1c2goZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0dGhyb3cgZXJyb3JzWzBdO1xuXHRcdH0gZWxzZSBpZiAoZXJyb3JzLmxlbmd0aCA+IDEpIHtcblx0XHRcdHRocm93IG5ldyBBZ2dyZWdhdGVFcnJvcihlcnJvcnMsICdFbmNvdW50ZXJlZCBlcnJvcnMgd2hpbGUgZGlzcG9zaW5nIG9mIHN0b3JlJyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKSA/IFtdIDogYXJnO1xuXHR9IGVsc2UgaWYgKGFyZykge1xuXHRcdGFyZy5kaXNwb3NlKCk7XG5cdFx0cmV0dXJuIGFyZztcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zZUlmRGlzcG9zYWJsZTxUIGV4dGVuZHMgSURpc3Bvc2FibGUgfCBvYmplY3Q+KGRpc3Bvc2FibGVzOiBBcnJheTxUPik6IEFycmF5PFQ+IHtcblx0Zm9yIChjb25zdCBkIG9mIGRpc3Bvc2FibGVzKSB7XG5cdFx0aWYgKGlzRGlzcG9zYWJsZShkKSkge1xuXHRcdFx0ZC5kaXNwb3NlKCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBbXTtcbn1cblxuLyoqXG4gKiBDb21iaW5lIG11bHRpcGxlIGRpc3Bvc2FibGUgdmFsdWVzIGludG8gYSBzaW5nbGUge0BsaW5rIElEaXNwb3NhYmxlfS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbWJpbmVkRGlzcG9zYWJsZSguLi5kaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSk6IElEaXNwb3NhYmxlIHtcblx0Y29uc3QgcGFyZW50ID0gdG9EaXNwb3NhYmxlKCgpID0+IGRpc3Bvc2UoZGlzcG9zYWJsZXMpKTtcblx0c2V0UGFyZW50T2ZEaXNwb3NhYmxlcyhkaXNwb3NhYmxlcywgcGFyZW50KTtcblx0cmV0dXJuIHBhcmVudDtcbn1cblxuLyoqXG4gKiBUdXJuIGEgZnVuY3Rpb24gdGhhdCBpbXBsZW1lbnRzIGRpc3Bvc2UgaW50byBhbiB7QGxpbmsgSURpc3Bvc2FibGV9LlxuICpcbiAqIEBwYXJhbSBmbiBDbGVhbiB1cCBmdW5jdGlvbiwgZ3VhcmFudGVlZCB0byBiZSBjYWxsZWQgb25seSAqKm9uY2UqKi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGlzcG9zYWJsZShmbjogKCkgPT4gdm9pZCk6IElEaXNwb3NhYmxlIHtcblx0Y29uc3Qgc2VsZiA9IHRyYWNrRGlzcG9zYWJsZSh7XG5cdFx0ZGlzcG9zZTogY3JlYXRlU2luZ2xlQ2FsbEZ1bmN0aW9uKCgpID0+IHtcblx0XHRcdG1hcmtBc0Rpc3Bvc2VkKHNlbGYpO1xuXHRcdFx0Zm4oKTtcblx0XHR9KVxuXHR9KTtcblx0cmV0dXJuIHNlbGY7XG59XG5cbi8qKlxuICogTWFuYWdlcyBhIGNvbGxlY3Rpb24gb2YgZGlzcG9zYWJsZSB2YWx1ZXMuXG4gKlxuICogVGhpcyBpcyB0aGUgcHJlZmVycmVkIHdheSB0byBtYW5hZ2UgbXVsdGlwbGUgZGlzcG9zYWJsZXMuIEEgYERpc3Bvc2FibGVTdG9yZWAgaXMgc2FmZXIgdG8gd29yayB3aXRoIHRoYW4gYW5cbiAqIGBJRGlzcG9zYWJsZVtdYCBhcyBpdCBjb25zaWRlcnMgZWRnZSBjYXNlcywgc3VjaCBhcyByZWdpc3RlcmluZyB0aGUgc2FtZSB2YWx1ZSBtdWx0aXBsZSB0aW1lcyBvciBhZGRpbmcgYW4gaXRlbSB0byBhXG4gKiBzdG9yZSB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQgb2YuXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlU3RvcmUgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG5cblx0c3RhdGljIERJU0FCTEVfRElTUE9TRURfV0FSTklORyA9IGZhbHNlO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX3RvRGlzcG9zZSA9IG5ldyBTZXQ8SURpc3Bvc2FibGU+KCk7XG5cdHByaXZhdGUgX2lzRGlzcG9zZWQgPSBmYWxzZTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0cmFja0Rpc3Bvc2FibGUodGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICogRGlzcG9zZSBvZiBhbGwgcmVnaXN0ZXJlZCBkaXNwb3NhYmxlcyBhbmQgbWFyayB0aGlzIG9iamVjdCBhcyBkaXNwb3NlZC5cblx0ICpcblx0ICogQW55IGZ1dHVyZSBkaXNwb3NhYmxlcyBhZGRlZCB0byB0aGlzIG9iamVjdCB3aWxsIGJlIGRpc3Bvc2VkIG9mIG9uIGBhZGRgLlxuXHQgKi9cblx0cHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRtYXJrQXNEaXNwb3NlZCh0aGlzKTtcblx0XHR0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0XHR0aGlzLmNsZWFyKCk7XG5cdH1cblxuXHQvKipcblx0ICogQHJldHVybiBgdHJ1ZWAgaWYgdGhpcyBvYmplY3QgaGFzIGJlZW4gZGlzcG9zZWQgb2YuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGlzRGlzcG9zZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2lzRGlzcG9zZWQ7XG5cdH1cblxuXHQvKipcblx0ICogRGlzcG9zZSBvZiBhbGwgcmVnaXN0ZXJlZCBkaXNwb3NhYmxlcyBidXQgZG8gbm90IG1hcmsgdGhpcyBvYmplY3QgYXMgZGlzcG9zZWQuXG5cdCAqL1xuXHRwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX3RvRGlzcG9zZS5zaXplID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGRpc3Bvc2UodGhpcy5fdG9EaXNwb3NlKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5fdG9EaXNwb3NlLmNsZWFyKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEFkZCBhIG5ldyB7QGxpbmsgSURpc3Bvc2FibGUgZGlzcG9zYWJsZX0gdG8gdGhlIGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRwdWJsaWMgYWRkPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4obzogVCk6IFQge1xuXHRcdGlmICghbykge1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHRcdGlmICgobyBhcyB1bmtub3duIGFzIERpc3Bvc2FibGVTdG9yZSkgPT09IHRoaXMpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlZ2lzdGVyIGEgZGlzcG9zYWJsZSBvbiBpdHNlbGYhJyk7XG5cdFx0fVxuXG5cdFx0c2V0UGFyZW50T2ZEaXNwb3NhYmxlKG8sIHRoaXMpO1xuXHRcdGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG5cdFx0XHRpZiAoIURpc3Bvc2FibGVTdG9yZS5ESVNBQkxFX0RJU1BPU0VEX1dBUk5JTkcpIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKG5ldyBFcnJvcignVHJ5aW5nIHRvIGFkZCBhIGRpc3Bvc2FibGUgdG8gYSBEaXNwb3NhYmxlU3RvcmUgdGhhdCBoYXMgYWxyZWFkeSBiZWVuIGRpc3Bvc2VkIG9mLiBUaGUgYWRkZWQgb2JqZWN0IHdpbGwgYmUgbGVha2VkIScpLnN0YWNrKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fdG9EaXNwb3NlLmFkZChvKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGVzIGEgZGlzcG9zYWJsZSBmcm9tIHN0b3JlIGFuZCBkaXNwb3NlcyBvZiBpdC4gVGhpcyB3aWxsIG5vdCB0aHJvdyBvciB3YXJuIGFuZCBwcm9jZWVkIHRvIGRpc3Bvc2UgdGhlXG5cdCAqIGRpc3Bvc2FibGUgZXZlbiB3aGVuIHRoZSBkaXNwb3NhYmxlIGlzIG5vdCBwYXJ0IGluIHRoZSBzdG9yZS5cblx0ICovXG5cdHB1YmxpYyBkZWxldGU8VCBleHRlbmRzIElEaXNwb3NhYmxlPihvOiBUKTogdm9pZCB7XG5cdFx0aWYgKCFvKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICgobyBhcyB1bmtub3duIGFzIERpc3Bvc2FibGVTdG9yZSkgPT09IHRoaXMpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignQ2Fubm90IGRpc3Bvc2UgYSBkaXNwb3NhYmxlIG9uIGl0c2VsZiEnKTtcblx0XHR9XG5cdFx0dGhpcy5fdG9EaXNwb3NlLmRlbGV0ZShvKTtcblx0XHRvLmRpc3Bvc2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGVzIHRoZSB2YWx1ZSBmcm9tIHRoZSBzdG9yZSwgYnV0IGRvZXMgbm90IGRpc3Bvc2UgaXQuXG5cdCAqL1xuXHRwdWJsaWMgZGVsZXRlQW5kTGVhazxUIGV4dGVuZHMgSURpc3Bvc2FibGU+KG86IFQpOiB2b2lkIHtcblx0XHRpZiAoIW8pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX3RvRGlzcG9zZS5oYXMobykpIHtcblx0XHRcdHRoaXMuX3RvRGlzcG9zZS5kZWxldGUobyk7XG5cdFx0XHRzZXRQYXJlbnRPZkRpc3Bvc2FibGUobywgbnVsbCk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYSB7QGxpbmsgSURpc3Bvc2FibGUgZGlzcG9zYWJsZX0gb2JqZWN0LlxuICpcbiAqIFN1YmNsYXNzZXMgY2FuIHtAbGlua2NvZGUgX3JlZ2lzdGVyfSBkaXNwb3NhYmxlcyB0aGF0IHdpbGwgYmUgYXV0b21hdGljYWxseSBjbGVhbmVkIHVwIHdoZW4gdGhpcyBvYmplY3QgaXMgZGlzcG9zZWQgb2YuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdC8qKlxuXHQgKiBBIGRpc3Bvc2FibGUgdGhhdCBkb2VzIG5vdGhpbmcgd2hlbiBpdCBpcyBkaXNwb3NlZCBvZi5cblx0ICpcblx0ICogVE9ETzogVGhpcyBzaG91bGQgbm90IGJlIGEgc3RhdGljIHByb3BlcnR5LlxuXHQgKi9cblx0c3RhdGljIHJlYWRvbmx5IE5vbmUgPSBPYmplY3QuZnJlZXplPElEaXNwb3NhYmxlPih7IGRpc3Bvc2UoKSB7IH0gfSk7XG5cblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9zdG9yZSA9IG5ldyBEaXNwb3NhYmxlU3RvcmUoKTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0cmFja0Rpc3Bvc2FibGUodGhpcyk7XG5cdFx0c2V0UGFyZW50T2ZEaXNwb3NhYmxlKHRoaXMuX3N0b3JlLCB0aGlzKTtcblx0fVxuXG5cdHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuXHRcdG1hcmtBc0Rpc3Bvc2VkKHRoaXMpO1xuXG5cdFx0dGhpcy5fc3RvcmUuZGlzcG9zZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYG9gIHRvIHRoZSBjb2xsZWN0aW9uIG9mIGRpc3Bvc2FibGVzIG1hbmFnZWQgYnkgdGhpcyBvYmplY3QuXG5cdCAqL1xuXHRwcm90ZWN0ZWQgX3JlZ2lzdGVyPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4obzogVCk6IFQge1xuXHRcdGlmICgobyBhcyB1bmtub3duIGFzIERpc3Bvc2FibGUpID09PSB0aGlzKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCByZWdpc3RlciBhIGRpc3Bvc2FibGUgb24gaXRzZWxmIScpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fc3RvcmUuYWRkKG8pO1xuXHR9XG59XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgbGlmZWN5Y2xlIG9mIGEgZGlzcG9zYWJsZSB2YWx1ZSB0aGF0IG1heSBiZSBjaGFuZ2VkLlxuICpcbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHdoZW4gdGhlIGRpc3Bvc2FibGUgdmFsdWUgaXMgY2hhbmdlZCwgdGhlIHByZXZpb3VzbHkgaGVsZCBkaXNwb3NhYmxlIGlzIGRpc3Bvc2VkIG9mLiBZb3UgY2FuXG4gKiBhbHNvIHJlZ2lzdGVyIGEgYE11dGFibGVEaXNwb3NhYmxlYCBvbiBhIGBEaXNwb3NhYmxlYCB0byBlbnN1cmUgaXQgaXMgYXV0b21hdGljYWxseSBjbGVhbmVkIHVwLlxuICovXG5leHBvcnQgY2xhc3MgTXV0YWJsZURpc3Bvc2FibGU8VCBleHRlbmRzIElEaXNwb3NhYmxlPiBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcblx0cHJpdmF0ZSBfdmFsdWU/OiBUO1xuXHRwcml2YXRlIF9pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dHJhY2tEaXNwb3NhYmxlKHRoaXMpO1xuXHR9XG5cblx0Z2V0IHZhbHVlKCk6IFQgfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLl9pc0Rpc3Bvc2VkID8gdW5kZWZpbmVkIDogdGhpcy5fdmFsdWU7XG5cdH1cblxuXHRzZXQgdmFsdWUodmFsdWU6IFQgfCB1bmRlZmluZWQpIHtcblx0XHRpZiAodGhpcy5faXNEaXNwb3NlZCB8fCB2YWx1ZSA9PT0gdGhpcy5fdmFsdWUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLl92YWx1ZT8uZGlzcG9zZSgpO1xuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0c2V0UGFyZW50T2ZEaXNwb3NhYmxlKHZhbHVlLCB0aGlzKTtcblx0XHR9XG5cdFx0dGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXNldHMgdGhlIHN0b3JlZCB2YWx1ZSBhbmQgZGlzcG9zZWQgb2YgdGhlIHByZXZpb3VzbHkgc3RvcmVkIHZhbHVlLlxuXHQgKi9cblx0Y2xlYXIoKTogdm9pZCB7XG5cdFx0dGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG5cdFx0bWFya0FzRGlzcG9zZWQodGhpcyk7XG5cdFx0dGhpcy5fdmFsdWU/LmRpc3Bvc2UoKTtcblx0XHR0aGlzLl92YWx1ZSA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbGVhcnMgdGhlIHZhbHVlLCBidXQgZG9lcyBub3QgZGlzcG9zZSBpdC5cblx0ICogVGhlIG9sZCB2YWx1ZSBpcyByZXR1cm5lZC5cblx0Ki9cblx0Y2xlYXJBbmRMZWFrKCk6IFQgfCB1bmRlZmluZWQge1xuXHRcdGNvbnN0IG9sZFZhbHVlID0gdGhpcy5fdmFsdWU7XG5cdFx0dGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XG5cdFx0aWYgKG9sZFZhbHVlKSB7XG5cdFx0XHRzZXRQYXJlbnRPZkRpc3Bvc2FibGUob2xkVmFsdWUsIG51bGwpO1xuXHRcdH1cblx0XHRyZXR1cm4gb2xkVmFsdWU7XG5cdH1cbn1cblxuLyoqXG4gKiBNYW5hZ2VzIHRoZSBsaWZlY3ljbGUgb2YgYSBkaXNwb3NhYmxlIHZhbHVlIHRoYXQgbWF5IGJlIGNoYW5nZWQgbGlrZSB7QGxpbmsgTXV0YWJsZURpc3Bvc2FibGV9LCBidXQgdGhlIHZhbHVlIG11c3RcbiAqIGV4aXN0IGFuZCBjYW5ub3QgYmUgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgY2xhc3MgTWFuZGF0b3J5TXV0YWJsZURpc3Bvc2FibGU8VCBleHRlbmRzIElEaXNwb3NhYmxlPiBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcblx0cHJpdmF0ZSByZWFkb25seSBfZGlzcG9zYWJsZSA9IG5ldyBNdXRhYmxlRGlzcG9zYWJsZTxUPigpO1xuXHRwcml2YXRlIF9pc0Rpc3Bvc2VkID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IoaW5pdGlhbFZhbHVlOiBUKSB7XG5cdFx0dGhpcy5fZGlzcG9zYWJsZS52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcblx0fVxuXG5cdGdldCB2YWx1ZSgpOiBUIHtcblx0XHRyZXR1cm4gdGhpcy5fZGlzcG9zYWJsZS52YWx1ZSE7XG5cdH1cblxuXHRzZXQgdmFsdWUodmFsdWU6IFQpIHtcblx0XHRpZiAodGhpcy5faXNEaXNwb3NlZCB8fCB2YWx1ZSA9PT0gdGhpcy5fZGlzcG9zYWJsZS52YWx1ZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9kaXNwb3NhYmxlLnZhbHVlID0gdmFsdWU7XG5cdH1cblxuXHRkaXNwb3NlKCkge1xuXHRcdHRoaXMuX2lzRGlzcG9zZWQgPSB0cnVlO1xuXHRcdHRoaXMuX2Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSZWZDb3VudGVkRGlzcG9zYWJsZSB7XG5cblx0cHJpdmF0ZSBfY291bnRlcjogbnVtYmVyID0gMTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IF9kaXNwb3NhYmxlOiBJRGlzcG9zYWJsZSxcblx0KSB7IH1cblxuXHRhY3F1aXJlKCkge1xuXHRcdHRoaXMuX2NvdW50ZXIrKztcblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdHJlbGVhc2UoKSB7XG5cdFx0aWYgKC0tdGhpcy5fY291bnRlciA9PT0gMCkge1xuXHRcdFx0dGhpcy5fZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59XG5cbi8qKlxuICogQSBzYWZlIGRpc3Bvc2FibGUgY2FuIGJlIGB1bnNldGAgc28gdGhhdCBhIGxlYWtlZCByZWZlcmVuY2UgKGxpc3RlbmVyKVxuICogY2FuIGJlIGN1dC1vZmYuXG4gKi9cbmV4cG9ydCBjbGFzcyBTYWZlRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcblxuXHRkaXNwb3NlOiAoKSA9PiB2b2lkID0gKCkgPT4geyB9O1xuXHR1bnNldDogKCkgPT4gdm9pZCA9ICgpID0+IHsgfTtcblx0aXNzZXQ6ICgpID0+IGJvb2xlYW4gPSAoKSA9PiBmYWxzZTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0cmFja0Rpc3Bvc2FibGUodGhpcyk7XG5cdH1cblxuXHRzZXQoZm46IEZ1bmN0aW9uKSB7XG5cdFx0bGV0IGNhbGxiYWNrOiBGdW5jdGlvbiB8IHVuZGVmaW5lZCA9IGZuO1xuXHRcdHRoaXMudW5zZXQgPSAoKSA9PiBjYWxsYmFjayA9IHVuZGVmaW5lZDtcblx0XHR0aGlzLmlzc2V0ID0gKCkgPT4gY2FsbGJhY2sgIT09IHVuZGVmaW5lZDtcblx0XHR0aGlzLmRpc3Bvc2UgPSAoKSA9PiB7XG5cdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0Y2FsbGJhY2sgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdG1hcmtBc0Rpc3Bvc2VkKHRoaXMpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVmZXJlbmNlPFQ+IGV4dGVuZHMgSURpc3Bvc2FibGUge1xuXHRyZWFkb25seSBvYmplY3Q6IFQ7XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZWZlcmVuY2VDb2xsZWN0aW9uPFQ+IHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IHJlZmVyZW5jZXM6IE1hcDxzdHJpbmcsIHsgcmVhZG9ubHkgb2JqZWN0OiBUOyBjb3VudGVyOiBudW1iZXIgfT4gPSBuZXcgTWFwKCk7XG5cblx0YWNxdWlyZShrZXk6IHN0cmluZywgLi4uYXJnczogYW55W10pOiBJUmVmZXJlbmNlPFQ+IHtcblx0XHRsZXQgcmVmZXJlbmNlID0gdGhpcy5yZWZlcmVuY2VzLmdldChrZXkpO1xuXG5cdFx0aWYgKCFyZWZlcmVuY2UpIHtcblx0XHRcdHJlZmVyZW5jZSA9IHsgY291bnRlcjogMCwgb2JqZWN0OiB0aGlzLmNyZWF0ZVJlZmVyZW5jZWRPYmplY3Qoa2V5LCAuLi5hcmdzKSB9O1xuXHRcdFx0dGhpcy5yZWZlcmVuY2VzLnNldChrZXksIHJlZmVyZW5jZSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgeyBvYmplY3QgfSA9IHJlZmVyZW5jZTtcblx0XHRjb25zdCBkaXNwb3NlID0gY3JlYXRlU2luZ2xlQ2FsbEZ1bmN0aW9uKCgpID0+IHtcblx0XHRcdGlmICgtLXJlZmVyZW5jZS5jb3VudGVyID09PSAwKSB7XG5cdFx0XHRcdHRoaXMuZGVzdHJveVJlZmVyZW5jZWRPYmplY3Qoa2V5LCByZWZlcmVuY2Uub2JqZWN0KTtcblx0XHRcdFx0dGhpcy5yZWZlcmVuY2VzLmRlbGV0ZShrZXkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmVmZXJlbmNlLmNvdW50ZXIrKztcblxuXHRcdHJldHVybiB7IG9iamVjdCwgZGlzcG9zZSB9O1xuXHR9XG5cblx0cHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZVJlZmVyZW5jZWRPYmplY3Qoa2V5OiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogVDtcblx0cHJvdGVjdGVkIGFic3RyYWN0IGRlc3Ryb3lSZWZlcmVuY2VkT2JqZWN0KGtleTogc3RyaW5nLCBvYmplY3Q6IFQpOiB2b2lkO1xufVxuXG4vKipcbiAqIFVud3JhcHMgYSByZWZlcmVuY2UgY29sbGVjdGlvbiBvZiBwcm9taXNlZCB2YWx1ZXMuIE1ha2VzIHN1cmVcbiAqIHJlZmVyZW5jZXMgYXJlIGRpc3Bvc2VkIHdoZW5ldmVyIHByb21pc2VzIGdldCByZWplY3RlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW5jUmVmZXJlbmNlQ29sbGVjdGlvbjxUPiB7XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWZlcmVuY2VDb2xsZWN0aW9uOiBSZWZlcmVuY2VDb2xsZWN0aW9uPFByb21pc2U8VD4+KSB7IH1cblxuXHRhc3luYyBhY3F1aXJlKGtleTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IFByb21pc2U8SVJlZmVyZW5jZTxUPj4ge1xuXHRcdGNvbnN0IHJlZiA9IHRoaXMucmVmZXJlbmNlQ29sbGVjdGlvbi5hY3F1aXJlKGtleSwgLi4uYXJncyk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3Qgb2JqZWN0ID0gYXdhaXQgcmVmLm9iamVjdDtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0b2JqZWN0LFxuXHRcdFx0XHRkaXNwb3NlOiAoKSA9PiByZWYuZGlzcG9zZSgpXG5cdFx0XHR9O1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRyZWYuZGlzcG9zZSgpO1xuXHRcdFx0dGhyb3cgZXJyb3I7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBJbW1vcnRhbFJlZmVyZW5jZTxUPiBpbXBsZW1lbnRzIElSZWZlcmVuY2U8VD4ge1xuXHRjb25zdHJ1Y3RvcihwdWJsaWMgb2JqZWN0OiBUKSB7IH1cblx0ZGlzcG9zZSgpOiB2b2lkIHsgLyogbm9vcCAqLyB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlT25SZXR1cm4oZm46IChzdG9yZTogRGlzcG9zYWJsZVN0b3JlKSA9PiB2b2lkKTogdm9pZCB7XG5cdGNvbnN0IHN0b3JlID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpO1xuXHR0cnkge1xuXHRcdGZuKHN0b3JlKTtcblx0fSBmaW5hbGx5IHtcblx0XHRzdG9yZS5kaXNwb3NlKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIG1hcCB0aGUgbWFuYWdlcyB0aGUgbGlmZWN5Y2xlIG9mIHRoZSB2YWx1ZXMgdGhhdCBpdCBzdG9yZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBEaXNwb3NhYmxlTWFwPEssIFYgZXh0ZW5kcyBJRGlzcG9zYWJsZSA9IElEaXNwb3NhYmxlPiBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9zdG9yZSA9IG5ldyBNYXA8SywgVj4oKTtcblx0cHJpdmF0ZSBfaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRyYWNrRGlzcG9zYWJsZSh0aGlzKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEaXNwb3NlcyBvZiBhbGwgc3RvcmVkIHZhbHVlcyBhbmQgbWFyayB0aGlzIG9iamVjdCBhcyBkaXNwb3NlZC5cblx0ICpcblx0ICogVHJ5aW5nIHRvIHVzZSB0aGlzIG9iamVjdCBhZnRlciBpdCBoYXMgYmVlbiBkaXNwb3NlZCBvZiBpcyBhbiBlcnJvci5cblx0ICovXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0bWFya0FzRGlzcG9zZWQodGhpcyk7XG5cdFx0dGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG5cdFx0dGhpcy5jbGVhckFuZERpc3Bvc2VBbGwoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEaXNwb3NlcyBvZiBhbGwgc3RvcmVkIHZhbHVlcyBhbmQgY2xlYXIgdGhlIG1hcCwgYnV0IERPIE5PVCBtYXJrIHRoaXMgb2JqZWN0IGFzIGRpc3Bvc2VkLlxuXHQgKi9cblx0Y2xlYXJBbmREaXNwb3NlQWxsKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fc3RvcmUuc2l6ZSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRkaXNwb3NlKHRoaXMuX3N0b3JlLnZhbHVlcygpKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0dGhpcy5fc3RvcmUuY2xlYXIoKTtcblx0XHR9XG5cdH1cblxuXHRoYXMoa2V5OiBLKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3N0b3JlLmhhcyhrZXkpO1xuXHR9XG5cblx0Z2V0IHNpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RvcmUuc2l6ZTtcblx0fVxuXG5cdGdldChrZXk6IEspOiBWIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0KGtleSk7XG5cdH1cblxuXHRzZXQoa2V5OiBLLCB2YWx1ZTogViwgc2tpcERpc3Bvc2VPbk92ZXJ3cml0ZSA9IGZhbHNlKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcblx0XHRcdGNvbnNvbGUud2FybihuZXcgRXJyb3IoJ1RyeWluZyB0byBhZGQgYSBkaXNwb3NhYmxlIHRvIGEgRGlzcG9zYWJsZU1hcCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQgb2YuIFRoZSBhZGRlZCBvYmplY3Qgd2lsbCBiZSBsZWFrZWQhJykuc3RhY2spO1xuXHRcdH1cblxuXHRcdGlmICghc2tpcERpc3Bvc2VPbk92ZXJ3cml0ZSkge1xuXHRcdFx0dGhpcy5fc3RvcmUuZ2V0KGtleSk/LmRpc3Bvc2UoKTtcblx0XHR9XG5cblx0XHR0aGlzLl9zdG9yZS5zZXQoa2V5LCB2YWx1ZSk7XG5cdH1cblxuXHQvKipcblx0ICogRGVsZXRlIHRoZSB2YWx1ZSBzdG9yZWQgZm9yIGBrZXlgIGZyb20gdGhpcyBtYXAgYW5kIGFsc28gZGlzcG9zZSBvZiBpdC5cblx0ICovXG5cdGRlbGV0ZUFuZERpc3Bvc2Uoa2V5OiBLKTogdm9pZCB7XG5cdFx0dGhpcy5fc3RvcmUuZ2V0KGtleSk/LmRpc3Bvc2UoKTtcblx0XHR0aGlzLl9zdG9yZS5kZWxldGUoa2V5KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWxldGUgdGhlIHZhbHVlIHN0b3JlZCBmb3IgYGtleWAgZnJvbSB0aGlzIG1hcCBidXQgcmV0dXJuIGl0LiBUaGUgY2FsbGVyIGlzXG5cdCAqIHJlc3BvbnNpYmxlIGZvciBkaXNwb3Npbmcgb2YgdGhlIHZhbHVlLlxuXHQgKi9cblx0ZGVsZXRlQW5kTGVhayhrZXk6IEspOiBWIHwgdW5kZWZpbmVkIHtcblx0XHRjb25zdCB2YWx1ZSA9IHRoaXMuX3N0b3JlLmdldChrZXkpO1xuXHRcdHRoaXMuX3N0b3JlLmRlbGV0ZShrZXkpO1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGtleXMoKTogSXRlcmFibGVJdGVyYXRvcjxLPiB7XG5cdFx0cmV0dXJuIHRoaXMuX3N0b3JlLmtleXMoKTtcblx0fVxuXG5cdHZhbHVlcygpOiBJdGVyYWJsZUl0ZXJhdG9yPFY+IHtcblx0XHRyZXR1cm4gdGhpcy5fc3RvcmUudmFsdWVzKCk7XG5cdH1cblxuXHRbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYWJsZUl0ZXJhdG9yPFtLLCBWXT4ge1xuXHRcdHJldHVybiB0aGlzLl9zdG9yZVtTeW1ib2wuaXRlcmF0b3JdKCk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZXhwb3J0IHR5cGUgQ29kZVdpbmRvdyA9IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzICYge1xuXHRyZWFkb25seSB2c2NvZGVXaW5kb3dJZDogbnVtYmVyO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUNvZGVXaW5kb3codGFyZ2V0V2luZG93OiBXaW5kb3csIGZhbGxiYWNrV2luZG93SWQ6IG51bWJlcik6IGFzc2VydHMgdGFyZ2V0V2luZG93IGlzIENvZGVXaW5kb3cge1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG5leHBvcnQgY29uc3QgbWFpbldpbmRvdyA9ICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyA/IHdpbmRvdyA6IGdsb2JhbFRoaXMpIGFzIENvZGVXaW5kb3c7XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmNsYXNzIE5vZGU8RT4ge1xuXG5cdHN0YXRpYyByZWFkb25seSBVbmRlZmluZWQgPSBuZXcgTm9kZTxhbnk+KHVuZGVmaW5lZCk7XG5cblx0ZWxlbWVudDogRTtcblx0bmV4dDogTm9kZTxFPjtcblx0cHJldjogTm9kZTxFPjtcblxuXHRjb25zdHJ1Y3RvcihlbGVtZW50OiBFKSB7XG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLm5leHQgPSBOb2RlLlVuZGVmaW5lZDtcblx0XHR0aGlzLnByZXYgPSBOb2RlLlVuZGVmaW5lZDtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTGlua2VkTGlzdDxFPiB7XG5cblx0cHJpdmF0ZSBfZmlyc3Q6IE5vZGU8RT4gPSBOb2RlLlVuZGVmaW5lZDtcblx0cHJpdmF0ZSBfbGFzdDogTm9kZTxFPiA9IE5vZGUuVW5kZWZpbmVkO1xuXHRwcml2YXRlIF9zaXplOiBudW1iZXIgPSAwO1xuXG5cdGdldCBzaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3NpemU7XG5cdH1cblxuXHRpc0VtcHR5KCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9maXJzdCA9PT0gTm9kZS5VbmRlZmluZWQ7XG5cdH1cblxuXHRjbGVhcigpOiB2b2lkIHtcblx0XHRsZXQgbm9kZSA9IHRoaXMuX2ZpcnN0O1xuXHRcdHdoaWxlIChub2RlICE9PSBOb2RlLlVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3QgbmV4dCA9IG5vZGUubmV4dDtcblx0XHRcdG5vZGUucHJldiA9IE5vZGUuVW5kZWZpbmVkO1xuXHRcdFx0bm9kZS5uZXh0ID0gTm9kZS5VbmRlZmluZWQ7XG5cdFx0XHRub2RlID0gbmV4dDtcblx0XHR9XG5cblx0XHR0aGlzLl9maXJzdCA9IE5vZGUuVW5kZWZpbmVkO1xuXHRcdHRoaXMuX2xhc3QgPSBOb2RlLlVuZGVmaW5lZDtcblx0XHR0aGlzLl9zaXplID0gMDtcblx0fVxuXG5cdHVuc2hpZnQoZWxlbWVudDogRSk6ICgpID0+IHZvaWQge1xuXHRcdHJldHVybiB0aGlzLl9pbnNlcnQoZWxlbWVudCwgZmFsc2UpO1xuXHR9XG5cblx0cHVzaChlbGVtZW50OiBFKTogKCkgPT4gdm9pZCB7XG5cdFx0cmV0dXJuIHRoaXMuX2luc2VydChlbGVtZW50LCB0cnVlKTtcblx0fVxuXG5cdHByaXZhdGUgX2luc2VydChlbGVtZW50OiBFLCBhdFRoZUVuZDogYm9vbGVhbik6ICgpID0+IHZvaWQge1xuXHRcdGNvbnN0IG5ld05vZGUgPSBuZXcgTm9kZShlbGVtZW50KTtcblx0XHRpZiAodGhpcy5fZmlyc3QgPT09IE5vZGUuVW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLl9maXJzdCA9IG5ld05vZGU7XG5cdFx0XHR0aGlzLl9sYXN0ID0gbmV3Tm9kZTtcblxuXHRcdH0gZWxzZSBpZiAoYXRUaGVFbmQpIHtcblx0XHRcdC8vIHB1c2hcblx0XHRcdGNvbnN0IG9sZExhc3QgPSB0aGlzLl9sYXN0O1xuXHRcdFx0dGhpcy5fbGFzdCA9IG5ld05vZGU7XG5cdFx0XHRuZXdOb2RlLnByZXYgPSBvbGRMYXN0O1xuXHRcdFx0b2xkTGFzdC5uZXh0ID0gbmV3Tm9kZTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyB1bnNoaWZ0XG5cdFx0XHRjb25zdCBvbGRGaXJzdCA9IHRoaXMuX2ZpcnN0O1xuXHRcdFx0dGhpcy5fZmlyc3QgPSBuZXdOb2RlO1xuXHRcdFx0bmV3Tm9kZS5uZXh0ID0gb2xkRmlyc3Q7XG5cdFx0XHRvbGRGaXJzdC5wcmV2ID0gbmV3Tm9kZTtcblx0XHR9XG5cdFx0dGhpcy5fc2l6ZSArPSAxO1xuXG5cdFx0bGV0IGRpZFJlbW92ZSA9IGZhbHNlO1xuXHRcdHJldHVybiAoKSA9PiB7XG5cdFx0XHRpZiAoIWRpZFJlbW92ZSkge1xuXHRcdFx0XHRkaWRSZW1vdmUgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLl9yZW1vdmUobmV3Tm9kZSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHNoaWZ0KCk6IEUgfCB1bmRlZmluZWQge1xuXHRcdGlmICh0aGlzLl9maXJzdCA9PT0gTm9kZS5VbmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHJlcyA9IHRoaXMuX2ZpcnN0LmVsZW1lbnQ7XG5cdFx0XHR0aGlzLl9yZW1vdmUodGhpcy5fZmlyc3QpO1xuXHRcdFx0cmV0dXJuIHJlcztcblx0XHR9XG5cdH1cblxuXHRwb3AoKTogRSB8IHVuZGVmaW5lZCB7XG5cdFx0aWYgKHRoaXMuX2xhc3QgPT09IE5vZGUuVW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCByZXMgPSB0aGlzLl9sYXN0LmVsZW1lbnQ7XG5cdFx0XHR0aGlzLl9yZW1vdmUodGhpcy5fbGFzdCk7XG5cdFx0XHRyZXR1cm4gcmVzO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX3JlbW92ZShub2RlOiBOb2RlPEU+KTogdm9pZCB7XG5cdFx0aWYgKG5vZGUucHJldiAhPT0gTm9kZS5VbmRlZmluZWQgJiYgbm9kZS5uZXh0ICE9PSBOb2RlLlVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gbWlkZGxlXG5cdFx0XHRjb25zdCBhbmNob3IgPSBub2RlLnByZXY7XG5cdFx0XHRhbmNob3IubmV4dCA9IG5vZGUubmV4dDtcblx0XHRcdG5vZGUubmV4dC5wcmV2ID0gYW5jaG9yO1xuXG5cdFx0fSBlbHNlIGlmIChub2RlLnByZXYgPT09IE5vZGUuVW5kZWZpbmVkICYmIG5vZGUubmV4dCA9PT0gTm9kZS5VbmRlZmluZWQpIHtcblx0XHRcdC8vIG9ubHkgbm9kZVxuXHRcdFx0dGhpcy5fZmlyc3QgPSBOb2RlLlVuZGVmaW5lZDtcblx0XHRcdHRoaXMuX2xhc3QgPSBOb2RlLlVuZGVmaW5lZDtcblxuXHRcdH0gZWxzZSBpZiAobm9kZS5uZXh0ID09PSBOb2RlLlVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gbGFzdFxuXHRcdFx0dGhpcy5fbGFzdCA9IHRoaXMuX2xhc3QucHJldiE7XG5cdFx0XHR0aGlzLl9sYXN0Lm5leHQgPSBOb2RlLlVuZGVmaW5lZDtcblxuXHRcdH0gZWxzZSBpZiAobm9kZS5wcmV2ID09PSBOb2RlLlVuZGVmaW5lZCkge1xuXHRcdFx0Ly8gZmlyc3Rcblx0XHRcdHRoaXMuX2ZpcnN0ID0gdGhpcy5fZmlyc3QubmV4dCE7XG5cdFx0XHR0aGlzLl9maXJzdC5wcmV2ID0gTm9kZS5VbmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gZG9uZVxuXHRcdHRoaXMuX3NpemUgLT0gMTtcblx0fVxuXG5cdCpbU3ltYm9sLml0ZXJhdG9yXSgpOiBJdGVyYXRvcjxFPiB7XG5cdFx0bGV0IG5vZGUgPSB0aGlzLl9maXJzdDtcblx0XHR3aGlsZSAobm9kZSAhPT0gTm9kZS5VbmRlZmluZWQpIHtcblx0XHRcdHlpZWxkIG5vZGUuZWxlbWVudDtcblx0XHRcdG5vZGUgPSBub2RlLm5leHQ7XG5cdFx0fVxuXHR9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8vIGZha2UgZGVmaW5pdGlvbiBzbyB0aGF0IHRoZSB2YWxpZCBsYXllcnMgY2hlY2sgd29uJ3QgdHJpcCBvbiB0aGlzXG5kZWNsYXJlIGNvbnN0IGdsb2JhbFRoaXM6IHsgcGVyZm9ybWFuY2U/OiB7IG5vdygpOiBudW1iZXIgfSB9O1xuXG5jb25zdCBoYXNQZXJmb3JtYW5jZU5vdyA9IChnbG9iYWxUaGlzLnBlcmZvcm1hbmNlICYmIHR5cGVvZiBnbG9iYWxUaGlzLnBlcmZvcm1hbmNlLm5vdyA9PT0gJ2Z1bmN0aW9uJyk7XG5cbmV4cG9ydCBjbGFzcyBTdG9wV2F0Y2gge1xuXG5cdHByaXZhdGUgX3N0YXJ0VGltZTogbnVtYmVyO1xuXHRwcml2YXRlIF9zdG9wVGltZTogbnVtYmVyO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX25vdzogKCkgPT4gbnVtYmVyO1xuXG5cdHB1YmxpYyBzdGF0aWMgY3JlYXRlKGhpZ2hSZXNvbHV0aW9uPzogYm9vbGVhbik6IFN0b3BXYXRjaCB7XG5cdFx0cmV0dXJuIG5ldyBTdG9wV2F0Y2goaGlnaFJlc29sdXRpb24pO1xuXHR9XG5cblx0Y29uc3RydWN0b3IoaGlnaFJlc29sdXRpb24/OiBib29sZWFuKSB7XG5cdFx0dGhpcy5fbm93ID0gaGFzUGVyZm9ybWFuY2VOb3cgJiYgaGlnaFJlc29sdXRpb24gPT09IGZhbHNlID8gRGF0ZS5ub3cgOiBnbG9iYWxUaGlzLnBlcmZvcm1hbmNlIS5ub3cuYmluZChnbG9iYWxUaGlzLnBlcmZvcm1hbmNlKTtcblx0XHR0aGlzLl9zdGFydFRpbWUgPSB0aGlzLl9ub3coKTtcblx0XHR0aGlzLl9zdG9wVGltZSA9IC0xO1xuXHR9XG5cblx0cHVibGljIHN0b3AoKTogdm9pZCB7XG5cdFx0dGhpcy5fc3RvcFRpbWUgPSB0aGlzLl9ub3coKTtcblx0fVxuXG5cdHB1YmxpYyByZXNldCgpOiB2b2lkIHtcblx0XHR0aGlzLl9zdGFydFRpbWUgPSB0aGlzLl9ub3coKTtcblx0XHR0aGlzLl9zdG9wVGltZSA9IC0xO1xuXHR9XG5cblx0cHVibGljIGVsYXBzZWQoKTogbnVtYmVyIHtcblx0XHRpZiAodGhpcy5fc3RvcFRpbWUgIT09IC0xKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc3RvcFRpbWUgLSB0aGlzLl9zdGFydFRpbWU7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9ub3coKSAtIHRoaXMuX3N0YXJ0VGltZTtcblx0fVxufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlbiB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2NhbmNlbGxhdGlvbic7XG5pbXBvcnQgeyBvblVuZXhwZWN0ZWRFcnJvciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2Vycm9ycyc7XG5pbXBvcnQgeyBjcmVhdGVTaW5nbGVDYWxsRnVuY3Rpb24gfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9mdW5jdGlvbmFsJztcbmltcG9ydCB7IGNvbWJpbmVkRGlzcG9zYWJsZSwgRGlzcG9zYWJsZSwgRGlzcG9zYWJsZU1hcCwgRGlzcG9zYWJsZVN0b3JlLCBJRGlzcG9zYWJsZSwgdG9EaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IExpbmtlZExpc3QgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saW5rZWRMaXN0JztcbmltcG9ydCB7IElPYnNlcnZhYmxlLCBJT2JzZXJ2ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9vYnNlcnZhYmxlJztcbmltcG9ydCB7IFN0b3BXYXRjaCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3N0b3B3YXRjaCc7XG5pbXBvcnQgeyBNaWNyb3Rhc2tEZWxheSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3N5bWJvbHMnO1xuXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBVbmNvbW1lbnQgdGhlIG5leHQgbGluZSB0byBwcmludCB3YXJuaW5ncyB3aGVuZXZlciBhIGxpc3RlbmVyIGlzIEdDJ2VkIHdpdGhvdXQgaGF2aW5nIGJlZW4gZGlzcG9zZWQuIFRoaXMgaXMgYSBMRUFLLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNvbnN0IF9lbmFibGVMaXN0ZW5lckdDZWRXYXJuaW5nID0gZmFsc2Vcblx0Ly8gfHwgQm9vbGVhbihcIlRSVUVcIikgLy8gY2F1c2VzIGEgbGludGVyIHdhcm5pbmcgc28gdGhhdCBpdCBjYW5ub3QgYmUgcHVzaGVkXG5cdDtcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFVuY29tbWVudCB0aGUgbmV4dCBsaW5lIHRvIHByaW50IHdhcm5pbmdzIHdoZW5ldmVyIGFuIGVtaXR0ZXIgd2l0aCBsaXN0ZW5lcnMgaXMgZGlzcG9zZWQuIFRoYXQgaXMgYSBzaWduIG9mIGNvZGUgc21lbGwuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY29uc3QgX2VuYWJsZURpc3Bvc2VXaXRoTGlzdGVuZXJXYXJuaW5nID0gZmFsc2Vcblx0Ly8gfHwgQm9vbGVhbihcIlRSVUVcIikgLy8gY2F1c2VzIGEgbGludGVyIHdhcm5pbmcgc28gdGhhdCBpdCBjYW5ub3QgYmUgcHVzaGVkXG5cdDtcblxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVW5jb21tZW50IHRoZSBuZXh0IGxpbmUgdG8gcHJpbnQgd2FybmluZ3Mgd2hlbmV2ZXIgYSBzbmFwc2hvdHRlZCBldmVudCBpcyB1c2VkIHJlcGVhdGVkbHkgd2l0aG91dCBjbGVhbnVwLlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xNDI4NTFcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jb25zdCBfZW5hYmxlU25hcHNob3RQb3RlbnRpYWxMZWFrV2FybmluZyA9IGZhbHNlXG5cdC8vIHx8IEJvb2xlYW4oXCJUUlVFXCIpIC8vIGNhdXNlcyBhIGxpbnRlciB3YXJuaW5nIHNvIHRoYXQgaXQgY2Fubm90IGJlIHB1c2hlZFxuXHQ7XG5cbi8qKlxuICogQW4gZXZlbnQgd2l0aCB6ZXJvIG9yIG9uZSBwYXJhbWV0ZXJzIHRoYXQgY2FuIGJlIHN1YnNjcmliZWQgdG8uIFRoZSBldmVudCBpcyBhIGZ1bmN0aW9uIGl0c2VsZi5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBFdmVudDxUPiB7XG5cdChsaXN0ZW5lcjogKGU6IFQpID0+IGFueSwgdGhpc0FyZ3M/OiBhbnksIGRpc3Bvc2FibGVzPzogSURpc3Bvc2FibGVbXSB8IERpc3Bvc2FibGVTdG9yZSk6IElEaXNwb3NhYmxlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEV2ZW50IHtcblx0ZXhwb3J0IGNvbnN0IE5vbmU6IEV2ZW50PGFueT4gPSAoKSA9PiBEaXNwb3NhYmxlLk5vbmU7XG5cblx0ZnVuY3Rpb24gX2FkZExlYWthZ2VUcmFjZUxvZ2ljKG9wdGlvbnM6IEVtaXR0ZXJPcHRpb25zKSB7XG5cdFx0aWYgKF9lbmFibGVTbmFwc2hvdFBvdGVudGlhbExlYWtXYXJuaW5nKSB7XG5cdFx0XHRjb25zdCB7IG9uRGlkQWRkTGlzdGVuZXI6IG9yaWdMaXN0ZW5lckRpZEFkZCB9ID0gb3B0aW9ucztcblx0XHRcdGNvbnN0IHN0YWNrID0gU3RhY2t0cmFjZS5jcmVhdGUoKTtcblx0XHRcdGxldCBjb3VudCA9IDA7XG5cdFx0XHRvcHRpb25zLm9uRGlkQWRkTGlzdGVuZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICgrK2NvdW50ID09PSAyKSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCdzbmFwc2hvdHRlZCBlbWl0dGVyIExJS0VMWSB1c2VkIHB1YmxpYyBhbmQgU0hPVUxEIEhBVkUgQkVFTiBjcmVhdGVkIHdpdGggRGlzcG9zYWJsZVN0b3JlLiBzbmFwc2hvdHRlZCBoZXJlJyk7XG5cdFx0XHRcdFx0c3RhY2sucHJpbnQoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvcmlnTGlzdGVuZXJEaWRBZGQ/LigpO1xuXHRcdFx0fTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogR2l2ZW4gYW4gZXZlbnQsIHJldHVybnMgYW5vdGhlciBldmVudCB3aGljaCBkZWJvdW5jZXMgY2FsbHMgYW5kIGRlZmVycyB0aGUgbGlzdGVuZXJzIHRvIGEgbGF0ZXIgdGFzayB2aWEgYSBzaGFyZWRcblx0ICogYHNldFRpbWVvdXRgLiBUaGUgZXZlbnQgaXMgY29udmVydGVkIGludG8gYSBzaWduYWwgKGBFdmVudDx2b2lkPmApIHRvIGF2b2lkIGFkZGl0aW9uYWwgb2JqZWN0IGNyZWF0aW9uIGFzIGFcblx0ICogcmVzdWx0IG9mIG1lcmdpbmcgZXZlbnRzIGFuZCB0byB0cnkgcHJldmVudCByYWNlIGNvbmRpdGlvbnMgdGhhdCBjb3VsZCBhcmlzZSB3aGVuIHVzaW5nIHJlbGF0ZWQgZGVmZXJyZWQgYW5kXG5cdCAqIG5vbi1kZWZlcnJlZCBldmVudHMuXG5cdCAqXG5cdCAqIFRoaXMgaXMgdXNlZnVsIGZvciBkZWZlcnJpbmcgbm9uLWNyaXRpY2FsIHdvcmsgKGVnLiBnZW5lcmFsIFVJIHVwZGF0ZXMpIHRvIGVuc3VyZSBpdCBkb2VzIG5vdCBibG9jayBjcml0aWNhbCB3b3JrXG5cdCAqIChlZy4gbGF0ZW5jeSBvZiBrZXlwcmVzcyB0byB0ZXh0IHJlbmRlcmVkKS5cblx0ICpcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgc291cmNlIGZvciB0aGUgbmV3IGV2ZW50LlxuXHQgKiBAcGFyYW0gZGlzcG9zYWJsZSBBIGRpc3Bvc2FibGUgc3RvcmUgdG8gYWRkIHRoZSBuZXcgRXZlbnRFbWl0dGVyIHRvLlxuXHQgKi9cblx0ZXhwb3J0IGZ1bmN0aW9uIGRlZmVyKGV2ZW50OiBFdmVudDx1bmtub3duPiwgZGlzcG9zYWJsZT86IERpc3Bvc2FibGVTdG9yZSk6IEV2ZW50PHZvaWQ+IHtcblx0XHRyZXR1cm4gZGVib3VuY2U8dW5rbm93biwgdm9pZD4oZXZlbnQsICgpID0+IHZvaWQgMCwgMCwgdW5kZWZpbmVkLCB0cnVlLCB1bmRlZmluZWQsIGRpc3Bvc2FibGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdpdmVuIGFuIGV2ZW50LCByZXR1cm5zIGFub3RoZXIgZXZlbnQgd2hpY2ggb25seSBmaXJlcyBvbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHNvdXJjZSBmb3IgdGhlIG5ldyBldmVudC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBvbmNlPFQ+KGV2ZW50OiBFdmVudDxUPik6IEV2ZW50PFQ+IHtcblx0XHRyZXR1cm4gKGxpc3RlbmVyLCB0aGlzQXJncyA9IG51bGwsIGRpc3Bvc2FibGVzPykgPT4ge1xuXHRcdFx0Ly8gd2UgbmVlZCB0aGlzLCBpbiBjYXNlIHRoZSBldmVudCBmaXJlcyBkdXJpbmcgdGhlIGxpc3RlbmVyIGNhbGxcblx0XHRcdGxldCBkaWRGaXJlID0gZmFsc2U7XG5cdFx0XHRsZXQgcmVzdWx0OiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblx0XHRcdHJlc3VsdCA9IGV2ZW50KGUgPT4ge1xuXHRcdFx0XHRpZiAoZGlkRmlyZSkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmIChyZXN1bHQpIHtcblx0XHRcdFx0XHRyZXN1bHQuZGlzcG9zZSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRpZEZpcmUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGUpO1xuXHRcdFx0fSwgbnVsbCwgZGlzcG9zYWJsZXMpO1xuXG5cdFx0XHRpZiAoZGlkRmlyZSkge1xuXHRcdFx0XHRyZXN1bHQuZGlzcG9zZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogTWFwcyBhbiBldmVudCBvZiBvbmUgdHlwZSBpbnRvIGFuIGV2ZW50IG9mIGFub3RoZXIgdHlwZSB1c2luZyBhIG1hcHBpbmcgZnVuY3Rpb24sIHNpbWlsYXIgdG8gaG93XG5cdCAqIGBBcnJheS5wcm90b3R5cGUubWFwYCB3b3Jrcy5cblx0ICpcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgc291cmNlIGZvciB0aGUgbmV3IGV2ZW50LlxuXHQgKiBAcGFyYW0gbWFwIFRoZSBtYXBwaW5nIGZ1bmN0aW9uLlxuXHQgKiBAcGFyYW0gZGlzcG9zYWJsZSBBIGRpc3Bvc2FibGUgc3RvcmUgdG8gYWRkIHRoZSBuZXcgRXZlbnRFbWl0dGVyIHRvLlxuXHQgKi9cblx0ZXhwb3J0IGZ1bmN0aW9uIG1hcDxJLCBPPihldmVudDogRXZlbnQ8ST4sIG1hcDogKGk6IEkpID0+IE8sIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxPPiB7XG5cdFx0cmV0dXJuIHNuYXBzaG90KChsaXN0ZW5lciwgdGhpc0FyZ3MgPSBudWxsLCBkaXNwb3NhYmxlcz8pID0+IGV2ZW50KGkgPT4gbGlzdGVuZXIuY2FsbCh0aGlzQXJncywgbWFwKGkpKSwgbnVsbCwgZGlzcG9zYWJsZXMpLCBkaXNwb3NhYmxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcmFwcyBhbiBldmVudCBpbiBhbm90aGVyIGV2ZW50IHRoYXQgcGVyZm9ybXMgc29tZSBmdW5jdGlvbiBvbiB0aGUgZXZlbnQgb2JqZWN0IGJlZm9yZSBmaXJpbmcuXG5cdCAqXG5cdCAqICpOT1RFKiB0aGF0IHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhbiBgRXZlbnRgIGFuZCBpdCBNVVNUIGJlIGNhbGxlZCB3aXRoIGEgYERpc3Bvc2FibGVTdG9yZWAgd2hlbmV2ZXIgdGhlIHJldHVybmVkXG5cdCAqIGV2ZW50IGlzIGFjY2Vzc2libGUgdG8gXCJ0aGlyZCBwYXJ0aWVzXCIsIGUuZyB0aGUgZXZlbnQgaXMgYSBwdWJsaWMgcHJvcGVydHkuIE90aGVyd2lzZSBhIGxlYWtlZCBsaXN0ZW5lciBvbiB0aGVcblx0ICogcmV0dXJuZWQgZXZlbnQgY2F1c2VzIHRoaXMgdXRpbGl0eSB0byBsZWFrIGEgbGlzdGVuZXIgb24gdGhlIG9yaWdpbmFsIGV2ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHNvdXJjZSBmb3IgdGhlIG5ldyBldmVudC5cblx0ICogQHBhcmFtIGVhY2ggVGhlIGZ1bmN0aW9uIHRvIHBlcmZvcm0gb24gdGhlIGV2ZW50IG9iamVjdC5cblx0ICogQHBhcmFtIGRpc3Bvc2FibGUgQSBkaXNwb3NhYmxlIHN0b3JlIHRvIGFkZCB0aGUgbmV3IEV2ZW50RW1pdHRlciB0by5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoPEk+KGV2ZW50OiBFdmVudDxJPiwgZWFjaDogKGk6IEkpID0+IHZvaWQsIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxJPiB7XG5cdFx0cmV0dXJuIHNuYXBzaG90KChsaXN0ZW5lciwgdGhpc0FyZ3MgPSBudWxsLCBkaXNwb3NhYmxlcz8pID0+IGV2ZW50KGkgPT4geyBlYWNoKGkpOyBsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCBpKTsgfSwgbnVsbCwgZGlzcG9zYWJsZXMpLCBkaXNwb3NhYmxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXcmFwcyBhbiBldmVudCBpbiBhbm90aGVyIGV2ZW50IHRoYXQgZmlyZXMgb25seSB3aGVuIHNvbWUgY29uZGl0aW9uIGlzIG1ldC5cblx0ICpcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgc291cmNlIGZvciB0aGUgbmV3IGV2ZW50LlxuXHQgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXIgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIHRoZSBjb25kaXRpb24uIFRoZSBldmVudCB3aWxsIGZpcmUgZm9yIHRoZSBvYmplY3QgaWYgdGhpcyBmdW5jdGlvblxuXHQgKiByZXR1cm5zIHRydWUuXG5cdCAqIEBwYXJhbSBkaXNwb3NhYmxlIEEgZGlzcG9zYWJsZSBzdG9yZSB0byBhZGQgdGhlIG5ldyBFdmVudEVtaXR0ZXIgdG8uXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQsIFU+KGV2ZW50OiBFdmVudDxUIHwgVT4sIGZpbHRlcjogKGU6IFQgfCBVKSA9PiBlIGlzIFQsIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUPjtcblx0ZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihldmVudDogRXZlbnQ8VD4sIGZpbHRlcjogKGU6IFQpID0+IGJvb2xlYW4sIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUPjtcblx0ZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxULCBSPihldmVudDogRXZlbnQ8VCB8IFI+LCBmaWx0ZXI6IChlOiBUIHwgUikgPT4gZSBpcyBSLCBkaXNwb3NhYmxlPzogRGlzcG9zYWJsZVN0b3JlKTogRXZlbnQ8Uj47XG5cdGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBmaWx0ZXI6IChlOiBUKSA9PiBib29sZWFuLCBkaXNwb3NhYmxlPzogRGlzcG9zYWJsZVN0b3JlKTogRXZlbnQ8VD4ge1xuXHRcdHJldHVybiBzbmFwc2hvdCgobGlzdGVuZXIsIHRoaXNBcmdzID0gbnVsbCwgZGlzcG9zYWJsZXM/KSA9PiBldmVudChlID0+IGZpbHRlcihlKSAmJiBsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCBlKSwgbnVsbCwgZGlzcG9zYWJsZXMpLCBkaXNwb3NhYmxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHaXZlbiBhbiBldmVudCwgcmV0dXJucyB0aGUgc2FtZSBldmVudCBidXQgdHlwZWQgYXMgYEV2ZW50PHZvaWQ+YC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBzaWduYWw8VD4oZXZlbnQ6IEV2ZW50PFQ+KTogRXZlbnQ8dm9pZD4ge1xuXHRcdHJldHVybiBldmVudCBhcyBFdmVudDxhbnk+IGFzIEV2ZW50PHZvaWQ+O1xuXHR9XG5cblx0LyoqXG5cdCAqIEdpdmVuIGEgY29sbGVjdGlvbiBvZiBldmVudHMsIHJldHVybnMgYSBzaW5nbGUgZXZlbnQgd2hpY2ggZW1pdHMgd2hlbmV2ZXIgYW55IG9mIHRoZSBwcm92aWRlZCBldmVudHMgZW1pdC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBhbnk8VD4oLi4uZXZlbnRzOiBFdmVudDxUPltdKTogRXZlbnQ8VD47XG5cdGV4cG9ydCBmdW5jdGlvbiBhbnkoLi4uZXZlbnRzOiBFdmVudDxhbnk+W10pOiBFdmVudDx2b2lkPjtcblx0ZXhwb3J0IGZ1bmN0aW9uIGFueTxUPiguLi5ldmVudHM6IEV2ZW50PFQ+W10pOiBFdmVudDxUPiB7XG5cdFx0cmV0dXJuIChsaXN0ZW5lciwgdGhpc0FyZ3MgPSBudWxsLCBkaXNwb3NhYmxlcz8pID0+IHtcblx0XHRcdGNvbnN0IGRpc3Bvc2FibGUgPSBjb21iaW5lZERpc3Bvc2FibGUoLi4uZXZlbnRzLm1hcChldmVudCA9PiBldmVudChlID0+IGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGUpKSkpO1xuXHRcdFx0cmV0dXJuIGFkZEFuZFJldHVybkRpc3Bvc2FibGUoZGlzcG9zYWJsZSwgZGlzcG9zYWJsZXMpO1xuXHRcdH07XG5cdH1cblxuXHQvKipcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gcmVkdWNlPEksIE8+KGV2ZW50OiBFdmVudDxJPiwgbWVyZ2U6IChsYXN0OiBPIHwgdW5kZWZpbmVkLCBldmVudDogSSkgPT4gTywgaW5pdGlhbD86IE8sIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxPPiB7XG5cdFx0bGV0IG91dHB1dDogTyB8IHVuZGVmaW5lZCA9IGluaXRpYWw7XG5cblx0XHRyZXR1cm4gbWFwPEksIE8+KGV2ZW50LCBlID0+IHtcblx0XHRcdG91dHB1dCA9IG1lcmdlKG91dHB1dCwgZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0sIGRpc3Bvc2FibGUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc25hcHNob3Q8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBkaXNwb3NhYmxlOiBEaXNwb3NhYmxlU3RvcmUgfCB1bmRlZmluZWQpOiBFdmVudDxUPiB7XG5cdFx0bGV0IGxpc3RlbmVyOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblxuXHRcdGNvbnN0IG9wdGlvbnM6IEVtaXR0ZXJPcHRpb25zIHwgdW5kZWZpbmVkID0ge1xuXHRcdFx0b25XaWxsQWRkRmlyc3RMaXN0ZW5lcigpIHtcblx0XHRcdFx0bGlzdGVuZXIgPSBldmVudChlbWl0dGVyLmZpcmUsIGVtaXR0ZXIpO1xuXHRcdFx0fSxcblx0XHRcdG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyKCkge1xuXHRcdFx0XHRsaXN0ZW5lcj8uZGlzcG9zZSgpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRpZiAoIWRpc3Bvc2FibGUpIHtcblx0XHRcdF9hZGRMZWFrYWdlVHJhY2VMb2dpYyhvcHRpb25zKTtcblx0XHR9XG5cblx0XHRjb25zdCBlbWl0dGVyID0gbmV3IEVtaXR0ZXI8VD4ob3B0aW9ucyk7XG5cblx0XHRkaXNwb3NhYmxlPy5hZGQoZW1pdHRlcik7XG5cblx0XHRyZXR1cm4gZW1pdHRlci5ldmVudDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBZGRzIHRoZSBJRGlzcG9zYWJsZSB0byB0aGUgc3RvcmUgaWYgaXQncyBzZXQsIGFuZCByZXR1cm5zIGl0LiBVc2VmdWwgdG9cblx0ICogRXZlbnQgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGRBbmRSZXR1cm5EaXNwb3NhYmxlPFQgZXh0ZW5kcyBJRGlzcG9zYWJsZT4oZDogVCwgc3RvcmU6IERpc3Bvc2FibGVTdG9yZSB8IElEaXNwb3NhYmxlW10gfCB1bmRlZmluZWQpOiBUIHtcblx0XHRpZiAoc3RvcmUgaW5zdGFuY2VvZiBBcnJheSkge1xuXHRcdFx0c3RvcmUucHVzaChkKTtcblx0XHR9IGVsc2UgaWYgKHN0b3JlKSB7XG5cdFx0XHRzdG9yZS5hZGQoZCk7XG5cdFx0fVxuXHRcdHJldHVybiBkO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdpdmVuIGFuIGV2ZW50LCBjcmVhdGVzIGEgbmV3IGVtaXR0ZXIgdGhhdCBldmVudCB0aGF0IHdpbGwgZGVib3VuY2UgZXZlbnRzIGJhc2VkIG9uIHtAbGluayBkZWxheX0gYW5kIGdpdmUgYW5cblx0ICogYXJyYXkgZXZlbnQgb2JqZWN0IG9mIGFsbCBldmVudHMgdGhhdCBmaXJlZC5cblx0ICpcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgb3JpZ2luYWwgZXZlbnQgdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSBtZXJnZSBBIGZ1bmN0aW9uIHRoYXQgcmVkdWNlcyBhbGwgZXZlbnRzIGludG8gYSBzaW5nbGUgZXZlbnQuXG5cdCAqIEBwYXJhbSBkZWxheSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIGxlYWRpbmcgV2hldGhlciB0byBmaXJlIGEgbGVhZGluZyBldmVudCB3aXRob3V0IGRlYm91bmNpbmcuXG5cdCAqIEBwYXJhbSBmbHVzaE9uTGlzdGVuZXJSZW1vdmUgV2hldGhlciB0byBmaXJlIGFsbCBkZWJvdW5jZWQgZXZlbnRzIHdoZW4gYSBsaXN0ZW5lciBpcyByZW1vdmVkLiBJZiB0aGlzIGlzIG5vdFxuXHQgKiBzcGVjaWZpZWQsIHNvbWUgZXZlbnRzIGNvdWxkIGdvIG1pc3NpbmcuIFVzZSB0aGlzIGlmIGl0J3MgaW1wb3J0YW50IHRoYXQgYWxsIGV2ZW50cyBhcmUgcHJvY2Vzc2VkLCBldmVuIGlmIHRoZVxuXHQgKiBsaXN0ZW5lciBnZXRzIGRpc3Bvc2VkIGJlZm9yZSB0aGUgZGVib3VuY2VkIGV2ZW50IGZpcmVzLlxuXHQgKiBAcGFyYW0gbGVha1dhcm5pbmdUaHJlc2hvbGQgU2VlIHtAbGluayBFbWl0dGVyT3B0aW9ucy5sZWFrV2FybmluZ1RocmVzaG9sZH0uXG5cdCAqIEBwYXJhbSBkaXNwb3NhYmxlIEEgZGlzcG9zYWJsZSBzdG9yZSB0byByZWdpc3RlciB0aGUgZGVib3VuY2UgZW1pdHRlciB0by5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZTxUPihldmVudDogRXZlbnQ8VD4sIG1lcmdlOiAobGFzdDogVCB8IHVuZGVmaW5lZCwgZXZlbnQ6IFQpID0+IFQsIGRlbGF5PzogbnVtYmVyIHwgdHlwZW9mIE1pY3JvdGFza0RlbGF5LCBsZWFkaW5nPzogYm9vbGVhbiwgZmx1c2hPbkxpc3RlbmVyUmVtb3ZlPzogYm9vbGVhbiwgbGVha1dhcm5pbmdUaHJlc2hvbGQ/OiBudW1iZXIsIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUPjtcblx0ZXhwb3J0IGZ1bmN0aW9uIGRlYm91bmNlPEksIE8+KGV2ZW50OiBFdmVudDxJPiwgbWVyZ2U6IChsYXN0OiBPIHwgdW5kZWZpbmVkLCBldmVudDogSSkgPT4gTywgZGVsYXk/OiBudW1iZXIgfCB0eXBlb2YgTWljcm90YXNrRGVsYXksIGxlYWRpbmc/OiBib29sZWFuLCBmbHVzaE9uTGlzdGVuZXJSZW1vdmU/OiBib29sZWFuLCBsZWFrV2FybmluZ1RocmVzaG9sZD86IG51bWJlciwgZGlzcG9zYWJsZT86IERpc3Bvc2FibGVTdG9yZSk6IEV2ZW50PE8+O1xuXHRleHBvcnQgZnVuY3Rpb24gZGVib3VuY2U8SSwgTz4oZXZlbnQ6IEV2ZW50PEk+LCBtZXJnZTogKGxhc3Q6IE8gfCB1bmRlZmluZWQsIGV2ZW50OiBJKSA9PiBPLCBkZWxheTogbnVtYmVyIHwgdHlwZW9mIE1pY3JvdGFza0RlbGF5ID0gMTAwLCBsZWFkaW5nID0gZmFsc2UsIGZsdXNoT25MaXN0ZW5lclJlbW92ZSA9IGZhbHNlLCBsZWFrV2FybmluZ1RocmVzaG9sZD86IG51bWJlciwgZGlzcG9zYWJsZT86IERpc3Bvc2FibGVTdG9yZSk6IEV2ZW50PE8+IHtcblx0XHRsZXQgc3Vic2NyaXB0aW9uOiBJRGlzcG9zYWJsZTtcblx0XHRsZXQgb3V0cHV0OiBPIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXHRcdGxldCBoYW5kbGU6IGFueSA9IHVuZGVmaW5lZDtcblx0XHRsZXQgbnVtRGVib3VuY2VkQ2FsbHMgPSAwO1xuXHRcdGxldCBkb0ZpcmU6ICgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZDtcblxuXHRcdGNvbnN0IG9wdGlvbnM6IEVtaXR0ZXJPcHRpb25zIHwgdW5kZWZpbmVkID0ge1xuXHRcdFx0bGVha1dhcm5pbmdUaHJlc2hvbGQsXG5cdFx0XHRvbldpbGxBZGRGaXJzdExpc3RlbmVyKCkge1xuXHRcdFx0XHRzdWJzY3JpcHRpb24gPSBldmVudChjdXIgPT4ge1xuXHRcdFx0XHRcdG51bURlYm91bmNlZENhbGxzKys7XG5cdFx0XHRcdFx0b3V0cHV0ID0gbWVyZ2Uob3V0cHV0LCBjdXIpO1xuXG5cdFx0XHRcdFx0aWYgKGxlYWRpbmcgJiYgIWhhbmRsZSkge1xuXHRcdFx0XHRcdFx0ZW1pdHRlci5maXJlKG91dHB1dCk7XG5cdFx0XHRcdFx0XHRvdXRwdXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZG9GaXJlID0gKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgX291dHB1dCA9IG91dHB1dDtcblx0XHRcdFx0XHRcdG91dHB1dCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdGhhbmRsZSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdGlmICghbGVhZGluZyB8fCBudW1EZWJvdW5jZWRDYWxscyA+IDEpIHtcblx0XHRcdFx0XHRcdFx0ZW1pdHRlci5maXJlKF9vdXRwdXQhKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG51bURlYm91bmNlZENhbGxzID0gMDtcblx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBkZWxheSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dChoYW5kbGUpO1xuXHRcdFx0XHRcdFx0aGFuZGxlID0gc2V0VGltZW91dChkb0ZpcmUsIGRlbGF5KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKGhhbmRsZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZSA9IDA7XG5cdFx0XHRcdFx0XHRcdHF1ZXVlTWljcm90YXNrKGRvRmlyZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0sXG5cdFx0XHRvbldpbGxSZW1vdmVMaXN0ZW5lcigpIHtcblx0XHRcdFx0aWYgKGZsdXNoT25MaXN0ZW5lclJlbW92ZSAmJiBudW1EZWJvdW5jZWRDYWxscyA+IDApIHtcblx0XHRcdFx0XHRkb0ZpcmU/LigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0b25EaWRSZW1vdmVMYXN0TGlzdGVuZXIoKSB7XG5cdFx0XHRcdGRvRmlyZSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0c3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0aWYgKCFkaXNwb3NhYmxlKSB7XG5cdFx0XHRfYWRkTGVha2FnZVRyYWNlTG9naWMob3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyPE8+KG9wdGlvbnMpO1xuXG5cdFx0ZGlzcG9zYWJsZT8uYWRkKGVtaXR0ZXIpO1xuXG5cdFx0cmV0dXJuIGVtaXR0ZXIuZXZlbnQ7XG5cdH1cblxuXHQvKipcblx0ICogRGVib3VuY2VzIGFuIGV2ZW50LCBmaXJpbmcgYWZ0ZXIgc29tZSBkZWxheSAoZGVmYXVsdD0wKSB3aXRoIGFuIGFycmF5IG9mIGFsbCBldmVudCBvcmlnaW5hbCBvYmplY3RzLlxuXHQgKlxuXHQgKiAqTk9URSogdGhhdCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gYEV2ZW50YCBhbmQgaXQgTVVTVCBiZSBjYWxsZWQgd2l0aCBhIGBEaXNwb3NhYmxlU3RvcmVgIHdoZW5ldmVyIHRoZSByZXR1cm5lZFxuXHQgKiBldmVudCBpcyBhY2Nlc3NpYmxlIHRvIFwidGhpcmQgcGFydGllc1wiLCBlLmcgdGhlIGV2ZW50IGlzIGEgcHVibGljIHByb3BlcnR5LiBPdGhlcndpc2UgYSBsZWFrZWQgbGlzdGVuZXIgb24gdGhlXG5cdCAqIHJldHVybmVkIGV2ZW50IGNhdXNlcyB0aGlzIHV0aWxpdHkgdG8gbGVhayBhIGxpc3RlbmVyIG9uIHRoZSBvcmlnaW5hbCBldmVudC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBhY2N1bXVsYXRlPFQ+KGV2ZW50OiBFdmVudDxUPiwgZGVsYXk6IG51bWJlciA9IDAsIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUW10+IHtcblx0XHRyZXR1cm4gRXZlbnQuZGVib3VuY2U8VCwgVFtdPihldmVudCwgKGxhc3QsIGUpID0+IHtcblx0XHRcdGlmICghbGFzdCkge1xuXHRcdFx0XHRyZXR1cm4gW2VdO1xuXHRcdFx0fVxuXHRcdFx0bGFzdC5wdXNoKGUpO1xuXHRcdFx0cmV0dXJuIGxhc3Q7XG5cdFx0fSwgZGVsYXksIHVuZGVmaW5lZCwgdHJ1ZSwgdW5kZWZpbmVkLCBkaXNwb3NhYmxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBGaWx0ZXJzIGFuIGV2ZW50IHN1Y2ggdGhhdCBzb21lIGNvbmRpdGlvbiBpcyBfbm90XyBtZXQgbW9yZSB0aGFuIG9uY2UgaW4gYSByb3csIGVmZmVjdGl2ZWx5IGVuc3VyaW5nIGR1cGxpY2F0ZVxuXHQgKiBldmVudCBvYmplY3RzIGZyb20gZGlmZmVyZW50IHNvdXJjZXMgZG8gbm90IGZpcmUgdGhlIHNhbWUgZXZlbnQgb2JqZWN0LlxuXHQgKlxuXHQgKiAqTk9URSogdGhhdCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gYEV2ZW50YCBhbmQgaXQgTVVTVCBiZSBjYWxsZWQgd2l0aCBhIGBEaXNwb3NhYmxlU3RvcmVgIHdoZW5ldmVyIHRoZSByZXR1cm5lZFxuXHQgKiBldmVudCBpcyBhY2Nlc3NpYmxlIHRvIFwidGhpcmQgcGFydGllc1wiLCBlLmcgdGhlIGV2ZW50IGlzIGEgcHVibGljIHByb3BlcnR5LiBPdGhlcndpc2UgYSBsZWFrZWQgbGlzdGVuZXIgb24gdGhlXG5cdCAqIHJldHVybmVkIGV2ZW50IGNhdXNlcyB0aGlzIHV0aWxpdHkgdG8gbGVhayBhIGxpc3RlbmVyIG9uIHRoZSBvcmlnaW5hbCBldmVudC5cblx0ICpcblx0ICogQHBhcmFtIGV2ZW50IFRoZSBldmVudCBzb3VyY2UgZm9yIHRoZSBuZXcgZXZlbnQuXG5cdCAqIEBwYXJhbSBlcXVhbHMgVGhlIGVxdWFsaXR5IGNvbmRpdGlvbi5cblx0ICogQHBhcmFtIGRpc3Bvc2FibGUgQSBkaXNwb3NhYmxlIHN0b3JlIHRvIGFkZCB0aGUgbmV3IEV2ZW50RW1pdHRlciB0by5cblx0ICpcblx0ICogQGV4YW1wbGVcblx0ICogYGBgXG5cdCAqIC8vIEZpcmUgb25seSBvbmUgdGltZSB3aGVuIGEgc2luZ2xlIHdpbmRvdyBpcyBvcGVuZWQgb3IgZm9jdXNlZFxuXHQgKiBFdmVudC5sYXRjaChFdmVudC5hbnkob25EaWRPcGVuV2luZG93LCBvbkRpZEZvY3VzV2luZG93KSlcblx0ICogYGBgXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gbGF0Y2g8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBlcXVhbHM6IChhOiBULCBiOiBUKSA9PiBib29sZWFuID0gKGEsIGIpID0+IGEgPT09IGIsIGRpc3Bvc2FibGU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUPiB7XG5cdFx0bGV0IGZpcnN0Q2FsbCA9IHRydWU7XG5cdFx0bGV0IGNhY2hlOiBUO1xuXG5cdFx0cmV0dXJuIGZpbHRlcihldmVudCwgdmFsdWUgPT4ge1xuXHRcdFx0Y29uc3Qgc2hvdWxkRW1pdCA9IGZpcnN0Q2FsbCB8fCAhZXF1YWxzKHZhbHVlLCBjYWNoZSk7XG5cdFx0XHRmaXJzdENhbGwgPSBmYWxzZTtcblx0XHRcdGNhY2hlID0gdmFsdWU7XG5cdFx0XHRyZXR1cm4gc2hvdWxkRW1pdDtcblx0XHR9LCBkaXNwb3NhYmxlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBTcGxpdHMgYW4gZXZlbnQgd2hvc2UgcGFyYW1ldGVyIGlzIGEgdW5pb24gdHlwZSBpbnRvIDIgc2VwYXJhdGUgZXZlbnRzIGZvciBlYWNoIHR5cGUgaW4gdGhlIHVuaW9uLlxuXHQgKlxuXHQgKiAqTk9URSogdGhhdCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gYEV2ZW50YCBhbmQgaXQgTVVTVCBiZSBjYWxsZWQgd2l0aCBhIGBEaXNwb3NhYmxlU3RvcmVgIHdoZW5ldmVyIHRoZSByZXR1cm5lZFxuXHQgKiBldmVudCBpcyBhY2Nlc3NpYmxlIHRvIFwidGhpcmQgcGFydGllc1wiLCBlLmcgdGhlIGV2ZW50IGlzIGEgcHVibGljIHByb3BlcnR5LiBPdGhlcndpc2UgYSBsZWFrZWQgbGlzdGVuZXIgb24gdGhlXG5cdCAqIHJldHVybmVkIGV2ZW50IGNhdXNlcyB0aGlzIHV0aWxpdHkgdG8gbGVhayBhIGxpc3RlbmVyIG9uIHRoZSBvcmlnaW5hbCBldmVudC5cblx0ICpcblx0ICogQGV4YW1wbGVcblx0ICogYGBgXG5cdCAqIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50RW1pdHRlcjxudW1iZXIgfCB1bmRlZmluZWQ+KCkuZXZlbnQ7XG5cdCAqIGNvbnN0IFtudW1iZXJFdmVudCwgdW5kZWZpbmVkRXZlbnRdID0gRXZlbnQuc3BsaXQoZXZlbnQsIGlzVW5kZWZpbmVkKTtcblx0ICogYGBgXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgc291cmNlIGZvciB0aGUgbmV3IGV2ZW50LlxuXHQgKiBAcGFyYW0gaXNUIEEgZnVuY3Rpb24gdGhhdCBkZXRlcm1pbmVzIHdoYXQgZXZlbnQgaXMgb2YgdGhlIGZpcnN0IHR5cGUuXG5cdCAqIEBwYXJhbSBkaXNwb3NhYmxlIEEgZGlzcG9zYWJsZSBzdG9yZSB0byBhZGQgdGhlIG5ldyBFdmVudEVtaXR0ZXIgdG8uXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gc3BsaXQ8VCwgVT4oZXZlbnQ6IEV2ZW50PFQgfCBVPiwgaXNUOiAoZTogVCB8IFUpID0+IGUgaXMgVCwgZGlzcG9zYWJsZT86IERpc3Bvc2FibGVTdG9yZSk6IFtFdmVudDxUPiwgRXZlbnQ8VT5dIHtcblx0XHRyZXR1cm4gW1xuXHRcdFx0RXZlbnQuZmlsdGVyKGV2ZW50LCBpc1QsIGRpc3Bvc2FibGUpLFxuXHRcdFx0RXZlbnQuZmlsdGVyKGV2ZW50LCBlID0+ICFpc1QoZSksIGRpc3Bvc2FibGUpIGFzIEV2ZW50PFU+LFxuXHRcdF07XG5cdH1cblxuXHQvKipcblx0ICogQnVmZmVycyBhbiBldmVudCB1bnRpbCBpdCBoYXMgYSBsaXN0ZW5lciBhdHRhY2hlZC5cblx0ICpcblx0ICogKk5PVEUqIHRoYXQgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGBFdmVudGAgYW5kIGl0IE1VU1QgYmUgY2FsbGVkIHdpdGggYSBgRGlzcG9zYWJsZVN0b3JlYCB3aGVuZXZlciB0aGUgcmV0dXJuZWRcblx0ICogZXZlbnQgaXMgYWNjZXNzaWJsZSB0byBcInRoaXJkIHBhcnRpZXNcIiwgZS5nIHRoZSBldmVudCBpcyBhIHB1YmxpYyBwcm9wZXJ0eS4gT3RoZXJ3aXNlIGEgbGVha2VkIGxpc3RlbmVyIG9uIHRoZVxuXHQgKiByZXR1cm5lZCBldmVudCBjYXVzZXMgdGhpcyB1dGlsaXR5IHRvIGxlYWsgYSBsaXN0ZW5lciBvbiB0aGUgb3JpZ2luYWwgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgc291cmNlIGZvciB0aGUgbmV3IGV2ZW50LlxuXHQgKiBAcGFyYW0gZmx1c2hBZnRlclRpbWVvdXQgRGV0ZXJtaW5lcyB3aGV0aGVyIHRvIGZsdXNoIHRoZSBidWZmZXIgYWZ0ZXIgYSB0aW1lb3V0IGltbWVkaWF0ZWx5IG9yIGFmdGVyIGFcblx0ICogYHNldFRpbWVvdXRgIHdoZW4gdGhlIGZpcnN0IGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkLlxuXHQgKiBAcGFyYW0gX2J1ZmZlciBJbnRlcm5hbDogQSBzb3VyY2UgZXZlbnQgYXJyYXkgdXNlZCBmb3IgdGVzdHMuXG5cdCAqXG5cdCAqIEBleGFtcGxlXG5cdCAqIGBgYFxuXHQgKiAvLyBTdGFydCBhY2N1bXVsYXRpbmcgZXZlbnRzLCB3aGVuIHRoZSBmaXJzdCBsaXN0ZW5lciBpcyBhdHRhY2hlZCwgZmx1c2hcblx0ICogLy8gdGhlIGV2ZW50IGFmdGVyIGEgdGltZW91dCBzdWNoIHRoYXQgbXVsdGlwbGUgbGlzdGVuZXJzIGF0dGFjaGVkIGJlZm9yZVxuXHQgKiAvLyB0aGUgdGltZW91dCB3b3VsZCByZWNlaXZlIHRoZSBldmVudFxuXHQgKiB0aGlzLm9uSW5zdGFsbEV4dGVuc2lvbiA9IEV2ZW50LmJ1ZmZlcihzZXJ2aWNlLm9uSW5zdGFsbEV4dGVuc2lvbiwgdHJ1ZSk7XG5cdCAqIGBgYFxuXHQgKi9cblx0ZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcjxUPihldmVudDogRXZlbnQ8VD4sIGZsdXNoQWZ0ZXJUaW1lb3V0ID0gZmFsc2UsIF9idWZmZXI6IFRbXSA9IFtdLCBkaXNwb3NhYmxlPzogRGlzcG9zYWJsZVN0b3JlKTogRXZlbnQ8VD4ge1xuXHRcdGxldCBidWZmZXI6IFRbXSB8IG51bGwgPSBfYnVmZmVyLnNsaWNlKCk7XG5cblx0XHRsZXQgbGlzdGVuZXI6IElEaXNwb3NhYmxlIHwgbnVsbCA9IGV2ZW50KGUgPT4ge1xuXHRcdFx0aWYgKGJ1ZmZlcikge1xuXHRcdFx0XHRidWZmZXIucHVzaChlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVtaXR0ZXIuZmlyZShlKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmIChkaXNwb3NhYmxlKSB7XG5cdFx0XHRkaXNwb3NhYmxlLmFkZChsaXN0ZW5lcik7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZmx1c2ggPSAoKSA9PiB7XG5cdFx0XHRidWZmZXI/LmZvckVhY2goZSA9PiBlbWl0dGVyLmZpcmUoZSkpO1xuXHRcdFx0YnVmZmVyID0gbnVsbDtcblx0XHR9O1xuXG5cdFx0Y29uc3QgZW1pdHRlciA9IG5ldyBFbWl0dGVyPFQ+KHtcblx0XHRcdG9uV2lsbEFkZEZpcnN0TGlzdGVuZXIoKSB7XG5cdFx0XHRcdGlmICghbGlzdGVuZXIpIHtcblx0XHRcdFx0XHRsaXN0ZW5lciA9IGV2ZW50KGUgPT4gZW1pdHRlci5maXJlKGUpKTtcblx0XHRcdFx0XHRpZiAoZGlzcG9zYWJsZSkge1xuXHRcdFx0XHRcdFx0ZGlzcG9zYWJsZS5hZGQobGlzdGVuZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0b25EaWRBZGRGaXJzdExpc3RlbmVyKCkge1xuXHRcdFx0XHRpZiAoYnVmZmVyKSB7XG5cdFx0XHRcdFx0aWYgKGZsdXNoQWZ0ZXJUaW1lb3V0KSB7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZsdXNoKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Zmx1c2goKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyKCkge1xuXHRcdFx0XHRpZiAobGlzdGVuZXIpIHtcblx0XHRcdFx0XHRsaXN0ZW5lci5kaXNwb3NlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdGVuZXIgPSBudWxsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKGRpc3Bvc2FibGUpIHtcblx0XHRcdGRpc3Bvc2FibGUuYWRkKGVtaXR0ZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBlbWl0dGVyLmV2ZW50O1xuXHR9XG5cdC8qKlxuXHQgKiBXcmFwcyB0aGUgZXZlbnQgaW4gYW4ge0BsaW5rIElDaGFpbmFibGVFdmVudH0sIGFsbG93aW5nIGEgbW9yZSBmdW5jdGlvbmFsIHByb2dyYW1taW5nIHN0eWxlLlxuXHQgKlxuXHQgKiBAZXhhbXBsZVxuXHQgKiBgYGBcblx0ICogLy8gTm9ybWFsXG5cdCAqIGNvbnN0IG9uRW50ZXJQcmVzc05vcm1hbCA9IEV2ZW50LmZpbHRlcihcblx0ICogICBFdmVudC5tYXAob25LZXlQcmVzcy5ldmVudCwgZSA9PiBuZXcgU3RhbmRhcmRLZXlib2FyZEV2ZW50KGUpKSxcblx0ICogICBlLmtleUNvZGUgPT09IEtleUNvZGUuRW50ZXJcblx0ICogKS5ldmVudDtcblx0ICpcblx0ICogLy8gVXNpbmcgY2hhaW5cblx0ICogY29uc3Qgb25FbnRlclByZXNzQ2hhaW4gPSBFdmVudC5jaGFpbihvbktleVByZXNzLmV2ZW50LCAkID0+ICRcblx0ICogICAubWFwKGUgPT4gbmV3IFN0YW5kYXJkS2V5Ym9hcmRFdmVudChlKSlcblx0ICogICAuZmlsdGVyKGUgPT4gZS5rZXlDb2RlID09PSBLZXlDb2RlLkVudGVyKVxuXHQgKiApO1xuXHQgKiBgYGBcblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBjaGFpbjxULCBSPihldmVudDogRXZlbnQ8VD4sIHN5dGhlbnNpemU6ICgkOiBJQ2hhaW5hYmxlU3l0aGVuc2lzPFQ+KSA9PiBJQ2hhaW5hYmxlU3l0aGVuc2lzPFI+KTogRXZlbnQ8Uj4ge1xuXHRcdGNvbnN0IGZuOiBFdmVudDxSPiA9IChsaXN0ZW5lciwgdGhpc0FyZ3MsIGRpc3Bvc2FibGVzKSA9PiB7XG5cdFx0XHRjb25zdCBjcyA9IHN5dGhlbnNpemUobmV3IENoYWluYWJsZVN5bnRoZXNpcygpKSBhcyBDaGFpbmFibGVTeW50aGVzaXM7XG5cdFx0XHRyZXR1cm4gZXZlbnQoZnVuY3Rpb24gKHZhbHVlKSB7XG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGNzLmV2YWx1YXRlKHZhbHVlKTtcblx0XHRcdFx0aWYgKHJlc3VsdCAhPT0gSGFsdENoYWluYWJsZSkge1xuXHRcdFx0XHRcdGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIHJlc3VsdCk7XG5cdFx0XHRcdH1cblx0XHRcdH0sIHVuZGVmaW5lZCwgZGlzcG9zYWJsZXMpO1xuXHRcdH07XG5cblx0XHRyZXR1cm4gZm47XG5cdH1cblxuXHRjb25zdCBIYWx0Q2hhaW5hYmxlID0gU3ltYm9sKCdIYWx0Q2hhaW5hYmxlJyk7XG5cblx0Y2xhc3MgQ2hhaW5hYmxlU3ludGhlc2lzIGltcGxlbWVudHMgSUNoYWluYWJsZVN5dGhlbnNpczxhbnk+IHtcblx0XHRwcml2YXRlIHJlYWRvbmx5IHN0ZXBzOiAoKGlucHV0OiBhbnkpID0+IGFueSlbXSA9IFtdO1xuXG5cdFx0bWFwPE8+KGZuOiAoaTogYW55KSA9PiBPKTogdGhpcyB7XG5cdFx0XHR0aGlzLnN0ZXBzLnB1c2goZm4pO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Zm9yRWFjaChmbjogKGk6IGFueSkgPT4gdm9pZCk6IHRoaXMge1xuXHRcdFx0dGhpcy5zdGVwcy5wdXNoKHYgPT4ge1xuXHRcdFx0XHRmbih2KTtcblx0XHRcdFx0cmV0dXJuIHY7XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGZpbHRlcihmbjogKGU6IGFueSkgPT4gYm9vbGVhbik6IHRoaXMge1xuXHRcdFx0dGhpcy5zdGVwcy5wdXNoKHYgPT4gZm4odikgPyB2IDogSGFsdENoYWluYWJsZSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRyZWR1Y2U8Uj4obWVyZ2U6IChsYXN0OiBSIHwgdW5kZWZpbmVkLCBldmVudDogYW55KSA9PiBSLCBpbml0aWFsPzogUiB8IHVuZGVmaW5lZCk6IHRoaXMge1xuXHRcdFx0bGV0IGxhc3QgPSBpbml0aWFsO1xuXHRcdFx0dGhpcy5zdGVwcy5wdXNoKHYgPT4ge1xuXHRcdFx0XHRsYXN0ID0gbWVyZ2UobGFzdCwgdik7XG5cdFx0XHRcdHJldHVybiBsYXN0O1xuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRsYXRjaChlcXVhbHM6IChhOiBhbnksIGI6IGFueSkgPT4gYm9vbGVhbiA9IChhLCBiKSA9PiBhID09PSBiKTogQ2hhaW5hYmxlU3ludGhlc2lzIHtcblx0XHRcdGxldCBmaXJzdENhbGwgPSB0cnVlO1xuXHRcdFx0bGV0IGNhY2hlOiBhbnk7XG5cdFx0XHR0aGlzLnN0ZXBzLnB1c2godmFsdWUgPT4ge1xuXHRcdFx0XHRjb25zdCBzaG91bGRFbWl0ID0gZmlyc3RDYWxsIHx8ICFlcXVhbHModmFsdWUsIGNhY2hlKTtcblx0XHRcdFx0Zmlyc3RDYWxsID0gZmFsc2U7XG5cdFx0XHRcdGNhY2hlID0gdmFsdWU7XG5cdFx0XHRcdHJldHVybiBzaG91bGRFbWl0ID8gdmFsdWUgOiBIYWx0Q2hhaW5hYmxlO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdHB1YmxpYyBldmFsdWF0ZSh2YWx1ZTogYW55KSB7XG5cdFx0XHRmb3IgKGNvbnN0IHN0ZXAgb2YgdGhpcy5zdGVwcykge1xuXHRcdFx0XHR2YWx1ZSA9IHN0ZXAodmFsdWUpO1xuXHRcdFx0XHRpZiAodmFsdWUgPT09IEhhbHRDaGFpbmFibGUpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXHR9XG5cblx0ZXhwb3J0IGludGVyZmFjZSBJQ2hhaW5hYmxlU3l0aGVuc2lzPFQ+IHtcblx0XHRtYXA8Tz4oZm46IChpOiBUKSA9PiBPKTogSUNoYWluYWJsZVN5dGhlbnNpczxPPjtcblx0XHRmb3JFYWNoKGZuOiAoaTogVCkgPT4gdm9pZCk6IElDaGFpbmFibGVTeXRoZW5zaXM8VD47XG5cdFx0ZmlsdGVyPFIgZXh0ZW5kcyBUPihmbjogKGU6IFQpID0+IGUgaXMgUik6IElDaGFpbmFibGVTeXRoZW5zaXM8Uj47XG5cdFx0ZmlsdGVyKGZuOiAoZTogVCkgPT4gYm9vbGVhbik6IElDaGFpbmFibGVTeXRoZW5zaXM8VD47XG5cdFx0cmVkdWNlPFI+KG1lcmdlOiAobGFzdDogUiwgZXZlbnQ6IFQpID0+IFIsIGluaXRpYWw6IFIpOiBJQ2hhaW5hYmxlU3l0aGVuc2lzPFI+O1xuXHRcdHJlZHVjZTxSPihtZXJnZTogKGxhc3Q6IFIgfCB1bmRlZmluZWQsIGV2ZW50OiBUKSA9PiBSKTogSUNoYWluYWJsZVN5dGhlbnNpczxSPjtcblx0XHRsYXRjaChlcXVhbHM/OiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbik6IElDaGFpbmFibGVTeXRoZW5zaXM8VD47XG5cdH1cblxuXHRleHBvcnQgaW50ZXJmYWNlIE5vZGVFdmVudEVtaXR0ZXIge1xuXHRcdG9uKGV2ZW50OiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHVua25vd247XG5cdFx0cmVtb3ZlTGlzdGVuZXIoZXZlbnQ6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6IEZ1bmN0aW9uKTogdW5rbm93bjtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIHtAbGluayBFdmVudH0gZnJvbSBhIG5vZGUgZXZlbnQgZW1pdHRlci5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBmcm9tTm9kZUV2ZW50RW1pdHRlcjxUPihlbWl0dGVyOiBOb2RlRXZlbnRFbWl0dGVyLCBldmVudE5hbWU6IHN0cmluZywgbWFwOiAoLi4uYXJnczogYW55W10pID0+IFQgPSBpZCA9PiBpZCk6IEV2ZW50PFQ+IHtcblx0XHRjb25zdCBmbiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gcmVzdWx0LmZpcmUobWFwKC4uLmFyZ3MpKTtcblx0XHRjb25zdCBvbkZpcnN0TGlzdGVuZXJBZGQgPSAoKSA9PiBlbWl0dGVyLm9uKGV2ZW50TmFtZSwgZm4pO1xuXHRcdGNvbnN0IG9uTGFzdExpc3RlbmVyUmVtb3ZlID0gKCkgPT4gZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGZuKTtcblx0XHRjb25zdCByZXN1bHQgPSBuZXcgRW1pdHRlcjxUPih7IG9uV2lsbEFkZEZpcnN0TGlzdGVuZXI6IG9uRmlyc3RMaXN0ZW5lckFkZCwgb25EaWRSZW1vdmVMYXN0TGlzdGVuZXI6IG9uTGFzdExpc3RlbmVyUmVtb3ZlIH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5ldmVudDtcblx0fVxuXG5cdGV4cG9ydCBpbnRlcmZhY2UgRE9NRXZlbnRFbWl0dGVyIHtcblx0XHRhZGRFdmVudExpc3RlbmVyKGV2ZW50OiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiBGdW5jdGlvbik6IHZvaWQ7XG5cdFx0cmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudDogc3RyaW5nIHwgc3ltYm9sLCBsaXN0ZW5lcjogRnVuY3Rpb24pOiB2b2lkO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4ge0BsaW5rIEV2ZW50fSBmcm9tIGEgRE9NIGV2ZW50IGVtaXR0ZXIuXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gZnJvbURPTUV2ZW50RW1pdHRlcjxUPihlbWl0dGVyOiBET01FdmVudEVtaXR0ZXIsIGV2ZW50TmFtZTogc3RyaW5nLCBtYXA6ICguLi5hcmdzOiBhbnlbXSkgPT4gVCA9IGlkID0+IGlkKTogRXZlbnQ8VD4ge1xuXHRcdGNvbnN0IGZuID0gKC4uLmFyZ3M6IGFueVtdKSA9PiByZXN1bHQuZmlyZShtYXAoLi4uYXJncykpO1xuXHRcdGNvbnN0IG9uRmlyc3RMaXN0ZW5lckFkZCA9ICgpID0+IGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKTtcblx0XHRjb25zdCBvbkxhc3RMaXN0ZW5lclJlbW92ZSA9ICgpID0+IGVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKTtcblx0XHRjb25zdCByZXN1bHQgPSBuZXcgRW1pdHRlcjxUPih7IG9uV2lsbEFkZEZpcnN0TGlzdGVuZXI6IG9uRmlyc3RMaXN0ZW5lckFkZCwgb25EaWRSZW1vdmVMYXN0TGlzdGVuZXI6IG9uTGFzdExpc3RlbmVyUmVtb3ZlIH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5ldmVudDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgcHJvbWlzZSBvdXQgb2YgYW4gZXZlbnQsIHVzaW5nIHRoZSB7QGxpbmsgRXZlbnQub25jZX0gaGVscGVyLlxuXHQgKi9cblx0ZXhwb3J0IGZ1bmN0aW9uIHRvUHJvbWlzZTxUPihldmVudDogRXZlbnQ8VD4pOiBQcm9taXNlPFQ+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBvbmNlKGV2ZW50KShyZXNvbHZlKSk7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBldmVudCBvdXQgb2YgYSBwcm9taXNlIHRoYXQgZmlyZXMgb25jZSB3aGVuIHRoZSBwcm9taXNlIGlzXG5cdCAqIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgcHJvbWlzZSBvciBgdW5kZWZpbmVkYC5cblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBmcm9tUHJvbWlzZTxUPihwcm9taXNlOiBQcm9taXNlPFQ+KTogRXZlbnQ8VCB8IHVuZGVmaW5lZD4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IG5ldyBFbWl0dGVyPFQgfCB1bmRlZmluZWQ+KCk7XG5cblx0XHRwcm9taXNlLnRoZW4ocmVzID0+IHtcblx0XHRcdHJlc3VsdC5maXJlKHJlcyk7XG5cdFx0fSwgKCkgPT4ge1xuXHRcdFx0cmVzdWx0LmZpcmUodW5kZWZpbmVkKTtcblx0XHR9KS5maW5hbGx5KCgpID0+IHtcblx0XHRcdHJlc3VsdC5kaXNwb3NlKCk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcmVzdWx0LmV2ZW50O1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGZvcndhcmRpbmcgYW4gZXZlbnQgdG8gYW5vdGhlciBlbWl0dGVyIHdoaWNoXG5cdCAqIGltcHJvdmVzIHJlYWRhYmlsaXR5LmFsbG93cyBFdmVudC5mb3J3YXJkKGV2ZW50LCBlbWl0dGVyKSBpbnN0ZWFkIG9mIGBldmVudChlID0+IGVtaXR0ZXIuZmlyZShlKSlgLlxuXHQgKiBAcGFyYW0gZnJvbSBUaGUgZXZlbnQgdG8gZm9yd2FyZC5cblx0ICogQHBhcmFtIHRvIFRoZSBlbWl0dGVyIHRvIGZvcndhcmQgdGhlIGV2ZW50IHRvLlxuXHQgKiBAZXhhbXBsZVxuXHQgKiBFdmVudC5mb3J3YXJkKGV2ZW50LCBlbWl0dGVyKTtcblx0ICogLy8gZXF1aXZhbGVudCB0b1xuXHQgKiBldmVudChlID0+IGVtaXR0ZXIuZmlyZShlKSk7XG5cdCAqIC8vIGVxdWl2YWxlbnQgdG9cblx0ICogZXZlbnQoZW1pdHRlci5maXJlLCBlbWl0dGVyKTtcblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBmb3J3YXJkPFQ+KGZyb206IEV2ZW50PFQ+LCB0bzogRW1pdHRlcjxUPik6IElEaXNwb3NhYmxlIHtcblx0XHRyZXR1cm4gZnJvbShlID0+IHRvLmZpcmUoZSkpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEFkZHMgYSBsaXN0ZW5lciB0byBhbiBldmVudCBhbmQgY2FsbHMgdGhlIGxpc3RlbmVyIGltbWVkaWF0ZWx5IHdpdGggdW5kZWZpbmVkIGFzIHRoZSBldmVudCBvYmplY3QuXG5cdCAqXG5cdCAqIEBleGFtcGxlXG5cdCAqIGBgYFxuXHQgKiAvLyBJbml0aWFsaXplIHRoZSBVSSBhbmQgdXBkYXRlIGl0IHdoZW4gZGF0YUNoYW5nZUV2ZW50IGZpcmVzXG5cdCAqIHJ1bkFuZFN1YnNjcmliZShkYXRhQ2hhbmdlRXZlbnQsICgpID0+IHRoaXMuX3VwZGF0ZVVJKCkpO1xuXHQgKiBgYGBcblx0ICovXG5cdGV4cG9ydCBmdW5jdGlvbiBydW5BbmRTdWJzY3JpYmU8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBoYW5kbGVyOiAoZTogVCkgPT4gYW55LCBpbml0aWFsOiBUKTogSURpc3Bvc2FibGU7XG5cdGV4cG9ydCBmdW5jdGlvbiBydW5BbmRTdWJzY3JpYmU8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBoYW5kbGVyOiAoZTogVCB8IHVuZGVmaW5lZCkgPT4gYW55KTogSURpc3Bvc2FibGU7XG5cdGV4cG9ydCBmdW5jdGlvbiBydW5BbmRTdWJzY3JpYmU8VD4oZXZlbnQ6IEV2ZW50PFQ+LCBoYW5kbGVyOiAoZTogVCB8IHVuZGVmaW5lZCkgPT4gYW55LCBpbml0aWFsPzogVCk6IElEaXNwb3NhYmxlIHtcblx0XHRoYW5kbGVyKGluaXRpYWwpO1xuXHRcdHJldHVybiBldmVudChlID0+IGhhbmRsZXIoZSkpO1xuXHR9XG5cblx0Y2xhc3MgRW1pdHRlck9ic2VydmVyPFQ+IGltcGxlbWVudHMgSU9ic2VydmVyIHtcblxuXHRcdHJlYWRvbmx5IGVtaXR0ZXI6IEVtaXR0ZXI8VD47XG5cblx0XHRwcml2YXRlIF9jb3VudGVyID0gMDtcblx0XHRwcml2YXRlIF9oYXNDaGFuZ2VkID0gZmFsc2U7XG5cblx0XHRjb25zdHJ1Y3RvcihyZWFkb25seSBfb2JzZXJ2YWJsZTogSU9ic2VydmFibGU8VCwgYW55Piwgc3RvcmU6IERpc3Bvc2FibGVTdG9yZSB8IHVuZGVmaW5lZCkge1xuXHRcdFx0Y29uc3Qgb3B0aW9uczogRW1pdHRlck9wdGlvbnMgPSB7XG5cdFx0XHRcdG9uV2lsbEFkZEZpcnN0TGlzdGVuZXI6ICgpID0+IHtcblx0XHRcdFx0XHRfb2JzZXJ2YWJsZS5hZGRPYnNlcnZlcih0aGlzKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0b25EaWRSZW1vdmVMYXN0TGlzdGVuZXI6ICgpID0+IHtcblx0XHRcdFx0XHRfb2JzZXJ2YWJsZS5yZW1vdmVPYnNlcnZlcih0aGlzKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGlmICghc3RvcmUpIHtcblx0XHRcdFx0X2FkZExlYWthZ2VUcmFjZUxvZ2ljKG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXI8VD4ob3B0aW9ucyk7XG5cdFx0XHRpZiAoc3RvcmUpIHtcblx0XHRcdFx0c3RvcmUuYWRkKHRoaXMuZW1pdHRlcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0YmVnaW5VcGRhdGU8VD4oX29ic2VydmFibGU6IElPYnNlcnZhYmxlPFQsIHZvaWQ+KTogdm9pZCB7XG5cdFx0XHQvLyBhc3NlcnQoX29ic2VydmFibGUgPT09IHRoaXMub2JzKTtcblx0XHRcdHRoaXMuX2NvdW50ZXIrKztcblx0XHR9XG5cblx0XHRoYW5kbGVQb3NzaWJsZUNoYW5nZTxUPihfb2JzZXJ2YWJsZTogSU9ic2VydmFibGU8VCwgdW5rbm93bj4pOiB2b2lkIHtcblx0XHRcdC8vIGFzc2VydChfb2JzZXJ2YWJsZSA9PT0gdGhpcy5vYnMpO1xuXHRcdH1cblxuXHRcdGhhbmRsZUNoYW5nZTxULCBUQ2hhbmdlPihfb2JzZXJ2YWJsZTogSU9ic2VydmFibGU8VCwgVENoYW5nZT4sIF9jaGFuZ2U6IFRDaGFuZ2UpOiB2b2lkIHtcblx0XHRcdC8vIGFzc2VydChfb2JzZXJ2YWJsZSA9PT0gdGhpcy5vYnMpO1xuXHRcdFx0dGhpcy5faGFzQ2hhbmdlZCA9IHRydWU7XG5cdFx0fVxuXG5cdFx0ZW5kVXBkYXRlPFQ+KF9vYnNlcnZhYmxlOiBJT2JzZXJ2YWJsZTxULCB2b2lkPik6IHZvaWQge1xuXHRcdFx0Ly8gYXNzZXJ0KF9vYnNlcnZhYmxlID09PSB0aGlzLm9icyk7XG5cdFx0XHR0aGlzLl9jb3VudGVyLS07XG5cdFx0XHRpZiAodGhpcy5fY291bnRlciA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLl9vYnNlcnZhYmxlLnJlcG9ydENoYW5nZXMoKTtcblx0XHRcdFx0aWYgKHRoaXMuX2hhc0NoYW5nZWQpIHtcblx0XHRcdFx0XHR0aGlzLl9oYXNDaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0dGhpcy5lbWl0dGVyLmZpcmUodGhpcy5fb2JzZXJ2YWJsZS5nZXQoKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBldmVudCBlbWl0dGVyIHRoYXQgaXMgZmlyZWQgd2hlbiB0aGUgb2JzZXJ2YWJsZSBjaGFuZ2VzLlxuXHQgKiBFYWNoIGxpc3RlbmVycyBzdWJzY3JpYmVzIHRvIHRoZSBlbWl0dGVyLlxuXHQgKi9cblx0ZXhwb3J0IGZ1bmN0aW9uIGZyb21PYnNlcnZhYmxlPFQ+KG9iczogSU9ic2VydmFibGU8VCwgYW55Piwgc3RvcmU/OiBEaXNwb3NhYmxlU3RvcmUpOiBFdmVudDxUPiB7XG5cdFx0Y29uc3Qgb2JzZXJ2ZXIgPSBuZXcgRW1pdHRlck9ic2VydmVyKG9icywgc3RvcmUpO1xuXHRcdHJldHVybiBvYnNlcnZlci5lbWl0dGVyLmV2ZW50O1xuXHR9XG5cblx0LyoqXG5cdCAqIEVhY2ggbGlzdGVuZXIgaXMgYXR0YWNoZWQgdG8gdGhlIG9ic2VydmFibGUgZGlyZWN0bHkuXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gZnJvbU9ic2VydmFibGVMaWdodChvYnNlcnZhYmxlOiBJT2JzZXJ2YWJsZTxhbnk+KTogRXZlbnQ8dm9pZD4ge1xuXHRcdHJldHVybiAobGlzdGVuZXIsIHRoaXNBcmdzLCBkaXNwb3NhYmxlcykgPT4ge1xuXHRcdFx0bGV0IGNvdW50ID0gMDtcblx0XHRcdGxldCBkaWRDaGFuZ2UgPSBmYWxzZTtcblx0XHRcdGNvbnN0IG9ic2VydmVyOiBJT2JzZXJ2ZXIgPSB7XG5cdFx0XHRcdGJlZ2luVXBkYXRlKCkge1xuXHRcdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVuZFVwZGF0ZSgpIHtcblx0XHRcdFx0XHRjb3VudC0tO1xuXHRcdFx0XHRcdGlmIChjb3VudCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0b2JzZXJ2YWJsZS5yZXBvcnRDaGFuZ2VzKCk7XG5cdFx0XHRcdFx0XHRpZiAoZGlkQ2hhbmdlKSB7XG5cdFx0XHRcdFx0XHRcdGRpZENoYW5nZSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRsaXN0ZW5lci5jYWxsKHRoaXNBcmdzKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGhhbmRsZVBvc3NpYmxlQ2hhbmdlKCkge1xuXHRcdFx0XHRcdC8vIG5vb3Bcblx0XHRcdFx0fSxcblx0XHRcdFx0aGFuZGxlQ2hhbmdlKCkge1xuXHRcdFx0XHRcdGRpZENoYW5nZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRvYnNlcnZhYmxlLmFkZE9ic2VydmVyKG9ic2VydmVyKTtcblx0XHRcdG9ic2VydmFibGUucmVwb3J0Q2hhbmdlcygpO1xuXHRcdFx0Y29uc3QgZGlzcG9zYWJsZSA9IHtcblx0XHRcdFx0ZGlzcG9zZSgpIHtcblx0XHRcdFx0XHRvYnNlcnZhYmxlLnJlbW92ZU9ic2VydmVyKG9ic2VydmVyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0aWYgKGRpc3Bvc2FibGVzIGluc3RhbmNlb2YgRGlzcG9zYWJsZVN0b3JlKSB7XG5cdFx0XHRcdGRpc3Bvc2FibGVzLmFkZChkaXNwb3NhYmxlKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkaXNwb3NhYmxlcykpIHtcblx0XHRcdFx0ZGlzcG9zYWJsZXMucHVzaChkaXNwb3NhYmxlKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRpc3Bvc2FibGU7XG5cdFx0fTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVtaXR0ZXJPcHRpb25zIHtcblx0LyoqXG5cdCAqIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQncyBjYWxsZWQgKmJlZm9yZSogdGhlIHZlcnkgZmlyc3QgbGlzdGVuZXIgaXMgYWRkZWRcblx0ICovXG5cdG9uV2lsbEFkZEZpcnN0TGlzdGVuZXI/OiBGdW5jdGlvbjtcblx0LyoqXG5cdCAqIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQncyBjYWxsZWQgKmFmdGVyKiB0aGUgdmVyeSBmaXJzdCBsaXN0ZW5lciBpcyBhZGRlZFxuXHQgKi9cblx0b25EaWRBZGRGaXJzdExpc3RlbmVyPzogRnVuY3Rpb247XG5cdC8qKlxuXHQgKiBPcHRpb25hbCBmdW5jdGlvbiB0aGF0J3MgY2FsbGVkIGFmdGVyIGEgbGlzdGVuZXIgaXMgYWRkZWRcblx0ICovXG5cdG9uRGlkQWRkTGlzdGVuZXI/OiBGdW5jdGlvbjtcblx0LyoqXG5cdCAqIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQncyBjYWxsZWQgKmFmdGVyKiByZW1vdmUgdGhlIHZlcnkgbGFzdCBsaXN0ZW5lclxuXHQgKi9cblx0b25EaWRSZW1vdmVMYXN0TGlzdGVuZXI/OiBGdW5jdGlvbjtcblx0LyoqXG5cdCAqIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQncyBjYWxsZWQgKmJlZm9yZSogYSBsaXN0ZW5lciBpcyByZW1vdmVkXG5cdCAqL1xuXHRvbldpbGxSZW1vdmVMaXN0ZW5lcj86IEZ1bmN0aW9uO1xuXHQvKipcblx0ICogT3B0aW9uYWwgZnVuY3Rpb24gdGhhdCdzIGNhbGxlZCB3aGVuIGEgbGlzdGVuZXIgdGhyb3dzIGFuIGVycm9yLiBEZWZhdWx0cyB0b1xuXHQgKiB7QGxpbmsgb25VbmV4cGVjdGVkRXJyb3J9XG5cdCAqL1xuXHRvbkxpc3RlbmVyRXJyb3I/OiAoZTogYW55KSA9PiB2b2lkO1xuXHQvKipcblx0ICogTnVtYmVyIG9mIGxpc3RlbmVycyB0aGF0IGFyZSBhbGxvd2VkIGJlZm9yZSBhc3N1bWluZyBhIGxlYWsuIERlZmF1bHQgdG9cblx0ICogYSBnbG9iYWxseSBjb25maWd1cmVkIHZhbHVlXG5cdCAqXG5cdCAqIEBzZWUgc2V0R2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGRcblx0ICovXG5cdGxlYWtXYXJuaW5nVGhyZXNob2xkPzogbnVtYmVyO1xuXHQvKipcblx0ICogUGFzcyBpbiBhIGRlbGl2ZXJ5IHF1ZXVlLCB3aGljaCBpcyB1c2VmdWwgZm9yIGVuc3VyaW5nXG5cdCAqIGluIG9yZGVyIGV2ZW50IGRlbGl2ZXJ5IGFjcm9zcyBtdWx0aXBsZSBlbWl0dGVycy5cblx0ICovXG5cdGRlbGl2ZXJ5UXVldWU/OiBFdmVudERlbGl2ZXJ5UXVldWU7XG5cblx0LyoqIE9OTFkgZW5hYmxlIHRoaXMgZHVyaW5nIGRldmVsb3BtZW50ICovXG5cdF9wcm9mTmFtZT86IHN0cmluZztcbn1cblxuXG5leHBvcnQgY2xhc3MgRXZlbnRQcm9maWxpbmcge1xuXG5cdHN0YXRpYyByZWFkb25seSBhbGwgPSBuZXcgU2V0PEV2ZW50UHJvZmlsaW5nPigpO1xuXG5cdHByaXZhdGUgc3RhdGljIF9pZFBvb2wgPSAwO1xuXG5cdHJlYWRvbmx5IG5hbWU6IHN0cmluZztcblx0cHVibGljIGxpc3RlbmVyQ291bnQ6IG51bWJlciA9IDA7XG5cdHB1YmxpYyBpbnZvY2F0aW9uQ291bnQgPSAwO1xuXHRwdWJsaWMgZWxhcHNlZE92ZXJhbGwgPSAwO1xuXHRwdWJsaWMgZHVyYXRpb25zOiBudW1iZXJbXSA9IFtdO1xuXG5cdHByaXZhdGUgX3N0b3BXYXRjaD86IFN0b3BXYXRjaDtcblxuXHRjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcpIHtcblx0XHR0aGlzLm5hbWUgPSBgJHtuYW1lfV8ke0V2ZW50UHJvZmlsaW5nLl9pZFBvb2wrK31gO1xuXHRcdEV2ZW50UHJvZmlsaW5nLmFsbC5hZGQodGhpcyk7XG5cdH1cblxuXHRzdGFydChsaXN0ZW5lckNvdW50OiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLl9zdG9wV2F0Y2ggPSBuZXcgU3RvcFdhdGNoKCk7XG5cdFx0dGhpcy5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcblx0fVxuXG5cdHN0b3AoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX3N0b3BXYXRjaCkge1xuXHRcdFx0Y29uc3QgZWxhcHNlZCA9IHRoaXMuX3N0b3BXYXRjaC5lbGFwc2VkKCk7XG5cdFx0XHR0aGlzLmR1cmF0aW9ucy5wdXNoKGVsYXBzZWQpO1xuXHRcdFx0dGhpcy5lbGFwc2VkT3ZlcmFsbCArPSBlbGFwc2VkO1xuXHRcdFx0dGhpcy5pbnZvY2F0aW9uQ291bnQgKz0gMTtcblx0XHRcdHRoaXMuX3N0b3BXYXRjaCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cbn1cblxubGV0IF9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZCA9IC0xO1xuZXhwb3J0IGZ1bmN0aW9uIHNldEdsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkKG46IG51bWJlcik6IElEaXNwb3NhYmxlIHtcblx0Y29uc3Qgb2xkVmFsdWUgPSBfZ2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGQ7XG5cdF9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZCA9IG47XG5cdHJldHVybiB7XG5cdFx0ZGlzcG9zZSgpIHtcblx0XHRcdF9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZCA9IG9sZFZhbHVlO1xuXHRcdH1cblx0fTtcbn1cblxuY2xhc3MgTGVha2FnZU1vbml0b3Ige1xuXG5cdHByaXZhdGUgc3RhdGljIF9pZFBvb2wgPSAxO1xuXG5cdHByaXZhdGUgX3N0YWNrczogTWFwPHN0cmluZywgbnVtYmVyPiB8IHVuZGVmaW5lZDtcblx0cHJpdmF0ZSBfd2FybkNvdW50ZG93bjogbnVtYmVyID0gMDtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IF9lcnJvckhhbmRsZXI6IChlcnI6IEVycm9yKSA9PiB2b2lkLFxuXHRcdHJlYWRvbmx5IHRocmVzaG9sZDogbnVtYmVyLFxuXHRcdHJlYWRvbmx5IG5hbWU6IHN0cmluZyA9IChMZWFrYWdlTW9uaXRvci5faWRQb29sKyspLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgzLCAnMCcpXG5cdCkgeyB9XG5cblx0ZGlzcG9zZSgpOiB2b2lkIHtcblx0XHR0aGlzLl9zdGFja3M/LmNsZWFyKCk7XG5cdH1cblxuXHRjaGVjayhzdGFjazogU3RhY2t0cmFjZSwgbGlzdGVuZXJDb3VudDogbnVtYmVyKTogdW5kZWZpbmVkIHwgKCgpID0+IHZvaWQpIHtcblxuXHRcdGNvbnN0IHRocmVzaG9sZCA9IHRoaXMudGhyZXNob2xkO1xuXHRcdGlmICh0aHJlc2hvbGQgPD0gMCB8fCBsaXN0ZW5lckNvdW50IDwgdGhyZXNob2xkKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdGlmICghdGhpcy5fc3RhY2tzKSB7XG5cdFx0XHR0aGlzLl9zdGFja3MgPSBuZXcgTWFwKCk7XG5cdFx0fVxuXHRcdGNvbnN0IGNvdW50ID0gKHRoaXMuX3N0YWNrcy5nZXQoc3RhY2sudmFsdWUpIHx8IDApO1xuXHRcdHRoaXMuX3N0YWNrcy5zZXQoc3RhY2sudmFsdWUsIGNvdW50ICsgMSk7XG5cdFx0dGhpcy5fd2FybkNvdW50ZG93biAtPSAxO1xuXG5cdFx0aWYgKHRoaXMuX3dhcm5Db3VudGRvd24gPD0gMCkge1xuXHRcdFx0Ly8gb25seSB3YXJuIG9uIGZpcnN0IGV4Y2VlZCBhbmQgdGhlbiBldmVyeSB0aW1lIHRoZSBsaW1pdFxuXHRcdFx0Ly8gaXMgZXhjZWVkZWQgYnkgNTAlIGFnYWluXG5cdFx0XHR0aGlzLl93YXJuQ291bnRkb3duID0gdGhyZXNob2xkICogMC41O1xuXG5cdFx0XHRjb25zdCBbdG9wU3RhY2ssIHRvcENvdW50XSA9IHRoaXMuZ2V0TW9zdEZyZXF1ZW50U3RhY2soKSE7XG5cdFx0XHRjb25zdCBtZXNzYWdlID0gYFske3RoaXMubmFtZX1dIHBvdGVudGlhbCBsaXN0ZW5lciBMRUFLIGRldGVjdGVkLCBoYXZpbmcgJHtsaXN0ZW5lckNvdW50fSBsaXN0ZW5lcnMgYWxyZWFkeS4gTU9TVCBmcmVxdWVudCBsaXN0ZW5lciAoJHt0b3BDb3VudH0pOmA7XG5cdFx0XHRjb25zb2xlLndhcm4obWVzc2FnZSk7XG5cdFx0XHRjb25zb2xlLndhcm4odG9wU3RhY2shKTtcblxuXHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgTGlzdGVuZXJMZWFrRXJyb3IobWVzc2FnZSwgdG9wU3RhY2spO1xuXHRcdFx0dGhpcy5fZXJyb3JIYW5kbGVyKGVycm9yKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gKCkgPT4ge1xuXHRcdFx0Y29uc3QgY291bnQgPSAodGhpcy5fc3RhY2tzIS5nZXQoc3RhY2sudmFsdWUpIHx8IDApO1xuXHRcdFx0dGhpcy5fc3RhY2tzIS5zZXQoc3RhY2sudmFsdWUsIGNvdW50IC0gMSk7XG5cdFx0fTtcblx0fVxuXG5cdGdldE1vc3RGcmVxdWVudFN0YWNrKCk6IFtzdHJpbmcsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuXHRcdGlmICghdGhpcy5fc3RhY2tzKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRsZXQgdG9wU3RhY2s6IFtzdHJpbmcsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cdFx0bGV0IHRvcENvdW50OiBudW1iZXIgPSAwO1xuXHRcdGZvciAoY29uc3QgW3N0YWNrLCBjb3VudF0gb2YgdGhpcy5fc3RhY2tzKSB7XG5cdFx0XHRpZiAoIXRvcFN0YWNrIHx8IHRvcENvdW50IDwgY291bnQpIHtcblx0XHRcdFx0dG9wU3RhY2sgPSBbc3RhY2ssIGNvdW50XTtcblx0XHRcdFx0dG9wQ291bnQgPSBjb3VudDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRvcFN0YWNrO1xuXHR9XG59XG5cbmNsYXNzIFN0YWNrdHJhY2Uge1xuXG5cdHN0YXRpYyBjcmVhdGUoKSB7XG5cdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKCk7XG5cdFx0cmV0dXJuIG5ldyBTdGFja3RyYWNlKGVyci5zdGFjayA/PyAnJyk7XG5cdH1cblxuXHRwcml2YXRlIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHZhbHVlOiBzdHJpbmcpIHsgfVxuXG5cdHByaW50KCkge1xuXHRcdGNvbnNvbGUud2Fybih0aGlzLnZhbHVlLnNwbGl0KCdcXG4nKS5zbGljZSgyKS5qb2luKCdcXG4nKSk7XG5cdH1cbn1cblxuLy8gZXJyb3IgdGhhdCBpcyBsb2dnZWQgd2hlbiBnb2luZyBvdmVyIHRoZSBjb25maWd1cmVkIGxpc3RlbmVyIHRocmVzaG9sZFxuZXhwb3J0IGNsYXNzIExpc3RlbmVyTGVha0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xuXHRjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YWNrOiBzdHJpbmcpIHtcblx0XHRzdXBlcihtZXNzYWdlKTtcblx0XHR0aGlzLm5hbWUgPSAnTGlzdGVuZXJMZWFrRXJyb3InO1xuXHRcdHRoaXMuc3RhY2sgPSBzdGFjaztcblx0fVxufVxuXG4vLyBTRVZFUkUgZXJyb3IgdGhhdCBpcyBsb2dnZWQgd2hlbiBoYXZpbmcgZ29uZSB3YXkgb3ZlciB0aGUgY29uZmlndXJlZCBsaXN0ZW5lclxuLy8gdGhyZXNob2xkIHNvIHRoYXQgdGhlIGVtaXR0ZXIgcmVmdXNlcyB0byBhY2NlcHQgbW9yZSBsaXN0ZW5lcnNcbmV4cG9ydCBjbGFzcyBMaXN0ZW5lclJlZnVzYWxFcnJvciBleHRlbmRzIEVycm9yIHtcblx0Y29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGFjazogc3RyaW5nKSB7XG5cdFx0c3VwZXIobWVzc2FnZSk7XG5cdFx0dGhpcy5uYW1lID0gJ0xpc3RlbmVyUmVmdXNhbEVycm9yJztcblx0XHR0aGlzLnN0YWNrID0gc3RhY2s7XG5cdH1cbn1cblxubGV0IGlkID0gMDtcbmNsYXNzIFVuaXF1ZUNvbnRhaW5lcjxUPiB7XG5cdHN0YWNrPzogU3RhY2t0cmFjZTtcblx0cHVibGljIGlkID0gaWQrKztcblx0Y29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHZhbHVlOiBUKSB7IH1cbn1cbmNvbnN0IGNvbXBhY3Rpb25UaHJlc2hvbGQgPSAyO1xuXG50eXBlIExpc3RlbmVyQ29udGFpbmVyPFQ+ID0gVW5pcXVlQ29udGFpbmVyPChkYXRhOiBUKSA9PiB2b2lkPjtcbnR5cGUgTGlzdGVuZXJPckxpc3RlbmVyczxUPiA9IChMaXN0ZW5lckNvbnRhaW5lcjxUPiB8IHVuZGVmaW5lZClbXSB8IExpc3RlbmVyQ29udGFpbmVyPFQ+O1xuXG5jb25zdCBmb3JFYWNoTGlzdGVuZXIgPSA8VD4obGlzdGVuZXJzOiBMaXN0ZW5lck9yTGlzdGVuZXJzPFQ+LCBmbjogKGM6IExpc3RlbmVyQ29udGFpbmVyPFQ+KSA9PiB2b2lkKSA9PiB7XG5cdGlmIChsaXN0ZW5lcnMgaW5zdGFuY2VvZiBVbmlxdWVDb250YWluZXIpIHtcblx0XHRmbihsaXN0ZW5lcnMpO1xuXHR9IGVsc2Uge1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBsID0gbGlzdGVuZXJzW2ldO1xuXHRcdFx0aWYgKGwpIHtcblx0XHRcdFx0Zm4obCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG5cbmxldCBfbGlzdGVuZXJGaW5hbGl6ZXJzOiBGaW5hbGl6YXRpb25SZWdpc3RyeTxzdHJpbmc+IHwgdW5kZWZpbmVkO1xuXG5pZiAoX2VuYWJsZUxpc3RlbmVyR0NlZFdhcm5pbmcpIHtcblx0Y29uc3QgbGVha3M6IHN0cmluZ1tdID0gW107XG5cblx0c2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdGlmIChsZWFrcy5sZW5ndGggPT09IDApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc29sZS53YXJuKCdbTEVBS0lORyBMSVNURU5FUlNdIEdDXFwnZWQgdGhlc2UgbGlzdGVuZXJzIHRoYXQgd2VyZSBOT1QgeWV0IGRpc3Bvc2VkOicpO1xuXHRcdGNvbnNvbGUud2FybihsZWFrcy5qb2luKCdcXG4nKSk7XG5cdFx0bGVha3MubGVuZ3RoID0gMDtcblx0fSwgMzAwMCk7XG5cblx0X2xpc3RlbmVyRmluYWxpemVycyA9IG5ldyBGaW5hbGl6YXRpb25SZWdpc3RyeShoZWxkVmFsdWUgPT4ge1xuXHRcdGlmICh0eXBlb2YgaGVsZFZhbHVlID09PSAnc3RyaW5nJykge1xuXHRcdFx0bGVha3MucHVzaChoZWxkVmFsdWUpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKlxuICogVGhlIEVtaXR0ZXIgY2FuIGJlIHVzZWQgdG8gZXhwb3NlIGFuIEV2ZW50IHRvIHRoZSBwdWJsaWNcbiAqIHRvIGZpcmUgaXQgZnJvbSB0aGUgaW5zaWRlcy5cbiAqIFNhbXBsZTpcblx0Y2xhc3MgRG9jdW1lbnQge1xuXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfb25EaWRDaGFuZ2UgPSBuZXcgRW1pdHRlcjwodmFsdWU6c3RyaW5nKT0+YW55PigpO1xuXG5cdFx0cHVibGljIG9uRGlkQ2hhbmdlID0gdGhpcy5fb25EaWRDaGFuZ2UuZXZlbnQ7XG5cblx0XHQvLyBnZXR0ZXItc3R5bGVcblx0XHQvLyBnZXQgb25EaWRDaGFuZ2UoKTogRXZlbnQ8KHZhbHVlOnN0cmluZyk9PmFueT4ge1xuXHRcdC8vIFx0cmV0dXJuIHRoaXMuX29uRGlkQ2hhbmdlLmV2ZW50O1xuXHRcdC8vIH1cblxuXHRcdHByaXZhdGUgX2RvSXQoKSB7XG5cdFx0XHQvLy4uLlxuXHRcdFx0dGhpcy5fb25EaWRDaGFuZ2UuZmlyZSh2YWx1ZSk7XG5cdFx0fVxuXHR9XG4gKi9cbmV4cG9ydCBjbGFzcyBFbWl0dGVyPFQ+IHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zPzogRW1pdHRlck9wdGlvbnM7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2xlYWthZ2VNb24/OiBMZWFrYWdlTW9uaXRvcjtcblx0cHJpdmF0ZSByZWFkb25seSBfcGVyZk1vbj86IEV2ZW50UHJvZmlsaW5nO1xuXHRwcml2YXRlIF9kaXNwb3NlZD86IHRydWU7XG5cdHByaXZhdGUgX2V2ZW50PzogRXZlbnQ8VD47XG5cblx0LyoqXG5cdCAqIEEgbGlzdGVuZXIsIG9yIGxpc3Qgb2YgbGlzdGVuZXJzLiBBIHNpbmdsZSBsaXN0ZW5lciBpcyB0aGUgbW9zdCBjb21tb25cblx0ICogZm9yIGV2ZW50IGVtaXR0ZXJzICgjMTg1Nzg5KSwgc28gd2Ugb3B0aW1pemUgdGhhdCBzcGVjaWFsIGNhc2UgdG8gYXZvaWRcblx0ICogd3JhcHBpbmcgaXQgaW4gYW4gYXJyYXkgKGp1c3QgbGlrZSBOb2RlLmpzIGl0c2VsZi4pXG5cdCAqXG5cdCAqIEEgbGlzdCBvZiBsaXN0ZW5lcnMgbmV2ZXIgJ2Rvd25ncmFkZXMnIGJhY2sgdG8gYSBwbGFpbiBmdW5jdGlvbiBpZlxuXHQgKiBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQsIGZvciB0d28gcmVhc29uczpcblx0ICpcblx0ICogIDEuIFRoYXQncyBjb21wbGljYXRlZCAoZXNwZWNpYWxseSB3aXRoIHRoZSBkZWxpdmVyeVF1ZXVlKVxuXHQgKiAgMi4gQSBsaXN0ZW5lciB3aXRoID4xIGxpc3RlbmVyIGlzIGxpa2VseSB0byBoYXZlID4xIGxpc3RlbmVyIGFnYWluIGF0XG5cdCAqICAgICBzb21lIHBvaW50LCBhbmQgc3dhcHBpbmcgYmV0d2VlbiBhcnJheXMgYW5kIGZ1bmN0aW9ucyBtYXlbY2l0YXRpb24gbmVlZGVkXVxuXHQgKiAgICAgaW50cm9kdWNlIHVubmVjZXNzYXJ5IHdvcmsgYW5kIGdhcmJhZ2UuXG5cdCAqXG5cdCAqIFRoZSBhcnJheSBsaXN0ZW5lcnMgY2FuIGJlICdzcGFyc2UnLCB0byBhdm9pZCByZWFsbG9jYXRpbmcgdGhlIGFycmF5XG5cdCAqIHdoZW5ldmVyIGFueSBsaXN0ZW5lciBpcyBhZGRlZCBvciByZW1vdmVkLiBJZiBtb3JlIHRoYW4gYDEgLyBjb21wYWN0aW9uVGhyZXNob2xkYFxuXHQgKiBvZiB0aGUgYXJyYXkgaXMgZW1wdHksIG9ubHkgdGhlbiBpcyBpdCByZXNpemVkLlxuXHQgKi9cblx0cHJvdGVjdGVkIF9saXN0ZW5lcnM/OiBMaXN0ZW5lck9yTGlzdGVuZXJzPFQ+O1xuXG5cdC8qKlxuXHQgKiBBbHdheXMgdG8gYmUgZGVmaW5lZCBpZiBfbGlzdGVuZXJzIGlzIGFuIGFycmF5LiBJdCdzIG5vIGxvbmdlciBhIHRydWVcblx0ICogcXVldWUsIGJ1dCBob2xkcyB0aGUgZGlzcGF0Y2hpbmcgJ3N0YXRlJy4gSWYgYGZpcmUoKWAgaXMgY2FsbGVkIG9uIGFuXG5cdCAqIGVtaXR0ZXIsIGFueSB3b3JrIGxlZnQgaW4gdGhlIF9kZWxpdmVyeVF1ZXVlIGlzIGZpbmlzaGVkIGZpcnN0LlxuXHQgKi9cblx0cHJpdmF0ZSBfZGVsaXZlcnlRdWV1ZT86IEV2ZW50RGVsaXZlcnlRdWV1ZVByaXZhdGU7XG5cdHByb3RlY3RlZCBfc2l6ZSA9IDA7XG5cblx0Y29uc3RydWN0b3Iob3B0aW9ucz86IEVtaXR0ZXJPcHRpb25zKSB7XG5cdFx0dGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5fbGVha2FnZU1vbiA9IChfZ2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGQgPiAwIHx8IHRoaXMuX29wdGlvbnM/LmxlYWtXYXJuaW5nVGhyZXNob2xkKVxuXHRcdFx0PyBuZXcgTGVha2FnZU1vbml0b3Iob3B0aW9ucz8ub25MaXN0ZW5lckVycm9yID8/IG9uVW5leHBlY3RlZEVycm9yLCB0aGlzLl9vcHRpb25zPy5sZWFrV2FybmluZ1RocmVzaG9sZCA/PyBfZ2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGQpIDpcblx0XHRcdHVuZGVmaW5lZDtcblx0XHR0aGlzLl9wZXJmTW9uID0gdGhpcy5fb3B0aW9ucz8uX3Byb2ZOYW1lID8gbmV3IEV2ZW50UHJvZmlsaW5nKHRoaXMuX29wdGlvbnMuX3Byb2ZOYW1lKSA6IHVuZGVmaW5lZDtcblx0XHR0aGlzLl9kZWxpdmVyeVF1ZXVlID0gdGhpcy5fb3B0aW9ucz8uZGVsaXZlcnlRdWV1ZSBhcyBFdmVudERlbGl2ZXJ5UXVldWVQcml2YXRlIHwgdW5kZWZpbmVkO1xuXHR9XG5cblx0ZGlzcG9zZSgpIHtcblx0XHRpZiAoIXRoaXMuX2Rpc3Bvc2VkKSB7XG5cdFx0XHR0aGlzLl9kaXNwb3NlZCA9IHRydWU7XG5cblx0XHRcdC8vIEl0IGlzIGJhZCB0byBoYXZlIGxpc3RlbmVycyBhdCB0aGUgdGltZSBvZiBkaXNwb3NpbmcgYW4gZW1pdHRlciwgaXQgaXMgd29yc3QgdG8gaGF2ZSBsaXN0ZW5lcnMga2VlcCB0aGUgZW1pdHRlclxuXHRcdFx0Ly8gYWxpdmUgdmlhIHRoZSByZWZlcmVuY2UgdGhhdCdzIGVtYmVkZGVkIGluIHRoZWlyIGRpc3Bvc2FibGVzLiBUaGVyZWZvcmUgd2UgbG9vcCBvdmVyIGFsbCByZW1haW5pbmcgbGlzdGVuZXJzIGFuZFxuXHRcdFx0Ly8gdW5zZXQgdGhlaXIgc3Vic2NyaXB0aW9ucy9kaXNwb3NhYmxlcy4gTG9vcGluZyBhbmQgYmxhbWluZyByZW1haW5pbmcgbGlzdGVuZXJzIGlzIGRvbmUgb24gbmV4dCB0aWNrIGJlY2F1c2UgdGhlXG5cdFx0XHQvLyB0aGUgZm9sbG93aW5nIHByb2dyYW1taW5nIHBhdHRlcm4gaXMgdmVyeSBwb3B1bGFyOlxuXHRcdFx0Ly9cblx0XHRcdC8vIGNvbnN0IHNvbWVNb2RlbCA9IHRoaXMuX2Rpc3Bvc2FibGVzLmFkZChuZXcgTW9kZWxPYmplY3QoKSk7IC8vICgxKSBjcmVhdGUgYW5kIHJlZ2lzdGVyIG1vZGVsXG5cdFx0XHQvLyB0aGlzLl9kaXNwb3NhYmxlcy5hZGQoc29tZU1vZGVsLm9uRGlkQ2hhbmdlKCgpID0+IHsgLi4uIH0pOyAvLyAoMikgc3Vic2NyaWJlIGFuZCByZWdpc3RlciBtb2RlbC1ldmVudCBsaXN0ZW5lclxuXHRcdFx0Ly8gLi4ubGF0ZXIuLi5cblx0XHRcdC8vIHRoaXMuX2Rpc3Bvc2FibGVzLmRpc3Bvc2UoKTsgZGlzcG9zZXMgKDEpIHRoZW4gKDIpOiBkb24ndCB3YXJuIGFmdGVyICgxKSBidXQgYWZ0ZXIgdGhlIFwib3ZlcmFsbCBkaXNwb3NlXCIgaXMgZG9uZVxuXG5cdFx0XHRpZiAodGhpcy5fZGVsaXZlcnlRdWV1ZT8uY3VycmVudCA9PT0gdGhpcykge1xuXHRcdFx0XHR0aGlzLl9kZWxpdmVyeVF1ZXVlLnJlc2V0KCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG5cdFx0XHRcdGlmIChfZW5hYmxlRGlzcG9zZVdpdGhMaXN0ZW5lcldhcm5pbmcpIHtcblx0XHRcdFx0XHRjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cdFx0XHRcdFx0cXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Zm9yRWFjaExpc3RlbmVyKGxpc3RlbmVycywgbCA9PiBsLnN0YWNrPy5wcmludCgpKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRoaXMuX2xpc3RlbmVycyA9IHVuZGVmaW5lZDtcblx0XHRcdFx0dGhpcy5fc2l6ZSA9IDA7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9vcHRpb25zPy5vbkRpZFJlbW92ZUxhc3RMaXN0ZW5lcj8uKCk7XG5cdFx0XHR0aGlzLl9sZWFrYWdlTW9uPy5kaXNwb3NlKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEZvciB0aGUgcHVibGljIHRvIGFsbG93IHRvIHN1YnNjcmliZVxuXHQgKiB0byBldmVudHMgZnJvbSB0aGlzIEVtaXR0ZXJcblx0ICovXG5cdGdldCBldmVudCgpOiBFdmVudDxUPiB7XG5cdFx0dGhpcy5fZXZlbnQgPz89IChjYWxsYmFjazogKGU6IFQpID0+IGFueSwgdGhpc0FyZ3M/OiBhbnksIGRpc3Bvc2FibGVzPzogSURpc3Bvc2FibGVbXSB8IERpc3Bvc2FibGVTdG9yZSkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuX2xlYWthZ2VNb24gJiYgdGhpcy5fc2l6ZSA+IHRoaXMuX2xlYWthZ2VNb24udGhyZXNob2xkICoqIDIpIHtcblx0XHRcdFx0Y29uc3QgbWVzc2FnZSA9IGBbJHt0aGlzLl9sZWFrYWdlTW9uLm5hbWV9XSBSRUZVU0VTIHRvIGFjY2VwdCBuZXcgbGlzdGVuZXJzIGJlY2F1c2UgaXQgZXhjZWVkZWQgaXRzIHRocmVzaG9sZCBieSBmYXIgKCR7dGhpcy5fc2l6ZX0gdnMgJHt0aGlzLl9sZWFrYWdlTW9uLnRocmVzaG9sZH0pYDtcblx0XHRcdFx0Y29uc29sZS53YXJuKG1lc3NhZ2UpO1xuXG5cdFx0XHRcdGNvbnN0IHR1cGxlID0gdGhpcy5fbGVha2FnZU1vbi5nZXRNb3N0RnJlcXVlbnRTdGFjaygpID8/IFsnVU5LTk9XTiBzdGFjaycsIC0xXTtcblx0XHRcdFx0Y29uc3QgZXJyb3IgPSBuZXcgTGlzdGVuZXJSZWZ1c2FsRXJyb3IoYCR7bWVzc2FnZX0uIEhJTlQ6IFN0YWNrIHNob3dzIG1vc3QgZnJlcXVlbnQgbGlzdGVuZXIgKCR7dHVwbGVbMV19LXRpbWVzKWAsIHR1cGxlWzBdKTtcblx0XHRcdFx0Y29uc3QgZXJyb3JIYW5kbGVyID0gdGhpcy5fb3B0aW9ucz8ub25MaXN0ZW5lckVycm9yIHx8IG9uVW5leHBlY3RlZEVycm9yO1xuXHRcdFx0XHRlcnJvckhhbmRsZXIoZXJyb3IpO1xuXG5cdFx0XHRcdHJldHVybiBEaXNwb3NhYmxlLk5vbmU7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLl9kaXNwb3NlZCkge1xuXHRcdFx0XHQvLyB0b2RvOiBzaG91bGQgd2Ugd2FybiBpZiBhIGxpc3RlbmVyIGlzIGFkZGVkIHRvIGEgZGlzcG9zZWQgZW1pdHRlcj8gVGhpcyBoYXBwZW5zIG9mdGVuXG5cdFx0XHRcdHJldHVybiBEaXNwb3NhYmxlLk5vbmU7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzQXJncykge1xuXHRcdFx0XHRjYWxsYmFjayA9IGNhbGxiYWNrLmJpbmQodGhpc0FyZ3MpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBjb250YWluZWQgPSBuZXcgVW5pcXVlQ29udGFpbmVyKGNhbGxiYWNrKTtcblxuXHRcdFx0bGV0IHJlbW92ZU1vbml0b3I6IEZ1bmN0aW9uIHwgdW5kZWZpbmVkO1xuXHRcdFx0bGV0IHN0YWNrOiBTdGFja3RyYWNlIHwgdW5kZWZpbmVkO1xuXHRcdFx0aWYgKHRoaXMuX2xlYWthZ2VNb24gJiYgdGhpcy5fc2l6ZSA+PSBNYXRoLmNlaWwodGhpcy5fbGVha2FnZU1vbi50aHJlc2hvbGQgKiAwLjIpKSB7XG5cdFx0XHRcdC8vIGNoZWNrIGFuZCByZWNvcmQgdGhpcyBlbWl0dGVyIGZvciBwb3RlbnRpYWwgbGVha2FnZVxuXHRcdFx0XHRjb250YWluZWQuc3RhY2sgPSBTdGFja3RyYWNlLmNyZWF0ZSgpO1xuXHRcdFx0XHRyZW1vdmVNb25pdG9yID0gdGhpcy5fbGVha2FnZU1vbi5jaGVjayhjb250YWluZWQuc3RhY2ssIHRoaXMuX3NpemUgKyAxKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKF9lbmFibGVEaXNwb3NlV2l0aExpc3RlbmVyV2FybmluZykge1xuXHRcdFx0XHRjb250YWluZWQuc3RhY2sgPSBzdGFjayA/PyBTdGFja3RyYWNlLmNyZWF0ZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuXHRcdFx0XHR0aGlzLl9vcHRpb25zPy5vbldpbGxBZGRGaXJzdExpc3RlbmVyPy4odGhpcyk7XG5cdFx0XHRcdHRoaXMuX2xpc3RlbmVycyA9IGNvbnRhaW5lZDtcblx0XHRcdFx0dGhpcy5fb3B0aW9ucz8ub25EaWRBZGRGaXJzdExpc3RlbmVyPy4odGhpcyk7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuX2xpc3RlbmVycyBpbnN0YW5jZW9mIFVuaXF1ZUNvbnRhaW5lcikge1xuXHRcdFx0XHR0aGlzLl9kZWxpdmVyeVF1ZXVlID8/PSBuZXcgRXZlbnREZWxpdmVyeVF1ZXVlUHJpdmF0ZSgpO1xuXHRcdFx0XHR0aGlzLl9saXN0ZW5lcnMgPSBbdGhpcy5fbGlzdGVuZXJzLCBjb250YWluZWRdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fbGlzdGVuZXJzLnB1c2goY29udGFpbmVkKTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5fc2l6ZSsrO1xuXG5cblx0XHRcdGNvbnN0IHJlc3VsdCA9IHRvRGlzcG9zYWJsZSgoKSA9PiB7XG5cdFx0XHRcdF9saXN0ZW5lckZpbmFsaXplcnM/LnVucmVnaXN0ZXIocmVzdWx0KTtcblx0XHRcdFx0cmVtb3ZlTW9uaXRvcj8uKCk7XG5cdFx0XHRcdHRoaXMuX3JlbW92ZUxpc3RlbmVyKGNvbnRhaW5lZCk7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChkaXNwb3NhYmxlcyBpbnN0YW5jZW9mIERpc3Bvc2FibGVTdG9yZSkge1xuXHRcdFx0XHRkaXNwb3NhYmxlcy5hZGQocmVzdWx0KTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkaXNwb3NhYmxlcykpIHtcblx0XHRcdFx0ZGlzcG9zYWJsZXMucHVzaChyZXN1bHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoX2xpc3RlbmVyRmluYWxpemVycykge1xuXHRcdFx0XHRjb25zdCBzdGFjayA9IG5ldyBFcnJvcigpLnN0YWNrIS5zcGxpdCgnXFxuJykuc2xpY2UoMiwgMykuam9pbignXFxuJykudHJpbSgpO1xuXHRcdFx0XHRjb25zdCBtYXRjaCA9IC8oZmlsZTp8dnNjb2RlLWZpbGU6XFwvXFwvdnNjb2RlLWFwcCk/KFxcL1teOl0qOlxcZCs6XFxkKykvLmV4ZWMoc3RhY2spO1xuXHRcdFx0XHRfbGlzdGVuZXJGaW5hbGl6ZXJzLnJlZ2lzdGVyKHJlc3VsdCwgbWF0Y2g/LlsyXSA/PyBzdGFjaywgcmVzdWx0KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIHRoaXMuX2V2ZW50O1xuXHR9XG5cblx0cHJpdmF0ZSBfcmVtb3ZlTGlzdGVuZXIobGlzdGVuZXI6IExpc3RlbmVyQ29udGFpbmVyPFQ+KSB7XG5cdFx0dGhpcy5fb3B0aW9ucz8ub25XaWxsUmVtb3ZlTGlzdGVuZXI/Lih0aGlzKTtcblxuXHRcdGlmICghdGhpcy5fbGlzdGVuZXJzKSB7XG5cdFx0XHRyZXR1cm47IC8vIGV4cGVjdGVkIGlmIGEgbGlzdGVuZXIgZ2V0cyBkaXNwb3NlZFxuXHRcdH1cblxuXHRcdGlmICh0aGlzLl9zaXplID09PSAxKSB7XG5cdFx0XHR0aGlzLl9saXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cdFx0XHR0aGlzLl9vcHRpb25zPy5vbkRpZFJlbW92ZUxhc3RMaXN0ZW5lcj8uKHRoaXMpO1xuXHRcdFx0dGhpcy5fc2l6ZSA9IDA7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gc2l6ZSA+IDEgd2hpY2ggcmVxdWlyZXMgdGhhdCBsaXN0ZW5lcnMgYmUgYSBsaXN0OlxuXHRcdGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycyBhcyAoTGlzdGVuZXJDb250YWluZXI8VD4gfCB1bmRlZmluZWQpW107XG5cblx0XHRjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcblx0XHRpZiAoaW5kZXggPT09IC0xKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZGlzcG9zZWQ/JywgdGhpcy5fZGlzcG9zZWQpO1xuXHRcdFx0Y29uc29sZS5sb2coJ3NpemU/JywgdGhpcy5fc2l6ZSk7XG5cdFx0XHRjb25zb2xlLmxvZygnYXJyPycsIEpTT04uc3RyaW5naWZ5KHRoaXMuX2xpc3RlbmVycykpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0ZWQgdG8gZGlzcG9zZSB1bmtub3duIGxpc3RlbmVyJyk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fc2l6ZS0tO1xuXHRcdGxpc3RlbmVyc1tpbmRleF0gPSB1bmRlZmluZWQ7XG5cblx0XHRjb25zdCBhZGp1c3REZWxpdmVyeVF1ZXVlID0gdGhpcy5fZGVsaXZlcnlRdWV1ZSEuY3VycmVudCA9PT0gdGhpcztcblx0XHRpZiAodGhpcy5fc2l6ZSAqIGNvbXBhY3Rpb25UaHJlc2hvbGQgPD0gbGlzdGVuZXJzLmxlbmd0aCkge1xuXHRcdFx0bGV0IG4gPSAwO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGxpc3RlbmVyc1tpXSkge1xuXHRcdFx0XHRcdGxpc3RlbmVyc1tuKytdID0gbGlzdGVuZXJzW2ldO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGFkanVzdERlbGl2ZXJ5UXVldWUpIHtcblx0XHRcdFx0XHR0aGlzLl9kZWxpdmVyeVF1ZXVlIS5lbmQtLTtcblx0XHRcdFx0XHRpZiAobiA8IHRoaXMuX2RlbGl2ZXJ5UXVldWUhLmkpIHtcblx0XHRcdFx0XHRcdHRoaXMuX2RlbGl2ZXJ5UXVldWUhLmktLTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGxpc3RlbmVycy5sZW5ndGggPSBuO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX2RlbGl2ZXIobGlzdGVuZXI6IHVuZGVmaW5lZCB8IFVuaXF1ZUNvbnRhaW5lcjwodmFsdWU6IFQpID0+IHZvaWQ+LCB2YWx1ZTogVCkge1xuXHRcdGlmICghbGlzdGVuZXIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCBlcnJvckhhbmRsZXIgPSB0aGlzLl9vcHRpb25zPy5vbkxpc3RlbmVyRXJyb3IgfHwgb25VbmV4cGVjdGVkRXJyb3I7XG5cdFx0aWYgKCFlcnJvckhhbmRsZXIpIHtcblx0XHRcdGxpc3RlbmVyLnZhbHVlKHZhbHVlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0bGlzdGVuZXIudmFsdWUodmFsdWUpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGVycm9ySGFuZGxlcihlKTtcblx0XHR9XG5cdH1cblxuXHQvKiogRGVsaXZlcnMgaXRlbXMgaW4gdGhlIHF1ZXVlLiBBc3N1bWVzIHRoZSBxdWV1ZSBpcyByZWFkeSB0byBnby4gKi9cblx0cHJpdmF0ZSBfZGVsaXZlclF1ZXVlKGRxOiBFdmVudERlbGl2ZXJ5UXVldWVQcml2YXRlKSB7XG5cdFx0Y29uc3QgbGlzdGVuZXJzID0gZHEuY3VycmVudCEuX2xpc3RlbmVycyEgYXMgKExpc3RlbmVyQ29udGFpbmVyPFQ+IHwgdW5kZWZpbmVkKVtdO1xuXHRcdHdoaWxlIChkcS5pIDwgZHEuZW5kKSB7XG5cdFx0XHQvLyBpbXBvcnRhbnQ6IGRxLmkgaXMgaW5jcmVtZW50ZWQgYmVmb3JlIGNhbGxpbmcgZGVsaXZlcigpIGJlY2F1c2UgaXQgbWlnaHQgcmVlbnRlciBkZWxpdmVyUXVldWUoKVxuXHRcdFx0dGhpcy5fZGVsaXZlcihsaXN0ZW5lcnNbZHEuaSsrXSwgZHEudmFsdWUgYXMgVCk7XG5cdFx0fVxuXHRcdGRxLnJlc2V0KCk7XG5cdH1cblxuXHQvKipcblx0ICogVG8gYmUga2VwdCBwcml2YXRlIHRvIGZpcmUgYW4gZXZlbnQgdG9cblx0ICogc3Vic2NyaWJlcnNcblx0ICovXG5cdGZpcmUoZXZlbnQ6IFQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fZGVsaXZlcnlRdWV1ZT8uY3VycmVudCkge1xuXHRcdFx0dGhpcy5fZGVsaXZlclF1ZXVlKHRoaXMuX2RlbGl2ZXJ5UXVldWUpO1xuXHRcdFx0dGhpcy5fcGVyZk1vbj8uc3RvcCgpOyAvLyBsYXN0IGZpcmUoKSB3aWxsIGhhdmUgc3RhcnRpbmcgcGVyZm1vbiwgc3RvcCBpdCBiZWZvcmUgc3RhcnRpbmcgdGhlIG5leHQgZGlzcGF0Y2hcblx0XHR9XG5cblx0XHR0aGlzLl9wZXJmTW9uPy5zdGFydCh0aGlzLl9zaXplKTtcblxuXHRcdGlmICghdGhpcy5fbGlzdGVuZXJzKSB7XG5cdFx0XHQvLyBuby1vcFxuXHRcdH0gZWxzZSBpZiAodGhpcy5fbGlzdGVuZXJzIGluc3RhbmNlb2YgVW5pcXVlQ29udGFpbmVyKSB7XG5cdFx0XHR0aGlzLl9kZWxpdmVyKHRoaXMuX2xpc3RlbmVycywgZXZlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBkcSA9IHRoaXMuX2RlbGl2ZXJ5UXVldWUhO1xuXHRcdFx0ZHEuZW5xdWV1ZSh0aGlzLCBldmVudCwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aCk7XG5cdFx0XHR0aGlzLl9kZWxpdmVyUXVldWUoZHEpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3BlcmZNb24/LnN0b3AoKTtcblx0fVxuXG5cdGhhc0xpc3RlbmVycygpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fc2l6ZSA+IDA7XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFdmVudERlbGl2ZXJ5UXVldWUge1xuXHRfaXNFdmVudERlbGl2ZXJ5UXVldWU6IHRydWU7XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVFdmVudERlbGl2ZXJ5UXVldWUgPSAoKTogRXZlbnREZWxpdmVyeVF1ZXVlID0+IG5ldyBFdmVudERlbGl2ZXJ5UXVldWVQcml2YXRlKCk7XG5cbmNsYXNzIEV2ZW50RGVsaXZlcnlRdWV1ZVByaXZhdGUgaW1wbGVtZW50cyBFdmVudERlbGl2ZXJ5UXVldWUge1xuXHRkZWNsYXJlIF9pc0V2ZW50RGVsaXZlcnlRdWV1ZTogdHJ1ZTtcblxuXHQvKipcblx0ICogSW5kZXggaW4gY3VycmVudCdzIGxpc3RlbmVyIGxpc3QuXG5cdCAqL1xuXHRwdWJsaWMgaSA9IC0xO1xuXG5cdC8qKlxuXHQgKiBUaGUgbGFzdCBpbmRleCBpbiB0aGUgbGlzdGVuZXIncyBsaXN0IHRvIGRlbGl2ZXIuXG5cdCAqL1xuXHRwdWJsaWMgZW5kID0gMDtcblxuXHQvKipcblx0ICogRW1pdHRlciBjdXJyZW50bHkgYmVpbmcgZGlzcGF0Y2hlZCBvbi4gRW1pdHRlci5fbGlzdGVuZXJzIGlzIGFsd2F5cyBhbiBhcnJheS5cblx0ICovXG5cdHB1YmxpYyBjdXJyZW50PzogRW1pdHRlcjxhbnk+O1xuXHQvKipcblx0ICogQ3VycmVudGx5IGVtaXR0aW5nIHZhbHVlLiBEZWZpbmVkIHdoZW5ldmVyIGBjdXJyZW50YCBpcy5cblx0ICovXG5cdHB1YmxpYyB2YWx1ZT86IHVua25vd247XG5cblx0cHVibGljIGVucXVldWU8VD4oZW1pdHRlcjogRW1pdHRlcjxUPiwgdmFsdWU6IFQsIGVuZDogbnVtYmVyKSB7XG5cdFx0dGhpcy5pID0gMDtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLmN1cnJlbnQgPSBlbWl0dGVyO1xuXHRcdHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0fVxuXG5cdHB1YmxpYyByZXNldCgpIHtcblx0XHR0aGlzLmkgPSB0aGlzLmVuZDsgLy8gZm9yY2UgYW55IGN1cnJlbnQgZW1pc3Npb24gbG9vcCB0byBzdG9wLCBtYWlubHkgZm9yIGR1cmluZyBkaXNwb3NlXG5cdFx0dGhpcy5jdXJyZW50ID0gdW5kZWZpbmVkO1xuXHRcdHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJV2FpdFVudGlsIHtcblx0dG9rZW46IENhbmNlbGxhdGlvblRva2VuO1xuXHR3YWl0VW50aWwodGhlbmFibGU6IFByb21pc2U8dW5rbm93bj4pOiB2b2lkO1xufVxuXG5leHBvcnQgdHlwZSBJV2FpdFVudGlsRGF0YTxUPiA9IE9taXQ8T21pdDxULCAnd2FpdFVudGlsJz4sICd0b2tlbic+O1xuXG5leHBvcnQgY2xhc3MgQXN5bmNFbWl0dGVyPFQgZXh0ZW5kcyBJV2FpdFVudGlsPiBleHRlbmRzIEVtaXR0ZXI8VD4ge1xuXG5cdHByaXZhdGUgX2FzeW5jRGVsaXZlcnlRdWV1ZT86IExpbmtlZExpc3Q8WyhldjogVCkgPT4gdm9pZCwgSVdhaXRVbnRpbERhdGE8VD5dPjtcblxuXHRhc3luYyBmaXJlQXN5bmMoZGF0YTogSVdhaXRVbnRpbERhdGE8VD4sIHRva2VuOiBDYW5jZWxsYXRpb25Ub2tlbiwgcHJvbWlzZUpvaW4/OiAocDogUHJvbWlzZTx1bmtub3duPiwgbGlzdGVuZXI6IEZ1bmN0aW9uKSA9PiBQcm9taXNlPHVua25vd24+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuX2FzeW5jRGVsaXZlcnlRdWV1ZSkge1xuXHRcdFx0dGhpcy5fYXN5bmNEZWxpdmVyeVF1ZXVlID0gbmV3IExpbmtlZExpc3QoKTtcblx0XHR9XG5cblx0XHRmb3JFYWNoTGlzdGVuZXIodGhpcy5fbGlzdGVuZXJzLCBsaXN0ZW5lciA9PiB0aGlzLl9hc3luY0RlbGl2ZXJ5UXVldWUhLnB1c2goW2xpc3RlbmVyLnZhbHVlLCBkYXRhXSkpO1xuXG5cdFx0d2hpbGUgKHRoaXMuX2FzeW5jRGVsaXZlcnlRdWV1ZS5zaXplID4gMCAmJiAhdG9rZW4uaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpIHtcblxuXHRcdFx0Y29uc3QgW2xpc3RlbmVyLCBkYXRhXSA9IHRoaXMuX2FzeW5jRGVsaXZlcnlRdWV1ZS5zaGlmdCgpITtcblx0XHRcdGNvbnN0IHRoZW5hYmxlczogUHJvbWlzZTx1bmtub3duPltdID0gW107XG5cblx0XHRcdGNvbnN0IGV2ZW50ID0gPFQ+e1xuXHRcdFx0XHQuLi5kYXRhLFxuXHRcdFx0XHR0b2tlbixcblx0XHRcdFx0d2FpdFVudGlsOiAocDogUHJvbWlzZTx1bmtub3duPik6IHZvaWQgPT4ge1xuXHRcdFx0XHRcdGlmIChPYmplY3QuaXNGcm96ZW4odGhlbmFibGVzKSkge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCd3YWl0VW50aWwgY2FuIE5PVCBiZSBjYWxsZWQgYXN5bmNocm9ub3VzJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChwcm9taXNlSm9pbikge1xuXHRcdFx0XHRcdFx0cCA9IHByb21pc2VKb2luKHAsIGxpc3RlbmVyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhlbmFibGVzLnB1c2gocCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxpc3RlbmVyKGV2ZW50KTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0b25VbmV4cGVjdGVkRXJyb3IoZSk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBmcmVlemUgdGhlbmFibGVzLWNvbGxlY3Rpb24gdG8gZW5mb3JjZSBzeW5jLWNhbGxzIHRvXG5cdFx0XHQvLyB3YWl0IHVudGlsIGFuZCB0aGVuIHdhaXQgZm9yIGFsbCB0aGVuYWJsZXMgdG8gcmVzb2x2ZVxuXHRcdFx0T2JqZWN0LmZyZWV6ZSh0aGVuYWJsZXMpO1xuXG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodGhlbmFibGVzKS50aGVuKHZhbHVlcyA9PiB7XG5cdFx0XHRcdGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlLnN0YXR1cyA9PT0gJ3JlamVjdGVkJykge1xuXHRcdFx0XHRcdFx0b25VbmV4cGVjdGVkRXJyb3IodmFsdWUucmVhc29uKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG5cbmV4cG9ydCBjbGFzcyBQYXVzZWFibGVFbWl0dGVyPFQ+IGV4dGVuZHMgRW1pdHRlcjxUPiB7XG5cblx0cHJpdmF0ZSBfaXNQYXVzZWQgPSAwO1xuXHRwcm90ZWN0ZWQgX2V2ZW50UXVldWUgPSBuZXcgTGlua2VkTGlzdDxUPigpO1xuXHRwcml2YXRlIF9tZXJnZUZuPzogKGlucHV0OiBUW10pID0+IFQ7XG5cblx0cHVibGljIGdldCBpc1BhdXNlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5faXNQYXVzZWQgIT09IDA7XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihvcHRpb25zPzogRW1pdHRlck9wdGlvbnMgJiB7IG1lcmdlPzogKGlucHV0OiBUW10pID0+IFQgfSkge1xuXHRcdHN1cGVyKG9wdGlvbnMpO1xuXHRcdHRoaXMuX21lcmdlRm4gPSBvcHRpb25zPy5tZXJnZTtcblx0fVxuXG5cdHBhdXNlKCk6IHZvaWQge1xuXHRcdHRoaXMuX2lzUGF1c2VkKys7XG5cdH1cblxuXHRyZXN1bWUoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2lzUGF1c2VkICE9PSAwICYmIC0tdGhpcy5faXNQYXVzZWQgPT09IDApIHtcblx0XHRcdGlmICh0aGlzLl9tZXJnZUZuKSB7XG5cdFx0XHRcdC8vIHVzZSB0aGUgbWVyZ2UgZnVuY3Rpb24gdG8gY3JlYXRlIGEgc2luZ2xlIGNvbXBvc2l0ZVxuXHRcdFx0XHQvLyBldmVudC4gbWFrZSBhIGNvcHkgaW4gY2FzZSBmaXJpbmcgcGF1c2VzIHRoaXMgZW1pdHRlclxuXHRcdFx0XHRpZiAodGhpcy5fZXZlbnRRdWV1ZS5zaXplID4gMCkge1xuXHRcdFx0XHRcdGNvbnN0IGV2ZW50cyA9IEFycmF5LmZyb20odGhpcy5fZXZlbnRRdWV1ZSk7XG5cdFx0XHRcdFx0dGhpcy5fZXZlbnRRdWV1ZS5jbGVhcigpO1xuXHRcdFx0XHRcdHN1cGVyLmZpcmUodGhpcy5fbWVyZ2VGbihldmVudHMpKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBubyBtZXJnaW5nLCBmaXJlIGVhY2ggZXZlbnQgaW5kaXZpZHVhbGx5IGFuZCB0ZXN0XG5cdFx0XHRcdC8vIHRoYXQgdGhpcyBlbWl0dGVyIGlzbid0IHBhdXNlZCBoYWxmd2F5IHRocm91Z2hcblx0XHRcdFx0d2hpbGUgKCF0aGlzLl9pc1BhdXNlZCAmJiB0aGlzLl9ldmVudFF1ZXVlLnNpemUgIT09IDApIHtcblx0XHRcdFx0XHRzdXBlci5maXJlKHRoaXMuX2V2ZW50UXVldWUuc2hpZnQoKSEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0b3ZlcnJpZGUgZmlyZShldmVudDogVCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9zaXplKSB7XG5cdFx0XHRpZiAodGhpcy5faXNQYXVzZWQgIT09IDApIHtcblx0XHRcdFx0dGhpcy5fZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN1cGVyLmZpcmUoZXZlbnQpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgY2xhc3MgRGVib3VuY2VFbWl0dGVyPFQ+IGV4dGVuZHMgUGF1c2VhYmxlRW1pdHRlcjxUPiB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfZGVsYXk6IG51bWJlcjtcblx0cHJpdmF0ZSBfaGFuZGxlOiBhbnkgfCB1bmRlZmluZWQ7XG5cblx0Y29uc3RydWN0b3Iob3B0aW9uczogRW1pdHRlck9wdGlvbnMgJiB7IG1lcmdlOiAoaW5wdXQ6IFRbXSkgPT4gVDsgZGVsYXk/OiBudW1iZXIgfSkge1xuXHRcdHN1cGVyKG9wdGlvbnMpO1xuXHRcdHRoaXMuX2RlbGF5ID0gb3B0aW9ucy5kZWxheSA/PyAxMDA7XG5cdH1cblxuXHRvdmVycmlkZSBmaXJlKGV2ZW50OiBUKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9oYW5kbGUpIHtcblx0XHRcdHRoaXMucGF1c2UoKTtcblx0XHRcdHRoaXMuX2hhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR0aGlzLl9oYW5kbGUgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHRoaXMucmVzdW1lKCk7XG5cdFx0XHR9LCB0aGlzLl9kZWxheSk7XG5cdFx0fVxuXHRcdHN1cGVyLmZpcmUoZXZlbnQpO1xuXHR9XG59XG5cbi8qKlxuICogQW4gZW1pdHRlciB3aGljaCBxdWV1ZSBhbGwgZXZlbnRzIGFuZCB0aGVuIHByb2Nlc3MgdGhlbSBhdCB0aGVcbiAqIGVuZCBvZiB0aGUgZXZlbnQgbG9vcC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1pY3JvdGFza0VtaXR0ZXI8VD4gZXh0ZW5kcyBFbWl0dGVyPFQ+IHtcblx0cHJpdmF0ZSBfcXVldWVkRXZlbnRzOiBUW10gPSBbXTtcblx0cHJpdmF0ZSBfbWVyZ2VGbj86IChpbnB1dDogVFtdKSA9PiBUO1xuXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBFbWl0dGVyT3B0aW9ucyAmIHsgbWVyZ2U/OiAoaW5wdXQ6IFRbXSkgPT4gVCB9KSB7XG5cdFx0c3VwZXIob3B0aW9ucyk7XG5cdFx0dGhpcy5fbWVyZ2VGbiA9IG9wdGlvbnM/Lm1lcmdlO1xuXHR9XG5cdG92ZXJyaWRlIGZpcmUoZXZlbnQ6IFQpOiB2b2lkIHtcblxuXHRcdGlmICghdGhpcy5oYXNMaXN0ZW5lcnMoKSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuX3F1ZXVlZEV2ZW50cy5wdXNoKGV2ZW50KTtcblx0XHRpZiAodGhpcy5fcXVldWVkRXZlbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0cXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5fbWVyZ2VGbikge1xuXHRcdFx0XHRcdHN1cGVyLmZpcmUodGhpcy5fbWVyZ2VGbih0aGlzLl9xdWV1ZWRFdmVudHMpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLl9xdWV1ZWRFdmVudHMuZm9yRWFjaChlID0+IHN1cGVyLmZpcmUoZSkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX3F1ZXVlZEV2ZW50cyA9IFtdO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59XG5cbi8qKlxuICogQW4gZXZlbnQgZW1pdHRlciB0aGF0IG11bHRpcGxleGVzIG1hbnkgZXZlbnRzIGludG8gYSBzaW5nbGUgZXZlbnQuXG4gKlxuICogQGV4YW1wbGUgTGlzdGVuIHRvIHRoZSBgb25EYXRhYCBldmVudCBvZiBhbGwgYFRoaW5nYHMsIGR5bmFtaWNhbGx5IGFkZGluZyBhbmQgcmVtb3ZpbmcgYFRoaW5nYHNcbiAqIHRvIHRoZSBtdWx0aXBsZXhlciBhcyBuZWVkZWQuXG4gKlxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgYW55dGhpbmdEYXRhTXVsdGlwbGV4ZXIgPSBuZXcgRXZlbnRNdWx0aXBsZXhlcjx7IGRhdGE6IHN0cmluZyB9PigpO1xuICpcbiAqIGNvbnN0IHRoaW5nTGlzdGVuZXJzID0gRGlzcG9zYWJsZU1hcDxUaGluZywgSURpc3Bvc2FibGU+KCk7XG4gKlxuICogdGhpbmdTZXJ2aWNlLm9uRGlkQWRkVGhpbmcodGhpbmcgPT4ge1xuICogICB0aGluZ0xpc3RlbmVycy5zZXQodGhpbmcsIGFueXRoaW5nRGF0YU11bHRpcGxleGVyLmFkZCh0aGluZy5vbkRhdGEpO1xuICogfSk7XG4gKiB0aGluZ1NlcnZpY2Uub25EaWRSZW1vdmVUaGluZyh0aGluZyA9PiB7XG4gKiAgIHRoaW5nTGlzdGVuZXJzLmRlbGV0ZUFuZERpc3Bvc2UodGhpbmcpO1xuICogfSk7XG4gKlxuICogYW55dGhpbmdEYXRhTXVsdGlwbGV4ZXIuZXZlbnQoZSA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKCdTb21ldGhpbmcgZmlyZWQgZGF0YSAnICsgZS5kYXRhKVxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50TXVsdGlwbGV4ZXI8VD4gaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBlbWl0dGVyOiBFbWl0dGVyPFQ+O1xuXHRwcml2YXRlIGhhc0xpc3RlbmVycyA9IGZhbHNlO1xuXHRwcml2YXRlIGV2ZW50czogeyBldmVudDogRXZlbnQ8VD47IGxpc3RlbmVyOiBJRGlzcG9zYWJsZSB8IG51bGwgfVtdID0gW107XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5lbWl0dGVyID0gbmV3IEVtaXR0ZXI8VD4oe1xuXHRcdFx0b25XaWxsQWRkRmlyc3RMaXN0ZW5lcjogKCkgPT4gdGhpcy5vbkZpcnN0TGlzdGVuZXJBZGQoKSxcblx0XHRcdG9uRGlkUmVtb3ZlTGFzdExpc3RlbmVyOiAoKSA9PiB0aGlzLm9uTGFzdExpc3RlbmVyUmVtb3ZlKClcblx0XHR9KTtcblx0fVxuXG5cdGdldCBldmVudCgpOiBFdmVudDxUPiB7XG5cdFx0cmV0dXJuIHRoaXMuZW1pdHRlci5ldmVudDtcblx0fVxuXG5cdGFkZChldmVudDogRXZlbnQ8VD4pOiBJRGlzcG9zYWJsZSB7XG5cdFx0Y29uc3QgZSA9IHsgZXZlbnQ6IGV2ZW50LCBsaXN0ZW5lcjogbnVsbCB9O1xuXHRcdHRoaXMuZXZlbnRzLnB1c2goZSk7XG5cblx0XHRpZiAodGhpcy5oYXNMaXN0ZW5lcnMpIHtcblx0XHRcdHRoaXMuaG9vayhlKTtcblx0XHR9XG5cblx0XHRjb25zdCBkaXNwb3NlID0gKCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuaGFzTGlzdGVuZXJzKSB7XG5cdFx0XHRcdHRoaXMudW5ob29rKGUpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBpZHggPSB0aGlzLmV2ZW50cy5pbmRleE9mKGUpO1xuXHRcdFx0dGhpcy5ldmVudHMuc3BsaWNlKGlkeCwgMSk7XG5cdFx0fTtcblxuXHRcdHJldHVybiB0b0Rpc3Bvc2FibGUoY3JlYXRlU2luZ2xlQ2FsbEZ1bmN0aW9uKGRpc3Bvc2UpKTtcblx0fVxuXG5cdHByaXZhdGUgb25GaXJzdExpc3RlbmVyQWRkKCk6IHZvaWQge1xuXHRcdHRoaXMuaGFzTGlzdGVuZXJzID0gdHJ1ZTtcblx0XHR0aGlzLmV2ZW50cy5mb3JFYWNoKGUgPT4gdGhpcy5ob29rKGUpKTtcblx0fVxuXG5cdHByaXZhdGUgb25MYXN0TGlzdGVuZXJSZW1vdmUoKTogdm9pZCB7XG5cdFx0dGhpcy5oYXNMaXN0ZW5lcnMgPSBmYWxzZTtcblx0XHR0aGlzLmV2ZW50cy5mb3JFYWNoKGUgPT4gdGhpcy51bmhvb2soZSkpO1xuXHR9XG5cblx0cHJpdmF0ZSBob29rKGU6IHsgZXZlbnQ6IEV2ZW50PFQ+OyBsaXN0ZW5lcjogSURpc3Bvc2FibGUgfCBudWxsIH0pOiB2b2lkIHtcblx0XHRlLmxpc3RlbmVyID0gZS5ldmVudChyID0+IHRoaXMuZW1pdHRlci5maXJlKHIpKTtcblx0fVxuXG5cdHByaXZhdGUgdW5ob29rKGU6IHsgZXZlbnQ6IEV2ZW50PFQ+OyBsaXN0ZW5lcjogSURpc3Bvc2FibGUgfCBudWxsIH0pOiB2b2lkIHtcblx0XHRlLmxpc3RlbmVyPy5kaXNwb3NlKCk7XG5cdFx0ZS5saXN0ZW5lciA9IG51bGw7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuZW1pdHRlci5kaXNwb3NlKCk7XG5cblx0XHRmb3IgKGNvbnN0IGUgb2YgdGhpcy5ldmVudHMpIHtcblx0XHRcdGUubGlzdGVuZXI/LmRpc3Bvc2UoKTtcblx0XHR9XG5cdFx0dGhpcy5ldmVudHMgPSBbXTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEeW5hbWljTGlzdEV2ZW50TXVsdGlwbGV4ZXI8VEV2ZW50VHlwZT4gZXh0ZW5kcyBJRGlzcG9zYWJsZSB7XG5cdHJlYWRvbmx5IGV2ZW50OiBFdmVudDxURXZlbnRUeXBlPjtcbn1cbmV4cG9ydCBjbGFzcyBEeW5hbWljTGlzdEV2ZW50TXVsdGlwbGV4ZXI8VEl0ZW0sIFRFdmVudFR5cGU+IGltcGxlbWVudHMgSUR5bmFtaWNMaXN0RXZlbnRNdWx0aXBsZXhlcjxURXZlbnRUeXBlPiB7XG5cdHByaXZhdGUgcmVhZG9ubHkgX3N0b3JlID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpO1xuXG5cdHJlYWRvbmx5IGV2ZW50OiBFdmVudDxURXZlbnRUeXBlPjtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRpdGVtczogVEl0ZW1bXSxcblx0XHRvbkFkZEl0ZW06IEV2ZW50PFRJdGVtPixcblx0XHRvblJlbW92ZUl0ZW06IEV2ZW50PFRJdGVtPixcblx0XHRnZXRFdmVudDogKGl0ZW06IFRJdGVtKSA9PiBFdmVudDxURXZlbnRUeXBlPlxuXHQpIHtcblx0XHRjb25zdCBtdWx0aXBsZXhlciA9IHRoaXMuX3N0b3JlLmFkZChuZXcgRXZlbnRNdWx0aXBsZXhlcjxURXZlbnRUeXBlPigpKTtcblx0XHRjb25zdCBpdGVtTGlzdGVuZXJzID0gdGhpcy5fc3RvcmUuYWRkKG5ldyBEaXNwb3NhYmxlTWFwPFRJdGVtLCBJRGlzcG9zYWJsZT4oKSk7XG5cblx0XHRmdW5jdGlvbiBhZGRJdGVtKGluc3RhbmNlOiBUSXRlbSkge1xuXHRcdFx0aXRlbUxpc3RlbmVycy5zZXQoaW5zdGFuY2UsIG11bHRpcGxleGVyLmFkZChnZXRFdmVudChpbnN0YW5jZSkpKTtcblx0XHR9XG5cblx0XHQvLyBFeGlzdGluZyBpdGVtc1xuXHRcdGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaXRlbXMpIHtcblx0XHRcdGFkZEl0ZW0oaW5zdGFuY2UpO1xuXHRcdH1cblxuXHRcdC8vIEFkZGVkIGl0ZW1zXG5cdFx0dGhpcy5fc3RvcmUuYWRkKG9uQWRkSXRlbShpbnN0YW5jZSA9PiB7XG5cdFx0XHRhZGRJdGVtKGluc3RhbmNlKTtcblx0XHR9KSk7XG5cblx0XHQvLyBSZW1vdmVkIGl0ZW1zXG5cdFx0dGhpcy5fc3RvcmUuYWRkKG9uUmVtb3ZlSXRlbShpbnN0YW5jZSA9PiB7XG5cdFx0XHRpdGVtTGlzdGVuZXJzLmRlbGV0ZUFuZERpc3Bvc2UoaW5zdGFuY2UpO1xuXHRcdH0pKTtcblxuXHRcdHRoaXMuZXZlbnQgPSBtdWx0aXBsZXhlci5ldmVudDtcblx0fVxuXG5cdGRpc3Bvc2UoKSB7XG5cdFx0dGhpcy5fc3RvcmUuZGlzcG9zZSgpO1xuXHR9XG59XG5cbi8qKlxuICogVGhlIEV2ZW50QnVmZmVyZXIgaXMgdXNlZnVsIGluIHNpdHVhdGlvbnMgaW4gd2hpY2ggeW91IHdhbnRcbiAqIHRvIGRlbGF5IGZpcmluZyB5b3VyIGV2ZW50cyBkdXJpbmcgc29tZSBjb2RlLlxuICogWW91IGNhbiB3cmFwIHRoYXQgY29kZSBhbmQgYmUgc3VyZSB0aGF0IHRoZSBldmVudCB3aWxsIG5vdFxuICogYmUgZmlyZWQgZHVyaW5nIHRoYXQgd3JhcC5cbiAqXG4gKiBgYGBcbiAqIGNvbnN0IGVtaXR0ZXI6IEVtaXR0ZXI7XG4gKiBjb25zdCBkZWxheWVyID0gbmV3IEV2ZW50RGVsYXllcigpO1xuICogY29uc3QgZGVsYXllZEV2ZW50ID0gZGVsYXllci53cmFwRXZlbnQoZW1pdHRlci5ldmVudCk7XG4gKlxuICogZGVsYXllZEV2ZW50KGNvbnNvbGUubG9nKTtcbiAqXG4gKiBkZWxheWVyLmJ1ZmZlckV2ZW50cygoKSA9PiB7XG4gKiAgIGVtaXR0ZXIuZmlyZSgpOyAvLyBldmVudCB3aWxsIG5vdCBiZSBmaXJlZCB5ZXRcbiAqIH0pO1xuICpcbiAqIC8vIGV2ZW50IHdpbGwgb25seSBiZSBmaXJlZCBhdCB0aGlzIHBvaW50XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEV2ZW50QnVmZmVyZXIge1xuXG5cdHByaXZhdGUgZGF0YTogeyBidWZmZXJzOiBGdW5jdGlvbltdIH1bXSA9IFtdO1xuXG5cdHdyYXBFdmVudDxUPihldmVudDogRXZlbnQ8VD4pOiBFdmVudDxUPjtcblx0d3JhcEV2ZW50PFQ+KGV2ZW50OiBFdmVudDxUPiwgcmVkdWNlOiAobGFzdDogVCB8IHVuZGVmaW5lZCwgZXZlbnQ6IFQpID0+IFQpOiBFdmVudDxUPjtcblx0d3JhcEV2ZW50PFQsIE8+KGV2ZW50OiBFdmVudDxUPiwgcmVkdWNlOiAobGFzdDogTyB8IHVuZGVmaW5lZCwgZXZlbnQ6IFQpID0+IE8sIGluaXRpYWw6IE8pOiBFdmVudDxPPjtcblx0d3JhcEV2ZW50PFQsIE8+KGV2ZW50OiBFdmVudDxUPiwgcmVkdWNlPzogKGxhc3Q6IFQgfCBPIHwgdW5kZWZpbmVkLCBldmVudDogVCkgPT4gVCB8IE8sIGluaXRpYWw/OiBPKTogRXZlbnQ8TyB8IFQ+IHtcblx0XHRyZXR1cm4gKGxpc3RlbmVyLCB0aGlzQXJncz8sIGRpc3Bvc2FibGVzPykgPT4ge1xuXHRcdFx0cmV0dXJuIGV2ZW50KGkgPT4ge1xuXHRcdFx0XHRjb25zdCBkYXRhID0gdGhpcy5kYXRhW3RoaXMuZGF0YS5sZW5ndGggLSAxXTtcblxuXHRcdFx0XHQvLyBOb24tcmVkdWNlIHNjZW5hcmlvXG5cdFx0XHRcdGlmICghcmVkdWNlKSB7XG5cdFx0XHRcdFx0Ly8gQnVmZmVyaW5nIGNhc2Vcblx0XHRcdFx0XHRpZiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0ZGF0YS5idWZmZXJzLnB1c2goKCkgPT4gbGlzdGVuZXIuY2FsbCh0aGlzQXJncywgaSkpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBOb3QgYnVmZmVyaW5nIGNhc2Vcblx0XHRcdFx0XHRcdGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWR1Y2Ugc2NlbmFyaW9cblx0XHRcdFx0Y29uc3QgcmVkdWNlRGF0YSA9IGRhdGEgYXMgdHlwZW9mIGRhdGEgJiB7XG5cdFx0XHRcdFx0LyoqXG5cdFx0XHRcdFx0ICogVGhlIGFjY3VtdWxhdGVkIGl0ZW1zIHRoYXQgd2lsbCBiZSByZWR1Y2VkLlxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdGl0ZW1zPzogVFtdO1xuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIFRoZSByZWR1Y2VkIHJlc3VsdCBjYWNoZWQgdG8gYmUgc2hhcmVkIHdpdGggb3RoZXIgbGlzdGVuZXJzLlxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdHJlZHVjZWRSZXN1bHQ/OiBUIHwgTztcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBOb3QgYnVmZmVyaW5nIGNhc2Vcblx0XHRcdFx0aWYgKCFyZWR1Y2VEYXRhKSB7XG5cdFx0XHRcdFx0Ly8gVE9ETzogSXMgdGhlcmUgYSB3YXkgdG8gY2FjaGUgdGhpcyByZWR1Y2UgY2FsbCBmb3IgYWxsIGxpc3RlbmVycz9cblx0XHRcdFx0XHRsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCByZWR1Y2UoaW5pdGlhbCwgaSkpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEJ1ZmZlcmluZyBjYXNlXG5cdFx0XHRcdHJlZHVjZURhdGEuaXRlbXMgPz89IFtdO1xuXHRcdFx0XHRyZWR1Y2VEYXRhLml0ZW1zLnB1c2goaSk7XG5cdFx0XHRcdGlmIChyZWR1Y2VEYXRhLmJ1ZmZlcnMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gSW5jbHVkZSBhIHNpbmdsZSBidWZmZXJlZCBmdW5jdGlvbiB0aGF0IHdpbGwgcmVkdWNlIGFsbCBldmVudHMgd2hlbiB3ZSdyZSBkb25lIGJ1ZmZlcmluZyBldmVudHNcblx0XHRcdFx0XHRkYXRhLmJ1ZmZlcnMucHVzaCgoKSA9PiB7XG5cdFx0XHRcdFx0XHQvLyBjYWNoZSB0aGUgcmVkdWNlZCByZXN1bHQgc28gdGhhdCB0aGUgdmFsdWUgY2FuIGJlIHNoYXJlZCBhY3Jvc3MgYWxsIGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0cmVkdWNlRGF0YS5yZWR1Y2VkUmVzdWx0ID8/PSBpbml0aWFsXG5cdFx0XHRcdFx0XHRcdD8gcmVkdWNlRGF0YS5pdGVtcyEucmVkdWNlKHJlZHVjZSBhcyAobGFzdDogTyB8IHVuZGVmaW5lZCwgZXZlbnQ6IFQpID0+IE8sIGluaXRpYWwpXG5cdFx0XHRcdFx0XHRcdDogcmVkdWNlRGF0YS5pdGVtcyEucmVkdWNlKHJlZHVjZSBhcyAobGFzdDogVCB8IHVuZGVmaW5lZCwgZXZlbnQ6IFQpID0+IFQpO1xuXHRcdFx0XHRcdFx0bGlzdGVuZXIuY2FsbCh0aGlzQXJncywgcmVkdWNlRGF0YS5yZWR1Y2VkUmVzdWx0KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgdW5kZWZpbmVkLCBkaXNwb3NhYmxlcyk7XG5cdFx0fTtcblx0fVxuXG5cdGJ1ZmZlckV2ZW50czxSID0gdm9pZD4oZm46ICgpID0+IFIpOiBSIHtcblx0XHRjb25zdCBkYXRhID0geyBidWZmZXJzOiBuZXcgQXJyYXk8RnVuY3Rpb24+KCkgfTtcblx0XHR0aGlzLmRhdGEucHVzaChkYXRhKTtcblx0XHRjb25zdCByID0gZm4oKTtcblx0XHR0aGlzLmRhdGEucG9wKCk7XG5cdFx0ZGF0YS5idWZmZXJzLmZvckVhY2goZmx1c2ggPT4gZmx1c2goKSk7XG5cdFx0cmV0dXJuIHI7XG5cdH1cbn1cblxuLyoqXG4gKiBBIFJlbGF5IGlzIGFuIGV2ZW50IGZvcndhcmRlciB3aGljaCBmdW5jdGlvbnMgYXMgYSByZXBsdWdhYmJsZSBldmVudCBwaXBlLlxuICogT25jZSBjcmVhdGVkLCB5b3UgY2FuIGNvbm5lY3QgYW4gaW5wdXQgZXZlbnQgdG8gaXQgYW5kIGl0IHdpbGwgc2ltcGx5IGZvcndhcmRcbiAqIGV2ZW50cyBmcm9tIHRoYXQgaW5wdXQgZXZlbnQgdGhyb3VnaCBpdHMgb3duIGBldmVudGAgcHJvcGVydHkuIFRoZSBgaW5wdXRgXG4gKiBjYW4gYmUgY2hhbmdlZCBhdCBhbnkgcG9pbnQgaW4gdGltZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJlbGF5PFQ+IGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgbGlzdGVuaW5nID0gZmFsc2U7XG5cdHByaXZhdGUgaW5wdXRFdmVudDogRXZlbnQ8VD4gPSBFdmVudC5Ob25lO1xuXHRwcml2YXRlIGlucHV0RXZlbnRMaXN0ZW5lcjogSURpc3Bvc2FibGUgPSBEaXNwb3NhYmxlLk5vbmU7XG5cblx0cHJpdmF0ZSByZWFkb25seSBlbWl0dGVyID0gbmV3IEVtaXR0ZXI8VD4oe1xuXHRcdG9uRGlkQWRkRmlyc3RMaXN0ZW5lcjogKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5pbmcgPSB0cnVlO1xuXHRcdFx0dGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIgPSB0aGlzLmlucHV0RXZlbnQodGhpcy5lbWl0dGVyLmZpcmUsIHRoaXMuZW1pdHRlcik7XG5cdFx0fSxcblx0XHRvbkRpZFJlbW92ZUxhc3RMaXN0ZW5lcjogKCkgPT4ge1xuXHRcdFx0dGhpcy5saXN0ZW5pbmcgPSBmYWxzZTtcblx0XHRcdHRoaXMuaW5wdXRFdmVudExpc3RlbmVyLmRpc3Bvc2UoKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJlYWRvbmx5IGV2ZW50OiBFdmVudDxUPiA9IHRoaXMuZW1pdHRlci5ldmVudDtcblxuXHRzZXQgaW5wdXQoZXZlbnQ6IEV2ZW50PFQ+KSB7XG5cdFx0dGhpcy5pbnB1dEV2ZW50ID0gZXZlbnQ7XG5cblx0XHRpZiAodGhpcy5saXN0ZW5pbmcpIHtcblx0XHRcdHRoaXMuaW5wdXRFdmVudExpc3RlbmVyLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuaW5wdXRFdmVudExpc3RlbmVyID0gZXZlbnQodGhpcy5lbWl0dGVyLmZpcmUsIHRoaXMuZW1pdHRlcik7XG5cdFx0fVxuXHR9XG5cblx0ZGlzcG9zZSgpIHtcblx0XHR0aGlzLmlucHV0RXZlbnRMaXN0ZW5lci5kaXNwb3NlKCk7XG5cdFx0dGhpcy5lbWl0dGVyLmRpc3Bvc2UoKTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElWYWx1ZVdpdGhDaGFuZ2VFdmVudDxUPiB7XG5cdHJlYWRvbmx5IG9uRGlkQ2hhbmdlOiBFdmVudDx2b2lkPjtcblx0Z2V0IHZhbHVlKCk6IFQ7XG59XG5cbmV4cG9ydCBjbGFzcyBWYWx1ZVdpdGhDaGFuZ2VFdmVudDxUPiBpbXBsZW1lbnRzIElWYWx1ZVdpdGhDaGFuZ2VFdmVudDxUPiB7XG5cdHB1YmxpYyBzdGF0aWMgY29uc3Q8VD4odmFsdWU6IFQpOiBJVmFsdWVXaXRoQ2hhbmdlRXZlbnQ8VD4ge1xuXHRcdHJldHVybiBuZXcgQ29uc3RWYWx1ZVdpdGhDaGFuZ2VFdmVudCh2YWx1ZSk7XG5cdH1cblxuXHRwcml2YXRlIHJlYWRvbmx5IF9vbkRpZENoYW5nZSA9IG5ldyBFbWl0dGVyPHZvaWQ+KCk7XG5cdHJlYWRvbmx5IG9uRGlkQ2hhbmdlOiBFdmVudDx2b2lkPiA9IHRoaXMuX29uRGlkQ2hhbmdlLmV2ZW50O1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgX3ZhbHVlOiBUKSB7IH1cblxuXHRnZXQgdmFsdWUoKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMuX3ZhbHVlO1xuXHR9XG5cblx0c2V0IHZhbHVlKHZhbHVlOiBUKSB7XG5cdFx0aWYgKHZhbHVlICE9PSB0aGlzLl92YWx1ZSkge1xuXHRcdFx0dGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0XHRcdHRoaXMuX29uRGlkQ2hhbmdlLmZpcmUodW5kZWZpbmVkKTtcblx0XHR9XG5cdH1cbn1cblxuY2xhc3MgQ29uc3RWYWx1ZVdpdGhDaGFuZ2VFdmVudDxUPiBpbXBsZW1lbnRzIElWYWx1ZVdpdGhDaGFuZ2VFdmVudDxUPiB7XG5cdHB1YmxpYyByZWFkb25seSBvbkRpZENoYW5nZTogRXZlbnQ8dm9pZD4gPSBFdmVudC5Ob25lO1xuXG5cdGNvbnN0cnVjdG9yKHJlYWRvbmx5IHZhbHVlOiBUKSB7IH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgQ29kZVdpbmRvdywgbWFpbldpbmRvdyB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci93aW5kb3cnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuY2xhc3MgV2luZG93TWFuYWdlciB7XG5cblx0c3RhdGljIHJlYWRvbmx5IElOU1RBTkNFID0gbmV3IFdpbmRvd01hbmFnZXIoKTtcblxuXHQvLyAtLS0gWm9vbSBMZXZlbFxuXG5cdHByaXZhdGUgcmVhZG9ubHkgbWFwV2luZG93SWRUb1pvb21MZXZlbCA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfb25EaWRDaGFuZ2Vab29tTGV2ZWwgPSBuZXcgRW1pdHRlcjxudW1iZXI+KCk7XG5cdHJlYWRvbmx5IG9uRGlkQ2hhbmdlWm9vbUxldmVsID0gdGhpcy5fb25EaWRDaGFuZ2Vab29tTGV2ZWwuZXZlbnQ7XG5cblx0Z2V0Wm9vbUxldmVsKHRhcmdldFdpbmRvdzogV2luZG93KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5tYXBXaW5kb3dJZFRvWm9vbUxldmVsLmdldCh0aGlzLmdldFdpbmRvd0lkKHRhcmdldFdpbmRvdykpID8/IDA7XG5cdH1cblx0c2V0Wm9vbUxldmVsKHpvb21MZXZlbDogbnVtYmVyLCB0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmdldFpvb21MZXZlbCh0YXJnZXRXaW5kb3cpID09PSB6b29tTGV2ZWwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB0YXJnZXRXaW5kb3dJZCA9IHRoaXMuZ2V0V2luZG93SWQodGFyZ2V0V2luZG93KTtcblx0XHR0aGlzLm1hcFdpbmRvd0lkVG9ab29tTGV2ZWwuc2V0KHRhcmdldFdpbmRvd0lkLCB6b29tTGV2ZWwpO1xuXHRcdHRoaXMuX29uRGlkQ2hhbmdlWm9vbUxldmVsLmZpcmUodGFyZ2V0V2luZG93SWQpO1xuXHR9XG5cblx0Ly8gLS0tIFpvb20gRmFjdG9yXG5cblx0cHJpdmF0ZSByZWFkb25seSBtYXBXaW5kb3dJZFRvWm9vbUZhY3RvciA9IG5ldyBNYXA8bnVtYmVyLCBudW1iZXI+KCk7XG5cblx0Z2V0Wm9vbUZhY3Rvcih0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMubWFwV2luZG93SWRUb1pvb21GYWN0b3IuZ2V0KHRoaXMuZ2V0V2luZG93SWQodGFyZ2V0V2luZG93KSkgPz8gMTtcblx0fVxuXHRzZXRab29tRmFjdG9yKHpvb21GYWN0b3I6IG51bWJlciwgdGFyZ2V0V2luZG93OiBXaW5kb3cpOiB2b2lkIHtcblx0XHR0aGlzLm1hcFdpbmRvd0lkVG9ab29tRmFjdG9yLnNldCh0aGlzLmdldFdpbmRvd0lkKHRhcmdldFdpbmRvdyksIHpvb21GYWN0b3IpO1xuXHR9XG5cblx0Ly8gLS0tIEZ1bGxzY3JlZW5cblxuXHRwcml2YXRlIHJlYWRvbmx5IF9vbkRpZENoYW5nZUZ1bGxzY3JlZW4gPSBuZXcgRW1pdHRlcjxudW1iZXI+KCk7XG5cdHJlYWRvbmx5IG9uRGlkQ2hhbmdlRnVsbHNjcmVlbiA9IHRoaXMuX29uRGlkQ2hhbmdlRnVsbHNjcmVlbi5ldmVudDtcblxuXHRwcml2YXRlIHJlYWRvbmx5IG1hcFdpbmRvd0lkVG9GdWxsU2NyZWVuID0gbmV3IE1hcDxudW1iZXIsIGJvb2xlYW4+KCk7XG5cblx0c2V0RnVsbHNjcmVlbihmdWxsc2NyZWVuOiBib29sZWFuLCB0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzRnVsbHNjcmVlbih0YXJnZXRXaW5kb3cpID09PSBmdWxsc2NyZWVuKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgd2luZG93SWQgPSB0aGlzLmdldFdpbmRvd0lkKHRhcmdldFdpbmRvdyk7XG5cdFx0dGhpcy5tYXBXaW5kb3dJZFRvRnVsbFNjcmVlbi5zZXQod2luZG93SWQsIGZ1bGxzY3JlZW4pO1xuXHRcdHRoaXMuX29uRGlkQ2hhbmdlRnVsbHNjcmVlbi5maXJlKHdpbmRvd0lkKTtcblx0fVxuXHRpc0Z1bGxzY3JlZW4odGFyZ2V0V2luZG93OiBXaW5kb3cpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gISF0aGlzLm1hcFdpbmRvd0lkVG9GdWxsU2NyZWVuLmdldCh0aGlzLmdldFdpbmRvd0lkKHRhcmdldFdpbmRvdykpO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXRXaW5kb3dJZCh0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IG51bWJlciB7XG5cdFx0cmV0dXJuICh0YXJnZXRXaW5kb3cgYXMgQ29kZVdpbmRvdykudnNjb2RlV2luZG93SWQ7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE1hdGNoTWVkaWFDaGFuZ2VMaXN0ZW5lcih0YXJnZXRXaW5kb3c6IFdpbmRvdywgcXVlcnk6IHN0cmluZyB8IE1lZGlhUXVlcnlMaXN0LCBjYWxsYmFjazogKHRoaXM6IE1lZGlhUXVlcnlMaXN0LCBldjogTWVkaWFRdWVyeUxpc3RFdmVudCkgPT4gYW55KTogdm9pZCB7XG5cdGlmICh0eXBlb2YgcXVlcnkgPT09ICdzdHJpbmcnKSB7XG5cdFx0cXVlcnkgPSB0YXJnZXRXaW5kb3cubWF0Y2hNZWRpYShxdWVyeSk7XG5cdH1cblx0cXVlcnkuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2FsbGJhY2spO1xufVxuXG4vKiogQSB6b29tIGluZGV4LCBlLmcuIDEsIDIsIDMgKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRab29tTGV2ZWwoem9vbUxldmVsOiBudW1iZXIsIHRhcmdldFdpbmRvdzogV2luZG93KTogdm9pZCB7XG5cdFdpbmRvd01hbmFnZXIuSU5TVEFOQ0Uuc2V0Wm9vbUxldmVsKHpvb21MZXZlbCwgdGFyZ2V0V2luZG93KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRab29tTGV2ZWwodGFyZ2V0V2luZG93OiBXaW5kb3cpOiBudW1iZXIge1xuXHRyZXR1cm4gV2luZG93TWFuYWdlci5JTlNUQU5DRS5nZXRab29tTGV2ZWwodGFyZ2V0V2luZG93KTtcbn1cbmV4cG9ydCBjb25zdCBvbkRpZENoYW5nZVpvb21MZXZlbCA9IFdpbmRvd01hbmFnZXIuSU5TVEFOQ0Uub25EaWRDaGFuZ2Vab29tTGV2ZWw7XG5cbi8qKiBUaGUgem9vbSBzY2FsZSBmb3IgYW4gaW5kZXgsIGUuZy4gMSwgMS4yLCAxLjQgKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRab29tRmFjdG9yKHRhcmdldFdpbmRvdzogV2luZG93KTogbnVtYmVyIHtcblx0cmV0dXJuIFdpbmRvd01hbmFnZXIuSU5TVEFOQ0UuZ2V0Wm9vbUZhY3Rvcih0YXJnZXRXaW5kb3cpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFpvb21GYWN0b3Ioem9vbUZhY3RvcjogbnVtYmVyLCB0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IHZvaWQge1xuXHRXaW5kb3dNYW5hZ2VyLklOU1RBTkNFLnNldFpvb21GYWN0b3Ioem9vbUZhY3RvciwgdGFyZ2V0V2luZG93KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEZ1bGxzY3JlZW4oZnVsbHNjcmVlbjogYm9vbGVhbiwgdGFyZ2V0V2luZG93OiBXaW5kb3cpOiB2b2lkIHtcblx0V2luZG93TWFuYWdlci5JTlNUQU5DRS5zZXRGdWxsc2NyZWVuKGZ1bGxzY3JlZW4sIHRhcmdldFdpbmRvdyk7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdWxsc2NyZWVuKHRhcmdldFdpbmRvdzogV2luZG93KTogYm9vbGVhbiB7XG5cdHJldHVybiBXaW5kb3dNYW5hZ2VyLklOU1RBTkNFLmlzRnVsbHNjcmVlbih0YXJnZXRXaW5kb3cpO1xufVxuZXhwb3J0IGNvbnN0IG9uRGlkQ2hhbmdlRnVsbHNjcmVlbiA9IFdpbmRvd01hbmFnZXIuSU5TVEFOQ0Uub25EaWRDaGFuZ2VGdWxsc2NyZWVuO1xuXG5jb25zdCB1c2VyQWdlbnQgPSB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyA/IG5hdmlnYXRvci51c2VyQWdlbnQgOiAnJztcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICh1c2VyQWdlbnQuaW5kZXhPZignRmlyZWZveCcpID49IDApO1xuZXhwb3J0IGNvbnN0IGlzV2ViS2l0ID0gKHVzZXJBZ2VudC5pbmRleE9mKCdBcHBsZVdlYktpdCcpID49IDApO1xuZXhwb3J0IGNvbnN0IGlzQ2hyb21lID0gKHVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA+PSAwKTtcbmV4cG9ydCBjb25zdCBpc1NhZmFyaSA9ICghaXNDaHJvbWUgJiYgKHVzZXJBZ2VudC5pbmRleE9mKCdTYWZhcmknKSA+PSAwKSk7XG5leHBvcnQgY29uc3QgaXNXZWJraXRXZWJWaWV3ID0gKCFpc0Nocm9tZSAmJiAhaXNTYWZhcmkgJiYgaXNXZWJLaXQpO1xuZXhwb3J0IGNvbnN0IGlzRWxlY3Ryb24gPSAodXNlckFnZW50LmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDApO1xuZXhwb3J0IGNvbnN0IGlzQW5kcm9pZCA9ICh1c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCcpID49IDApO1xuXG5sZXQgc3RhbmRhbG9uZSA9IGZhbHNlO1xuaWYgKHR5cGVvZiBtYWluV2luZG93Lm1hdGNoTWVkaWEgPT09ICdmdW5jdGlvbicpIHtcblx0Y29uc3Qgc3RhbmRhbG9uZU1hdGNoTWVkaWEgPSBtYWluV2luZG93Lm1hdGNoTWVkaWEoJyhkaXNwbGF5LW1vZGU6IHN0YW5kYWxvbmUpIG9yIChkaXNwbGF5LW1vZGU6IHdpbmRvdy1jb250cm9scy1vdmVybGF5KScpO1xuXHRjb25zdCBmdWxsU2NyZWVuTWF0Y2hNZWRpYSA9IG1haW5XaW5kb3cubWF0Y2hNZWRpYSgnKGRpc3BsYXktbW9kZTogZnVsbHNjcmVlbiknKTtcblx0c3RhbmRhbG9uZSA9IHN0YW5kYWxvbmVNYXRjaE1lZGlhLm1hdGNoZXM7XG5cdGFkZE1hdGNoTWVkaWFDaGFuZ2VMaXN0ZW5lcihtYWluV2luZG93LCBzdGFuZGFsb25lTWF0Y2hNZWRpYSwgKHsgbWF0Y2hlcyB9KSA9PiB7XG5cdFx0Ly8gZW50ZXJpbmcgZnVsbHNjcmVlbiB3b3VsZCBjaGFuZ2Ugc3RhbmRhbG9uZU1hdGNoTWVkaWEubWF0Y2hlcyB0byBmYWxzZVxuXHRcdC8vIGlmIHN0YW5kYWxvbmUgaXMgdHJ1ZSAocnVubmluZyBhcyBQV0EpIGFuZCBlbnRlcmluZyBmdWxsc2NyZWVuLCBza2lwIHRoaXMgY2hhbmdlXG5cdFx0aWYgKHN0YW5kYWxvbmUgJiYgZnVsbFNjcmVlbk1hdGNoTWVkaWEubWF0Y2hlcykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBvdGhlcndpc2UgdXBkYXRlIHN0YW5kYWxvbmUgKGJyb3dzZXIgdG8gUFdBIG9yIFBXQSB0byBicm93c2VyKVxuXHRcdHN0YW5kYWxvbmUgPSBtYXRjaGVzO1xuXHR9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1N0YW5kYWxvbmUoKTogYm9vbGVhbiB7XG5cdHJldHVybiBzdGFuZGFsb25lO1xufVxuXG4vLyBWaXNpYmxlIG1lYW5zIHRoYXQgdGhlIGZlYXR1cmUgaXMgZW5hYmxlZCwgbm90IG5lY2Vzc2FyaWx5IGJlaW5nIHJlbmRlcmVkXG4vLyBlLmcuIHZpc2libGUgaXMgdHJ1ZSBldmVuIGluIGZ1bGxzY3JlZW4gbW9kZSB3aGVyZSB0aGUgY29udHJvbHMgYXJlIGhpZGRlblxuLy8gU2VlIGRvY3MgYXQgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd0NvbnRyb2xzT3ZlcmxheS92aXNpYmxlXG5leHBvcnQgZnVuY3Rpb24gaXNXQ09FbmFibGVkKCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gKG5hdmlnYXRvciBhcyBhbnkpPy53aW5kb3dDb250cm9sc092ZXJsYXk/LnZpc2libGU7XG59XG5cbi8vIFJldHVybnMgdGhlIGJvdW5kaW5nIHJlY3Qgb2YgdGhlIHRpdGxlYmFyIGFyZWEgaWYgaXQgaXMgc3VwcG9ydGVkIGFuZCBkZWZpbmVkXG4vLyBTZWUgZG9jcyBhdCBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93Q29udHJvbHNPdmVybGF5L2dldFRpdGxlYmFyQXJlYVJlY3RcbmV4cG9ydCBmdW5jdGlvbiBnZXRXQ09Cb3VuZGluZ1JlY3QoKTogRE9NUmVjdCB8IHVuZGVmaW5lZCB7XG5cdHJldHVybiAobmF2aWdhdG9yIGFzIGFueSk/LndpbmRvd0NvbnRyb2xzT3ZlcmxheT8uZ2V0VGl0bGViYXJBcmVhUmVjdCgpO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgKiBhcyBubHMgZnJvbSAndnMvbmxzJztcblxuZXhwb3J0IGNvbnN0IExBTkdVQUdFX0RFRkFVTFQgPSAnZW4nO1xuXG5sZXQgX2lzV2luZG93cyA9IGZhbHNlO1xubGV0IF9pc01hY2ludG9zaCA9IGZhbHNlO1xubGV0IF9pc0xpbnV4ID0gZmFsc2U7XG5sZXQgX2lzTGludXhTbmFwID0gZmFsc2U7XG5sZXQgX2lzTmF0aXZlID0gZmFsc2U7XG5sZXQgX2lzV2ViID0gZmFsc2U7XG5sZXQgX2lzRWxlY3Ryb24gPSBmYWxzZTtcbmxldCBfaXNJT1MgPSBmYWxzZTtcbmxldCBfaXNDSSA9IGZhbHNlO1xubGV0IF9pc01vYmlsZSA9IGZhbHNlO1xubGV0IF9sb2NhbGU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmxldCBfbGFuZ3VhZ2U6IHN0cmluZyA9IExBTkdVQUdFX0RFRkFVTFQ7XG5sZXQgX3BsYXRmb3JtTG9jYWxlOiBzdHJpbmcgPSBMQU5HVUFHRV9ERUZBVUxUO1xubGV0IF90cmFuc2xhdGlvbnNDb25maWdGaWxlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5sZXQgX3VzZXJBZ2VudDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG5leHBvcnQgaW50ZXJmYWNlIElQcm9jZXNzRW52aXJvbm1lbnQge1xuXHRba2V5OiBzdHJpbmddOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogVGhpcyBpbnRlcmZhY2UgaXMgaW50ZW50aW9uYWxseSBub3QgaWRlbnRpY2FsIHRvIG5vZGUuanNcbiAqIHByb2Nlc3MgYmVjYXVzZSBpdCBhbHNvIHdvcmtzIGluIHNhbmRib3hlZCBlbnZpcm9ubWVudHNcbiAqIHdoZXJlIHRoZSBwcm9jZXNzIG9iamVjdCBpcyBpbXBsZW1lbnRlZCBkaWZmZXJlbnRseS4gV2VcbiAqIGRlZmluZSB0aGUgcHJvcGVydGllcyBoZXJlIHRoYXQgd2UgbmVlZCBmb3IgYHBsYXRmb3JtYFxuICogdG8gd29yayBhbmQgbm90aGluZyBlbHNlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIElOb2RlUHJvY2VzcyB7XG5cdHBsYXRmb3JtOiBzdHJpbmc7XG5cdGFyY2g6IHN0cmluZztcblx0ZW52OiBJUHJvY2Vzc0Vudmlyb25tZW50O1xuXHR2ZXJzaW9ucz86IHtcblx0XHRub2RlPzogc3RyaW5nO1xuXHRcdGVsZWN0cm9uPzogc3RyaW5nO1xuXHRcdGNocm9tZT86IHN0cmluZztcblx0fTtcblx0dHlwZT86IHN0cmluZztcblx0Y3dkOiAoKSA9PiBzdHJpbmc7XG59XG5cbmRlY2xhcmUgY29uc3QgcHJvY2VzczogSU5vZGVQcm9jZXNzO1xuXG5jb25zdCAkZ2xvYmFsVGhpczogYW55ID0gZ2xvYmFsVGhpcztcblxubGV0IG5vZGVQcm9jZXNzOiBJTm9kZVByb2Nlc3MgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5pZiAodHlwZW9mICRnbG9iYWxUaGlzLnZzY29kZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mICRnbG9iYWxUaGlzLnZzY29kZS5wcm9jZXNzICE9PSAndW5kZWZpbmVkJykge1xuXHQvLyBOYXRpdmUgZW52aXJvbm1lbnQgKHNhbmRib3hlZClcblx0bm9kZVByb2Nlc3MgPSAkZ2xvYmFsVGhpcy52c2NvZGUucHJvY2Vzcztcbn0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzPy52ZXJzaW9ucz8ubm9kZSA9PT0gJ3N0cmluZycpIHtcblx0Ly8gTmF0aXZlIGVudmlyb25tZW50IChub24tc2FuZGJveGVkKVxuXHRub2RlUHJvY2VzcyA9IHByb2Nlc3M7XG59XG5cbmNvbnN0IGlzRWxlY3Ryb25Qcm9jZXNzID0gdHlwZW9mIG5vZGVQcm9jZXNzPy52ZXJzaW9ucz8uZWxlY3Ryb24gPT09ICdzdHJpbmcnO1xuY29uc3QgaXNFbGVjdHJvblJlbmRlcmVyID0gaXNFbGVjdHJvblByb2Nlc3MgJiYgbm9kZVByb2Nlc3M/LnR5cGUgPT09ICdyZW5kZXJlcic7XG5cbmludGVyZmFjZSBJTmF2aWdhdG9yIHtcblx0dXNlckFnZW50OiBzdHJpbmc7XG5cdG1heFRvdWNoUG9pbnRzPzogbnVtYmVyO1xuXHRsYW5ndWFnZTogc3RyaW5nO1xufVxuZGVjbGFyZSBjb25zdCBuYXZpZ2F0b3I6IElOYXZpZ2F0b3I7XG5cbi8vIE5hdGl2ZSBlbnZpcm9ubWVudFxuaWYgKHR5cGVvZiBub2RlUHJvY2VzcyA9PT0gJ29iamVjdCcpIHtcblx0X2lzV2luZG93cyA9IChub2RlUHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJyk7XG5cdF9pc01hY2ludG9zaCA9IChub2RlUHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2RhcndpbicpO1xuXHRfaXNMaW51eCA9IChub2RlUHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2xpbnV4Jyk7XG5cdF9pc0xpbnV4U25hcCA9IF9pc0xpbnV4ICYmICEhbm9kZVByb2Nlc3MuZW52WydTTkFQJ10gJiYgISFub2RlUHJvY2Vzcy5lbnZbJ1NOQVBfUkVWSVNJT04nXTtcblx0X2lzRWxlY3Ryb24gPSBpc0VsZWN0cm9uUHJvY2Vzcztcblx0X2lzQ0kgPSAhIW5vZGVQcm9jZXNzLmVudlsnQ0knXSB8fCAhIW5vZGVQcm9jZXNzLmVudlsnQlVJTERfQVJUSUZBQ1RTVEFHSU5HRElSRUNUT1JZJ107XG5cdF9sb2NhbGUgPSBMQU5HVUFHRV9ERUZBVUxUO1xuXHRfbGFuZ3VhZ2UgPSBMQU5HVUFHRV9ERUZBVUxUO1xuXHRjb25zdCByYXdObHNDb25maWcgPSBub2RlUHJvY2Vzcy5lbnZbJ1ZTQ09ERV9OTFNfQ09ORklHJ107XG5cdGlmIChyYXdObHNDb25maWcpIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgbmxzQ29uZmlnOiBubHMuSU5MU0NvbmZpZ3VyYXRpb24gPSBKU09OLnBhcnNlKHJhd05sc0NvbmZpZyk7XG5cdFx0XHRfbG9jYWxlID0gbmxzQ29uZmlnLnVzZXJMb2NhbGU7XG5cdFx0XHRfcGxhdGZvcm1Mb2NhbGUgPSBubHNDb25maWcub3NMb2NhbGU7XG5cdFx0XHRfbGFuZ3VhZ2UgPSBubHNDb25maWcucmVzb2x2ZWRMYW5ndWFnZSB8fCBMQU5HVUFHRV9ERUZBVUxUO1xuXHRcdFx0X3RyYW5zbGF0aW9uc0NvbmZpZ0ZpbGUgPSBubHNDb25maWcubGFuZ3VhZ2VQYWNrPy50cmFuc2xhdGlvbnNDb25maWdGaWxlO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHR9XG5cdH1cblx0X2lzTmF0aXZlID0gdHJ1ZTtcbn1cblxuLy8gV2ViIGVudmlyb25tZW50XG5lbHNlIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiAhaXNFbGVjdHJvblJlbmRlcmVyKSB7XG5cdF91c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXHRfaXNXaW5kb3dzID0gX3VzZXJBZ2VudC5pbmRleE9mKCdXaW5kb3dzJykgPj0gMDtcblx0X2lzTWFjaW50b3NoID0gX3VzZXJBZ2VudC5pbmRleE9mKCdNYWNpbnRvc2gnKSA+PSAwO1xuXHRfaXNJT1MgPSAoX3VzZXJBZ2VudC5pbmRleE9mKCdNYWNpbnRvc2gnKSA+PSAwIHx8IF91c2VyQWdlbnQuaW5kZXhPZignaVBhZCcpID49IDAgfHwgX3VzZXJBZ2VudC5pbmRleE9mKCdpUGhvbmUnKSA+PSAwKSAmJiAhIW5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyAmJiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwO1xuXHRfaXNMaW51eCA9IF91c2VyQWdlbnQuaW5kZXhPZignTGludXgnKSA+PSAwO1xuXHRfaXNNb2JpbGUgPSBfdXNlckFnZW50Py5pbmRleE9mKCdNb2JpJykgPj0gMDtcblx0X2lzV2ViID0gdHJ1ZTtcblx0Ly8gVlNDT0RFX0dMT0JBTFM6IE5MU1xuXHRfbGFuZ3VhZ2UgPSBnbG9iYWxUaGlzLl9WU0NPREVfTkxTX0xBTkdVQUdFIHx8IExBTkdVQUdFX0RFRkFVTFQ7XG5cdF9sb2NhbGUgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UudG9Mb3dlckNhc2UoKTtcblx0X3BsYXRmb3JtTG9jYWxlID0gX2xvY2FsZTtcbn1cblxuLy8gVW5rbm93biBlbnZpcm9ubWVudFxuZWxzZSB7XG5cdGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byByZXNvbHZlIHBsYXRmb3JtLicpO1xufVxuXG5leHBvcnQgY29uc3QgZW51bSBQbGF0Zm9ybSB7XG5cdFdlYixcblx0TWFjLFxuXHRMaW51eCxcblx0V2luZG93c1xufVxuZXhwb3J0IHR5cGUgUGxhdGZvcm1OYW1lID0gJ1dlYicgfCAnV2luZG93cycgfCAnTWFjJyB8ICdMaW51eCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBQbGF0Zm9ybVRvU3RyaW5nKHBsYXRmb3JtOiBQbGF0Zm9ybSk6IFBsYXRmb3JtTmFtZSB7XG5cdHN3aXRjaCAocGxhdGZvcm0pIHtcblx0XHRjYXNlIFBsYXRmb3JtLldlYjogcmV0dXJuICdXZWInO1xuXHRcdGNhc2UgUGxhdGZvcm0uTWFjOiByZXR1cm4gJ01hYyc7XG5cdFx0Y2FzZSBQbGF0Zm9ybS5MaW51eDogcmV0dXJuICdMaW51eCc7XG5cdFx0Y2FzZSBQbGF0Zm9ybS5XaW5kb3dzOiByZXR1cm4gJ1dpbmRvd3MnO1xuXHR9XG59XG5cbmxldCBfcGxhdGZvcm06IFBsYXRmb3JtID0gUGxhdGZvcm0uV2ViO1xuaWYgKF9pc01hY2ludG9zaCkge1xuXHRfcGxhdGZvcm0gPSBQbGF0Zm9ybS5NYWM7XG59IGVsc2UgaWYgKF9pc1dpbmRvd3MpIHtcblx0X3BsYXRmb3JtID0gUGxhdGZvcm0uV2luZG93cztcbn0gZWxzZSBpZiAoX2lzTGludXgpIHtcblx0X3BsYXRmb3JtID0gUGxhdGZvcm0uTGludXg7XG59XG5cbmV4cG9ydCBjb25zdCBpc1dpbmRvd3MgPSBfaXNXaW5kb3dzO1xuZXhwb3J0IGNvbnN0IGlzTWFjaW50b3NoID0gX2lzTWFjaW50b3NoO1xuZXhwb3J0IGNvbnN0IGlzTGludXggPSBfaXNMaW51eDtcbmV4cG9ydCBjb25zdCBpc0xpbnV4U25hcCA9IF9pc0xpbnV4U25hcDtcbmV4cG9ydCBjb25zdCBpc05hdGl2ZSA9IF9pc05hdGl2ZTtcbmV4cG9ydCBjb25zdCBpc0VsZWN0cm9uID0gX2lzRWxlY3Ryb247XG5leHBvcnQgY29uc3QgaXNXZWIgPSBfaXNXZWI7XG5leHBvcnQgY29uc3QgaXNXZWJXb3JrZXIgPSAoX2lzV2ViICYmIHR5cGVvZiAkZ2xvYmFsVGhpcy5pbXBvcnRTY3JpcHRzID09PSAnZnVuY3Rpb24nKTtcbmV4cG9ydCBjb25zdCB3ZWJXb3JrZXJPcmlnaW4gPSBpc1dlYldvcmtlciA/ICRnbG9iYWxUaGlzLm9yaWdpbiA6IHVuZGVmaW5lZDtcbmV4cG9ydCBjb25zdCBpc0lPUyA9IF9pc0lPUztcbmV4cG9ydCBjb25zdCBpc01vYmlsZSA9IF9pc01vYmlsZTtcbi8qKlxuICogV2hldGhlciB3ZSBydW4gaW5zaWRlIGEgQ0kgZW52aXJvbm1lbnQsIHN1Y2ggYXNcbiAqIEdIIGFjdGlvbnMgb3IgQXp1cmUgUGlwZWxpbmVzLlxuICovXG5leHBvcnQgY29uc3QgaXNDSSA9IF9pc0NJO1xuZXhwb3J0IGNvbnN0IHBsYXRmb3JtID0gX3BsYXRmb3JtO1xuZXhwb3J0IGNvbnN0IHVzZXJBZ2VudCA9IF91c2VyQWdlbnQ7XG5cbi8qKlxuICogVGhlIGxhbmd1YWdlIHVzZWQgZm9yIHRoZSB1c2VyIGludGVyZmFjZS4gVGhlIGZvcm1hdCBvZlxuICogdGhlIHN0cmluZyBpcyBhbGwgbG93ZXIgY2FzZSAoZS5nLiB6aC10dyBmb3IgVHJhZGl0aW9uYWxcbiAqIENoaW5lc2Ugb3IgZGUgZm9yIEdlcm1hbilcbiAqL1xuZXhwb3J0IGNvbnN0IGxhbmd1YWdlID0gX2xhbmd1YWdlO1xuXG5leHBvcnQgbmFtZXNwYWNlIExhbmd1YWdlIHtcblxuXHRleHBvcnQgZnVuY3Rpb24gdmFsdWUoKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gbGFuZ3VhZ2U7XG5cdH1cblxuXHRleHBvcnQgZnVuY3Rpb24gaXNEZWZhdWx0VmFyaWFudCgpOiBib29sZWFuIHtcblx0XHRpZiAobGFuZ3VhZ2UubGVuZ3RoID09PSAyKSB7XG5cdFx0XHRyZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbic7XG5cdFx0fSBlbHNlIGlmIChsYW5ndWFnZS5sZW5ndGggPj0gMykge1xuXHRcdFx0cmV0dXJuIGxhbmd1YWdlWzBdID09PSAnZScgJiYgbGFuZ3VhZ2VbMV0gPT09ICduJyAmJiBsYW5ndWFnZVsyXSA9PT0gJy0nO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIGlzRGVmYXVsdCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gbGFuZ3VhZ2UgPT09ICdlbic7XG5cdH1cbn1cblxuLyoqXG4gKiBEZXNrdG9wOiBUaGUgT1MgbG9jYWxlIG9yIHRoZSBsb2NhbGUgc3BlY2lmaWVkIGJ5IC0tbG9jYWxlIG9yIGBhcmd2Lmpzb25gLlxuICogV2ViOiBtYXRjaGVzIGBwbGF0Zm9ybUxvY2FsZWAuXG4gKlxuICogVGhlIFVJIGlzIG5vdCBuZWNlc3NhcmlseSBzaG93biBpbiB0aGUgcHJvdmlkZWQgbG9jYWxlLlxuICovXG5leHBvcnQgY29uc3QgbG9jYWxlID0gX2xvY2FsZTtcblxuLyoqXG4gKiBUaGlzIHdpbGwgYWx3YXlzIGJlIHNldCB0byB0aGUgT1MvYnJvd3NlcidzIGxvY2FsZSByZWdhcmRsZXNzIG9mXG4gKiB3aGF0IHdhcyBzcGVjaWZpZWQgb3RoZXJ3aXNlLiBUaGUgZm9ybWF0IG9mIHRoZSBzdHJpbmcgaXMgYWxsXG4gKiBsb3dlciBjYXNlIChlLmcuIHpoLXR3IGZvciBUcmFkaXRpb25hbCBDaGluZXNlKS4gVGhlIFVJIGlzIG5vdFxuICogbmVjZXNzYXJpbHkgc2hvd24gaW4gdGhlIHByb3ZpZGVkIGxvY2FsZS5cbiAqL1xuZXhwb3J0IGNvbnN0IHBsYXRmb3JtTG9jYWxlID0gX3BsYXRmb3JtTG9jYWxlO1xuXG4vKipcbiAqIFRoZSB0cmFuc2xhdGlvbnMgdGhhdCBhcmUgYXZhaWxhYmxlIHRocm91Z2ggbGFuZ3VhZ2UgcGFja3MuXG4gKi9cbmV4cG9ydCBjb25zdCB0cmFuc2xhdGlvbnNDb25maWdGaWxlID0gX3RyYW5zbGF0aW9uc0NvbmZpZ0ZpbGU7XG5cbmV4cG9ydCBjb25zdCBzZXRUaW1lb3V0MElzRmFzdGVyID0gKHR5cGVvZiAkZ2xvYmFsVGhpcy5wb3N0TWVzc2FnZSA9PT0gJ2Z1bmN0aW9uJyAmJiAhJGdsb2JhbFRoaXMuaW1wb3J0U2NyaXB0cyk7XG5cbi8qKlxuICogU2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3RpbWVycy1hbmQtdXNlci1wcm9tcHRzLmh0bWwjOn46dGV4dD10aGFuJTIwNCUyQyUyMHRoZW4tLHNldCUyMHRpbWVvdXQlMjB0byUyMDQsLS5cbiAqXG4gKiBXb3JrcyBzaW1pbGFybHkgdG8gYHNldFRpbWVvdXQoMClgIGJ1dCBkb2Vzbid0IHN1ZmZlciBmcm9tIHRoZSA0bXMgYXJ0aWZpY2lhbCBkZWxheVxuICogdGhhdCBicm93c2VycyBzZXQgd2hlbiB0aGUgbmVzdGluZyBsZXZlbCBpcyA+IDUuXG4gKi9cbmV4cG9ydCBjb25zdCBzZXRUaW1lb3V0MCA9ICgoKSA9PiB7XG5cdGlmIChzZXRUaW1lb3V0MElzRmFzdGVyKSB7XG5cdFx0aW50ZXJmYWNlIElRdWV1ZUVsZW1lbnQge1xuXHRcdFx0aWQ6IG51bWJlcjtcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB2b2lkO1xuXHRcdH1cblx0XHRjb25zdCBwZW5kaW5nOiBJUXVldWVFbGVtZW50W10gPSBbXTtcblxuXHRcdCRnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoZTogYW55KSA9PiB7XG5cdFx0XHRpZiAoZS5kYXRhICYmIGUuZGF0YS52c2NvZGVTY2hlZHVsZUFzeW5jV29yaykge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMCwgbGVuID0gcGVuZGluZy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRcdGNvbnN0IGNhbmRpZGF0ZSA9IHBlbmRpbmdbaV07XG5cdFx0XHRcdFx0aWYgKGNhbmRpZGF0ZS5pZCA9PT0gZS5kYXRhLnZzY29kZVNjaGVkdWxlQXN5bmNXb3JrKSB7XG5cdFx0XHRcdFx0XHRwZW5kaW5nLnNwbGljZShpLCAxKTtcblx0XHRcdFx0XHRcdGNhbmRpZGF0ZS5jYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGxldCBsYXN0SWQgPSAwO1xuXHRcdHJldHVybiAoY2FsbGJhY2s6ICgpID0+IHZvaWQpID0+IHtcblx0XHRcdGNvbnN0IG15SWQgPSArK2xhc3RJZDtcblx0XHRcdHBlbmRpbmcucHVzaCh7XG5cdFx0XHRcdGlkOiBteUlkLFxuXHRcdFx0XHRjYWxsYmFjazogY2FsbGJhY2tcblx0XHRcdH0pO1xuXHRcdFx0JGdsb2JhbFRoaXMucG9zdE1lc3NhZ2UoeyB2c2NvZGVTY2hlZHVsZUFzeW5jV29yazogbXlJZCB9LCAnKicpO1xuXHRcdH07XG5cdH1cblx0cmV0dXJuIChjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gc2V0VGltZW91dChjYWxsYmFjayk7XG59KSgpO1xuXG5leHBvcnQgY29uc3QgZW51bSBPcGVyYXRpbmdTeXN0ZW0ge1xuXHRXaW5kb3dzID0gMSxcblx0TWFjaW50b3NoID0gMixcblx0TGludXggPSAzXG59XG5leHBvcnQgY29uc3QgT1MgPSAoX2lzTWFjaW50b3NoIHx8IF9pc0lPUyA/IE9wZXJhdGluZ1N5c3RlbS5NYWNpbnRvc2ggOiAoX2lzV2luZG93cyA/IE9wZXJhdGluZ1N5c3RlbS5XaW5kb3dzIDogT3BlcmF0aW5nU3lzdGVtLkxpbnV4KSk7XG5cbmxldCBfaXNMaXR0bGVFbmRpYW4gPSB0cnVlO1xubGV0IF9pc0xpdHRsZUVuZGlhbkNvbXB1dGVkID0gZmFsc2U7XG5leHBvcnQgZnVuY3Rpb24gaXNMaXR0bGVFbmRpYW4oKTogYm9vbGVhbiB7XG5cdGlmICghX2lzTGl0dGxlRW5kaWFuQ29tcHV0ZWQpIHtcblx0XHRfaXNMaXR0bGVFbmRpYW5Db21wdXRlZCA9IHRydWU7XG5cdFx0Y29uc3QgdGVzdCA9IG5ldyBVaW50OEFycmF5KDIpO1xuXHRcdHRlc3RbMF0gPSAxO1xuXHRcdHRlc3RbMV0gPSAyO1xuXHRcdGNvbnN0IHZpZXcgPSBuZXcgVWludDE2QXJyYXkodGVzdC5idWZmZXIpO1xuXHRcdF9pc0xpdHRsZUVuZGlhbiA9ICh2aWV3WzBdID09PSAoMiA8PCA4KSArIDEpO1xuXHR9XG5cdHJldHVybiBfaXNMaXR0bGVFbmRpYW47XG59XG5cbmV4cG9ydCBjb25zdCBpc0Nocm9tZSA9ICEhKHVzZXJBZ2VudCAmJiB1c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPj0gMCk7XG5leHBvcnQgY29uc3QgaXNGaXJlZm94ID0gISEodXNlckFnZW50ICYmIHVzZXJBZ2VudC5pbmRleE9mKCdGaXJlZm94JykgPj0gMCk7XG5leHBvcnQgY29uc3QgaXNTYWZhcmkgPSAhISghaXNDaHJvbWUgJiYgKHVzZXJBZ2VudCAmJiB1c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgPj0gMCkpO1xuZXhwb3J0IGNvbnN0IGlzRWRnZSA9ICEhKHVzZXJBZ2VudCAmJiB1c2VyQWdlbnQuaW5kZXhPZignRWRnLycpID49IDApO1xuZXhwb3J0IGNvbnN0IGlzQW5kcm9pZCA9ICEhKHVzZXJBZ2VudCAmJiB1c2VyQWdlbnQuaW5kZXhPZignQW5kcm9pZCcpID49IDApO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNCaWdTdXJPck5ld2VyKG9zVmVyc2lvbjogc3RyaW5nKTogYm9vbGVhbiB7XG5cdHJldHVybiBwYXJzZUZsb2F0KG9zVmVyc2lvbikgPj0gMjA7XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCAqIGFzIGJyb3dzZXIgZnJvbSAndnMvYmFzZS9icm93c2VyL2Jyb3dzZXInO1xuaW1wb3J0IHsgbWFpbldpbmRvdyB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci93aW5kb3cnO1xuaW1wb3J0ICogYXMgcGxhdGZvcm0gZnJvbSAndnMvYmFzZS9jb21tb24vcGxhdGZvcm0nO1xuXG5leHBvcnQgY29uc3QgZW51bSBLZXlib2FyZFN1cHBvcnQge1xuXHRBbHdheXMsXG5cdEZ1bGxTY3JlZW4sXG5cdE5vbmVcbn1cblxuY29uc3Qgc2FmZU5hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnID8gbmF2aWdhdG9yIDoge30gYXMgeyBba2V5OiBzdHJpbmddOiBhbnkgfTtcblxuLyoqXG4gKiBCcm93c2VyIGZlYXR1cmUgd2UgY2FuIHN1cHBvcnQgaW4gY3VycmVudCBwbGF0Zm9ybSwgYnJvd3NlciBhbmQgZW52aXJvbm1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBCcm93c2VyRmVhdHVyZXMgPSB7XG5cdGNsaXBib2FyZDoge1xuXHRcdHdyaXRlVGV4dDogKFxuXHRcdFx0cGxhdGZvcm0uaXNOYXRpdmVcblx0XHRcdHx8IChkb2N1bWVudC5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQgJiYgZG9jdW1lbnQucXVlcnlDb21tYW5kU3VwcG9ydGVkKCdjb3B5JykpXG5cdFx0XHR8fCAhIShzYWZlTmF2aWdhdG9yICYmIHNhZmVOYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHNhZmVOYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dClcblx0XHQpLFxuXHRcdHJlYWRUZXh0OiAoXG5cdFx0XHRwbGF0Zm9ybS5pc05hdGl2ZVxuXHRcdFx0fHwgISEoc2FmZU5hdmlnYXRvciAmJiBzYWZlTmF2aWdhdG9yLmNsaXBib2FyZCAmJiBzYWZlTmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dClcblx0XHQpXG5cdH0sXG5cdGtleWJvYXJkOiAoKCkgPT4ge1xuXHRcdGlmIChwbGF0Zm9ybS5pc05hdGl2ZSB8fCBicm93c2VyLmlzU3RhbmRhbG9uZSgpKSB7XG5cdFx0XHRyZXR1cm4gS2V5Ym9hcmRTdXBwb3J0LkFsd2F5cztcblx0XHR9XG5cblx0XHRpZiAoKDxhbnk+c2FmZU5hdmlnYXRvcikua2V5Ym9hcmQgfHwgYnJvd3Nlci5pc1NhZmFyaSkge1xuXHRcdFx0cmV0dXJuIEtleWJvYXJkU3VwcG9ydC5GdWxsU2NyZWVuO1xuXHRcdH1cblxuXHRcdHJldHVybiBLZXlib2FyZFN1cHBvcnQuTm9uZTtcblx0fSkoKSxcblxuXHQvLyAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgYWx3YXlzIGV2YWx1YXRlcyB0byB0cnVlIHdpdGggdHlwZXNjcmlwdCdzIG1vZGVybiB0eXBpbmdzLiBUaGlzIGNhdXNlcyBgd2luZG93YCB0byBiZVxuXHQvLyBgbmV2ZXJgIGxhdGVyIGluIGB3aW5kb3cubmF2aWdhdG9yYC4gVGhhdCdzIHdoeSB3ZSBuZWVkIHRoZSBleHBsaWNpdCBgd2luZG93IGFzIFdpbmRvd2AgY2FzdFxuXHR0b3VjaDogJ29udG91Y2hzdGFydCcgaW4gbWFpbldpbmRvdyB8fCBzYWZlTmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCxcblx0cG9pbnRlckV2ZW50czogbWFpbldpbmRvdy5Qb2ludGVyRXZlbnQgJiYgKCdvbnRvdWNoc3RhcnQnIGluIG1haW5XaW5kb3cgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMClcbn07XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogVmlydHVhbCBLZXkgQ29kZXMsIHRoZSB2YWx1ZSBkb2VzIG5vdCBob2xkIGFueSBpbmhlcmVudCBtZWFuaW5nLlxuICogSW5zcGlyZWQgc29tZXdoYXQgZnJvbSBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9kZDM3NTczMSh2PXZzLjg1KS5hc3B4XG4gKiBCdXQgdGhlc2UgYXJlIFwibW9yZSBnZW5lcmFsXCIsIGFzIHRoZXkgc2hvdWxkIHdvcmsgYWNyb3NzIGJyb3dzZXJzICYgT1Ngcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGVudW0gS2V5Q29kZSB7XG5cdERlcGVuZHNPbktiTGF5b3V0ID0gLTEsXG5cblx0LyoqXG5cdCAqIFBsYWNlZCBmaXJzdCB0byBjb3ZlciB0aGUgMCB2YWx1ZSBvZiB0aGUgZW51bS5cblx0ICovXG5cdFVua25vd24gPSAwLFxuXG5cdEJhY2tzcGFjZSxcblx0VGFiLFxuXHRFbnRlcixcblx0U2hpZnQsXG5cdEN0cmwsXG5cdEFsdCxcblx0UGF1c2VCcmVhayxcblx0Q2Fwc0xvY2ssXG5cdEVzY2FwZSxcblx0U3BhY2UsXG5cdFBhZ2VVcCxcblx0UGFnZURvd24sXG5cdEVuZCxcblx0SG9tZSxcblx0TGVmdEFycm93LFxuXHRVcEFycm93LFxuXHRSaWdodEFycm93LFxuXHREb3duQXJyb3csXG5cdEluc2VydCxcblx0RGVsZXRlLFxuXG5cdERpZ2l0MCxcblx0RGlnaXQxLFxuXHREaWdpdDIsXG5cdERpZ2l0Myxcblx0RGlnaXQ0LFxuXHREaWdpdDUsXG5cdERpZ2l0Nixcblx0RGlnaXQ3LFxuXHREaWdpdDgsXG5cdERpZ2l0OSxcblxuXHRLZXlBLFxuXHRLZXlCLFxuXHRLZXlDLFxuXHRLZXlELFxuXHRLZXlFLFxuXHRLZXlGLFxuXHRLZXlHLFxuXHRLZXlILFxuXHRLZXlJLFxuXHRLZXlKLFxuXHRLZXlLLFxuXHRLZXlMLFxuXHRLZXlNLFxuXHRLZXlOLFxuXHRLZXlPLFxuXHRLZXlQLFxuXHRLZXlRLFxuXHRLZXlSLFxuXHRLZXlTLFxuXHRLZXlULFxuXHRLZXlVLFxuXHRLZXlWLFxuXHRLZXlXLFxuXHRLZXlYLFxuXHRLZXlZLFxuXHRLZXlaLFxuXG5cdE1ldGEsXG5cdENvbnRleHRNZW51LFxuXG5cdEYxLFxuXHRGMixcblx0RjMsXG5cdEY0LFxuXHRGNSxcblx0RjYsXG5cdEY3LFxuXHRGOCxcblx0RjksXG5cdEYxMCxcblx0RjExLFxuXHRGMTIsXG5cdEYxMyxcblx0RjE0LFxuXHRGMTUsXG5cdEYxNixcblx0RjE3LFxuXHRGMTgsXG5cdEYxOSxcblx0RjIwLFxuXHRGMjEsXG5cdEYyMixcblx0RjIzLFxuXHRGMjQsXG5cblx0TnVtTG9jayxcblx0U2Nyb2xsTG9jayxcblxuXHQvKipcblx0ICogVXNlZCBmb3IgbWlzY2VsbGFuZW91cyBjaGFyYWN0ZXJzOyBpdCBjYW4gdmFyeSBieSBrZXlib2FyZC5cblx0ICogRm9yIHRoZSBVUyBzdGFuZGFyZCBrZXlib2FyZCwgdGhlICc7Oicga2V5XG5cdCAqL1xuXHRTZW1pY29sb24sXG5cdC8qKlxuXHQgKiBGb3IgYW55IGNvdW50cnkvcmVnaW9uLCB0aGUgJysnIGtleVxuXHQgKiBGb3IgdGhlIFVTIHN0YW5kYXJkIGtleWJvYXJkLCB0aGUgJz0rJyBrZXlcblx0ICovXG5cdEVxdWFsLFxuXHQvKipcblx0ICogRm9yIGFueSBjb3VudHJ5L3JlZ2lvbiwgdGhlICcsJyBrZXlcblx0ICogRm9yIHRoZSBVUyBzdGFuZGFyZCBrZXlib2FyZCwgdGhlICcsPCcga2V5XG5cdCAqL1xuXHRDb21tYSxcblx0LyoqXG5cdCAqIEZvciBhbnkgY291bnRyeS9yZWdpb24sIHRoZSAnLScga2V5XG5cdCAqIEZvciB0aGUgVVMgc3RhbmRhcmQga2V5Ym9hcmQsIHRoZSAnLV8nIGtleVxuXHQgKi9cblx0TWludXMsXG5cdC8qKlxuXHQgKiBGb3IgYW55IGNvdW50cnkvcmVnaW9uLCB0aGUgJy4nIGtleVxuXHQgKiBGb3IgdGhlIFVTIHN0YW5kYXJkIGtleWJvYXJkLCB0aGUgJy4+JyBrZXlcblx0ICovXG5cdFBlcmlvZCxcblx0LyoqXG5cdCAqIFVzZWQgZm9yIG1pc2NlbGxhbmVvdXMgY2hhcmFjdGVyczsgaXQgY2FuIHZhcnkgYnkga2V5Ym9hcmQuXG5cdCAqIEZvciB0aGUgVVMgc3RhbmRhcmQga2V5Ym9hcmQsIHRoZSAnLz8nIGtleVxuXHQgKi9cblx0U2xhc2gsXG5cdC8qKlxuXHQgKiBVc2VkIGZvciBtaXNjZWxsYW5lb3VzIGNoYXJhY3RlcnM7IGl0IGNhbiB2YXJ5IGJ5IGtleWJvYXJkLlxuXHQgKiBGb3IgdGhlIFVTIHN0YW5kYXJkIGtleWJvYXJkLCB0aGUgJ2B+JyBrZXlcblx0ICovXG5cdEJhY2txdW90ZSxcblx0LyoqXG5cdCAqIFVzZWQgZm9yIG1pc2NlbGxhbmVvdXMgY2hhcmFjdGVyczsgaXQgY2FuIHZhcnkgYnkga2V5Ym9hcmQuXG5cdCAqIEZvciB0aGUgVVMgc3RhbmRhcmQga2V5Ym9hcmQsIHRoZSAnW3snIGtleVxuXHQgKi9cblx0QnJhY2tldExlZnQsXG5cdC8qKlxuXHQgKiBVc2VkIGZvciBtaXNjZWxsYW5lb3VzIGNoYXJhY3RlcnM7IGl0IGNhbiB2YXJ5IGJ5IGtleWJvYXJkLlxuXHQgKiBGb3IgdGhlIFVTIHN0YW5kYXJkIGtleWJvYXJkLCB0aGUgJ1xcfCcga2V5XG5cdCAqL1xuXHRCYWNrc2xhc2gsXG5cdC8qKlxuXHQgKiBVc2VkIGZvciBtaXNjZWxsYW5lb3VzIGNoYXJhY3RlcnM7IGl0IGNhbiB2YXJ5IGJ5IGtleWJvYXJkLlxuXHQgKiBGb3IgdGhlIFVTIHN0YW5kYXJkIGtleWJvYXJkLCB0aGUgJ119JyBrZXlcblx0ICovXG5cdEJyYWNrZXRSaWdodCxcblx0LyoqXG5cdCAqIFVzZWQgZm9yIG1pc2NlbGxhbmVvdXMgY2hhcmFjdGVyczsgaXQgY2FuIHZhcnkgYnkga2V5Ym9hcmQuXG5cdCAqIEZvciB0aGUgVVMgc3RhbmRhcmQga2V5Ym9hcmQsIHRoZSAnJ1wiJyBrZXlcblx0ICovXG5cdFF1b3RlLFxuXHQvKipcblx0ICogVXNlZCBmb3IgbWlzY2VsbGFuZW91cyBjaGFyYWN0ZXJzOyBpdCBjYW4gdmFyeSBieSBrZXlib2FyZC5cblx0ICovXG5cdE9FTV84LFxuXHQvKipcblx0ICogRWl0aGVyIHRoZSBhbmdsZSBicmFja2V0IGtleSBvciB0aGUgYmFja3NsYXNoIGtleSBvbiB0aGUgUlQgMTAyLWtleSBrZXlib2FyZC5cblx0ICovXG5cdEludGxCYWNrc2xhc2gsXG5cblx0TnVtcGFkMCwgLy8gVktfTlVNUEFEMCwgMHg2MCwgTnVtZXJpYyBrZXlwYWQgMCBrZXlcblx0TnVtcGFkMSwgLy8gVktfTlVNUEFEMSwgMHg2MSwgTnVtZXJpYyBrZXlwYWQgMSBrZXlcblx0TnVtcGFkMiwgLy8gVktfTlVNUEFEMiwgMHg2MiwgTnVtZXJpYyBrZXlwYWQgMiBrZXlcblx0TnVtcGFkMywgLy8gVktfTlVNUEFEMywgMHg2MywgTnVtZXJpYyBrZXlwYWQgMyBrZXlcblx0TnVtcGFkNCwgLy8gVktfTlVNUEFENCwgMHg2NCwgTnVtZXJpYyBrZXlwYWQgNCBrZXlcblx0TnVtcGFkNSwgLy8gVktfTlVNUEFENSwgMHg2NSwgTnVtZXJpYyBrZXlwYWQgNSBrZXlcblx0TnVtcGFkNiwgLy8gVktfTlVNUEFENiwgMHg2NiwgTnVtZXJpYyBrZXlwYWQgNiBrZXlcblx0TnVtcGFkNywgLy8gVktfTlVNUEFENywgMHg2NywgTnVtZXJpYyBrZXlwYWQgNyBrZXlcblx0TnVtcGFkOCwgLy8gVktfTlVNUEFEOCwgMHg2OCwgTnVtZXJpYyBrZXlwYWQgOCBrZXlcblx0TnVtcGFkOSwgLy8gVktfTlVNUEFEOSwgMHg2OSwgTnVtZXJpYyBrZXlwYWQgOSBrZXlcblxuXHROdW1wYWRNdWx0aXBseSxcdC8vIFZLX01VTFRJUExZLCAweDZBLCBNdWx0aXBseSBrZXlcblx0TnVtcGFkQWRkLFx0XHQvLyBWS19BREQsIDB4NkIsIEFkZCBrZXlcblx0TlVNUEFEX1NFUEFSQVRPUixcdC8vIFZLX1NFUEFSQVRPUiwgMHg2QywgU2VwYXJhdG9yIGtleVxuXHROdW1wYWRTdWJ0cmFjdCxcdC8vIFZLX1NVQlRSQUNULCAweDZELCBTdWJ0cmFjdCBrZXlcblx0TnVtcGFkRGVjaW1hbCxcdC8vIFZLX0RFQ0lNQUwsIDB4NkUsIERlY2ltYWwga2V5XG5cdE51bXBhZERpdmlkZSxcdC8vIFZLX0RJVklERSwgMHg2RixcblxuXHQvKipcblx0ICogQ292ZXIgYWxsIGtleSBjb2RlcyB3aGVuIElNRSBpcyBwcm9jZXNzaW5nIGlucHV0LlxuXHQgKi9cblx0S0VZX0lOX0NPTVBPU0lUSU9OLFxuXG5cdEFCTlRfQzEsIC8vIEJyYXppbGlhbiAoQUJOVCkgS2V5Ym9hcmRcblx0QUJOVF9DMiwgLy8gQnJhemlsaWFuIChBQk5UKSBLZXlib2FyZFxuXG5cdEF1ZGlvVm9sdW1lTXV0ZSxcblx0QXVkaW9Wb2x1bWVVcCxcblx0QXVkaW9Wb2x1bWVEb3duLFxuXG5cdEJyb3dzZXJTZWFyY2gsXG5cdEJyb3dzZXJIb21lLFxuXHRCcm93c2VyQmFjayxcblx0QnJvd3NlckZvcndhcmQsXG5cblx0TWVkaWFUcmFja05leHQsXG5cdE1lZGlhVHJhY2tQcmV2aW91cyxcblx0TWVkaWFTdG9wLFxuXHRNZWRpYVBsYXlQYXVzZSxcblx0TGF1bmNoTWVkaWFQbGF5ZXIsXG5cdExhdW5jaE1haWwsXG5cdExhdW5jaEFwcDIsXG5cblx0LyoqXG5cdCAqIFZLX0NMRUFSLCAweDBDLCBDTEVBUiBrZXlcblx0ICovXG5cdENsZWFyLFxuXG5cdC8qKlxuXHQgKiBQbGFjZWQgbGFzdCB0byBjb3ZlciB0aGUgbGVuZ3RoIG9mIHRoZSBlbnVtLlxuXHQgKiBQbGVhc2UgZG8gbm90IGRlcGVuZCBvbiB0aGlzIHZhbHVlIVxuXHQgKi9cblx0TUFYX1ZBTFVFXG59XG5cbi8qKlxuICoga2V5Ym9hcmRFdmVudC5jb2RlXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFNjYW5Db2RlIHtcblx0RGVwZW5kc09uS2JMYXlvdXQgPSAtMSxcblx0Tm9uZSxcblx0SHlwZXIsXG5cdFN1cGVyLFxuXHRGbixcblx0Rm5Mb2NrLFxuXHRTdXNwZW5kLFxuXHRSZXN1bWUsXG5cdFR1cmJvLFxuXHRTbGVlcCxcblx0V2FrZVVwLFxuXHRLZXlBLFxuXHRLZXlCLFxuXHRLZXlDLFxuXHRLZXlELFxuXHRLZXlFLFxuXHRLZXlGLFxuXHRLZXlHLFxuXHRLZXlILFxuXHRLZXlJLFxuXHRLZXlKLFxuXHRLZXlLLFxuXHRLZXlMLFxuXHRLZXlNLFxuXHRLZXlOLFxuXHRLZXlPLFxuXHRLZXlQLFxuXHRLZXlRLFxuXHRLZXlSLFxuXHRLZXlTLFxuXHRLZXlULFxuXHRLZXlVLFxuXHRLZXlWLFxuXHRLZXlXLFxuXHRLZXlYLFxuXHRLZXlZLFxuXHRLZXlaLFxuXHREaWdpdDEsXG5cdERpZ2l0Mixcblx0RGlnaXQzLFxuXHREaWdpdDQsXG5cdERpZ2l0NSxcblx0RGlnaXQ2LFxuXHREaWdpdDcsXG5cdERpZ2l0OCxcblx0RGlnaXQ5LFxuXHREaWdpdDAsXG5cdEVudGVyLFxuXHRFc2NhcGUsXG5cdEJhY2tzcGFjZSxcblx0VGFiLFxuXHRTcGFjZSxcblx0TWludXMsXG5cdEVxdWFsLFxuXHRCcmFja2V0TGVmdCxcblx0QnJhY2tldFJpZ2h0LFxuXHRCYWNrc2xhc2gsXG5cdEludGxIYXNoLFxuXHRTZW1pY29sb24sXG5cdFF1b3RlLFxuXHRCYWNrcXVvdGUsXG5cdENvbW1hLFxuXHRQZXJpb2QsXG5cdFNsYXNoLFxuXHRDYXBzTG9jayxcblx0RjEsXG5cdEYyLFxuXHRGMyxcblx0RjQsXG5cdEY1LFxuXHRGNixcblx0RjcsXG5cdEY4LFxuXHRGOSxcblx0RjEwLFxuXHRGMTEsXG5cdEYxMixcblx0UHJpbnRTY3JlZW4sXG5cdFNjcm9sbExvY2ssXG5cdFBhdXNlLFxuXHRJbnNlcnQsXG5cdEhvbWUsXG5cdFBhZ2VVcCxcblx0RGVsZXRlLFxuXHRFbmQsXG5cdFBhZ2VEb3duLFxuXHRBcnJvd1JpZ2h0LFxuXHRBcnJvd0xlZnQsXG5cdEFycm93RG93bixcblx0QXJyb3dVcCxcblx0TnVtTG9jayxcblx0TnVtcGFkRGl2aWRlLFxuXHROdW1wYWRNdWx0aXBseSxcblx0TnVtcGFkU3VidHJhY3QsXG5cdE51bXBhZEFkZCxcblx0TnVtcGFkRW50ZXIsXG5cdE51bXBhZDEsXG5cdE51bXBhZDIsXG5cdE51bXBhZDMsXG5cdE51bXBhZDQsXG5cdE51bXBhZDUsXG5cdE51bXBhZDYsXG5cdE51bXBhZDcsXG5cdE51bXBhZDgsXG5cdE51bXBhZDksXG5cdE51bXBhZDAsXG5cdE51bXBhZERlY2ltYWwsXG5cdEludGxCYWNrc2xhc2gsXG5cdENvbnRleHRNZW51LFxuXHRQb3dlcixcblx0TnVtcGFkRXF1YWwsXG5cdEYxMyxcblx0RjE0LFxuXHRGMTUsXG5cdEYxNixcblx0RjE3LFxuXHRGMTgsXG5cdEYxOSxcblx0RjIwLFxuXHRGMjEsXG5cdEYyMixcblx0RjIzLFxuXHRGMjQsXG5cdE9wZW4sXG5cdEhlbHAsXG5cdFNlbGVjdCxcblx0QWdhaW4sXG5cdFVuZG8sXG5cdEN1dCxcblx0Q29weSxcblx0UGFzdGUsXG5cdEZpbmQsXG5cdEF1ZGlvVm9sdW1lTXV0ZSxcblx0QXVkaW9Wb2x1bWVVcCxcblx0QXVkaW9Wb2x1bWVEb3duLFxuXHROdW1wYWRDb21tYSxcblx0SW50bFJvLFxuXHRLYW5hTW9kZSxcblx0SW50bFllbixcblx0Q29udmVydCxcblx0Tm9uQ29udmVydCxcblx0TGFuZzEsXG5cdExhbmcyLFxuXHRMYW5nMyxcblx0TGFuZzQsXG5cdExhbmc1LFxuXHRBYm9ydCxcblx0UHJvcHMsXG5cdE51bXBhZFBhcmVuTGVmdCxcblx0TnVtcGFkUGFyZW5SaWdodCxcblx0TnVtcGFkQmFja3NwYWNlLFxuXHROdW1wYWRNZW1vcnlTdG9yZSxcblx0TnVtcGFkTWVtb3J5UmVjYWxsLFxuXHROdW1wYWRNZW1vcnlDbGVhcixcblx0TnVtcGFkTWVtb3J5QWRkLFxuXHROdW1wYWRNZW1vcnlTdWJ0cmFjdCxcblx0TnVtcGFkQ2xlYXIsXG5cdE51bXBhZENsZWFyRW50cnksXG5cdENvbnRyb2xMZWZ0LFxuXHRTaGlmdExlZnQsXG5cdEFsdExlZnQsXG5cdE1ldGFMZWZ0LFxuXHRDb250cm9sUmlnaHQsXG5cdFNoaWZ0UmlnaHQsXG5cdEFsdFJpZ2h0LFxuXHRNZXRhUmlnaHQsXG5cdEJyaWdodG5lc3NVcCxcblx0QnJpZ2h0bmVzc0Rvd24sXG5cdE1lZGlhUGxheSxcblx0TWVkaWFSZWNvcmQsXG5cdE1lZGlhRmFzdEZvcndhcmQsXG5cdE1lZGlhUmV3aW5kLFxuXHRNZWRpYVRyYWNrTmV4dCxcblx0TWVkaWFUcmFja1ByZXZpb3VzLFxuXHRNZWRpYVN0b3AsXG5cdEVqZWN0LFxuXHRNZWRpYVBsYXlQYXVzZSxcblx0TWVkaWFTZWxlY3QsXG5cdExhdW5jaE1haWwsXG5cdExhdW5jaEFwcDIsXG5cdExhdW5jaEFwcDEsXG5cdFNlbGVjdFRhc2ssXG5cdExhdW5jaFNjcmVlblNhdmVyLFxuXHRCcm93c2VyU2VhcmNoLFxuXHRCcm93c2VySG9tZSxcblx0QnJvd3NlckJhY2ssXG5cdEJyb3dzZXJGb3J3YXJkLFxuXHRCcm93c2VyU3RvcCxcblx0QnJvd3NlclJlZnJlc2gsXG5cdEJyb3dzZXJGYXZvcml0ZXMsXG5cdFpvb21Ub2dnbGUsXG5cdE1haWxSZXBseSxcblx0TWFpbEZvcndhcmQsXG5cdE1haWxTZW5kLFxuXG5cdE1BWF9WQUxVRVxufVxuXG5jbGFzcyBLZXlDb2RlU3RyTWFwIHtcblxuXHRwdWJsaWMgX2tleUNvZGVUb1N0cjogc3RyaW5nW107XG5cdHB1YmxpYyBfc3RyVG9LZXlDb2RlOiB7IFtzdHI6IHN0cmluZ106IEtleUNvZGUgfTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLl9rZXlDb2RlVG9TdHIgPSBbXTtcblx0XHR0aGlzLl9zdHJUb0tleUNvZGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR9XG5cblx0ZGVmaW5lKGtleUNvZGU6IEtleUNvZGUsIHN0cjogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5fa2V5Q29kZVRvU3RyW2tleUNvZGVdID0gc3RyO1xuXHRcdHRoaXMuX3N0clRvS2V5Q29kZVtzdHIudG9Mb3dlckNhc2UoKV0gPSBrZXlDb2RlO1xuXHR9XG5cblx0a2V5Q29kZVRvU3RyKGtleUNvZGU6IEtleUNvZGUpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLl9rZXlDb2RlVG9TdHJba2V5Q29kZV07XG5cdH1cblxuXHRzdHJUb0tleUNvZGUoc3RyOiBzdHJpbmcpOiBLZXlDb2RlIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RyVG9LZXlDb2RlW3N0ci50b0xvd2VyQ2FzZSgpXSB8fCBLZXlDb2RlLlVua25vd247XG5cdH1cbn1cblxuY29uc3QgdWlNYXAgPSBuZXcgS2V5Q29kZVN0ck1hcCgpO1xuY29uc3QgdXNlclNldHRpbmdzVVNNYXAgPSBuZXcgS2V5Q29kZVN0ck1hcCgpO1xuY29uc3QgdXNlclNldHRpbmdzR2VuZXJhbE1hcCA9IG5ldyBLZXlDb2RlU3RyTWFwKCk7XG5leHBvcnQgY29uc3QgRVZFTlRfS0VZX0NPREVfTUFQOiB7IFtrZXlDb2RlOiBudW1iZXJdOiBLZXlDb2RlIH0gPSBuZXcgQXJyYXkoMjMwKTtcbmV4cG9ydCBjb25zdCBOQVRJVkVfV0lORE9XU19LRVlfQ09ERV9UT19LRVlfQ09ERTogeyBbbmF0aXZlS2V5Q29kZTogc3RyaW5nXTogS2V5Q29kZSB9ID0ge307XG5jb25zdCBzY2FuQ29kZUludFRvU3RyOiBzdHJpbmdbXSA9IFtdO1xuY29uc3Qgc2NhbkNvZGVTdHJUb0ludDogeyBbY29kZTogc3RyaW5nXTogbnVtYmVyIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuY29uc3Qgc2NhbkNvZGVMb3dlckNhc2VTdHJUb0ludDogeyBbY29kZTogc3RyaW5nXTogbnVtYmVyIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5leHBvcnQgY29uc3QgU2NhbkNvZGVVdGlscyA9IHtcblx0bG93ZXJDYXNlVG9FbnVtOiAoc2NhbkNvZGU6IHN0cmluZykgPT4gc2NhbkNvZGVMb3dlckNhc2VTdHJUb0ludFtzY2FuQ29kZV0gfHwgU2NhbkNvZGUuTm9uZSxcblx0dG9FbnVtOiAoc2NhbkNvZGU6IHN0cmluZykgPT4gc2NhbkNvZGVTdHJUb0ludFtzY2FuQ29kZV0gfHwgU2NhbkNvZGUuTm9uZSxcblx0dG9TdHJpbmc6IChzY2FuQ29kZTogU2NhbkNvZGUpID0+IHNjYW5Db2RlSW50VG9TdHJbc2NhbkNvZGVdIHx8ICdOb25lJ1xufTtcblxuXG5leHBvcnQgbmFtZXNwYWNlIEtleUNvZGVVdGlscyB7XG5cdGV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhrZXlDb2RlOiBLZXlDb2RlKTogc3RyaW5nIHtcblx0XHRyZXR1cm4gdWlNYXAua2V5Q29kZVRvU3RyKGtleUNvZGUpO1xuXHR9XG5cdGV4cG9ydCBmdW5jdGlvbiBmcm9tU3RyaW5nKGtleTogc3RyaW5nKTogS2V5Q29kZSB7XG5cdFx0cmV0dXJuIHVpTWFwLnN0clRvS2V5Q29kZShrZXkpO1xuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIHRvVXNlclNldHRpbmdzVVMoa2V5Q29kZTogS2V5Q29kZSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIHVzZXJTZXR0aW5nc1VTTWFwLmtleUNvZGVUb1N0cihrZXlDb2RlKTtcblx0fVxuXHRleHBvcnQgZnVuY3Rpb24gdG9Vc2VyU2V0dGluZ3NHZW5lcmFsKGtleUNvZGU6IEtleUNvZGUpOiBzdHJpbmcge1xuXHRcdHJldHVybiB1c2VyU2V0dGluZ3NHZW5lcmFsTWFwLmtleUNvZGVUb1N0cihrZXlDb2RlKTtcblx0fVxuXHRleHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJTZXR0aW5ncyhrZXk6IHN0cmluZyk6IEtleUNvZGUge1xuXHRcdHJldHVybiB1c2VyU2V0dGluZ3NVU01hcC5zdHJUb0tleUNvZGUoa2V5KSB8fCB1c2VyU2V0dGluZ3NHZW5lcmFsTWFwLnN0clRvS2V5Q29kZShrZXkpO1xuXHR9XG5cblx0ZXhwb3J0IGZ1bmN0aW9uIHRvRWxlY3Ryb25BY2NlbGVyYXRvcihrZXlDb2RlOiBLZXlDb2RlKTogc3RyaW5nIHwgbnVsbCB7XG5cdFx0aWYgKGtleUNvZGUgPj0gS2V5Q29kZS5OdW1wYWQwICYmIGtleUNvZGUgPD0gS2V5Q29kZS5OdW1wYWREaXZpZGUpIHtcblx0XHRcdC8vIFtFbGVjdHJvbiBBY2NlbGVyYXRvcnNdIEVsZWN0cm9uIGlzIGFibGUgdG8gcGFyc2UgbnVtcGFkIGtleXMsIGJ1dCB1bmZvcnR1bmF0ZWx5IGl0XG5cdFx0XHQvLyByZW5kZXJzIHRoZW0ganVzdCBhcyByZWd1bGFyIGtleXMgaW4gbWVudXMuIEZvciBleGFtcGxlLCBudW0wIGlzIHJlbmRlcmVkIGFzIFwiMFwiLFxuXHRcdFx0Ly8gbnVtZGl2IGlzIHJlbmRlcmVkIGFzIFwiL1wiLCBudW1zdWIgaXMgcmVuZGVyZWQgYXMgXCItXCIuXG5cdFx0XHQvL1xuXHRcdFx0Ly8gVGhpcyBjYW4gbGVhZCB0byBpbmNyZWRpYmxlIGNvbmZ1c2lvbiwgYXMgaXQgbWFrZXMgbnVtcGFkIGJhc2VkIGtleWJpbmRpbmdzIGluZGlzdGluZ3Vpc2hhYmxlXG5cdFx0XHQvLyBmcm9tIGtleWJpbmRpbmdzIGJhc2VkIG9uIHJlZ3VsYXIga2V5cy5cblx0XHRcdC8vXG5cdFx0XHQvLyBXZSB0aGVyZWZvcmUgbmVlZCB0byBmYWxsIGJhY2sgdG8gY3VzdG9tIHJlbmRlcmluZyBmb3IgbnVtcGFkIGtleXMuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRzd2l0Y2ggKGtleUNvZGUpIHtcblx0XHRcdGNhc2UgS2V5Q29kZS5VcEFycm93OlxuXHRcdFx0XHRyZXR1cm4gJ1VwJztcblx0XHRcdGNhc2UgS2V5Q29kZS5Eb3duQXJyb3c6XG5cdFx0XHRcdHJldHVybiAnRG93bic7XG5cdFx0XHRjYXNlIEtleUNvZGUuTGVmdEFycm93OlxuXHRcdFx0XHRyZXR1cm4gJ0xlZnQnO1xuXHRcdFx0Y2FzZSBLZXlDb2RlLlJpZ2h0QXJyb3c6XG5cdFx0XHRcdHJldHVybiAnUmlnaHQnO1xuXHRcdH1cblxuXHRcdHJldHVybiB1aU1hcC5rZXlDb2RlVG9TdHIoa2V5Q29kZSk7XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IGVudW0gS2V5TW9kIHtcblx0Q3RybENtZCA9ICgxIDw8IDExKSA+Pj4gMCxcblx0U2hpZnQgPSAoMSA8PCAxMCkgPj4+IDAsXG5cdEFsdCA9ICgxIDw8IDkpID4+PiAwLFxuXHRXaW5DdHJsID0gKDEgPDwgOCkgPj4+IDAsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBLZXlDaG9yZChmaXJzdFBhcnQ6IG51bWJlciwgc2Vjb25kUGFydDogbnVtYmVyKTogbnVtYmVyIHtcblx0Y29uc3QgY2hvcmRQYXJ0ID0gKChzZWNvbmRQYXJ0ICYgMHgwMDAwRkZGRikgPDwgMTYpID4+PiAwO1xuXHRyZXR1cm4gKGZpcnN0UGFydCB8IGNob3JkUGFydCkgPj4+IDA7XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IGlsbGVnYWxBcmd1bWVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2Vycm9ycyc7XG5pbXBvcnQgeyBLZXlDb2RlLCBTY2FuQ29kZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2tleUNvZGVzJztcbmltcG9ydCB7IE9wZXJhdGluZ1N5c3RlbSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3BsYXRmb3JtJztcblxuLyoqXG4gKiBCaW5hcnkgZW5jb2Rpbmcgc3RyYXRlZ3k6XG4gKiBgYGBcbiAqICAgIDExMTEgMTFcbiAqICAgIDU0MzIgMTA5OCA3NjU0IDMyMTBcbiAqICAgIC0tLS0gQ1NBVyBLS0tLIEtLS0tcbiAqICBDID0gYml0IDExID0gY3RybENtZCBmbGFnXG4gKiAgUyA9IGJpdCAxMCA9IHNoaWZ0IGZsYWdcbiAqICBBID0gYml0IDkgPSBhbHQgZmxhZ1xuICogIFcgPSBiaXQgOCA9IHdpbkN0cmwgZmxhZ1xuICogIEsgPSBiaXRzIDAtNyA9IGtleSBjb2RlXG4gKiBgYGBcbiAqL1xuY29uc3QgZW51bSBCaW5hcnlLZXliaW5kaW5nc01hc2sge1xuXHRDdHJsQ21kID0gKDEgPDwgMTEpID4+PiAwLFxuXHRTaGlmdCA9ICgxIDw8IDEwKSA+Pj4gMCxcblx0QWx0ID0gKDEgPDwgOSkgPj4+IDAsXG5cdFdpbkN0cmwgPSAoMSA8PCA4KSA+Pj4gMCxcblx0S2V5Q29kZSA9IDB4MDAwMDAwRkZcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29kZUtleWJpbmRpbmcoa2V5YmluZGluZzogbnVtYmVyIHwgbnVtYmVyW10sIE9TOiBPcGVyYXRpbmdTeXN0ZW0pOiBLZXliaW5kaW5nIHwgbnVsbCB7XG5cdGlmICh0eXBlb2Yga2V5YmluZGluZyA9PT0gJ251bWJlcicpIHtcblx0XHRpZiAoa2V5YmluZGluZyA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGNvbnN0IGZpcnN0Q2hvcmQgPSAoa2V5YmluZGluZyAmIDB4MDAwMEZGRkYpID4+PiAwO1xuXHRcdGNvbnN0IHNlY29uZENob3JkID0gKGtleWJpbmRpbmcgJiAweEZGRkYwMDAwKSA+Pj4gMTY7XG5cdFx0aWYgKHNlY29uZENob3JkICE9PSAwKSB7XG5cdFx0XHRyZXR1cm4gbmV3IEtleWJpbmRpbmcoW1xuXHRcdFx0XHRjcmVhdGVTaW1wbGVLZXliaW5kaW5nKGZpcnN0Q2hvcmQsIE9TKSxcblx0XHRcdFx0Y3JlYXRlU2ltcGxlS2V5YmluZGluZyhzZWNvbmRDaG9yZCwgT1MpXG5cdFx0XHRdKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5ldyBLZXliaW5kaW5nKFtjcmVhdGVTaW1wbGVLZXliaW5kaW5nKGZpcnN0Q2hvcmQsIE9TKV0pO1xuXHR9IGVsc2Uge1xuXHRcdGNvbnN0IGNob3JkcyA9IFtdO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwga2V5YmluZGluZy5sZW5ndGg7IGkrKykge1xuXHRcdFx0Y2hvcmRzLnB1c2goY3JlYXRlU2ltcGxlS2V5YmluZGluZyhrZXliaW5kaW5nW2ldLCBPUykpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3IEtleWJpbmRpbmcoY2hvcmRzKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2ltcGxlS2V5YmluZGluZyhrZXliaW5kaW5nOiBudW1iZXIsIE9TOiBPcGVyYXRpbmdTeXN0ZW0pOiBLZXlDb2RlQ2hvcmQge1xuXG5cdGNvbnN0IGN0cmxDbWQgPSAoa2V5YmluZGluZyAmIEJpbmFyeUtleWJpbmRpbmdzTWFzay5DdHJsQ21kID8gdHJ1ZSA6IGZhbHNlKTtcblx0Y29uc3Qgd2luQ3RybCA9IChrZXliaW5kaW5nICYgQmluYXJ5S2V5YmluZGluZ3NNYXNrLldpbkN0cmwgPyB0cnVlIDogZmFsc2UpO1xuXG5cdGNvbnN0IGN0cmxLZXkgPSAoT1MgPT09IE9wZXJhdGluZ1N5c3RlbS5NYWNpbnRvc2ggPyB3aW5DdHJsIDogY3RybENtZCk7XG5cdGNvbnN0IHNoaWZ0S2V5ID0gKGtleWJpbmRpbmcgJiBCaW5hcnlLZXliaW5kaW5nc01hc2suU2hpZnQgPyB0cnVlIDogZmFsc2UpO1xuXHRjb25zdCBhbHRLZXkgPSAoa2V5YmluZGluZyAmIEJpbmFyeUtleWJpbmRpbmdzTWFzay5BbHQgPyB0cnVlIDogZmFsc2UpO1xuXHRjb25zdCBtZXRhS2V5ID0gKE9TID09PSBPcGVyYXRpbmdTeXN0ZW0uTWFjaW50b3NoID8gY3RybENtZCA6IHdpbkN0cmwpO1xuXHRjb25zdCBrZXlDb2RlID0gKGtleWJpbmRpbmcgJiBCaW5hcnlLZXliaW5kaW5nc01hc2suS2V5Q29kZSk7XG5cblx0cmV0dXJuIG5ldyBLZXlDb2RlQ2hvcmQoY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSwga2V5Q29kZSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kaWZpZXJzIHtcblx0cmVhZG9ubHkgY3RybEtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgc2hpZnRLZXk6IGJvb2xlYW47XG5cdHJlYWRvbmx5IGFsdEtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgbWV0YUtleTogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hvcmQgd2hpY2ggdXNlcyB0aGUgYGtleUNvZGVgIGZpZWxkIG9mIGtleWJvYXJkIGV2ZW50cy5cbiAqIEEgY2hvcmQgaXMgYSBjb21iaW5hdGlvbiBvZiBrZXlzIHByZXNzZWQgc2ltdWx0YW5lb3VzbHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBLZXlDb2RlQ2hvcmQgaW1wbGVtZW50cyBNb2RpZmllcnMge1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyByZWFkb25seSBjdHJsS2V5OiBib29sZWFuLFxuXHRcdHB1YmxpYyByZWFkb25seSBzaGlmdEtleTogYm9vbGVhbixcblx0XHRwdWJsaWMgcmVhZG9ubHkgYWx0S2V5OiBib29sZWFuLFxuXHRcdHB1YmxpYyByZWFkb25seSBtZXRhS2V5OiBib29sZWFuLFxuXHRcdHB1YmxpYyByZWFkb25seSBrZXlDb2RlOiBLZXlDb2RlXG5cdCkgeyB9XG5cblx0cHVibGljIGVxdWFscyhvdGhlcjogQ2hvcmQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0b3RoZXIgaW5zdGFuY2VvZiBLZXlDb2RlQ2hvcmRcblx0XHRcdCYmIHRoaXMuY3RybEtleSA9PT0gb3RoZXIuY3RybEtleVxuXHRcdFx0JiYgdGhpcy5zaGlmdEtleSA9PT0gb3RoZXIuc2hpZnRLZXlcblx0XHRcdCYmIHRoaXMuYWx0S2V5ID09PSBvdGhlci5hbHRLZXlcblx0XHRcdCYmIHRoaXMubWV0YUtleSA9PT0gb3RoZXIubWV0YUtleVxuXHRcdFx0JiYgdGhpcy5rZXlDb2RlID09PSBvdGhlci5rZXlDb2RlXG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyBnZXRIYXNoQ29kZSgpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGN0cmwgPSB0aGlzLmN0cmxLZXkgPyAnMScgOiAnMCc7XG5cdFx0Y29uc3Qgc2hpZnQgPSB0aGlzLnNoaWZ0S2V5ID8gJzEnIDogJzAnO1xuXHRcdGNvbnN0IGFsdCA9IHRoaXMuYWx0S2V5ID8gJzEnIDogJzAnO1xuXHRcdGNvbnN0IG1ldGEgPSB0aGlzLm1ldGFLZXkgPyAnMScgOiAnMCc7XG5cdFx0cmV0dXJuIGBLJHtjdHJsfSR7c2hpZnR9JHthbHR9JHttZXRhfSR7dGhpcy5rZXlDb2RlfWA7XG5cdH1cblxuXHRwdWJsaWMgaXNNb2RpZmllcktleSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0dGhpcy5rZXlDb2RlID09PSBLZXlDb2RlLlVua25vd25cblx0XHRcdHx8IHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5DdHJsXG5cdFx0XHR8fCB0aGlzLmtleUNvZGUgPT09IEtleUNvZGUuTWV0YVxuXHRcdFx0fHwgdGhpcy5rZXlDb2RlID09PSBLZXlDb2RlLkFsdFxuXHRcdFx0fHwgdGhpcy5rZXlDb2RlID09PSBLZXlDb2RlLlNoaWZ0XG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyB0b0tleWJpbmRpbmcoKTogS2V5YmluZGluZyB7XG5cdFx0cmV0dXJuIG5ldyBLZXliaW5kaW5nKFt0aGlzXSk7XG5cdH1cblxuXHQvKipcblx0ICogRG9lcyB0aGlzIGtleWJpbmRpbmcgcmVmZXIgdG8gdGhlIGtleSBjb2RlIG9mIGEgbW9kaWZpZXIgYW5kIGl0IGFsc28gaGFzIHRoZSBtb2RpZmllciBmbGFnP1xuXHQgKi9cblx0cHVibGljIGlzRHVwbGljYXRlTW9kaWZpZXJDYXNlKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHQodGhpcy5jdHJsS2V5ICYmIHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5DdHJsKVxuXHRcdFx0fHwgKHRoaXMuc2hpZnRLZXkgJiYgdGhpcy5rZXlDb2RlID09PSBLZXlDb2RlLlNoaWZ0KVxuXHRcdFx0fHwgKHRoaXMuYWx0S2V5ICYmIHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5BbHQpXG5cdFx0XHR8fCAodGhpcy5tZXRhS2V5ICYmIHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5NZXRhKVxuXHRcdCk7XG5cdH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hvcmQgd2hpY2ggdXNlcyB0aGUgYGNvZGVgIGZpZWxkIG9mIGtleWJvYXJkIGV2ZW50cy5cbiAqIEEgY2hvcmQgaXMgYSBjb21iaW5hdGlvbiBvZiBrZXlzIHByZXNzZWQgc2ltdWx0YW5lb3VzbHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2FuQ29kZUNob3JkIGltcGxlbWVudHMgTW9kaWZpZXJzIHtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwdWJsaWMgcmVhZG9ubHkgY3RybEtleTogYm9vbGVhbixcblx0XHRwdWJsaWMgcmVhZG9ubHkgc2hpZnRLZXk6IGJvb2xlYW4sXG5cdFx0cHVibGljIHJlYWRvbmx5IGFsdEtleTogYm9vbGVhbixcblx0XHRwdWJsaWMgcmVhZG9ubHkgbWV0YUtleTogYm9vbGVhbixcblx0XHRwdWJsaWMgcmVhZG9ubHkgc2NhbkNvZGU6IFNjYW5Db2RlXG5cdCkgeyB9XG5cblx0cHVibGljIGVxdWFscyhvdGhlcjogQ2hvcmQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0b3RoZXIgaW5zdGFuY2VvZiBTY2FuQ29kZUNob3JkXG5cdFx0XHQmJiB0aGlzLmN0cmxLZXkgPT09IG90aGVyLmN0cmxLZXlcblx0XHRcdCYmIHRoaXMuc2hpZnRLZXkgPT09IG90aGVyLnNoaWZ0S2V5XG5cdFx0XHQmJiB0aGlzLmFsdEtleSA9PT0gb3RoZXIuYWx0S2V5XG5cdFx0XHQmJiB0aGlzLm1ldGFLZXkgPT09IG90aGVyLm1ldGFLZXlcblx0XHRcdCYmIHRoaXMuc2NhbkNvZGUgPT09IG90aGVyLnNjYW5Db2RlXG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyBnZXRIYXNoQ29kZSgpOiBzdHJpbmcge1xuXHRcdGNvbnN0IGN0cmwgPSB0aGlzLmN0cmxLZXkgPyAnMScgOiAnMCc7XG5cdFx0Y29uc3Qgc2hpZnQgPSB0aGlzLnNoaWZ0S2V5ID8gJzEnIDogJzAnO1xuXHRcdGNvbnN0IGFsdCA9IHRoaXMuYWx0S2V5ID8gJzEnIDogJzAnO1xuXHRcdGNvbnN0IG1ldGEgPSB0aGlzLm1ldGFLZXkgPyAnMScgOiAnMCc7XG5cdFx0cmV0dXJuIGBTJHtjdHJsfSR7c2hpZnR9JHthbHR9JHttZXRhfSR7dGhpcy5zY2FuQ29kZX1gO1xuXHR9XG5cblx0LyoqXG5cdCAqIERvZXMgdGhpcyBrZXliaW5kaW5nIHJlZmVyIHRvIHRoZSBrZXkgY29kZSBvZiBhIG1vZGlmaWVyIGFuZCBpdCBhbHNvIGhhcyB0aGUgbW9kaWZpZXIgZmxhZz9cblx0ICovXG5cdHB1YmxpYyBpc0R1cGxpY2F0ZU1vZGlmaWVyQ2FzZSgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gKFxuXHRcdFx0KHRoaXMuY3RybEtleSAmJiAodGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuQ29udHJvbExlZnQgfHwgdGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuQ29udHJvbFJpZ2h0KSlcblx0XHRcdHx8ICh0aGlzLnNoaWZ0S2V5ICYmICh0aGlzLnNjYW5Db2RlID09PSBTY2FuQ29kZS5TaGlmdExlZnQgfHwgdGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuU2hpZnRSaWdodCkpXG5cdFx0XHR8fCAodGhpcy5hbHRLZXkgJiYgKHRoaXMuc2NhbkNvZGUgPT09IFNjYW5Db2RlLkFsdExlZnQgfHwgdGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuQWx0UmlnaHQpKVxuXHRcdFx0fHwgKHRoaXMubWV0YUtleSAmJiAodGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuTWV0YUxlZnQgfHwgdGhpcy5zY2FuQ29kZSA9PT0gU2NhbkNvZGUuTWV0YVJpZ2h0KSlcblx0XHQpO1xuXHR9XG59XG5cbmV4cG9ydCB0eXBlIENob3JkID0gS2V5Q29kZUNob3JkIHwgU2NhbkNvZGVDaG9yZDtcblxuLyoqXG4gKiBBIGtleWJpbmRpbmcgaXMgYSBzZXF1ZW5jZSBvZiBjaG9yZHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBLZXliaW5kaW5nIHtcblxuXHRwdWJsaWMgcmVhZG9ubHkgY2hvcmRzOiBDaG9yZFtdO1xuXG5cdGNvbnN0cnVjdG9yKGNob3JkczogQ2hvcmRbXSkge1xuXHRcdGlmIChjaG9yZHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBpbGxlZ2FsQXJndW1lbnQoYGNob3Jkc2ApO1xuXHRcdH1cblx0XHR0aGlzLmNob3JkcyA9IGNob3Jkcztcblx0fVxuXG5cdHB1YmxpYyBnZXRIYXNoQ29kZSgpOiBzdHJpbmcge1xuXHRcdGxldCByZXN1bHQgPSAnJztcblx0XHRmb3IgKGxldCBpID0gMCwgbGVuID0gdGhpcy5jaG9yZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdGlmIChpICE9PSAwKSB7XG5cdFx0XHRcdHJlc3VsdCArPSAnOyc7XG5cdFx0XHR9XG5cdFx0XHRyZXN1bHQgKz0gdGhpcy5jaG9yZHNbaV0uZ2V0SGFzaENvZGUoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHB1YmxpYyBlcXVhbHMob3RoZXI6IEtleWJpbmRpbmcgfCBudWxsKTogYm9vbGVhbiB7XG5cdFx0aWYgKG90aGVyID09PSBudWxsKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGlmICh0aGlzLmNob3Jkcy5sZW5ndGggIT09IG90aGVyLmNob3Jkcy5sZW5ndGgpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNob3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKCF0aGlzLmNob3Jkc1tpXS5lcXVhbHMob3RoZXIuY2hvcmRzW2ldKSkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSZXNvbHZlZENob3JkIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHVibGljIHJlYWRvbmx5IGN0cmxLZXk6IGJvb2xlYW4sXG5cdFx0cHVibGljIHJlYWRvbmx5IHNoaWZ0S2V5OiBib29sZWFuLFxuXHRcdHB1YmxpYyByZWFkb25seSBhbHRLZXk6IGJvb2xlYW4sXG5cdFx0cHVibGljIHJlYWRvbmx5IG1ldGFLZXk6IGJvb2xlYW4sXG5cdFx0cHVibGljIHJlYWRvbmx5IGtleUxhYmVsOiBzdHJpbmcgfCBudWxsLFxuXHRcdHB1YmxpYyByZWFkb25seSBrZXlBcmlhTGFiZWw6IHN0cmluZyB8IG51bGxcblx0KSB7IH1cbn1cblxuZXhwb3J0IHR5cGUgU2luZ2xlTW9kaWZpZXJDaG9yZCA9ICdjdHJsJyB8ICdzaGlmdCcgfCAnYWx0JyB8ICdtZXRhJztcblxuLyoqXG4gKiBBIHJlc29sdmVkIGtleWJpbmRpbmcuIENvbnNpc3RzIG9mIG9uZSBvciBtdWx0aXBsZSBjaG9yZHMuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXNvbHZlZEtleWJpbmRpbmcge1xuXHQvKipcblx0ICogVGhpcyBwcmludHMgdGhlIGJpbmRpbmcgaW4gYSBmb3JtYXQgc3VpdGFibGUgZm9yIGRpc3BsYXlpbmcgaW4gdGhlIFVJLlxuXHQgKi9cblx0cHVibGljIGFic3RyYWN0IGdldExhYmVsKCk6IHN0cmluZyB8IG51bGw7XG5cdC8qKlxuXHQgKiBUaGlzIHByaW50cyB0aGUgYmluZGluZyBpbiBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgQVJJQS5cblx0ICovXG5cdHB1YmxpYyBhYnN0cmFjdCBnZXRBcmlhTGFiZWwoKTogc3RyaW5nIHwgbnVsbDtcblx0LyoqXG5cdCAqIFRoaXMgcHJpbnRzIHRoZSBiaW5kaW5nIGluIGEgZm9ybWF0IHN1aXRhYmxlIGZvciBlbGVjdHJvbidzIGFjY2VsZXJhdG9ycy5cblx0ICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGVjdHJvbi9lbGVjdHJvbi9ibG9iL21hc3Rlci9kb2NzL2FwaS9hY2NlbGVyYXRvci5tZFxuXHQgKi9cblx0cHVibGljIGFic3RyYWN0IGdldEVsZWN0cm9uQWNjZWxlcmF0b3IoKTogc3RyaW5nIHwgbnVsbDtcblx0LyoqXG5cdCAqIFRoaXMgcHJpbnRzIHRoZSBiaW5kaW5nIGluIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB1c2VyIHNldHRpbmdzLlxuXHQgKi9cblx0cHVibGljIGFic3RyYWN0IGdldFVzZXJTZXR0aW5nc0xhYmVsKCk6IHN0cmluZyB8IG51bGw7XG5cdC8qKlxuXHQgKiBJcyB0aGUgdXNlciBzZXR0aW5ncyBsYWJlbCByZWZsZWN0aW5nIHRoZSBsYWJlbD9cblx0ICovXG5cdHB1YmxpYyBhYnN0cmFjdCBpc1dZU0lXWUcoKTogYm9vbGVhbjtcblx0LyoqXG5cdCAqIERvZXMgdGhlIGtleWJpbmRpbmcgY29uc2lzdCBvZiBtb3JlIHRoYW4gb25lIGNob3JkP1xuXHQgKi9cblx0cHVibGljIGFic3RyYWN0IGhhc011bHRpcGxlQ2hvcmRzKCk6IGJvb2xlYW47XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBjaG9yZHMgdGhhdCBjb21wcmlzZSBvZiB0aGUga2V5YmluZGluZy5cblx0ICovXG5cdHB1YmxpYyBhYnN0cmFjdCBnZXRDaG9yZHMoKTogUmVzb2x2ZWRDaG9yZFtdO1xuXHQvKipcblx0ICogUmV0dXJucyB0aGUgY2hvcmRzIGFzIHN0cmluZ3MgdXNlZnVsIGZvciBkaXNwYXRjaGluZy5cblx0ICogUmV0dXJucyBudWxsIGZvciBtb2RpZmllciBvbmx5IGNob3Jkcy5cblx0ICogQGV4YW1wbGUga2V5YmluZGluZyBcIlNoaWZ0XCIgLT4gbnVsbFxuXHQgKiBAZXhhbXBsZSBrZXliaW5kaW5nIChcIkRcIiB3aXRoIHNoaWZ0ID09IHRydWUpIC0+IFwic2hpZnQrRFwiXG5cdCAqL1xuXHRwdWJsaWMgYWJzdHJhY3QgZ2V0RGlzcGF0Y2hDaG9yZHMoKTogKHN0cmluZyB8IG51bGwpW107XG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBtb2RpZmllciBvbmx5IGNob3JkcyBhcyBzdHJpbmdzIHVzZWZ1bCBmb3IgZGlzcGF0Y2hpbmcuXG5cdCAqIFJldHVybnMgbnVsbCBmb3IgY2hvcmRzIHRoYXQgY29udGFpbiBtb3JlIHRoYW4gb25lIG1vZGlmaWVyIG9yIGEgcmVndWxhciBrZXkuXG5cdCAqIEBleGFtcGxlIGtleWJpbmRpbmcgXCJTaGlmdFwiIC0+IFwic2hpZnRcIlxuXHQgKiBAZXhhbXBsZSBrZXliaW5kaW5nIChcIkRcIiB3aXRoIHNoaWZ0ID09IHRydWVcIikgLT4gbnVsbFxuXHQgKi9cblx0cHVibGljIGFic3RyYWN0IGdldFNpbmdsZU1vZGlmaWVyRGlzcGF0Y2hDaG9yZHMoKTogKFNpbmdsZU1vZGlmaWVyQ2hvcmQgfCBudWxsKVtdO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgKiBhcyBicm93c2VyIGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9icm93c2VyJztcbmltcG9ydCB7IEVWRU5UX0tFWV9DT0RFX01BUCwgS2V5Q29kZSwgS2V5Q29kZVV0aWxzLCBLZXlNb2QgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9rZXlDb2Rlcyc7XG5pbXBvcnQgeyBLZXlDb2RlQ2hvcmQgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9rZXliaW5kaW5ncyc7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICd2cy9iYXNlL2NvbW1vbi9wbGF0Zm9ybSc7XG5cblxuXG5mdW5jdGlvbiBleHRyYWN0S2V5Q29kZShlOiBLZXlib2FyZEV2ZW50KTogS2V5Q29kZSB7XG5cdGlmIChlLmNoYXJDb2RlKSB7XG5cdFx0Ly8gXCJrZXlwcmVzc1wiIGV2ZW50cyBtb3N0bHlcblx0XHRjb25zdCBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlKS50b1VwcGVyQ2FzZSgpO1xuXHRcdHJldHVybiBLZXlDb2RlVXRpbHMuZnJvbVN0cmluZyhjaGFyKTtcblx0fVxuXG5cdGNvbnN0IGtleUNvZGUgPSBlLmtleUNvZGU7XG5cblx0Ly8gYnJvd3NlciBxdWlya3Ncblx0aWYgKGtleUNvZGUgPT09IDMpIHtcblx0XHRyZXR1cm4gS2V5Q29kZS5QYXVzZUJyZWFrO1xuXHR9IGVsc2UgaWYgKGJyb3dzZXIuaXNGaXJlZm94KSB7XG5cdFx0c3dpdGNoIChrZXlDb2RlKSB7XG5cdFx0XHRjYXNlIDU5OiByZXR1cm4gS2V5Q29kZS5TZW1pY29sb247XG5cdFx0XHRjYXNlIDYwOlxuXHRcdFx0XHRpZiAocGxhdGZvcm0uaXNMaW51eCkgeyByZXR1cm4gS2V5Q29kZS5JbnRsQmFja3NsYXNoOyB9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSA2MTogcmV0dXJuIEtleUNvZGUuRXF1YWw7XG5cdFx0XHQvLyBiYXNlZCBvbjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQva2V5Q29kZSNudW1wYWRfa2V5c1xuXHRcdFx0Y2FzZSAxMDc6IHJldHVybiBLZXlDb2RlLk51bXBhZEFkZDtcblx0XHRcdGNhc2UgMTA5OiByZXR1cm4gS2V5Q29kZS5OdW1wYWRTdWJ0cmFjdDtcblx0XHRcdGNhc2UgMTczOiByZXR1cm4gS2V5Q29kZS5NaW51cztcblx0XHRcdGNhc2UgMjI0OlxuXHRcdFx0XHRpZiAocGxhdGZvcm0uaXNNYWNpbnRvc2gpIHsgcmV0dXJuIEtleUNvZGUuTWV0YTsgfVxuXHRcdFx0XHRicmVhaztcblx0XHR9XG5cdH0gZWxzZSBpZiAoYnJvd3Nlci5pc1dlYktpdCkge1xuXHRcdGlmIChwbGF0Zm9ybS5pc01hY2ludG9zaCAmJiBrZXlDb2RlID09PSA5Mykge1xuXHRcdFx0Ly8gdGhlIHR3byBtZXRhIGtleXMgaW4gdGhlIE1hYyBoYXZlIGRpZmZlcmVudCBrZXkgY29kZXMgKDkxIGFuZCA5Mylcblx0XHRcdHJldHVybiBLZXlDb2RlLk1ldGE7XG5cdFx0fSBlbHNlIGlmICghcGxhdGZvcm0uaXNNYWNpbnRvc2ggJiYga2V5Q29kZSA9PT0gOTIpIHtcblx0XHRcdHJldHVybiBLZXlDb2RlLk1ldGE7XG5cdFx0fVxuXHR9XG5cblx0Ly8gY3Jvc3MgYnJvd3NlciBrZXljb2Rlczpcblx0cmV0dXJuIEVWRU5UX0tFWV9DT0RFX01BUFtrZXlDb2RlXSB8fCBLZXlDb2RlLlVua25vd247XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUtleWJvYXJkRXZlbnQge1xuXG5cdHJlYWRvbmx5IF9zdGFuZGFyZEtleWJvYXJkRXZlbnRCcmFuZDogdHJ1ZTtcblxuXHRyZWFkb25seSBicm93c2VyRXZlbnQ6IEtleWJvYXJkRXZlbnQ7XG5cdHJlYWRvbmx5IHRhcmdldDogSFRNTEVsZW1lbnQ7XG5cblx0cmVhZG9ubHkgY3RybEtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgc2hpZnRLZXk6IGJvb2xlYW47XG5cdHJlYWRvbmx5IGFsdEtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgbWV0YUtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgYWx0R3JhcGhLZXk6IGJvb2xlYW47XG5cdHJlYWRvbmx5IGtleUNvZGU6IEtleUNvZGU7XG5cdHJlYWRvbmx5IGNvZGU6IHN0cmluZztcblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHR0b0tleUNvZGVDaG9yZCgpOiBLZXlDb2RlQ2hvcmQ7XG5cdGVxdWFscyhrZXliaW5kaW5nOiBudW1iZXIpOiBib29sZWFuO1xuXG5cdHByZXZlbnREZWZhdWx0KCk6IHZvaWQ7XG5cdHN0b3BQcm9wYWdhdGlvbigpOiB2b2lkO1xufVxuXG5jb25zdCBjdHJsS2V5TW9kID0gKHBsYXRmb3JtLmlzTWFjaW50b3NoID8gS2V5TW9kLldpbkN0cmwgOiBLZXlNb2QuQ3RybENtZCk7XG5jb25zdCBhbHRLZXlNb2QgPSBLZXlNb2QuQWx0O1xuY29uc3Qgc2hpZnRLZXlNb2QgPSBLZXlNb2QuU2hpZnQ7XG5jb25zdCBtZXRhS2V5TW9kID0gKHBsYXRmb3JtLmlzTWFjaW50b3NoID8gS2V5TW9kLkN0cmxDbWQgOiBLZXlNb2QuV2luQ3RybCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEtleWJvYXJkRXZlbnQoZTogS2V5Ym9hcmRFdmVudCk6IHN0cmluZyB7XG5cdGNvbnN0IG1vZGlmaWVyczogc3RyaW5nW10gPSBbXTtcblx0aWYgKGUuY3RybEtleSkge1xuXHRcdG1vZGlmaWVycy5wdXNoKGBjdHJsYCk7XG5cdH1cblx0aWYgKGUuc2hpZnRLZXkpIHtcblx0XHRtb2RpZmllcnMucHVzaChgc2hpZnRgKTtcblx0fVxuXHRpZiAoZS5hbHRLZXkpIHtcblx0XHRtb2RpZmllcnMucHVzaChgYWx0YCk7XG5cdH1cblx0aWYgKGUubWV0YUtleSkge1xuXHRcdG1vZGlmaWVycy5wdXNoKGBtZXRhYCk7XG5cdH1cblx0cmV0dXJuIGBtb2RpZmllcnM6IFske21vZGlmaWVycy5qb2luKCcsJyl9XSwgY29kZTogJHtlLmNvZGV9LCBrZXlDb2RlOiAke2Uua2V5Q29kZX0sIGtleTogJHtlLmtleX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRTdGFuZGFyZEtleWJvYXJkRXZlbnQoZTogU3RhbmRhcmRLZXlib2FyZEV2ZW50KTogc3RyaW5nIHtcblx0Y29uc3QgbW9kaWZpZXJzOiBzdHJpbmdbXSA9IFtdO1xuXHRpZiAoZS5jdHJsS2V5KSB7XG5cdFx0bW9kaWZpZXJzLnB1c2goYGN0cmxgKTtcblx0fVxuXHRpZiAoZS5zaGlmdEtleSkge1xuXHRcdG1vZGlmaWVycy5wdXNoKGBzaGlmdGApO1xuXHR9XG5cdGlmIChlLmFsdEtleSkge1xuXHRcdG1vZGlmaWVycy5wdXNoKGBhbHRgKTtcblx0fVxuXHRpZiAoZS5tZXRhS2V5KSB7XG5cdFx0bW9kaWZpZXJzLnB1c2goYG1ldGFgKTtcblx0fVxuXHRyZXR1cm4gYG1vZGlmaWVyczogWyR7bW9kaWZpZXJzLmpvaW4oJywnKX1dLCBjb2RlOiAke2UuY29kZX0sIGtleUNvZGU6ICR7ZS5rZXlDb2RlfSAoJyR7S2V5Q29kZVV0aWxzLnRvU3RyaW5nKGUua2V5Q29kZSl9JylgO1xufVxuXG5leHBvcnQgY2xhc3MgU3RhbmRhcmRLZXlib2FyZEV2ZW50IGltcGxlbWVudHMgSUtleWJvYXJkRXZlbnQge1xuXG5cdHJlYWRvbmx5IF9zdGFuZGFyZEtleWJvYXJkRXZlbnRCcmFuZCA9IHRydWU7XG5cblx0cHVibGljIHJlYWRvbmx5IGJyb3dzZXJFdmVudDogS2V5Ym9hcmRFdmVudDtcblx0cHVibGljIHJlYWRvbmx5IHRhcmdldDogSFRNTEVsZW1lbnQ7XG5cblx0cHVibGljIHJlYWRvbmx5IGN0cmxLZXk6IGJvb2xlYW47XG5cdHB1YmxpYyByZWFkb25seSBzaGlmdEtleTogYm9vbGVhbjtcblx0cHVibGljIHJlYWRvbmx5IGFsdEtleTogYm9vbGVhbjtcblx0cHVibGljIHJlYWRvbmx5IG1ldGFLZXk6IGJvb2xlYW47XG5cdHB1YmxpYyByZWFkb25seSBhbHRHcmFwaEtleTogYm9vbGVhbjtcblx0cHVibGljIHJlYWRvbmx5IGtleUNvZGU6IEtleUNvZGU7XG5cdHB1YmxpYyByZWFkb25seSBjb2RlOiBzdHJpbmc7XG5cblx0cHJpdmF0ZSBfYXNLZXliaW5kaW5nOiBudW1iZXI7XG5cdHByaXZhdGUgX2FzS2V5Q29kZUNob3JkOiBLZXlDb2RlQ2hvcmQ7XG5cblx0Y29uc3RydWN0b3Ioc291cmNlOiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0Y29uc3QgZSA9IHNvdXJjZTtcblxuXHRcdHRoaXMuYnJvd3NlckV2ZW50ID0gZTtcblx0XHR0aGlzLnRhcmdldCA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcblxuXHRcdHRoaXMuY3RybEtleSA9IGUuY3RybEtleTtcblx0XHR0aGlzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcblx0XHR0aGlzLmFsdEtleSA9IGUuYWx0S2V5O1xuXHRcdHRoaXMubWV0YUtleSA9IGUubWV0YUtleTtcblx0XHR0aGlzLmFsdEdyYXBoS2V5ID0gZS5nZXRNb2RpZmllclN0YXRlPy4oJ0FsdEdyYXBoJyk7XG5cdFx0dGhpcy5rZXlDb2RlID0gZXh0cmFjdEtleUNvZGUoZSk7XG5cdFx0dGhpcy5jb2RlID0gZS5jb2RlO1xuXG5cdFx0Ly8gY29uc29sZS5pbmZvKGUudHlwZSArIFwiOiBrZXlDb2RlOiBcIiArIGUua2V5Q29kZSArIFwiLCB3aGljaDogXCIgKyBlLndoaWNoICsgXCIsIGNoYXJDb2RlOiBcIiArIGUuY2hhckNvZGUgKyBcIiwgZGV0YWlsOiBcIiArIGUuZGV0YWlsICsgXCIgPT09PT4gXCIgKyB0aGlzLmtleUNvZGUgKyAnIC0tICcgKyBLZXlDb2RlW3RoaXMua2V5Q29kZV0pO1xuXG5cdFx0dGhpcy5jdHJsS2V5ID0gdGhpcy5jdHJsS2V5IHx8IHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5DdHJsO1xuXHRcdHRoaXMuYWx0S2V5ID0gdGhpcy5hbHRLZXkgfHwgdGhpcy5rZXlDb2RlID09PSBLZXlDb2RlLkFsdDtcblx0XHR0aGlzLnNoaWZ0S2V5ID0gdGhpcy5zaGlmdEtleSB8fCB0aGlzLmtleUNvZGUgPT09IEtleUNvZGUuU2hpZnQ7XG5cdFx0dGhpcy5tZXRhS2V5ID0gdGhpcy5tZXRhS2V5IHx8IHRoaXMua2V5Q29kZSA9PT0gS2V5Q29kZS5NZXRhO1xuXG5cdFx0dGhpcy5fYXNLZXliaW5kaW5nID0gdGhpcy5fY29tcHV0ZUtleWJpbmRpbmcoKTtcblx0XHR0aGlzLl9hc0tleUNvZGVDaG9yZCA9IHRoaXMuX2NvbXB1dGVLZXlDb2RlQ2hvcmQoKTtcblxuXHRcdC8vIGNvbnNvbGUubG9nKGBjb2RlOiAke2UuY29kZX0sIGtleUNvZGU6ICR7ZS5rZXlDb2RlfSwga2V5OiAke2Uua2V5fWApO1xuXHR9XG5cblx0cHVibGljIHByZXZlbnREZWZhdWx0KCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmJyb3dzZXJFdmVudCAmJiB0aGlzLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCkge1xuXHRcdFx0dGhpcy5icm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc3RvcFByb3BhZ2F0aW9uKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmJyb3dzZXJFdmVudCAmJiB0aGlzLmJyb3dzZXJFdmVudC5zdG9wUHJvcGFnYXRpb24pIHtcblx0XHRcdHRoaXMuYnJvd3NlckV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyB0b0tleUNvZGVDaG9yZCgpOiBLZXlDb2RlQ2hvcmQge1xuXHRcdHJldHVybiB0aGlzLl9hc0tleUNvZGVDaG9yZDtcblx0fVxuXG5cdHB1YmxpYyBlcXVhbHMob3RoZXI6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9hc0tleWJpbmRpbmcgPT09IG90aGVyO1xuXHR9XG5cblx0cHJpdmF0ZSBfY29tcHV0ZUtleWJpbmRpbmcoKTogbnVtYmVyIHtcblx0XHRsZXQga2V5ID0gS2V5Q29kZS5Vbmtub3duO1xuXHRcdGlmICh0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuQ3RybCAmJiB0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuU2hpZnQgJiYgdGhpcy5rZXlDb2RlICE9PSBLZXlDb2RlLkFsdCAmJiB0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuTWV0YSkge1xuXHRcdFx0a2V5ID0gdGhpcy5rZXlDb2RlO1xuXHRcdH1cblxuXHRcdGxldCByZXN1bHQgPSAwO1xuXHRcdGlmICh0aGlzLmN0cmxLZXkpIHtcblx0XHRcdHJlc3VsdCB8PSBjdHJsS2V5TW9kO1xuXHRcdH1cblx0XHRpZiAodGhpcy5hbHRLZXkpIHtcblx0XHRcdHJlc3VsdCB8PSBhbHRLZXlNb2Q7XG5cdFx0fVxuXHRcdGlmICh0aGlzLnNoaWZ0S2V5KSB7XG5cdFx0XHRyZXN1bHQgfD0gc2hpZnRLZXlNb2Q7XG5cdFx0fVxuXHRcdGlmICh0aGlzLm1ldGFLZXkpIHtcblx0XHRcdHJlc3VsdCB8PSBtZXRhS2V5TW9kO1xuXHRcdH1cblx0XHRyZXN1bHQgfD0ga2V5O1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHByaXZhdGUgX2NvbXB1dGVLZXlDb2RlQ2hvcmQoKTogS2V5Q29kZUNob3JkIHtcblx0XHRsZXQga2V5ID0gS2V5Q29kZS5Vbmtub3duO1xuXHRcdGlmICh0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuQ3RybCAmJiB0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuU2hpZnQgJiYgdGhpcy5rZXlDb2RlICE9PSBLZXlDb2RlLkFsdCAmJiB0aGlzLmtleUNvZGUgIT09IEtleUNvZGUuTWV0YSkge1xuXHRcdFx0a2V5ID0gdGhpcy5rZXlDb2RlO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3IEtleUNvZGVDaG9yZCh0aGlzLmN0cmxLZXksIHRoaXMuc2hpZnRLZXksIHRoaXMuYWx0S2V5LCB0aGlzLm1ldGFLZXksIGtleSk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgd2luZG93IGluIGEgcG9zc2libGUgY2hhaW4gb2YgaWZyYW1lc1xuICovXG5pbnRlcmZhY2UgSVdpbmRvd0NoYWluRWxlbWVudCB7XG5cdC8qKlxuXHQgKiBUaGUgd2luZG93IG9iamVjdCBmb3IgaXRcblx0ICovXG5cdHJlYWRvbmx5IHdpbmRvdzogV2Vha1JlZjxXaW5kb3c+O1xuXHQvKipcblx0ICogVGhlIGlmcmFtZSBlbGVtZW50IGluc2lkZSB0aGUgd2luZG93LnBhcmVudCBjb3JyZXNwb25kaW5nIHRvIHdpbmRvd1xuXHQgKi9cblx0cmVhZG9ubHkgaWZyYW1lRWxlbWVudDogRWxlbWVudCB8IG51bGw7XG59XG5cbmNvbnN0IHNhbWVPcmlnaW5XaW5kb3dDaGFpbkNhY2hlID0gbmV3IFdlYWtNYXA8V2luZG93LCBJV2luZG93Q2hhaW5FbGVtZW50W10gfCBudWxsPigpO1xuXG5mdW5jdGlvbiBnZXRQYXJlbnRXaW5kb3dJZlNhbWVPcmlnaW4odzogV2luZG93KTogV2luZG93IHwgbnVsbCB7XG5cdGlmICghdy5wYXJlbnQgfHwgdy5wYXJlbnQgPT09IHcpIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIENhbm5vdCByZWFsbHkgdGVsbCBpZiB3ZSBoYXZlIGFjY2VzcyB0byB0aGUgcGFyZW50IHdpbmRvdyB1bmxlc3Mgd2UgdHJ5IHRvIGFjY2VzcyBzb21ldGhpbmcgaW4gaXRcblx0dHJ5IHtcblx0XHRjb25zdCBsb2NhdGlvbiA9IHcubG9jYXRpb247XG5cdFx0Y29uc3QgcGFyZW50TG9jYXRpb24gPSB3LnBhcmVudC5sb2NhdGlvbjtcblx0XHRpZiAobG9jYXRpb24ub3JpZ2luICE9PSAnbnVsbCcgJiYgcGFyZW50TG9jYXRpb24ub3JpZ2luICE9PSAnbnVsbCcgJiYgbG9jYXRpb24ub3JpZ2luICE9PSBwYXJlbnRMb2NhdGlvbi5vcmlnaW4pIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cmV0dXJuIHcucGFyZW50O1xufVxuXG5leHBvcnQgY2xhc3MgSWZyYW1lVXRpbHMge1xuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGEgY2hhaW4gb2YgZW1iZWRkZWQgd2luZG93cyB3aXRoIHRoZSBzYW1lIG9yaWdpbiAod2hpY2ggY2FuIGJlIGFjY2Vzc2VkIHByb2dyYW1tYXRpY2FsbHkpLlxuXHQgKiBIYXZpbmcgYSBjaGFpbiBvZiBsZW5ndGggMSBtaWdodCBtZWFuIHRoYXQgdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGVudmlyb25tZW50IGlzIHJ1bm5pbmcgb3V0c2lkZSBvZiBhbiBpZnJhbWUgb3IgaW5zaWRlIGFuIGlmcmFtZSBlbWJlZGRlZCBpbiBhIHdpbmRvdyB3aXRoIGEgZGlmZmVyZW50IG9yaWdpbi5cblx0ICovXG5cdHByaXZhdGUgc3RhdGljIGdldFNhbWVPcmlnaW5XaW5kb3dDaGFpbih0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IElXaW5kb3dDaGFpbkVsZW1lbnRbXSB7XG5cdFx0bGV0IHdpbmRvd0NoYWluQ2FjaGUgPSBzYW1lT3JpZ2luV2luZG93Q2hhaW5DYWNoZS5nZXQodGFyZ2V0V2luZG93KTtcblx0XHRpZiAoIXdpbmRvd0NoYWluQ2FjaGUpIHtcblx0XHRcdHdpbmRvd0NoYWluQ2FjaGUgPSBbXTtcblx0XHRcdHNhbWVPcmlnaW5XaW5kb3dDaGFpbkNhY2hlLnNldCh0YXJnZXRXaW5kb3csIHdpbmRvd0NoYWluQ2FjaGUpO1xuXHRcdFx0bGV0IHc6IFdpbmRvdyB8IG51bGwgPSB0YXJnZXRXaW5kb3c7XG5cdFx0XHRsZXQgcGFyZW50OiBXaW5kb3cgfCBudWxsO1xuXHRcdFx0ZG8ge1xuXHRcdFx0XHRwYXJlbnQgPSBnZXRQYXJlbnRXaW5kb3dJZlNhbWVPcmlnaW4odyk7XG5cdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHR3aW5kb3dDaGFpbkNhY2hlLnB1c2goe1xuXHRcdFx0XHRcdFx0d2luZG93OiBuZXcgV2Vha1JlZih3KSxcblx0XHRcdFx0XHRcdGlmcmFtZUVsZW1lbnQ6IHcuZnJhbWVFbGVtZW50IHx8IG51bGxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR3aW5kb3dDaGFpbkNhY2hlLnB1c2goe1xuXHRcdFx0XHRcdFx0d2luZG93OiBuZXcgV2Vha1JlZih3KSxcblx0XHRcdFx0XHRcdGlmcmFtZUVsZW1lbnQ6IG51bGxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR3ID0gcGFyZW50O1xuXHRcdFx0fSB3aGlsZSAodyk7XG5cdFx0fVxuXHRcdHJldHVybiB3aW5kb3dDaGFpbkNhY2hlLnNsaWNlKDApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHBvc2l0aW9uIG9mIGBjaGlsZFdpbmRvd2AgcmVsYXRpdmUgdG8gYGFuY2VzdG9yV2luZG93YFxuXHQgKi9cblx0cHVibGljIHN0YXRpYyBnZXRQb3NpdGlvbk9mQ2hpbGRXaW5kb3dSZWxhdGl2ZVRvQW5jZXN0b3JXaW5kb3coY2hpbGRXaW5kb3c6IFdpbmRvdywgYW5jZXN0b3JXaW5kb3c6IFdpbmRvdyB8IG51bGwpIHtcblxuXHRcdGlmICghYW5jZXN0b3JXaW5kb3cgfHwgY2hpbGRXaW5kb3cgPT09IGFuY2VzdG9yV2luZG93KSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0b3A6IDAsXG5cdFx0XHRcdGxlZnQ6IDBcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0bGV0IHRvcCA9IDAsIGxlZnQgPSAwO1xuXG5cdFx0Y29uc3Qgd2luZG93Q2hhaW4gPSB0aGlzLmdldFNhbWVPcmlnaW5XaW5kb3dDaGFpbihjaGlsZFdpbmRvdyk7XG5cblx0XHRmb3IgKGNvbnN0IHdpbmRvd0NoYWluRWwgb2Ygd2luZG93Q2hhaW4pIHtcblx0XHRcdGNvbnN0IHdpbmRvd0luQ2hhaW4gPSB3aW5kb3dDaGFpbkVsLndpbmRvdy5kZXJlZigpO1xuXHRcdFx0dG9wICs9IHdpbmRvd0luQ2hhaW4/LnNjcm9sbFkgPz8gMDtcblx0XHRcdGxlZnQgKz0gd2luZG93SW5DaGFpbj8uc2Nyb2xsWCA/PyAwO1xuXG5cdFx0XHRpZiAod2luZG93SW5DaGFpbiA9PT0gYW5jZXN0b3JXaW5kb3cpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGlmICghd2luZG93Q2hhaW5FbC5pZnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBib3VuZGluZ1JlY3QgPSB3aW5kb3dDaGFpbkVsLmlmcmFtZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0XHR0b3AgKz0gYm91bmRpbmdSZWN0LnRvcDtcblx0XHRcdGxlZnQgKz0gYm91bmRpbmdSZWN0LmxlZnQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogdG9wLFxuXHRcdFx0bGVmdDogbGVmdFxuXHRcdH07XG5cdH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2hhLTI1NiBjb21wb3NlZCBvZiBgcGFyZW50T3JpZ2luYCBhbmQgYHNhbHRgIGNvbnZlcnRlZCB0byBiYXNlIDMyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwYXJlbnRPcmlnaW5IYXNoKHBhcmVudE9yaWdpbjogc3RyaW5nLCBzYWx0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuXHQvLyBUaGlzIHNhbWUgY29kZSBpcyBhbHNvIGlubGluZWQgYXQgYHNyYy92cy93b3JrYmVuY2gvc2VydmljZXMvZXh0ZW5zaW9ucy93b3JrZXIvd2ViV29ya2VyRXh0ZW5zaW9uSG9zdElmcmFtZS5odG1sYFxuXHRpZiAoIWNyeXB0by5zdWJ0bGUpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYCdjcnlwdG8uc3VidGxlJyBpcyBub3QgYXZhaWxhYmxlIHNvIHdlYnZpZXdzIHdpbGwgbm90IHdvcmsuIFRoaXMgaXMgbGlrZWx5IGJlY2F1c2UgdGhlIGVkaXRvciBpcyBub3QgcnVubmluZyBpbiBhIHNlY3VyZSBjb250ZXh0IChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9TZWN1cml0eS9TZWN1cmVfQ29udGV4dHMpLmApO1xuXHR9XG5cblx0Y29uc3Qgc3RyRGF0YSA9IEpTT04uc3RyaW5naWZ5KHsgcGFyZW50T3JpZ2luLCBzYWx0IH0pO1xuXHRjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cdGNvbnN0IGFyckRhdGEgPSBlbmNvZGVyLmVuY29kZShzdHJEYXRhKTtcblx0Y29uc3QgaGFzaCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdzaGEtMjU2JywgYXJyRGF0YSk7XG5cdHJldHVybiBzaGEyNTZBc0Jhc2UzMihoYXNoKTtcbn1cblxuZnVuY3Rpb24gc2hhMjU2QXNCYXNlMzIoYnl0ZXM6IEFycmF5QnVmZmVyKTogc3RyaW5nIHtcblx0Y29uc3QgYXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGJ5dGVzKSk7XG5cdGNvbnN0IGhleEFycmF5ID0gYXJyYXkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG5cdC8vIHNoYTI1NiBoYXMgMjU2IGJpdHMsIHNvIHdlIG5lZWQgYXQgbW9zdCBjZWlsKGxnKDJeMjU2LTEpL2xnKDMyKSkgPSA1MiBjaGFycyB0byByZXByZXNlbnQgaXQgaW4gYmFzZSAzMlxuXHRyZXR1cm4gQmlnSW50KGAweCR7aGV4QXJyYXl9YCkudG9TdHJpbmcoMzIpLnBhZFN0YXJ0KDUyLCAnMCcpO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgKiBhcyBicm93c2VyIGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9icm93c2VyJztcbmltcG9ydCB7IElmcmFtZVV0aWxzIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2lmcmFtZSc7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICd2cy9iYXNlL2NvbW1vbi9wbGF0Zm9ybSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1vdXNlRXZlbnQge1xuXHRyZWFkb25seSBicm93c2VyRXZlbnQ6IE1vdXNlRXZlbnQ7XG5cdHJlYWRvbmx5IGxlZnRCdXR0b246IGJvb2xlYW47XG5cdHJlYWRvbmx5IG1pZGRsZUJ1dHRvbjogYm9vbGVhbjtcblx0cmVhZG9ubHkgcmlnaHRCdXR0b246IGJvb2xlYW47XG5cdHJlYWRvbmx5IGJ1dHRvbnM6IG51bWJlcjtcblx0cmVhZG9ubHkgdGFyZ2V0OiBIVE1MRWxlbWVudDtcblx0cmVhZG9ubHkgZGV0YWlsOiBudW1iZXI7XG5cdHJlYWRvbmx5IHBvc3g6IG51bWJlcjtcblx0cmVhZG9ubHkgcG9zeTogbnVtYmVyO1xuXHRyZWFkb25seSBjdHJsS2V5OiBib29sZWFuO1xuXHRyZWFkb25seSBzaGlmdEtleTogYm9vbGVhbjtcblx0cmVhZG9ubHkgYWx0S2V5OiBib29sZWFuO1xuXHRyZWFkb25seSBtZXRhS2V5OiBib29sZWFuO1xuXHRyZWFkb25seSB0aW1lc3RhbXA6IG51bWJlcjtcblxuXHRwcmV2ZW50RGVmYXVsdCgpOiB2b2lkO1xuXHRzdG9wUHJvcGFnYXRpb24oKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIFN0YW5kYXJkTW91c2VFdmVudCBpbXBsZW1lbnRzIElNb3VzZUV2ZW50IHtcblxuXHRwdWJsaWMgcmVhZG9ubHkgYnJvd3NlckV2ZW50OiBNb3VzZUV2ZW50O1xuXG5cdHB1YmxpYyByZWFkb25seSBsZWZ0QnV0dG9uOiBib29sZWFuO1xuXHRwdWJsaWMgcmVhZG9ubHkgbWlkZGxlQnV0dG9uOiBib29sZWFuO1xuXHRwdWJsaWMgcmVhZG9ubHkgcmlnaHRCdXR0b246IGJvb2xlYW47XG5cdHB1YmxpYyByZWFkb25seSBidXR0b25zOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSB0YXJnZXQ6IEhUTUxFbGVtZW50O1xuXHRwdWJsaWMgZGV0YWlsOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBwb3N4OiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBwb3N5OiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBjdHJsS2V5OiBib29sZWFuO1xuXHRwdWJsaWMgcmVhZG9ubHkgc2hpZnRLZXk6IGJvb2xlYW47XG5cdHB1YmxpYyByZWFkb25seSBhbHRLZXk6IGJvb2xlYW47XG5cdHB1YmxpYyByZWFkb25seSBtZXRhS2V5OiBib29sZWFuO1xuXHRwdWJsaWMgcmVhZG9ubHkgdGltZXN0YW1wOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IodGFyZ2V0V2luZG93OiBXaW5kb3csIGU6IE1vdXNlRXZlbnQpIHtcblx0XHR0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdFx0dGhpcy5icm93c2VyRXZlbnQgPSBlO1xuXHRcdHRoaXMubGVmdEJ1dHRvbiA9IGUuYnV0dG9uID09PSAwO1xuXHRcdHRoaXMubWlkZGxlQnV0dG9uID0gZS5idXR0b24gPT09IDE7XG5cdFx0dGhpcy5yaWdodEJ1dHRvbiA9IGUuYnV0dG9uID09PSAyO1xuXHRcdHRoaXMuYnV0dG9ucyA9IGUuYnV0dG9ucztcblxuXHRcdHRoaXMudGFyZ2V0ID0gPEhUTUxFbGVtZW50PmUudGFyZ2V0O1xuXG5cdFx0dGhpcy5kZXRhaWwgPSBlLmRldGFpbCB8fCAxO1xuXHRcdGlmIChlLnR5cGUgPT09ICdkYmxjbGljaycpIHtcblx0XHRcdHRoaXMuZGV0YWlsID0gMjtcblx0XHR9XG5cdFx0dGhpcy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuXHRcdHRoaXMuc2hpZnRLZXkgPSBlLnNoaWZ0S2V5O1xuXHRcdHRoaXMuYWx0S2V5ID0gZS5hbHRLZXk7XG5cdFx0dGhpcy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuXG5cdFx0aWYgKHR5cGVvZiBlLnBhZ2VYID09PSAnbnVtYmVyJykge1xuXHRcdFx0dGhpcy5wb3N4ID0gZS5wYWdlWDtcblx0XHRcdHRoaXMucG9zeSA9IGUucGFnZVk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFByb2JhYmx5IGhpdCBieSBNU0dlc3R1cmVFdmVudFxuXHRcdFx0dGhpcy5wb3N4ID0gZS5jbGllbnRYICsgdGhpcy50YXJnZXQub3duZXJEb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgKyB0aGlzLnRhcmdldC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuXHRcdFx0dGhpcy5wb3N5ID0gZS5jbGllbnRZICsgdGhpcy50YXJnZXQub3duZXJEb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIHRoaXMudGFyZ2V0Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblx0XHR9XG5cblx0XHQvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgaWZyYW1lIHRoaXMgY29kZSBpcyBleGVjdXRpbmcgaW4gcmVsYXRpdmUgdG8gdGhlIGlmcmFtZSB3aGVyZSB0aGUgZXZlbnQgd2FzIGNhcHR1cmVkLlxuXHRcdGNvbnN0IGlmcmFtZU9mZnNldHMgPSBJZnJhbWVVdGlscy5nZXRQb3NpdGlvbk9mQ2hpbGRXaW5kb3dSZWxhdGl2ZVRvQW5jZXN0b3JXaW5kb3codGFyZ2V0V2luZG93LCBlLnZpZXcpO1xuXHRcdHRoaXMucG9zeCAtPSBpZnJhbWVPZmZzZXRzLmxlZnQ7XG5cdFx0dGhpcy5wb3N5IC09IGlmcmFtZU9mZnNldHMudG9wO1xuXHR9XG5cblx0cHVibGljIHByZXZlbnREZWZhdWx0KCk6IHZvaWQge1xuXHRcdHRoaXMuYnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXHRwdWJsaWMgc3RvcFByb3BhZ2F0aW9uKCk6IHZvaWQge1xuXHRcdHRoaXMuYnJvd3NlckV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBEcmFnTW91c2VFdmVudCBleHRlbmRzIFN0YW5kYXJkTW91c2VFdmVudCB7XG5cblx0cHVibGljIHJlYWRvbmx5IGRhdGFUcmFuc2ZlcjogRGF0YVRyYW5zZmVyO1xuXG5cdGNvbnN0cnVjdG9yKHRhcmdldFdpbmRvdzogV2luZG93LCBlOiBNb3VzZUV2ZW50KSB7XG5cdFx0c3VwZXIodGFyZ2V0V2luZG93LCBlKTtcblx0XHR0aGlzLmRhdGFUcmFuc2ZlciA9ICg8YW55PmUpLmRhdGFUcmFuc2Zlcjtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElNb3VzZVdoZWVsRXZlbnQgZXh0ZW5kcyBNb3VzZUV2ZW50IHtcblx0cmVhZG9ubHkgd2hlZWxEZWx0YTogbnVtYmVyO1xuXHRyZWFkb25seSB3aGVlbERlbHRhWDogbnVtYmVyO1xuXHRyZWFkb25seSB3aGVlbERlbHRhWTogbnVtYmVyO1xuXG5cdHJlYWRvbmx5IGRlbHRhWDogbnVtYmVyO1xuXHRyZWFkb25seSBkZWx0YVk6IG51bWJlcjtcblx0cmVhZG9ubHkgZGVsdGFaOiBudW1iZXI7XG5cdHJlYWRvbmx5IGRlbHRhTW9kZTogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSVdlYktpdE1vdXNlV2hlZWxFdmVudCB7XG5cdHdoZWVsRGVsdGFZOiBudW1iZXI7XG5cdHdoZWVsRGVsdGFYOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBJR2Vja29Nb3VzZVdoZWVsRXZlbnQge1xuXHRIT1JJWk9OVEFMX0FYSVM6IG51bWJlcjtcblx0VkVSVElDQUxfQVhJUzogbnVtYmVyO1xuXHRheGlzOiBudW1iZXI7XG5cdGRldGFpbDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU3RhbmRhcmRXaGVlbEV2ZW50IHtcblxuXHRwdWJsaWMgcmVhZG9ubHkgYnJvd3NlckV2ZW50OiBJTW91c2VXaGVlbEV2ZW50IHwgbnVsbDtcblx0cHVibGljIHJlYWRvbmx5IGRlbHRhWTogbnVtYmVyO1xuXHRwdWJsaWMgcmVhZG9ubHkgZGVsdGFYOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSB0YXJnZXQ6IE5vZGU7XG5cblx0Y29uc3RydWN0b3IoZTogSU1vdXNlV2hlZWxFdmVudCB8IG51bGwsIGRlbHRhWDogbnVtYmVyID0gMCwgZGVsdGFZOiBudW1iZXIgPSAwKSB7XG5cblx0XHR0aGlzLmJyb3dzZXJFdmVudCA9IGUgfHwgbnVsbDtcblx0XHR0aGlzLnRhcmdldCA9IGUgPyAoZS50YXJnZXQgfHwgKDxhbnk+ZSkudGFyZ2V0Tm9kZSB8fCBlLnNyY0VsZW1lbnQpIDogbnVsbDtcblxuXHRcdHRoaXMuZGVsdGFZID0gZGVsdGFZO1xuXHRcdHRoaXMuZGVsdGFYID0gZGVsdGFYO1xuXG5cdFx0bGV0IHNob3VsZEZhY3RvckRQUjogYm9vbGVhbiA9IGZhbHNlO1xuXHRcdGlmIChicm93c2VyLmlzQ2hyb21lKSB7XG5cdFx0XHQvLyBDaHJvbWUgdmVyc2lvbiA+PSAxMjMgY29udGFpbnMgdGhlIGZpeCB0byBmYWN0b3IgZGV2aWNlUGl4ZWxSYXRpbyBpbnRvIHRoZSB3aGVlbCBldmVudC5cblx0XHRcdC8vIFNlZSBodHRwczovL2Nocm9taXVtLmdvb2dsZXNvdXJjZS5jb20vY2hyb21pdW0vc3JjLmdpdC8rL2JlNTFiNDQ4NDQxZmYwYzlkMWYxN2UwZjI1YzRiZjFhYjNmMTFmNjFcblx0XHRcdGNvbnN0IGNocm9tZVZlcnNpb25NYXRjaCA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pO1xuXHRcdFx0Y29uc3QgY2hyb21lTWFqb3JWZXJzaW9uID0gY2hyb21lVmVyc2lvbk1hdGNoID8gcGFyc2VJbnQoY2hyb21lVmVyc2lvbk1hdGNoWzFdKSA6IDEyMztcblx0XHRcdHNob3VsZEZhY3RvckRQUiA9IGNocm9tZU1ham9yVmVyc2lvbiA8PSAxMjI7XG5cdFx0fVxuXG5cdFx0aWYgKGUpIHtcblx0XHRcdC8vIE9sZCAoZGVwcmVjYXRlZCkgd2hlZWwgZXZlbnRzXG5cdFx0XHRjb25zdCBlMSA9IDxJV2ViS2l0TW91c2VXaGVlbEV2ZW50Pjxhbnk+ZTtcblx0XHRcdGNvbnN0IGUyID0gPElHZWNrb01vdXNlV2hlZWxFdmVudD48YW55PmU7XG5cdFx0XHRjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gZS52aWV3Py5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG5cblx0XHRcdC8vIHZlcnRpY2FsIGRlbHRhIHNjcm9sbFxuXHRcdFx0aWYgKHR5cGVvZiBlMS53aGVlbERlbHRhWSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0aWYgKHNob3VsZEZhY3RvckRQUikge1xuXHRcdFx0XHRcdC8vIFJlZnMgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE0NjQwMyNpc3N1ZWNvbW1lbnQtMTg1NDUzODkyOFxuXHRcdFx0XHRcdHRoaXMuZGVsdGFZID0gZTEud2hlZWxEZWx0YVkgLyAoMTIwICogZGV2aWNlUGl4ZWxSYXRpbyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5kZWx0YVkgPSBlMS53aGVlbERlbHRhWSAvIDEyMDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZTIuVkVSVElDQUxfQVhJUyAhPT0gJ3VuZGVmaW5lZCcgJiYgZTIuYXhpcyA9PT0gZTIuVkVSVElDQUxfQVhJUykge1xuXHRcdFx0XHR0aGlzLmRlbHRhWSA9IC1lMi5kZXRhaWwgLyAzO1xuXHRcdFx0fSBlbHNlIGlmIChlLnR5cGUgPT09ICd3aGVlbCcpIHtcblx0XHRcdFx0Ly8gTW9kZXJuIHdoZWVsIGV2ZW50XG5cdFx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaGVlbEV2ZW50XG5cdFx0XHRcdGNvbnN0IGV2ID0gPFdoZWVsRXZlbnQ+PHVua25vd24+ZTtcblxuXHRcdFx0XHRpZiAoZXYuZGVsdGFNb2RlID09PSBldi5ET01fREVMVEFfTElORSkge1xuXHRcdFx0XHRcdC8vIHRoZSBkZWx0YXMgYXJlIGV4cHJlc3NlZCBpbiBsaW5lc1xuXHRcdFx0XHRcdGlmIChicm93c2VyLmlzRmlyZWZveCAmJiAhcGxhdGZvcm0uaXNNYWNpbnRvc2gpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGVsdGFZID0gLWUuZGVsdGFZIC8gMztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5kZWx0YVkgPSAtZS5kZWx0YVk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZGVsdGFZID0gLWUuZGVsdGFZIC8gNDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gaG9yaXpvbnRhbCBkZWx0YSBzY3JvbGxcblx0XHRcdGlmICh0eXBlb2YgZTEud2hlZWxEZWx0YVggIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGlmIChicm93c2VyLmlzU2FmYXJpICYmIHBsYXRmb3JtLmlzV2luZG93cykge1xuXHRcdFx0XHRcdHRoaXMuZGVsdGFYID0gLSAoZTEud2hlZWxEZWx0YVggLyAxMjApO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHNob3VsZEZhY3RvckRQUikge1xuXHRcdFx0XHRcdC8vIFJlZnMgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE0NjQwMyNpc3N1ZWNvbW1lbnQtMTg1NDUzODkyOFxuXHRcdFx0XHRcdHRoaXMuZGVsdGFYID0gZTEud2hlZWxEZWx0YVggLyAoMTIwICogZGV2aWNlUGl4ZWxSYXRpbyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5kZWx0YVggPSBlMS53aGVlbERlbHRhWCAvIDEyMDtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZTIuSE9SSVpPTlRBTF9BWElTICE9PSAndW5kZWZpbmVkJyAmJiBlMi5heGlzID09PSBlMi5IT1JJWk9OVEFMX0FYSVMpIHtcblx0XHRcdFx0dGhpcy5kZWx0YVggPSAtZS5kZXRhaWwgLyAzO1xuXHRcdFx0fSBlbHNlIGlmIChlLnR5cGUgPT09ICd3aGVlbCcpIHtcblx0XHRcdFx0Ly8gTW9kZXJuIHdoZWVsIGV2ZW50XG5cdFx0XHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaGVlbEV2ZW50XG5cdFx0XHRcdGNvbnN0IGV2ID0gPFdoZWVsRXZlbnQ+PHVua25vd24+ZTtcblxuXHRcdFx0XHRpZiAoZXYuZGVsdGFNb2RlID09PSBldi5ET01fREVMVEFfTElORSkge1xuXHRcdFx0XHRcdC8vIHRoZSBkZWx0YXMgYXJlIGV4cHJlc3NlZCBpbiBsaW5lc1xuXHRcdFx0XHRcdGlmIChicm93c2VyLmlzRmlyZWZveCAmJiAhcGxhdGZvcm0uaXNNYWNpbnRvc2gpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGVsdGFYID0gLWUuZGVsdGFYIC8gMztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGhpcy5kZWx0YVggPSAtZS5kZWx0YVg7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZGVsdGFYID0gLWUuZGVsdGFYIC8gNDA7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXNzdW1lIGEgdmVydGljYWwgc2Nyb2xsIGlmIG5vdGhpbmcgZWxzZSB3b3JrZWRcblx0XHRcdGlmICh0aGlzLmRlbHRhWSA9PT0gMCAmJiB0aGlzLmRlbHRhWCA9PT0gMCAmJiBlLndoZWVsRGVsdGEpIHtcblx0XHRcdFx0aWYgKHNob3VsZEZhY3RvckRQUikge1xuXHRcdFx0XHRcdC8vIFJlZnMgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE0NjQwMyNpc3N1ZWNvbW1lbnQtMTg1NDUzODkyOFxuXHRcdFx0XHRcdHRoaXMuZGVsdGFZID0gZS53aGVlbERlbHRhIC8gKDEyMCAqIGRldmljZVBpeGVsUmF0aW8pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuZGVsdGFZID0gZS53aGVlbERlbHRhIC8gMTIwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIHByZXZlbnREZWZhdWx0KCk6IHZvaWQge1xuXHRcdHRoaXMuYnJvd3NlckV2ZW50Py5wcmV2ZW50RGVmYXVsdCgpO1xuXHR9XG5cblx0cHVibGljIHN0b3BQcm9wYWdhdGlvbigpOiB2b2lkIHtcblx0XHR0aGlzLmJyb3dzZXJFdmVudD8uc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlU3RvcmUsIElEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcblxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxsYXRpb25Ub2tlbiB7XG5cblx0LyoqXG5cdCAqIEEgZmxhZyBzaWduYWxsaW5nIGlzIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG5cdCAqL1xuXHRyZWFkb25seSBpc0NhbmNlbGxhdGlvblJlcXVlc3RlZDogYm9vbGVhbjtcblxuXHQvKipcblx0ICogQW4gZXZlbnQgd2hpY2ggZmlyZXMgd2hlbiBjYW5jZWxsYXRpb24gaXMgcmVxdWVzdGVkLiBUaGlzIGV2ZW50XG5cdCAqIG9ubHkgZXZlciBmaXJlcyBgb25jZWAgYXMgY2FuY2VsbGF0aW9uIGNhbiBvbmx5IGhhcHBlbiBvbmNlLiBMaXN0ZW5lcnNcblx0ICogdGhhdCBhcmUgcmVnaXN0ZXJlZCBhZnRlciBjYW5jZWxsYXRpb24gd2lsbCBiZSBjYWxsZWQgKG5leHQgZXZlbnQgbG9vcCBydW4pLFxuXHQgKiBidXQgYWxzbyBvbmx5IG9uY2UuXG5cdCAqXG5cdCAqIEBldmVudFxuXHQgKi9cblx0cmVhZG9ubHkgb25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQ6IChsaXN0ZW5lcjogKGU6IGFueSkgPT4gYW55LCB0aGlzQXJncz86IGFueSwgZGlzcG9zYWJsZXM/OiBJRGlzcG9zYWJsZVtdKSA9PiBJRGlzcG9zYWJsZTtcbn1cblxuY29uc3Qgc2hvcnRjdXRFdmVudDogRXZlbnQ8YW55PiA9IE9iamVjdC5mcmVlemUoZnVuY3Rpb24gKGNhbGxiYWNrLCBjb250ZXh0Pyk6IElEaXNwb3NhYmxlIHtcblx0Y29uc3QgaGFuZGxlID0gc2V0VGltZW91dChjYWxsYmFjay5iaW5kKGNvbnRleHQpLCAwKTtcblx0cmV0dXJuIHsgZGlzcG9zZSgpIHsgY2xlYXJUaW1lb3V0KGhhbmRsZSk7IH0gfTtcbn0pO1xuXG5leHBvcnQgbmFtZXNwYWNlIENhbmNlbGxhdGlvblRva2VuIHtcblxuXHRleHBvcnQgZnVuY3Rpb24gaXNDYW5jZWxsYXRpb25Ub2tlbih0aGluZzogdW5rbm93bik6IHRoaW5nIGlzIENhbmNlbGxhdGlvblRva2VuIHtcblx0XHRpZiAodGhpbmcgPT09IENhbmNlbGxhdGlvblRva2VuLk5vbmUgfHwgdGhpbmcgPT09IENhbmNlbGxhdGlvblRva2VuLkNhbmNlbGxlZCkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmICh0aGluZyBpbnN0YW5jZW9mIE11dGFibGVUb2tlbikge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmICghdGhpbmcgfHwgdHlwZW9mIHRoaW5nICE9PSAnb2JqZWN0Jykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHlwZW9mICh0aGluZyBhcyBDYW5jZWxsYXRpb25Ub2tlbikuaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQgPT09ICdib29sZWFuJ1xuXHRcdFx0JiYgdHlwZW9mICh0aGluZyBhcyBDYW5jZWxsYXRpb25Ub2tlbikub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQgPT09ICdmdW5jdGlvbic7XG5cdH1cblxuXG5cdGV4cG9ydCBjb25zdCBOb25lID0gT2JqZWN0LmZyZWV6ZTxDYW5jZWxsYXRpb25Ub2tlbj4oe1xuXHRcdGlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkOiBmYWxzZSxcblx0XHRvbkNhbmNlbGxhdGlvblJlcXVlc3RlZDogRXZlbnQuTm9uZVxuXHR9KTtcblxuXHRleHBvcnQgY29uc3QgQ2FuY2VsbGVkID0gT2JqZWN0LmZyZWV6ZTxDYW5jZWxsYXRpb25Ub2tlbj4oe1xuXHRcdGlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkOiB0cnVlLFxuXHRcdG9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkOiBzaG9ydGN1dEV2ZW50XG5cdH0pO1xufVxuXG5jbGFzcyBNdXRhYmxlVG9rZW4gaW1wbGVtZW50cyBDYW5jZWxsYXRpb25Ub2tlbiB7XG5cblx0cHJpdmF0ZSBfaXNDYW5jZWxsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBfZW1pdHRlcjogRW1pdHRlcjxhbnk+IHwgbnVsbCA9IG51bGw7XG5cblx0cHVibGljIGNhbmNlbCgpIHtcblx0XHRpZiAoIXRoaXMuX2lzQ2FuY2VsbGVkKSB7XG5cdFx0XHR0aGlzLl9pc0NhbmNlbGxlZCA9IHRydWU7XG5cdFx0XHRpZiAodGhpcy5fZW1pdHRlcikge1xuXHRcdFx0XHR0aGlzLl9lbWl0dGVyLmZpcmUodW5kZWZpbmVkKTtcblx0XHRcdFx0dGhpcy5kaXNwb3NlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Z2V0IGlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9pc0NhbmNlbGxlZDtcblx0fVxuXG5cdGdldCBvbkNhbmNlbGxhdGlvblJlcXVlc3RlZCgpOiBFdmVudDxhbnk+IHtcblx0XHRpZiAodGhpcy5faXNDYW5jZWxsZWQpIHtcblx0XHRcdHJldHVybiBzaG9ydGN1dEV2ZW50O1xuXHRcdH1cblx0XHRpZiAoIXRoaXMuX2VtaXR0ZXIpIHtcblx0XHRcdHRoaXMuX2VtaXR0ZXIgPSBuZXcgRW1pdHRlcjxhbnk+KCk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9lbWl0dGVyLmV2ZW50O1xuXHR9XG5cblx0cHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2VtaXR0ZXIpIHtcblx0XHRcdHRoaXMuX2VtaXR0ZXIuZGlzcG9zZSgpO1xuXHRcdFx0dGhpcy5fZW1pdHRlciA9IG51bGw7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSB7XG5cblx0cHJpdmF0ZSBfdG9rZW4/OiBDYW5jZWxsYXRpb25Ub2tlbiA9IHVuZGVmaW5lZDtcblx0cHJpdmF0ZSBfcGFyZW50TGlzdGVuZXI/OiBJRGlzcG9zYWJsZSA9IHVuZGVmaW5lZDtcblxuXHRjb25zdHJ1Y3RvcihwYXJlbnQ/OiBDYW5jZWxsYXRpb25Ub2tlbikge1xuXHRcdHRoaXMuX3BhcmVudExpc3RlbmVyID0gcGFyZW50ICYmIHBhcmVudC5vbkNhbmNlbGxhdGlvblJlcXVlc3RlZCh0aGlzLmNhbmNlbCwgdGhpcyk7XG5cdH1cblxuXHRnZXQgdG9rZW4oKTogQ2FuY2VsbGF0aW9uVG9rZW4ge1xuXHRcdGlmICghdGhpcy5fdG9rZW4pIHtcblx0XHRcdC8vIGJlIGxhenkgYW5kIGNyZWF0ZSB0aGUgdG9rZW4gb25seSB3aGVuXG5cdFx0XHQvLyBhY3R1YWxseSBuZWVkZWRcblx0XHRcdHRoaXMuX3Rva2VuID0gbmV3IE11dGFibGVUb2tlbigpO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fdG9rZW47XG5cdH1cblxuXHRjYW5jZWwoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl90b2tlbikge1xuXHRcdFx0Ly8gc2F2ZSBhbiBvYmplY3QgYnkgcmV0dXJuaW5nIHRoZSBkZWZhdWx0XG5cdFx0XHQvLyBjYW5jZWxsZWQgdG9rZW4gd2hlbiBjYW5jZWxsYXRpb24gaGFwcGVuc1xuXHRcdFx0Ly8gYmVmb3JlIHNvbWVvbmUgYXNrcyBmb3IgdGhlIHRva2VuXG5cdFx0XHR0aGlzLl90b2tlbiA9IENhbmNlbGxhdGlvblRva2VuLkNhbmNlbGxlZDtcblxuXHRcdH0gZWxzZSBpZiAodGhpcy5fdG9rZW4gaW5zdGFuY2VvZiBNdXRhYmxlVG9rZW4pIHtcblx0XHRcdC8vIGFjdHVhbGx5IGNhbmNlbFxuXHRcdFx0dGhpcy5fdG9rZW4uY2FuY2VsKCk7XG5cdFx0fVxuXHR9XG5cblx0ZGlzcG9zZShjYW5jZWw6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuXHRcdGlmIChjYW5jZWwpIHtcblx0XHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0fVxuXHRcdHRoaXMuX3BhcmVudExpc3RlbmVyPy5kaXNwb3NlKCk7XG5cdFx0aWYgKCF0aGlzLl90b2tlbikge1xuXHRcdFx0Ly8gZW5zdXJlIHRvIGluaXRpYWxpemUgd2l0aCBhbiBlbXB0eSB0b2tlbiBpZiB3ZSBoYWQgbm9uZVxuXHRcdFx0dGhpcy5fdG9rZW4gPSBDYW5jZWxsYXRpb25Ub2tlbi5Ob25lO1xuXG5cdFx0fSBlbHNlIGlmICh0aGlzLl90b2tlbiBpbnN0YW5jZW9mIE11dGFibGVUb2tlbikge1xuXHRcdFx0Ly8gYWN0dWFsbHkgZGlzcG9zZVxuXHRcdFx0dGhpcy5fdG9rZW4uZGlzcG9zZSgpO1xuXHRcdH1cblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FuY2VsT25EaXNwb3NlKHN0b3JlOiBEaXNwb3NhYmxlU3RvcmUpOiBDYW5jZWxsYXRpb25Ub2tlbiB7XG5cdGNvbnN0IHNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xuXHRzdG9yZS5hZGQoeyBkaXNwb3NlKCkgeyBzb3VyY2UuY2FuY2VsKCk7IH0gfSk7XG5cdHJldHVybiBzb3VyY2UudG9rZW47XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogQ2FuIGJlIHBhc3NlZCBpbnRvIHRoZSBEZWxheWVkIHRvIGRlZmVyIHVzaW5nIGEgbWljcm90YXNrXG4gKiAqL1xuZXhwb3J0IGNvbnN0IE1pY3JvdGFza0RlbGF5ID0gU3ltYm9sKCdNaWNyb3Rhc2tEZWxheScpO1xuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlbiwgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9jYW5jZWxsYXRpb24nO1xuaW1wb3J0IHsgQnVnSW5kaWNhdGluZ0Vycm9yLCBDYW5jZWxsYXRpb25FcnJvciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2Vycm9ycyc7XG5pbXBvcnQgeyBFbWl0dGVyLCBFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcbmltcG9ydCB7IERpc3Bvc2FibGUsIERpc3Bvc2FibGVTdG9yZSwgSURpc3Bvc2FibGUsIE11dGFibGVEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgc2V0VGltZW91dDAgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBNaWNyb3Rhc2tEZWxheSB9IGZyb20gJy4vc3ltYm9scyc7XG5pbXBvcnQgeyBMYXp5IH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGF6eSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RoZW5hYmxlPFQ+KG9iajogdW5rbm93bik6IG9iaiBpcyBQcm9taXNlPFQ+IHtcblx0cmV0dXJuICEhb2JqICYmIHR5cGVvZiAob2JqIGFzIHVua25vd24gYXMgUHJvbWlzZTxUPikudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYW5jZWxhYmxlUHJvbWlzZTxUPiBleHRlbmRzIFByb21pc2U8VD4ge1xuXHRjYW5jZWwoKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbmNlbGFibGVQcm9taXNlPFQ+KGNhbGxiYWNrOiAodG9rZW46IENhbmNlbGxhdGlvblRva2VuKSA9PiBQcm9taXNlPFQ+KTogQ2FuY2VsYWJsZVByb21pc2U8VD4ge1xuXHRjb25zdCBzb3VyY2UgPSBuZXcgQ2FuY2VsbGF0aW9uVG9rZW5Tb3VyY2UoKTtcblxuXHRjb25zdCB0aGVuYWJsZSA9IGNhbGxiYWNrKHNvdXJjZS50b2tlbik7XG5cdGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3Qgc3Vic2NyaXB0aW9uID0gc291cmNlLnRva2VuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCgpID0+IHtcblx0XHRcdHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG5cdFx0XHRyZWplY3QobmV3IENhbmNlbGxhdGlvbkVycm9yKCkpO1xuXHRcdH0pO1xuXHRcdFByb21pc2UucmVzb2x2ZSh0aGVuYWJsZSkudGhlbih2YWx1ZSA9PiB7XG5cdFx0XHRzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuXHRcdFx0c291cmNlLmRpc3Bvc2UoKTtcblx0XHRcdHJlc29sdmUodmFsdWUpO1xuXHRcdH0sIGVyciA9PiB7XG5cdFx0XHRzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuXHRcdFx0c291cmNlLmRpc3Bvc2UoKTtcblx0XHRcdHJlamVjdChlcnIpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXR1cm4gPENhbmNlbGFibGVQcm9taXNlPFQ+Pm5ldyBjbGFzcyB7XG5cdFx0Y2FuY2VsKCkge1xuXHRcdFx0c291cmNlLmNhbmNlbCgpO1xuXHRcdFx0c291cmNlLmRpc3Bvc2UoKTtcblx0XHR9XG5cdFx0dGhlbjxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KHJlc29sdmU/OiAoKHZhbHVlOiBUKSA9PiBUUmVzdWx0MSB8IFByb21pc2U8VFJlc3VsdDE+KSB8IHVuZGVmaW5lZCB8IG51bGwsIHJlamVjdD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj4ge1xuXHRcdFx0cmV0dXJuIHByb21pc2UudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHRcdH1cblx0XHRjYXRjaDxUUmVzdWx0ID0gbmV2ZXI+KHJlamVjdD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlPFRSZXN1bHQ+KSB8IHVuZGVmaW5lZCB8IG51bGwpOiBQcm9taXNlPFQgfCBUUmVzdWx0PiB7XG5cdFx0XHRyZXR1cm4gdGhpcy50aGVuKHVuZGVmaW5lZCwgcmVqZWN0KTtcblx0XHR9XG5cdFx0ZmluYWxseShvbmZpbmFsbHk/OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQgfCBudWxsKTogUHJvbWlzZTxUPiB7XG5cdFx0XHRyZXR1cm4gcHJvbWlzZS5maW5hbGx5KG9uZmluYWxseSk7XG5cdFx0fVxuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBgdW5kZWZpbmVkYCBhcyBzb29uIGFzIHRoZSBwYXNzZWQgdG9rZW4gaXMgY2FuY2VsbGVkLlxuICogQHNlZSB7QGxpbmsgcmFjZUNhbmNlbGxhdGlvbkVycm9yfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFjZUNhbmNlbGxhdGlvbjxUPihwcm9taXNlOiBQcm9taXNlPFQ+LCB0b2tlbjogQ2FuY2VsbGF0aW9uVG9rZW4pOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+O1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBgZGVmYXVsdFZhbHVlYCBhcyBzb29uIGFzIHRoZSBwYXNzZWQgdG9rZW4gaXMgY2FuY2VsbGVkLlxuICogQHNlZSB7QGxpbmsgcmFjZUNhbmNlbGxhdGlvbkVycm9yfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFjZUNhbmNlbGxhdGlvbjxUPihwcm9taXNlOiBQcm9taXNlPFQ+LCB0b2tlbjogQ2FuY2VsbGF0aW9uVG9rZW4sIGRlZmF1bHRWYWx1ZTogVCk6IFByb21pc2U8VD47XG5cbmV4cG9ydCBmdW5jdGlvbiByYWNlQ2FuY2VsbGF0aW9uPFQ+KHByb21pc2U6IFByb21pc2U8VD4sIHRva2VuOiBDYW5jZWxsYXRpb25Ub2tlbiwgZGVmYXVsdFZhbHVlPzogVCk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xuXHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdGNvbnN0IHJlZiA9IHRva2VuLm9uQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCgpID0+IHtcblx0XHRcdHJlZi5kaXNwb3NlKCk7XG5cdFx0XHRyZXNvbHZlKGRlZmF1bHRWYWx1ZSk7XG5cdFx0fSk7XG5cdFx0cHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCkuZmluYWxseSgoKSA9PiByZWYuZGlzcG9zZSgpKTtcblx0fSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpdGggYW4ge0BDYW5jZWxsYXRpb25FcnJvcn0gYXMgc29vbiBhcyB0aGUgcGFzc2VkIHRva2VuIGlzIGNhbmNlbGxlZC5cbiAqIEBzZWUge0BsaW5rIHJhY2VDYW5jZWxsYXRpb259XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWNlQ2FuY2VsbGF0aW9uRXJyb3I8VD4ocHJvbWlzZTogUHJvbWlzZTxUPiwgdG9rZW46IENhbmNlbGxhdGlvblRva2VuKTogUHJvbWlzZTxUPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3QgcmVmID0gdG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKCkgPT4ge1xuXHRcdFx0cmVmLmRpc3Bvc2UoKTtcblx0XHRcdHJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG5cdFx0fSk7XG5cdFx0cHJvbWlzZS50aGVuKHJlc29sdmUsIHJlamVjdCkuZmluYWxseSgoKSA9PiByZWYuZGlzcG9zZSgpKTtcblx0fSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhcyBzb29uIGFzIG9uZSBvZiB0aGUgcHJvbWlzZXMgcmVzb2x2ZXMgb3IgcmVqZWN0cyBhbmQgY2FuY2VscyByZW1haW5pbmcgcHJvbWlzZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJhY2VDYW5jZWxsYWJsZVByb21pc2VzPFQ+KGNhbmNlbGxhYmxlUHJvbWlzZXM6IENhbmNlbGFibGVQcm9taXNlPFQ+W10pOiBQcm9taXNlPFQ+IHtcblx0bGV0IHJlc29sdmVkUHJvbWlzZUluZGV4ID0gLTE7XG5cdGNvbnN0IHByb21pc2VzID0gY2FuY2VsbGFibGVQcm9taXNlcy5tYXAoKHByb21pc2UsIGluZGV4KSA9PiBwcm9taXNlLnRoZW4ocmVzdWx0ID0+IHsgcmVzb2x2ZWRQcm9taXNlSW5kZXggPSBpbmRleDsgcmV0dXJuIHJlc3VsdDsgfSkpO1xuXHR0cnkge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IFByb21pc2UucmFjZShwcm9taXNlcyk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSBmaW5hbGx5IHtcblx0XHRjYW5jZWxsYWJsZVByb21pc2VzLmZvckVhY2goKGNhbmNlbGxhYmxlUHJvbWlzZSwgaW5kZXgpID0+IHtcblx0XHRcdGlmIChpbmRleCAhPT0gcmVzb2x2ZWRQcm9taXNlSW5kZXgpIHtcblx0XHRcdFx0Y2FuY2VsbGFibGVQcm9taXNlLmNhbmNlbCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByYWNlVGltZW91dDxUPihwcm9taXNlOiBQcm9taXNlPFQ+LCB0aW1lb3V0OiBudW1iZXIsIG9uVGltZW91dD86ICgpID0+IHZvaWQpOiBQcm9taXNlPFQgfCB1bmRlZmluZWQ+IHtcblx0bGV0IHByb21pc2VSZXNvbHZlOiAoKHZhbHVlOiBUIHwgdW5kZWZpbmVkKSA9PiB2b2lkKSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuXHRjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdHByb21pc2VSZXNvbHZlPy4odW5kZWZpbmVkKTtcblx0XHRvblRpbWVvdXQ/LigpO1xuXHR9LCB0aW1lb3V0KTtcblxuXHRyZXR1cm4gUHJvbWlzZS5yYWNlKFtcblx0XHRwcm9taXNlLmZpbmFsbHkoKCkgPT4gY2xlYXJUaW1lb3V0KHRpbWVyKSksXG5cdFx0bmV3IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ocmVzb2x2ZSA9PiBwcm9taXNlUmVzb2x2ZSA9IHJlc29sdmUpXG5cdF0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNQcm9taXNlPFQ+KGNhbGxiYWNrOiAoKSA9PiBUIHwgUHJvbWlzZUxpa2U8VD4pOiBQcm9taXNlPFQ+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPFQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRjb25zdCBpdGVtID0gY2FsbGJhY2soKTtcblx0XHRpZiAoaXNUaGVuYWJsZTxUPihpdGVtKSkge1xuXHRcdFx0aXRlbS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc29sdmUoaXRlbSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2UsIHBsdXMgaXRzIGByZXNvbHZlYCBhbmQgYHJlamVjdGAgY2FsbGJhY2tzLlxuICpcbiAqIFJlcGxhY2Ugd2l0aCBzdGFuZGFyZGl6ZWQgW2BQcm9taXNlLndpdGhSZXNvbHZlcnNgXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9Qcm9taXNlL3dpdGhSZXNvbHZlcnMpIG9uY2UgaXQgaXMgc3VwcG9ydGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9taXNlV2l0aFJlc29sdmVyczxUPigpOiB7IHByb21pc2U6IFByb21pc2U8VD47IHJlc29sdmU6ICh2YWx1ZTogVCB8IFByb21pc2VMaWtlPFQ+KSA9PiB2b2lkOyByZWplY3Q6IChlcnI/OiBhbnkpID0+IHZvaWQgfSB7XG5cdGxldCByZXNvbHZlOiAodmFsdWU6IFQgfCBQcm9taXNlTGlrZTxUPikgPT4gdm9pZDtcblx0bGV0IHJlamVjdDogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcblx0Y29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlPFQ+KChyZXMsIHJlaikgPT4ge1xuXHRcdHJlc29sdmUgPSByZXM7XG5cdFx0cmVqZWN0ID0gcmVqO1xuXHR9KTtcblx0cmV0dXJuIHsgcHJvbWlzZSwgcmVzb2x2ZTogcmVzb2x2ZSEsIHJlamVjdDogcmVqZWN0ISB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUYXNrPFQ+IHtcblx0KCk6IFQ7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgdG8gcHJldmVudCBhY2N1bXVsYXRpb24gb2Ygc2VxdWVudGlhbCBhc3luYyB0YXNrcy5cbiAqXG4gKiBJbWFnaW5lIGEgbWFpbCBtYW4gd2l0aCB0aGUgc29sZSB0YXNrIG9mIGRlbGl2ZXJpbmcgbGV0dGVycy4gQXMgc29vbiBhc1xuICogYSBsZXR0ZXIgc3VibWl0dGVkIGZvciBkZWxpdmVyeSwgaGUgZHJpdmVzIHRvIHRoZSBkZXN0aW5hdGlvbiwgZGVsaXZlcnMgaXRcbiAqIGFuZCByZXR1cm5zIHRvIGhpcyBiYXNlLiBJbWFnaW5lIHRoYXQgZHVyaW5nIHRoZSB0cmlwLCBOIG1vcmUgbGV0dGVycyB3ZXJlIHN1Ym1pdHRlZC5cbiAqIFdoZW4gdGhlIG1haWwgbWFuIHJldHVybnMsIGhlIHBpY2tzIHRob3NlIE4gbGV0dGVycyBhbmQgZGVsaXZlcnMgdGhlbSBhbGwgaW4gYVxuICogc2luZ2xlIHRyaXAuIEV2ZW4gdGhvdWdoIE4rMSBzdWJtaXNzaW9ucyBvY2N1cnJlZCwgb25seSAyIGRlbGl2ZXJpZXMgd2VyZSBtYWRlLlxuICpcbiAqIFRoZSB0aHJvdHRsZXIgaW1wbGVtZW50cyB0aGlzIHZpYSB0aGUgcXVldWUoKSBtZXRob2QsIGJ5IHByb3ZpZGluZyBpdCBhIHRhc2tcbiAqIGZhY3RvcnkuIEZvbGxvd2luZyB0aGUgZXhhbXBsZTpcbiAqXG4gKiBcdFx0Y29uc3QgdGhyb3R0bGVyID0gbmV3IFRocm90dGxlcigpO1xuICogXHRcdGNvbnN0IGxldHRlcnMgPSBbXTtcbiAqXG4gKiBcdFx0ZnVuY3Rpb24gZGVsaXZlcigpIHtcbiAqIFx0XHRcdGNvbnN0IGxldHRlcnNUb0RlbGl2ZXIgPSBsZXR0ZXJzO1xuICogXHRcdFx0bGV0dGVycyA9IFtdO1xuICogXHRcdFx0cmV0dXJuIG1ha2VUaGVUcmlwKGxldHRlcnNUb0RlbGl2ZXIpO1xuICogXHRcdH1cbiAqXG4gKiBcdFx0ZnVuY3Rpb24gb25MZXR0ZXJSZWNlaXZlZChsKSB7XG4gKiBcdFx0XHRsZXR0ZXJzLnB1c2gobCk7XG4gKiBcdFx0XHR0aHJvdHRsZXIucXVldWUoZGVsaXZlcik7XG4gKiBcdFx0fVxuICovXG5leHBvcnQgY2xhc3MgVGhyb3R0bGVyIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgYWN0aXZlUHJvbWlzZTogUHJvbWlzZTxhbnk+IHwgbnVsbDtcblx0cHJpdmF0ZSBxdWV1ZWRQcm9taXNlOiBQcm9taXNlPGFueT4gfCBudWxsO1xuXHRwcml2YXRlIHF1ZXVlZFByb21pc2VGYWN0b3J5OiBJVGFzazxQcm9taXNlPGFueT4+IHwgbnVsbDtcblxuXHRwcml2YXRlIGlzRGlzcG9zZWQgPSBmYWxzZTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmFjdGl2ZVByb21pc2UgPSBudWxsO1xuXHRcdHRoaXMucXVldWVkUHJvbWlzZSA9IG51bGw7XG5cdFx0dGhpcy5xdWV1ZWRQcm9taXNlRmFjdG9yeSA9IG51bGw7XG5cdH1cblxuXHRxdWV1ZTxUPihwcm9taXNlRmFjdG9yeTogSVRhc2s8UHJvbWlzZTxUPj4pOiBQcm9taXNlPFQ+IHtcblx0XHRpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdUaHJvdHRsZXIgaXMgZGlzcG9zZWQnKSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuYWN0aXZlUHJvbWlzZSkge1xuXHRcdFx0dGhpcy5xdWV1ZWRQcm9taXNlRmFjdG9yeSA9IHByb21pc2VGYWN0b3J5O1xuXG5cdFx0XHRpZiAoIXRoaXMucXVldWVkUHJvbWlzZSkge1xuXHRcdFx0XHRjb25zdCBvbkNvbXBsZXRlID0gKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucXVldWVkUHJvbWlzZSA9IG51bGw7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gdGhpcy5xdWV1ZSh0aGlzLnF1ZXVlZFByb21pc2VGYWN0b3J5ISk7XG5cdFx0XHRcdFx0dGhpcy5xdWV1ZWRQcm9taXNlRmFjdG9yeSA9IG51bGw7XG5cblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdHRoaXMucXVldWVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuXHRcdFx0XHRcdHRoaXMuYWN0aXZlUHJvbWlzZSEudGhlbihvbkNvbXBsZXRlLCBvbkNvbXBsZXRlKS50aGVuKHJlc29sdmUpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0dGhpcy5xdWV1ZWRQcm9taXNlIS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHR0aGlzLmFjdGl2ZVByb21pc2UgPSBwcm9taXNlRmFjdG9yeSgpO1xuXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHRoaXMuYWN0aXZlUHJvbWlzZSEudGhlbigocmVzdWx0OiBUKSA9PiB7XG5cdFx0XHRcdHRoaXMuYWN0aXZlUHJvbWlzZSA9IG51bGw7XG5cdFx0XHRcdHJlc29sdmUocmVzdWx0KTtcblx0XHRcdH0sIChlcnI6IHVua25vd24pID0+IHtcblx0XHRcdFx0dGhpcy5hY3RpdmVQcm9taXNlID0gbnVsbDtcblx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU2VxdWVuY2VyIHtcblxuXHRwcml2YXRlIGN1cnJlbnQ6IFByb21pc2U8dW5rbm93bj4gPSBQcm9taXNlLnJlc29sdmUobnVsbCk7XG5cblx0cXVldWU8VD4ocHJvbWlzZVRhc2s6IElUYXNrPFByb21pc2U8VD4+KTogUHJvbWlzZTxUPiB7XG5cdFx0cmV0dXJuIHRoaXMuY3VycmVudCA9IHRoaXMuY3VycmVudC50aGVuKCgpID0+IHByb21pc2VUYXNrKCksICgpID0+IHByb21pc2VUYXNrKCkpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXF1ZW5jZXJCeUtleTxUS2V5PiB7XG5cblx0cHJpdmF0ZSBwcm9taXNlTWFwID0gbmV3IE1hcDxUS2V5LCBQcm9taXNlPHVua25vd24+PigpO1xuXG5cdHF1ZXVlPFQ+KGtleTogVEtleSwgcHJvbWlzZVRhc2s6IElUYXNrPFByb21pc2U8VD4+KTogUHJvbWlzZTxUPiB7XG5cdFx0Y29uc3QgcnVubmluZ1Byb21pc2UgPSB0aGlzLnByb21pc2VNYXAuZ2V0KGtleSkgPz8gUHJvbWlzZS5yZXNvbHZlKCk7XG5cdFx0Y29uc3QgbmV3UHJvbWlzZSA9IHJ1bm5pbmdQcm9taXNlXG5cdFx0XHQuY2F0Y2goKCkgPT4geyB9KVxuXHRcdFx0LnRoZW4ocHJvbWlzZVRhc2spXG5cdFx0XHQuZmluYWxseSgoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnByb21pc2VNYXAuZ2V0KGtleSkgPT09IG5ld1Byb21pc2UpIHtcblx0XHRcdFx0XHR0aGlzLnByb21pc2VNYXAuZGVsZXRlKGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdHRoaXMucHJvbWlzZU1hcC5zZXQoa2V5LCBuZXdQcm9taXNlKTtcblx0XHRyZXR1cm4gbmV3UHJvbWlzZTtcblx0fVxufVxuXG5pbnRlcmZhY2UgSVNjaGVkdWxlZExhdGVyIGV4dGVuZHMgSURpc3Bvc2FibGUge1xuXHRpc1RyaWdnZXJlZCgpOiBib29sZWFuO1xufVxuXG5jb25zdCB0aW1lb3V0RGVmZXJyZWQgPSAodGltZW91dDogbnVtYmVyLCBmbjogKCkgPT4gdm9pZCk6IElTY2hlZHVsZWRMYXRlciA9PiB7XG5cdGxldCBzY2hlZHVsZWQgPSB0cnVlO1xuXHRjb25zdCBoYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRzY2hlZHVsZWQgPSBmYWxzZTtcblx0XHRmbigpO1xuXHR9LCB0aW1lb3V0KTtcblx0cmV0dXJuIHtcblx0XHRpc1RyaWdnZXJlZDogKCkgPT4gc2NoZWR1bGVkLFxuXHRcdGRpc3Bvc2U6ICgpID0+IHtcblx0XHRcdGNsZWFyVGltZW91dChoYW5kbGUpO1xuXHRcdFx0c2NoZWR1bGVkID0gZmFsc2U7XG5cdFx0fSxcblx0fTtcbn07XG5cbmNvbnN0IG1pY3JvdGFza0RlZmVycmVkID0gKGZuOiAoKSA9PiB2b2lkKTogSVNjaGVkdWxlZExhdGVyID0+IHtcblx0bGV0IHNjaGVkdWxlZCA9IHRydWU7XG5cdHF1ZXVlTWljcm90YXNrKCgpID0+IHtcblx0XHRpZiAoc2NoZWR1bGVkKSB7XG5cdFx0XHRzY2hlZHVsZWQgPSBmYWxzZTtcblx0XHRcdGZuKCk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4ge1xuXHRcdGlzVHJpZ2dlcmVkOiAoKSA9PiBzY2hlZHVsZWQsXG5cdFx0ZGlzcG9zZTogKCkgPT4geyBzY2hlZHVsZWQgPSBmYWxzZTsgfSxcblx0fTtcbn07XG5cbi8qKlxuICogQSBoZWxwZXIgdG8gZGVsYXkgKGRlYm91bmNlKSBleGVjdXRpb24gb2YgYSB0YXNrIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkIG9mdGVuLlxuICpcbiAqIEZvbGxvd2luZyB0aGUgdGhyb3R0bGVyLCBub3cgaW1hZ2luZSB0aGUgbWFpbCBtYW4gd2FudHMgdG8gb3B0aW1pemUgdGhlIG51bWJlciBvZlxuICogdHJpcHMgcHJvYWN0aXZlbHkuIFRoZSB0cmlwIGl0c2VsZiBjYW4gYmUgbG9uZywgc28gaGUgZGVjaWRlcyBub3QgdG8gbWFrZSB0aGUgdHJpcFxuICogYXMgc29vbiBhcyBhIGxldHRlciBpcyBzdWJtaXR0ZWQuIEluc3RlYWQgaGUgd2FpdHMgYSB3aGlsZSwgaW4gY2FzZSBtb3JlXG4gKiBsZXR0ZXJzIGFyZSBzdWJtaXR0ZWQuIEFmdGVyIHNhaWQgd2FpdGluZyBwZXJpb2QsIGlmIG5vIGxldHRlcnMgd2VyZSBzdWJtaXR0ZWQsIGhlXG4gKiBkZWNpZGVzIHRvIG1ha2UgdGhlIHRyaXAuIEltYWdpbmUgdGhhdCBOIG1vcmUgbGV0dGVycyB3ZXJlIHN1Ym1pdHRlZCBhZnRlciB0aGUgZmlyc3RcbiAqIG9uZSwgYWxsIHdpdGhpbiBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIGJldHdlZW4gZWFjaCBvdGhlci4gRXZlbiB0aG91Z2ggTisxXG4gKiBzdWJtaXNzaW9ucyBvY2N1cnJlZCwgb25seSAxIGRlbGl2ZXJ5IHdhcyBtYWRlLlxuICpcbiAqIFRoZSBkZWxheWVyIG9mZmVycyB0aGlzIGJlaGF2aW9yIHZpYSB0aGUgdHJpZ2dlcigpIG1ldGhvZCwgaW50byB3aGljaCBib3RoIHRoZSB0YXNrXG4gKiB0byBiZSBleGVjdXRlZCBhbmQgdGhlIHdhaXRpbmcgcGVyaW9kIChkZWxheSkgbXVzdCBiZSBwYXNzZWQgaW4gYXMgYXJndW1lbnRzLiBGb2xsb3dpbmdcbiAqIHRoZSBleGFtcGxlOlxuICpcbiAqIFx0XHRjb25zdCBkZWxheWVyID0gbmV3IERlbGF5ZXIoV0FJVElOR19QRVJJT0QpO1xuICogXHRcdGNvbnN0IGxldHRlcnMgPSBbXTtcbiAqXG4gKiBcdFx0ZnVuY3Rpb24gbGV0dGVyUmVjZWl2ZWQobCkge1xuICogXHRcdFx0bGV0dGVycy5wdXNoKGwpO1xuICogXHRcdFx0ZGVsYXllci50cmlnZ2VyKCgpID0+IHsgcmV0dXJuIG1ha2VUaGVUcmlwKCk7IH0pO1xuICogXHRcdH1cbiAqL1xuZXhwb3J0IGNsYXNzIERlbGF5ZXI8VD4gaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG5cblx0cHJpdmF0ZSBkZWZlcnJlZDogSVNjaGVkdWxlZExhdGVyIHwgbnVsbDtcblx0cHJpdmF0ZSBjb21wbGV0aW9uUHJvbWlzZTogUHJvbWlzZTxhbnk+IHwgbnVsbDtcblx0cHJpdmF0ZSBkb1Jlc29sdmU6ICgodmFsdWU/OiBhbnkgfCBQcm9taXNlPGFueT4pID0+IHZvaWQpIHwgbnVsbDtcblx0cHJpdmF0ZSBkb1JlamVjdDogKChlcnI6IGFueSkgPT4gdm9pZCkgfCBudWxsO1xuXHRwcml2YXRlIHRhc2s6IElUYXNrPFQgfCBQcm9taXNlPFQ+PiB8IG51bGw7XG5cblx0Y29uc3RydWN0b3IocHVibGljIGRlZmF1bHREZWxheTogbnVtYmVyIHwgdHlwZW9mIE1pY3JvdGFza0RlbGF5KSB7XG5cdFx0dGhpcy5kZWZlcnJlZCA9IG51bGw7XG5cdFx0dGhpcy5jb21wbGV0aW9uUHJvbWlzZSA9IG51bGw7XG5cdFx0dGhpcy5kb1Jlc29sdmUgPSBudWxsO1xuXHRcdHRoaXMuZG9SZWplY3QgPSBudWxsO1xuXHRcdHRoaXMudGFzayA9IG51bGw7XG5cdH1cblxuXHR0cmlnZ2VyKHRhc2s6IElUYXNrPFQgfCBQcm9taXNlPFQ+PiwgZGVsYXkgPSB0aGlzLmRlZmF1bHREZWxheSk6IFByb21pc2U8VD4ge1xuXHRcdHRoaXMudGFzayA9IHRhc2s7XG5cdFx0dGhpcy5jYW5jZWxUaW1lb3V0KCk7XG5cblx0XHRpZiAoIXRoaXMuY29tcGxldGlvblByb21pc2UpIHtcblx0XHRcdHRoaXMuY29tcGxldGlvblByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHRoaXMuZG9SZXNvbHZlID0gcmVzb2x2ZTtcblx0XHRcdFx0dGhpcy5kb1JlamVjdCA9IHJlamVjdDtcblx0XHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNvbXBsZXRpb25Qcm9taXNlID0gbnVsbDtcblx0XHRcdFx0dGhpcy5kb1Jlc29sdmUgPSBudWxsO1xuXHRcdFx0XHRpZiAodGhpcy50YXNrKSB7XG5cdFx0XHRcdFx0Y29uc3QgdGFzayA9IHRoaXMudGFzaztcblx0XHRcdFx0XHR0aGlzLnRhc2sgPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiB0YXNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZuID0gKCkgPT4ge1xuXHRcdFx0dGhpcy5kZWZlcnJlZCA9IG51bGw7XG5cdFx0XHR0aGlzLmRvUmVzb2x2ZT8uKG51bGwpO1xuXHRcdH07XG5cblx0XHR0aGlzLmRlZmVycmVkID0gZGVsYXkgPT09IE1pY3JvdGFza0RlbGF5ID8gbWljcm90YXNrRGVmZXJyZWQoZm4pIDogdGltZW91dERlZmVycmVkKGRlbGF5LCBmbik7XG5cblx0XHRyZXR1cm4gdGhpcy5jb21wbGV0aW9uUHJvbWlzZTtcblx0fVxuXG5cdGlzVHJpZ2dlcmVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhIXRoaXMuZGVmZXJyZWQ/LmlzVHJpZ2dlcmVkKCk7XG5cdH1cblxuXHRjYW5jZWwoKTogdm9pZCB7XG5cdFx0dGhpcy5jYW5jZWxUaW1lb3V0KCk7XG5cblx0XHRpZiAodGhpcy5jb21wbGV0aW9uUHJvbWlzZSkge1xuXHRcdFx0dGhpcy5kb1JlamVjdD8uKG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcblx0XHRcdHRoaXMuY29tcGxldGlvblByb21pc2UgPSBudWxsO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgY2FuY2VsVGltZW91dCgpOiB2b2lkIHtcblx0XHR0aGlzLmRlZmVycmVkPy5kaXNwb3NlKCk7XG5cdFx0dGhpcy5kZWZlcnJlZCA9IG51bGw7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY2FuY2VsKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIGhlbHBlciB0byBkZWxheSBleGVjdXRpb24gb2YgYSB0YXNrIHRoYXQgaXMgYmVpbmcgcmVxdWVzdGVkIG9mdGVuLCB3aGlsZVxuICogcHJldmVudGluZyBhY2N1bXVsYXRpb24gb2YgY29uc2VjdXRpdmUgZXhlY3V0aW9ucywgd2hpbGUgdGhlIHRhc2sgcnVucy5cbiAqXG4gKiBUaGUgbWFpbCBtYW4gaXMgY2xldmVyIGFuZCB3YWl0cyBmb3IgYSBjZXJ0YWluIGFtb3VudCBvZiB0aW1lLCBiZWZvcmUgZ29pbmdcbiAqIG91dCB0byBkZWxpdmVyIGxldHRlcnMuIFdoaWxlIHRoZSBtYWlsIG1hbiBpcyBnb2luZyBvdXQsIG1vcmUgbGV0dGVycyBhcnJpdmVcbiAqIGFuZCBjYW4gb25seSBiZSBkZWxpdmVyZWQgb25jZSBoZSBpcyBiYWNrLiBPbmNlIGhlIGlzIGJhY2sgdGhlIG1haWwgbWFuIHdpbGxcbiAqIGRvIG9uZSBtb3JlIHRyaXAgdG8gZGVsaXZlciB0aGUgbGV0dGVycyB0aGF0IGhhdmUgYWNjdW11bGF0ZWQgd2hpbGUgaGUgd2FzIG91dC5cbiAqL1xuZXhwb3J0IGNsYXNzIFRocm90dGxlZERlbGF5ZXI8VD4ge1xuXG5cdHByaXZhdGUgZGVsYXllcjogRGVsYXllcjxQcm9taXNlPFQ+Pjtcblx0cHJpdmF0ZSB0aHJvdHRsZXI6IFRocm90dGxlcjtcblxuXHRjb25zdHJ1Y3RvcihkZWZhdWx0RGVsYXk6IG51bWJlcikge1xuXHRcdHRoaXMuZGVsYXllciA9IG5ldyBEZWxheWVyKGRlZmF1bHREZWxheSk7XG5cdFx0dGhpcy50aHJvdHRsZXIgPSBuZXcgVGhyb3R0bGVyKCk7XG5cdH1cblxuXHR0cmlnZ2VyKHByb21pc2VGYWN0b3J5OiBJVGFzazxQcm9taXNlPFQ+PiwgZGVsYXk/OiBudW1iZXIpOiBQcm9taXNlPFQ+IHtcblx0XHRyZXR1cm4gdGhpcy5kZWxheWVyLnRyaWdnZXIoKCkgPT4gdGhpcy50aHJvdHRsZXIucXVldWUocHJvbWlzZUZhY3RvcnkpLCBkZWxheSkgYXMgdW5rbm93biBhcyBQcm9taXNlPFQ+O1xuXHR9XG5cblx0aXNUcmlnZ2VyZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuZGVsYXllci5pc1RyaWdnZXJlZCgpO1xuXHR9XG5cblx0Y2FuY2VsKCk6IHZvaWQge1xuXHRcdHRoaXMuZGVsYXllci5jYW5jZWwoKTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5kZWxheWVyLmRpc3Bvc2UoKTtcblx0XHR0aGlzLnRocm90dGxlci5kaXNwb3NlKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIGJhcnJpZXIgdGhhdCBpcyBpbml0aWFsbHkgY2xvc2VkIGFuZCB0aGVuIGJlY29tZXMgb3BlbmVkIHBlcm1hbmVudGx5LlxuICovXG5leHBvcnQgY2xhc3MgQmFycmllciB7XG5cdHByaXZhdGUgX2lzT3BlbjogYm9vbGVhbjtcblx0cHJpdmF0ZSBfcHJvbWlzZTogUHJvbWlzZTxib29sZWFuPjtcblx0cHJpdmF0ZSBfY29tcGxldGVQcm9taXNlITogKHY6IGJvb2xlYW4pID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5faXNPcGVuID0gZmFsc2U7XG5cdFx0dGhpcy5fcHJvbWlzZSA9IG5ldyBQcm9taXNlPGJvb2xlYW4+KChjLCBlKSA9PiB7XG5cdFx0XHR0aGlzLl9jb21wbGV0ZVByb21pc2UgPSBjO1xuXHRcdH0pO1xuXHR9XG5cblx0aXNPcGVuKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLl9pc09wZW47XG5cdH1cblxuXHRvcGVuKCk6IHZvaWQge1xuXHRcdHRoaXMuX2lzT3BlbiA9IHRydWU7XG5cdFx0dGhpcy5fY29tcGxldGVQcm9taXNlKHRydWUpO1xuXHR9XG5cblx0d2FpdCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcblx0XHRyZXR1cm4gdGhpcy5fcHJvbWlzZTtcblx0fVxufVxuXG4vKipcbiAqIEEgYmFycmllciB0aGF0IGlzIGluaXRpYWxseSBjbG9zZWQgYW5kIHRoZW4gYmVjb21lcyBvcGVuZWQgcGVybWFuZW50bHkgYWZ0ZXIgYSBjZXJ0YWluIHBlcmlvZCBvZlxuICogdGltZSBvciB3aGVuIG9wZW4gaXMgY2FsbGVkIGV4cGxpY2l0bHlcbiAqL1xuZXhwb3J0IGNsYXNzIEF1dG9PcGVuQmFycmllciBleHRlbmRzIEJhcnJpZXIge1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX3RpbWVvdXQ6IGFueTtcblxuXHRjb25zdHJ1Y3RvcihhdXRvT3BlblRpbWVNczogbnVtYmVyKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl90aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLm9wZW4oKSwgYXV0b09wZW5UaW1lTXMpO1xuXHR9XG5cblx0b3ZlcnJpZGUgb3BlbigpOiB2b2lkIHtcblx0XHRjbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCk7XG5cdFx0c3VwZXIub3BlbigpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KG1pbGxpczogbnVtYmVyKTogQ2FuY2VsYWJsZVByb21pc2U8dm9pZD47XG5leHBvcnQgZnVuY3Rpb24gdGltZW91dChtaWxsaXM6IG51bWJlciwgdG9rZW46IENhbmNlbGxhdGlvblRva2VuKTogUHJvbWlzZTx2b2lkPjtcbmV4cG9ydCBmdW5jdGlvbiB0aW1lb3V0KG1pbGxpczogbnVtYmVyLCB0b2tlbj86IENhbmNlbGxhdGlvblRva2VuKTogQ2FuY2VsYWJsZVByb21pc2U8dm9pZD4gfCBQcm9taXNlPHZvaWQ+IHtcblx0aWYgKCF0b2tlbikge1xuXHRcdHJldHVybiBjcmVhdGVDYW5jZWxhYmxlUHJvbWlzZSh0b2tlbiA9PiB0aW1lb3V0KG1pbGxpcywgdG9rZW4pKTtcblx0fVxuXG5cdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Y29uc3QgaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRkaXNwb3NhYmxlLmRpc3Bvc2UoKTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9LCBtaWxsaXMpO1xuXHRcdGNvbnN0IGRpc3Bvc2FibGUgPSB0b2tlbi5vbkNhbmNlbGxhdGlvblJlcXVlc3RlZCgoKSA9PiB7XG5cdFx0XHRjbGVhclRpbWVvdXQoaGFuZGxlKTtcblx0XHRcdGRpc3Bvc2FibGUuZGlzcG9zZSgpO1xuXHRcdFx0cmVqZWN0KG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHRpbWVvdXQgdGhhdCBjYW4gYmUgZGlzcG9zZWQgdXNpbmcgaXRzIHJldHVybmVkIHZhbHVlLlxuICogQHBhcmFtIGhhbmRsZXIgVGhlIHRpbWVvdXQgaGFuZGxlci5cbiAqIEBwYXJhbSB0aW1lb3V0IEFuIG9wdGlvbmFsIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzLlxuICogQHBhcmFtIHN0b3JlIEFuIG9wdGlvbmFsIHtAbGluayBEaXNwb3NhYmxlU3RvcmV9IHRoYXQgd2lsbCBoYXZlIHRoZSB0aW1lb3V0IGRpc3Bvc2FibGUgbWFuYWdlZCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBzdG9yZSA9IG5ldyBEaXNwb3NhYmxlU3RvcmU7XG4gKiAvLyBDYWxsIHRoZSB0aW1lb3V0IGFmdGVyIDEwMDBtcyBhdCB3aGljaCBwb2ludCBpdCB3aWxsIGJlIGF1dG9tYXRpY2FsbHlcbiAqIC8vIGV2aWN0ZWQgZnJvbSB0aGUgc3RvcmUuXG4gKiBjb25zdCB0aW1lb3V0RGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVUaW1lb3V0KCgpID0+IHt9LCAxMDAwLCBzdG9yZSk7XG4gKlxuICogaWYgKGZvbykge1xuICogICAvLyBDYW5jZWwgdGhlIHRpbWVvdXQgYW5kIGV2aWN0IGl0IGZyb20gc3RvcmUuXG4gKiAgIHRpbWVvdXREaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAqIH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2FibGVUaW1lb3V0KGhhbmRsZXI6ICgpID0+IHZvaWQsIHRpbWVvdXQgPSAwLCBzdG9yZT86IERpc3Bvc2FibGVTdG9yZSk6IElEaXNwb3NhYmxlIHtcblx0Y29uc3QgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRoYW5kbGVyKCk7XG5cdFx0aWYgKHN0b3JlKSB7XG5cdFx0XHRkaXNwb3NhYmxlLmRpc3Bvc2UoKTtcblx0XHR9XG5cdH0sIHRpbWVvdXQpO1xuXHRjb25zdCBkaXNwb3NhYmxlID0gdG9EaXNwb3NhYmxlKCgpID0+IHtcblx0XHRjbGVhclRpbWVvdXQodGltZXIpO1xuXHRcdHN0b3JlPy5kZWxldGVBbmRMZWFrKGRpc3Bvc2FibGUpO1xuXHR9KTtcblx0c3RvcmU/LmFkZChkaXNwb3NhYmxlKTtcblx0cmV0dXJuIGRpc3Bvc2FibGU7XG59XG5cbi8qKlxuICogUnVucyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBwcm9taXNlIGZhY3RvcmllcyBpbiBzZXF1ZW50aWFsIG9yZGVyLiBUaGUgcmV0dXJuZWRcbiAqIHByb21pc2Ugd2lsbCBjb21wbGV0ZSB0byBhbiBhcnJheSBvZiByZXN1bHRzIGZyb20gZWFjaCBwcm9taXNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXF1ZW5jZTxUPihwcm9taXNlRmFjdG9yaWVzOiBJVGFzazxQcm9taXNlPFQ+PltdKTogUHJvbWlzZTxUW10+IHtcblx0Y29uc3QgcmVzdWx0czogVFtdID0gW107XG5cdGxldCBpbmRleCA9IDA7XG5cdGNvbnN0IGxlbiA9IHByb21pc2VGYWN0b3JpZXMubGVuZ3RoO1xuXG5cdGZ1bmN0aW9uIG5leHQoKTogUHJvbWlzZTxUPiB8IG51bGwge1xuXHRcdHJldHVybiBpbmRleCA8IGxlbiA/IHByb21pc2VGYWN0b3JpZXNbaW5kZXgrK10oKSA6IG51bGw7XG5cdH1cblxuXHRmdW5jdGlvbiB0aGVuSGFuZGxlcihyZXN1bHQ6IGFueSk6IFByb21pc2U8YW55PiB7XG5cdFx0aWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIHJlc3VsdCAhPT0gbnVsbCkge1xuXHRcdFx0cmVzdWx0cy5wdXNoKHJlc3VsdCk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgbiA9IG5leHQoKTtcblx0XHRpZiAobikge1xuXHRcdFx0cmV0dXJuIG4udGhlbih0aGVuSGFuZGxlcik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcblx0fVxuXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCkudGhlbih0aGVuSGFuZGxlcik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaXJzdDxUPihwcm9taXNlRmFjdG9yaWVzOiBJVGFzazxQcm9taXNlPFQ+PltdLCBzaG91bGRTdG9wOiAodDogVCkgPT4gYm9vbGVhbiA9IHQgPT4gISF0LCBkZWZhdWx0VmFsdWU6IFQgfCBudWxsID0gbnVsbCk6IFByb21pc2U8VCB8IG51bGw+IHtcblx0bGV0IGluZGV4ID0gMDtcblx0Y29uc3QgbGVuID0gcHJvbWlzZUZhY3Rvcmllcy5sZW5ndGg7XG5cblx0Y29uc3QgbG9vcDogKCkgPT4gUHJvbWlzZTxUIHwgbnVsbD4gPSAoKSA9PiB7XG5cdFx0aWYgKGluZGV4ID49IGxlbikge1xuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0VmFsdWUpO1xuXHRcdH1cblxuXHRcdGNvbnN0IGZhY3RvcnkgPSBwcm9taXNlRmFjdG9yaWVzW2luZGV4KytdO1xuXHRcdGNvbnN0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZmFjdG9yeSgpKTtcblxuXHRcdHJldHVybiBwcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcblx0XHRcdGlmIChzaG91bGRTdG9wKHJlc3VsdCkpIHtcblx0XHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbG9vcCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHJldHVybiBsb29wKCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcmVzdWx0IG9mIHRoZSBmaXJzdCBwcm9taXNlIHRoYXQgbWF0Y2hlcyB0aGUgXCJzaG91bGRTdG9wXCIsXG4gKiBydW5uaW5nIGFsbCBwcm9taXNlcyBpbiBwYXJhbGxlbC4gU3VwcG9ydHMgY2FuY2VsYWJsZSBwcm9taXNlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0UGFyYWxsZWw8VD4ocHJvbWlzZUxpc3Q6IFByb21pc2U8VD5bXSwgc2hvdWxkU3RvcD86ICh0OiBUKSA9PiBib29sZWFuLCBkZWZhdWx0VmFsdWU/OiBUIHwgbnVsbCk6IFByb21pc2U8VCB8IG51bGw+O1xuZXhwb3J0IGZ1bmN0aW9uIGZpcnN0UGFyYWxsZWw8VCwgUiBleHRlbmRzIFQ+KHByb21pc2VMaXN0OiBQcm9taXNlPFQ+W10sIHNob3VsZFN0b3A6ICh0OiBUKSA9PiB0IGlzIFIsIGRlZmF1bHRWYWx1ZT86IFIgfCBudWxsKTogUHJvbWlzZTxSIHwgbnVsbD47XG5leHBvcnQgZnVuY3Rpb24gZmlyc3RQYXJhbGxlbDxUPihwcm9taXNlTGlzdDogUHJvbWlzZTxUPltdLCBzaG91bGRTdG9wOiAodDogVCkgPT4gYm9vbGVhbiA9IHQgPT4gISF0LCBkZWZhdWx0VmFsdWU6IFQgfCBudWxsID0gbnVsbCkge1xuXHRpZiAocHJvbWlzZUxpc3QubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShkZWZhdWx0VmFsdWUpO1xuXHR9XG5cblx0bGV0IHRvZG8gPSBwcm9taXNlTGlzdC5sZW5ndGg7XG5cdGNvbnN0IGZpbmlzaCA9ICgpID0+IHtcblx0XHR0b2RvID0gLTE7XG5cdFx0Zm9yIChjb25zdCBwcm9taXNlIG9mIHByb21pc2VMaXN0KSB7XG5cdFx0XHQocHJvbWlzZSBhcyBQYXJ0aWFsPENhbmNlbGFibGVQcm9taXNlPFQ+PikuY2FuY2VsPy4oKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIG5ldyBQcm9taXNlPFQgfCBudWxsPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0Zm9yIChjb25zdCBwcm9taXNlIG9mIHByb21pc2VMaXN0KSB7XG5cdFx0XHRwcm9taXNlLnRoZW4ocmVzdWx0ID0+IHtcblx0XHRcdFx0aWYgKC0tdG9kbyA+PSAwICYmIHNob3VsZFN0b3AocmVzdWx0KSkge1xuXHRcdFx0XHRcdGZpbmlzaCgpO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0KTtcblx0XHRcdFx0fSBlbHNlIGlmICh0b2RvID09PSAwKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZShkZWZhdWx0VmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZXJyID0+IHtcblx0XHRcdFx0XHRpZiAoLS10b2RvID49IDApIHtcblx0XHRcdFx0XHRcdGZpbmlzaCgpO1xuXHRcdFx0XHRcdFx0cmVqZWN0KGVycik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufVxuXG5pbnRlcmZhY2UgSUxpbWl0ZWRUYXNrRmFjdG9yeTxUPiB7XG5cdGZhY3Rvcnk6IElUYXNrPFByb21pc2U8VD4+O1xuXHRjOiAodmFsdWU6IFQgfCBQcm9taXNlPFQ+KSA9PiB2b2lkO1xuXHRlOiAoZXJyb3I/OiB1bmtub3duKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElMaW1pdGVyPFQ+IHtcblxuXHRyZWFkb25seSBzaXplOiBudW1iZXI7XG5cblx0cXVldWUoZmFjdG9yeTogSVRhc2s8UHJvbWlzZTxUPj4pOiBQcm9taXNlPFQ+O1xuXG5cdGNsZWFyKCk6IHZvaWQ7XG59XG5cbi8qKlxuICogQSBoZWxwZXIgdG8gcXVldWUgTiBwcm9taXNlcyBhbmQgcnVuIHRoZW0gYWxsIHdpdGggYSBtYXggZGVncmVlIG9mIHBhcmFsbGVsaXNtLiBUaGUgaGVscGVyXG4gKiBlbnN1cmVzIHRoYXQgYXQgYW55IHRpbWUgbm8gbW9yZSB0aGFuIE0gcHJvbWlzZXMgYXJlIHJ1bm5pbmcgYXQgdGhlIHNhbWUgdGltZS5cbiAqL1xuZXhwb3J0IGNsYXNzIExpbWl0ZXI8VD4gaW1wbGVtZW50cyBJTGltaXRlcjxUPiB7XG5cblx0cHJpdmF0ZSBfc2l6ZSA9IDA7XG5cdHByaXZhdGUgX2lzRGlzcG9zZWQgPSBmYWxzZTtcblx0cHJpdmF0ZSBydW5uaW5nUHJvbWlzZXM6IG51bWJlcjtcblx0cHJpdmF0ZSByZWFkb25seSBtYXhEZWdyZWVPZlBhcmFsZWxsaXNtOiBudW1iZXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgb3V0c3RhbmRpbmdQcm9taXNlczogSUxpbWl0ZWRUYXNrRmFjdG9yeTxUPltdO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vbkRyYWluZWQ6IEVtaXR0ZXI8dm9pZD47XG5cblx0Y29uc3RydWN0b3IobWF4RGVncmVlT2ZQYXJhbGVsbGlzbTogbnVtYmVyKSB7XG5cdFx0dGhpcy5tYXhEZWdyZWVPZlBhcmFsZWxsaXNtID0gbWF4RGVncmVlT2ZQYXJhbGVsbGlzbTtcblx0XHR0aGlzLm91dHN0YW5kaW5nUHJvbWlzZXMgPSBbXTtcblx0XHR0aGlzLnJ1bm5pbmdQcm9taXNlcyA9IDA7XG5cdFx0dGhpcy5fb25EcmFpbmVkID0gbmV3IEVtaXR0ZXI8dm9pZD4oKTtcblx0fVxuXG5cdC8qKlxuXHQgKlxuXHQgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlZCB3aGVuIGFsbCB3b3JrIGlzIGRvbmUgKG9uRHJhaW5lZCkgb3Igd2hlblxuXHQgKiB0aGVyZSBpcyBub3RoaW5nIHRvIGRvXG5cdCAqL1xuXHR3aGVuSWRsZSgpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gdGhpcy5zaXplID4gMFxuXHRcdFx0PyBFdmVudC50b1Byb21pc2UodGhpcy5vbkRyYWluZWQpXG5cdFx0XHQ6IFByb21pc2UucmVzb2x2ZSgpO1xuXHR9XG5cblx0Z2V0IG9uRHJhaW5lZCgpOiBFdmVudDx2b2lkPiB7XG5cdFx0cmV0dXJuIHRoaXMuX29uRHJhaW5lZC5ldmVudDtcblx0fVxuXG5cdGdldCBzaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3NpemU7XG5cdH1cblxuXHRxdWV1ZShmYWN0b3J5OiBJVGFzazxQcm9taXNlPFQ+Pik6IFByb21pc2U8VD4ge1xuXHRcdGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ09iamVjdCBoYXMgYmVlbiBkaXNwb3NlZCcpO1xuXHRcdH1cblx0XHR0aGlzLl9zaXplKys7XG5cblx0XHRyZXR1cm4gbmV3IFByb21pc2U8VD4oKGMsIGUpID0+IHtcblx0XHRcdHRoaXMub3V0c3RhbmRpbmdQcm9taXNlcy5wdXNoKHsgZmFjdG9yeSwgYywgZSB9KTtcblx0XHRcdHRoaXMuY29uc3VtZSgpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBjb25zdW1lKCk6IHZvaWQge1xuXHRcdHdoaWxlICh0aGlzLm91dHN0YW5kaW5nUHJvbWlzZXMubGVuZ3RoICYmIHRoaXMucnVubmluZ1Byb21pc2VzIDwgdGhpcy5tYXhEZWdyZWVPZlBhcmFsZWxsaXNtKSB7XG5cdFx0XHRjb25zdCBpTGltaXRlZFRhc2sgPSB0aGlzLm91dHN0YW5kaW5nUHJvbWlzZXMuc2hpZnQoKSE7XG5cdFx0XHR0aGlzLnJ1bm5pbmdQcm9taXNlcysrO1xuXG5cdFx0XHRjb25zdCBwcm9taXNlID0gaUxpbWl0ZWRUYXNrLmZhY3RvcnkoKTtcblx0XHRcdHByb21pc2UudGhlbihpTGltaXRlZFRhc2suYywgaUxpbWl0ZWRUYXNrLmUpO1xuXHRcdFx0cHJvbWlzZS50aGVuKCgpID0+IHRoaXMuY29uc3VtZWQoKSwgKCkgPT4gdGhpcy5jb25zdW1lZCgpKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGNvbnN1bWVkKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMucnVubmluZ1Byb21pc2VzLS07XG5cdFx0aWYgKC0tdGhpcy5fc2l6ZSA9PT0gMCkge1xuXHRcdFx0dGhpcy5fb25EcmFpbmVkLmZpcmUoKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5vdXRzdGFuZGluZ1Byb21pc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdHRoaXMuY29uc3VtZSgpO1xuXHRcdH1cblx0fVxuXG5cdGNsZWFyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ09iamVjdCBoYXMgYmVlbiBkaXNwb3NlZCcpO1xuXHRcdH1cblx0XHR0aGlzLm91dHN0YW5kaW5nUHJvbWlzZXMubGVuZ3RoID0gMDtcblx0XHR0aGlzLl9zaXplID0gdGhpcy5ydW5uaW5nUHJvbWlzZXM7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuX2lzRGlzcG9zZWQgPSB0cnVlO1xuXHRcdHRoaXMub3V0c3RhbmRpbmdQcm9taXNlcy5sZW5ndGggPSAwOyAvLyBzdG9wIGZ1cnRoZXIgcHJvY2Vzc2luZ1xuXHRcdHRoaXMuX3NpemUgPSAwO1xuXHRcdHRoaXMuX29uRHJhaW5lZC5kaXNwb3NlKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBBIHF1ZXVlIGlzIGhhbmRsZXMgb25lIHByb21pc2UgYXQgYSB0aW1lIGFuZCBndWFyYW50ZWVzIHRoYXQgYXQgYW55IHRpbWUgb25seSBvbmUgcHJvbWlzZSBpcyBleGVjdXRpbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBRdWV1ZTxUPiBleHRlbmRzIExpbWl0ZXI8VD4ge1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKDEpO1xuXHR9XG59XG5cbi8qKlxuICogU2FtZSBhcyBgUXVldWVgLCBlbnN1cmVzIHRoYXQgb25seSAxIHRhc2sgaXMgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZS4gVGhlIGRpZmZlcmVuY2UgdG8gYFF1ZXVlYCBpcyB0aGF0XG4gKiB0aGVyZSBpcyBvbmx5IDEgdGFzayBhYm91dCB0byBiZSBzY2hlZHVsZWQgbmV4dC4gQXMgc3VjaCwgY2FsbGluZyBgcXVldWVgIHdoaWxlIGEgdGFzayBpcyBleGVjdXRpbmcgd2lsbFxuICogcmVwbGFjZSB0aGUgY3VycmVudGx5IHF1ZXVlZCB0YXNrIHVudGlsIGl0IGV4ZWN1dGVzLlxuICpcbiAqIEFzIHN1Y2gsIHRoZSByZXR1cm5lZCBwcm9taXNlIG1heSBub3QgYmUgZnJvbSB0aGUgZmFjdG9yeSB0aGF0IGlzIHBhc3NlZCBpbiBidXQgZnJvbSB0aGUgbmV4dCBmYWN0b3J5IHRoYXRcbiAqIGlzIHJ1bm5pbmcgYWZ0ZXIgaGF2aW5nIGNhbGxlZCBgcXVldWVgLlxuICovXG5leHBvcnQgY2xhc3MgTGltaXRlZFF1ZXVlIHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IHNlcXVlbnRpYWxpemVyID0gbmV3IFRhc2tTZXF1ZW50aWFsaXplcigpO1xuXG5cdHByaXZhdGUgdGFza3MgPSAwO1xuXG5cdHF1ZXVlKGZhY3Rvcnk6IElUYXNrPFByb21pc2U8dm9pZD4+KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCF0aGlzLnNlcXVlbnRpYWxpemVyLmlzUnVubmluZygpKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5zZXF1ZW50aWFsaXplci5ydW4odGhpcy50YXNrcysrLCBmYWN0b3J5KCkpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnNlcXVlbnRpYWxpemVyLnF1ZXVlKCgpID0+IHtcblx0XHRcdHJldHVybiB0aGlzLnNlcXVlbnRpYWxpemVyLnJ1bih0aGlzLnRhc2tzKyssIGZhY3RvcnkoKSk7XG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFRpbWVvdXRUaW1lciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcblx0cHJpdmF0ZSBfdG9rZW46IGFueTtcblx0cHJpdmF0ZSBfaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG5cdGNvbnN0cnVjdG9yKCk7XG5cdGNvbnN0cnVjdG9yKHJ1bm5lcjogKCkgPT4gdm9pZCwgdGltZW91dDogbnVtYmVyKTtcblx0Y29uc3RydWN0b3IocnVubmVyPzogKCkgPT4gdm9pZCwgdGltZW91dD86IG51bWJlcikge1xuXHRcdHRoaXMuX3Rva2VuID0gLTE7XG5cblx0XHRpZiAodHlwZW9mIHJ1bm5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgdGltZW91dCA9PT0gJ251bWJlcicpIHtcblx0XHRcdHRoaXMuc2V0SWZOb3RTZXQocnVubmVyLCB0aW1lb3V0KTtcblx0XHR9XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0dGhpcy5faXNEaXNwb3NlZCA9IHRydWU7XG5cdH1cblxuXHRjYW5jZWwoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX3Rva2VuICE9PSAtMSkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuX3Rva2VuKTtcblx0XHRcdHRoaXMuX3Rva2VuID0gLTE7XG5cdFx0fVxuXHR9XG5cblx0Y2FuY2VsQW5kU2V0KHJ1bm5lcjogKCkgPT4gdm9pZCwgdGltZW91dDogbnVtYmVyKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2lzRGlzcG9zZWQpIHtcblx0XHRcdHRocm93IG5ldyBCdWdJbmRpY2F0aW5nRXJyb3IoYENhbGxpbmcgJ2NhbmNlbEFuZFNldCcgb24gYSBkaXNwb3NlZCBUaW1lb3V0VGltZXJgKTtcblx0XHR9XG5cblx0XHR0aGlzLmNhbmNlbCgpO1xuXHRcdHRoaXMuX3Rva2VuID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHR0aGlzLl90b2tlbiA9IC0xO1xuXHRcdFx0cnVubmVyKCk7XG5cdFx0fSwgdGltZW91dCk7XG5cdH1cblxuXHRzZXRJZk5vdFNldChydW5uZXI6ICgpID0+IHZvaWQsIHRpbWVvdXQ6IG51bWJlcik6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc0Rpc3Bvc2VkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQnVnSW5kaWNhdGluZ0Vycm9yKGBDYWxsaW5nICdzZXRJZk5vdFNldCcgb24gYSBkaXNwb3NlZCBUaW1lb3V0VGltZXJgKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5fdG9rZW4gIT09IC0xKSB7XG5cdFx0XHQvLyB0aW1lciBpcyBhbHJlYWR5IHNldFxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl90b2tlbiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0dGhpcy5fdG9rZW4gPSAtMTtcblx0XHRcdHJ1bm5lcigpO1xuXHRcdH0sIHRpbWVvdXQpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBJbnRlcnZhbFRpbWVyIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgZGlzcG9zYWJsZTogSURpc3Bvc2FibGUgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cdHByaXZhdGUgaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG5cdGNhbmNlbCgpOiB2b2lkIHtcblx0XHR0aGlzLmRpc3Bvc2FibGU/LmRpc3Bvc2UoKTtcblx0XHR0aGlzLmRpc3Bvc2FibGUgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHRjYW5jZWxBbmRTZXQocnVubmVyOiAoKSA9PiB2b2lkLCBpbnRlcnZhbDogbnVtYmVyLCBjb250ZXh0ID0gZ2xvYmFsVGhpcyk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcblx0XHRcdHRocm93IG5ldyBCdWdJbmRpY2F0aW5nRXJyb3IoYENhbGxpbmcgJ2NhbmNlbEFuZFNldCcgb24gYSBkaXNwb3NlZCBJbnRlcnZhbFRpbWVyYCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jYW5jZWwoKTtcblx0XHRjb25zdCBoYW5kbGUgPSBjb250ZXh0LnNldEludGVydmFsKCgpID0+IHtcblx0XHRcdHJ1bm5lcigpO1xuXHRcdH0sIGludGVydmFsKTtcblxuXHRcdHRoaXMuZGlzcG9zYWJsZSA9IHRvRGlzcG9zYWJsZSgoKSA9PiB7XG5cdFx0XHRjb250ZXh0LmNsZWFySW50ZXJ2YWwoaGFuZGxlKTtcblx0XHRcdHRoaXMuZGlzcG9zYWJsZSA9IHVuZGVmaW5lZDtcblx0XHR9KTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5jYW5jZWwoKTtcblx0XHR0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSdW5PbmNlU2NoZWR1bGVyIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByb3RlY3RlZCBydW5uZXI6ICgoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkKSB8IG51bGw7XG5cblx0cHJpdmF0ZSB0aW1lb3V0VG9rZW46IGFueTtcblx0cHJpdmF0ZSB0aW1lb3V0OiBudW1iZXI7XG5cdHByaXZhdGUgdGltZW91dEhhbmRsZXI6ICgpID0+IHZvaWQ7XG5cblx0Y29uc3RydWN0b3IocnVubmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQsIGRlbGF5OiBudW1iZXIpIHtcblx0XHR0aGlzLnRpbWVvdXRUb2tlbiA9IC0xO1xuXHRcdHRoaXMucnVubmVyID0gcnVubmVyO1xuXHRcdHRoaXMudGltZW91dCA9IGRlbGF5O1xuXHRcdHRoaXMudGltZW91dEhhbmRsZXIgPSB0aGlzLm9uVGltZW91dC5iaW5kKHRoaXMpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERpc3Bvc2UgUnVuT25jZVNjaGVkdWxlclxuXHQgKi9cblx0ZGlzcG9zZSgpOiB2b2lkIHtcblx0XHR0aGlzLmNhbmNlbCgpO1xuXHRcdHRoaXMucnVubmVyID0gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDYW5jZWwgY3VycmVudCBzY2hlZHVsZWQgcnVubmVyIChpZiBhbnkpLlxuXHQgKi9cblx0Y2FuY2VsKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzU2NoZWR1bGVkKCkpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRUb2tlbik7XG5cdFx0XHR0aGlzLnRpbWVvdXRUb2tlbiA9IC0xO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDYW5jZWwgcHJldmlvdXMgcnVubmVyIChpZiBhbnkpICYgc2NoZWR1bGUgYSBuZXcgcnVubmVyLlxuXHQgKi9cblx0c2NoZWR1bGUoZGVsYXkgPSB0aGlzLnRpbWVvdXQpOiB2b2lkIHtcblx0XHR0aGlzLmNhbmNlbCgpO1xuXHRcdHRoaXMudGltZW91dFRva2VuID0gc2V0VGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGVyLCBkZWxheSk7XG5cdH1cblxuXHRnZXQgZGVsYXkoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy50aW1lb3V0O1xuXHR9XG5cblx0c2V0IGRlbGF5KHZhbHVlOiBudW1iZXIpIHtcblx0XHR0aGlzLnRpbWVvdXQgPSB2YWx1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRydWUgaWYgc2NoZWR1bGVkLlxuXHQgKi9cblx0aXNTY2hlZHVsZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMudGltZW91dFRva2VuICE9PSAtMTtcblx0fVxuXG5cdGZsdXNoKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzU2NoZWR1bGVkKCkpIHtcblx0XHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0XHR0aGlzLmRvUnVuKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBvblRpbWVvdXQoKSB7XG5cdFx0dGhpcy50aW1lb3V0VG9rZW4gPSAtMTtcblx0XHRpZiAodGhpcy5ydW5uZXIpIHtcblx0XHRcdHRoaXMuZG9SdW4oKTtcblx0XHR9XG5cdH1cblxuXHRwcm90ZWN0ZWQgZG9SdW4oKTogdm9pZCB7XG5cdFx0dGhpcy5ydW5uZXI/LigpO1xuXHR9XG59XG5cbi8qKlxuICogU2FtZSBhcyBgUnVuT25jZVNjaGVkdWxlcmAsIGJ1dCBkb2Vzbid0IGNvdW50IHRoZSB0aW1lIHNwZW50IGluIHNsZWVwIG1vZGUuXG4gKiA+ICoqTk9URSoqOiBPbmx5IG9mZmVycyAxcyByZXNvbHV0aW9uLlxuICpcbiAqIFdoZW4gY2FsbGluZyBgc2V0VGltZW91dGAgd2l0aCAzaHJzLCBhbmQgcHV0dGluZyB0aGUgY29tcHV0ZXIgaW1tZWRpYXRlbHkgdG8gc2xlZXBcbiAqIGZvciA4aHJzLCBgc2V0VGltZW91dGAgd2lsbCBmaXJlICoqYXMgc29vbiBhcyB0aGUgY29tcHV0ZXIgd2FrZXMgZnJvbSBzbGVlcCoqLiBCdXRcbiAqIHRoaXMgc2NoZWR1bGVyIHdpbGwgZXhlY3V0ZSAzaHJzICoqYWZ0ZXIgd2FraW5nIHRoZSBjb21wdXRlciBmcm9tIHNsZWVwKiouXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9jZXNzVGltZVJ1bk9uY2VTY2hlZHVsZXIge1xuXG5cdHByaXZhdGUgcnVubmVyOiAoKCkgPT4gdm9pZCkgfCBudWxsO1xuXHRwcml2YXRlIHRpbWVvdXQ6IG51bWJlcjtcblxuXHRwcml2YXRlIGNvdW50ZXI6IG51bWJlcjtcblx0cHJpdmF0ZSBpbnRlcnZhbFRva2VuOiBhbnk7XG5cdHByaXZhdGUgaW50ZXJ2YWxIYW5kbGVyOiAoKSA9PiB2b2lkO1xuXG5cdGNvbnN0cnVjdG9yKHJ1bm5lcjogKCkgPT4gdm9pZCwgZGVsYXk6IG51bWJlcikge1xuXHRcdGlmIChkZWxheSAlIDEwMDAgIT09IDApIHtcblx0XHRcdGNvbnNvbGUud2FybihgUHJvY2Vzc1RpbWVSdW5PbmNlU2NoZWR1bGVyIHJlc29sdXRpb24gaXMgMXMsICR7ZGVsYXl9bXMgaXMgbm90IGEgbXVsdGlwbGUgb2YgMTAwMG1zLmApO1xuXHRcdH1cblx0XHR0aGlzLnJ1bm5lciA9IHJ1bm5lcjtcblx0XHR0aGlzLnRpbWVvdXQgPSBkZWxheTtcblx0XHR0aGlzLmNvdW50ZXIgPSAwO1xuXHRcdHRoaXMuaW50ZXJ2YWxUb2tlbiA9IC0xO1xuXHRcdHRoaXMuaW50ZXJ2YWxIYW5kbGVyID0gdGhpcy5vbkludGVydmFsLmJpbmQodGhpcyk7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuY2FuY2VsKCk7XG5cdFx0dGhpcy5ydW5uZXIgPSBudWxsO1xuXHR9XG5cblx0Y2FuY2VsKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmlzU2NoZWR1bGVkKCkpIHtcblx0XHRcdGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbFRva2VuKTtcblx0XHRcdHRoaXMuaW50ZXJ2YWxUb2tlbiA9IC0xO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDYW5jZWwgcHJldmlvdXMgcnVubmVyIChpZiBhbnkpICYgc2NoZWR1bGUgYSBuZXcgcnVubmVyLlxuXHQgKi9cblx0c2NoZWR1bGUoZGVsYXkgPSB0aGlzLnRpbWVvdXQpOiB2b2lkIHtcblx0XHRpZiAoZGVsYXkgJSAxMDAwICE9PSAwKSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYFByb2Nlc3NUaW1lUnVuT25jZVNjaGVkdWxlciByZXNvbHV0aW9uIGlzIDFzLCAke2RlbGF5fW1zIGlzIG5vdCBhIG11bHRpcGxlIG9mIDEwMDBtcy5gKTtcblx0XHR9XG5cdFx0dGhpcy5jYW5jZWwoKTtcblx0XHR0aGlzLmNvdW50ZXIgPSBNYXRoLmNlaWwoZGVsYXkgLyAxMDAwKTtcblx0XHR0aGlzLmludGVydmFsVG9rZW4gPSBzZXRJbnRlcnZhbCh0aGlzLmludGVydmFsSGFuZGxlciwgMTAwMCk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0cnVlIGlmIHNjaGVkdWxlZC5cblx0ICovXG5cdGlzU2NoZWR1bGVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmludGVydmFsVG9rZW4gIT09IC0xO1xuXHR9XG5cblx0cHJpdmF0ZSBvbkludGVydmFsKCkge1xuXHRcdHRoaXMuY291bnRlci0tO1xuXHRcdGlmICh0aGlzLmNvdW50ZXIgPiAwKSB7XG5cdFx0XHQvLyBzdGlsbCBuZWVkIHRvIHdhaXRcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyB0aW1lIGVsYXBzZWRcblx0XHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxUb2tlbik7XG5cdFx0dGhpcy5pbnRlcnZhbFRva2VuID0gLTE7XG5cdFx0dGhpcy5ydW5uZXI/LigpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBSdW5PbmNlV29ya2VyPFQ+IGV4dGVuZHMgUnVuT25jZVNjaGVkdWxlciB7XG5cblx0cHJpdmF0ZSB1bml0czogVFtdID0gW107XG5cblx0Y29uc3RydWN0b3IocnVubmVyOiAodW5pdHM6IFRbXSkgPT4gdm9pZCwgdGltZW91dDogbnVtYmVyKSB7XG5cdFx0c3VwZXIocnVubmVyLCB0aW1lb3V0KTtcblx0fVxuXG5cdHdvcmsodW5pdDogVCk6IHZvaWQge1xuXHRcdHRoaXMudW5pdHMucHVzaCh1bml0KTtcblxuXHRcdGlmICghdGhpcy5pc1NjaGVkdWxlZCgpKSB7XG5cdFx0XHR0aGlzLnNjaGVkdWxlKCk7XG5cdFx0fVxuXHR9XG5cblx0cHJvdGVjdGVkIG92ZXJyaWRlIGRvUnVuKCk6IHZvaWQge1xuXHRcdGNvbnN0IHVuaXRzID0gdGhpcy51bml0cztcblx0XHR0aGlzLnVuaXRzID0gW107XG5cblx0XHR0aGlzLnJ1bm5lcj8uKHVuaXRzKTtcblx0fVxuXG5cdG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy51bml0cyA9IFtdO1xuXG5cdFx0c3VwZXIuZGlzcG9zZSgpO1xuXHR9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRocm90dGxlZFdvcmtlck9wdGlvbnMge1xuXG5cdC8qKlxuXHQgKiBtYXhpbXVtIG9mIHVuaXRzIHRoZSB3b3JrZXIgd2lsbCBwYXNzIG9udG8gaGFuZGxlciBhdCBvbmNlXG5cdCAqL1xuXHRtYXhXb3JrQ2h1bmtTaXplOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIG1heGltdW0gb2YgdW5pdHMgdGhlIHdvcmtlciB3aWxsIGtlZXAgaW4gbWVtb3J5IGZvciBwcm9jZXNzaW5nXG5cdCAqL1xuXHRtYXhCdWZmZXJlZFdvcms6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuXHQvKipcblx0ICogZGVsYXkgYmVmb3JlIHByb2Nlc3NpbmcgdGhlIG5leHQgcm91bmQgb2YgY2h1bmtzIHdoZW4gY2h1bmsgc2l6ZSBleGNlZWRzIGxpbWl0c1xuXHQgKi9cblx0dGhyb3R0bGVEZWxheTogbnVtYmVyO1xufVxuXG4vKipcbiAqIFRoZSBgVGhyb3R0bGVkV29ya2VyYCB3aWxsIGFjY2VwdCB1bml0cyBvZiB3b3JrIGBUYFxuICogdG8gaGFuZGxlLiBUaGUgY29udHJhY3QgaXM6XG4gKiAqIHRoZXJlIGlzIGEgbWF4aW11bSBvZiB1bml0cyB0aGUgd29ya2VyIGNhbiBoYW5kbGUgYXQgb25jZSAodmlhIGBtYXhXb3JrQ2h1bmtTaXplYClcbiAqICogdGhlcmUgaXMgYSBtYXhpbXVtIG9mIHVuaXRzIHRoZSB3b3JrZXIgd2lsbCBrZWVwIGluIG1lbW9yeSBmb3IgcHJvY2Vzc2luZyAodmlhIGBtYXhCdWZmZXJlZFdvcmtgKVxuICogKiBhZnRlciBoYXZpbmcgaGFuZGxlZCBgbWF4V29ya0NodW5rU2l6ZWAgdW5pdHMsIHRoZSB3b3JrZXIgbmVlZHMgdG8gcmVzdCAodmlhIGB0aHJvdHRsZURlbGF5YClcbiAqL1xuZXhwb3J0IGNsYXNzIFRocm90dGxlZFdvcmtlcjxUPiBleHRlbmRzIERpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgcGVuZGluZ1dvcms6IFRbXSA9IFtdO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgdGhyb3R0bGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlPFJ1bk9uY2VTY2hlZHVsZXI+KCkpO1xuXHRwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBvcHRpb25zOiBJVGhyb3R0bGVkV29ya2VyT3B0aW9ucyxcblx0XHRwcml2YXRlIHJlYWRvbmx5IGhhbmRsZXI6ICh1bml0czogVFtdKSA9PiB2b2lkXG5cdCkge1xuXHRcdHN1cGVyKCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIG51bWJlciBvZiB3b3JrIHVuaXRzIHRoYXQgYXJlIHBlbmRpbmcgdG8gYmUgcHJvY2Vzc2VkLlxuXHQgKi9cblx0Z2V0IHBlbmRpbmcoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMucGVuZGluZ1dvcmsubGVuZ3RoOyB9XG5cblx0LyoqXG5cdCAqIEFkZCB1bml0cyB0byBiZSB3b3JrZWQgb24uIFVzZSBgcGVuZGluZ2AgdG8gZmlndXJlIG91dFxuXHQgKiBob3cgbWFueSB1bml0cyBhcmUgbm90IHlldCBwcm9jZXNzZWQgYWZ0ZXIgdGhpcyBtZXRob2Rcblx0ICogd2FzIGNhbGxlZC5cblx0ICpcblx0ICogQHJldHVybnMgd2hldGhlciB0aGUgd29yayB3YXMgYWNjZXB0ZWQgb3Igbm90LiBJZiB0aGVcblx0ICogd29ya2VyIGlzIGRpc3Bvc2VkLCBpdCB3aWxsIG5vdCBhY2NlcHQgYW55IG1vcmUgd29yay5cblx0ICogSWYgdGhlIG51bWJlciBvZiBwZW5kaW5nIHVuaXRzIHdvdWxkIGJlY29tZSBsYXJnZXJcblx0ICogdGhhbiBgbWF4UGVuZGluZ1dvcmtgLCBtb3JlIHdvcmsgd2lsbCBhbHNvIG5vdCBiZSBhY2NlcHRlZC5cblx0ICovXG5cdHdvcmsodW5pdHM6IHJlYWRvbmx5IFRbXSk6IGJvb2xlYW4ge1xuXHRcdGlmICh0aGlzLmRpc3Bvc2VkKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7IC8vIHdvcmsgbm90IGFjY2VwdGVkOiBkaXNwb3NlZFxuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciByZWFjaGluZyBtYXhpbXVtIG9mIHBlbmRpbmcgd29ya1xuXHRcdGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm1heEJ1ZmZlcmVkV29yayA9PT0gJ251bWJlcicpIHtcblxuXHRcdFx0Ly8gVGhyb3R0bGVkOiBzaW1wbGUgY2hlY2sgaWYgcGVuZGluZyArIHVuaXRzIGV4Y2VlZHMgbWF4IHBlbmRpbmdcblx0XHRcdGlmICh0aGlzLnRocm90dGxlci52YWx1ZSkge1xuXHRcdFx0XHRpZiAodGhpcy5wZW5kaW5nICsgdW5pdHMubGVuZ3RoID4gdGhpcy5vcHRpb25zLm1heEJ1ZmZlcmVkV29yaykge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gd29yayBub3QgYWNjZXB0ZWQ6IHRvbyBtdWNoIHBlbmRpbmcgd29ya1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVudGhyb3R0bGVkOiBzYW1lIGFzIHRocm90dGxlZCwgYnV0IGFjY291bnQgZm9yIG1heCBjaHVuayBnZXR0aW5nXG5cdFx0XHQvLyB3b3JrZWQgb24gZGlyZWN0bHkgd2l0aG91dCBiZWluZyBwZW5kaW5nXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKHRoaXMucGVuZGluZyArIHVuaXRzLmxlbmd0aCAtIHRoaXMub3B0aW9ucy5tYXhXb3JrQ2h1bmtTaXplID4gdGhpcy5vcHRpb25zLm1heEJ1ZmZlcmVkV29yaykge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTsgLy8gd29yayBub3QgYWNjZXB0ZWQ6IHRvbyBtdWNoIHBlbmRpbmcgd29ya1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRvIHBlbmRpbmcgdW5pdHMgZmlyc3Rcblx0XHRmb3IgKGNvbnN0IHVuaXQgb2YgdW5pdHMpIHtcblx0XHRcdHRoaXMucGVuZGluZ1dvcmsucHVzaCh1bml0KTtcblx0XHR9XG5cblx0XHQvLyBJZiBub3QgdGhyb3R0bGVkLCBzdGFydCB3b3JraW5nIGRpcmVjdGx5XG5cdFx0Ly8gT3RoZXJ3aXNlLCB3aGVuIHRoZSB0aHJvdHRsZSBkZWxheSBoYXNcblx0XHQvLyBwYXN0LCBwZW5kaW5nIHdvcmsgd2lsbCBiZSB3b3JrZWQgYWdhaW4uXG5cdFx0aWYgKCF0aGlzLnRocm90dGxlci52YWx1ZSkge1xuXHRcdFx0dGhpcy5kb1dvcmsoKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTsgLy8gd29yayBhY2NlcHRlZFxuXHR9XG5cblx0cHJpdmF0ZSBkb1dvcmsoKTogdm9pZCB7XG5cblx0XHQvLyBFeHRyYWN0IGNodW5rIHRvIGhhbmRsZSBhbmQgaGFuZGxlIGl0XG5cdFx0dGhpcy5oYW5kbGVyKHRoaXMucGVuZGluZ1dvcmsuc3BsaWNlKDAsIHRoaXMub3B0aW9ucy5tYXhXb3JrQ2h1bmtTaXplKSk7XG5cblx0XHQvLyBJZiB3ZSBoYXZlIHJlbWFpbmluZyB3b3JrLCBzY2hlZHVsZSBpdCBhZnRlciBhIGRlbGF5XG5cdFx0aWYgKHRoaXMucGVuZGluZ1dvcmsubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhpcy50aHJvdHRsZXIudmFsdWUgPSBuZXcgUnVuT25jZVNjaGVkdWxlcigoKSA9PiB7XG5cdFx0XHRcdHRoaXMudGhyb3R0bGVyLmNsZWFyKCk7XG5cblx0XHRcdFx0dGhpcy5kb1dvcmsoKTtcblx0XHRcdH0sIHRoaXMub3B0aW9ucy50aHJvdHRsZURlbGF5KTtcblx0XHRcdHRoaXMudGhyb3R0bGVyLnZhbHVlLnNjaGVkdWxlKCk7XG5cdFx0fVxuXHR9XG5cblx0b3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcblx0XHRzdXBlci5kaXNwb3NlKCk7XG5cblx0XHR0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcblx0fVxufVxuXG4vLyNyZWdpb24gLS0gcnVuIG9uIGlkbGUgdHJpY2tzIC0tLS0tLS0tLS0tLVxuXG5leHBvcnQgaW50ZXJmYWNlIElkbGVEZWFkbGluZSB7XG5cdHJlYWRvbmx5IGRpZFRpbWVvdXQ6IGJvb2xlYW47XG5cdHRpbWVSZW1haW5pbmcoKTogbnVtYmVyO1xufVxuXG50eXBlIElkbGVBcGkgPSBQaWNrPHR5cGVvZiBnbG9iYWxUaGlzLCAncmVxdWVzdElkbGVDYWxsYmFjaycgfCAnY2FuY2VsSWRsZUNhbGxiYWNrJz47XG5cblxuLyoqXG4gKiBFeGVjdXRlIHRoZSBjYWxsYmFjayB0aGUgbmV4dCB0aW1lIHRoZSBicm93c2VyIGlzIGlkbGUsIHJldHVybmluZyBhblxuICoge0BsaW5rIElEaXNwb3NhYmxlfSB0aGF0IHdpbGwgY2FuY2VsIHRoZSBjYWxsYmFjayB3aGVuIGRpc3Bvc2VkLiBUaGlzIHdyYXBzXG4gKiBbcmVxdWVzdElkbGVDYWxsYmFja10gc28gaXQgd2lsbCBmYWxsYmFjayB0byBbc2V0VGltZW91dF0gaWYgdGhlIGVudmlyb25tZW50XG4gKiBkb2Vzbid0IHN1cHBvcnQgaXQuXG4gKlxuICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW4gd2hlbiBpZGxlLCB0aGlzIGluY2x1ZGVzIGFuXG4gKiBbSWRsZURlYWRsaW5lXSB0aGF0IHByb3ZpZGVzIHRoZSB0aW1lIGFsbG90ZWQgZm9yIHRoZSBpZGxlIGNhbGxiYWNrIGJ5IHRoZVxuICogYnJvd3Nlci4gTm90IHJlc3BlY3RpbmcgdGhpcyBkZWFkbGluZSB3aWxsIHJlc3VsdCBpbiBhIGRlZ3JhZGVkIHVzZXJcbiAqIGV4cGVyaWVuY2UuXG4gKiBAcGFyYW0gdGltZW91dCBBIHRpbWVvdXQgYXQgd2hpY2ggcG9pbnQgdG8gcXVldWUgbm8gbG9uZ2VyIHdhaXQgZm9yIGFuIGlkbGVcbiAqIGNhbGxiYWNrIGJ1dCBxdWV1ZSBpdCBvbiB0aGUgcmVndWxhciBldmVudCBsb29wIChsaWtlIHNldFRpbWVvdXQpLiBUeXBpY2FsbHlcbiAqIHRoaXMgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICpcbiAqIFtJZGxlRGVhZGxpbmVdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSWRsZURlYWRsaW5lXG4gKiBbcmVxdWVzdElkbGVDYWxsYmFja106IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvcmVxdWVzdElkbGVDYWxsYmFja1xuICogW3NldFRpbWVvdXRdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L3NldFRpbWVvdXRcbiAqXG4gKiAqKk5vdGUqKiB0aGF0IHRoZXJlIGlzIGBkb20udHMjcnVuV2hlbldpbmRvd0lkbGVgIHdoaWNoIGlzIGJldHRlciBzdWl0ZWQgd2hlbiBydW5uaW5nIGluc2lkZSBhIGJyb3dzZXJcbiAqIGNvbnRleHRcbiAqL1xuZXhwb3J0IGxldCBydW5XaGVuR2xvYmFsSWRsZTogKGNhbGxiYWNrOiAoaWRsZTogSWRsZURlYWRsaW5lKSA9PiB2b2lkLCB0aW1lb3V0PzogbnVtYmVyKSA9PiBJRGlzcG9zYWJsZTtcblxuZXhwb3J0IGxldCBfcnVuV2hlbklkbGU6ICh0YXJnZXRXaW5kb3c6IElkbGVBcGksIGNhbGxiYWNrOiAoaWRsZTogSWRsZURlYWRsaW5lKSA9PiB2b2lkLCB0aW1lb3V0PzogbnVtYmVyKSA9PiBJRGlzcG9zYWJsZTtcblxuKGZ1bmN0aW9uICgpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzLnJlcXVlc3RJZGxlQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIGdsb2JhbFRoaXMuY2FuY2VsSWRsZUNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0X3J1bldoZW5JZGxlID0gKF90YXJnZXRXaW5kb3csIHJ1bm5lcikgPT4ge1xuXHRcdFx0c2V0VGltZW91dDAoKCkgPT4ge1xuXHRcdFx0XHRpZiAoZGlzcG9zZWQpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgZW5kID0gRGF0ZS5ub3coKSArIDE1OyAvLyBvbmUgZnJhbWUgYXQgNjRmcHNcblx0XHRcdFx0Y29uc3QgZGVhZGxpbmU6IElkbGVEZWFkbGluZSA9IHtcblx0XHRcdFx0XHRkaWRUaW1lb3V0OiB0cnVlLFxuXHRcdFx0XHRcdHRpbWVSZW1haW5pbmcoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoMCwgZW5kIC0gRGF0ZS5ub3coKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRydW5uZXIoT2JqZWN0LmZyZWV6ZShkZWFkbGluZSkpO1xuXHRcdFx0fSk7XG5cdFx0XHRsZXQgZGlzcG9zZWQgPSBmYWxzZTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGRpc3Bvc2UoKSB7XG5cdFx0XHRcdFx0aWYgKGRpc3Bvc2VkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRpc3Bvc2VkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdF9ydW5XaGVuSWRsZSA9ICh0YXJnZXRXaW5kb3c6IElkbGVBcGksIHJ1bm5lciwgdGltZW91dD8pID0+IHtcblx0XHRcdGNvbnN0IGhhbmRsZTogbnVtYmVyID0gdGFyZ2V0V2luZG93LnJlcXVlc3RJZGxlQ2FsbGJhY2socnVubmVyLCB0eXBlb2YgdGltZW91dCA9PT0gJ251bWJlcicgPyB7IHRpbWVvdXQgfSA6IHVuZGVmaW5lZCk7XG5cdFx0XHRsZXQgZGlzcG9zZWQgPSBmYWxzZTtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGRpc3Bvc2UoKSB7XG5cdFx0XHRcdFx0aWYgKGRpc3Bvc2VkKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRpc3Bvc2VkID0gdHJ1ZTtcblx0XHRcdFx0XHR0YXJnZXRXaW5kb3cuY2FuY2VsSWRsZUNhbGxiYWNrKGhhbmRsZSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXHRydW5XaGVuR2xvYmFsSWRsZSA9IChydW5uZXIpID0+IF9ydW5XaGVuSWRsZShnbG9iYWxUaGlzLCBydW5uZXIpO1xufSkoKTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFic3RyYWN0SWRsZVZhbHVlPFQ+IHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9leGVjdXRvcjogKCkgPT4gdm9pZDtcblx0cHJpdmF0ZSByZWFkb25seSBfaGFuZGxlOiBJRGlzcG9zYWJsZTtcblxuXHRwcml2YXRlIF9kaWRSdW46IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBfdmFsdWU/OiBUO1xuXHRwcml2YXRlIF9lcnJvcjogdW5rbm93bjtcblxuXHRjb25zdHJ1Y3Rvcih0YXJnZXRXaW5kb3c6IElkbGVBcGksIGV4ZWN1dG9yOiAoKSA9PiBUKSB7XG5cdFx0dGhpcy5fZXhlY3V0b3IgPSAoKSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHR0aGlzLl92YWx1ZSA9IGV4ZWN1dG9yKCk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0dGhpcy5fZXJyb3IgPSBlcnI7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHR0aGlzLl9kaWRSdW4gPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0dGhpcy5faGFuZGxlID0gX3J1bldoZW5JZGxlKHRhcmdldFdpbmRvdywgKCkgPT4gdGhpcy5fZXhlY3V0b3IoKSk7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuX2hhbmRsZS5kaXNwb3NlKCk7XG5cdH1cblxuXHRnZXQgdmFsdWUoKTogVCB7XG5cdFx0aWYgKCF0aGlzLl9kaWRSdW4pIHtcblx0XHRcdHRoaXMuX2hhbmRsZS5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLl9leGVjdXRvcigpO1xuXHRcdH1cblx0XHRpZiAodGhpcy5fZXJyb3IpIHtcblx0XHRcdHRocm93IHRoaXMuX2Vycm9yO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fdmFsdWUhO1xuXHR9XG5cblx0Z2V0IGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2RpZFJ1bjtcblx0fVxufVxuXG4vKipcbiAqIEFuIGBJZGxlVmFsdWVgIHRoYXQgYWx3YXlzIHVzZXMgdGhlIGN1cnJlbnQgd2luZG93ICh3aGljaCBtaWdodCBiZSB0aHJvdHRsZWQgb3IgaW5hY3RpdmUpXG4gKlxuICogKipOb3RlKiogdGhhdCB0aGVyZSBpcyBgZG9tLnRzI1dpbmRvd0lkbGVWYWx1ZWAgd2hpY2ggaXMgYmV0dGVyIHN1aXRlZCB3aGVuIHJ1bm5pbmcgaW5zaWRlIGEgYnJvd3NlclxuICogY29udGV4dFxuICovXG5leHBvcnQgY2xhc3MgR2xvYmFsSWRsZVZhbHVlPFQ+IGV4dGVuZHMgQWJzdHJhY3RJZGxlVmFsdWU8VD4ge1xuXG5cdGNvbnN0cnVjdG9yKGV4ZWN1dG9yOiAoKSA9PiBUKSB7XG5cdFx0c3VwZXIoZ2xvYmFsVGhpcywgZXhlY3V0b3IpO1xuXHR9XG59XG5cbi8vI2VuZHJlZ2lvblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV0cnk8VD4odGFzazogSVRhc2s8UHJvbWlzZTxUPj4sIGRlbGF5OiBudW1iZXIsIHJldHJpZXM6IG51bWJlcik6IFByb21pc2U8VD4ge1xuXHRsZXQgbGFzdEVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcblxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHJldHJpZXM7IGkrKykge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgdGFzaygpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRsYXN0RXJyb3IgPSBlcnJvcjtcblxuXHRcdFx0YXdhaXQgdGltZW91dChkZWxheSk7XG5cdFx0fVxuXHR9XG5cblx0dGhyb3cgbGFzdEVycm9yO1xufVxuXG4vLyNyZWdpb24gVGFzayBTZXF1ZW50aWFsaXplclxuXG5pbnRlcmZhY2UgSVJ1bm5pbmdUYXNrIHtcblx0cmVhZG9ubHkgdGFza0lkOiBudW1iZXI7XG5cdHJlYWRvbmx5IGNhbmNlbDogKCkgPT4gdm9pZDtcblx0cmVhZG9ubHkgcHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbn1cblxuaW50ZXJmYWNlIElRdWV1ZWRUYXNrIHtcblx0cmVhZG9ubHkgcHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcblx0cmVhZG9ubHkgcHJvbWlzZVJlc29sdmU6ICgpID0+IHZvaWQ7XG5cdHJlYWRvbmx5IHByb21pc2VSZWplY3Q6IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG5cdHJ1bjogSVRhc2s8UHJvbWlzZTx2b2lkPj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRhc2tTZXF1ZW50aWFsaXplcldpdGhSdW5uaW5nVGFzayB7XG5cdHJlYWRvbmx5IHJ1bm5pbmc6IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRhc2tTZXF1ZW50aWFsaXplcldpdGhRdWV1ZWRUYXNrIHtcblx0cmVhZG9ubHkgcXVldWVkOiBJUXVldWVkVGFzaztcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCB1c2UgYExpbWl0ZWRRdWV1ZWAgaW5zdGVhZCBmb3IgYW4gZWFzaWVyIHRvIHVzZSBBUElcbiAqL1xuZXhwb3J0IGNsYXNzIFRhc2tTZXF1ZW50aWFsaXplciB7XG5cblx0cHJpdmF0ZSBfcnVubmluZz86IElSdW5uaW5nVGFzaztcblx0cHJpdmF0ZSBfcXVldWVkPzogSVF1ZXVlZFRhc2s7XG5cblx0aXNSdW5uaW5nKHRhc2tJZD86IG51bWJlcik6IHRoaXMgaXMgSVRhc2tTZXF1ZW50aWFsaXplcldpdGhSdW5uaW5nVGFzayB7XG5cdFx0aWYgKHR5cGVvZiB0YXNrSWQgPT09ICdudW1iZXInKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fcnVubmluZz8udGFza0lkID09PSB0YXNrSWQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICEhdGhpcy5fcnVubmluZztcblx0fVxuXG5cdGdldCBydW5uaW5nKCk6IFByb21pc2U8dm9pZD4gfCB1bmRlZmluZWQge1xuXHRcdHJldHVybiB0aGlzLl9ydW5uaW5nPy5wcm9taXNlO1xuXHR9XG5cblx0Y2FuY2VsUnVubmluZygpOiB2b2lkIHtcblx0XHR0aGlzLl9ydW5uaW5nPy5jYW5jZWwoKTtcblx0fVxuXG5cdHJ1bih0YXNrSWQ6IG51bWJlciwgcHJvbWlzZTogUHJvbWlzZTx2b2lkPiwgb25DYW5jZWw/OiAoKSA9PiB2b2lkLCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuX3J1bm5pbmcgPSB7IHRhc2tJZCwgY2FuY2VsOiAoKSA9PiBvbkNhbmNlbD8uKCksIHByb21pc2UgfTtcblxuXHRcdHByb21pc2UudGhlbigoKSA9PiB0aGlzLmRvbmVSdW5uaW5nKHRhc2tJZCksICgpID0+IHRoaXMuZG9uZVJ1bm5pbmcodGFza0lkKSk7XG5cblx0XHRyZXR1cm4gcHJvbWlzZTtcblx0fVxuXG5cdHByaXZhdGUgZG9uZVJ1bm5pbmcodGFza0lkOiBudW1iZXIpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fcnVubmluZyAmJiB0YXNrSWQgPT09IHRoaXMuX3J1bm5pbmcudGFza0lkKSB7XG5cblx0XHRcdC8vIG9ubHkgc2V0IHJ1bm5pbmcgdG8gZG9uZSBpZiB0aGUgcHJvbWlzZSBmaW5pc2hlZCB0aGF0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGF0IHRhc2tJZFxuXHRcdFx0dGhpcy5fcnVubmluZyA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gc2NoZWR1bGUgdGhlIHF1ZXVlZCB0YXNrIG5vdyB0aGF0IHdlIGFyZSBmcmVlIGlmIHdlIGhhdmUgYW55XG5cdFx0XHR0aGlzLnJ1blF1ZXVlZCgpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgcnVuUXVldWVkKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9xdWV1ZWQpIHtcblx0XHRcdGNvbnN0IHF1ZXVlZCA9IHRoaXMuX3F1ZXVlZDtcblx0XHRcdHRoaXMuX3F1ZXVlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gUnVuIHF1ZXVlZCB0YXNrIGFuZCBjb21wbGV0ZSBvbiB0aGUgYXNzb2NpYXRlZCBwcm9taXNlXG5cdFx0XHRxdWV1ZWQucnVuKCkudGhlbihxdWV1ZWQucHJvbWlzZVJlc29sdmUsIHF1ZXVlZC5wcm9taXNlUmVqZWN0KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTm90ZTogdGhlIHByb21pc2UgdG8gc2NoZWR1bGUgYXMgbmV4dCBydW4gTVVTVCBpdHNlbGYgY2FsbCBgcnVuYC5cblx0ICogICAgICAgT3RoZXJ3aXNlLCB0aGlzIHNlcXVlbnRpYWxpemVyIHdpbGwgcmVwb3J0IGBmYWxzZWAgZm9yIGBpc1J1bm5pbmdgXG5cdCAqICAgICAgIGV2ZW4gd2hlbiB0aGlzIHRhc2sgaXMgcnVubmluZy4gTWlzc2luZyB0aGlzIGRldGFpbCBtZWFucyB0aGF0XG5cdCAqICAgICAgIHN1ZGRlbmx5IG11bHRpcGxlIHRhc2tzIHdpbGwgcnVuIGluIHBhcmFsbGVsLlxuXHQgKi9cblx0cXVldWUocnVuOiBJVGFzazxQcm9taXNlPHZvaWQ+Pik6IFByb21pc2U8dm9pZD4ge1xuXG5cdFx0Ly8gdGhpcyBpcyBvdXIgZmlyc3QgcXVldWVkIHRhc2ssIHNvIHdlIGNyZWF0ZSBhc3NvY2lhdGVkIHByb21pc2Ugd2l0aCBpdFxuXHRcdC8vIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhIHByb21pc2UgdGhhdCBjb21wbGV0ZXMgd2hlbiB0aGUgdGFzayBoYXNcblx0XHQvLyBjb21wbGV0ZWQuXG5cdFx0aWYgKCF0aGlzLl9xdWV1ZWQpIHtcblx0XHRcdGNvbnN0IHsgcHJvbWlzZSwgcmVzb2x2ZTogcHJvbWlzZVJlc29sdmUsIHJlamVjdDogcHJvbWlzZVJlamVjdCB9ID0gcHJvbWlzZVdpdGhSZXNvbHZlcnM8dm9pZD4oKTtcblx0XHRcdHRoaXMuX3F1ZXVlZCA9IHtcblx0XHRcdFx0cnVuLFxuXHRcdFx0XHRwcm9taXNlLFxuXHRcdFx0XHRwcm9taXNlUmVzb2x2ZTogcHJvbWlzZVJlc29sdmUhLFxuXHRcdFx0XHRwcm9taXNlUmVqZWN0OiBwcm9taXNlUmVqZWN0IVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHQvLyB3ZSBoYXZlIGEgcHJldmlvdXMgcXVldWVkIHRhc2ssIGp1c3Qgb3ZlcndyaXRlIGl0XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLl9xdWV1ZWQucnVuID0gcnVuO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLl9xdWV1ZWQucHJvbWlzZTtcblx0fVxuXG5cdGhhc1F1ZXVlZCgpOiB0aGlzIGlzIElUYXNrU2VxdWVudGlhbGl6ZXJXaXRoUXVldWVkVGFzayB7XG5cdFx0cmV0dXJuICEhdGhpcy5fcXVldWVkO1xuXHR9XG5cblx0YXN5bmMgam9pbigpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRyZXR1cm4gdGhpcy5fcXVldWVkPy5wcm9taXNlID8/IHRoaXMuX3J1bm5pbmc/LnByb21pc2U7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5cbi8vI3JlZ2lvblxuXG4vKipcbiAqIFRoZSBgSW50ZXJ2YWxDb3VudGVyYCBhbGxvd3MgdG8gY291bnQgdGhlIG51bWJlclxuICogb2YgY2FsbHMgdG8gYGluY3JlbWVudCgpYCBvdmVyIGEgZHVyYXRpb24gb2ZcbiAqIGBpbnRlcnZhbGAuIFRoaXMgdXRpbGl0eSBjYW4gYmUgdXNlZCB0byBjb25kaXRpb25hbGx5XG4gKiB0aHJvdHRsZSBhIGZyZXF1ZW50IHRhc2sgd2hlbiBhIGNlcnRhaW4gdGhyZXNob2xkXG4gKiBpcyByZWFjaGVkLlxuICovXG5leHBvcnQgY2xhc3MgSW50ZXJ2YWxDb3VudGVyIHtcblxuXHRwcml2YXRlIGxhc3RJbmNyZW1lbnRUaW1lID0gMDtcblxuXHRwcml2YXRlIHZhbHVlID0gMDtcblxuXHRjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGludGVydmFsOiBudW1iZXIsIHByaXZhdGUgcmVhZG9ubHkgbm93Rm4gPSAoKSA9PiBEYXRlLm5vdygpKSB7IH1cblxuXHRpbmNyZW1lbnQoKTogbnVtYmVyIHtcblx0XHRjb25zdCBub3cgPSB0aGlzLm5vd0ZuKCk7XG5cblx0XHQvLyBXZSBhcmUgb3V0c2lkZSBvZiB0aGUgcmFuZ2Ugb2YgYGludGVydmFsYCBhbmQgYXMgc3VjaFxuXHRcdC8vIHN0YXJ0IGNvdW50aW5nIGZyb20gMCBhbmQgcmVtZW1iZXIgdGhlIHRpbWVcblx0XHRpZiAobm93IC0gdGhpcy5sYXN0SW5jcmVtZW50VGltZSA+IHRoaXMuaW50ZXJ2YWwpIHtcblx0XHRcdHRoaXMubGFzdEluY3JlbWVudFRpbWUgPSBub3c7XG5cdFx0XHR0aGlzLnZhbHVlID0gMDtcblx0XHR9XG5cblx0XHR0aGlzLnZhbHVlKys7XG5cblx0XHRyZXR1cm4gdGhpcy52YWx1ZTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cblxuLy8jcmVnaW9uXG5cbmV4cG9ydCB0eXBlIFZhbHVlQ2FsbGJhY2s8VCA9IHVua25vd24+ID0gKHZhbHVlOiBUIHwgUHJvbWlzZTxUPikgPT4gdm9pZDtcblxuY29uc3QgZW51bSBEZWZlcnJlZE91dGNvbWUge1xuXHRSZXNvbHZlZCxcblx0UmVqZWN0ZWRcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgcHJvbWlzZSB3aG9zZSByZXNvbHV0aW9uIG9yIHJlamVjdGlvbiBjYW4gYmUgY29udHJvbGxlZCBpbXBlcmF0aXZlbHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWZlcnJlZFByb21pc2U8VD4ge1xuXG5cdHByaXZhdGUgY29tcGxldGVDYWxsYmFjayE6IFZhbHVlQ2FsbGJhY2s8VD47XG5cdHByaXZhdGUgZXJyb3JDYWxsYmFjayE6IChlcnI6IHVua25vd24pID0+IHZvaWQ7XG5cdHByaXZhdGUgb3V0Y29tZT86IHsgb3V0Y29tZTogRGVmZXJyZWRPdXRjb21lLlJlamVjdGVkOyB2YWx1ZTogYW55IH0gfCB7IG91dGNvbWU6IERlZmVycmVkT3V0Y29tZS5SZXNvbHZlZDsgdmFsdWU6IFQgfTtcblxuXHRwdWJsaWMgZ2V0IGlzUmVqZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMub3V0Y29tZT8ub3V0Y29tZSA9PT0gRGVmZXJyZWRPdXRjb21lLlJlamVjdGVkO1xuXHR9XG5cblx0cHVibGljIGdldCBpc1Jlc29sdmVkKCkge1xuXHRcdHJldHVybiB0aGlzLm91dGNvbWU/Lm91dGNvbWUgPT09IERlZmVycmVkT3V0Y29tZS5SZXNvbHZlZDtcblx0fVxuXG5cdHB1YmxpYyBnZXQgaXNTZXR0bGVkKCkge1xuXHRcdHJldHVybiAhIXRoaXMub3V0Y29tZTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgdmFsdWUoKSB7XG5cdFx0cmV0dXJuIHRoaXMub3V0Y29tZT8ub3V0Y29tZSA9PT0gRGVmZXJyZWRPdXRjb21lLlJlc29sdmVkID8gdGhpcy5vdXRjb21lPy52YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXG5cdHB1YmxpYyByZWFkb25seSBwOiBQcm9taXNlPFQ+O1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMucCA9IG5ldyBQcm9taXNlPFQ+KChjLCBlKSA9PiB7XG5cdFx0XHR0aGlzLmNvbXBsZXRlQ2FsbGJhY2sgPSBjO1xuXHRcdFx0dGhpcy5lcnJvckNhbGxiYWNrID0gZTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBjb21wbGV0ZSh2YWx1ZTogVCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXNvbHZlID0+IHtcblx0XHRcdHRoaXMuY29tcGxldGVDYWxsYmFjayh2YWx1ZSk7XG5cdFx0XHR0aGlzLm91dGNvbWUgPSB7IG91dGNvbWU6IERlZmVycmVkT3V0Y29tZS5SZXNvbHZlZCwgdmFsdWUgfTtcblx0XHRcdHJlc29sdmUoKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBlcnJvcihlcnI6IHVua25vd24pIHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzb2x2ZSA9PiB7XG5cdFx0XHR0aGlzLmVycm9yQ2FsbGJhY2soZXJyKTtcblx0XHRcdHRoaXMub3V0Y29tZSA9IHsgb3V0Y29tZTogRGVmZXJyZWRPdXRjb21lLlJlamVjdGVkLCB2YWx1ZTogZXJyIH07XG5cdFx0XHRyZXNvbHZlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgY2FuY2VsKCkge1xuXHRcdHJldHVybiB0aGlzLmVycm9yKG5ldyBDYW5jZWxsYXRpb25FcnJvcigpKTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cblxuLy8jcmVnaW9uIFByb21pc2VzXG5cbmV4cG9ydCBuYW1lc3BhY2UgUHJvbWlzZXMge1xuXG5cdC8qKlxuXHQgKiBBIGRyb3AtaW4gcmVwbGFjZW1lbnQgZm9yIGBQcm9taXNlLmFsbGAgd2l0aCB0aGUgb25seSBkaWZmZXJlbmNlXG5cdCAqIHRoYXQgdGhlIG1ldGhvZCBhd2FpdHMgZXZlcnkgcHJvbWlzZSB0byBlaXRoZXIgZnVsZmlsbCBvciByZWplY3QuXG5cdCAqXG5cdCAqIFNpbWlsYXIgdG8gYFByb21pc2UuYWxsYCwgb25seSB0aGUgZmlyc3QgZXJyb3Igd2lsbCBiZSByZXR1cm5lZFxuXHQgKiBpZiBhbnkuXG5cdCAqL1xuXHRleHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0dGxlZDxUPihwcm9taXNlczogUHJvbWlzZTxUPltdKTogUHJvbWlzZTxUW10+IHtcblx0XHRsZXQgZmlyc3RFcnJvcjogRXJyb3IgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAocHJvbWlzZSA9PiBwcm9taXNlLnRoZW4odmFsdWUgPT4gdmFsdWUsIGVycm9yID0+IHtcblx0XHRcdGlmICghZmlyc3RFcnJvcikge1xuXHRcdFx0XHRmaXJzdEVycm9yID0gZXJyb3I7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB1bmRlZmluZWQ7IC8vIGRvIG5vdCByZXRocm93IHNvIHRoYXQgb3RoZXIgcHJvbWlzZXMgY2FuIHNldHRsZVxuXHRcdH0pKSk7XG5cblx0XHRpZiAodHlwZW9mIGZpcnN0RXJyb3IgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aHJvdyBmaXJzdEVycm9yO1xuXHRcdH1cblxuXHRcdHJldHVybiByZXN1bHQgYXMgdW5rbm93biBhcyBUW107IC8vIGNhc3QgaXMgbmVlZGVkIGFuZCBwcm90ZWN0ZWQgYnkgdGhlIGB0aHJvd2AgYWJvdmVcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGhlbHBlciB0byBjcmVhdGUgYSBuZXcgYFByb21pc2U8VD5gIHdpdGggYSBib2R5IHRoYXQgaXMgYSBwcm9taXNlXG5cdCAqIGl0c2VsZi4gQnkgZGVmYXVsdCwgYW4gZXJyb3IgdGhhdCByYWlzZXMgZnJvbSB0aGUgYXN5bmMgYm9keSB3aWxsXG5cdCAqIGVuZCB1cCBhcyBhIHVuaGFuZGxlZCByZWplY3Rpb24sIHNvIHRoaXMgdXRpbGl0eSBwcm9wZXJseSBhd2FpdHMgdGhlXG5cdCAqIGJvZHkgYW5kIHJlamVjdHMgdGhlIHByb21pc2UgYXMgYSBub3JtYWwgcHJvbWlzZSBkb2VzIHdpdGhvdXQgYXN5bmNcblx0ICogYm9keS5cblx0ICpcblx0ICogVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiByYXJlIGNhc2VzIHdoZXJlIG90aGVyd2lzZSBgYXN5bmNgXG5cdCAqIGNhbm5vdCBiZSB1c2VkIChlLmcuIHdoZW4gY2FsbGJhY2tzIGFyZSBpbnZvbHZlZCB0aGF0IHJlcXVpcmUgdGhpcykuXG5cdCAqL1xuXHRleHBvcnQgZnVuY3Rpb24gd2l0aEFzeW5jQm9keTxULCBFID0gRXJyb3I+KGJvZHlGbjogKHJlc29sdmU6ICh2YWx1ZTogVCkgPT4gdW5rbm93biwgcmVqZWN0OiAoZXJyb3I6IEUpID0+IHVua25vd24pID0+IFByb21pc2U8dW5rbm93bj4pOiBQcm9taXNlPFQ+IHtcblx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXN5bmMtcHJvbWlzZS1leGVjdXRvclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZTxUPihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBib2R5Rm4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRlZnVsUHJvbWlzZTxUPiB7XG5cdHByaXZhdGUgX3ZhbHVlOiBUIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXHRnZXQgdmFsdWUoKTogVCB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl92YWx1ZTsgfVxuXG5cdHByaXZhdGUgX2Vycm9yOiB1bmtub3duID0gdW5kZWZpbmVkO1xuXHRnZXQgZXJyb3IoKTogdW5rbm93biB7IHJldHVybiB0aGlzLl9lcnJvcjsgfVxuXG5cdHByaXZhdGUgX2lzUmVzb2x2ZWQgPSBmYWxzZTtcblx0Z2V0IGlzUmVzb2x2ZWQoKSB7IHJldHVybiB0aGlzLl9pc1Jlc29sdmVkOyB9XG5cblx0cHVibGljIHJlYWRvbmx5IHByb21pc2U6IFByb21pc2U8VD47XG5cblx0Y29uc3RydWN0b3IocHJvbWlzZTogUHJvbWlzZTxUPikge1xuXHRcdHRoaXMucHJvbWlzZSA9IHByb21pc2UudGhlbihcblx0XHRcdHZhbHVlID0+IHtcblx0XHRcdFx0dGhpcy5fdmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0dGhpcy5faXNSZXNvbHZlZCA9IHRydWU7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH0sXG5cdFx0XHRlcnJvciA9PiB7XG5cdFx0XHRcdHRoaXMuX2Vycm9yID0gZXJyb3I7XG5cdFx0XHRcdHRoaXMuX2lzUmVzb2x2ZWQgPSB0cnVlO1xuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKiBUaHJvd3MgaWYgdGhlIHByb21pc2UgaXMgbm90IHJlc29sdmVkIHlldC5cblx0ICovXG5cdHB1YmxpYyByZXF1aXJlVmFsdWUoKTogVCB7XG5cdFx0aWYgKCF0aGlzLl9pc1Jlc29sdmVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgQnVnSW5kaWNhdGluZ0Vycm9yKCdQcm9taXNlIGlzIG5vdCByZXNvbHZlZCB5ZXQnKTtcblx0XHR9XG5cdFx0aWYgKHRoaXMuX2Vycm9yKSB7XG5cdFx0XHR0aHJvdyB0aGlzLl9lcnJvcjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX3ZhbHVlITtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTGF6eVN0YXRlZnVsUHJvbWlzZTxUPiB7XG5cdHByaXZhdGUgcmVhZG9ubHkgX3Byb21pc2UgPSBuZXcgTGF6eSgoKSA9PiBuZXcgU3RhdGVmdWxQcm9taXNlKHRoaXMuX2NvbXB1dGUoKSkpO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgX2NvbXB1dGU6ICgpID0+IFByb21pc2U8VD4sXG5cdCkgeyB9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKiBUaHJvd3MgaWYgdGhlIHByb21pc2UgaXMgbm90IHJlc29sdmVkIHlldC5cblx0ICovXG5cdHB1YmxpYyByZXF1aXJlVmFsdWUoKTogVCB7XG5cdFx0cmV0dXJuIHRoaXMuX3Byb21pc2UudmFsdWUucmVxdWlyZVZhbHVlKCk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgcHJvbWlzZSAoYW5kIHRyaWdnZXJzIGEgY29tcHV0YXRpb24gb2YgdGhlIHByb21pc2UgaWYgbm90IHlldCBkb25lIHNvKS5cblx0ICovXG5cdHB1YmxpYyBnZXRQcm9taXNlKCk6IFByb21pc2U8VD4ge1xuXHRcdHJldHVybiB0aGlzLl9wcm9taXNlLnZhbHVlLnByb21pc2U7XG5cdH1cblxuXHQvKipcblx0ICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgd2l0aG91dCB0cmlnZ2VyaW5nIGEgY29tcHV0YXRpb24gb2YgdGhlIHByb21pc2UuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0IGN1cnJlbnRWYWx1ZSgpOiBUIHwgdW5kZWZpbmVkIHtcblx0XHRyZXR1cm4gdGhpcy5fcHJvbWlzZS5yYXdWYWx1ZT8udmFsdWU7XG5cdH1cbn1cblxuLy8jZW5kcmVnaW9uXG5cbi8vI3JlZ2lvblxuXG5jb25zdCBlbnVtIEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZSB7XG5cdEluaXRpYWwsXG5cdERvbmVPSyxcblx0RG9uZUVycm9yLFxufVxuXG4vKipcbiAqIEFuIG9iamVjdCB0aGF0IGFsbG93cyB0byBlbWl0IGFzeW5jIHZhbHVlcyBhc3luY2hyb25vdXNseSBvciBicmluZyB0aGUgaXRlcmFibGUgdG8gYW4gZXJyb3Igc3RhdGUgdXNpbmcgYHJlamVjdCgpYC5cbiAqIFRoaXMgZW1pdHRlciBpcyB2YWxpZCBvbmx5IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGV4ZWN1dG9yICh1bnRpbCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgZXhlY3V0b3Igc2V0dGxlcykuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNJdGVyYWJsZUVtaXR0ZXI8VD4ge1xuXHQvKipcblx0ICogVGhlIHZhbHVlIHdpbGwgYmUgYXBwZW5kZWQgYXQgdGhlIGVuZC5cblx0ICpcblx0ICogKipOT1RFKiogSWYgYHJlamVjdCgpYCBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCwgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC5cblx0ICovXG5cdGVtaXRPbmUodmFsdWU6IFQpOiB2b2lkO1xuXHQvKipcblx0ICogVGhlIHZhbHVlcyB3aWxsIGJlIGFwcGVuZGVkIGF0IHRoZSBlbmQuXG5cdCAqXG5cdCAqICoqTk9URSoqIElmIGByZWplY3QoKWAgaGFzIGFscmVhZHkgYmVlbiBjYWxsZWQsIHRoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QuXG5cdCAqL1xuXHRlbWl0TWFueSh2YWx1ZXM6IFRbXSk6IHZvaWQ7XG5cdC8qKlxuXHQgKiBXcml0aW5nIGFuIGVycm9yIHdpbGwgcGVybWFuZW50bHkgaW52YWxpZGF0ZSB0aGlzIGl0ZXJhYmxlLlxuXHQgKiBUaGUgY3VycmVudCB1c2VycyB3aWxsIHJlY2VpdmUgYW4gZXJyb3IgdGhyb3duLCBhcyB3aWxsIGFsbCBmdXR1cmUgdXNlcnMuXG5cdCAqXG5cdCAqICoqTk9URSoqIElmIGByZWplY3QoKWAgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkLCB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0LlxuXHQgKi9cblx0cmVqZWN0KGVycm9yOiBFcnJvcik6IHZvaWQ7XG59XG5cbi8qKlxuICogQW4gZXhlY3V0b3IgZm9yIHRoZSBgQXN5bmNJdGVyYWJsZU9iamVjdGAgdGhhdCBoYXMgYWNjZXNzIHRvIGFuIGVtaXR0ZXIuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQXN5bmNJdGVyYWJsZUV4ZWN1dG9yPFQ+IHtcblx0LyoqXG5cdCAqIEBwYXJhbSBlbWl0dGVyIEFuIG9iamVjdCB0aGF0IGFsbG93cyB0byBlbWl0IGFzeW5jIHZhbHVlcyB2YWxpZCBvbmx5IGZvciB0aGUgZHVyYXRpb24gb2YgdGhlIGV4ZWN1dG9yLlxuXHQgKi9cblx0KGVtaXR0ZXI6IEFzeW5jSXRlcmFibGVFbWl0dGVyPFQ+KTogdm9pZCB8IFByb21pc2U8dm9pZD47XG59XG5cbi8qKlxuICogQSByaWNoIGltcGxlbWVudGF0aW9uIGZvciBhbiBgQXN5bmNJdGVyYWJsZTxUPmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxUPiB7XG5cblx0cHVibGljIHN0YXRpYyBmcm9tQXJyYXk8VD4oaXRlbXM6IFRbXSk6IEFzeW5jSXRlcmFibGVPYmplY3Q8VD4ge1xuXHRcdHJldHVybiBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdDxUPigod3JpdGVyKSA9PiB7XG5cdFx0XHR3cml0ZXIuZW1pdE1hbnkoaXRlbXMpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBmcm9tUHJvbWlzZTxUPihwcm9taXNlOiBQcm9taXNlPFRbXT4pOiBBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+IHtcblx0XHRyZXR1cm4gbmV3IEFzeW5jSXRlcmFibGVPYmplY3Q8VD4oYXN5bmMgKGVtaXR0ZXIpID0+IHtcblx0XHRcdGVtaXR0ZXIuZW1pdE1hbnkoYXdhaXQgcHJvbWlzZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGZyb21Qcm9taXNlczxUPihwcm9taXNlczogUHJvbWlzZTxUPltdKTogQXN5bmNJdGVyYWJsZU9iamVjdDxUPiB7XG5cdFx0cmV0dXJuIG5ldyBBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+KGFzeW5jIChlbWl0dGVyKSA9PiB7XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAoYXN5bmMgKHApID0+IGVtaXR0ZXIuZW1pdE9uZShhd2FpdCBwKSkpO1xuXHRcdH0pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBtZXJnZTxUPihpdGVyYWJsZXM6IEFzeW5jSXRlcmFibGU8VD5bXSk6IEFzeW5jSXRlcmFibGVPYmplY3Q8VD4ge1xuXHRcdHJldHVybiBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdChhc3luYyAoZW1pdHRlcikgPT4ge1xuXHRcdFx0YXdhaXQgUHJvbWlzZS5hbGwoaXRlcmFibGVzLm1hcChhc3luYyAoaXRlcmFibGUpID0+IHtcblx0XHRcdFx0Zm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGl0ZXJhYmxlKSB7XG5cdFx0XHRcdFx0ZW1pdHRlci5lbWl0T25lKGl0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KSk7XG5cdFx0fSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIEVNUFRZID0gQXN5bmNJdGVyYWJsZU9iamVjdC5mcm9tQXJyYXk8YW55PihbXSk7XG5cblx0cHJpdmF0ZSBfc3RhdGU6IEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZTtcblx0cHJpdmF0ZSBfcmVzdWx0czogVFtdO1xuXHRwcml2YXRlIF9lcnJvcjogRXJyb3IgfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vblJldHVybj86ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vblN0YXRlQ2hhbmdlZDogRW1pdHRlcjx2b2lkPjtcblxuXHRjb25zdHJ1Y3RvcihleGVjdXRvcjogQXN5bmNJdGVyYWJsZUV4ZWN1dG9yPFQ+LCBvblJldHVybj86ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+KSB7XG5cdFx0dGhpcy5fc3RhdGUgPSBBc3luY0l0ZXJhYmxlU291cmNlU3RhdGUuSW5pdGlhbDtcblx0XHR0aGlzLl9yZXN1bHRzID0gW107XG5cdFx0dGhpcy5fZXJyb3IgPSBudWxsO1xuXHRcdHRoaXMuX29uUmV0dXJuID0gb25SZXR1cm47XG5cdFx0dGhpcy5fb25TdGF0ZUNoYW5nZWQgPSBuZXcgRW1pdHRlcjx2b2lkPigpO1xuXG5cdFx0cXVldWVNaWNyb3Rhc2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0Y29uc3Qgd3JpdGVyOiBBc3luY0l0ZXJhYmxlRW1pdHRlcjxUPiA9IHtcblx0XHRcdFx0ZW1pdE9uZTogKGl0ZW0pID0+IHRoaXMuZW1pdE9uZShpdGVtKSxcblx0XHRcdFx0ZW1pdE1hbnk6IChpdGVtcykgPT4gdGhpcy5lbWl0TWFueShpdGVtcyksXG5cdFx0XHRcdHJlamVjdDogKGVycm9yKSA9PiB0aGlzLnJlamVjdChlcnJvcilcblx0XHRcdH07XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBQcm9taXNlLnJlc29sdmUoZXhlY3V0b3Iod3JpdGVyKSk7XG5cdFx0XHRcdHRoaXMucmVzb2x2ZSgpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHRoaXMucmVqZWN0KGVycik7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHR3cml0ZXIuZW1pdE9uZSA9IHVuZGVmaW5lZCE7XG5cdFx0XHRcdHdyaXRlci5lbWl0TWFueSA9IHVuZGVmaW5lZCE7XG5cdFx0XHRcdHdyaXRlci5yZWplY3QgPSB1bmRlZmluZWQhO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0W1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPFQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkPiB7XG5cdFx0bGV0IGkgPSAwO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuZXh0OiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAodGhpcy5fc3RhdGUgPT09IEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Eb25lRXJyb3IpIHtcblx0XHRcdFx0XHRcdHRocm93IHRoaXMuX2Vycm9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaSA8IHRoaXMuX3Jlc3VsdHMubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IHRoaXMuX3Jlc3VsdHNbaSsrXSB9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodGhpcy5fc3RhdGUgPT09IEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Eb25lT0spIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YXdhaXQgRXZlbnQudG9Qcm9taXNlKHRoaXMuX29uU3RhdGVDaGFuZ2VkLmV2ZW50KTtcblx0XHRcdFx0fSB3aGlsZSAodHJ1ZSk7XG5cdFx0XHR9LFxuXHRcdFx0cmV0dXJuOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdHRoaXMuX29uUmV0dXJuPy4oKTtcblx0XHRcdFx0cmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIG1hcDxULCBSPihpdGVyYWJsZTogQXN5bmNJdGVyYWJsZTxUPiwgbWFwRm46IChpdGVtOiBUKSA9PiBSKTogQXN5bmNJdGVyYWJsZU9iamVjdDxSPiB7XG5cdFx0cmV0dXJuIG5ldyBBc3luY0l0ZXJhYmxlT2JqZWN0PFI+KGFzeW5jIChlbWl0dGVyKSA9PiB7XG5cdFx0XHRmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgaXRlcmFibGUpIHtcblx0XHRcdFx0ZW1pdHRlci5lbWl0T25lKG1hcEZuKGl0ZW0pKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBtYXA8Uj4obWFwRm46IChpdGVtOiBUKSA9PiBSKTogQXN5bmNJdGVyYWJsZU9iamVjdDxSPiB7XG5cdFx0cmV0dXJuIEFzeW5jSXRlcmFibGVPYmplY3QubWFwKHRoaXMsIG1hcEZuKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgZmlsdGVyPFQ+KGl0ZXJhYmxlOiBBc3luY0l0ZXJhYmxlPFQ+LCBmaWx0ZXJGbjogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiBBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+IHtcblx0XHRyZXR1cm4gbmV3IEFzeW5jSXRlcmFibGVPYmplY3Q8VD4oYXN5bmMgKGVtaXR0ZXIpID0+IHtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBpdGVyYWJsZSkge1xuXHRcdFx0XHRpZiAoZmlsdGVyRm4oaXRlbSkpIHtcblx0XHRcdFx0XHRlbWl0dGVyLmVtaXRPbmUoaXRlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBmaWx0ZXIoZmlsdGVyRm46IChpdGVtOiBUKSA9PiBib29sZWFuKTogQXN5bmNJdGVyYWJsZU9iamVjdDxUPiB7XG5cdFx0cmV0dXJuIEFzeW5jSXRlcmFibGVPYmplY3QuZmlsdGVyKHRoaXMsIGZpbHRlckZuKTtcblx0fVxuXG5cdHB1YmxpYyBzdGF0aWMgY29hbGVzY2U8VD4oaXRlcmFibGU6IEFzeW5jSXRlcmFibGU8VCB8IHVuZGVmaW5lZCB8IG51bGw+KTogQXN5bmNJdGVyYWJsZU9iamVjdDxUPiB7XG5cdFx0cmV0dXJuIDxBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+PkFzeW5jSXRlcmFibGVPYmplY3QuZmlsdGVyKGl0ZXJhYmxlLCBpdGVtID0+ICEhaXRlbSk7XG5cdH1cblxuXHRwdWJsaWMgY29hbGVzY2UoKTogQXN5bmNJdGVyYWJsZU9iamVjdDxOb25OdWxsYWJsZTxUPj4ge1xuXHRcdHJldHVybiBBc3luY0l0ZXJhYmxlT2JqZWN0LmNvYWxlc2NlKHRoaXMpIGFzIEFzeW5jSXRlcmFibGVPYmplY3Q8Tm9uTnVsbGFibGU8VD4+O1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBhc3luYyB0b1Byb21pc2U8VD4oaXRlcmFibGU6IEFzeW5jSXRlcmFibGU8VD4pOiBQcm9taXNlPFRbXT4ge1xuXHRcdGNvbnN0IHJlc3VsdDogVFtdID0gW107XG5cdFx0Zm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGl0ZXJhYmxlKSB7XG5cdFx0XHRyZXN1bHQucHVzaChpdGVtKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdHB1YmxpYyB0b1Byb21pc2UoKTogUHJvbWlzZTxUW10+IHtcblx0XHRyZXR1cm4gQXN5bmNJdGVyYWJsZU9iamVjdC50b1Byb21pc2UodGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHZhbHVlIHdpbGwgYmUgYXBwZW5kZWQgYXQgdGhlIGVuZC5cblx0ICpcblx0ICogKipOT1RFKiogSWYgYHJlc29sdmUoKWAgb3IgYHJlamVjdCgpYCBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQsIHRoaXMgbWV0aG9kIGhhcyBubyBlZmZlY3QuXG5cdCAqL1xuXHRwcml2YXRlIGVtaXRPbmUodmFsdWU6IFQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgIT09IEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Jbml0aWFsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIGl0IGlzIGltcG9ydGFudCB0byBhZGQgbmV3IHZhbHVlcyBhdCB0aGUgZW5kLFxuXHRcdC8vIGFzIHdlIG1heSBoYXZlIGl0ZXJhdG9ycyBhbHJlYWR5IHJ1bm5pbmcgb24gdGhlIGFycmF5XG5cdFx0dGhpcy5fcmVzdWx0cy5wdXNoKHZhbHVlKTtcblx0XHR0aGlzLl9vblN0YXRlQ2hhbmdlZC5maXJlKCk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIHZhbHVlcyB3aWxsIGJlIGFwcGVuZGVkIGF0IHRoZSBlbmQuXG5cdCAqXG5cdCAqICoqTk9URSoqIElmIGByZXNvbHZlKClgIG9yIGByZWplY3QoKWAgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkLCB0aGlzIG1ldGhvZCBoYXMgbm8gZWZmZWN0LlxuXHQgKi9cblx0cHJpdmF0ZSBlbWl0TWFueSh2YWx1ZXM6IFRbXSk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSAhPT0gQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkluaXRpYWwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gaXQgaXMgaW1wb3J0YW50IHRvIGFkZCBuZXcgdmFsdWVzIGF0IHRoZSBlbmQsXG5cdFx0Ly8gYXMgd2UgbWF5IGhhdmUgaXRlcmF0b3JzIGFscmVhZHkgcnVubmluZyBvbiB0aGUgYXJyYXlcblx0XHR0aGlzLl9yZXN1bHRzID0gdGhpcy5fcmVzdWx0cy5jb25jYXQodmFsdWVzKTtcblx0XHR0aGlzLl9vblN0YXRlQ2hhbmdlZC5maXJlKCk7XG5cdH1cblxuXHQvKipcblx0ICogQ2FsbGluZyBgcmVzb2x2ZSgpYCB3aWxsIG1hcmsgdGhlIHJlc3VsdCBhcnJheSBhcyBjb21wbGV0ZS5cblx0ICpcblx0ICogKipOT1RFKiogYHJlc29sdmUoKWAgbXVzdCBiZSBjYWxsZWQsIG90aGVyd2lzZSBhbGwgY29uc3VtZXJzIG9mIHRoaXMgaXRlcmFibGUgd2lsbCBoYW5nIGluZGVmaW5pdGVseSwgc2ltaWxhciB0byBhIG5vbi1yZXNvbHZlZCBwcm9taXNlLlxuXHQgKiAqKk5PVEUqKiBJZiBgcmVzb2x2ZSgpYCBvciBgcmVqZWN0KClgIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCwgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC5cblx0ICovXG5cdHByaXZhdGUgcmVzb2x2ZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fc3RhdGUgIT09IEFzeW5jSXRlcmFibGVTb3VyY2VTdGF0ZS5Jbml0aWFsKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3N0YXRlID0gQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkRvbmVPSztcblx0XHR0aGlzLl9vblN0YXRlQ2hhbmdlZC5maXJlKCk7XG5cdH1cblxuXHQvKipcblx0ICogV3JpdGluZyBhbiBlcnJvciB3aWxsIHBlcm1hbmVudGx5IGludmFsaWRhdGUgdGhpcyBpdGVyYWJsZS5cblx0ICogVGhlIGN1cnJlbnQgdXNlcnMgd2lsbCByZWNlaXZlIGFuIGVycm9yIHRocm93biwgYXMgd2lsbCBhbGwgZnV0dXJlIHVzZXJzLlxuXHQgKlxuXHQgKiAqKk5PVEUqKiBJZiBgcmVzb2x2ZSgpYCBvciBgcmVqZWN0KClgIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCwgdGhpcyBtZXRob2QgaGFzIG5vIGVmZmVjdC5cblx0ICovXG5cdHByaXZhdGUgcmVqZWN0KGVycm9yOiBFcnJvcikge1xuXHRcdGlmICh0aGlzLl9zdGF0ZSAhPT0gQXN5bmNJdGVyYWJsZVNvdXJjZVN0YXRlLkluaXRpYWwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fc3RhdGUgPSBBc3luY0l0ZXJhYmxlU291cmNlU3RhdGUuRG9uZUVycm9yO1xuXHRcdHRoaXMuX2Vycm9yID0gZXJyb3I7XG5cdFx0dGhpcy5fb25TdGF0ZUNoYW5nZWQuZmlyZSgpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBDYW5jZWxhYmxlQXN5bmNJdGVyYWJsZU9iamVjdDxUPiBleHRlbmRzIEFzeW5jSXRlcmFibGVPYmplY3Q8VD4ge1xuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IF9zb3VyY2U6IENhbmNlbGxhdGlvblRva2VuU291cmNlLFxuXHRcdGV4ZWN1dG9yOiBBc3luY0l0ZXJhYmxlRXhlY3V0b3I8VD5cblx0KSB7XG5cdFx0c3VwZXIoZXhlY3V0b3IpO1xuXHR9XG5cblx0Y2FuY2VsKCk6IHZvaWQge1xuXHRcdHRoaXMuX3NvdXJjZS5jYW5jZWwoKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2FuY2VsYWJsZUFzeW5jSXRlcmFibGU8VD4oY2FsbGJhY2s6ICh0b2tlbjogQ2FuY2VsbGF0aW9uVG9rZW4pID0+IEFzeW5jSXRlcmFibGU8VD4pOiBDYW5jZWxhYmxlQXN5bmNJdGVyYWJsZU9iamVjdDxUPiB7XG5cdGNvbnN0IHNvdXJjZSA9IG5ldyBDYW5jZWxsYXRpb25Ub2tlblNvdXJjZSgpO1xuXHRjb25zdCBpbm5lckl0ZXJhYmxlID0gY2FsbGJhY2soc291cmNlLnRva2VuKTtcblxuXHRyZXR1cm4gbmV3IENhbmNlbGFibGVBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+KHNvdXJjZSwgYXN5bmMgKGVtaXR0ZXIpID0+IHtcblx0XHRjb25zdCBzdWJzY3JpcHRpb24gPSBzb3VyY2UudG9rZW4ub25DYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKCkgPT4ge1xuXHRcdFx0c3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcblx0XHRcdHNvdXJjZS5kaXNwb3NlKCk7XG5cdFx0XHRlbWl0dGVyLnJlamVjdChuZXcgQ2FuY2VsbGF0aW9uRXJyb3IoKSk7XG5cdFx0fSk7XG5cdFx0dHJ5IHtcblx0XHRcdGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBpbm5lckl0ZXJhYmxlKSB7XG5cdFx0XHRcdGlmIChzb3VyY2UudG9rZW4uaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQpIHtcblx0XHRcdFx0XHQvLyBjYW5jZWxlZCBpbiB0aGUgbWVhbnRpbWVcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0ZW1pdHRlci5lbWl0T25lKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdFx0c3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcblx0XHRcdHNvdXJjZS5kaXNwb3NlKCk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuXHRcdFx0c291cmNlLmRpc3Bvc2UoKTtcblx0XHRcdGVtaXR0ZXIucmVqZWN0KGVycik7XG5cdFx0fVxuXHR9KTtcbn1cblxuZXhwb3J0IGNsYXNzIEFzeW5jSXRlcmFibGVTb3VyY2U8VD4ge1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX2RlZmVycmVkID0gbmV3IERlZmVycmVkUHJvbWlzZTx2b2lkPigpO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9hc3luY0l0ZXJhYmxlOiBBc3luY0l0ZXJhYmxlT2JqZWN0PFQ+O1xuXG5cdHByaXZhdGUgX2Vycm9yRm46IChlcnJvcjogRXJyb3IpID0+IHZvaWQ7XG5cdHByaXZhdGUgX2VtaXRGbjogKGl0ZW06IFQpID0+IHZvaWQ7XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSBvblJldHVybiBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBjb25zdW1pbmcgdGhlIGFzeW5jIGl0ZXJhYmxlXG5cdCAqIGhhcyBmaW5pc2hlZCBieSB0aGUgY29uc3VtZXIsIGUuZyB0aGUgZm9yLWF3YWl0LWxvb3AgaGFzIGJlIGV4aXN0ZWQgKGJyZWFrLCByZXR1cm4pIGVhcmx5LlxuXHQgKiBUaGlzIGlzIE5PVCBjYWxsZWQgd2hlbiByZXNvbHZpbmcgdGhpcyBzb3VyY2UgYnkgaXRzIG93bmVyLlxuXHQgKi9cblx0Y29uc3RydWN0b3Iob25SZXR1cm4/OiAoKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZCkge1xuXHRcdHRoaXMuX2FzeW5jSXRlcmFibGUgPSBuZXcgQXN5bmNJdGVyYWJsZU9iamVjdChlbWl0dGVyID0+IHtcblxuXHRcdFx0aWYgKGVhcmx5RXJyb3IpIHtcblx0XHRcdFx0ZW1pdHRlci5yZWplY3QoZWFybHlFcnJvcik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGlmIChlYXJseUl0ZW1zKSB7XG5cdFx0XHRcdGVtaXR0ZXIuZW1pdE1hbnkoZWFybHlJdGVtcyk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9lcnJvckZuID0gKGVycm9yOiBFcnJvcikgPT4gZW1pdHRlci5yZWplY3QoZXJyb3IpO1xuXHRcdFx0dGhpcy5fZW1pdEZuID0gKGl0ZW06IFQpID0+IGVtaXR0ZXIuZW1pdE9uZShpdGVtKTtcblx0XHRcdHJldHVybiB0aGlzLl9kZWZlcnJlZC5wO1xuXHRcdH0sIG9uUmV0dXJuKTtcblxuXHRcdGxldCBlYXJseUVycm9yOiBFcnJvciB8IHVuZGVmaW5lZDtcblx0XHRsZXQgZWFybHlJdGVtczogVFtdIHwgdW5kZWZpbmVkO1xuXG5cdFx0dGhpcy5fZW1pdEZuID0gKGl0ZW06IFQpID0+IHtcblx0XHRcdGlmICghZWFybHlJdGVtcykge1xuXHRcdFx0XHRlYXJseUl0ZW1zID0gW107XG5cdFx0XHR9XG5cdFx0XHRlYXJseUl0ZW1zLnB1c2goaXRlbSk7XG5cdFx0fTtcblx0XHR0aGlzLl9lcnJvckZuID0gKGVycm9yOiBFcnJvcikgPT4ge1xuXHRcdFx0aWYgKCFlYXJseUVycm9yKSB7XG5cdFx0XHRcdGVhcmx5RXJyb3IgPSBlcnJvcjtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cblx0Z2V0IGFzeW5jSXRlcmFibGUoKTogQXN5bmNJdGVyYWJsZU9iamVjdDxUPiB7XG5cdFx0cmV0dXJuIHRoaXMuX2FzeW5jSXRlcmFibGU7XG5cdH1cblxuXHRyZXNvbHZlKCk6IHZvaWQge1xuXHRcdHRoaXMuX2RlZmVycmVkLmNvbXBsZXRlKCk7XG5cdH1cblxuXHRyZWplY3QoZXJyb3I6IEVycm9yKTogdm9pZCB7XG5cdFx0dGhpcy5fZXJyb3JGbihlcnJvcik7XG5cdFx0dGhpcy5fZGVmZXJyZWQuY29tcGxldGUoKTtcblx0fVxuXG5cdGVtaXRPbmUoaXRlbTogVCk6IHZvaWQge1xuXHRcdHRoaXMuX2VtaXRGbihpdGVtKTtcblx0fVxufVxuXG4vLyNlbmRyZWdpb25cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgQ2hhckNvZGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9jaGFyQ29kZSc7XG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi91aW50JztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzRmFsc3lPcldoaXRlc3BhY2Uoc3RyOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcblx0aWYgKCFzdHIgfHwgdHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gc3RyLnRyaW0oKS5sZW5ndGggPT09IDA7XG59XG5cbmNvbnN0IF9mb3JtYXRSZWdleHAgPSAveyhcXGQrKX0vZztcblxuLyoqXG4gKiBIZWxwZXIgdG8gcHJvZHVjZSBhIHN0cmluZyB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cy4gSW5zZXJ0IHZhcmlhYmxlIHNlZ21lbnRzXG4gKiBpbnRvIHRoZSBzdHJpbmcgdXNpbmcgdGhlIHtufSBub3RhdGlvbiB3aGVyZSBOIGlzIHRoZSBpbmRleCBvZiB0aGUgYXJndW1lbnQgZm9sbG93aW5nIHRoZSBzdHJpbmcuXG4gKiBAcGFyYW0gdmFsdWUgc3RyaW5nIHRvIHdoaWNoIGZvcm1hdHRpbmcgaXMgYXBwbGllZFxuICogQHBhcmFtIGFyZ3MgcmVwbGFjZW1lbnRzIGZvciB7bn0tZW50cmllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KHZhbHVlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogc3RyaW5nIHtcblx0aWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdHJldHVybiB2YWx1ZS5yZXBsYWNlKF9mb3JtYXRSZWdleHAsIGZ1bmN0aW9uIChtYXRjaCwgZ3JvdXApIHtcblx0XHRjb25zdCBpZHggPSBwYXJzZUludChncm91cCwgMTApO1xuXHRcdHJldHVybiBpc05hTihpZHgpIHx8IGlkeCA8IDAgfHwgaWR4ID49IGFyZ3MubGVuZ3RoID9cblx0XHRcdG1hdGNoIDpcblx0XHRcdGFyZ3NbaWR4XTtcblx0fSk7XG59XG5cbmNvbnN0IF9mb3JtYXQyUmVnZXhwID0gL3soW159XSspfS9nO1xuXG4vKipcbiAqIEhlbHBlciB0byBjcmVhdGUgYSBzdHJpbmcgZnJvbSBhIHRlbXBsYXRlIGFuZCBhIHN0cmluZyByZWNvcmQuXG4gKiBTaW1pbGFyIHRvIGBmb3JtYXRgIGJ1dCB3aXRoIG9iamVjdHMgaW5zdGVhZCBvZiBwb3NpdGlvbmFsIGFyZ3VtZW50cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdDIodGVtcGxhdGU6IHN0cmluZywgdmFsdWVzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG5cdGlmIChPYmplY3Qua2V5cyh2YWx1ZXMpLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB0ZW1wbGF0ZTtcblx0fVxuXHRyZXR1cm4gdGVtcGxhdGUucmVwbGFjZShfZm9ybWF0MlJlZ2V4cCwgKG1hdGNoLCBncm91cCkgPT4gKHZhbHVlc1tncm91cF0gPz8gbWF0Y2gpIGFzIHN0cmluZyk7XG59XG5cbi8qKlxuICogRW5jb2RlcyB0aGUgZ2l2ZW4gdmFsdWUgc28gdGhhdCBpdCBjYW4gYmUgdXNlZCBhcyBsaXRlcmFsIHZhbHVlIGluIGh0bWwgYXR0cmlidXRlcy5cbiAqXG4gKiBJbiBvdGhlciB3b3JkcywgY29tcHV0ZXMgYCR2YWxgLCBzdWNoIHRoYXQgYGF0dHJgIGluIGA8ZGl2IGF0dHI9XCIkdmFsXCIgLz5gIGhhcyB0aGUgcnVudGltZSB2YWx1ZSBgdmFsdWVgLlxuICogVGhpcyBwcmV2ZW50cyBYU1MgaW5qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaHRtbEF0dHJpYnV0ZUVuY29kZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gdmFsdWUucmVwbGFjZSgvWzw+XCInJl0vZywgY2ggPT4ge1xuXHRcdHN3aXRjaCAoY2gpIHtcblx0XHRcdGNhc2UgJzwnOiByZXR1cm4gJyZsdDsnO1xuXHRcdFx0Y2FzZSAnPic6IHJldHVybiAnJmd0Oyc7XG5cdFx0XHRjYXNlICdcIic6IHJldHVybiAnJnF1b3Q7Jztcblx0XHRcdGNhc2UgJ1xcJyc6IHJldHVybiAnJmFwb3M7Jztcblx0XHRcdGNhc2UgJyYnOiByZXR1cm4gJyZhbXA7Jztcblx0XHR9XG5cdFx0cmV0dXJuIGNoO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBIVE1MIGNoYXJhY3RlcnMgaW5zaWRlIHRoZSBzdHJpbmcgdG8gdXNlIGVudGl0aWVzIGluc3RlYWQuIE1ha2VzIHRoZSBzdHJpbmcgc2FmZSBmcm9tXG4gKiBiZWluZyB1c2VkIGUuZy4gaW4gSFRNTEVsZW1lbnQuaW5uZXJIVE1MLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlKGh0bWw6IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBodG1sLnJlcGxhY2UoL1s8PiZdL2csIGZ1bmN0aW9uIChtYXRjaCkge1xuXHRcdHN3aXRjaCAobWF0Y2gpIHtcblx0XHRcdGNhc2UgJzwnOiByZXR1cm4gJyZsdDsnO1xuXHRcdFx0Y2FzZSAnPic6IHJldHVybiAnJmd0Oyc7XG5cdFx0XHRjYXNlICcmJzogcmV0dXJuICcmYW1wOyc7XG5cdFx0XHRkZWZhdWx0OiByZXR1cm4gbWF0Y2g7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIHJlZ3VsYXIgZXhwcmVzc2lvbiBjaGFyYWN0ZXJzIGluIGEgZ2l2ZW4gc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVSZWdFeHBDaGFyYWN0ZXJzKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gdmFsdWUucmVwbGFjZSgvW1xcXFxcXHtcXH1cXCpcXCtcXD9cXHxcXF5cXCRcXC5cXFtcXF1cXChcXCldL2csICdcXFxcJCYnKTtcbn1cblxuLyoqXG4gKiBDb3VudHMgaG93IG9mdGVuIGBzdWJzdHJgIG9jY3VycyBpbnNpZGUgYHZhbHVlYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvdW50KHZhbHVlOiBzdHJpbmcsIHN1YnN0cjogc3RyaW5nKTogbnVtYmVyIHtcblx0bGV0IHJlc3VsdCA9IDA7XG5cdGxldCBpbmRleCA9IHZhbHVlLmluZGV4T2Yoc3Vic3RyKTtcblx0d2hpbGUgKGluZGV4ICE9PSAtMSkge1xuXHRcdHJlc3VsdCsrO1xuXHRcdGluZGV4ID0gdmFsdWUuaW5kZXhPZihzdWJzdHIsIGluZGV4ICsgc3Vic3RyLmxlbmd0aCk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlKHZhbHVlOiBzdHJpbmcsIG1heExlbmd0aDogbnVtYmVyLCBzdWZmaXggPSAnXHUyMDI2Jyk6IHN0cmluZyB7XG5cdGlmICh2YWx1ZS5sZW5ndGggPD0gbWF4TGVuZ3RoKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cblx0cmV0dXJuIGAke3ZhbHVlLnN1YnN0cigwLCBtYXhMZW5ndGgpfSR7c3VmZml4fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cnVuY2F0ZU1pZGRsZSh2YWx1ZTogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlciwgc3VmZml4ID0gJ1x1MjAyNicpOiBzdHJpbmcge1xuXHRpZiAodmFsdWUubGVuZ3RoIDw9IG1heExlbmd0aCkge1xuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdGNvbnN0IHByZWZpeExlbmd0aCA9IE1hdGguY2VpbChtYXhMZW5ndGggLyAyKSAtIHN1ZmZpeC5sZW5ndGggLyAyO1xuXHRjb25zdCBzdWZmaXhMZW5ndGggPSBNYXRoLmZsb29yKG1heExlbmd0aCAvIDIpIC0gc3VmZml4Lmxlbmd0aCAvIDI7XG5cblx0cmV0dXJuIGAke3ZhbHVlLnN1YnN0cigwLCBwcmVmaXhMZW5ndGgpfSR7c3VmZml4fSR7dmFsdWUuc3Vic3RyKHZhbHVlLmxlbmd0aCAtIHN1ZmZpeExlbmd0aCl9YDtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBvY2N1cnJlbmNlcyBvZiBuZWVkbGUgZnJvbSB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgaGF5c3RhY2suXG4gKiBAcGFyYW0gaGF5c3RhY2sgc3RyaW5nIHRvIHRyaW1cbiAqIEBwYXJhbSBuZWVkbGUgdGhlIHRoaW5nIHRvIHRyaW0gKGRlZmF1bHQgaXMgYSBibGFuaylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyaW0oaGF5c3RhY2s6IHN0cmluZywgbmVlZGxlOiBzdHJpbmcgPSAnICcpOiBzdHJpbmcge1xuXHRjb25zdCB0cmltbWVkID0gbHRyaW0oaGF5c3RhY2ssIG5lZWRsZSk7XG5cdHJldHVybiBydHJpbSh0cmltbWVkLCBuZWVkbGUpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIG9jY3VycmVuY2VzIG9mIG5lZWRsZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgaGF5c3RhY2suXG4gKiBAcGFyYW0gaGF5c3RhY2sgc3RyaW5nIHRvIHRyaW1cbiAqIEBwYXJhbSBuZWVkbGUgdGhlIHRoaW5nIHRvIHRyaW1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGx0cmltKGhheXN0YWNrOiBzdHJpbmcsIG5lZWRsZTogc3RyaW5nKTogc3RyaW5nIHtcblx0aWYgKCFoYXlzdGFjayB8fCAhbmVlZGxlKSB7XG5cdFx0cmV0dXJuIGhheXN0YWNrO1xuXHR9XG5cblx0Y29uc3QgbmVlZGxlTGVuID0gbmVlZGxlLmxlbmd0aDtcblx0aWYgKG5lZWRsZUxlbiA9PT0gMCB8fCBoYXlzdGFjay5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gaGF5c3RhY2s7XG5cdH1cblxuXHRsZXQgb2Zmc2V0ID0gMDtcblxuXHR3aGlsZSAoaGF5c3RhY2suaW5kZXhPZihuZWVkbGUsIG9mZnNldCkgPT09IG9mZnNldCkge1xuXHRcdG9mZnNldCA9IG9mZnNldCArIG5lZWRsZUxlbjtcblx0fVxuXHRyZXR1cm4gaGF5c3RhY2suc3Vic3RyaW5nKG9mZnNldCk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgb2NjdXJyZW5jZXMgb2YgbmVlZGxlIGZyb20gdGhlIGVuZCBvZiBoYXlzdGFjay5cbiAqIEBwYXJhbSBoYXlzdGFjayBzdHJpbmcgdG8gdHJpbVxuICogQHBhcmFtIG5lZWRsZSB0aGUgdGhpbmcgdG8gdHJpbVxuICovXG5leHBvcnQgZnVuY3Rpb24gcnRyaW0oaGF5c3RhY2s6IHN0cmluZywgbmVlZGxlOiBzdHJpbmcpOiBzdHJpbmcge1xuXHRpZiAoIWhheXN0YWNrIHx8ICFuZWVkbGUpIHtcblx0XHRyZXR1cm4gaGF5c3RhY2s7XG5cdH1cblxuXHRjb25zdCBuZWVkbGVMZW4gPSBuZWVkbGUubGVuZ3RoLFxuXHRcdGhheXN0YWNrTGVuID0gaGF5c3RhY2subGVuZ3RoO1xuXG5cdGlmIChuZWVkbGVMZW4gPT09IDAgfHwgaGF5c3RhY2tMZW4gPT09IDApIHtcblx0XHRyZXR1cm4gaGF5c3RhY2s7XG5cdH1cblxuXHRsZXQgb2Zmc2V0ID0gaGF5c3RhY2tMZW4sXG5cdFx0aWR4ID0gLTE7XG5cblx0d2hpbGUgKHRydWUpIHtcblx0XHRpZHggPSBoYXlzdGFjay5sYXN0SW5kZXhPZihuZWVkbGUsIG9mZnNldCAtIDEpO1xuXHRcdGlmIChpZHggPT09IC0xIHx8IGlkeCArIG5lZWRsZUxlbiAhPT0gb2Zmc2V0KSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aWYgKGlkeCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblx0XHRvZmZzZXQgPSBpZHg7XG5cdH1cblxuXHRyZXR1cm4gaGF5c3RhY2suc3Vic3RyaW5nKDAsIG9mZnNldCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0U2ltcGxlMlJlZ0V4cFBhdHRlcm4ocGF0dGVybjogc3RyaW5nKTogc3RyaW5nIHtcblx0cmV0dXJuIHBhdHRlcm4ucmVwbGFjZSgvW1xcLVxcXFxcXHtcXH1cXCtcXD9cXHxcXF5cXCRcXC5cXCxcXFtcXF1cXChcXClcXCNcXHNdL2csICdcXFxcJCYnKS5yZXBsYWNlKC9bXFwqXS9nLCAnLionKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwV2lsZGNhcmRzKHBhdHRlcm46IHN0cmluZyk6IHN0cmluZyB7XG5cdHJldHVybiBwYXR0ZXJuLnJlcGxhY2UoL1xcKi9nLCAnJyk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVnRXhwT3B0aW9ucyB7XG5cdG1hdGNoQ2FzZT86IGJvb2xlYW47XG5cdHdob2xlV29yZD86IGJvb2xlYW47XG5cdG11bHRpbGluZT86IGJvb2xlYW47XG5cdGdsb2JhbD86IGJvb2xlYW47XG5cdHVuaWNvZGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVnRXhwKHNlYXJjaFN0cmluZzogc3RyaW5nLCBpc1JlZ2V4OiBib29sZWFuLCBvcHRpb25zOiBSZWdFeHBPcHRpb25zID0ge30pOiBSZWdFeHAge1xuXHRpZiAoIXNlYXJjaFN0cmluZykge1xuXHRcdHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNyZWF0ZSByZWdleCBmcm9tIGVtcHR5IHN0cmluZycpO1xuXHR9XG5cdGlmICghaXNSZWdleCkge1xuXHRcdHNlYXJjaFN0cmluZyA9IGVzY2FwZVJlZ0V4cENoYXJhY3RlcnMoc2VhcmNoU3RyaW5nKTtcblx0fVxuXHRpZiAob3B0aW9ucy53aG9sZVdvcmQpIHtcblx0XHRpZiAoIS9cXEIvLnRlc3Qoc2VhcmNoU3RyaW5nLmNoYXJBdCgwKSkpIHtcblx0XHRcdHNlYXJjaFN0cmluZyA9ICdcXFxcYicgKyBzZWFyY2hTdHJpbmc7XG5cdFx0fVxuXHRcdGlmICghL1xcQi8udGVzdChzZWFyY2hTdHJpbmcuY2hhckF0KHNlYXJjaFN0cmluZy5sZW5ndGggLSAxKSkpIHtcblx0XHRcdHNlYXJjaFN0cmluZyA9IHNlYXJjaFN0cmluZyArICdcXFxcYic7XG5cdFx0fVxuXHR9XG5cdGxldCBtb2RpZmllcnMgPSAnJztcblx0aWYgKG9wdGlvbnMuZ2xvYmFsKSB7XG5cdFx0bW9kaWZpZXJzICs9ICdnJztcblx0fVxuXHRpZiAoIW9wdGlvbnMubWF0Y2hDYXNlKSB7XG5cdFx0bW9kaWZpZXJzICs9ICdpJztcblx0fVxuXHRpZiAob3B0aW9ucy5tdWx0aWxpbmUpIHtcblx0XHRtb2RpZmllcnMgKz0gJ20nO1xuXHR9XG5cdGlmIChvcHRpb25zLnVuaWNvZGUpIHtcblx0XHRtb2RpZmllcnMgKz0gJ3UnO1xuXHR9XG5cblx0cmV0dXJuIG5ldyBSZWdFeHAoc2VhcmNoU3RyaW5nLCBtb2RpZmllcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnRXhwTGVhZHNUb0VuZGxlc3NMb29wKHJlZ2V4cDogUmVnRXhwKTogYm9vbGVhbiB7XG5cdC8vIEV4aXQgZWFybHkgaWYgaXQncyBvbmUgb2YgdGhlc2Ugc3BlY2lhbCBjYXNlcyB3aGljaCBhcmUgbWVhbnQgdG8gbWF0Y2hcblx0Ly8gYWdhaW5zdCBhbiBlbXB0eSBzdHJpbmdcblx0aWYgKHJlZ2V4cC5zb3VyY2UgPT09ICdeJyB8fCByZWdleHAuc291cmNlID09PSAnXiQnIHx8IHJlZ2V4cC5zb3VyY2UgPT09ICckJyB8fCByZWdleHAuc291cmNlID09PSAnXlxcXFxzKiQnKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gV2UgY2hlY2sgYWdhaW5zdCBhbiBlbXB0eSBzdHJpbmcuIElmIHRoZSByZWd1bGFyIGV4cHJlc3Npb24gZG9lc24ndCBhZHZhbmNlXG5cdC8vIChlLmcuIGVuZHMgaW4gYW4gZW5kbGVzcyBsb29wKSBpdCB3aWxsIG1hdGNoIGFuIGVtcHR5IHN0cmluZy5cblx0Y29uc3QgbWF0Y2ggPSByZWdleHAuZXhlYygnJyk7XG5cdHJldHVybiAhIShtYXRjaCAmJiByZWdleHAubGFzdEluZGV4ID09PSAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0TGluZXMoc3RyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdHJldHVybiBzdHIuc3BsaXQoL1xcclxcbnxcXHJ8XFxuLyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdExpbmVzSW5jbHVkZVNlcGFyYXRvcnMoc3RyOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG5cdGNvbnN0IGxpbmVzV2l0aFNlcGFyYXRvcnM6IHN0cmluZ1tdID0gW107XG5cdGNvbnN0IHNwbGl0TGluZXNBbmRTZXBhcmF0b3JzID0gc3RyLnNwbGl0KC8oXFxyXFxufFxccnxcXG4pLyk7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5jZWlsKHNwbGl0TGluZXNBbmRTZXBhcmF0b3JzLmxlbmd0aCAvIDIpOyBpKyspIHtcblx0XHRsaW5lc1dpdGhTZXBhcmF0b3JzLnB1c2goc3BsaXRMaW5lc0FuZFNlcGFyYXRvcnNbMiAqIGldICsgKHNwbGl0TGluZXNBbmRTZXBhcmF0b3JzWzIgKiBpICsgMV0gPz8gJycpKTtcblx0fVxuXHRyZXR1cm4gbGluZXNXaXRoU2VwYXJhdG9ycztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGZpcnN0IGluZGV4IG9mIHRoZSBzdHJpbmcgdGhhdCBpcyBub3Qgd2hpdGVzcGFjZS5cbiAqIElmIHN0cmluZyBpcyBlbXB0eSBvciBjb250YWlucyBvbmx5IHdoaXRlc3BhY2VzLCByZXR1cm5zIC0xXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaXJzdE5vbldoaXRlc3BhY2VJbmRleChzdHI6IHN0cmluZyk6IG51bWJlciB7XG5cdGZvciAobGV0IGkgPSAwLCBsZW4gPSBzdHIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRjb25zdCBjaENvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcblx0XHRpZiAoY2hDb2RlICE9PSBDaGFyQ29kZS5TcGFjZSAmJiBjaENvZGUgIT09IENoYXJDb2RlLlRhYikge1xuXHRcdFx0cmV0dXJuIGk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsZWFkaW5nIHdoaXRlc3BhY2Ugb2YgdGhlIHN0cmluZy5cbiAqIElmIHRoZSBzdHJpbmcgY29udGFpbnMgb25seSB3aGl0ZXNwYWNlcywgcmV0dXJucyBlbnRpcmUgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZWFkaW5nV2hpdGVzcGFjZShzdHI6IHN0cmluZywgc3RhcnQ6IG51bWJlciA9IDAsIGVuZDogbnVtYmVyID0gc3RyLmxlbmd0aCk6IHN0cmluZyB7XG5cdGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdFx0Y29uc3QgY2hDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdFx0aWYgKGNoQ29kZSAhPT0gQ2hhckNvZGUuU3BhY2UgJiYgY2hDb2RlICE9PSBDaGFyQ29kZS5UYWIpIHtcblx0XHRcdHJldHVybiBzdHIuc3Vic3RyaW5nKHN0YXJ0LCBpKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHN0ci5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBsYXN0IGluZGV4IG9mIHRoZSBzdHJpbmcgdGhhdCBpcyBub3Qgd2hpdGVzcGFjZS5cbiAqIElmIHN0cmluZyBpcyBlbXB0eSBvciBjb250YWlucyBvbmx5IHdoaXRlc3BhY2VzLCByZXR1cm5zIC0xXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsYXN0Tm9uV2hpdGVzcGFjZUluZGV4KHN0cjogc3RyaW5nLCBzdGFydEluZGV4OiBudW1iZXIgPSBzdHIubGVuZ3RoIC0gMSk6IG51bWJlciB7XG5cdGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpID49IDA7IGktLSkge1xuXHRcdGNvbnN0IGNoQ29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHRcdGlmIChjaENvZGUgIT09IENoYXJDb2RlLlNwYWNlICYmIGNoQ29kZSAhPT0gQ2hhckNvZGUuVGFiKSB7XG5cdFx0XHRyZXR1cm4gaTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHRoYXQgd29ya3MgaWRlbnRpY2FsbHkgdG8gU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlLCBleGNlcHQsIHRoZVxuICogcmVwbGFjZSBmdW5jdGlvbiBpcyBhbGxvd2VkIHRvIGJlIGFzeW5jIGFuZCByZXR1cm4gYSBQcm9taXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUFzeW5jKHN0cjogc3RyaW5nLCBzZWFyY2g6IFJlZ0V4cCwgcmVwbGFjZXI6IChtYXRjaDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkgPT4gUHJvbWlzZTxzdHJpbmc+KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0Y29uc3QgcGFydHM6IChzdHJpbmcgfCBQcm9taXNlPHN0cmluZz4pW10gPSBbXTtcblxuXHRsZXQgbGFzdCA9IDA7XG5cdGZvciAoY29uc3QgbWF0Y2ggb2Ygc3RyLm1hdGNoQWxsKHNlYXJjaCkpIHtcblx0XHRwYXJ0cy5wdXNoKHN0ci5zbGljZShsYXN0LCBtYXRjaC5pbmRleCkpO1xuXHRcdGlmIChtYXRjaC5pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ21hdGNoLmluZGV4IHNob3VsZCBiZSBkZWZpbmVkJyk7XG5cdFx0fVxuXG5cdFx0bGFzdCA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHRcdHBhcnRzLnB1c2gocmVwbGFjZXIobWF0Y2hbMF0sIC4uLm1hdGNoLnNsaWNlKDEpLCBtYXRjaC5pbmRleCwgc3RyLCBtYXRjaC5ncm91cHMpKTtcblx0fVxuXG5cdHBhcnRzLnB1c2goc3RyLnNsaWNlKGxhc3QpKTtcblxuXHRyZXR1cm4gUHJvbWlzZS5hbGwocGFydHMpLnRoZW4ocCA9PiBwLmpvaW4oJycpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBhcmUoYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBudW1iZXIge1xuXHRpZiAoYSA8IGIpIHtcblx0XHRyZXR1cm4gLTE7XG5cdH0gZWxzZSBpZiAoYSA+IGIpIHtcblx0XHRyZXR1cm4gMTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gMDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVN1YnN0cmluZyhhOiBzdHJpbmcsIGI6IHN0cmluZywgYVN0YXJ0OiBudW1iZXIgPSAwLCBhRW5kOiBudW1iZXIgPSBhLmxlbmd0aCwgYlN0YXJ0OiBudW1iZXIgPSAwLCBiRW5kOiBudW1iZXIgPSBiLmxlbmd0aCk6IG51bWJlciB7XG5cdGZvciAoOyBhU3RhcnQgPCBhRW5kICYmIGJTdGFydCA8IGJFbmQ7IGFTdGFydCsrLCBiU3RhcnQrKykge1xuXHRcdGNvbnN0IGNvZGVBID0gYS5jaGFyQ29kZUF0KGFTdGFydCk7XG5cdFx0Y29uc3QgY29kZUIgPSBiLmNoYXJDb2RlQXQoYlN0YXJ0KTtcblx0XHRpZiAoY29kZUEgPCBjb2RlQikge1xuXHRcdFx0cmV0dXJuIC0xO1xuXHRcdH0gZWxzZSBpZiAoY29kZUEgPiBjb2RlQikge1xuXHRcdFx0cmV0dXJuIDE7XG5cdFx0fVxuXHR9XG5cdGNvbnN0IGFMZW4gPSBhRW5kIC0gYVN0YXJ0O1xuXHRjb25zdCBiTGVuID0gYkVuZCAtIGJTdGFydDtcblx0aWYgKGFMZW4gPCBiTGVuKSB7XG5cdFx0cmV0dXJuIC0xO1xuXHR9IGVsc2UgaWYgKGFMZW4gPiBiTGVuKSB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblx0cmV0dXJuIDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wYXJlSWdub3JlQ2FzZShhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XG5cdHJldHVybiBjb21wYXJlU3Vic3RyaW5nSWdub3JlQ2FzZShhLCBiLCAwLCBhLmxlbmd0aCwgMCwgYi5sZW5ndGgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVN1YnN0cmluZ0lnbm9yZUNhc2UoYTogc3RyaW5nLCBiOiBzdHJpbmcsIGFTdGFydDogbnVtYmVyID0gMCwgYUVuZDogbnVtYmVyID0gYS5sZW5ndGgsIGJTdGFydDogbnVtYmVyID0gMCwgYkVuZDogbnVtYmVyID0gYi5sZW5ndGgpOiBudW1iZXIge1xuXG5cdGZvciAoOyBhU3RhcnQgPCBhRW5kICYmIGJTdGFydCA8IGJFbmQ7IGFTdGFydCsrLCBiU3RhcnQrKykge1xuXG5cdFx0bGV0IGNvZGVBID0gYS5jaGFyQ29kZUF0KGFTdGFydCk7XG5cdFx0bGV0IGNvZGVCID0gYi5jaGFyQ29kZUF0KGJTdGFydCk7XG5cblx0XHRpZiAoY29kZUEgPT09IGNvZGVCKSB7XG5cdFx0XHQvLyBlcXVhbFxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0aWYgKGNvZGVBID49IDEyOCB8fCBjb2RlQiA+PSAxMjgpIHtcblx0XHRcdC8vIG5vdCBBU0NJSSBsZXR0ZXJzIC0+IGZhbGxiYWNrIHRvIGxvd2VyLWNhc2luZyBzdHJpbmdzXG5cdFx0XHRyZXR1cm4gY29tcGFyZVN1YnN0cmluZyhhLnRvTG93ZXJDYXNlKCksIGIudG9Mb3dlckNhc2UoKSwgYVN0YXJ0LCBhRW5kLCBiU3RhcnQsIGJFbmQpO1xuXHRcdH1cblxuXHRcdC8vIG1hcHBlciBsb3dlci1jYXNlIGFzY2lpIGxldHRlciBvbnRvIHVwcGVyLWNhc2UgdmFyaW5hdHNcblx0XHQvLyBbOTctMTIyXSAobG93ZXIgYXNjaWkpIC0tPiBbNjUtOTBdICh1cHBlciBhc2NpaSlcblx0XHRpZiAoaXNMb3dlckFzY2lpTGV0dGVyKGNvZGVBKSkge1xuXHRcdFx0Y29kZUEgLT0gMzI7XG5cdFx0fVxuXHRcdGlmIChpc0xvd2VyQXNjaWlMZXR0ZXIoY29kZUIpKSB7XG5cdFx0XHRjb2RlQiAtPSAzMjtcblx0XHR9XG5cblx0XHQvLyBjb21wYXJlIGJvdGggY29kZSBwb2ludHNcblx0XHRjb25zdCBkaWZmID0gY29kZUEgLSBjb2RlQjtcblx0XHRpZiAoZGlmZiA9PT0gMCkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRpZmY7XG5cdH1cblxuXHRjb25zdCBhTGVuID0gYUVuZCAtIGFTdGFydDtcblx0Y29uc3QgYkxlbiA9IGJFbmQgLSBiU3RhcnQ7XG5cblx0aWYgKGFMZW4gPCBiTGVuKSB7XG5cdFx0cmV0dXJuIC0xO1xuXHR9IGVsc2UgaWYgKGFMZW4gPiBiTGVuKSB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblxuXHRyZXR1cm4gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXNjaWlEaWdpdChjb2RlOiBudW1iZXIpOiBib29sZWFuIHtcblx0cmV0dXJuIGNvZGUgPj0gQ2hhckNvZGUuRGlnaXQwICYmIGNvZGUgPD0gQ2hhckNvZGUuRGlnaXQ5O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNMb3dlckFzY2lpTGV0dGVyKGNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRyZXR1cm4gY29kZSA+PSBDaGFyQ29kZS5hICYmIGNvZGUgPD0gQ2hhckNvZGUuejtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVXBwZXJBc2NpaUxldHRlcihjb2RlOiBudW1iZXIpOiBib29sZWFuIHtcblx0cmV0dXJuIGNvZGUgPj0gQ2hhckNvZGUuQSAmJiBjb2RlIDw9IENoYXJDb2RlLlo7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHNJZ25vcmVDYXNlKGE6IHN0cmluZywgYjogc3RyaW5nKTogYm9vbGVhbiB7XG5cdHJldHVybiBhLmxlbmd0aCA9PT0gYi5sZW5ndGggJiYgY29tcGFyZVN1YnN0cmluZ0lnbm9yZUNhc2UoYSwgYikgPT09IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydHNXaXRoSWdub3JlQ2FzZShzdHI6IHN0cmluZywgY2FuZGlkYXRlOiBzdHJpbmcpOiBib29sZWFuIHtcblx0Y29uc3QgY2FuZGlkYXRlTGVuZ3RoID0gY2FuZGlkYXRlLmxlbmd0aDtcblx0aWYgKGNhbmRpZGF0ZS5sZW5ndGggPiBzdHIubGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIGNvbXBhcmVTdWJzdHJpbmdJZ25vcmVDYXNlKHN0ciwgY2FuZGlkYXRlLCAwLCBjYW5kaWRhdGVMZW5ndGgpID09PSAwO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIGNvbW1vbiBwcmVmaXggb2YgdGhlIHR3byBzdHJpbmdzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tbW9uUHJlZml4TGVuZ3RoKGE6IHN0cmluZywgYjogc3RyaW5nKTogbnVtYmVyIHtcblxuXHRjb25zdCBsZW4gPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpO1xuXHRsZXQgaTogbnVtYmVyO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdGlmIChhLmNoYXJDb2RlQXQoaSkgIT09IGIuY2hhckNvZGVBdChpKSkge1xuXHRcdFx0cmV0dXJuIGk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGxlbjtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBjb21tb24gc3VmZml4IG9mIHRoZSB0d28gc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbW1vblN1ZmZpeExlbmd0aChhOiBzdHJpbmcsIGI6IHN0cmluZyk6IG51bWJlciB7XG5cblx0Y29uc3QgbGVuID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKTtcblx0bGV0IGk6IG51bWJlcjtcblxuXHRjb25zdCBhTGFzdEluZGV4ID0gYS5sZW5ndGggLSAxO1xuXHRjb25zdCBiTGFzdEluZGV4ID0gYi5sZW5ndGggLSAxO1xuXG5cdGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHRcdGlmIChhLmNoYXJDb2RlQXQoYUxhc3RJbmRleCAtIGkpICE9PSBiLmNoYXJDb2RlQXQoYkxhc3RJbmRleCAtIGkpKSB7XG5cdFx0XHRyZXR1cm4gaTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbGVuO1xufVxuXG4vKipcbiAqIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N1cnJvZ2F0ZV9wYWlyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0hpZ2hTdXJyb2dhdGUoY2hhckNvZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRyZXR1cm4gKDB4RDgwMCA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSAweERCRkYpO1xufVxuXG4vKipcbiAqIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N1cnJvZ2F0ZV9wYWlyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvd1N1cnJvZ2F0ZShjaGFyQ29kZTogbnVtYmVyKTogYm9vbGVhbiB7XG5cdHJldHVybiAoMHhEQzAwIDw9IGNoYXJDb2RlICYmIGNoYXJDb2RlIDw9IDB4REZGRik7XG59XG5cbi8qKlxuICogU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3Vycm9nYXRlX3BhaXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVDb2RlUG9pbnQoaGlnaFN1cnJvZ2F0ZTogbnVtYmVyLCBsb3dTdXJyb2dhdGU6IG51bWJlcik6IG51bWJlciB7XG5cdHJldHVybiAoKGhpZ2hTdXJyb2dhdGUgLSAweEQ4MDApIDw8IDEwKSArIChsb3dTdXJyb2dhdGUgLSAweERDMDApICsgMHgxMDAwMDtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNvZGUgcG9pbnQgdGhhdCBiZWdpbnMgYXQgb2Zmc2V0IGBvZmZzZXRgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXROZXh0Q29kZVBvaW50KHN0cjogc3RyaW5nLCBsZW46IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpOiBudW1iZXIge1xuXHRjb25zdCBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KG9mZnNldCk7XG5cdGlmIChpc0hpZ2hTdXJyb2dhdGUoY2hhckNvZGUpICYmIG9mZnNldCArIDEgPCBsZW4pIHtcblx0XHRjb25zdCBuZXh0Q2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChvZmZzZXQgKyAxKTtcblx0XHRpZiAoaXNMb3dTdXJyb2dhdGUobmV4dENoYXJDb2RlKSkge1xuXHRcdFx0cmV0dXJuIGNvbXB1dGVDb2RlUG9pbnQoY2hhckNvZGUsIG5leHRDaGFyQ29kZSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBjaGFyQ29kZTtcbn1cblxuLyoqXG4gKiBnZXQgdGhlIGNvZGUgcG9pbnQgdGhhdCBlbmRzIHJpZ2h0IGJlZm9yZSBvZmZzZXQgYG9mZnNldGBcbiAqL1xuZnVuY3Rpb24gZ2V0UHJldkNvZGVQb2ludChzdHI6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIpOiBudW1iZXIge1xuXHRjb25zdCBjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KG9mZnNldCAtIDEpO1xuXHRpZiAoaXNMb3dTdXJyb2dhdGUoY2hhckNvZGUpICYmIG9mZnNldCA+IDEpIHtcblx0XHRjb25zdCBwcmV2Q2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChvZmZzZXQgLSAyKTtcblx0XHRpZiAoaXNIaWdoU3Vycm9nYXRlKHByZXZDaGFyQ29kZSkpIHtcblx0XHRcdHJldHVybiBjb21wdXRlQ29kZVBvaW50KHByZXZDaGFyQ29kZSwgY2hhckNvZGUpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gY2hhckNvZGU7XG59XG5cbmV4cG9ydCBjbGFzcyBDb2RlUG9pbnRJdGVyYXRvciB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfc3RyOiBzdHJpbmc7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2xlbjogbnVtYmVyO1xuXHRwcml2YXRlIF9vZmZzZXQ6IG51bWJlcjtcblxuXHRwdWJsaWMgZ2V0IG9mZnNldCgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9vZmZzZXQ7XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihzdHI6IHN0cmluZywgb2Zmc2V0OiBudW1iZXIgPSAwKSB7XG5cdFx0dGhpcy5fc3RyID0gc3RyO1xuXHRcdHRoaXMuX2xlbiA9IHN0ci5sZW5ndGg7XG5cdFx0dGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xuXHR9XG5cblx0cHVibGljIHNldE9mZnNldChvZmZzZXQ6IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMuX29mZnNldCA9IG9mZnNldDtcblx0fVxuXG5cdHB1YmxpYyBwcmV2Q29kZVBvaW50KCk6IG51bWJlciB7XG5cdFx0Y29uc3QgY29kZVBvaW50ID0gZ2V0UHJldkNvZGVQb2ludCh0aGlzLl9zdHIsIHRoaXMuX29mZnNldCk7XG5cdFx0dGhpcy5fb2Zmc2V0IC09IChjb2RlUG9pbnQgPj0gQ29uc3RhbnRzLlVOSUNPREVfU1VQUExFTUVOVEFSWV9QTEFORV9CRUdJTiA/IDIgOiAxKTtcblx0XHRyZXR1cm4gY29kZVBvaW50O1xuXHR9XG5cblx0cHVibGljIG5leHRDb2RlUG9pbnQoKTogbnVtYmVyIHtcblx0XHRjb25zdCBjb2RlUG9pbnQgPSBnZXROZXh0Q29kZVBvaW50KHRoaXMuX3N0ciwgdGhpcy5fbGVuLCB0aGlzLl9vZmZzZXQpO1xuXHRcdHRoaXMuX29mZnNldCArPSAoY29kZVBvaW50ID49IENvbnN0YW50cy5VTklDT0RFX1NVUFBMRU1FTlRBUllfUExBTkVfQkVHSU4gPyAyIDogMSk7XG5cdFx0cmV0dXJuIGNvZGVQb2ludDtcblx0fVxuXG5cdHB1YmxpYyBlb2woKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICh0aGlzLl9vZmZzZXQgPj0gdGhpcy5fbGVuKTtcblx0fVxufVxuXG5leHBvcnQgY29uc3Qgbm9CcmVha1doaXRlc3BhY2UgPSAnXFx4YTAnO1xuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgKiBhcyBzdHJpbmdzIGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3N0cmluZ3MnO1xuXG4vKipcbiAqIFJldHVybiBhIGhhc2ggdmFsdWUgZm9yIGFuIG9iamVjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc2gob2JqOiBhbnkpOiBudW1iZXIge1xuXHRyZXR1cm4gZG9IYXNoKG9iaiwgMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkb0hhc2gob2JqOiBhbnksIGhhc2hWYWw6IG51bWJlcik6IG51bWJlciB7XG5cdHN3aXRjaCAodHlwZW9mIG9iaikge1xuXHRcdGNhc2UgJ29iamVjdCc6XG5cdFx0XHRpZiAob2JqID09PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBudW1iZXJIYXNoKDM0OSwgaGFzaFZhbCk7XG5cdFx0XHR9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuXHRcdFx0XHRyZXR1cm4gYXJyYXlIYXNoKG9iaiwgaGFzaFZhbCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqZWN0SGFzaChvYmosIGhhc2hWYWwpO1xuXHRcdGNhc2UgJ3N0cmluZyc6XG5cdFx0XHRyZXR1cm4gc3RyaW5nSGFzaChvYmosIGhhc2hWYWwpO1xuXHRcdGNhc2UgJ2Jvb2xlYW4nOlxuXHRcdFx0cmV0dXJuIGJvb2xlYW5IYXNoKG9iaiwgaGFzaFZhbCk7XG5cdFx0Y2FzZSAnbnVtYmVyJzpcblx0XHRcdHJldHVybiBudW1iZXJIYXNoKG9iaiwgaGFzaFZhbCk7XG5cdFx0Y2FzZSAndW5kZWZpbmVkJzpcblx0XHRcdHJldHVybiBudW1iZXJIYXNoKDkzNywgaGFzaFZhbCk7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBudW1iZXJIYXNoKDYxNywgaGFzaFZhbCk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlckhhc2godmFsOiBudW1iZXIsIGluaXRpYWxIYXNoVmFsOiBudW1iZXIpOiBudW1iZXIge1xuXHRyZXR1cm4gKCgoaW5pdGlhbEhhc2hWYWwgPDwgNSkgLSBpbml0aWFsSGFzaFZhbCkgKyB2YWwpIHwgMDsgIC8vIGhhc2hWYWwgKiAzMSArIGNoLCBrZWVwIGFzIGludDMyXG59XG5cbmZ1bmN0aW9uIGJvb2xlYW5IYXNoKGI6IGJvb2xlYW4sIGluaXRpYWxIYXNoVmFsOiBudW1iZXIpOiBudW1iZXIge1xuXHRyZXR1cm4gbnVtYmVySGFzaChiID8gNDMzIDogODYzLCBpbml0aWFsSGFzaFZhbCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdIYXNoKHM6IHN0cmluZywgaGFzaFZhbDogbnVtYmVyKSB7XG5cdGhhc2hWYWwgPSBudW1iZXJIYXNoKDE0OTQxNywgaGFzaFZhbCk7XG5cdGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0aGFzaFZhbCA9IG51bWJlckhhc2gocy5jaGFyQ29kZUF0KGkpLCBoYXNoVmFsKTtcblx0fVxuXHRyZXR1cm4gaGFzaFZhbDtcbn1cblxuZnVuY3Rpb24gYXJyYXlIYXNoKGFycjogYW55W10sIGluaXRpYWxIYXNoVmFsOiBudW1iZXIpOiBudW1iZXIge1xuXHRpbml0aWFsSGFzaFZhbCA9IG51bWJlckhhc2goMTA0NTc5LCBpbml0aWFsSGFzaFZhbCk7XG5cdHJldHVybiBhcnIucmVkdWNlKChoYXNoVmFsLCBpdGVtKSA9PiBkb0hhc2goaXRlbSwgaGFzaFZhbCksIGluaXRpYWxIYXNoVmFsKTtcbn1cblxuZnVuY3Rpb24gb2JqZWN0SGFzaChvYmo6IGFueSwgaW5pdGlhbEhhc2hWYWw6IG51bWJlcik6IG51bWJlciB7XG5cdGluaXRpYWxIYXNoVmFsID0gbnVtYmVySGFzaCgxODEzODcsIGluaXRpYWxIYXNoVmFsKTtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG9iaikuc29ydCgpLnJlZHVjZSgoaGFzaFZhbCwga2V5KSA9PiB7XG5cdFx0aGFzaFZhbCA9IHN0cmluZ0hhc2goa2V5LCBoYXNoVmFsKTtcblx0XHRyZXR1cm4gZG9IYXNoKG9ialtrZXldLCBoYXNoVmFsKTtcblx0fSwgaW5pdGlhbEhhc2hWYWwpO1xufVxuXG5leHBvcnQgY2xhc3MgSGFzaGVyIHtcblxuXHRwcml2YXRlIF92YWx1ZSA9IDA7XG5cblx0Z2V0IHZhbHVlKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3ZhbHVlO1xuXHR9XG5cblx0aGFzaChvYmo6IGFueSk6IG51bWJlciB7XG5cdFx0dGhpcy5fdmFsdWUgPSBkb0hhc2gob2JqLCB0aGlzLl92YWx1ZSk7XG5cdFx0cmV0dXJuIHRoaXMuX3ZhbHVlO1xuXHR9XG59XG5cbmNvbnN0IGVudW0gU0hBMUNvbnN0YW50IHtcblx0QkxPQ0tfU0laRSA9IDY0LCAvLyA1MTIgLyA4XG5cdFVOSUNPREVfUkVQTEFDRU1FTlQgPSAweEZGRkQsXG59XG5cbmZ1bmN0aW9uIGxlZnRSb3RhdGUodmFsdWU6IG51bWJlciwgYml0czogbnVtYmVyLCB0b3RhbEJpdHM6IG51bWJlciA9IDMyKTogbnVtYmVyIHtcblx0Ly8gZGVsdGEgKyBiaXRzID0gdG90YWxCaXRzXG5cdGNvbnN0IGRlbHRhID0gdG90YWxCaXRzIC0gYml0cztcblxuXHQvLyBBbGwgb25lcywgZXhwZWN0IGBkZWx0YWAgemVyb3MgYWxpZ25lZCB0byB0aGUgcmlnaHRcblx0Y29uc3QgbWFzayA9IH4oKDEgPDwgZGVsdGEpIC0gMSk7XG5cblx0Ly8gSm9pbiAodmFsdWUgbGVmdC1zaGlmdGVkIGBiaXRzYCBiaXRzKSB3aXRoIChtYXNrZWQgdmFsdWUgcmlnaHQtc2hpZnRlZCBgZGVsdGFgIGJpdHMpXG5cdHJldHVybiAoKHZhbHVlIDw8IGJpdHMpIHwgKChtYXNrICYgdmFsdWUpID4+PiBkZWx0YSkpID4+PiAwO1xufVxuXG5mdW5jdGlvbiBmaWxsKGRlc3Q6IFVpbnQ4QXJyYXksIGluZGV4OiBudW1iZXIgPSAwLCBjb3VudDogbnVtYmVyID0gZGVzdC5ieXRlTGVuZ3RoLCB2YWx1ZTogbnVtYmVyID0gMCk6IHZvaWQge1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcblx0XHRkZXN0W2luZGV4ICsgaV0gPSB2YWx1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBsZWZ0UGFkKHZhbHVlOiBzdHJpbmcsIGxlbmd0aDogbnVtYmVyLCBjaGFyOiBzdHJpbmcgPSAnMCcpOiBzdHJpbmcge1xuXHR3aGlsZSAodmFsdWUubGVuZ3RoIDwgbGVuZ3RoKSB7XG5cdFx0dmFsdWUgPSBjaGFyICsgdmFsdWU7XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9IZXhTdHJpbmcoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiB0b0hleFN0cmluZyh2YWx1ZTogbnVtYmVyLCBiaXRzaXplPzogbnVtYmVyKTogc3RyaW5nO1xuZXhwb3J0IGZ1bmN0aW9uIHRvSGV4U3RyaW5nKGJ1ZmZlck9yVmFsdWU6IEFycmF5QnVmZmVyIHwgbnVtYmVyLCBiaXRzaXplOiBudW1iZXIgPSAzMik6IHN0cmluZyB7XG5cdGlmIChidWZmZXJPclZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcblx0XHRyZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShidWZmZXJPclZhbHVlKSkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XG5cdH1cblxuXHRyZXR1cm4gbGVmdFBhZCgoYnVmZmVyT3JWYWx1ZSA+Pj4gMCkudG9TdHJpbmcoMTYpLCBiaXRzaXplIC8gNCk7XG59XG5cbi8qKlxuICogQSBTSEExIGltcGxlbWVudGF0aW9uIHRoYXQgd29ya3Mgd2l0aCBzdHJpbmdzIGFuZCBkb2VzIG5vdCBhbGxvY2F0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmluZ1NIQTEge1xuXHRwcml2YXRlIHN0YXRpYyBfYmlnQmxvY2szMiA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMzIwKSk7IC8vIDgwICogNCA9IDMyMFxuXG5cdHByaXZhdGUgX2gwID0gMHg2NzQ1MjMwMTtcblx0cHJpdmF0ZSBfaDEgPSAweEVGQ0RBQjg5O1xuXHRwcml2YXRlIF9oMiA9IDB4OThCQURDRkU7XG5cdHByaXZhdGUgX2gzID0gMHgxMDMyNTQ3Njtcblx0cHJpdmF0ZSBfaDQgPSAweEMzRDJFMUYwO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX2J1ZmY6IFVpbnQ4QXJyYXk7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZEVjogRGF0YVZpZXc7XG5cdHByaXZhdGUgX2J1ZmZMZW46IG51bWJlcjtcblx0cHJpdmF0ZSBfdG90YWxMZW46IG51bWJlcjtcblx0cHJpdmF0ZSBfbGVmdG92ZXJIaWdoU3Vycm9nYXRlOiBudW1iZXI7XG5cdHByaXZhdGUgX2ZpbmlzaGVkOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHRoaXMuX2J1ZmYgPSBuZXcgVWludDhBcnJheShTSEExQ29uc3RhbnQuQkxPQ0tfU0laRSArIDMgLyogdG8gZml0IGFueSB1dGYtOCAqLyk7XG5cdFx0dGhpcy5fYnVmZkRWID0gbmV3IERhdGFWaWV3KHRoaXMuX2J1ZmYuYnVmZmVyKTtcblx0XHR0aGlzLl9idWZmTGVuID0gMDtcblx0XHR0aGlzLl90b3RhbExlbiA9IDA7XG5cdFx0dGhpcy5fbGVmdG92ZXJIaWdoU3Vycm9nYXRlID0gMDtcblx0XHR0aGlzLl9maW5pc2hlZCA9IGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHVwZGF0ZShzdHI6IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IHN0ckxlbiA9IHN0ci5sZW5ndGg7XG5cdFx0aWYgKHN0ckxlbiA9PT0gMCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGJ1ZmYgPSB0aGlzLl9idWZmO1xuXHRcdGxldCBidWZmTGVuID0gdGhpcy5fYnVmZkxlbjtcblx0XHRsZXQgbGVmdG92ZXJIaWdoU3Vycm9nYXRlID0gdGhpcy5fbGVmdG92ZXJIaWdoU3Vycm9nYXRlO1xuXHRcdGxldCBjaGFyQ29kZTogbnVtYmVyO1xuXHRcdGxldCBvZmZzZXQ6IG51bWJlcjtcblxuXHRcdGlmIChsZWZ0b3ZlckhpZ2hTdXJyb2dhdGUgIT09IDApIHtcblx0XHRcdGNoYXJDb2RlID0gbGVmdG92ZXJIaWdoU3Vycm9nYXRlO1xuXHRcdFx0b2Zmc2V0ID0gLTE7XG5cdFx0XHRsZWZ0b3ZlckhpZ2hTdXJyb2dhdGUgPSAwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuXHRcdFx0b2Zmc2V0ID0gMDtcblx0XHR9XG5cblx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0bGV0IGNvZGVQb2ludCA9IGNoYXJDb2RlO1xuXHRcdFx0aWYgKHN0cmluZ3MuaXNIaWdoU3Vycm9nYXRlKGNoYXJDb2RlKSkge1xuXHRcdFx0XHRpZiAob2Zmc2V0ICsgMSA8IHN0ckxlbikge1xuXHRcdFx0XHRcdGNvbnN0IG5leHRDaGFyQ29kZSA9IHN0ci5jaGFyQ29kZUF0KG9mZnNldCArIDEpO1xuXHRcdFx0XHRcdGlmIChzdHJpbmdzLmlzTG93U3Vycm9nYXRlKG5leHRDaGFyQ29kZSkpIHtcblx0XHRcdFx0XHRcdG9mZnNldCsrO1xuXHRcdFx0XHRcdFx0Y29kZVBvaW50ID0gc3RyaW5ncy5jb21wdXRlQ29kZVBvaW50KGNoYXJDb2RlLCBuZXh0Q2hhckNvZGUpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHQvLyBpbGxlZ2FsID0+IHVuaWNvZGUgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG5cdFx0XHRcdFx0XHRjb2RlUG9pbnQgPSBTSEExQ29uc3RhbnQuVU5JQ09ERV9SRVBMQUNFTUVOVDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gbGFzdCBjaGFyYWN0ZXIgaXMgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdGxlZnRvdmVySGlnaFN1cnJvZ2F0ZSA9IGNoYXJDb2RlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHN0cmluZ3MuaXNMb3dTdXJyb2dhdGUoY2hhckNvZGUpKSB7XG5cdFx0XHRcdC8vIGlsbGVnYWwgPT4gdW5pY29kZSByZXBsYWNlbWVudCBjaGFyYWN0ZXJcblx0XHRcdFx0Y29kZVBvaW50ID0gU0hBMUNvbnN0YW50LlVOSUNPREVfUkVQTEFDRU1FTlQ7XG5cdFx0XHR9XG5cblx0XHRcdGJ1ZmZMZW4gPSB0aGlzLl9wdXNoKGJ1ZmYsIGJ1ZmZMZW4sIGNvZGVQb2ludCk7XG5cdFx0XHRvZmZzZXQrKztcblx0XHRcdGlmIChvZmZzZXQgPCBzdHJMZW4pIHtcblx0XHRcdFx0Y2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChvZmZzZXQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpcy5fYnVmZkxlbiA9IGJ1ZmZMZW47XG5cdFx0dGhpcy5fbGVmdG92ZXJIaWdoU3Vycm9nYXRlID0gbGVmdG92ZXJIaWdoU3Vycm9nYXRlO1xuXHR9XG5cblx0cHJpdmF0ZSBfcHVzaChidWZmOiBVaW50OEFycmF5LCBidWZmTGVuOiBudW1iZXIsIGNvZGVQb2ludDogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAoY29kZVBvaW50IDwgMHgwMDgwKSB7XG5cdFx0XHRidWZmW2J1ZmZMZW4rK10gPSBjb2RlUG9pbnQ7XG5cdFx0fSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDA4MDApIHtcblx0XHRcdGJ1ZmZbYnVmZkxlbisrXSA9IDBiMTEwMDAwMDAgfCAoKGNvZGVQb2ludCAmIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTEwMDAwMDApID4+PiA2KTtcblx0XHRcdGJ1ZmZbYnVmZkxlbisrXSA9IDBiMTAwMDAwMDAgfCAoKGNvZGVQb2ludCAmIDBiMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMTExMTEpID4+PiAwKTtcblx0XHR9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcblx0XHRcdGJ1ZmZbYnVmZkxlbisrXSA9IDBiMTExMDAwMDAgfCAoKGNvZGVQb2ludCAmIDBiMDAwMDAwMDAwMDAwMDAwMDExMTEwMDAwMDAwMDAwMDApID4+PiAxMik7XG5cdFx0XHRidWZmW2J1ZmZMZW4rK10gPSAwYjEwMDAwMDAwIHwgKChjb2RlUG9pbnQgJiAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMDAwMDAwKSA+Pj4gNik7XG5cdFx0XHRidWZmW2J1ZmZMZW4rK10gPSAwYjEwMDAwMDAwIHwgKChjb2RlUG9pbnQgJiAwYjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExKSA+Pj4gMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJ1ZmZbYnVmZkxlbisrXSA9IDBiMTExMTAwMDAgfCAoKGNvZGVQb2ludCAmIDBiMDAwMDAwMDAwMDAxMTEwMDAwMDAwMDAwMDAwMDAwMDApID4+PiAxOCk7XG5cdFx0XHRidWZmW2J1ZmZMZW4rK10gPSAwYjEwMDAwMDAwIHwgKChjb2RlUG9pbnQgJiAwYjAwMDAwMDAwMDAwMDAwMTExMTExMDAwMDAwMDAwMDAwKSA+Pj4gMTIpO1xuXHRcdFx0YnVmZltidWZmTGVuKytdID0gMGIxMDAwMDAwMCB8ICgoY29kZVBvaW50ICYgMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDExMTExMTAwMDAwMCkgPj4+IDYpO1xuXHRcdFx0YnVmZltidWZmTGVuKytdID0gMGIxMDAwMDAwMCB8ICgoY29kZVBvaW50ICYgMGIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDExMTExMSkgPj4+IDApO1xuXHRcdH1cblxuXHRcdGlmIChidWZmTGVuID49IFNIQTFDb25zdGFudC5CTE9DS19TSVpFKSB7XG5cdFx0XHR0aGlzLl9zdGVwKCk7XG5cdFx0XHRidWZmTGVuIC09IFNIQTFDb25zdGFudC5CTE9DS19TSVpFO1xuXHRcdFx0dGhpcy5fdG90YWxMZW4gKz0gU0hBMUNvbnN0YW50LkJMT0NLX1NJWkU7XG5cdFx0XHQvLyB0YWtlIGxhc3QgMyBpbiBjYXNlIG9mIFVURjggb3ZlcmZsb3dcblx0XHRcdGJ1ZmZbMF0gPSBidWZmW1NIQTFDb25zdGFudC5CTE9DS19TSVpFICsgMF07XG5cdFx0XHRidWZmWzFdID0gYnVmZltTSEExQ29uc3RhbnQuQkxPQ0tfU0laRSArIDFdO1xuXHRcdFx0YnVmZlsyXSA9IGJ1ZmZbU0hBMUNvbnN0YW50LkJMT0NLX1NJWkUgKyAyXTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYnVmZkxlbjtcblx0fVxuXG5cdHB1YmxpYyBkaWdlc3QoKTogc3RyaW5nIHtcblx0XHRpZiAoIXRoaXMuX2ZpbmlzaGVkKSB7XG5cdFx0XHR0aGlzLl9maW5pc2hlZCA9IHRydWU7XG5cdFx0XHRpZiAodGhpcy5fbGVmdG92ZXJIaWdoU3Vycm9nYXRlKSB7XG5cdFx0XHRcdC8vIGlsbGVnYWwgPT4gdW5pY29kZSByZXBsYWNlbWVudCBjaGFyYWN0ZXJcblx0XHRcdFx0dGhpcy5fbGVmdG92ZXJIaWdoU3Vycm9nYXRlID0gMDtcblx0XHRcdFx0dGhpcy5fYnVmZkxlbiA9IHRoaXMuX3B1c2godGhpcy5fYnVmZiwgdGhpcy5fYnVmZkxlbiwgU0hBMUNvbnN0YW50LlVOSUNPREVfUkVQTEFDRU1FTlQpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fdG90YWxMZW4gKz0gdGhpcy5fYnVmZkxlbjtcblx0XHRcdHRoaXMuX3dyYXBVcCgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0b0hleFN0cmluZyh0aGlzLl9oMCkgKyB0b0hleFN0cmluZyh0aGlzLl9oMSkgKyB0b0hleFN0cmluZyh0aGlzLl9oMikgKyB0b0hleFN0cmluZyh0aGlzLl9oMykgKyB0b0hleFN0cmluZyh0aGlzLl9oNCk7XG5cdH1cblxuXHRwcml2YXRlIF93cmFwVXAoKTogdm9pZCB7XG5cdFx0dGhpcy5fYnVmZlt0aGlzLl9idWZmTGVuKytdID0gMHg4MDtcblx0XHRmaWxsKHRoaXMuX2J1ZmYsIHRoaXMuX2J1ZmZMZW4pO1xuXG5cdFx0aWYgKHRoaXMuX2J1ZmZMZW4gPiA1Nikge1xuXHRcdFx0dGhpcy5fc3RlcCgpO1xuXHRcdFx0ZmlsbCh0aGlzLl9idWZmKTtcblx0XHR9XG5cblx0XHQvLyB0aGlzIHdpbGwgZml0IGJlY2F1c2UgdGhlIG1hbnRpc3NhIGNhbiBjb3ZlciB1cCB0byA1MiBiaXRzXG5cdFx0Y29uc3QgbWwgPSA4ICogdGhpcy5fdG90YWxMZW47XG5cblx0XHR0aGlzLl9idWZmRFYuc2V0VWludDMyKDU2LCBNYXRoLmZsb29yKG1sIC8gNDI5NDk2NzI5NiksIGZhbHNlKTtcblx0XHR0aGlzLl9idWZmRFYuc2V0VWludDMyKDYwLCBtbCAlIDQyOTQ5NjcyOTYsIGZhbHNlKTtcblxuXHRcdHRoaXMuX3N0ZXAoKTtcblx0fVxuXG5cdHByaXZhdGUgX3N0ZXAoKTogdm9pZCB7XG5cdFx0Y29uc3QgYmlnQmxvY2szMiA9IFN0cmluZ1NIQTEuX2JpZ0Jsb2NrMzI7XG5cdFx0Y29uc3QgZGF0YSA9IHRoaXMuX2J1ZmZEVjtcblxuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgNjQgLyogMTYqNCAqLzsgaiArPSA0KSB7XG5cdFx0XHRiaWdCbG9jazMyLnNldFVpbnQzMihqLCBkYXRhLmdldFVpbnQzMihqLCBmYWxzZSksIGZhbHNlKTtcblx0XHR9XG5cblx0XHRmb3IgKGxldCBqID0gNjQ7IGogPCAzMjAgLyogODAqNCAqLzsgaiArPSA0KSB7XG5cdFx0XHRiaWdCbG9jazMyLnNldFVpbnQzMihqLCBsZWZ0Um90YXRlKChiaWdCbG9jazMyLmdldFVpbnQzMihqIC0gMTIsIGZhbHNlKSBeIGJpZ0Jsb2NrMzIuZ2V0VWludDMyKGogLSAzMiwgZmFsc2UpIF4gYmlnQmxvY2szMi5nZXRVaW50MzIoaiAtIDU2LCBmYWxzZSkgXiBiaWdCbG9jazMyLmdldFVpbnQzMihqIC0gNjQsIGZhbHNlKSksIDEpLCBmYWxzZSk7XG5cdFx0fVxuXG5cdFx0bGV0IGEgPSB0aGlzLl9oMDtcblx0XHRsZXQgYiA9IHRoaXMuX2gxO1xuXHRcdGxldCBjID0gdGhpcy5faDI7XG5cdFx0bGV0IGQgPSB0aGlzLl9oMztcblx0XHRsZXQgZSA9IHRoaXMuX2g0O1xuXG5cdFx0bGV0IGY6IG51bWJlciwgazogbnVtYmVyO1xuXHRcdGxldCB0ZW1wOiBudW1iZXI7XG5cblx0XHRmb3IgKGxldCBqID0gMDsgaiA8IDgwOyBqKyspIHtcblx0XHRcdGlmIChqIDwgMjApIHtcblx0XHRcdFx0ZiA9IChiICYgYykgfCAoKH5iKSAmIGQpO1xuXHRcdFx0XHRrID0gMHg1QTgyNzk5OTtcblx0XHRcdH0gZWxzZSBpZiAoaiA8IDQwKSB7XG5cdFx0XHRcdGYgPSBiIF4gYyBeIGQ7XG5cdFx0XHRcdGsgPSAweDZFRDlFQkExO1xuXHRcdFx0fSBlbHNlIGlmIChqIDwgNjApIHtcblx0XHRcdFx0ZiA9IChiICYgYykgfCAoYiAmIGQpIHwgKGMgJiBkKTtcblx0XHRcdFx0ayA9IDB4OEYxQkJDREM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmID0gYiBeIGMgXiBkO1xuXHRcdFx0XHRrID0gMHhDQTYyQzFENjtcblx0XHRcdH1cblxuXHRcdFx0dGVtcCA9IChsZWZ0Um90YXRlKGEsIDUpICsgZiArIGUgKyBrICsgYmlnQmxvY2szMi5nZXRVaW50MzIoaiAqIDQsIGZhbHNlKSkgJiAweGZmZmZmZmZmO1xuXHRcdFx0ZSA9IGQ7XG5cdFx0XHRkID0gYztcblx0XHRcdGMgPSBsZWZ0Um90YXRlKGIsIDMwKTtcblx0XHRcdGIgPSBhO1xuXHRcdFx0YSA9IHRlbXA7XG5cdFx0fVxuXG5cdFx0dGhpcy5faDAgPSAodGhpcy5faDAgKyBhKSAmIDB4ZmZmZmZmZmY7XG5cdFx0dGhpcy5faDEgPSAodGhpcy5faDEgKyBiKSAmIDB4ZmZmZmZmZmY7XG5cdFx0dGhpcy5faDIgPSAodGhpcy5faDIgKyBjKSAmIDB4ZmZmZmZmZmY7XG5cdFx0dGhpcy5faDMgPSAodGhpcy5faDMgKyBkKSAmIDB4ZmZmZmZmZmY7XG5cdFx0dGhpcy5faDQgPSAodGhpcy5faDQgKyBlKSAmIDB4ZmZmZmZmZmY7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0ICogYXMgYnJvd3NlciBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvYnJvd3Nlcic7XG5pbXBvcnQgeyBCcm93c2VyRmVhdHVyZXMgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvY2FuSVVzZSc7XG5pbXBvcnQgeyBJS2V5Ym9hcmRFdmVudCwgU3RhbmRhcmRLZXlib2FyZEV2ZW50IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2tleWJvYXJkRXZlbnQnO1xuaW1wb3J0IHsgSU1vdXNlRXZlbnQsIFN0YW5kYXJkTW91c2VFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9tb3VzZUV2ZW50JztcbmltcG9ydCB7IEFic3RyYWN0SWRsZVZhbHVlLCBJbnRlcnZhbFRpbWVyLCBUaW1lb3V0VGltZXIsIF9ydW5XaGVuSWRsZSwgSWRsZURlYWRsaW5lIH0gZnJvbSAndnMvYmFzZS9jb21tb24vYXN5bmMnO1xuaW1wb3J0IHsgb25VbmV4cGVjdGVkRXJyb3IgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9lcnJvcnMnO1xuaW1wb3J0ICogYXMgZXZlbnQgZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuaW1wb3J0IHsgS2V5Q29kZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2tleUNvZGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIERpc3Bvc2FibGVTdG9yZSwgSURpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICd2cy9iYXNlL2NvbW1vbi9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBoYXNoIH0gZnJvbSAndnMvYmFzZS9jb21tb24vaGFzaCc7XG5pbXBvcnQgeyBDb2RlV2luZG93LCBlbnN1cmVDb2RlV2luZG93LCBtYWluV2luZG93IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3dpbmRvdyc7XG5pbXBvcnQgeyBpc1BvaW50V2l0aGluVHJpYW5nbGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9udW1iZXJzJztcblxuZXhwb3J0IGludGVyZmFjZSBJUmVnaXN0ZXJlZENvZGVXaW5kb3cge1xuXHRyZWFkb25seSB3aW5kb3c6IENvZGVXaW5kb3c7XG5cdHJlYWRvbmx5IGRpc3Bvc2FibGVzOiBEaXNwb3NhYmxlU3RvcmU7XG59XG5cbi8vIyByZWdpb24gTXVsdGktV2luZG93IFN1cHBvcnQgVXRpbGl0aWVzXG5cbmV4cG9ydCBjb25zdCB7XG5cdHJlZ2lzdGVyV2luZG93LFxuXHRnZXRXaW5kb3csXG5cdGdldERvY3VtZW50LFxuXHRnZXRXaW5kb3dzLFxuXHRnZXRXaW5kb3dzQ291bnQsXG5cdGdldFdpbmRvd0lkLFxuXHRnZXRXaW5kb3dCeUlkLFxuXHRoYXNXaW5kb3csXG5cdG9uRGlkUmVnaXN0ZXJXaW5kb3csXG5cdG9uV2lsbFVucmVnaXN0ZXJXaW5kb3csXG5cdG9uRGlkVW5yZWdpc3RlcldpbmRvd1xufSA9IChmdW5jdGlvbiAoKSB7XG5cdGNvbnN0IHdpbmRvd3MgPSBuZXcgTWFwPG51bWJlciwgSVJlZ2lzdGVyZWRDb2RlV2luZG93PigpO1xuXG5cdGVuc3VyZUNvZGVXaW5kb3cobWFpbldpbmRvdywgMSk7XG5cdGNvbnN0IG1haW5XaW5kb3dSZWdpc3RyYXRpb24gPSB7IHdpbmRvdzogbWFpbldpbmRvdywgZGlzcG9zYWJsZXM6IG5ldyBEaXNwb3NhYmxlU3RvcmUoKSB9O1xuXHR3aW5kb3dzLnNldChtYWluV2luZG93LnZzY29kZVdpbmRvd0lkLCBtYWluV2luZG93UmVnaXN0cmF0aW9uKTtcblxuXHRjb25zdCBvbkRpZFJlZ2lzdGVyV2luZG93ID0gbmV3IGV2ZW50LkVtaXR0ZXI8SVJlZ2lzdGVyZWRDb2RlV2luZG93PigpO1xuXHRjb25zdCBvbkRpZFVucmVnaXN0ZXJXaW5kb3cgPSBuZXcgZXZlbnQuRW1pdHRlcjxDb2RlV2luZG93PigpO1xuXHRjb25zdCBvbldpbGxVbnJlZ2lzdGVyV2luZG93ID0gbmV3IGV2ZW50LkVtaXR0ZXI8Q29kZVdpbmRvdz4oKTtcblxuXHRmdW5jdGlvbiBnZXRXaW5kb3dCeUlkKHdpbmRvd0lkOiBudW1iZXIpOiBJUmVnaXN0ZXJlZENvZGVXaW5kb3cgfCB1bmRlZmluZWQ7XG5cdGZ1bmN0aW9uIGdldFdpbmRvd0J5SWQod2luZG93SWQ6IG51bWJlciB8IHVuZGVmaW5lZCwgZmFsbGJhY2tUb01haW46IHRydWUpOiBJUmVnaXN0ZXJlZENvZGVXaW5kb3c7XG5cdGZ1bmN0aW9uIGdldFdpbmRvd0J5SWQod2luZG93SWQ6IG51bWJlciB8IHVuZGVmaW5lZCwgZmFsbGJhY2tUb01haW4/OiBib29sZWFuKTogSVJlZ2lzdGVyZWRDb2RlV2luZG93IHwgdW5kZWZpbmVkIHtcblx0XHRjb25zdCB3aW5kb3cgPSB0eXBlb2Ygd2luZG93SWQgPT09ICdudW1iZXInID8gd2luZG93cy5nZXQod2luZG93SWQpIDogdW5kZWZpbmVkO1xuXG5cdFx0cmV0dXJuIHdpbmRvdyA/PyAoZmFsbGJhY2tUb01haW4gPyBtYWluV2luZG93UmVnaXN0cmF0aW9uIDogdW5kZWZpbmVkKTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0b25EaWRSZWdpc3RlcldpbmRvdzogb25EaWRSZWdpc3RlcldpbmRvdy5ldmVudCxcblx0XHRvbldpbGxVbnJlZ2lzdGVyV2luZG93OiBvbldpbGxVbnJlZ2lzdGVyV2luZG93LmV2ZW50LFxuXHRcdG9uRGlkVW5yZWdpc3RlcldpbmRvdzogb25EaWRVbnJlZ2lzdGVyV2luZG93LmV2ZW50LFxuXHRcdHJlZ2lzdGVyV2luZG93KHdpbmRvdzogQ29kZVdpbmRvdyk6IElEaXNwb3NhYmxlIHtcblx0XHRcdGlmICh3aW5kb3dzLmhhcyh3aW5kb3cudnNjb2RlV2luZG93SWQpKSB7XG5cdFx0XHRcdHJldHVybiBEaXNwb3NhYmxlLk5vbmU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGRpc3Bvc2FibGVzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpO1xuXG5cdFx0XHRjb25zdCByZWdpc3RlcmVkV2luZG93ID0ge1xuXHRcdFx0XHR3aW5kb3csXG5cdFx0XHRcdGRpc3Bvc2FibGVzOiBkaXNwb3NhYmxlcy5hZGQobmV3IERpc3Bvc2FibGVTdG9yZSgpKVxuXHRcdFx0fTtcblx0XHRcdHdpbmRvd3Muc2V0KHdpbmRvdy52c2NvZGVXaW5kb3dJZCwgcmVnaXN0ZXJlZFdpbmRvdyk7XG5cblx0XHRcdGRpc3Bvc2FibGVzLmFkZCh0b0Rpc3Bvc2FibGUoKCkgPT4ge1xuXHRcdFx0XHR3aW5kb3dzLmRlbGV0ZSh3aW5kb3cudnNjb2RlV2luZG93SWQpO1xuXHRcdFx0XHRvbkRpZFVucmVnaXN0ZXJXaW5kb3cuZmlyZSh3aW5kb3cpO1xuXHRcdFx0fSkpO1xuXG5cdFx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdywgRXZlbnRUeXBlLkJFRk9SRV9VTkxPQUQsICgpID0+IHtcblx0XHRcdFx0b25XaWxsVW5yZWdpc3RlcldpbmRvdy5maXJlKHdpbmRvdyk7XG5cdFx0XHR9KSk7XG5cblx0XHRcdG9uRGlkUmVnaXN0ZXJXaW5kb3cuZmlyZShyZWdpc3RlcmVkV2luZG93KTtcblxuXHRcdFx0cmV0dXJuIGRpc3Bvc2FibGVzO1xuXHRcdH0sXG5cdFx0Z2V0V2luZG93cygpOiBJdGVyYWJsZTxJUmVnaXN0ZXJlZENvZGVXaW5kb3c+IHtcblx0XHRcdHJldHVybiB3aW5kb3dzLnZhbHVlcygpO1xuXHRcdH0sXG5cdFx0Z2V0V2luZG93c0NvdW50KCk6IG51bWJlciB7XG5cdFx0XHRyZXR1cm4gd2luZG93cy5zaXplO1xuXHRcdH0sXG5cdFx0Z2V0V2luZG93SWQodGFyZ2V0V2luZG93OiBXaW5kb3cpOiBudW1iZXIge1xuXHRcdFx0cmV0dXJuICh0YXJnZXRXaW5kb3cgYXMgQ29kZVdpbmRvdykudnNjb2RlV2luZG93SWQ7XG5cdFx0fSxcblx0XHRoYXNXaW5kb3cod2luZG93SWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdFx0cmV0dXJuIHdpbmRvd3MuaGFzKHdpbmRvd0lkKTtcblx0XHR9LFxuXHRcdGdldFdpbmRvd0J5SWQsXG5cdFx0Z2V0V2luZG93KGU6IE5vZGUgfCBVSUV2ZW50IHwgdW5kZWZpbmVkIHwgbnVsbCk6IENvZGVXaW5kb3cge1xuXHRcdFx0Y29uc3QgY2FuZGlkYXRlTm9kZSA9IGUgYXMgTm9kZSB8IHVuZGVmaW5lZCB8IG51bGw7XG5cdFx0XHRpZiAoY2FuZGlkYXRlTm9kZT8ub3duZXJEb2N1bWVudD8uZGVmYXVsdFZpZXcpIHtcblx0XHRcdFx0cmV0dXJuIGNhbmRpZGF0ZU5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy53aW5kb3cgYXMgQ29kZVdpbmRvdztcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgY2FuZGlkYXRlRXZlbnQgPSBlIGFzIFVJRXZlbnQgfCB1bmRlZmluZWQgfCBudWxsO1xuXHRcdFx0aWYgKGNhbmRpZGF0ZUV2ZW50Py52aWV3KSB7XG5cdFx0XHRcdHJldHVybiBjYW5kaWRhdGVFdmVudC52aWV3LndpbmRvdyBhcyBDb2RlV2luZG93O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWFpbldpbmRvdztcblx0XHR9LFxuXHRcdGdldERvY3VtZW50KGU6IE5vZGUgfCBVSUV2ZW50IHwgdW5kZWZpbmVkIHwgbnVsbCk6IERvY3VtZW50IHtcblx0XHRcdGNvbnN0IGNhbmRpZGF0ZU5vZGUgPSBlIGFzIE5vZGUgfCB1bmRlZmluZWQgfCBudWxsO1xuXHRcdFx0cmV0dXJuIGdldFdpbmRvdyhjYW5kaWRhdGVOb2RlKS5kb2N1bWVudDtcblx0XHR9XG5cdH07XG59KSgpO1xuXG4vLyNlbmRyZWdpb25cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTm9kZShub2RlOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuXHR3aGlsZSAobm9kZS5maXJzdENoaWxkKSB7XG5cdFx0bm9kZS5maXJzdENoaWxkLnJlbW92ZSgpO1xuXHR9XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTm9kZVJlY3Vyc2l2ZWx5KGRvbU5vZGU6IENoaWxkTm9kZSkge1xuXHR3aGlsZSAoZG9tTm9kZS5maXJzdENoaWxkKSB7XG5cdFx0Y29uc3QgZWxlbWVudCA9IGRvbU5vZGUuZmlyc3RDaGlsZDtcblx0XHRlbGVtZW50LnJlbW92ZSgpO1xuXHRcdGNsZWFyTm9kZVJlY3Vyc2l2ZWx5KGVsZW1lbnQpO1xuXHR9XG59XG5cblxuY2xhc3MgRG9tTGlzdGVuZXIgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XG5cblx0cHJpdmF0ZSBfaGFuZGxlcjogKGU6IGFueSkgPT4gdm9pZDtcblx0cHJpdmF0ZSBfbm9kZTogRXZlbnRUYXJnZXQ7XG5cdHByaXZhdGUgcmVhZG9ubHkgX3R5cGU6IHN0cmluZztcblx0cHJpdmF0ZSByZWFkb25seSBfb3B0aW9uczogYm9vbGVhbiB8IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zO1xuXG5cdGNvbnN0cnVjdG9yKG5vZGU6IEV2ZW50VGFyZ2V0LCB0eXBlOiBzdHJpbmcsIGhhbmRsZXI6IChlOiBhbnkpID0+IHZvaWQsIG9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpIHtcblx0XHR0aGlzLl9ub2RlID0gbm9kZTtcblx0XHR0aGlzLl90eXBlID0gdHlwZTtcblx0XHR0aGlzLl9oYW5kbGVyID0gaGFuZGxlcjtcblx0XHR0aGlzLl9vcHRpb25zID0gKG9wdGlvbnMgfHwgZmFsc2UpO1xuXHRcdHRoaXMuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl90eXBlLCB0aGlzLl9oYW5kbGVyLCB0aGlzLl9vcHRpb25zKTtcblx0fVxuXG5cdGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9oYW5kbGVyKSB7XG5cdFx0XHQvLyBBbHJlYWR5IGRpc3Bvc2VkXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5fbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3R5cGUsIHRoaXMuX2hhbmRsZXIsIHRoaXMuX29wdGlvbnMpO1xuXG5cdFx0Ly8gUHJldmVudCBsZWFrZXJzIGZyb20gaG9sZGluZyBvbiB0byB0aGUgZG9tIG9yIGhhbmRsZXIgZnVuY1xuXHRcdHRoaXMuX25vZGUgPSBudWxsITtcblx0XHR0aGlzLl9oYW5kbGVyID0gbnVsbCE7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3Bvc2FibGVMaXN0ZW5lcjxLIGV4dGVuZHMga2V5b2YgR2xvYmFsRXZlbnRIYW5kbGVyc0V2ZW50TWFwPihub2RlOiBFdmVudFRhcmdldCwgdHlwZTogSywgaGFuZGxlcjogKGV2ZW50OiBHbG9iYWxFdmVudEhhbmRsZXJzRXZlbnRNYXBbS10pID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGU7XG5leHBvcnQgZnVuY3Rpb24gYWRkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGU6IEV2ZW50VGFyZ2V0LCB0eXBlOiBzdHJpbmcsIGhhbmRsZXI6IChldmVudDogYW55KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlO1xuZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3Bvc2FibGVMaXN0ZW5lcihub2RlOiBFdmVudFRhcmdldCwgdHlwZTogc3RyaW5nLCBoYW5kbGVyOiAoZXZlbnQ6IGFueSkgPT4gdm9pZCwgb3B0aW9uczogQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiBJRGlzcG9zYWJsZTtcbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlTGlzdGVuZXIobm9kZTogRXZlbnRUYXJnZXQsIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBhbnkpID0+IHZvaWQsIHVzZUNhcHR1cmVPck9wdGlvbnM/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiBJRGlzcG9zYWJsZSB7XG5cdHJldHVybiBuZXcgRG9tTGlzdGVuZXIobm9kZSwgdHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZU9yT3B0aW9ucyk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyU2lnbmF0dXJlIHtcblx0KG5vZGU6IEhUTUxFbGVtZW50LCB0eXBlOiAnY2xpY2snLCBoYW5kbGVyOiAoZXZlbnQ6IElNb3VzZUV2ZW50KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlO1xuXHQobm9kZTogSFRNTEVsZW1lbnQsIHR5cGU6ICdtb3VzZWRvd24nLCBoYW5kbGVyOiAoZXZlbnQ6IElNb3VzZUV2ZW50KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlO1xuXHQobm9kZTogSFRNTEVsZW1lbnQsIHR5cGU6ICdrZXlkb3duJywgaGFuZGxlcjogKGV2ZW50OiBJS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiBJRGlzcG9zYWJsZTtcblx0KG5vZGU6IEhUTUxFbGVtZW50LCB0eXBlOiAna2V5cHJlc3MnLCBoYW5kbGVyOiAoZXZlbnQ6IElLZXlib2FyZEV2ZW50KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlO1xuXHQobm9kZTogSFRNTEVsZW1lbnQsIHR5cGU6ICdrZXl1cCcsIGhhbmRsZXI6IChldmVudDogSUtleWJvYXJkRXZlbnQpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGU7XG5cdChub2RlOiBIVE1MRWxlbWVudCwgdHlwZTogJ3BvaW50ZXJkb3duJywgaGFuZGxlcjogKGV2ZW50OiBQb2ludGVyRXZlbnQpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGU7XG5cdChub2RlOiBIVE1MRWxlbWVudCwgdHlwZTogJ3BvaW50ZXJtb3ZlJywgaGFuZGxlcjogKGV2ZW50OiBQb2ludGVyRXZlbnQpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGU7XG5cdChub2RlOiBIVE1MRWxlbWVudCwgdHlwZTogJ3BvaW50ZXJ1cCcsIGhhbmRsZXI6IChldmVudDogUG9pbnRlckV2ZW50KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlO1xuXHQobm9kZTogSFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBhbnkpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGU7XG59XG5mdW5jdGlvbiBfd3JhcEFzU3RhbmRhcmRNb3VzZUV2ZW50KHRhcmdldFdpbmRvdzogV2luZG93LCBoYW5kbGVyOiAoZTogSU1vdXNlRXZlbnQpID0+IHZvaWQpOiAoZTogTW91c2VFdmVudCkgPT4gdm9pZCB7XG5cdHJldHVybiBmdW5jdGlvbiAoZTogTW91c2VFdmVudCkge1xuXHRcdHJldHVybiBoYW5kbGVyKG5ldyBTdGFuZGFyZE1vdXNlRXZlbnQodGFyZ2V0V2luZG93LCBlKSk7XG5cdH07XG59XG5mdW5jdGlvbiBfd3JhcEFzU3RhbmRhcmRLZXlib2FyZEV2ZW50KGhhbmRsZXI6IChlOiBJS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCk6IChlOiBLZXlib2FyZEV2ZW50KSA9PiB2b2lkIHtcblx0cmV0dXJuIGZ1bmN0aW9uIChlOiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0cmV0dXJuIGhhbmRsZXIobmV3IFN0YW5kYXJkS2V5Ym9hcmRFdmVudChlKSk7XG5cdH07XG59XG5leHBvcnQgY29uc3QgYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXI6IElBZGRTdGFuZGFyZERpc3Bvc2FibGVMaXN0ZW5lclNpZ25hdHVyZSA9IGZ1bmN0aW9uIGFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGU6IEhUTUxFbGVtZW50LCB0eXBlOiBzdHJpbmcsIGhhbmRsZXI6IChldmVudDogYW55KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcblx0bGV0IHdyYXBIYW5kbGVyID0gaGFuZGxlcjtcblxuXHRpZiAodHlwZSA9PT0gJ2NsaWNrJyB8fCB0eXBlID09PSAnbW91c2Vkb3duJyB8fCB0eXBlID09PSAnY29udGV4dG1lbnUnKSB7XG5cdFx0d3JhcEhhbmRsZXIgPSBfd3JhcEFzU3RhbmRhcmRNb3VzZUV2ZW50KGdldFdpbmRvdyhub2RlKSwgaGFuZGxlcik7XG5cdH0gZWxzZSBpZiAodHlwZSA9PT0gJ2tleWRvd24nIHx8IHR5cGUgPT09ICdrZXlwcmVzcycgfHwgdHlwZSA9PT0gJ2tleXVwJykge1xuXHRcdHdyYXBIYW5kbGVyID0gX3dyYXBBc1N0YW5kYXJkS2V5Ym9hcmRFdmVudChoYW5kbGVyKTtcblx0fVxuXG5cdHJldHVybiBhZGREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgdHlwZSwgd3JhcEhhbmRsZXIsIHVzZUNhcHR1cmUpO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFN0YW5kYXJkRGlzcG9zYWJsZUdlbmVyaWNNb3VzZURvd25MaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGU6IEhUTUxFbGVtZW50LCBoYW5kbGVyOiAoZXZlbnQ6IGFueSkgPT4gdm9pZCwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiBJRGlzcG9zYWJsZSB7XG5cdGNvbnN0IHdyYXBIYW5kbGVyID0gX3dyYXBBc1N0YW5kYXJkTW91c2VFdmVudChnZXRXaW5kb3cobm9kZSksIGhhbmRsZXIpO1xuXG5cdHJldHVybiBhZGREaXNwb3NhYmxlR2VuZXJpY01vdXNlRG93bkxpc3RlbmVyKG5vZGUsIHdyYXBIYW5kbGVyLCB1c2VDYXB0dXJlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRTdGFuZGFyZERpc3Bvc2FibGVHZW5lcmljTW91c2VVcExpc3RlbmVyID0gZnVuY3Rpb24gYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIobm9kZTogSFRNTEVsZW1lbnQsIGhhbmRsZXI6IChldmVudDogYW55KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcblx0Y29uc3Qgd3JhcEhhbmRsZXIgPSBfd3JhcEFzU3RhbmRhcmRNb3VzZUV2ZW50KGdldFdpbmRvdyhub2RlKSwgaGFuZGxlcik7XG5cblx0cmV0dXJuIGFkZERpc3Bvc2FibGVHZW5lcmljTW91c2VVcExpc3RlbmVyKG5vZGUsIHdyYXBIYW5kbGVyLCB1c2VDYXB0dXJlKTtcbn07XG5leHBvcnQgZnVuY3Rpb24gYWRkRGlzcG9zYWJsZUdlbmVyaWNNb3VzZURvd25MaXN0ZW5lcihub2RlOiBFdmVudFRhcmdldCwgaGFuZGxlcjogKGV2ZW50OiBhbnkpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuXHRyZXR1cm4gYWRkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIHBsYXRmb3JtLmlzSU9TICYmIEJyb3dzZXJGZWF0dXJlcy5wb2ludGVyRXZlbnRzID8gRXZlbnRUeXBlLlBPSU5URVJfRE9XTiA6IEV2ZW50VHlwZS5NT1VTRV9ET1dOLCBoYW5kbGVyLCB1c2VDYXB0dXJlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3Bvc2FibGVHZW5lcmljTW91c2VNb3ZlTGlzdGVuZXIobm9kZTogRXZlbnRUYXJnZXQsIGhhbmRsZXI6IChldmVudDogYW55KSA9PiB2b2lkLCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IElEaXNwb3NhYmxlIHtcblx0cmV0dXJuIGFkZERpc3Bvc2FibGVMaXN0ZW5lcihub2RlLCBwbGF0Zm9ybS5pc0lPUyAmJiBCcm93c2VyRmVhdHVyZXMucG9pbnRlckV2ZW50cyA/IEV2ZW50VHlwZS5QT0lOVEVSX01PVkUgOiBFdmVudFR5cGUuTU9VU0VfTU9WRSwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGREaXNwb3NhYmxlR2VuZXJpY01vdXNlVXBMaXN0ZW5lcihub2RlOiBFdmVudFRhcmdldCwgaGFuZGxlcjogKGV2ZW50OiBhbnkpID0+IHZvaWQsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogSURpc3Bvc2FibGUge1xuXHRyZXR1cm4gYWRkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIHBsYXRmb3JtLmlzSU9TICYmIEJyb3dzZXJGZWF0dXJlcy5wb2ludGVyRXZlbnRzID8gRXZlbnRUeXBlLlBPSU5URVJfVVAgOiBFdmVudFR5cGUuTU9VU0VfVVAsIGhhbmRsZXIsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIHRoZSBuZXh0IHRpbWUgdGhlIGJyb3dzZXIgaXMgaWRsZSwgcmV0dXJuaW5nIGFuXG4gKiB7QGxpbmsgSURpc3Bvc2FibGV9IHRoYXQgd2lsbCBjYW5jZWwgdGhlIGNhbGxiYWNrIHdoZW4gZGlzcG9zZWQuIFRoaXMgd3JhcHNcbiAqIFtyZXF1ZXN0SWRsZUNhbGxiYWNrXSBzbyBpdCB3aWxsIGZhbGxiYWNrIHRvIFtzZXRUaW1lb3V0XSBpZiB0aGUgZW52aXJvbm1lbnRcbiAqIGRvZXNuJ3Qgc3VwcG9ydCBpdC5cbiAqXG4gKiBAcGFyYW0gdGFyZ2V0V2luZG93IFRoZSB3aW5kb3cgZm9yIHdoaWNoIHRvIHJ1biB0aGUgaWRsZSBjYWxsYmFja1xuICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW4gd2hlbiBpZGxlLCB0aGlzIGluY2x1ZGVzIGFuXG4gKiBbSWRsZURlYWRsaW5lXSB0aGF0IHByb3ZpZGVzIHRoZSB0aW1lIGFsbG90ZWQgZm9yIHRoZSBpZGxlIGNhbGxiYWNrIGJ5IHRoZVxuICogYnJvd3Nlci4gTm90IHJlc3BlY3RpbmcgdGhpcyBkZWFkbGluZSB3aWxsIHJlc3VsdCBpbiBhIGRlZ3JhZGVkIHVzZXJcbiAqIGV4cGVyaWVuY2UuXG4gKiBAcGFyYW0gdGltZW91dCBBIHRpbWVvdXQgYXQgd2hpY2ggcG9pbnQgdG8gcXVldWUgbm8gbG9uZ2VyIHdhaXQgZm9yIGFuIGlkbGVcbiAqIGNhbGxiYWNrIGJ1dCBxdWV1ZSBpdCBvbiB0aGUgcmVndWxhciBldmVudCBsb29wIChsaWtlIHNldFRpbWVvdXQpLiBUeXBpY2FsbHlcbiAqIHRoaXMgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICpcbiAqIFtJZGxlRGVhZGxpbmVdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSWRsZURlYWRsaW5lXG4gKiBbcmVxdWVzdElkbGVDYWxsYmFja106IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvcmVxdWVzdElkbGVDYWxsYmFja1xuICogW3NldFRpbWVvdXRdOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2luZG93L3NldFRpbWVvdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJ1bldoZW5XaW5kb3dJZGxlKHRhcmdldFdpbmRvdzogV2luZG93IHwgdHlwZW9mIGdsb2JhbFRoaXMsIGNhbGxiYWNrOiAoaWRsZTogSWRsZURlYWRsaW5lKSA9PiB2b2lkLCB0aW1lb3V0PzogbnVtYmVyKTogSURpc3Bvc2FibGUge1xuXHRyZXR1cm4gX3J1bldoZW5JZGxlKHRhcmdldFdpbmRvdywgY2FsbGJhY2ssIHRpbWVvdXQpO1xufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBcImlkbGUtdW50aWwtdXJnZW50XCItc3RyYXRlZ3kgYXMgaW50cm9kdWNlZFxuICogaGVyZTogaHR0cHM6Ly9waGlsaXB3YWx0b24uY29tL2FydGljbGVzL2lkbGUtdW50aWwtdXJnZW50L1xuICovXG5leHBvcnQgY2xhc3MgV2luZG93SWRsZVZhbHVlPFQ+IGV4dGVuZHMgQWJzdHJhY3RJZGxlVmFsdWU8VD4ge1xuXHRjb25zdHJ1Y3Rvcih0YXJnZXRXaW5kb3c6IFdpbmRvdyB8IHR5cGVvZiBnbG9iYWxUaGlzLCBleGVjdXRvcjogKCkgPT4gVCkge1xuXHRcdHN1cGVyKHRhcmdldFdpbmRvdywgZXhlY3V0b3IpO1xuXHR9XG59XG5cbi8qKlxuICogU2NoZWR1bGUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLlxuICogVGhpcyBhbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byByZWdpc3RlciBjYWxsYmFja3MgdGhhdCBzaG91bGQgcnVuIGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZS5cbiAqIElmIGN1cnJlbnRseSBpbiBhbiBhbmltYXRpb24gZnJhbWUsIGBydW5uZXJgIHdpbGwgYmUgZXhlY3V0ZWQgaW1tZWRpYXRlbHkuXG4gKiBAcmV0dXJuIHRva2VuIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgcnVubmVyIChvbmx5IGlmIGBydW5uZXJgIHdhcyBub3QgZXhlY3V0ZWQgaW1tZWRpYXRlbHkpLlxuICovXG5leHBvcnQgbGV0IHJ1bkF0VGhpc09yU2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTogKHRhcmdldFdpbmRvdzogV2luZG93LCBydW5uZXI6ICgpID0+IHZvaWQsIHByaW9yaXR5PzogbnVtYmVyKSA9PiBJRGlzcG9zYWJsZTtcbi8qKlxuICogU2NoZWR1bGUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLlxuICogVGhpcyBhbGxvd3MgbXVsdGlwbGUgcGFydGllcyB0byByZWdpc3RlciBjYWxsYmFja3MgdGhhdCBzaG91bGQgcnVuIGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZS5cbiAqIElmIGN1cnJlbnRseSBpbiBhbiBhbmltYXRpb24gZnJhbWUsIGBydW5uZXJgIHdpbGwgYmUgZXhlY3V0ZWQgYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lLlxuICogQHJldHVybiB0b2tlbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIHJ1bm5lci5cbiAqL1xuZXhwb3J0IGxldCBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lOiAodGFyZ2V0V2luZG93OiBXaW5kb3csIHJ1bm5lcjogKCkgPT4gdm9pZCwgcHJpb3JpdHk/OiBudW1iZXIpID0+IElEaXNwb3NhYmxlO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlzcG9zYWJsZVdpbmRvd0ludGVydmFsKHRhcmdldFdpbmRvdzogV2luZG93LCBoYW5kbGVyOiAoKSA9PiB2b2lkIHwgYm9vbGVhbiAvKiBzdG9wIGludGVydmFsICovIHwgUHJvbWlzZTx1bmtub3duPiwgaW50ZXJ2YWw6IG51bWJlciwgaXRlcmF0aW9ucz86IG51bWJlcik6IElEaXNwb3NhYmxlIHtcblx0bGV0IGl0ZXJhdGlvbiA9IDA7XG5cdGNvbnN0IHRpbWVyID0gdGFyZ2V0V2luZG93LnNldEludGVydmFsKCgpID0+IHtcblx0XHRpdGVyYXRpb24rKztcblx0XHRpZiAoKHR5cGVvZiBpdGVyYXRpb25zID09PSAnbnVtYmVyJyAmJiBpdGVyYXRpb24gPj0gaXRlcmF0aW9ucykgfHwgaGFuZGxlcigpID09PSB0cnVlKSB7XG5cdFx0XHRkaXNwb3NhYmxlLmRpc3Bvc2UoKTtcblx0XHR9XG5cdH0sIGludGVydmFsKTtcblx0Y29uc3QgZGlzcG9zYWJsZSA9IHRvRGlzcG9zYWJsZSgoKSA9PiB7XG5cdFx0dGFyZ2V0V2luZG93LmNsZWFySW50ZXJ2YWwodGltZXIpO1xuXHR9KTtcblx0cmV0dXJuIGRpc3Bvc2FibGU7XG59XG5cbmV4cG9ydCBjbGFzcyBXaW5kb3dJbnRlcnZhbFRpbWVyIGV4dGVuZHMgSW50ZXJ2YWxUaW1lciB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBkZWZhdWx0VGFyZ2V0PzogV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXM7XG5cblx0LyoqXG5cdCAqXG5cdCAqIEBwYXJhbSBub2RlIFRoZSBvcHRpb25hbCBub2RlIGZyb20gd2hpY2ggdGhlIHRhcmdldCB3aW5kb3cgaXMgZGV0ZXJtaW5lZFxuXHQgKi9cblx0Y29uc3RydWN0b3Iobm9kZT86IE5vZGUpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuZGVmYXVsdFRhcmdldCA9IG5vZGUgJiYgZ2V0V2luZG93KG5vZGUpO1xuXHR9XG5cblx0b3ZlcnJpZGUgY2FuY2VsQW5kU2V0KHJ1bm5lcjogKCkgPT4gdm9pZCwgaW50ZXJ2YWw6IG51bWJlciwgdGFyZ2V0V2luZG93PzogV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXMpOiB2b2lkIHtcblx0XHRyZXR1cm4gc3VwZXIuY2FuY2VsQW5kU2V0KHJ1bm5lciwgaW50ZXJ2YWwsIHRhcmdldFdpbmRvdyA/PyB0aGlzLmRlZmF1bHRUYXJnZXQpO1xuXHR9XG59XG5cbmNsYXNzIEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgX3J1bm5lcjogKCkgPT4gdm9pZDtcblx0cHVibGljIHByaW9yaXR5OiBudW1iZXI7XG5cdHByaXZhdGUgX2NhbmNlbGVkOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKHJ1bm5lcjogKCkgPT4gdm9pZCwgcHJpb3JpdHk6IG51bWJlciA9IDApIHtcblx0XHR0aGlzLl9ydW5uZXIgPSBydW5uZXI7XG5cdFx0dGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuXHRcdHRoaXMuX2NhbmNlbGVkID0gZmFsc2U7XG5cdH1cblxuXHRkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuX2NhbmNlbGVkID0gdHJ1ZTtcblx0fVxuXG5cdGV4ZWN1dGUoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2NhbmNlbGVkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMuX3J1bm5lcigpO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG9uVW5leHBlY3RlZEVycm9yKGUpO1xuXHRcdH1cblx0fVxuXG5cdC8vIFNvcnQgYnkgcHJpb3JpdHkgKGxhcmdlc3QgdG8gbG93ZXN0KVxuXHRzdGF0aWMgc29ydChhOiBBbmltYXRpb25GcmFtZVF1ZXVlSXRlbSwgYjogQW5pbWF0aW9uRnJhbWVRdWV1ZUl0ZW0pOiBudW1iZXIge1xuXHRcdHJldHVybiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcblx0fVxufVxuXG4oZnVuY3Rpb24gKCkge1xuXHQvKipcblx0ICogVGhlIHJ1bm5lcnMgc2NoZWR1bGVkIGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZVxuXHQgKi9cblx0Y29uc3QgTkVYVF9RVUVVRSA9IG5ldyBNYXA8bnVtYmVyIC8qIHdpbmRvdyBJRCAqLywgQW5pbWF0aW9uRnJhbWVRdWV1ZUl0ZW1bXT4oKTtcblx0LyoqXG5cdCAqIFRoZSBydW5uZXJzIHNjaGVkdWxlZCBhdCB0aGUgY3VycmVudCBhbmltYXRpb24gZnJhbWVcblx0ICovXG5cdGNvbnN0IENVUlJFTlRfUVVFVUUgPSBuZXcgTWFwPG51bWJlciAvKiB3aW5kb3cgSUQgKi8sIEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtW10+KCk7XG5cdC8qKlxuXHQgKiBBIGZsYWcgdG8ga2VlcCB0cmFjayBpZiB0aGUgbmF0aXZlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB3YXMgYWxyZWFkeSBjYWxsZWRcblx0ICovXG5cdGNvbnN0IGFuaW1GcmFtZVJlcXVlc3RlZCA9IG5ldyBNYXA8bnVtYmVyIC8qIHdpbmRvdyBJRCAqLywgYm9vbGVhbj4oKTtcblx0LyoqXG5cdCAqIEEgZmxhZyB0byBpbmRpY2F0ZSBpZiBjdXJyZW50bHkgaGFuZGxpbmcgYSBuYXRpdmUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGNhbGxiYWNrXG5cdCAqL1xuXHRjb25zdCBpbkFuaW1hdGlvbkZyYW1lUnVubmVyID0gbmV3IE1hcDxudW1iZXIgLyogd2luZG93IElEICovLCBib29sZWFuPigpO1xuXG5cdGNvbnN0IGFuaW1hdGlvbkZyYW1lUnVubmVyID0gKHRhcmdldFdpbmRvd0lkOiBudW1iZXIpID0+IHtcblx0XHRhbmltRnJhbWVSZXF1ZXN0ZWQuc2V0KHRhcmdldFdpbmRvd0lkLCBmYWxzZSk7XG5cblx0XHRjb25zdCBjdXJyZW50UXVldWUgPSBORVhUX1FVRVVFLmdldCh0YXJnZXRXaW5kb3dJZCkgPz8gW107XG5cdFx0Q1VSUkVOVF9RVUVVRS5zZXQodGFyZ2V0V2luZG93SWQsIGN1cnJlbnRRdWV1ZSk7XG5cdFx0TkVYVF9RVUVVRS5zZXQodGFyZ2V0V2luZG93SWQsIFtdKTtcblxuXHRcdGluQW5pbWF0aW9uRnJhbWVSdW5uZXIuc2V0KHRhcmdldFdpbmRvd0lkLCB0cnVlKTtcblx0XHR3aGlsZSAoY3VycmVudFF1ZXVlLmxlbmd0aCA+IDApIHtcblx0XHRcdGN1cnJlbnRRdWV1ZS5zb3J0KEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtLnNvcnQpO1xuXHRcdFx0Y29uc3QgdG9wID0gY3VycmVudFF1ZXVlLnNoaWZ0KCkhO1xuXHRcdFx0dG9wLmV4ZWN1dGUoKTtcblx0XHR9XG5cdFx0aW5BbmltYXRpb25GcmFtZVJ1bm5lci5zZXQodGFyZ2V0V2luZG93SWQsIGZhbHNlKTtcblx0fTtcblxuXHRzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lID0gKHRhcmdldFdpbmRvdzogV2luZG93LCBydW5uZXI6ICgpID0+IHZvaWQsIHByaW9yaXR5OiBudW1iZXIgPSAwKSA9PiB7XG5cdFx0Y29uc3QgdGFyZ2V0V2luZG93SWQgPSBnZXRXaW5kb3dJZCh0YXJnZXRXaW5kb3cpO1xuXHRcdGNvbnN0IGl0ZW0gPSBuZXcgQW5pbWF0aW9uRnJhbWVRdWV1ZUl0ZW0ocnVubmVyLCBwcmlvcml0eSk7XG5cblx0XHRsZXQgbmV4dFF1ZXVlID0gTkVYVF9RVUVVRS5nZXQodGFyZ2V0V2luZG93SWQpO1xuXHRcdGlmICghbmV4dFF1ZXVlKSB7XG5cdFx0XHRuZXh0UXVldWUgPSBbXTtcblx0XHRcdE5FWFRfUVVFVUUuc2V0KHRhcmdldFdpbmRvd0lkLCBuZXh0UXVldWUpO1xuXHRcdH1cblx0XHRuZXh0UXVldWUucHVzaChpdGVtKTtcblxuXHRcdGlmICghYW5pbUZyYW1lUmVxdWVzdGVkLmdldCh0YXJnZXRXaW5kb3dJZCkpIHtcblx0XHRcdGFuaW1GcmFtZVJlcXVlc3RlZC5zZXQodGFyZ2V0V2luZG93SWQsIHRydWUpO1xuXHRcdFx0dGFyZ2V0V2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiBhbmltYXRpb25GcmFtZVJ1bm5lcih0YXJnZXRXaW5kb3dJZCkpO1xuXHRcdH1cblxuXHRcdHJldHVybiBpdGVtO1xuXHR9O1xuXG5cdHJ1bkF0VGhpc09yU2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSA9ICh0YXJnZXRXaW5kb3c6IFdpbmRvdywgcnVubmVyOiAoKSA9PiB2b2lkLCBwcmlvcml0eT86IG51bWJlcikgPT4ge1xuXHRcdGNvbnN0IHRhcmdldFdpbmRvd0lkID0gZ2V0V2luZG93SWQodGFyZ2V0V2luZG93KTtcblx0XHRpZiAoaW5BbmltYXRpb25GcmFtZVJ1bm5lci5nZXQodGFyZ2V0V2luZG93SWQpKSB7XG5cdFx0XHRjb25zdCBpdGVtID0gbmV3IEFuaW1hdGlvbkZyYW1lUXVldWVJdGVtKHJ1bm5lciwgcHJpb3JpdHkpO1xuXHRcdFx0bGV0IGN1cnJlbnRRdWV1ZSA9IENVUlJFTlRfUVVFVUUuZ2V0KHRhcmdldFdpbmRvd0lkKTtcblx0XHRcdGlmICghY3VycmVudFF1ZXVlKSB7XG5cdFx0XHRcdGN1cnJlbnRRdWV1ZSA9IFtdO1xuXHRcdFx0XHRDVVJSRU5UX1FVRVVFLnNldCh0YXJnZXRXaW5kb3dJZCwgY3VycmVudFF1ZXVlKTtcblx0XHRcdH1cblx0XHRcdGN1cnJlbnRRdWV1ZS5wdXNoKGl0ZW0pO1xuXHRcdFx0cmV0dXJuIGl0ZW07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKHRhcmdldFdpbmRvdywgcnVubmVyLCBwcmlvcml0eSk7XG5cdFx0fVxuXHR9O1xufSkoKTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmUodGFyZ2V0V2luZG93OiBXaW5kb3csIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogSURpc3Bvc2FibGUge1xuXHRyZXR1cm4gc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSh0YXJnZXRXaW5kb3csIGNhbGxiYWNrLCAxMDAwMCAvKiBtdXN0IGJlIGVhcmx5ICovKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vZGlmeSh0YXJnZXRXaW5kb3c6IFdpbmRvdywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiBJRGlzcG9zYWJsZSB7XG5cdHJldHVybiBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKHRhcmdldFdpbmRvdywgY2FsbGJhY2ssIC0xMDAwMCAvKiBtdXN0IGJlIGxhdGUgKi8pO1xufVxuXG4vKipcbiAqIEFkZCBhIHRocm90dGxlZCBsaXN0ZW5lci4gYGhhbmRsZXJgIGlzIGZpcmVkIGF0IG1vc3QgZXZlcnkgOC4zMzMzM21zIG9yIHdpdGggdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lIChpZiBicm93c2VyIHN1cHBvcnRzIGl0KS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJRXZlbnRNZXJnZXI8UiwgRT4ge1xuXHQobGFzdEV2ZW50OiBSIHwgbnVsbCwgY3VycmVudEV2ZW50OiBFKTogUjtcbn1cblxuY29uc3QgTUlOSU1VTV9USU1FX01TID0gODtcbmNvbnN0IERFRkFVTFRfRVZFTlRfTUVSR0VSOiBJRXZlbnRNZXJnZXI8RXZlbnQsIEV2ZW50PiA9IGZ1bmN0aW9uIChsYXN0RXZlbnQ6IEV2ZW50IHwgbnVsbCwgY3VycmVudEV2ZW50OiBFdmVudCkge1xuXHRyZXR1cm4gY3VycmVudEV2ZW50O1xufTtcblxuY2xhc3MgVGltZW91dFRocm90dGxlZERvbUxpc3RlbmVyPFIsIEUgZXh0ZW5kcyBFdmVudD4gZXh0ZW5kcyBEaXNwb3NhYmxlIHtcblxuXHRjb25zdHJ1Y3Rvcihub2RlOiBhbnksIHR5cGU6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBSKSA9PiB2b2lkLCBldmVudE1lcmdlcjogSUV2ZW50TWVyZ2VyPFIsIEU+ID0gPGFueT5ERUZBVUxUX0VWRU5UX01FUkdFUiwgbWluaW11bVRpbWVNczogbnVtYmVyID0gTUlOSU1VTV9USU1FX01TKSB7XG5cdFx0c3VwZXIoKTtcblxuXHRcdGxldCBsYXN0RXZlbnQ6IFIgfCBudWxsID0gbnVsbDtcblx0XHRsZXQgbGFzdEhhbmRsZXJUaW1lID0gMDtcblx0XHRjb25zdCB0aW1lb3V0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IFRpbWVvdXRUaW1lcigpKTtcblxuXHRcdGNvbnN0IGludm9rZUhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRsYXN0SGFuZGxlclRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXHRcdFx0aGFuZGxlcig8Uj5sYXN0RXZlbnQpO1xuXHRcdFx0bGFzdEV2ZW50ID0gbnVsbDtcblx0XHR9O1xuXG5cdFx0dGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKG5vZGUsIHR5cGUsIChlKSA9PiB7XG5cblx0XHRcdGxhc3RFdmVudCA9IGV2ZW50TWVyZ2VyKGxhc3RFdmVudCwgZSk7XG5cdFx0XHRjb25zdCBlbGFwc2VkVGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSBsYXN0SGFuZGxlclRpbWU7XG5cblx0XHRcdGlmIChlbGFwc2VkVGltZSA+PSBtaW5pbXVtVGltZU1zKSB7XG5cdFx0XHRcdHRpbWVvdXQuY2FuY2VsKCk7XG5cdFx0XHRcdGludm9rZUhhbmRsZXIoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRpbWVvdXQuc2V0SWZOb3RTZXQoaW52b2tlSGFuZGxlciwgbWluaW11bVRpbWVNcyAtIGVsYXBzZWRUaW1lKTtcblx0XHRcdH1cblx0XHR9KSk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZERpc3Bvc2FibGVUaHJvdHRsZWRMaXN0ZW5lcjxSLCBFIGV4dGVuZHMgRXZlbnQgPSBFdmVudD4obm9kZTogYW55LCB0eXBlOiBzdHJpbmcsIGhhbmRsZXI6IChldmVudDogUikgPT4gdm9pZCwgZXZlbnRNZXJnZXI/OiBJRXZlbnRNZXJnZXI8UiwgRT4sIG1pbmltdW1UaW1lTXM/OiBudW1iZXIpOiBJRGlzcG9zYWJsZSB7XG5cdHJldHVybiBuZXcgVGltZW91dFRocm90dGxlZERvbUxpc3RlbmVyPFIsIEU+KG5vZGUsIHR5cGUsIGhhbmRsZXIsIGV2ZW50TWVyZ2VyLCBtaW5pbXVtVGltZU1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWw6IEhUTUxFbGVtZW50KTogQ1NTU3R5bGVEZWNsYXJhdGlvbiB7XG5cdHJldHVybiBnZXRXaW5kb3coZWwpLmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xpZW50QXJlYShlbGVtZW50OiBIVE1MRWxlbWVudCwgZmFsbGJhY2s/OiBIVE1MRWxlbWVudCk6IERpbWVuc2lvbiB7XG5cdGNvbnN0IGVsV2luZG93ID0gZ2V0V2luZG93KGVsZW1lbnQpO1xuXHRjb25zdCBlbERvY3VtZW50ID0gZWxXaW5kb3cuZG9jdW1lbnQ7XG5cblx0Ly8gVHJ5IHdpdGggRE9NIGNsaWVudFdpZHRoIC8gY2xpZW50SGVpZ2h0XG5cdGlmIChlbGVtZW50ICE9PSBlbERvY3VtZW50LmJvZHkpIHtcblx0XHRyZXR1cm4gbmV3IERpbWVuc2lvbihlbGVtZW50LmNsaWVudFdpZHRoLCBlbGVtZW50LmNsaWVudEhlaWdodCk7XG5cdH1cblxuXHQvLyBJZiB2aXN1YWwgdmlldyBwb3J0IGV4aXRzIGFuZCBpdCdzIG9uIG1vYmlsZSwgaXQgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZCBvZiB3aW5kb3cgaW5uZXJXaWR0aCAvIGlubmVySGVpZ2h0LCBvciBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC8gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHRcblx0aWYgKHBsYXRmb3JtLmlzSU9TICYmIGVsV2luZG93Py52aXN1YWxWaWV3cG9ydCkge1xuXHRcdHJldHVybiBuZXcgRGltZW5zaW9uKGVsV2luZG93LnZpc3VhbFZpZXdwb3J0LndpZHRoLCBlbFdpbmRvdy52aXN1YWxWaWV3cG9ydC5oZWlnaHQpO1xuXHR9XG5cblx0Ly8gVHJ5IGlubmVyV2lkdGggLyBpbm5lckhlaWdodFxuXHRpZiAoZWxXaW5kb3c/LmlubmVyV2lkdGggJiYgZWxXaW5kb3cuaW5uZXJIZWlnaHQpIHtcblx0XHRyZXR1cm4gbmV3IERpbWVuc2lvbihlbFdpbmRvdy5pbm5lcldpZHRoLCBlbFdpbmRvdy5pbm5lckhlaWdodCk7XG5cdH1cblxuXHQvLyBUcnkgd2l0aCBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIC8gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHRcblx0aWYgKGVsRG9jdW1lbnQuYm9keSAmJiBlbERvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggJiYgZWxEb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkge1xuXHRcdHJldHVybiBuZXcgRGltZW5zaW9uKGVsRG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCwgZWxEb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCk7XG5cdH1cblxuXHQvLyBUcnkgd2l0aCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG5cdGlmIChlbERvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBlbERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCAmJiBlbERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcblx0XHRyZXR1cm4gbmV3IERpbWVuc2lvbihlbERvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgZWxEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcblx0fVxuXG5cdGlmIChmYWxsYmFjaykge1xuXHRcdHJldHVybiBnZXRDbGllbnRBcmVhKGZhbGxiYWNrKTtcblx0fVxuXG5cdHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGZpZ3VyZSBvdXQgYnJvd3NlciB3aWR0aCBhbmQgaGVpZ2h0Jyk7XG59XG5cbmNsYXNzIFNpemVVdGlscyB7XG5cdC8vIEFkYXB0ZWQgZnJvbSBXaW5KU1xuXHQvLyBDb252ZXJ0cyBhIENTUyBwb3NpdGlvbmluZyBzdHJpbmcgZm9yIHRoZSBzcGVjaWZpZWQgZWxlbWVudCB0byBwaXhlbHMuXG5cdHByaXZhdGUgc3RhdGljIGNvbnZlcnRUb1BpeGVscyhlbGVtZW50OiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZyk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBnZXREaW1lbnNpb24oZWxlbWVudDogSFRNTEVsZW1lbnQsIGNzc1Byb3BlcnR5TmFtZTogc3RyaW5nLCBqc1Byb3BlcnR5TmFtZTogc3RyaW5nKTogbnVtYmVyIHtcblx0XHRjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblx0XHRjb25zdCB2YWx1ZSA9IGNvbXB1dGVkU3R5bGUgPyBjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUoY3NzUHJvcGVydHlOYW1lKSA6ICcwJztcblx0XHRyZXR1cm4gU2l6ZVV0aWxzLmNvbnZlcnRUb1BpeGVscyhlbGVtZW50LCB2YWx1ZSk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnYm9yZGVyLWxlZnQtd2lkdGgnLCAnYm9yZGVyTGVmdFdpZHRoJyk7XG5cdH1cblx0c3RhdGljIGdldEJvcmRlclJpZ2h0V2lkdGgoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdib3JkZXItcmlnaHQtd2lkdGgnLCAnYm9yZGVyUmlnaHRXaWR0aCcpO1xuXHR9XG5cdHN0YXRpYyBnZXRCb3JkZXJUb3BXaWR0aChlbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ2JvcmRlci10b3Atd2lkdGgnLCAnYm9yZGVyVG9wV2lkdGgnKTtcblx0fVxuXHRzdGF0aWMgZ2V0Qm9yZGVyQm90dG9tV2lkdGgoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdib3JkZXItYm90dG9tLXdpZHRoJywgJ2JvcmRlckJvdHRvbVdpZHRoJyk7XG5cdH1cblxuXHRzdGF0aWMgZ2V0UGFkZGluZ0xlZnQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdwYWRkaW5nLWxlZnQnLCAncGFkZGluZ0xlZnQnKTtcblx0fVxuXHRzdGF0aWMgZ2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAncGFkZGluZy1yaWdodCcsICdwYWRkaW5nUmlnaHQnKTtcblx0fVxuXHRzdGF0aWMgZ2V0UGFkZGluZ1RvcChlbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ3BhZGRpbmctdG9wJywgJ3BhZGRpbmdUb3AnKTtcblx0fVxuXHRzdGF0aWMgZ2V0UGFkZGluZ0JvdHRvbShlbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ3BhZGRpbmctYm90dG9tJywgJ3BhZGRpbmdCb3R0b20nKTtcblx0fVxuXG5cdHN0YXRpYyBnZXRNYXJnaW5MZWZ0KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gU2l6ZVV0aWxzLmdldERpbWVuc2lvbihlbGVtZW50LCAnbWFyZ2luLWxlZnQnLCAnbWFyZ2luTGVmdCcpO1xuXHR9XG5cdHN0YXRpYyBnZXRNYXJnaW5Ub3AoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdtYXJnaW4tdG9wJywgJ21hcmdpblRvcCcpO1xuXHR9XG5cdHN0YXRpYyBnZXRNYXJnaW5SaWdodChlbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIFNpemVVdGlscy5nZXREaW1lbnNpb24oZWxlbWVudCwgJ21hcmdpbi1yaWdodCcsICdtYXJnaW5SaWdodCcpO1xuXHR9XG5cdHN0YXRpYyBnZXRNYXJnaW5Cb3R0b20oZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBTaXplVXRpbHMuZ2V0RGltZW5zaW9uKGVsZW1lbnQsICdtYXJnaW4tYm90dG9tJywgJ21hcmdpbkJvdHRvbScpO1xuXHR9XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFBvc2l0aW9uICYgRGltZW5zaW9uXG5cbmV4cG9ydCBpbnRlcmZhY2UgSURpbWVuc2lvbiB7XG5cdHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XG5cdHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgRGltZW5zaW9uIGltcGxlbWVudHMgSURpbWVuc2lvbiB7XG5cblx0c3RhdGljIHJlYWRvbmx5IE5vbmUgPSBuZXcgRGltZW5zaW9uKDAsIDApO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHJlYWRvbmx5IHdpZHRoOiBudW1iZXIsXG5cdFx0cmVhZG9ubHkgaGVpZ2h0OiBudW1iZXIsXG5cdCkgeyB9XG5cblx0d2l0aCh3aWR0aDogbnVtYmVyID0gdGhpcy53aWR0aCwgaGVpZ2h0OiBudW1iZXIgPSB0aGlzLmhlaWdodCk6IERpbWVuc2lvbiB7XG5cdFx0aWYgKHdpZHRoICE9PSB0aGlzLndpZHRoIHx8IGhlaWdodCAhPT0gdGhpcy5oZWlnaHQpIHtcblx0XHRcdHJldHVybiBuZXcgRGltZW5zaW9uKHdpZHRoLCBoZWlnaHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdH1cblxuXHRzdGF0aWMgaXMob2JqOiB1bmtub3duKTogb2JqIGlzIElEaW1lbnNpb24ge1xuXHRcdHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgKDxJRGltZW5zaW9uPm9iaikuaGVpZ2h0ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgKDxJRGltZW5zaW9uPm9iaikud2lkdGggPT09ICdudW1iZXInO1xuXHR9XG5cblx0c3RhdGljIGxpZnQob2JqOiBJRGltZW5zaW9uKTogRGltZW5zaW9uIHtcblx0XHRpZiAob2JqIGluc3RhbmNlb2YgRGltZW5zaW9uKSB7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gbmV3IERpbWVuc2lvbihvYmoud2lkdGgsIG9iai5oZWlnaHQpO1xuXHRcdH1cblx0fVxuXG5cdHN0YXRpYyBlcXVhbHMoYTogRGltZW5zaW9uIHwgdW5kZWZpbmVkLCBiOiBEaW1lbnNpb24gfCB1bmRlZmluZWQpOiBib29sZWFuIHtcblx0XHRpZiAoYSA9PT0gYikge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdGlmICghYSB8fCAhYikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gYS53aWR0aCA9PT0gYi53aWR0aCAmJiBhLmhlaWdodCA9PT0gYi5oZWlnaHQ7XG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRG9tUG9zaXRpb24ge1xuXHRyZWFkb25seSBsZWZ0OiBudW1iZXI7XG5cdHJlYWRvbmx5IHRvcDogbnVtYmVyO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wTGVmdE9mZnNldChlbGVtZW50OiBIVE1MRWxlbWVudCk6IElEb21Qb3NpdGlvbiB7XG5cdC8vIEFkYXB0ZWQgZnJvbSBXaW5KUy5VdGlsaXRpZXMuZ2V0UG9zaXRpb25cblx0Ly8gYW5kIGFkZGVkIGJvcmRlcnMgdG8gdGhlIG1peFxuXG5cdGxldCBvZmZzZXRQYXJlbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudDtcblx0bGV0IHRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xuXHRsZXQgbGVmdCA9IGVsZW1lbnQub2Zmc2V0TGVmdDtcblxuXHR3aGlsZSAoXG5cdFx0KGVsZW1lbnQgPSA8SFRNTEVsZW1lbnQ+ZWxlbWVudC5wYXJlbnROb2RlKSAhPT0gbnVsbFxuXHRcdCYmIGVsZW1lbnQgIT09IGVsZW1lbnQub3duZXJEb2N1bWVudC5ib2R5XG5cdFx0JiYgZWxlbWVudCAhPT0gZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuXHQpIHtcblx0XHR0b3AgLT0gZWxlbWVudC5zY3JvbGxUb3A7XG5cdFx0Y29uc3QgYyA9IGlzU2hhZG93Um9vdChlbGVtZW50KSA/IG51bGwgOiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXHRcdGlmIChjKSB7XG5cdFx0XHRsZWZ0IC09IGMuZGlyZWN0aW9uICE9PSAncnRsJyA/IGVsZW1lbnQuc2Nyb2xsTGVmdCA6IC1lbGVtZW50LnNjcm9sbExlZnQ7XG5cdFx0fVxuXG5cdFx0aWYgKGVsZW1lbnQgPT09IG9mZnNldFBhcmVudCkge1xuXHRcdFx0bGVmdCArPSBTaXplVXRpbHMuZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQpO1xuXHRcdFx0dG9wICs9IFNpemVVdGlscy5nZXRCb3JkZXJUb3BXaWR0aChlbGVtZW50KTtcblx0XHRcdHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcDtcblx0XHRcdGxlZnQgKz0gZWxlbWVudC5vZmZzZXRMZWZ0O1xuXHRcdFx0b2Zmc2V0UGFyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRsZWZ0OiBsZWZ0LFxuXHRcdHRvcDogdG9wXG5cdH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURvbU5vZGVQYWdlUG9zaXRpb24ge1xuXHRsZWZ0OiBudW1iZXI7XG5cdHRvcDogbnVtYmVyO1xuXHR3aWR0aDogbnVtYmVyO1xuXHRoZWlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpemUoZWxlbWVudDogSFRNTEVsZW1lbnQsIHdpZHRoOiBudW1iZXIgfCBudWxsLCBoZWlnaHQ6IG51bWJlciB8IG51bGwpOiB2b2lkIHtcblx0aWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHtcblx0XHRlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBoZWlnaHQgPT09ICdudW1iZXInKSB7XG5cdFx0ZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwb3NpdGlvbihlbGVtZW50OiBIVE1MRWxlbWVudCwgdG9wOiBudW1iZXIsIHJpZ2h0PzogbnVtYmVyLCBib3R0b20/OiBudW1iZXIsIGxlZnQ/OiBudW1iZXIsIHBvc2l0aW9uOiBzdHJpbmcgPSAnYWJzb2x1dGUnKTogdm9pZCB7XG5cdGlmICh0eXBlb2YgdG9wID09PSAnbnVtYmVyJykge1xuXHRcdGVsZW1lbnQuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcblx0fVxuXG5cdGlmICh0eXBlb2YgcmlnaHQgPT09ICdudW1iZXInKSB7XG5cdFx0ZWxlbWVudC5zdHlsZS5yaWdodCA9IGAke3JpZ2h0fXB4YDtcblx0fVxuXG5cdGlmICh0eXBlb2YgYm90dG9tID09PSAnbnVtYmVyJykge1xuXHRcdGVsZW1lbnQuc3R5bGUuYm90dG9tID0gYCR7Ym90dG9tfXB4YDtcblx0fVxuXG5cdGlmICh0eXBlb2YgbGVmdCA9PT0gJ251bWJlcicpIHtcblx0XHRlbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcblx0fVxuXG5cdGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBwb3NpdGlvbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiBhIGRvbSBub2RlIHJlbGF0aXZlIHRvIHRoZSBlbnRpcmUgcGFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERvbU5vZGVQYWdlUG9zaXRpb24oZG9tTm9kZTogSFRNTEVsZW1lbnQpOiBJRG9tTm9kZVBhZ2VQb3NpdGlvbiB7XG5cdGNvbnN0IGJiID0gZG9tTm9kZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0Y29uc3Qgd2luZG93ID0gZ2V0V2luZG93KGRvbU5vZGUpO1xuXHRyZXR1cm4ge1xuXHRcdGxlZnQ6IGJiLmxlZnQgKyB3aW5kb3cuc2Nyb2xsWCxcblx0XHR0b3A6IGJiLnRvcCArIHdpbmRvdy5zY3JvbGxZLFxuXHRcdHdpZHRoOiBiYi53aWR0aCxcblx0XHRoZWlnaHQ6IGJiLmhlaWdodFxuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGVmZmVjdGl2ZSB6b29tIG9uIGEgZ2l2ZW4gZWxlbWVudCBiZWZvcmUgd2luZG93IHpvb20gbGV2ZWwgaXMgYXBwbGllZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RG9tTm9kZVpvb21MZXZlbChkb21Ob2RlOiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdGxldCB0ZXN0RWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gZG9tTm9kZTtcblx0bGV0IHpvb20gPSAxLjA7XG5cdGRvIHtcblx0XHRjb25zdCBlbGVtZW50Wm9vbUxldmVsID0gKGdldENvbXB1dGVkU3R5bGUodGVzdEVsZW1lbnQpIGFzIGFueSkuem9vbTtcblx0XHRpZiAoZWxlbWVudFpvb21MZXZlbCAhPT0gbnVsbCAmJiBlbGVtZW50Wm9vbUxldmVsICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudFpvb21MZXZlbCAhPT0gJzEnKSB7XG5cdFx0XHR6b29tICo9IGVsZW1lbnRab29tTGV2ZWw7XG5cdFx0fVxuXG5cdFx0dGVzdEVsZW1lbnQgPSB0ZXN0RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuXHR9IHdoaWxlICh0ZXN0RWxlbWVudCAhPT0gbnVsbCAmJiB0ZXN0RWxlbWVudCAhPT0gdGVzdEVsZW1lbnQub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuXG5cdHJldHVybiB6b29tO1xufVxuXG5cbi8vIEFkYXB0ZWQgZnJvbSBXaW5KU1xuLy8gR2V0cyB0aGUgd2lkdGggb2YgdGhlIGVsZW1lbnQsIGluY2x1ZGluZyBtYXJnaW5zLlxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvdGFsV2lkdGgoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRjb25zdCBtYXJnaW4gPSBTaXplVXRpbHMuZ2V0TWFyZ2luTGVmdChlbGVtZW50KSArIFNpemVVdGlscy5nZXRNYXJnaW5SaWdodChlbGVtZW50KTtcblx0cmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggKyBtYXJnaW47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50V2lkdGgoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRjb25zdCBib3JkZXIgPSBTaXplVXRpbHMuZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQpICsgU2l6ZVV0aWxzLmdldEJvcmRlclJpZ2h0V2lkdGgoZWxlbWVudCk7XG5cdGNvbnN0IHBhZGRpbmcgPSBTaXplVXRpbHMuZ2V0UGFkZGluZ0xlZnQoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQpO1xuXHRyZXR1cm4gZWxlbWVudC5vZmZzZXRXaWR0aCAtIGJvcmRlciAtIHBhZGRpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3RhbFNjcm9sbFdpZHRoKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcblx0Y29uc3QgbWFyZ2luID0gU2l6ZVV0aWxzLmdldE1hcmdpbkxlZnQoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0TWFyZ2luUmlnaHQoZWxlbWVudCk7XG5cdHJldHVybiBlbGVtZW50LnNjcm9sbFdpZHRoICsgbWFyZ2luO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gV2luSlNcbi8vIEdldHMgdGhlIGhlaWdodCBvZiB0aGUgY29udGVudCBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuIFRoZSBjb250ZW50IGhlaWdodCBkb2VzIG5vdCBpbmNsdWRlIGJvcmRlcnMgb3IgcGFkZGluZy5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZW50SGVpZ2h0KGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogbnVtYmVyIHtcblx0Y29uc3QgYm9yZGVyID0gU2l6ZVV0aWxzLmdldEJvcmRlclRvcFdpZHRoKGVsZW1lbnQpICsgU2l6ZVV0aWxzLmdldEJvcmRlckJvdHRvbVdpZHRoKGVsZW1lbnQpO1xuXHRjb25zdCBwYWRkaW5nID0gU2l6ZVV0aWxzLmdldFBhZGRpbmdUb3AoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0UGFkZGluZ0JvdHRvbShlbGVtZW50KTtcblx0cmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0IC0gYm9yZGVyIC0gcGFkZGluZztcbn1cblxuLy8gQWRhcHRlZCBmcm9tIFdpbkpTXG4vLyBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIGVsZW1lbnQsIGluY2x1ZGluZyBpdHMgbWFyZ2lucy5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3RhbEhlaWdodChlbGVtZW50OiBIVE1MRWxlbWVudCk6IG51bWJlciB7XG5cdGNvbnN0IG1hcmdpbiA9IFNpemVVdGlscy5nZXRNYXJnaW5Ub3AoZWxlbWVudCkgKyBTaXplVXRpbHMuZ2V0TWFyZ2luQm90dG9tKGVsZW1lbnQpO1xuXHRyZXR1cm4gZWxlbWVudC5vZmZzZXRIZWlnaHQgKyBtYXJnaW47XG59XG5cbi8vIEdldHMgdGhlIGxlZnQgY29vcmRpbmF0ZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnQuXG5mdW5jdGlvbiBnZXRSZWxhdGl2ZUxlZnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIHBhcmVudDogSFRNTEVsZW1lbnQpOiBudW1iZXIge1xuXHRpZiAoZWxlbWVudCA9PT0gbnVsbCkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0Y29uc3QgZWxlbWVudFBvc2l0aW9uID0gZ2V0VG9wTGVmdE9mZnNldChlbGVtZW50KTtcblx0Y29uc3QgcGFyZW50UG9zaXRpb24gPSBnZXRUb3BMZWZ0T2Zmc2V0KHBhcmVudCk7XG5cdHJldHVybiBlbGVtZW50UG9zaXRpb24ubGVmdCAtIHBhcmVudFBvc2l0aW9uLmxlZnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXJnZXN0Q2hpbGRXaWR0aChwYXJlbnQ6IEhUTUxFbGVtZW50LCBjaGlsZHJlbjogSFRNTEVsZW1lbnRbXSk6IG51bWJlciB7XG5cdGNvbnN0IGNoaWxkV2lkdGhzID0gY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4ge1xuXHRcdHJldHVybiBNYXRoLm1heChnZXRUb3RhbFNjcm9sbFdpZHRoKGNoaWxkKSwgZ2V0VG90YWxXaWR0aChjaGlsZCkpICsgZ2V0UmVsYXRpdmVMZWZ0KGNoaWxkLCBwYXJlbnQpIHx8IDA7XG5cdH0pO1xuXHRjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KC4uLmNoaWxkV2lkdGhzKTtcblx0cmV0dXJuIG1heFdpZHRoO1xufVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0FuY2VzdG9yKHRlc3RDaGlsZDogTm9kZSB8IG51bGwsIHRlc3RBbmNlc3RvcjogTm9kZSB8IG51bGwpOiBib29sZWFuIHtcblx0cmV0dXJuIEJvb2xlYW4odGVzdEFuY2VzdG9yPy5jb250YWlucyh0ZXN0Q2hpbGQpKTtcbn1cblxuY29uc3QgcGFyZW50Rmxvd1RvRGF0YUtleSA9ICdwYXJlbnRGbG93VG9FbGVtZW50SWQnO1xuXG4vKipcbiAqIFNldCBhbiBleHBsaWNpdCBwYXJlbnQgdG8gdXNlIGZvciBub2RlcyB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGVcbiAqIHJlZ3VsYXIgZG9tIHN0cnVjdHVyZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcmVudEZsb3dUbyhmcm9tQ2hpbGRFbGVtZW50OiBIVE1MRWxlbWVudCwgdG9QYXJlbnRFbGVtZW50OiBFbGVtZW50KTogdm9pZCB7XG5cdGZyb21DaGlsZEVsZW1lbnQuZGF0YXNldFtwYXJlbnRGbG93VG9EYXRhS2V5XSA9IHRvUGFyZW50RWxlbWVudC5pZDtcbn1cblxuZnVuY3Rpb24gZ2V0UGFyZW50Rmxvd1RvRWxlbWVudChub2RlOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdGNvbnN0IGZsb3dUb1BhcmVudElkID0gbm9kZS5kYXRhc2V0W3BhcmVudEZsb3dUb0RhdGFLZXldO1xuXHRpZiAodHlwZW9mIGZsb3dUb1BhcmVudElkID09PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBub2RlLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmxvd1RvUGFyZW50SWQpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGB0ZXN0QW5jZXN0b3JgIGlzIGFuIGFuY2VzdG9yIG9mIGB0ZXN0Q2hpbGRgLCBvYnNlcnZpbmcgdGhlIGV4cGxpY2l0XG4gKiBwYXJlbnRzIHNldCBieSBgc2V0UGFyZW50Rmxvd1RvYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW5jZXN0b3JVc2luZ0Zsb3dUbyh0ZXN0Q2hpbGQ6IE5vZGUsIHRlc3RBbmNlc3RvcjogTm9kZSk6IGJvb2xlYW4ge1xuXHRsZXQgbm9kZTogTm9kZSB8IG51bGwgPSB0ZXN0Q2hpbGQ7XG5cdHdoaWxlIChub2RlKSB7XG5cdFx0aWYgKG5vZGUgPT09IHRlc3RBbmNlc3Rvcikge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKGlzSFRNTEVsZW1lbnQobm9kZSkpIHtcblx0XHRcdGNvbnN0IGZsb3dUb1BhcmVudEVsZW1lbnQgPSBnZXRQYXJlbnRGbG93VG9FbGVtZW50KG5vZGUpO1xuXHRcdFx0aWYgKGZsb3dUb1BhcmVudEVsZW1lbnQpIHtcblx0XHRcdFx0bm9kZSA9IGZsb3dUb1BhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHR9XG5cblx0cmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmluZFBhcmVudFdpdGhDbGFzcyhub2RlOiBIVE1MRWxlbWVudCwgY2xheno6IHN0cmluZywgc3RvcEF0Q2xhenpPck5vZGU/OiBzdHJpbmcgfCBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG5cdHdoaWxlIChub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IG5vZGUuRUxFTUVOVF9OT0RFKSB7XG5cdFx0aWYgKG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXp6KSkge1xuXHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0fVxuXG5cdFx0aWYgKHN0b3BBdENsYXp6T3JOb2RlKSB7XG5cdFx0XHRpZiAodHlwZW9mIHN0b3BBdENsYXp6T3JOb2RlID09PSAnc3RyaW5nJykge1xuXHRcdFx0XHRpZiAobm9kZS5jbGFzc0xpc3QuY29udGFpbnMoc3RvcEF0Q2xhenpPck5vZGUpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChub2RlID09PSBzdG9wQXRDbGF6ek9yTm9kZSkge1xuXHRcdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bm9kZSA9IDxIVE1MRWxlbWVudD5ub2RlLnBhcmVudE5vZGU7XG5cdH1cblxuXHRyZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1BhcmVudFdpdGhDbGFzcyhub2RlOiBIVE1MRWxlbWVudCwgY2xheno6IHN0cmluZywgc3RvcEF0Q2xhenpPck5vZGU/OiBzdHJpbmcgfCBIVE1MRWxlbWVudCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gISFmaW5kUGFyZW50V2l0aENsYXNzKG5vZGUsIGNsYXp6LCBzdG9wQXRDbGF6ek9yTm9kZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NoYWRvd1Jvb3Qobm9kZTogTm9kZSk6IG5vZGUgaXMgU2hhZG93Um9vdCB7XG5cdHJldHVybiAoXG5cdFx0bm9kZSAmJiAhISg8U2hhZG93Um9vdD5ub2RlKS5ob3N0ICYmICEhKDxTaGFkb3dSb290Pm5vZGUpLm1vZGVcblx0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW5TaGFkb3dET00oZG9tTm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gISFnZXRTaGFkb3dSb290KGRvbU5vZGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2hhZG93Um9vdChkb21Ob2RlOiBOb2RlKTogU2hhZG93Um9vdCB8IG51bGwge1xuXHR3aGlsZSAoZG9tTm9kZS5wYXJlbnROb2RlKSB7XG5cdFx0aWYgKGRvbU5vZGUgPT09IGRvbU5vZGUub3duZXJEb2N1bWVudD8uYm9keSkge1xuXHRcdFx0Ly8gcmVhY2hlZCB0aGUgYm9keVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdGRvbU5vZGUgPSBkb21Ob2RlLnBhcmVudE5vZGU7XG5cdH1cblx0cmV0dXJuIGlzU2hhZG93Um9vdChkb21Ob2RlKSA/IGRvbU5vZGUgOiBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGFjdGl2ZSBlbGVtZW50IGFjcm9zcyBhbGwgY2hpbGQgd2luZG93c1xuICogYmFzZWQgb24gZG9jdW1lbnQgZm9jdXMuIEZhbGxzIGJhY2sgdG8gdGhlIG1haW5cbiAqIHdpbmRvdyBpZiBubyB3aW5kb3cgaGFzIGZvY3VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudCgpOiBFbGVtZW50IHwgbnVsbCB7XG5cdGxldCByZXN1bHQgPSBnZXRBY3RpdmVEb2N1bWVudCgpLmFjdGl2ZUVsZW1lbnQ7XG5cblx0d2hpbGUgKHJlc3VsdD8uc2hhZG93Um9vdCkge1xuXHRcdHJlc3VsdCA9IHJlc3VsdC5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZm9jdXNlZCB3aW5kb3cgYWN0aXZlIGVsZW1lbnQgbWF0Y2hlc1xuICogdGhlIHByb3ZpZGVkIGVsZW1lbnQuIEZhbGxzIGJhY2sgdG8gdGhlIG1haW4gd2luZG93IGlmIG5vXG4gKiB3aW5kb3cgaGFzIGZvY3VzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBY3RpdmVFbGVtZW50KGVsZW1lbnQ6IEVsZW1lbnQpOiBib29sZWFuIHtcblx0cmV0dXJuIGdldEFjdGl2ZUVsZW1lbnQoKSA9PT0gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGZvY3VzZWQgd2luZG93IGFjdGl2ZSBlbGVtZW50IGlzIGNvbnRhaW5lZCBpblxuICogYGFuY2VzdG9yYC4gRmFsbHMgYmFjayB0byB0aGUgbWFpbiB3aW5kb3cgaWYgbm8gd2luZG93IGhhcyBmb2N1cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW5jZXN0b3JPZkFjdGl2ZUVsZW1lbnQoYW5jZXN0b3I6IEVsZW1lbnQpOiBib29sZWFuIHtcblx0cmV0dXJuIGlzQW5jZXN0b3IoZ2V0QWN0aXZlRWxlbWVudCgpLCBhbmNlc3Rvcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGluIHRoZSBhY3RpdmUgYGRvY3VtZW50YC4gVGhlIGFjdGl2ZVxuICogZG9jdW1lbnQgaGFzIGZvY3VzIG9yIHdpbGwgYmUgdGhlIG1haW4gd2luZG93cyBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWN0aXZlRG9jdW1lbnQoZWxlbWVudDogRWxlbWVudCk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50ID09PSBnZXRBY3RpdmVEb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGFjdGl2ZSBkb2N1bWVudCBhY3Jvc3MgbWFpbiBhbmQgY2hpbGQgd2luZG93cy5cbiAqIFByZWZlcnMgdGhlIHdpbmRvdyB3aXRoIGZvY3VzLCBvdGhlcndpc2UgZmFsbHMgYmFjayB0b1xuICogdGhlIG1haW4gd2luZG93cyBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFjdGl2ZURvY3VtZW50KCk6IERvY3VtZW50IHtcblx0aWYgKGdldFdpbmRvd3NDb3VudCgpIDw9IDEpIHtcblx0XHRyZXR1cm4gbWFpbldpbmRvdy5kb2N1bWVudDtcblx0fVxuXG5cdGNvbnN0IGRvY3VtZW50cyA9IEFycmF5LmZyb20oZ2V0V2luZG93cygpKS5tYXAoKHsgd2luZG93IH0pID0+IHdpbmRvdy5kb2N1bWVudCk7XG5cdHJldHVybiBkb2N1bWVudHMuZmluZChkb2MgPT4gZG9jLmhhc0ZvY3VzKCkpID8/IG1haW5XaW5kb3cuZG9jdW1lbnQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYWN0aXZlIHdpbmRvdyBhY3Jvc3MgbWFpbiBhbmQgY2hpbGQgd2luZG93cy5cbiAqIFByZWZlcnMgdGhlIHdpbmRvdyB3aXRoIGZvY3VzLCBvdGhlcndpc2UgZmFsbHMgYmFjayB0b1xuICogdGhlIG1haW4gd2luZG93LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlV2luZG93KCk6IENvZGVXaW5kb3cge1xuXHRjb25zdCBkb2N1bWVudCA9IGdldEFjdGl2ZURvY3VtZW50KCk7XG5cdHJldHVybiAoZG9jdW1lbnQuZGVmYXVsdFZpZXc/LndpbmRvdyA/PyBtYWluV2luZG93KSBhcyBDb2RlV2luZG93O1xufVxuXG5jb25zdCBnbG9iYWxTdHlsZXNoZWV0cyA9IG5ldyBNYXA8SFRNTFN0eWxlRWxlbWVudCAvKiBtYWluIHN0eWxlc2hlZXQgKi8sIFNldDxIVE1MU3R5bGVFbGVtZW50IC8qIGF1eCB3aW5kb3cgY2xvbmVzIHRoYXQgdHJhY2sgdGhlIG1haW4gc3R5bGVzaGVldCAqLz4+KCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0dsb2JhbFN0eWxlc2hlZXQobm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuXHRyZXR1cm4gZ2xvYmFsU3R5bGVzaGVldHMuaGFzKG5vZGUgYXMgSFRNTFN0eWxlRWxlbWVudCk7XG59XG5cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGNyZWF0ZVN0eWxlU2hlZXQgd2hpY2ggaGFzIGEgdW5pZmllZCBBUEkgdG8gaW5pdGlhbGl6ZS9zZXQgdGhlIHN0eWxlIGNvbnRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0MigpOiBXcmFwcGVkU3R5bGVFbGVtZW50IHtcblx0cmV0dXJuIG5ldyBXcmFwcGVkU3R5bGVFbGVtZW50KCk7XG59XG5cbmNsYXNzIFdyYXBwZWRTdHlsZUVsZW1lbnQge1xuXHRwcml2YXRlIF9jdXJyZW50Q3NzU3R5bGUgPSAnJztcblx0cHJpdmF0ZSBfc3R5bGVTaGVldDogSFRNTFN0eWxlRWxlbWVudCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuXHRwdWJsaWMgc2V0U3R5bGUoY3NzU3R5bGU6IHN0cmluZyk6IHZvaWQge1xuXHRcdGlmIChjc3NTdHlsZSA9PT0gdGhpcy5fY3VycmVudENzc1N0eWxlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX2N1cnJlbnRDc3NTdHlsZSA9IGNzc1N0eWxlO1xuXG5cdFx0aWYgKCF0aGlzLl9zdHlsZVNoZWV0KSB7XG5cdFx0XHR0aGlzLl9zdHlsZVNoZWV0ID0gY3JlYXRlU3R5bGVTaGVldChtYWluV2luZG93LmRvY3VtZW50LmhlYWQsIChzKSA9PiBzLmlubmVyVGV4dCA9IGNzc1N0eWxlKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fc3R5bGVTaGVldC5pbm5lclRleHQgPSBjc3NTdHlsZTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fc3R5bGVTaGVldCkge1xuXHRcdFx0dGhpcy5fc3R5bGVTaGVldC5yZW1vdmUoKTtcblx0XHRcdHRoaXMuX3N0eWxlU2hlZXQgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHlsZVNoZWV0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBtYWluV2luZG93LmRvY3VtZW50LmhlYWQsIGJlZm9yZUFwcGVuZD86IChzdHlsZTogSFRNTFN0eWxlRWxlbWVudCkgPT4gdm9pZCwgZGlzcG9zYWJsZVN0b3JlPzogRGlzcG9zYWJsZVN0b3JlKTogSFRNTFN0eWxlRWxlbWVudCB7XG5cdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblx0c3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdHN0eWxlLm1lZGlhID0gJ3NjcmVlbic7XG5cdGJlZm9yZUFwcGVuZD8uKHN0eWxlKTtcblx0Y29udGFpbmVyLmFwcGVuZENoaWxkKHN0eWxlKTtcblxuXHRpZiAoZGlzcG9zYWJsZVN0b3JlKSB7XG5cdFx0ZGlzcG9zYWJsZVN0b3JlLmFkZCh0b0Rpc3Bvc2FibGUoKCkgPT4gc3R5bGUucmVtb3ZlKCkpKTtcblx0fVxuXG5cdC8vIFdpdGggPGhlYWQ+IGFzIGNvbnRhaW5lciwgdGhlIHN0eWxlc2hlZXQgYmVjb21lcyBnbG9iYWwgYW5kIGlzIHRyYWNrZWRcblx0Ly8gdG8gc3VwcG9ydCBhdXhpbGlhcnkgd2luZG93cyB0byBjbG9uZSB0aGUgc3R5bGVzaGVldC5cblx0aWYgKGNvbnRhaW5lciA9PT0gbWFpbldpbmRvdy5kb2N1bWVudC5oZWFkKSB7XG5cdFx0Y29uc3QgZ2xvYmFsU3R5bGVzaGVldENsb25lcyA9IG5ldyBTZXQ8SFRNTFN0eWxlRWxlbWVudD4oKTtcblx0XHRnbG9iYWxTdHlsZXNoZWV0cy5zZXQoc3R5bGUsIGdsb2JhbFN0eWxlc2hlZXRDbG9uZXMpO1xuXG5cdFx0Zm9yIChjb25zdCB7IHdpbmRvdzogdGFyZ2V0V2luZG93LCBkaXNwb3NhYmxlcyB9IG9mIGdldFdpbmRvd3MoKSkge1xuXHRcdFx0aWYgKHRhcmdldFdpbmRvdyA9PT0gbWFpbldpbmRvdykge1xuXHRcdFx0XHRjb250aW51ZTsgLy8gbWFpbiB3aW5kb3cgaXMgYWxyZWFkeSB0cmFja2VkXG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNsb25lRGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVzLmFkZChjbG9uZUdsb2JhbFN0eWxlU2hlZXQoc3R5bGUsIGdsb2JhbFN0eWxlc2hlZXRDbG9uZXMsIHRhcmdldFdpbmRvdykpO1xuXHRcdFx0ZGlzcG9zYWJsZVN0b3JlPy5hZGQoY2xvbmVEaXNwb3NhYmxlKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZUdsb2JhbFN0eWxlc2hlZXRzKHRhcmdldFdpbmRvdzogV2luZG93KTogSURpc3Bvc2FibGUge1xuXHRjb25zdCBkaXNwb3NhYmxlcyA9IG5ldyBEaXNwb3NhYmxlU3RvcmUoKTtcblxuXHRmb3IgKGNvbnN0IFtnbG9iYWxTdHlsZXNoZWV0LCBjbG9uZWRHbG9iYWxTdHlsZXNoZWV0c10gb2YgZ2xvYmFsU3R5bGVzaGVldHMpIHtcblx0XHRkaXNwb3NhYmxlcy5hZGQoY2xvbmVHbG9iYWxTdHlsZVNoZWV0KGdsb2JhbFN0eWxlc2hlZXQsIGNsb25lZEdsb2JhbFN0eWxlc2hlZXRzLCB0YXJnZXRXaW5kb3cpKTtcblx0fVxuXG5cdHJldHVybiBkaXNwb3NhYmxlcztcbn1cblxuZnVuY3Rpb24gY2xvbmVHbG9iYWxTdHlsZVNoZWV0KGdsb2JhbFN0eWxlc2hlZXQ6IEhUTUxTdHlsZUVsZW1lbnQsIGdsb2JhbFN0eWxlc2hlZXRDbG9uZXM6IFNldDxIVE1MU3R5bGVFbGVtZW50PiwgdGFyZ2V0V2luZG93OiBXaW5kb3cpOiBJRGlzcG9zYWJsZSB7XG5cdGNvbnN0IGRpc3Bvc2FibGVzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpO1xuXG5cdGNvbnN0IGNsb25lID0gZ2xvYmFsU3R5bGVzaGVldC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFN0eWxlRWxlbWVudDtcblx0dGFyZ2V0V2luZG93LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuXHRkaXNwb3NhYmxlcy5hZGQodG9EaXNwb3NhYmxlKCgpID0+IGNsb25lLnJlbW92ZSgpKSk7XG5cblx0Zm9yIChjb25zdCBydWxlIG9mIGdldER5bmFtaWNTdHlsZVNoZWV0UnVsZXMoZ2xvYmFsU3R5bGVzaGVldCkpIHtcblx0XHRjbG9uZS5zaGVldD8uaW5zZXJ0UnVsZShydWxlLmNzc1RleHQsIGNsb25lLnNoZWV0Py5jc3NSdWxlcy5sZW5ndGgpO1xuXHR9XG5cblx0ZGlzcG9zYWJsZXMuYWRkKHNoYXJlZE11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShnbG9iYWxTdHlsZXNoZWV0LCBkaXNwb3NhYmxlcywgeyBjaGlsZExpc3Q6IHRydWUgfSkoKCkgPT4ge1xuXHRcdGNsb25lLnRleHRDb250ZW50ID0gZ2xvYmFsU3R5bGVzaGVldC50ZXh0Q29udGVudDtcblx0fSkpO1xuXG5cdGdsb2JhbFN0eWxlc2hlZXRDbG9uZXMuYWRkKGNsb25lKTtcblx0ZGlzcG9zYWJsZXMuYWRkKHRvRGlzcG9zYWJsZSgoKSA9PiBnbG9iYWxTdHlsZXNoZWV0Q2xvbmVzLmRlbGV0ZShjbG9uZSkpKTtcblxuXHRyZXR1cm4gZGlzcG9zYWJsZXM7XG59XG5cbmludGVyZmFjZSBJTXV0YXRpb25PYnNlcnZlciB7XG5cdHVzZXJzOiBudW1iZXI7XG5cdHJlYWRvbmx5IG9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyO1xuXHRyZWFkb25seSBvbkRpZE11dGF0ZTogZXZlbnQuRXZlbnQ8TXV0YXRpb25SZWNvcmRbXT47XG59XG5cbmV4cG9ydCBjb25zdCBzaGFyZWRNdXRhdGlvbk9ic2VydmVyID0gbmV3IGNsYXNzIHtcblxuXHRyZWFkb25seSBtdXRhdGlvbk9ic2VydmVycyA9IG5ldyBNYXA8Tm9kZSwgTWFwPG51bWJlciwgSU11dGF0aW9uT2JzZXJ2ZXI+PigpO1xuXG5cdG9ic2VydmUodGFyZ2V0OiBOb2RlLCBkaXNwb3NhYmxlczogRGlzcG9zYWJsZVN0b3JlLCBvcHRpb25zPzogTXV0YXRpb25PYnNlcnZlckluaXQpOiBldmVudC5FdmVudDxNdXRhdGlvblJlY29yZFtdPiB7XG5cdFx0bGV0IG11dGF0aW9uT2JzZXJ2ZXJzUGVyVGFyZ2V0ID0gdGhpcy5tdXRhdGlvbk9ic2VydmVycy5nZXQodGFyZ2V0KTtcblx0XHRpZiAoIW11dGF0aW9uT2JzZXJ2ZXJzUGVyVGFyZ2V0KSB7XG5cdFx0XHRtdXRhdGlvbk9ic2VydmVyc1BlclRhcmdldCA9IG5ldyBNYXA8bnVtYmVyLCBJTXV0YXRpb25PYnNlcnZlcj4oKTtcblx0XHRcdHRoaXMubXV0YXRpb25PYnNlcnZlcnMuc2V0KHRhcmdldCwgbXV0YXRpb25PYnNlcnZlcnNQZXJUYXJnZXQpO1xuXHRcdH1cblxuXHRcdGNvbnN0IG9wdGlvbnNIYXNoID0gaGFzaChvcHRpb25zKTtcblx0XHRsZXQgbXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMgPSBtdXRhdGlvbk9ic2VydmVyc1BlclRhcmdldC5nZXQob3B0aW9uc0hhc2gpO1xuXHRcdGlmICghbXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMpIHtcblx0XHRcdGNvbnN0IG9uRGlkTXV0YXRlID0gbmV3IGV2ZW50LkVtaXR0ZXI8TXV0YXRpb25SZWNvcmRbXT4oKTtcblx0XHRcdGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IG9uRGlkTXV0YXRlLmZpcmUobXV0YXRpb25zKSk7XG5cdFx0XHRvYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgb3B0aW9ucyk7XG5cblx0XHRcdGNvbnN0IHJlc29sdmVkTXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMgPSBtdXRhdGlvbk9ic2VydmVyUGVyT3B0aW9ucyA9IHtcblx0XHRcdFx0dXNlcnM6IDEsXG5cdFx0XHRcdG9ic2VydmVyLFxuXHRcdFx0XHRvbkRpZE11dGF0ZTogb25EaWRNdXRhdGUuZXZlbnRcblx0XHRcdH07XG5cblx0XHRcdGRpc3Bvc2FibGVzLmFkZCh0b0Rpc3Bvc2FibGUoKCkgPT4ge1xuXHRcdFx0XHRyZXNvbHZlZE11dGF0aW9uT2JzZXJ2ZXJQZXJPcHRpb25zLnVzZXJzIC09IDE7XG5cblx0XHRcdFx0aWYgKHJlc29sdmVkTXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMudXNlcnMgPT09IDApIHtcblx0XHRcdFx0XHRvbkRpZE11dGF0ZS5kaXNwb3NlKCk7XG5cdFx0XHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXG5cdFx0XHRcdFx0bXV0YXRpb25PYnNlcnZlcnNQZXJUYXJnZXQ/LmRlbGV0ZShvcHRpb25zSGFzaCk7XG5cdFx0XHRcdFx0aWYgKG11dGF0aW9uT2JzZXJ2ZXJzUGVyVGFyZ2V0Py5zaXplID09PSAwKSB7XG5cdFx0XHRcdFx0XHR0aGlzLm11dGF0aW9uT2JzZXJ2ZXJzLmRlbGV0ZSh0YXJnZXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkpO1xuXG5cdFx0XHRtdXRhdGlvbk9ic2VydmVyc1BlclRhcmdldC5zZXQob3B0aW9uc0hhc2gsIG11dGF0aW9uT2JzZXJ2ZXJQZXJPcHRpb25zKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMudXNlcnMgKz0gMTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMub25EaWRNdXRhdGU7XG5cdH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNZXRhRWxlbWVudChjb250YWluZXI6IEhUTUxFbGVtZW50ID0gbWFpbldpbmRvdy5kb2N1bWVudC5oZWFkKTogSFRNTE1ldGFFbGVtZW50IHtcblx0cmV0dXJuIGNyZWF0ZUhlYWRFbGVtZW50KCdtZXRhJywgY29udGFpbmVyKSBhcyBIVE1MTWV0YUVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChjb250YWluZXI6IEhUTUxFbGVtZW50ID0gbWFpbldpbmRvdy5kb2N1bWVudC5oZWFkKTogSFRNTExpbmtFbGVtZW50IHtcblx0cmV0dXJuIGNyZWF0ZUhlYWRFbGVtZW50KCdsaW5rJywgY29udGFpbmVyKSBhcyBIVE1MTGlua0VsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUhlYWRFbGVtZW50KHRhZ05hbWU6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCA9IG1haW5XaW5kb3cuZG9jdW1lbnQuaGVhZCk6IEhUTUxFbGVtZW50IHtcblx0Y29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50KTtcblx0cmV0dXJuIGVsZW1lbnQ7XG59XG5cbmxldCBfc2hhcmVkU3R5bGVTaGVldDogSFRNTFN0eWxlRWxlbWVudCB8IG51bGwgPSBudWxsO1xuZnVuY3Rpb24gZ2V0U2hhcmVkU3R5bGVTaGVldCgpOiBIVE1MU3R5bGVFbGVtZW50IHtcblx0aWYgKCFfc2hhcmVkU3R5bGVTaGVldCkge1xuXHRcdF9zaGFyZWRTdHlsZVNoZWV0ID0gY3JlYXRlU3R5bGVTaGVldCgpO1xuXHR9XG5cdHJldHVybiBfc2hhcmVkU3R5bGVTaGVldDtcbn1cblxuZnVuY3Rpb24gZ2V0RHluYW1pY1N0eWxlU2hlZXRSdWxlcyhzdHlsZTogSFRNTFN0eWxlRWxlbWVudCkge1xuXHRpZiAoc3R5bGU/LnNoZWV0Py5ydWxlcykge1xuXHRcdC8vIENocm9tZSwgSUVcblx0XHRyZXR1cm4gc3R5bGUuc2hlZXQucnVsZXM7XG5cdH1cblx0aWYgKHN0eWxlPy5zaGVldD8uY3NzUnVsZXMpIHtcblx0XHQvLyBGRlxuXHRcdHJldHVybiBzdHlsZS5zaGVldC5jc3NSdWxlcztcblx0fVxuXHRyZXR1cm4gW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDU1NSdWxlKHNlbGVjdG9yOiBzdHJpbmcsIGNzc1RleHQ6IHN0cmluZywgc3R5bGUgPSBnZXRTaGFyZWRTdHlsZVNoZWV0KCkpOiB2b2lkIHtcblx0aWYgKCFzdHlsZSB8fCAhY3NzVGV4dCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdHN0eWxlLnNoZWV0Py5pbnNlcnRSdWxlKGAke3NlbGVjdG9yfSB7JHtjc3NUZXh0fX1gLCAwKTtcblxuXHQvLyBBcHBseSBydWxlIGFsc28gdG8gYWxsIGNsb25lZCBnbG9iYWwgc3R5bGVzaGVldHNcblx0Zm9yIChjb25zdCBjbG9uZWRHbG9iYWxTdHlsZXNoZWV0IG9mIGdsb2JhbFN0eWxlc2hlZXRzLmdldChzdHlsZSkgPz8gW10pIHtcblx0XHRjcmVhdGVDU1NSdWxlKHNlbGVjdG9yLCBjc3NUZXh0LCBjbG9uZWRHbG9iYWxTdHlsZXNoZWV0KTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ1NTUnVsZXNDb250YWluaW5nU2VsZWN0b3IocnVsZU5hbWU6IHN0cmluZywgc3R5bGUgPSBnZXRTaGFyZWRTdHlsZVNoZWV0KCkpOiB2b2lkIHtcblx0aWYgKCFzdHlsZSkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGNvbnN0IHJ1bGVzID0gZ2V0RHluYW1pY1N0eWxlU2hlZXRSdWxlcyhzdHlsZSk7XG5cdGNvbnN0IHRvRGVsZXRlOiBudW1iZXJbXSA9IFtdO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y29uc3QgcnVsZSA9IHJ1bGVzW2ldO1xuXHRcdGlmIChpc0NTU1N0eWxlUnVsZShydWxlKSAmJiBydWxlLnNlbGVjdG9yVGV4dC5pbmRleE9mKHJ1bGVOYW1lKSAhPT0gLTEpIHtcblx0XHRcdHRvRGVsZXRlLnB1c2goaSk7XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChsZXQgaSA9IHRvRGVsZXRlLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0c3R5bGUuc2hlZXQ/LmRlbGV0ZVJ1bGUodG9EZWxldGVbaV0pO1xuXHR9XG5cblx0Ly8gUmVtb3ZlIHJ1bGVzIGFsc28gZnJvbSBhbGwgY2xvbmVkIGdsb2JhbCBzdHlsZXNoZWV0c1xuXHRmb3IgKGNvbnN0IGNsb25lZEdsb2JhbFN0eWxlc2hlZXQgb2YgZ2xvYmFsU3R5bGVzaGVldHMuZ2V0KHN0eWxlKSA/PyBbXSkge1xuXHRcdHJlbW92ZUNTU1J1bGVzQ29udGFpbmluZ1NlbGVjdG9yKHJ1bGVOYW1lLCBjbG9uZWRHbG9iYWxTdHlsZXNoZWV0KTtcblx0fVxufVxuXG5mdW5jdGlvbiBpc0NTU1N0eWxlUnVsZShydWxlOiBDU1NSdWxlKTogcnVsZSBpcyBDU1NTdHlsZVJ1bGUge1xuXHRyZXR1cm4gdHlwZW9mIChydWxlIGFzIENTU1N0eWxlUnVsZSkuc2VsZWN0b3JUZXh0ID09PSAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSFRNTEVsZW1lbnQoZTogdW5rbm93bik6IGUgaXMgSFRNTEVsZW1lbnQge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1zeW50YXhcblx0cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCBlIGluc3RhbmNlb2YgZ2V0V2luZG93KGUgYXMgTm9kZSkuSFRNTEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxBbmNob3JFbGVtZW50KGU6IHVua25vd24pOiBlIGlzIEhUTUxBbmNob3JFbGVtZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIGdldFdpbmRvdyhlIGFzIE5vZGUpLkhUTUxBbmNob3JFbGVtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIVE1MU3BhbkVsZW1lbnQoZTogdW5rbm93bik6IGUgaXMgSFRNTFNwYW5FbGVtZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgSFRNTFNwYW5FbGVtZW50IHx8IGUgaW5zdGFuY2VvZiBnZXRXaW5kb3coZSBhcyBOb2RlKS5IVE1MU3BhbkVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxUZXh0QXJlYUVsZW1lbnQoZTogdW5rbm93bik6IGUgaXMgSFRNTFRleHRBcmVhRWxlbWVudCB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuXHRyZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxUZXh0QXJlYUVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIGdldFdpbmRvdyhlIGFzIE5vZGUpLkhUTUxUZXh0QXJlYUVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxJbnB1dEVsZW1lbnQoZTogdW5rbm93bik6IGUgaXMgSFRNTElucHV0RWxlbWVudCB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuXHRyZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIGdldFdpbmRvdyhlIGFzIE5vZGUpLkhUTUxJbnB1dEVsZW1lbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hUTUxCdXR0b25FbGVtZW50KGU6IHVua25vd24pOiBlIGlzIEhUTUxCdXR0b25FbGVtZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgSFRNTEJ1dHRvbkVsZW1lbnQgfHwgZSBpbnN0YW5jZW9mIGdldFdpbmRvdyhlIGFzIE5vZGUpLkhUTUxCdXR0b25FbGVtZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNIVE1MRGl2RWxlbWVudChlOiB1bmtub3duKTogZSBpcyBIVE1MRGl2RWxlbWVudCB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuXHRyZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxEaXZFbGVtZW50IHx8IGUgaW5zdGFuY2VvZiBnZXRXaW5kb3coZSBhcyBOb2RlKS5IVE1MRGl2RWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU1ZHRWxlbWVudChlOiB1bmtub3duKTogZSBpcyBTVkdFbGVtZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgU1ZHRWxlbWVudCB8fCBlIGluc3RhbmNlb2YgZ2V0V2luZG93KGUgYXMgTm9kZSkuU1ZHRWxlbWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTW91c2VFdmVudChlOiB1bmtub3duKTogZSBpcyBNb3VzZUV2ZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgTW91c2VFdmVudCB8fCBlIGluc3RhbmNlb2YgZ2V0V2luZG93KGUgYXMgVUlFdmVudCkuTW91c2VFdmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzS2V5Ym9hcmRFdmVudChlOiB1bmtub3duKTogZSBpcyBLZXlib2FyZEV2ZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgS2V5Ym9hcmRFdmVudCB8fCBlIGluc3RhbmNlb2YgZ2V0V2luZG93KGUgYXMgVUlFdmVudCkuS2V5Ym9hcmRFdmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUG9pbnRlckV2ZW50KGU6IHVua25vd24pOiBlIGlzIFBvaW50ZXJFdmVudCB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuXHRyZXR1cm4gZSBpbnN0YW5jZW9mIFBvaW50ZXJFdmVudCB8fCBlIGluc3RhbmNlb2YgZ2V0V2luZG93KGUgYXMgVUlFdmVudCkuUG9pbnRlckV2ZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEcmFnRXZlbnQoZTogdW5rbm93bik6IGUgaXMgRHJhZ0V2ZW50IHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG5cdHJldHVybiBlIGluc3RhbmNlb2YgRHJhZ0V2ZW50IHx8IGUgaW5zdGFuY2VvZiBnZXRXaW5kb3coZSBhcyBVSUV2ZW50KS5EcmFnRXZlbnQ7XG59XG5cbmV4cG9ydCBjb25zdCBFdmVudFR5cGUgPSB7XG5cdC8vIE1vdXNlXG5cdENMSUNLOiAnY2xpY2snLFxuXHRBVVhDTElDSzogJ2F1eGNsaWNrJyxcblx0REJMQ0xJQ0s6ICdkYmxjbGljaycsXG5cdE1PVVNFX1VQOiAnbW91c2V1cCcsXG5cdE1PVVNFX0RPV046ICdtb3VzZWRvd24nLFxuXHRNT1VTRV9PVkVSOiAnbW91c2VvdmVyJyxcblx0TU9VU0VfTU9WRTogJ21vdXNlbW92ZScsXG5cdE1PVVNFX09VVDogJ21vdXNlb3V0Jyxcblx0TU9VU0VfRU5URVI6ICdtb3VzZWVudGVyJyxcblx0TU9VU0VfTEVBVkU6ICdtb3VzZWxlYXZlJyxcblx0TU9VU0VfV0hFRUw6ICd3aGVlbCcsXG5cdFBPSU5URVJfVVA6ICdwb2ludGVydXAnLFxuXHRQT0lOVEVSX0RPV046ICdwb2ludGVyZG93bicsXG5cdFBPSU5URVJfTU9WRTogJ3BvaW50ZXJtb3ZlJyxcblx0UE9JTlRFUl9MRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG5cdENPTlRFWFRfTUVOVTogJ2NvbnRleHRtZW51Jyxcblx0V0hFRUw6ICd3aGVlbCcsXG5cdC8vIEtleWJvYXJkXG5cdEtFWV9ET1dOOiAna2V5ZG93bicsXG5cdEtFWV9QUkVTUzogJ2tleXByZXNzJyxcblx0S0VZX1VQOiAna2V5dXAnLFxuXHQvLyBIVE1MIERvY3VtZW50XG5cdExPQUQ6ICdsb2FkJyxcblx0QkVGT1JFX1VOTE9BRDogJ2JlZm9yZXVubG9hZCcsXG5cdFVOTE9BRDogJ3VubG9hZCcsXG5cdFBBR0VfU0hPVzogJ3BhZ2VzaG93Jyxcblx0UEFHRV9ISURFOiAncGFnZWhpZGUnLFxuXHRQQVNURTogJ3Bhc3RlJyxcblx0QUJPUlQ6ICdhYm9ydCcsXG5cdEVSUk9SOiAnZXJyb3InLFxuXHRSRVNJWkU6ICdyZXNpemUnLFxuXHRTQ1JPTEw6ICdzY3JvbGwnLFxuXHRGVUxMU0NSRUVOX0NIQU5HRTogJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxuXHRXS19GVUxMU0NSRUVOX0NIQU5HRTogJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuXHQvLyBGb3JtXG5cdFNFTEVDVDogJ3NlbGVjdCcsXG5cdENIQU5HRTogJ2NoYW5nZScsXG5cdFNVQk1JVDogJ3N1Ym1pdCcsXG5cdFJFU0VUOiAncmVzZXQnLFxuXHRGT0NVUzogJ2ZvY3VzJyxcblx0Rk9DVVNfSU46ICdmb2N1c2luJyxcblx0Rk9DVVNfT1VUOiAnZm9jdXNvdXQnLFxuXHRCTFVSOiAnYmx1cicsXG5cdElOUFVUOiAnaW5wdXQnLFxuXHQvLyBMb2NhbCBTdG9yYWdlXG5cdFNUT1JBR0U6ICdzdG9yYWdlJyxcblx0Ly8gRHJhZ1xuXHREUkFHX1NUQVJUOiAnZHJhZ3N0YXJ0Jyxcblx0RFJBRzogJ2RyYWcnLFxuXHREUkFHX0VOVEVSOiAnZHJhZ2VudGVyJyxcblx0RFJBR19MRUFWRTogJ2RyYWdsZWF2ZScsXG5cdERSQUdfT1ZFUjogJ2RyYWdvdmVyJyxcblx0RFJPUDogJ2Ryb3AnLFxuXHREUkFHX0VORDogJ2RyYWdlbmQnLFxuXHQvLyBBbmltYXRpb25cblx0QU5JTUFUSU9OX1NUQVJUOiBicm93c2VyLmlzV2ViS2l0ID8gJ3dlYmtpdEFuaW1hdGlvblN0YXJ0JyA6ICdhbmltYXRpb25zdGFydCcsXG5cdEFOSU1BVElPTl9FTkQ6IGJyb3dzZXIuaXNXZWJLaXQgPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnLFxuXHRBTklNQVRJT05fSVRFUkFUSU9OOiBicm93c2VyLmlzV2ViS2l0ID8gJ3dlYmtpdEFuaW1hdGlvbkl0ZXJhdGlvbicgOiAnYW5pbWF0aW9uaXRlcmF0aW9uJ1xufSBhcyBjb25zdDtcblxuZXhwb3J0IGludGVyZmFjZSBFdmVudExpa2Uge1xuXHRwcmV2ZW50RGVmYXVsdCgpOiB2b2lkO1xuXHRzdG9wUHJvcGFnYXRpb24oKTogdm9pZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXZlbnRMaWtlKG9iajogdW5rbm93bik6IG9iaiBpcyBFdmVudExpa2Uge1xuXHRjb25zdCBjYW5kaWRhdGUgPSBvYmogYXMgRXZlbnRMaWtlIHwgdW5kZWZpbmVkO1xuXG5cdHJldHVybiAhIShjYW5kaWRhdGUgJiYgdHlwZW9mIGNhbmRpZGF0ZS5wcmV2ZW50RGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgY2FuZGlkYXRlLnN0b3BQcm9wYWdhdGlvbiA9PT0gJ2Z1bmN0aW9uJyk7XG59XG5cbmV4cG9ydCBjb25zdCBFdmVudEhlbHBlciA9IHtcblx0c3RvcDogPFQgZXh0ZW5kcyBFdmVudExpa2U+KGU6IFQsIGNhbmNlbEJ1YmJsZT86IGJvb2xlYW4pOiBUID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0aWYgKGNhbmNlbEJ1YmJsZSkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdFx0cmV0dXJuIGU7XG5cdH1cbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUZvY3VzVHJhY2tlciBleHRlbmRzIERpc3Bvc2FibGUge1xuXHRyZWFkb25seSBvbkRpZEZvY3VzOiBldmVudC5FdmVudDx2b2lkPjtcblx0cmVhZG9ubHkgb25EaWRCbHVyOiBldmVudC5FdmVudDx2b2lkPjtcblx0cmVmcmVzaFN0YXRlKCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlUGFyZW50c1Njcm9sbFRvcChub2RlOiBFbGVtZW50KTogbnVtYmVyW10ge1xuXHRjb25zdCByOiBudW1iZXJbXSA9IFtdO1xuXHRmb3IgKGxldCBpID0gMDsgbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSBub2RlLkVMRU1FTlRfTk9ERTsgaSsrKSB7XG5cdFx0cltpXSA9IG5vZGUuc2Nyb2xsVG9wO1xuXHRcdG5vZGUgPSA8RWxlbWVudD5ub2RlLnBhcmVudE5vZGU7XG5cdH1cblx0cmV0dXJuIHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXN0b3JlUGFyZW50c1Njcm9sbFRvcChub2RlOiBFbGVtZW50LCBzdGF0ZTogbnVtYmVyW10pOiB2b2lkIHtcblx0Zm9yIChsZXQgaSA9IDA7IG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREU7IGkrKykge1xuXHRcdGlmIChub2RlLnNjcm9sbFRvcCAhPT0gc3RhdGVbaV0pIHtcblx0XHRcdG5vZGUuc2Nyb2xsVG9wID0gc3RhdGVbaV07XG5cdFx0fVxuXHRcdG5vZGUgPSA8RWxlbWVudD5ub2RlLnBhcmVudE5vZGU7XG5cdH1cbn1cblxuY2xhc3MgRm9jdXNUcmFja2VyIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElGb2N1c1RyYWNrZXIge1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX29uRGlkRm9jdXMgPSB0aGlzLl9yZWdpc3RlcihuZXcgZXZlbnQuRW1pdHRlcjx2b2lkPigpKTtcblx0cmVhZG9ubHkgb25EaWRGb2N1cyA9IHRoaXMuX29uRGlkRm9jdXMuZXZlbnQ7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfb25EaWRCbHVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IGV2ZW50LkVtaXR0ZXI8dm9pZD4oKSk7XG5cdHJlYWRvbmx5IG9uRGlkQmx1ciA9IHRoaXMuX29uRGlkQmx1ci5ldmVudDtcblxuXHRwcml2YXRlIF9yZWZyZXNoU3RhdGVIYW5kbGVyOiAoKSA9PiB2b2lkO1xuXG5cdHByaXZhdGUgc3RhdGljIGhhc0ZvY3VzV2l0aGluKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgV2luZG93KTogYm9vbGVhbiB7XG5cdFx0aWYgKGlzSFRNTEVsZW1lbnQoZWxlbWVudCkpIHtcblx0XHRcdGNvbnN0IHNoYWRvd1Jvb3QgPSBnZXRTaGFkb3dSb290KGVsZW1lbnQpO1xuXHRcdFx0Y29uc3QgYWN0aXZlRWxlbWVudCA9IChzaGFkb3dSb290ID8gc2hhZG93Um9vdC5hY3RpdmVFbGVtZW50IDogZWxlbWVudC5vd25lckRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xuXHRcdFx0cmV0dXJuIGlzQW5jZXN0b3IoYWN0aXZlRWxlbWVudCwgZWxlbWVudCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IHdpbmRvdyA9IGVsZW1lbnQ7XG5cdFx0XHRyZXR1cm4gaXNBbmNlc3Rvcih3aW5kb3cuZG9jdW1lbnQuYWN0aXZlRWxlbWVudCwgd2luZG93LmRvY3VtZW50KTtcblx0XHR9XG5cdH1cblxuXHRjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCB8IFdpbmRvdykge1xuXHRcdHN1cGVyKCk7XG5cdFx0bGV0IGhhc0ZvY3VzID0gRm9jdXNUcmFja2VyLmhhc0ZvY3VzV2l0aGluKGVsZW1lbnQpO1xuXHRcdGxldCBsb29zaW5nRm9jdXMgPSBmYWxzZTtcblxuXHRcdGNvbnN0IG9uRm9jdXMgPSAoKSA9PiB7XG5cdFx0XHRsb29zaW5nRm9jdXMgPSBmYWxzZTtcblx0XHRcdGlmICghaGFzRm9jdXMpIHtcblx0XHRcdFx0aGFzRm9jdXMgPSB0cnVlO1xuXHRcdFx0XHR0aGlzLl9vbkRpZEZvY3VzLmZpcmUoKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3Qgb25CbHVyID0gKCkgPT4ge1xuXHRcdFx0aWYgKGhhc0ZvY3VzKSB7XG5cdFx0XHRcdGxvb3NpbmdGb2N1cyA9IHRydWU7XG5cdFx0XHRcdChpc0hUTUxFbGVtZW50KGVsZW1lbnQpID8gZ2V0V2luZG93KGVsZW1lbnQpIDogZWxlbWVudCkuc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGxvb3NpbmdGb2N1cykge1xuXHRcdFx0XHRcdFx0bG9vc2luZ0ZvY3VzID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRoYXNGb2N1cyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0dGhpcy5fb25EaWRCbHVyLmZpcmUoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sIDApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHR0aGlzLl9yZWZyZXNoU3RhdGVIYW5kbGVyID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgY3VycmVudE5vZGVIYXNGb2N1cyA9IEZvY3VzVHJhY2tlci5oYXNGb2N1c1dpdGhpbig8SFRNTEVsZW1lbnQ+ZWxlbWVudCk7XG5cdFx0XHRpZiAoY3VycmVudE5vZGVIYXNGb2N1cyAhPT0gaGFzRm9jdXMpIHtcblx0XHRcdFx0aWYgKGhhc0ZvY3VzKSB7XG5cdFx0XHRcdFx0b25CbHVyKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0b25Gb2N1cygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcihlbGVtZW50LCBFdmVudFR5cGUuRk9DVVMsIG9uRm9jdXMsIHRydWUpKTtcblx0XHR0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWxlbWVudCwgRXZlbnRUeXBlLkJMVVIsIG9uQmx1ciwgdHJ1ZSkpO1xuXHRcdGlmIChpc0hUTUxFbGVtZW50KGVsZW1lbnQpKSB7XG5cdFx0XHR0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWxlbWVudCwgRXZlbnRUeXBlLkZPQ1VTX0lOLCAoKSA9PiB0aGlzLl9yZWZyZXNoU3RhdGVIYW5kbGVyKCkpKTtcblx0XHRcdHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcihlbGVtZW50LCBFdmVudFR5cGUuRk9DVVNfT1VULCAoKSA9PiB0aGlzLl9yZWZyZXNoU3RhdGVIYW5kbGVyKCkpKTtcblx0XHR9XG5cblx0fVxuXG5cdHJlZnJlc2hTdGF0ZSgpIHtcblx0XHR0aGlzLl9yZWZyZXNoU3RhdGVIYW5kbGVyKCk7XG5cdH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGBJRm9jdXNUcmFja2VyYCBpbnN0YW5jZSB0aGF0IHRyYWNrcyBmb2N1cyBjaGFuZ2VzIG9uIHRoZSBnaXZlbiBgZWxlbWVudGAgYW5kIGl0cyBkZXNjZW5kYW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudCBUaGUgYEhUTUxFbGVtZW50YCBvciBgV2luZG93YCB0byB0cmFjayBmb2N1cyBjaGFuZ2VzIG9uLlxuICogQHJldHVybnMgQW4gYElGb2N1c1RyYWNrZXJgIGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tGb2N1cyhlbGVtZW50OiBIVE1MRWxlbWVudCB8IFdpbmRvdyk6IElGb2N1c1RyYWNrZXIge1xuXHRyZXR1cm4gbmV3IEZvY3VzVHJhY2tlcihlbGVtZW50KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyPFQgZXh0ZW5kcyBOb2RlPihzaWJsaW5nOiBIVE1MRWxlbWVudCwgY2hpbGQ6IFQpOiBUIHtcblx0c2libGluZy5hZnRlcihjaGlsZCk7XG5cdHJldHVybiBjaGlsZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZDxUIGV4dGVuZHMgTm9kZT4ocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IFQpOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZDxUIGV4dGVuZHMgTm9kZT4ocGFyZW50OiBIVE1MRWxlbWVudCwgLi4uY2hpbGRyZW46IChUIHwgc3RyaW5nKVtdKTogdm9pZDtcbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmQ8VCBleHRlbmRzIE5vZGU+KHBhcmVudDogSFRNTEVsZW1lbnQsIC4uLmNoaWxkcmVuOiAoVCB8IHN0cmluZylbXSk6IFQgfCB2b2lkIHtcblx0cGFyZW50LmFwcGVuZCguLi5jaGlsZHJlbik7XG5cdGlmIChjaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgdHlwZW9mIGNoaWxkcmVuWzBdICE9PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiA8VD5jaGlsZHJlblswXTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcHJlcGVuZDxUIGV4dGVuZHMgTm9kZT4ocGFyZW50OiBIVE1MRWxlbWVudCwgY2hpbGQ6IFQpOiBUIHtcblx0cGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgcGFyZW50LmZpcnN0Q2hpbGQpO1xuXHRyZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgY2hpbGRyZW4gZnJvbSBgcGFyZW50YCBhbmQgYXBwZW5kcyBgY2hpbGRyZW5gXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldChwYXJlbnQ6IEhUTUxFbGVtZW50LCAuLi5jaGlsZHJlbjogQXJyYXk8Tm9kZSB8IHN0cmluZz4pOiB2b2lkIHtcblx0cGFyZW50LmlubmVyVGV4dCA9ICcnO1xuXHRhcHBlbmQocGFyZW50LCAuLi5jaGlsZHJlbik7XG59XG5cbmNvbnN0IFNFTEVDVE9SX1JFR0VYID0gLyhbXFx3XFwtXSspPygjKFtcXHdcXC1dKykpPygoXFwuKFtcXHdcXC1dKykpKikvO1xuXG5leHBvcnQgZW51bSBOYW1lc3BhY2Uge1xuXHRIVE1MID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwnLFxuXHRTVkcgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnXG59XG5cbmZ1bmN0aW9uIF8kPFQgZXh0ZW5kcyBFbGVtZW50PihuYW1lc3BhY2U6IE5hbWVzcGFjZSwgZGVzY3JpcHRpb246IHN0cmluZywgYXR0cnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCAuLi5jaGlsZHJlbjogQXJyYXk8Tm9kZSB8IHN0cmluZz4pOiBUIHtcblx0Y29uc3QgbWF0Y2ggPSBTRUxFQ1RPUl9SRUdFWC5leGVjKGRlc2NyaXB0aW9uKTtcblxuXHRpZiAoIW1hdGNoKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdCYWQgdXNlIG9mIGVtbWV0Jyk7XG5cdH1cblxuXHRjb25zdCB0YWdOYW1lID0gbWF0Y2hbMV0gfHwgJ2Rpdic7XG5cdGxldCByZXN1bHQ6IFQ7XG5cblx0aWYgKG5hbWVzcGFjZSAhPT0gTmFtZXNwYWNlLkhUTUwpIHtcblx0XHRyZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlIGFzIHN0cmluZywgdGFnTmFtZSkgYXMgVDtcblx0fSBlbHNlIHtcblx0XHRyZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpIGFzIHVua25vd24gYXMgVDtcblx0fVxuXG5cdGlmIChtYXRjaFszXSkge1xuXHRcdHJlc3VsdC5pZCA9IG1hdGNoWzNdO1xuXHR9XG5cdGlmIChtYXRjaFs0XSkge1xuXHRcdHJlc3VsdC5jbGFzc05hbWUgPSBtYXRjaFs0XS5yZXBsYWNlKC9cXC4vZywgJyAnKS50cmltKCk7XG5cdH1cblxuXHRpZiAoYXR0cnMpIHtcblx0XHRPYmplY3QuZW50cmllcyhhdHRycykuZm9yRWFjaCgoW25hbWUsIHZhbHVlXSkgPT4ge1xuXHRcdFx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoL15vblxcdyskLy50ZXN0KG5hbWUpKSB7XG5cdFx0XHRcdCg8YW55PnJlc3VsdClbbmFtZV0gPSB2YWx1ZTtcblx0XHRcdH0gZWxzZSBpZiAobmFtZSA9PT0gJ3NlbGVjdGVkJykge1xuXHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRyZXN1bHQuc2V0QXR0cmlidXRlKG5hbWUsICd0cnVlJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0LnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRyZXN1bHQuYXBwZW5kKC4uLmNoaWxkcmVuKTtcblxuXHRyZXR1cm4gcmVzdWx0IGFzIFQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiAkPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oZGVzY3JpcHRpb246IHN0cmluZywgYXR0cnM/OiB7IFtrZXk6IHN0cmluZ106IGFueSB9LCAuLi5jaGlsZHJlbjogQXJyYXk8Tm9kZSB8IHN0cmluZz4pOiBUIHtcblx0cmV0dXJuIF8kKE5hbWVzcGFjZS5IVE1MLCBkZXNjcmlwdGlvbiwgYXR0cnMsIC4uLmNoaWxkcmVuKTtcbn1cblxuJC5TVkcgPSBmdW5jdGlvbiA8VCBleHRlbmRzIFNWR0VsZW1lbnQ+KGRlc2NyaXB0aW9uOiBzdHJpbmcsIGF0dHJzPzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSwgLi4uY2hpbGRyZW46IEFycmF5PE5vZGUgfCBzdHJpbmc+KTogVCB7XG5cdHJldHVybiBfJChOYW1lc3BhY2UuU1ZHLCBkZXNjcmlwdGlvbiwgYXR0cnMsIC4uLmNoaWxkcmVuKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBqb2luKG5vZGVzOiBOb2RlW10sIHNlcGFyYXRvcjogTm9kZSB8IHN0cmluZyk6IE5vZGVbXSB7XG5cdGNvbnN0IHJlc3VsdDogTm9kZVtdID0gW107XG5cblx0bm9kZXMuZm9yRWFjaCgobm9kZSwgaW5kZXgpID0+IHtcblx0XHRpZiAoaW5kZXggPiAwKSB7XG5cdFx0XHRpZiAoc2VwYXJhdG9yIGluc3RhbmNlb2YgTm9kZSkge1xuXHRcdFx0XHRyZXN1bHQucHVzaChzZXBhcmF0b3IuY2xvbmVOb2RlKCkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVzdWx0LnB1c2goZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2VwYXJhdG9yKSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmVzdWx0LnB1c2gobm9kZSk7XG5cdH0pO1xuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4sIC4uLmVsZW1lbnRzOiBIVE1MRWxlbWVudFtdKTogdm9pZCB7XG5cdGlmICh2aXNpYmxlKSB7XG5cdFx0c2hvdyguLi5lbGVtZW50cyk7XG5cdH0gZWxzZSB7XG5cdFx0aGlkZSguLi5lbGVtZW50cyk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3coLi4uZWxlbWVudHM6IEhUTUxFbGVtZW50W10pOiB2b2lkIHtcblx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG5cdFx0ZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGUoLi4uZWxlbWVudHM6IEhUTUxFbGVtZW50W10pOiB2b2lkIHtcblx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG5cdFx0ZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZmluZFBhcmVudFdpdGhBdHRyaWJ1dGUobm9kZTogTm9kZSB8IG51bGwsIGF0dHJpYnV0ZTogc3RyaW5nKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcblx0d2hpbGUgKG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREUpIHtcblx0XHRpZiAoaXNIVE1MRWxlbWVudChub2RlKSAmJiBub2RlLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpKSB7XG5cdFx0XHRyZXR1cm4gbm9kZTtcblx0XHR9XG5cblx0XHRub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHR9XG5cblx0cmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUYWJJbmRleEFuZFVwZGF0ZUZvY3VzKG5vZGU6IEhUTUxFbGVtZW50KTogdm9pZCB7XG5cdGlmICghbm9kZSB8fCAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3RhYkluZGV4JykpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBJZiB3ZSBhcmUgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGVsZW1lbnQgYW5kIHRhYkluZGV4IGlzIHJlbW92ZWQsXG5cdC8vIHN0YW5kYXJkIERPTSBiZWhhdmlvciBpcyB0byBtb3ZlIGZvY3VzIHRvIHRoZSA8Ym9keT4gZWxlbWVudC4gV2Vcblx0Ly8gdHlwaWNhbGx5IG5ldmVyIHdhbnQgdGhhdCwgcmF0aGVyIHB1dCBmb2N1cyB0byB0aGUgY2xvc2VzdCBlbGVtZW50XG5cdC8vIGluIHRoZSBoaWVyYXJjaHkgb2YgdGhlIHBhcmVudCBET00gbm9kZXMuXG5cdGlmIChub2RlLm93bmVyRG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gbm9kZSkge1xuXHRcdGNvbnN0IHBhcmVudEZvY3VzYWJsZSA9IGZpbmRQYXJlbnRXaXRoQXR0cmlidXRlKG5vZGUucGFyZW50RWxlbWVudCwgJ3RhYkluZGV4Jyk7XG5cdFx0cGFyZW50Rm9jdXNhYmxlPy5mb2N1cygpO1xuXHR9XG5cblx0bm9kZS5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5hbEhhbmRsZXI8VCBleHRlbmRzIEV2ZW50PihmbjogKGV2ZW50OiBUKSA9PiBhbnkpOiAoZXZlbnQ6IFQpID0+IGFueSB7XG5cdHJldHVybiBlID0+IHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRmbihlKTtcblx0fTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRvbUNvbnRlbnRMb2FkZWQodGFyZ2V0V2luZG93OiBXaW5kb3cpOiBQcm9taXNlPHZvaWQ+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlc29sdmUgPT4ge1xuXHRcdGNvbnN0IHJlYWR5U3RhdGUgPSB0YXJnZXRXaW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZTtcblx0XHRpZiAocmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJyB8fCAodGFyZ2V0V2luZG93LmRvY3VtZW50ICYmIHRhcmdldFdpbmRvdy5kb2N1bWVudC5ib2R5ICE9PSBudWxsKSkge1xuXHRcdFx0cmVzb2x2ZSh1bmRlZmluZWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBsaXN0ZW5lciA9ICgpID0+IHtcblx0XHRcdFx0dGFyZ2V0V2luZG93LndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbGlzdGVuZXIsIGZhbHNlKTtcblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fTtcblxuXHRcdFx0dGFyZ2V0V2luZG93LndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbGlzdGVuZXIsIGZhbHNlKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vKipcbiAqIEZpbmQgYSB2YWx1ZSB1c2FibGUgZm9yIGEgZG9tIG5vZGUgc2l6ZSBzdWNoIHRoYXQgdGhlIGxpa2VsaWhvb2QgdGhhdCBpdCB3b3VsZCBiZVxuICogZGlzcGxheWVkIHdpdGggY29uc3RhbnQgc2NyZWVuIHBpeGVscyBzaXplIGlzIGFzIGhpZ2ggYXMgcG9zc2libGUuXG4gKlxuICogZS5nLiBXZSB3b3VsZCBkZXNpcmUgZm9yIHRoZSBjdXJzb3JzIHRvIGJlIDJweCAoQ1NTIHB4KSB3aWRlLiBVbmRlciBhIGRldmljZVBpeGVsUmF0aW9cbiAqIG9mIDEuMjUsIHRoZSBjdXJzb3Igd2lsbCBiZSAyLjUgc2NyZWVuIHBpeGVscyB3aWRlLiBEZXBlbmRpbmcgb24gaG93IHRoZSBkb20gbm9kZSBhbGlnbnMvXCJzbmFwc1wiXG4gKiB3aXRoIHRoZSBzY3JlZW4gcGl4ZWxzLCBpdCB3aWxsIHNvbWV0aW1lcyBiZSByZW5kZXJlZCB3aXRoIDIgc2NyZWVuIHBpeGVscywgYW5kIHNvbWV0aW1lcyB3aXRoIDMgc2NyZWVuIHBpeGVscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVTY3JlZW5Bd2FyZVNpemUod2luZG93OiBXaW5kb3csIGNzc1B4OiBudW1iZXIpOiBudW1iZXIge1xuXHRjb25zdCBzY3JlZW5QeCA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICogY3NzUHg7XG5cdHJldHVybiBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHNjcmVlblB4KSkgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbn1cblxuLyoqXG4gKiBPcGVuIHNhZmVseSBhIG5ldyB3aW5kb3cuIFRoaXMgaXMgdGhlIGJlc3Qgd2F5IHRvIGRvIHNvLCBidXQgeW91IGNhbm5vdCB0ZWxsXG4gKiBpZiB0aGUgd2luZG93IHdhcyBvcGVuZWQgb3IgaWYgaXQgd2FzIGJsb2NrZWQgYnkgdGhlIGJyb3dzZXIncyBwb3B1cCBibG9ja2VyLlxuICogSWYgeW91IHdhbnQgdG8gdGVsbCBpZiB0aGUgYnJvd3NlciBibG9ja2VkIHRoZSBuZXcgd2luZG93LCB1c2Uge0BsaW5rIHdpbmRvd09wZW5XaXRoU3VjY2Vzc30uXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvNjAxXG4gKiBUbyBwcm90ZWN0IGFnYWluc3QgbWFsaWNpb3VzIGNvZGUgaW4gdGhlIGxpbmtlZCBzaXRlLCBwYXJ0aWN1bGFybHkgcGhpc2hpbmcgYXR0ZW1wdHMsXG4gKiB0aGUgd2luZG93Lm9wZW5lciBzaG91bGQgYmUgc2V0IHRvIG51bGwgdG8gcHJldmVudCB0aGUgbGlua2VkIHNpdGUgZnJvbSBoYXZpbmcgYWNjZXNzXG4gKiB0byBjaGFuZ2UgdGhlIGxvY2F0aW9uIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBTZWUgaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmdpdGh1Yi5pby9yZWwtbm9vcGVuZXIvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aW5kb3dPcGVuTm9PcGVuZXIodXJsOiBzdHJpbmcpOiB2b2lkIHtcblx0Ly8gQnkgdXNpbmcgJ25vb3BlbmVyJyBpbiB0aGUgYHdpbmRvd0ZlYXR1cmVzYCBhcmd1bWVudCwgdGhlIG5ld2x5IGNyZWF0ZWQgd2luZG93IHdpbGxcblx0Ly8gbm90IGJlIGFibGUgdG8gdXNlIGB3aW5kb3cub3BlbmVyYCB0byByZWFjaCBiYWNrIHRvIHRoZSBjdXJyZW50IHBhZ2UuXG5cdC8vIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDY5NTg3MzFcblx0Ly8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9XaW5kb3cvb3BlbiNub29wZW5lclxuXHQvLyBIb3dldmVyLCB0aGlzIGFsc28gZG9lc24ndCBhbGxvdyB1cyB0byByZWFsaXplIGlmIHRoZSBicm93c2VyIGJsb2NrZWRcblx0Ly8gdGhlIGNyZWF0aW9uIG9mIHRoZSB3aW5kb3cuXG5cdG1haW5XaW5kb3cub3Blbih1cmwsICdfYmxhbmsnLCAnbm9vcGVuZXInKTtcbn1cblxuLyoqXG4gKiBPcGVuIGEgbmV3IHdpbmRvdyBpbiBhIHBvcHVwLiBUaGlzIGlzIHRoZSBiZXN0IHdheSB0byBkbyBzbywgYnV0IHlvdSBjYW5ub3QgdGVsbFxuICogaWYgdGhlIHdpbmRvdyB3YXMgb3BlbmVkIG9yIGlmIGl0IHdhcyBibG9ja2VkIGJ5IHRoZSBicm93c2VyJ3MgcG9wdXAgYmxvY2tlci5cbiAqIElmIHlvdSB3YW50IHRvIHRlbGwgaWYgdGhlIGJyb3dzZXIgYmxvY2tlZCB0aGUgbmV3IHdpbmRvdywgdXNlIHtAbGluayB3aW5kb3dPcGVuV2l0aFN1Y2Nlc3N9LlxuICpcbiAqIE5vdGU6IHRoaXMgZG9lcyBub3Qgc2V0IHtAbGluayB3aW5kb3cub3BlbmVyfSB0byBudWxsLiBUaGlzIGlzIHRvIGFsbG93IHRoZSBvcGVuZWQgcG9wdXAgdG9cbiAqIGJlIGFibGUgdG8gdXNlIHtAbGluayB3aW5kb3cuY2xvc2V9IHRvIGNsb3NlIGl0c2VsZi4gQmVjYXVzZSBvZiB0aGlzLCB5b3Ugc2hvdWxkIG9ubHkgdXNlXG4gKiB0aGlzIGZ1bmN0aW9uIG9uIHVybHMgdGhhdCB5b3UgdHJ1c3QuXG4gKlxuICogSW4gb3RoZXJ3b3JkcywgeW91IHNob3VsZCBhbG1vc3QgYWx3YXlzIHVzZSB7QGxpbmsgd2luZG93T3Blbk5vT3BlbmVyfSBpbnN0ZWFkIG9mIHRoaXMgZnVuY3Rpb24uXG4gKi9cbmNvbnN0IHBvcHVwV2lkdGggPSA3ODAsIHBvcHVwSGVpZ2h0ID0gNjQwO1xuZXhwb3J0IGZ1bmN0aW9uIHdpbmRvd09wZW5Qb3B1cCh1cmw6IHN0cmluZyk6IHZvaWQge1xuXHRjb25zdCBsZWZ0ID0gTWF0aC5mbG9vcihtYWluV2luZG93LnNjcmVlbkxlZnQgKyBtYWluV2luZG93LmlubmVyV2lkdGggLyAyIC0gcG9wdXBXaWR0aCAvIDIpO1xuXHRjb25zdCB0b3AgPSBNYXRoLmZsb29yKG1haW5XaW5kb3cuc2NyZWVuVG9wICsgbWFpbldpbmRvdy5pbm5lckhlaWdodCAvIDIgLSBwb3B1cEhlaWdodCAvIDIpO1xuXHRtYWluV2luZG93Lm9wZW4oXG5cdFx0dXJsLFxuXHRcdCdfYmxhbmsnLFxuXHRcdGB3aWR0aD0ke3BvcHVwV2lkdGh9LGhlaWdodD0ke3BvcHVwSGVpZ2h0fSx0b3A9JHt0b3B9LGxlZnQ9JHtsZWZ0fWBcblx0KTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBvcGVuIGEgd2luZG93IGFuZCByZXR1cm5zIHdoZXRoZXIgaXQgc3VjY2VlZGVkLiBUaGlzIHRlY2huaXF1ZSBpc1xuICogbm90IGFwcHJvcHJpYXRlIGluIGNlcnRhaW4gY29udGV4dHMsIGxpa2UgZm9yIGV4YW1wbGUgd2hlbiB0aGUgSlMgY29udGV4dCBpc1xuICogZXhlY3V0aW5nIGluc2lkZSBhIHNhbmRib3hlZCBpZnJhbWUuIElmIGl0IGlzIG5vdCBuZWNlc3NhcnkgdG8ga25vdyBpZiB0aGVcbiAqIGJyb3dzZXIgYmxvY2tlZCB0aGUgbmV3IHdpbmRvdywgdXNlIHtAbGluayB3aW5kb3dPcGVuTm9PcGVuZXJ9LlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L21vbmFjby1lZGl0b3IvaXNzdWVzLzYwMVxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvMjQ3NFxuICogU2VlIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5naXRodWIuaW8vcmVsLW5vb3BlbmVyL1xuICpcbiAqIEBwYXJhbSB1cmwgdGhlIHVybCB0byBvcGVuXG4gKiBAcGFyYW0gbm9PcGVuZXIgd2hldGhlciBvciBub3QgdG8gc2V0IHRoZSB7QGxpbmsgd2luZG93Lm9wZW5lcn0gdG8gbnVsbC4gWW91IHNob3VsZCBsZWF2ZSB0aGUgZGVmYXVsdFxuICogKHRydWUpIHVubGVzcyB5b3UgdHJ1c3QgdGhlIHVybCB0aGF0IGlzIGJlaW5nIG9wZW5lZC5cbiAqIEByZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGUge0BsaW5rIHdpbmRvdy5vcGVufSBjYWxsIHN1Y2NlZWRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2luZG93T3BlbldpdGhTdWNjZXNzKHVybDogc3RyaW5nLCBub09wZW5lciA9IHRydWUpOiBib29sZWFuIHtcblx0Y29uc3QgbmV3VGFiID0gbWFpbldpbmRvdy5vcGVuKCk7XG5cdGlmIChuZXdUYWIpIHtcblx0XHRpZiAobm9PcGVuZXIpIHtcblx0XHRcdC8vIHNlZSBgd2luZG93T3Blbk5vT3BlbmVyYCBmb3IgZGV0YWlscyBvbiB3aHkgdGhpcyBpcyBpbXBvcnRhbnRcblx0XHRcdChuZXdUYWIgYXMgYW55KS5vcGVuZXIgPSBudWxsO1xuXHRcdH1cblx0XHRuZXdUYWIubG9jYXRpb24uaHJlZiA9IHVybDtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmltYXRlKHRhcmdldFdpbmRvdzogV2luZG93LCBmbjogKCkgPT4gdm9pZCk6IElEaXNwb3NhYmxlIHtcblx0Y29uc3Qgc3RlcCA9ICgpID0+IHtcblx0XHRmbigpO1xuXHRcdHN0ZXBEaXNwb3NhYmxlID0gc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSh0YXJnZXRXaW5kb3csIHN0ZXApO1xuXHR9O1xuXG5cdGxldCBzdGVwRGlzcG9zYWJsZSA9IHNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUodGFyZ2V0V2luZG93LCBzdGVwKTtcblx0cmV0dXJuIHRvRGlzcG9zYWJsZSgoKSA9PiBzdGVwRGlzcG9zYWJsZS5kaXNwb3NlKCkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNDU1NQcm9wZXJ0eVZhbHVlKHZhbHVlOiBzdHJpbmcpIHtcblx0cmV0dXJuIGAnJHt2YWx1ZS5yZXBsYWNlKC8nL2csICclMjcnKX0nYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzQ3NzVmFsdWVXaXRoRGVmYXVsdChjc3NQcm9wZXJ0eVZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGRmbHQ6IHN0cmluZyk6IHN0cmluZyB7XG5cdGlmIChjc3NQcm9wZXJ0eVZhbHVlICE9PSB1bmRlZmluZWQpIHtcblx0XHRjb25zdCB2YXJpYWJsZU1hdGNoID0gY3NzUHJvcGVydHlWYWx1ZS5tYXRjaCgvXlxccyp2YXJcXCgoLispXFwpJC8pO1xuXHRcdGlmICh2YXJpYWJsZU1hdGNoKSB7XG5cdFx0XHRjb25zdCB2YXJBcmd1bWVudHMgPSB2YXJpYWJsZU1hdGNoWzFdLnNwbGl0KCcsJywgMik7XG5cdFx0XHRpZiAodmFyQXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuXHRcdFx0XHRkZmx0ID0gYXNDc3NWYWx1ZVdpdGhEZWZhdWx0KHZhckFyZ3VtZW50c1sxXS50cmltKCksIGRmbHQpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGB2YXIoJHt2YXJBcmd1bWVudHNbMF19LCAke2RmbHR9KWA7XG5cdFx0fVxuXHRcdHJldHVybiBjc3NQcm9wZXJ0eVZhbHVlO1xuXHR9XG5cdHJldHVybiBkZmx0O1xufVxuXG5leHBvcnQgZW51bSBEZXRlY3RlZEZ1bGxzY3JlZW5Nb2RlIHtcblxuXHQvKipcblx0ICogVGhlIGRvY3VtZW50IGlzIGZ1bGxzY3JlZW4sIGUuZy4gYmVjYXVzZSBhbiBlbGVtZW50XG5cdCAqIGluIHRoZSBkb2N1bWVudCByZXF1ZXN0ZWQgdG8gYmUgZnVsbHNjcmVlbi5cblx0ICovXG5cdERPQ1VNRU5UID0gMSxcblxuXHQvKipcblx0ICogVGhlIGJyb3dzZXIgaXMgZnVsbHNjcmVlbiwgZS5nLiBiZWNhdXNlIHRoZSB1c2VyIGVuYWJsZWRcblx0ICogbmF0aXZlIHdpbmRvdyBmdWxsc2NyZWVuIGZvciBpdC5cblx0ICovXG5cdEJST1dTRVJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGV0ZWN0ZWRGdWxsc2NyZWVuIHtcblxuXHQvKipcblx0ICogRmlndXJlIG91dCBpZiB0aGUgZG9jdW1lbnQgaXMgZnVsbHNjcmVlbiBvciB0aGUgYnJvd3Nlci5cblx0ICovXG5cdG1vZGU6IERldGVjdGVkRnVsbHNjcmVlbk1vZGU7XG5cblx0LyoqXG5cdCAqIFdoZXRoZXIgd2Uga25vdyBmb3Igc3VyZSB0aGF0IHdlIGFyZSBpbiBmdWxsc2NyZWVuIG1vZGUgb3Jcblx0ICogaXQgaXMgYSBndWVzcy5cblx0ICovXG5cdGd1ZXNzOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RnVsbHNjcmVlbih0YXJnZXRXaW5kb3c6IFdpbmRvdyk6IElEZXRlY3RlZEZ1bGxzY3JlZW4gfCBudWxsIHtcblxuXHQvLyBCcm93c2VyIGZ1bGxzY3JlZW46IHVzZSBET00gQVBJcyB0byBkZXRlY3Rcblx0aWYgKHRhcmdldFdpbmRvdy5kb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCB8fCAoPGFueT50YXJnZXRXaW5kb3cuZG9jdW1lbnQpLndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50IHx8ICg8YW55PnRhcmdldFdpbmRvdy5kb2N1bWVudCkud2Via2l0SXNGdWxsU2NyZWVuKSB7XG5cdFx0cmV0dXJuIHsgbW9kZTogRGV0ZWN0ZWRGdWxsc2NyZWVuTW9kZS5ET0NVTUVOVCwgZ3Vlc3M6IGZhbHNlIH07XG5cdH1cblxuXHQvLyBUaGVyZSBpcyBubyBzdGFuZGFyZCB3YXkgdG8gZmlndXJlIG91dCBpZiB0aGUgYnJvd3NlclxuXHQvLyBpcyB1c2luZyBuYXRpdmUgZnVsbHNjcmVlbi4gVmlhIGNoZWNraW5nIG9uIHNjcmVlblxuXHQvLyBoZWlnaHQgYW5kIGNvbXBhcmluZyB0aGF0IHRvIHdpbmRvdyBoZWlnaHQsIHdlIGNhbiBndWVzc1xuXHQvLyBpdCB0aG91Z2guXG5cblx0aWYgKHRhcmdldFdpbmRvdy5pbm5lckhlaWdodCA9PT0gdGFyZ2V0V2luZG93LnNjcmVlbi5oZWlnaHQpIHtcblx0XHQvLyBpZiB0aGUgaGVpZ2h0IG9mIHRoZSB3aW5kb3cgbWF0Y2hlcyB0aGUgc2NyZWVuIGhlaWdodCwgd2UgY2FuXG5cdFx0Ly8gc2FmZWx5IGFzc3VtZSB0aGF0IHRoZSBicm93c2VyIGlzIGZ1bGxzY3JlZW4gYmVjYXVzZSBubyBicm93c2VyXG5cdFx0Ly8gY2hyb21lIGlzIHRha2luZyBoZWlnaHQgYXdheSAoZS5nLiBsaWtlIHRvb2xiYXJzKS5cblx0XHRyZXR1cm4geyBtb2RlOiBEZXRlY3RlZEZ1bGxzY3JlZW5Nb2RlLkJST1dTRVIsIGd1ZXNzOiBmYWxzZSB9O1xuXHR9XG5cblx0aWYgKHBsYXRmb3JtLmlzTWFjaW50b3NoIHx8IHBsYXRmb3JtLmlzTGludXgpIHtcblx0XHQvLyBtYWNPUyBhbmQgTGludXggZG8gbm90IHByb3Blcmx5IHJlcG9ydCBgaW5uZXJIZWlnaHRgLCBvbmx5IFdpbmRvd3MgZG9lc1xuXHRcdGlmICh0YXJnZXRXaW5kb3cub3V0ZXJIZWlnaHQgPT09IHRhcmdldFdpbmRvdy5zY3JlZW4uaGVpZ2h0ICYmIHRhcmdldFdpbmRvdy5vdXRlcldpZHRoID09PSB0YXJnZXRXaW5kb3cuc2NyZWVuLndpZHRoKSB7XG5cdFx0XHQvLyBpZiB0aGUgaGVpZ2h0IG9mIHRoZSBicm93c2VyIG1hdGNoZXMgdGhlIHNjcmVlbiBoZWlnaHQsIHdlIGNhblxuXHRcdFx0Ly8gb25seSBndWVzcyB0aGF0IHdlIGFyZSBpbiBmdWxsc2NyZWVuLiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRoYXRcblx0XHRcdC8vIHRoZSB1c2VyIGhhcyB0dXJuZWQgb2ZmIHRhc2tiYXJzIGluIHRoZSBPUyBhbmQgdGhlIGJyb3dzZXIgaXNcblx0XHRcdC8vIHNpbXBseSBhYmxlIHRvIHNwYW4gdGhlIGVudGlyZSBzaXplIG9mIHRoZSBzY3JlZW4uXG5cdFx0XHRyZXR1cm4geyBtb2RlOiBEZXRlY3RlZEZ1bGxzY3JlZW5Nb2RlLkJST1dTRVIsIGd1ZXNzOiB0cnVlIH07XG5cdFx0fVxuXHR9XG5cblx0Ly8gTm90IGluIGZ1bGxzY3JlZW5cblx0cmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ29udmVydCBhIFVuaWNvZGUgc3RyaW5nIHRvIGEgc3RyaW5nIGluIHdoaWNoIGVhY2ggMTYtYml0IHVuaXQgb2NjdXBpZXMgb25seSBvbmUgYnl0ZVxuICpcbiAqIEZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvd09yV29ya2VyR2xvYmFsU2NvcGUvYnRvYVxuICovXG5mdW5jdGlvbiB0b0JpbmFyeShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG5cdGNvbnN0IGNvZGVVbml0cyA9IG5ldyBVaW50MTZBcnJheShzdHIubGVuZ3RoKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlVW5pdHMubGVuZ3RoOyBpKyspIHtcblx0XHRjb2RlVW5pdHNbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcblx0fVxuXHRsZXQgYmluYXJ5ID0gJyc7XG5cdGNvbnN0IHVpbnQ4YXJyYXkgPSBuZXcgVWludDhBcnJheShjb2RlVW5pdHMuYnVmZmVyKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCB1aW50OGFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0YmluYXJ5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodWludDhhcnJheVtpXSk7XG5cdH1cblx0cmV0dXJuIGJpbmFyeTtcbn1cblxuLyoqXG4gKiBWZXJzaW9uIG9mIHRoZSBnbG9iYWwgYGJ0b2FgIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBtdWx0aS1ieXRlIGNoYXJhY3RlcnMgaW5zdGVhZFxuICogb2YgdGhyb3dpbmcgYW4gZXhjZXB0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlieXRlQXdhcmVCdG9hKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcblx0cmV0dXJuIGJ0b2EodG9CaW5hcnkoc3RyKSk7XG59XG5cbnR5cGUgTW9kaWZpZXJLZXkgPSAnYWx0JyB8ICdjdHJsJyB8ICdzaGlmdCcgfCAnbWV0YSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU1vZGlmaWVyS2V5U3RhdHVzIHtcblx0YWx0S2V5OiBib29sZWFuO1xuXHRzaGlmdEtleTogYm9vbGVhbjtcblx0Y3RybEtleTogYm9vbGVhbjtcblx0bWV0YUtleTogYm9vbGVhbjtcblx0bGFzdEtleVByZXNzZWQ/OiBNb2RpZmllcktleTtcblx0bGFzdEtleVJlbGVhc2VkPzogTW9kaWZpZXJLZXk7XG5cdGV2ZW50PzogS2V5Ym9hcmRFdmVudDtcbn1cblxuZXhwb3J0IGNsYXNzIE1vZGlmaWVyS2V5RW1pdHRlciBleHRlbmRzIGV2ZW50LkVtaXR0ZXI8SU1vZGlmaWVyS2V5U3RhdHVzPiB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfc3Vic2NyaXB0aW9ucyA9IG5ldyBEaXNwb3NhYmxlU3RvcmUoKTtcblx0cHJpdmF0ZSBfa2V5U3RhdHVzOiBJTW9kaWZpZXJLZXlTdGF0dXM7XG5cdHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBNb2RpZmllcktleUVtaXR0ZXI7XG5cblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy5fa2V5U3RhdHVzID0ge1xuXHRcdFx0YWx0S2V5OiBmYWxzZSxcblx0XHRcdHNoaWZ0S2V5OiBmYWxzZSxcblx0XHRcdGN0cmxLZXk6IGZhbHNlLFxuXHRcdFx0bWV0YUtleTogZmFsc2Vcblx0XHR9O1xuXG5cdFx0dGhpcy5fc3Vic2NyaXB0aW9ucy5hZGQoZXZlbnQuRXZlbnQucnVuQW5kU3Vic2NyaWJlKG9uRGlkUmVnaXN0ZXJXaW5kb3csICh7IHdpbmRvdywgZGlzcG9zYWJsZXMgfSkgPT4gdGhpcy5yZWdpc3Rlckxpc3RlbmVycyh3aW5kb3csIGRpc3Bvc2FibGVzKSwgeyB3aW5kb3c6IG1haW5XaW5kb3csIGRpc3Bvc2FibGVzOiB0aGlzLl9zdWJzY3JpcHRpb25zIH0pKTtcblx0fVxuXG5cdHByaXZhdGUgcmVnaXN0ZXJMaXN0ZW5lcnMod2luZG93OiBXaW5kb3csIGRpc3Bvc2FibGVzOiBEaXNwb3NhYmxlU3RvcmUpOiB2b2lkIHtcblx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdywgJ2tleWRvd24nLCBlID0+IHtcblx0XHRcdGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBldmVudCA9IG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSk7XG5cdFx0XHQvLyBJZiBBbHQta2V5IGtleWRvd24gZXZlbnQgaXMgcmVwZWF0ZWQsIGlnbm9yZSBpdCAjMTEyMzQ3XG5cdFx0XHQvLyBPbmx5IGtub3duIHRvIGJlIG5lY2Vzc2FyeSBmb3IgQWx0LUtleSBhdCB0aGUgbW9tZW50ICMxMTU4MTBcblx0XHRcdGlmIChldmVudC5rZXlDb2RlID09PSBLZXlDb2RlLkFsdCAmJiBlLnJlcGVhdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChlLmFsdEtleSAmJiAhdGhpcy5fa2V5U3RhdHVzLmFsdEtleSkge1xuXHRcdFx0XHR0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSAnYWx0Jztcblx0XHRcdH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmICF0aGlzLl9rZXlTdGF0dXMuY3RybEtleSkge1xuXHRcdFx0XHR0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSAnY3RybCc7XG5cdFx0XHR9IGVsc2UgaWYgKGUubWV0YUtleSAmJiAhdGhpcy5fa2V5U3RhdHVzLm1ldGFLZXkpIHtcblx0XHRcdFx0dGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ21ldGEnO1xuXHRcdFx0fSBlbHNlIGlmIChlLnNoaWZ0S2V5ICYmICF0aGlzLl9rZXlTdGF0dXMuc2hpZnRLZXkpIHtcblx0XHRcdFx0dGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ3NoaWZ0Jztcblx0XHRcdH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSAhPT0gS2V5Q29kZS5BbHQpIHtcblx0XHRcdFx0dGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7XG5cdFx0XHR0aGlzLl9rZXlTdGF0dXMuY3RybEtleSA9IGUuY3RybEtleTtcblx0XHRcdHRoaXMuX2tleVN0YXR1cy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuXHRcdFx0dGhpcy5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcblxuXHRcdFx0aWYgKHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCkge1xuXHRcdFx0XHR0aGlzLl9rZXlTdGF0dXMuZXZlbnQgPSBlO1xuXHRcdFx0XHR0aGlzLmZpcmUodGhpcy5fa2V5U3RhdHVzKTtcblx0XHRcdH1cblx0XHR9LCB0cnVlKSk7XG5cblx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdywgJ2tleXVwJywgZSA9PiB7XG5cdFx0XHRpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCFlLmFsdEtleSAmJiB0aGlzLl9rZXlTdGF0dXMuYWx0S2V5KSB7XG5cdFx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQgPSAnYWx0Jztcblx0XHRcdH0gZWxzZSBpZiAoIWUuY3RybEtleSAmJiB0aGlzLl9rZXlTdGF0dXMuY3RybEtleSkge1xuXHRcdFx0XHR0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ2N0cmwnO1xuXHRcdFx0fSBlbHNlIGlmICghZS5tZXRhS2V5ICYmIHRoaXMuX2tleVN0YXR1cy5tZXRhS2V5KSB7XG5cdFx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQgPSAnbWV0YSc7XG5cdFx0XHR9IGVsc2UgaWYgKCFlLnNoaWZ0S2V5ICYmIHRoaXMuX2tleVN0YXR1cy5zaGlmdEtleSkge1xuXHRcdFx0XHR0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ3NoaWZ0Jztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgIT09IHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQpIHtcblx0XHRcdFx0dGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7XG5cdFx0XHR0aGlzLl9rZXlTdGF0dXMuY3RybEtleSA9IGUuY3RybEtleTtcblx0XHRcdHRoaXMuX2tleVN0YXR1cy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuXHRcdFx0dGhpcy5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcblxuXHRcdFx0aWYgKHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQpIHtcblx0XHRcdFx0dGhpcy5fa2V5U3RhdHVzLmV2ZW50ID0gZTtcblx0XHRcdFx0dGhpcy5maXJlKHRoaXMuX2tleVN0YXR1cyk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSkpO1xuXG5cdFx0ZGlzcG9zYWJsZXMuYWRkKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih3aW5kb3cuZG9jdW1lbnQuYm9keSwgJ21vdXNlZG93bicsICgpID0+IHtcblx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDtcblx0XHR9LCB0cnVlKSk7XG5cblx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdy5kb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsICgpID0+IHtcblx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDtcblx0XHR9LCB0cnVlKSk7XG5cblx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdy5kb2N1bWVudC5ib2R5LCAnbW91c2Vtb3ZlJywgZSA9PiB7XG5cdFx0XHRpZiAoZS5idXR0b25zKSB7XG5cdFx0XHRcdHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9LCB0cnVlKSk7XG5cblx0XHRkaXNwb3NhYmxlcy5hZGQoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdywgJ2JsdXInLCAoKSA9PiB7XG5cdFx0XHR0aGlzLnJlc2V0S2V5U3RhdHVzKCk7XG5cdFx0fSkpO1xuXHR9XG5cblx0Z2V0IGtleVN0YXR1cygpOiBJTW9kaWZpZXJLZXlTdGF0dXMge1xuXHRcdHJldHVybiB0aGlzLl9rZXlTdGF0dXM7XG5cdH1cblxuXHRnZXQgaXNNb2RpZmllclByZXNzZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2tleVN0YXR1cy5hbHRLZXkgfHwgdGhpcy5fa2V5U3RhdHVzLmN0cmxLZXkgfHwgdGhpcy5fa2V5U3RhdHVzLm1ldGFLZXkgfHwgdGhpcy5fa2V5U3RhdHVzLnNoaWZ0S2V5O1xuXHR9XG5cblx0LyoqXG5cdCAqIEFsbG93cyB0byBleHBsaWNpdGx5IHJlc2V0IHRoZSBrZXkgc3RhdHVzIGJhc2VkIG9uIG1vcmUga25vd2xlZGdlICgjMTA5MDYyKVxuXHQgKi9cblx0cmVzZXRLZXlTdGF0dXMoKTogdm9pZCB7XG5cdFx0dGhpcy5kb1Jlc2V0S2V5U3RhdHVzKCk7XG5cdFx0dGhpcy5maXJlKHRoaXMuX2tleVN0YXR1cyk7XG5cdH1cblxuXHRwcml2YXRlIGRvUmVzZXRLZXlTdGF0dXMoKTogdm9pZCB7XG5cdFx0dGhpcy5fa2V5U3RhdHVzID0ge1xuXHRcdFx0YWx0S2V5OiBmYWxzZSxcblx0XHRcdHNoaWZ0S2V5OiBmYWxzZSxcblx0XHRcdGN0cmxLZXk6IGZhbHNlLFxuXHRcdFx0bWV0YUtleTogZmFsc2Vcblx0XHR9O1xuXHR9XG5cblx0c3RhdGljIGdldEluc3RhbmNlKCkge1xuXHRcdGlmICghTW9kaWZpZXJLZXlFbWl0dGVyLmluc3RhbmNlKSB7XG5cdFx0XHRNb2RpZmllcktleUVtaXR0ZXIuaW5zdGFuY2UgPSBuZXcgTW9kaWZpZXJLZXlFbWl0dGVyKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIE1vZGlmaWVyS2V5RW1pdHRlci5pbnN0YW5jZTtcblx0fVxuXG5cdG92ZXJyaWRlIGRpc3Bvc2UoKSB7XG5cdFx0c3VwZXIuZGlzcG9zZSgpO1xuXHRcdHRoaXMuX3N1YnNjcmlwdGlvbnMuZGlzcG9zZSgpO1xuXHR9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29raWVWYWx1ZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuXHRjb25zdCBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaCgnKF58W147XSspXFxcXHMqJyArIG5hbWUgKyAnXFxcXHMqPVxcXFxzKihbXjtdKyknKTsgLy8gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNTQ5MDUzMVxuXG5cdHJldHVybiBtYXRjaCA/IG1hdGNoLnBvcCgpIDogdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEcmFnQW5kRHJvcE9ic2VydmVyQ2FsbGJhY2tzIHtcblx0cmVhZG9ubHkgb25EcmFnRW50ZXI/OiAoZTogRHJhZ0V2ZW50KSA9PiB2b2lkO1xuXHRyZWFkb25seSBvbkRyYWdMZWF2ZT86IChlOiBEcmFnRXZlbnQpID0+IHZvaWQ7XG5cdHJlYWRvbmx5IG9uRHJvcD86IChlOiBEcmFnRXZlbnQpID0+IHZvaWQ7XG5cdHJlYWRvbmx5IG9uRHJhZ0VuZD86IChlOiBEcmFnRXZlbnQpID0+IHZvaWQ7XG5cdHJlYWRvbmx5IG9uRHJhZ1N0YXJ0PzogKGU6IERyYWdFdmVudCkgPT4gdm9pZDtcblx0cmVhZG9ubHkgb25EcmFnPzogKGU6IERyYWdFdmVudCkgPT4gdm9pZDtcblx0cmVhZG9ubHkgb25EcmFnT3Zlcj86IChlOiBEcmFnRXZlbnQsIGRyYWdEdXJhdGlvbjogbnVtYmVyKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgRHJhZ0FuZERyb3BPYnNlcnZlciBleHRlbmRzIERpc3Bvc2FibGUge1xuXG5cdC8vIEEgaGVscGVyIHRvIGZpeCBpc3N1ZXMgd2l0aCByZXBlYXRlZCBEUkFHX0VOVEVSIC8gRFJBR19MRUFWRVxuXHQvLyBjYWxscyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE0NDcwXG5cdC8vIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGNoaWxkIGVsZW1lbnRzIHdoZXJlIHRoZSBldmVudHMgYXJlIGZpcmVkXG5cdC8vIHJlcGVhZGVkbHkuXG5cdHByaXZhdGUgY291bnRlcjogbnVtYmVyID0gMDtcblxuXHQvLyBBbGxvd3MgdG8gbWVhc3VyZSB0aGUgZHVyYXRpb24gb2YgdGhlIGRyYWcgb3BlcmF0aW9uLlxuXHRwcml2YXRlIGRyYWdTdGFydFRpbWUgPSAwO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudDogSFRNTEVsZW1lbnQsIHByaXZhdGUgcmVhZG9ubHkgY2FsbGJhY2tzOiBJRHJhZ0FuZERyb3BPYnNlcnZlckNhbGxiYWNrcykge1xuXHRcdHN1cGVyKCk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyTGlzdGVuZXJzKCk7XG5cdH1cblxuXHRwcml2YXRlIHJlZ2lzdGVyTGlzdGVuZXJzKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLmNhbGxiYWNrcy5vbkRyYWdTdGFydCkge1xuXHRcdFx0dGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLkRSQUdfU1RBUlQsIChlOiBEcmFnRXZlbnQpID0+IHtcblx0XHRcdFx0dGhpcy5jYWxsYmFja3Mub25EcmFnU3RhcnQ/LihlKTtcblx0XHRcdH0pKTtcblx0XHR9XG5cblx0XHRpZiAodGhpcy5jYWxsYmFja3Mub25EcmFnKSB7XG5cdFx0XHR0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50LCBFdmVudFR5cGUuRFJBRywgKGU6IERyYWdFdmVudCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNhbGxiYWNrcy5vbkRyYWc/LihlKTtcblx0XHRcdH0pKTtcblx0XHR9XG5cblx0XHR0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50LCBFdmVudFR5cGUuRFJBR19FTlRFUiwgKGU6IERyYWdFdmVudCkgPT4ge1xuXHRcdFx0dGhpcy5jb3VudGVyKys7XG5cdFx0XHR0aGlzLmRyYWdTdGFydFRpbWUgPSBlLnRpbWVTdGFtcDtcblxuXHRcdFx0dGhpcy5jYWxsYmFja3Mub25EcmFnRW50ZXI/LihlKTtcblx0XHR9KSk7XG5cblx0XHR0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50LCBFdmVudFR5cGUuRFJBR19PVkVSLCAoZTogRHJhZ0V2ZW50KSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7IC8vIG5lZWRlZCBzbyB0aGF0IHRoZSBkcm9wIGV2ZW50IGZpcmVzIChodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTMzOTkyNC9kcm9wLWV2ZW50LW5vdC1maXJpbmctaW4tY2hyb21lKVxuXG5cdFx0XHR0aGlzLmNhbGxiYWNrcy5vbkRyYWdPdmVyPy4oZSwgZS50aW1lU3RhbXAgLSB0aGlzLmRyYWdTdGFydFRpbWUpO1xuXHRcdH0pKTtcblxuXHRcdHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5EUkFHX0xFQVZFLCAoZTogRHJhZ0V2ZW50KSA9PiB7XG5cdFx0XHR0aGlzLmNvdW50ZXItLTtcblxuXHRcdFx0aWYgKHRoaXMuY291bnRlciA9PT0gMCkge1xuXHRcdFx0XHR0aGlzLmRyYWdTdGFydFRpbWUgPSAwO1xuXG5cdFx0XHRcdHRoaXMuY2FsbGJhY2tzLm9uRHJhZ0xlYXZlPy4oZSk7XG5cdFx0XHR9XG5cdFx0fSkpO1xuXG5cdFx0dGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLkRSQUdfRU5ELCAoZTogRHJhZ0V2ZW50KSA9PiB7XG5cdFx0XHR0aGlzLmNvdW50ZXIgPSAwO1xuXHRcdFx0dGhpcy5kcmFnU3RhcnRUaW1lID0gMDtcblxuXHRcdFx0dGhpcy5jYWxsYmFja3Mub25EcmFnRW5kPy4oZSk7XG5cdFx0fSkpO1xuXG5cdFx0dGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLkRST1AsIChlOiBEcmFnRXZlbnQpID0+IHtcblx0XHRcdHRoaXMuY291bnRlciA9IDA7XG5cdFx0XHR0aGlzLmRyYWdTdGFydFRpbWUgPSAwO1xuXG5cdFx0XHR0aGlzLmNhbGxiYWNrcy5vbkRyb3A/LihlKTtcblx0XHR9KSk7XG5cdH1cbn1cblxudHlwZSBIVE1MRWxlbWVudEF0dHJpYnV0ZUtleXM8VD4gPSBQYXJ0aWFsPHsgW0sgaW4ga2V5b2YgVF06IFRbS10gZXh0ZW5kcyBGdW5jdGlvbiA/IG5ldmVyIDogVFtLXSBleHRlbmRzIG9iamVjdCA/IEhUTUxFbGVtZW50QXR0cmlidXRlS2V5czxUW0tdPiA6IFRbS10gfT47XG50eXBlIEVsZW1lbnRBdHRyaWJ1dGVzPFQ+ID0gSFRNTEVsZW1lbnRBdHRyaWJ1dGVLZXlzPFQ+ICYgUmVjb3JkPHN0cmluZywgYW55PjtcbnR5cGUgUmVtb3ZlSFRNTEVsZW1lbnQ8VD4gPSBUIGV4dGVuZHMgSFRNTEVsZW1lbnQgPyBuZXZlciA6IFQ7XG50eXBlIFVuaW9uVG9JbnRlcnNlY3Rpb248VT4gPSAoVSBleHRlbmRzIGFueSA/IChrOiBVKSA9PiB2b2lkIDogbmV2ZXIpIGV4dGVuZHMgKChrOiBpbmZlciBJKSA9PiB2b2lkKSA/IEkgOiBuZXZlcjtcbnR5cGUgQXJyYXlUb09iajxUIGV4dGVuZHMgcmVhZG9ubHkgYW55W10+ID0gVW5pb25Ub0ludGVyc2VjdGlvbjxSZW1vdmVIVE1MRWxlbWVudDxUW251bWJlcl0+PjtcbnR5cGUgSEhUTUxFbGVtZW50VGFnTmFtZU1hcCA9IEhUTUxFbGVtZW50VGFnTmFtZU1hcCAmIHsgJyc6IEhUTUxEaXZFbGVtZW50IH07XG5cbnR5cGUgVGFnVG9FbGVtZW50PFQ+ID0gVCBleHRlbmRzIGAke2luZmVyIFRTdGFydH0jJHtzdHJpbmd9YFxuXHQ/IFRTdGFydCBleHRlbmRzIGtleW9mIEhIVE1MRWxlbWVudFRhZ05hbWVNYXBcblx0PyBISFRNTEVsZW1lbnRUYWdOYW1lTWFwW1RTdGFydF1cblx0OiBIVE1MRWxlbWVudFxuXHQ6IFQgZXh0ZW5kcyBgJHtpbmZlciBUU3RhcnR9LiR7c3RyaW5nfWBcblx0PyBUU3RhcnQgZXh0ZW5kcyBrZXlvZiBISFRNTEVsZW1lbnRUYWdOYW1lTWFwXG5cdD8gSEhUTUxFbGVtZW50VGFnTmFtZU1hcFtUU3RhcnRdXG5cdDogSFRNTEVsZW1lbnRcblx0OiBUIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwXG5cdD8gSFRNTEVsZW1lbnRUYWdOYW1lTWFwW1RdXG5cdDogSFRNTEVsZW1lbnQ7XG5cbnR5cGUgVGFnVG9FbGVtZW50QW5kSWQ8VFRhZz4gPSBUVGFnIGV4dGVuZHMgYCR7aW5mZXIgVFRhZ31AJHtpbmZlciBUSWR9YFxuXHQ/IHsgZWxlbWVudDogVGFnVG9FbGVtZW50PFRUYWc+OyBpZDogVElkIH1cblx0OiB7IGVsZW1lbnQ6IFRhZ1RvRWxlbWVudDxUVGFnPjsgaWQ6ICdyb290JyB9O1xuXG50eXBlIFRhZ1RvUmVjb3JkPFRUYWc+ID0gVGFnVG9FbGVtZW50QW5kSWQ8VFRhZz4gZXh0ZW5kcyB7IGVsZW1lbnQ6IGluZmVyIFRFbGVtZW50OyBpZDogaW5mZXIgVElkIH1cblx0PyBSZWNvcmQ8KFRJZCBleHRlbmRzIHN0cmluZyA/IFRJZCA6IG5ldmVyKSB8ICdyb290JywgVEVsZW1lbnQ+XG5cdDogbmV2ZXI7XG5cbnR5cGUgQ2hpbGQgPSBIVE1MRWxlbWVudCB8IHN0cmluZyB8IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PjtcblxuY29uc3QgSF9SRUdFWCA9IC8oPzx0YWc+W1xcd1xcLV0rKT8oPzojKD88aWQ+W1xcd1xcLV0rKSk/KD88Y2xhc3M+KD86XFwuKD86W1xcd1xcLV0rKSkqKSg/OkAoPzxuYW1lPig/OltcXHdcXF9dKSspKT8vO1xuXG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBuZXN0ZWQgZG9tIG5vZGVzLlxuICpcbiAqXG4gKiBgYGB0c1xuICogY29uc3QgZWxlbWVudHMgPSBoKCdkaXYuY29kZS12aWV3JywgW1xuICogXHRoKCdkaXYudGl0bGVAdGl0bGUnKSxcbiAqIFx0aCgnZGl2LmNvbnRhaW5lcicsIFtcbiAqIFx0XHRoKCdkaXYuZ3V0dGVyQGd1dHRlckRpdicpLFxuICogXHRcdGgoJ2RpdkBlZGl0b3InKSxcbiAqIFx0XSksXG4gKiBdKTtcbiAqIGNvbnN0IGVkaXRvciA9IGNyZWF0ZUVkaXRvcihlbGVtZW50cy5lZGl0b3IpO1xuICogYGBgXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGg8VFRhZyBleHRlbmRzIHN0cmluZz5cblx0KHRhZzogVFRhZyk6XG5cdFRhZ1RvUmVjb3JkPFRUYWc+IGV4dGVuZHMgaW5mZXIgWSA/IHsgW1RLZXkgaW4ga2V5b2YgWV06IFlbVEtleV0gfSA6IG5ldmVyO1xuXG5leHBvcnQgZnVuY3Rpb24gaDxUVGFnIGV4dGVuZHMgc3RyaW5nLCBUIGV4dGVuZHMgQ2hpbGRbXT5cblx0KHRhZzogVFRhZywgY2hpbGRyZW46IFsuLi5UXSk6XG5cdChBcnJheVRvT2JqPFQ+ICYgVGFnVG9SZWNvcmQ8VFRhZz4pIGV4dGVuZHMgaW5mZXIgWSA/IHsgW1RLZXkgaW4ga2V5b2YgWV06IFlbVEtleV0gfSA6IG5ldmVyO1xuXG5leHBvcnQgZnVuY3Rpb24gaDxUVGFnIGV4dGVuZHMgc3RyaW5nPlxuXHQodGFnOiBUVGFnLCBhdHRyaWJ1dGVzOiBQYXJ0aWFsPEVsZW1lbnRBdHRyaWJ1dGVzPFRhZ1RvRWxlbWVudDxUVGFnPj4+KTpcblx0VGFnVG9SZWNvcmQ8VFRhZz4gZXh0ZW5kcyBpbmZlciBZID8geyBbVEtleSBpbiBrZXlvZiBZXTogWVtUS2V5XSB9IDogbmV2ZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBoPFRUYWcgZXh0ZW5kcyBzdHJpbmcsIFQgZXh0ZW5kcyBDaGlsZFtdPlxuXHQodGFnOiBUVGFnLCBhdHRyaWJ1dGVzOiBQYXJ0aWFsPEVsZW1lbnRBdHRyaWJ1dGVzPFRhZ1RvRWxlbWVudDxUVGFnPj4+LCBjaGlsZHJlbjogWy4uLlRdKTpcblx0KEFycmF5VG9PYmo8VD4gJiBUYWdUb1JlY29yZDxUVGFnPikgZXh0ZW5kcyBpbmZlciBZID8geyBbVEtleSBpbiBrZXlvZiBZXTogWVtUS2V5XSB9IDogbmV2ZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBoKHRhZzogc3RyaW5nLCAuLi5hcmdzOiBbXSB8IFthdHRyaWJ1dGVzOiB7ICQ6IHN0cmluZyB9ICYgUGFydGlhbDxFbGVtZW50QXR0cmlidXRlczxIVE1MRWxlbWVudD4+IHwgUmVjb3JkPHN0cmluZywgYW55PiwgY2hpbGRyZW4/OiBhbnlbXV0gfCBbY2hpbGRyZW46IGFueVtdXSk6IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PiB7XG5cdGxldCBhdHRyaWJ1dGVzOiB7ICQ/OiBzdHJpbmcgfSAmIFBhcnRpYWw8RWxlbWVudEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+Pjtcblx0bGV0IGNoaWxkcmVuOiAoUmVjb3JkPHN0cmluZywgSFRNTEVsZW1lbnQ+IHwgSFRNTEVsZW1lbnQpW10gfCB1bmRlZmluZWQ7XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcblx0XHRhdHRyaWJ1dGVzID0ge307XG5cdFx0Y2hpbGRyZW4gPSBhcmdzWzBdO1xuXHR9IGVsc2Uge1xuXHRcdGF0dHJpYnV0ZXMgPSBhcmdzWzBdIGFzIGFueSB8fCB7fTtcblx0XHRjaGlsZHJlbiA9IGFyZ3NbMV07XG5cdH1cblxuXHRjb25zdCBtYXRjaCA9IEhfUkVHRVguZXhlYyh0YWcpO1xuXG5cdGlmICghbWF0Y2ggfHwgIW1hdGNoLmdyb3Vwcykge1xuXHRcdHRocm93IG5ldyBFcnJvcignQmFkIHVzZSBvZiBoJyk7XG5cdH1cblxuXHRjb25zdCB0YWdOYW1lID0gbWF0Y2guZ3JvdXBzWyd0YWcnXSB8fCAnZGl2Jztcblx0Y29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXG5cdGlmIChtYXRjaC5ncm91cHNbJ2lkJ10pIHtcblx0XHRlbC5pZCA9IG1hdGNoLmdyb3Vwc1snaWQnXTtcblx0fVxuXG5cdGNvbnN0IGNsYXNzTmFtZXMgPSBbXTtcblx0aWYgKG1hdGNoLmdyb3Vwc1snY2xhc3MnXSkge1xuXHRcdGZvciAoY29uc3QgY2xhc3NOYW1lIG9mIG1hdGNoLmdyb3Vwc1snY2xhc3MnXS5zcGxpdCgnLicpKSB7XG5cdFx0XHRpZiAoY2xhc3NOYW1lICE9PSAnJykge1xuXHRcdFx0XHRjbGFzc05hbWVzLnB1c2goY2xhc3NOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGF0dHJpYnV0ZXMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHRmb3IgKGNvbnN0IGNsYXNzTmFtZSBvZiBhdHRyaWJ1dGVzLmNsYXNzTmFtZS5zcGxpdCgnLicpKSB7XG5cdFx0XHRpZiAoY2xhc3NOYW1lICE9PSAnJykge1xuXHRcdFx0XHRjbGFzc05hbWVzLnB1c2goY2xhc3NOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGNsYXNzTmFtZXMubGVuZ3RoID4gMCkge1xuXHRcdGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXMuam9pbignICcpO1xuXHR9XG5cblx0Y29uc3QgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4gPSB7fTtcblxuXHRpZiAobWF0Y2guZ3JvdXBzWyduYW1lJ10pIHtcblx0XHRyZXN1bHRbbWF0Y2guZ3JvdXBzWyduYW1lJ11dID0gZWw7XG5cdH1cblxuXHRpZiAoY2hpbGRyZW4pIHtcblx0XHRmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcblx0XHRcdGlmIChpc0hUTUxFbGVtZW50KGMpKSB7XG5cdFx0XHRcdGVsLmFwcGVuZENoaWxkKGMpO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgYyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0ZWwuYXBwZW5kKGMpO1xuXHRcdFx0fSBlbHNlIGlmICgncm9vdCcgaW4gYykge1xuXHRcdFx0XHRPYmplY3QuYXNzaWduKHJlc3VsdCwgYyk7XG5cdFx0XHRcdGVsLmFwcGVuZENoaWxkKGMucm9vdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcblx0XHRpZiAoa2V5ID09PSAnY2xhc3NOYW1lJykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fSBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcblx0XHRcdGZvciAoY29uc3QgW2Nzc0tleSwgY3NzVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuXHRcdFx0XHRlbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFx0XHRjYW1lbENhc2VUb0h5cGhlbkNhc2UoY3NzS2V5KSxcblx0XHRcdFx0XHR0eXBlb2YgY3NzVmFsdWUgPT09ICdudW1iZXInID8gY3NzVmFsdWUgKyAncHgnIDogJycgKyBjc3NWYWx1ZVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoa2V5ID09PSAndGFiSW5kZXgnKSB7XG5cdFx0XHRlbC50YWJJbmRleCA9IHZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoY2FtZWxDYXNlVG9IeXBoZW5DYXNlKGtleSksIHZhbHVlLnRvU3RyaW5nKCkpO1xuXHRcdH1cblx0fVxuXG5cdHJlc3VsdFsncm9vdCddID0gZWw7XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN2Z0VsZW08VFRhZyBleHRlbmRzIHN0cmluZz5cblx0KHRhZzogVFRhZyk6XG5cdFRhZ1RvUmVjb3JkPFRUYWc+IGV4dGVuZHMgaW5mZXIgWSA/IHsgW1RLZXkgaW4ga2V5b2YgWV06IFlbVEtleV0gfSA6IG5ldmVyO1xuXG5leHBvcnQgZnVuY3Rpb24gc3ZnRWxlbTxUVGFnIGV4dGVuZHMgc3RyaW5nLCBUIGV4dGVuZHMgQ2hpbGRbXT5cblx0KHRhZzogVFRhZywgY2hpbGRyZW46IFsuLi5UXSk6XG5cdChBcnJheVRvT2JqPFQ+ICYgVGFnVG9SZWNvcmQ8VFRhZz4pIGV4dGVuZHMgaW5mZXIgWSA/IHsgW1RLZXkgaW4ga2V5b2YgWV06IFlbVEtleV0gfSA6IG5ldmVyO1xuXG5leHBvcnQgZnVuY3Rpb24gc3ZnRWxlbTxUVGFnIGV4dGVuZHMgc3RyaW5nPlxuXHQodGFnOiBUVGFnLCBhdHRyaWJ1dGVzOiBQYXJ0aWFsPEVsZW1lbnRBdHRyaWJ1dGVzPFRhZ1RvRWxlbWVudDxUVGFnPj4+KTpcblx0VGFnVG9SZWNvcmQ8VFRhZz4gZXh0ZW5kcyBpbmZlciBZID8geyBbVEtleSBpbiBrZXlvZiBZXTogWVtUS2V5XSB9IDogbmV2ZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdmdFbGVtPFRUYWcgZXh0ZW5kcyBzdHJpbmcsIFQgZXh0ZW5kcyBDaGlsZFtdPlxuXHQodGFnOiBUVGFnLCBhdHRyaWJ1dGVzOiBQYXJ0aWFsPEVsZW1lbnRBdHRyaWJ1dGVzPFRhZ1RvRWxlbWVudDxUVGFnPj4+LCBjaGlsZHJlbjogWy4uLlRdKTpcblx0KEFycmF5VG9PYmo8VD4gJiBUYWdUb1JlY29yZDxUVGFnPikgZXh0ZW5kcyBpbmZlciBZID8geyBbVEtleSBpbiBrZXlvZiBZXTogWVtUS2V5XSB9IDogbmV2ZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdmdFbGVtKHRhZzogc3RyaW5nLCAuLi5hcmdzOiBbXSB8IFthdHRyaWJ1dGVzOiB7ICQ6IHN0cmluZyB9ICYgUGFydGlhbDxFbGVtZW50QXR0cmlidXRlczxIVE1MRWxlbWVudD4+IHwgUmVjb3JkPHN0cmluZywgYW55PiwgY2hpbGRyZW4/OiBhbnlbXV0gfCBbY2hpbGRyZW46IGFueVtdXSk6IFJlY29yZDxzdHJpbmcsIEhUTUxFbGVtZW50PiB7XG5cdGxldCBhdHRyaWJ1dGVzOiB7ICQ/OiBzdHJpbmcgfSAmIFBhcnRpYWw8RWxlbWVudEF0dHJpYnV0ZXM8SFRNTEVsZW1lbnQ+Pjtcblx0bGV0IGNoaWxkcmVuOiAoUmVjb3JkPHN0cmluZywgSFRNTEVsZW1lbnQ+IHwgSFRNTEVsZW1lbnQpW10gfCB1bmRlZmluZWQ7XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcblx0XHRhdHRyaWJ1dGVzID0ge307XG5cdFx0Y2hpbGRyZW4gPSBhcmdzWzBdO1xuXHR9IGVsc2Uge1xuXHRcdGF0dHJpYnV0ZXMgPSBhcmdzWzBdIGFzIGFueSB8fCB7fTtcblx0XHRjaGlsZHJlbiA9IGFyZ3NbMV07XG5cdH1cblxuXHRjb25zdCBtYXRjaCA9IEhfUkVHRVguZXhlYyh0YWcpO1xuXG5cdGlmICghbWF0Y2ggfHwgIW1hdGNoLmdyb3Vwcykge1xuXHRcdHRocm93IG5ldyBFcnJvcignQmFkIHVzZSBvZiBoJyk7XG5cdH1cblxuXHRjb25zdCB0YWdOYW1lID0gbWF0Y2guZ3JvdXBzWyd0YWcnXSB8fCAnZGl2Jztcblx0Y29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgdGFnTmFtZSkgYXMgYW55IGFzIEhUTUxFbGVtZW50O1xuXG5cdGlmIChtYXRjaC5ncm91cHNbJ2lkJ10pIHtcblx0XHRlbC5pZCA9IG1hdGNoLmdyb3Vwc1snaWQnXTtcblx0fVxuXG5cdGNvbnN0IGNsYXNzTmFtZXMgPSBbXTtcblx0aWYgKG1hdGNoLmdyb3Vwc1snY2xhc3MnXSkge1xuXHRcdGZvciAoY29uc3QgY2xhc3NOYW1lIG9mIG1hdGNoLmdyb3Vwc1snY2xhc3MnXS5zcGxpdCgnLicpKSB7XG5cdFx0XHRpZiAoY2xhc3NOYW1lICE9PSAnJykge1xuXHRcdFx0XHRjbGFzc05hbWVzLnB1c2goY2xhc3NOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGF0dHJpYnV0ZXMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQpIHtcblx0XHRmb3IgKGNvbnN0IGNsYXNzTmFtZSBvZiBhdHRyaWJ1dGVzLmNsYXNzTmFtZS5zcGxpdCgnLicpKSB7XG5cdFx0XHRpZiAoY2xhc3NOYW1lICE9PSAnJykge1xuXHRcdFx0XHRjbGFzc05hbWVzLnB1c2goY2xhc3NOYW1lKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGNsYXNzTmFtZXMubGVuZ3RoID4gMCkge1xuXHRcdGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXMuam9pbignICcpO1xuXHR9XG5cblx0Y29uc3QgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBIVE1MRWxlbWVudD4gPSB7fTtcblxuXHRpZiAobWF0Y2guZ3JvdXBzWyduYW1lJ10pIHtcblx0XHRyZXN1bHRbbWF0Y2guZ3JvdXBzWyduYW1lJ11dID0gZWw7XG5cdH1cblxuXHRpZiAoY2hpbGRyZW4pIHtcblx0XHRmb3IgKGNvbnN0IGMgb2YgY2hpbGRyZW4pIHtcblx0XHRcdGlmIChpc0hUTUxFbGVtZW50KGMpKSB7XG5cdFx0XHRcdGVsLmFwcGVuZENoaWxkKGMpO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgYyA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0ZWwuYXBwZW5kKGMpO1xuXHRcdFx0fSBlbHNlIGlmICgncm9vdCcgaW4gYykge1xuXHRcdFx0XHRPYmplY3QuYXNzaWduKHJlc3VsdCwgYyk7XG5cdFx0XHRcdGVsLmFwcGVuZENoaWxkKGMucm9vdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Zm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXR0cmlidXRlcykpIHtcblx0XHRpZiAoa2V5ID09PSAnY2xhc3NOYW1lJykge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fSBlbHNlIGlmIChrZXkgPT09ICdzdHlsZScpIHtcblx0XHRcdGZvciAoY29uc3QgW2Nzc0tleSwgY3NzVmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHVlKSkge1xuXHRcdFx0XHRlbC5zdHlsZS5zZXRQcm9wZXJ0eShcblx0XHRcdFx0XHRjYW1lbENhc2VUb0h5cGhlbkNhc2UoY3NzS2V5KSxcblx0XHRcdFx0XHR0eXBlb2YgY3NzVmFsdWUgPT09ICdudW1iZXInID8gY3NzVmFsdWUgKyAncHgnIDogJycgKyBjc3NWYWx1ZVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoa2V5ID09PSAndGFiSW5kZXgnKSB7XG5cdFx0XHRlbC50YWJJbmRleCA9IHZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5zZXRBdHRyaWJ1dGUoY2FtZWxDYXNlVG9IeXBoZW5DYXNlKGtleSksIHZhbHVlLnRvU3RyaW5nKCkpO1xuXHRcdH1cblx0fVxuXG5cdHJlc3VsdFsncm9vdCddID0gZWw7XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY2FtZWxDYXNlVG9IeXBoZW5DYXNlKHN0cjogc3RyaW5nKSB7XG5cdHJldHVybiBzdHIucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlBdHRyaWJ1dGVzKGZyb206IEVsZW1lbnQsIHRvOiBFbGVtZW50LCBmaWx0ZXI/OiBzdHJpbmdbXSk6IHZvaWQge1xuXHRmb3IgKGNvbnN0IHsgbmFtZSwgdmFsdWUgfSBvZiBmcm9tLmF0dHJpYnV0ZXMpIHtcblx0XHRpZiAoIWZpbHRlciB8fCBmaWx0ZXIuaW5jbHVkZXMobmFtZSkpIHtcblx0XHRcdHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGNvcHlBdHRyaWJ1dGUoZnJvbTogRWxlbWVudCwgdG86IEVsZW1lbnQsIG5hbWU6IHN0cmluZyk6IHZvaWQge1xuXHRjb25zdCB2YWx1ZSA9IGZyb20uZ2V0QXR0cmlidXRlKG5hbWUpO1xuXHRpZiAodmFsdWUpIHtcblx0XHR0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHR9IGVsc2Uge1xuXHRcdHRvLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJhY2tBdHRyaWJ1dGVzKGZyb206IEVsZW1lbnQsIHRvOiBFbGVtZW50LCBmaWx0ZXI/OiBzdHJpbmdbXSk6IElEaXNwb3NhYmxlIHtcblx0Y29weUF0dHJpYnV0ZXMoZnJvbSwgdG8sIGZpbHRlcik7XG5cblx0Y29uc3QgZGlzcG9zYWJsZXMgPSBuZXcgRGlzcG9zYWJsZVN0b3JlKCk7XG5cblx0ZGlzcG9zYWJsZXMuYWRkKHNoYXJlZE11dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZShmcm9tLCBkaXNwb3NhYmxlcywgeyBhdHRyaWJ1dGVzOiB0cnVlLCBhdHRyaWJ1dGVGaWx0ZXI6IGZpbHRlciB9KShtdXRhdGlvbnMgPT4ge1xuXHRcdGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG5cdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUpIHtcblx0XHRcdFx0Y29weUF0dHJpYnV0ZShmcm9tLCB0bywgbXV0YXRpb24uYXR0cmlidXRlTmFtZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KSk7XG5cblx0cmV0dXJuIGRpc3Bvc2FibGVzO1xufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgY2FsY3VsYXRpbmcgdGhlIFwic2FmZSB0cmlhbmdsZVwiIG9jY2x1ZGVkIGJ5IGhvdmVycyB0byBhdm9pZCBlYXJseSBkaXNtaXNzYWwuXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnNtYXNoaW5nbWFnYXppbmUuY29tLzIwMjMvMDgvYmV0dGVyLWNvbnRleHQtbWVudXMtc2FmZS10cmlhbmdsZXMvIGZvciBleGFtcGxlXG4gKi9cbmV4cG9ydCBjbGFzcyBTYWZlVHJpYW5nbGUge1xuXHQvLyA0IHRyaWFuZ2xlcywgMiBwb2ludHMgKHgsIHkpIHN0b3JlZCBmb3IgZWFjaFxuXHRwcml2YXRlIHRyaWFuZ2xlczogbnVtYmVyW10gPSBbXTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHJlYWRvbmx5IG9yaWdpblg6IG51bWJlcixcblx0XHRwcml2YXRlIHJlYWRvbmx5IG9yaWdpblk6IG51bWJlcixcblx0XHR0YXJnZXQ6IEhUTUxFbGVtZW50XG5cdCkge1xuXHRcdGNvbnN0IHsgdG9wLCBsZWZ0LCByaWdodCwgYm90dG9tIH0gPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0Y29uc3QgdCA9IHRoaXMudHJpYW5nbGVzO1xuXHRcdGxldCBpID0gMDtcblxuXHRcdHRbaSsrXSA9IGxlZnQ7XG5cdFx0dFtpKytdID0gdG9wO1xuXHRcdHRbaSsrXSA9IHJpZ2h0O1xuXHRcdHRbaSsrXSA9IHRvcDtcblxuXHRcdHRbaSsrXSA9IGxlZnQ7XG5cdFx0dFtpKytdID0gdG9wO1xuXHRcdHRbaSsrXSA9IGxlZnQ7XG5cdFx0dFtpKytdID0gYm90dG9tO1xuXG5cdFx0dFtpKytdID0gcmlnaHQ7XG5cdFx0dFtpKytdID0gdG9wO1xuXHRcdHRbaSsrXSA9IHJpZ2h0O1xuXHRcdHRbaSsrXSA9IGJvdHRvbTtcblxuXHRcdHRbaSsrXSA9IGxlZnQ7XG5cdFx0dFtpKytdID0gYm90dG9tO1xuXHRcdHRbaSsrXSA9IHJpZ2h0O1xuXHRcdHRbaSsrXSA9IGJvdHRvbTtcblx0fVxuXG5cdHB1YmxpYyBjb250YWlucyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuXHRcdGNvbnN0IHsgdHJpYW5nbGVzLCBvcmlnaW5YLCBvcmlnaW5ZIH0gPSB0aGlzO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG5cdFx0XHRpZiAoaXNQb2ludFdpdGhpblRyaWFuZ2xlKHgsIHksIG9yaWdpblgsIG9yaWdpblksIHRyaWFuZ2xlc1syICogaV0sIHRyaWFuZ2xlc1syICogaSArIDFdLCB0cmlhbmdsZXNbMiAqIGkgKyAyXSwgdHJpYW5nbGVzWzIgKiBpICsgM10pKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5leHBvcnQgY2xhc3MgRmFzdERvbU5vZGU8VCBleHRlbmRzIEhUTUxFbGVtZW50PiB7XG5cblx0cHJpdmF0ZSBfbWF4V2lkdGg6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF93aWR0aDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX2hlaWdodDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX3RvcDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX2xlZnQ6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9ib3R0b206IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9yaWdodDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX3BhZGRpbmdUb3A6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9wYWRkaW5nTGVmdDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX3BhZGRpbmdCb3R0b206IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9wYWRkaW5nUmlnaHQ6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9mb250RmFtaWx5OiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfZm9udFdlaWdodDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX2ZvbnRTaXplOiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfZm9udFN0eWxlOiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfZm9udEZlYXR1cmVTZXR0aW5nczogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX2ZvbnRWYXJpYXRpb25TZXR0aW5nczogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX3RleHREZWNvcmF0aW9uOiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfbGluZUhlaWdodDogc3RyaW5nID0gJyc7XG5cdHByaXZhdGUgX2xldHRlclNwYWNpbmc6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9jbGFzc05hbWU6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9kaXNwbGF5OiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfcG9zaXRpb246IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF92aXNpYmlsaXR5OiBzdHJpbmcgPSAnJztcblx0cHJpdmF0ZSBfY29sb3I6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9iYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyA9ICcnO1xuXHRwcml2YXRlIF9sYXllckhpbnQ6IGJvb2xlYW4gPSBmYWxzZTtcblx0cHJpdmF0ZSBfY29udGFpbjogJ25vbmUnIHwgJ3N0cmljdCcgfCAnY29udGVudCcgfCAnc2l6ZScgfCAnbGF5b3V0JyB8ICdzdHlsZScgfCAncGFpbnQnID0gJ25vbmUnO1xuXHRwcml2YXRlIF9ib3hTaGFkb3c6IHN0cmluZyA9ICcnO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHB1YmxpYyByZWFkb25seSBkb21Ob2RlOiBUXG5cdCkgeyB9XG5cblx0cHVibGljIHNldE1heFdpZHRoKF9tYXhXaWR0aDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgbWF4V2lkdGggPSBudW1iZXJBc1BpeGVscyhfbWF4V2lkdGgpO1xuXHRcdGlmICh0aGlzLl9tYXhXaWR0aCA9PT0gbWF4V2lkdGgpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fbWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUubWF4V2lkdGggPSB0aGlzLl9tYXhXaWR0aDtcblx0fVxuXG5cdHB1YmxpYyBzZXRXaWR0aChfd2lkdGg6IG51bWJlciB8IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IHdpZHRoID0gbnVtYmVyQXNQaXhlbHMoX3dpZHRoKTtcblx0XHRpZiAodGhpcy5fd2lkdGggPT09IHdpZHRoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3dpZHRoID0gd2lkdGg7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLndpZHRoID0gdGhpcy5fd2lkdGg7XG5cdH1cblxuXHRwdWJsaWMgc2V0SGVpZ2h0KF9oZWlnaHQ6IG51bWJlciB8IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IGhlaWdodCA9IG51bWJlckFzUGl4ZWxzKF9oZWlnaHQpO1xuXHRcdGlmICh0aGlzLl9oZWlnaHQgPT09IGhlaWdodCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmhlaWdodCA9IHRoaXMuX2hlaWdodDtcblx0fVxuXG5cdHB1YmxpYyBzZXRUb3AoX3RvcDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgdG9wID0gbnVtYmVyQXNQaXhlbHMoX3RvcCk7XG5cdFx0aWYgKHRoaXMuX3RvcCA9PT0gdG9wKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3RvcCA9IHRvcDtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUudG9wID0gdGhpcy5fdG9wO1xuXHR9XG5cblx0cHVibGljIHNldExlZnQoX2xlZnQ6IG51bWJlciB8IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IGxlZnQgPSBudW1iZXJBc1BpeGVscyhfbGVmdCk7XG5cdFx0aWYgKHRoaXMuX2xlZnQgPT09IGxlZnQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fbGVmdCA9IGxlZnQ7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmxlZnQgPSB0aGlzLl9sZWZ0O1xuXHR9XG5cblx0cHVibGljIHNldEJvdHRvbShfYm90dG9tOiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBib3R0b20gPSBudW1iZXJBc1BpeGVscyhfYm90dG9tKTtcblx0XHRpZiAodGhpcy5fYm90dG9tID09PSBib3R0b20pIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fYm90dG9tID0gYm90dG9tO1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5ib3R0b20gPSB0aGlzLl9ib3R0b207XG5cdH1cblxuXHRwdWJsaWMgc2V0UmlnaHQoX3JpZ2h0OiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCByaWdodCA9IG51bWJlckFzUGl4ZWxzKF9yaWdodCk7XG5cdFx0aWYgKHRoaXMuX3JpZ2h0ID09PSByaWdodCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9yaWdodCA9IHJpZ2h0O1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5yaWdodCA9IHRoaXMuX3JpZ2h0O1xuXHR9XG5cblx0cHVibGljIHNldFBhZGRpbmdUb3AoX3BhZGRpbmdUb3A6IG51bWJlciB8IHN0cmluZyk6IHZvaWQge1xuXHRcdGNvbnN0IHBhZGRpbmdUb3AgPSBudW1iZXJBc1BpeGVscyhfcGFkZGluZ1RvcCk7XG5cdFx0aWYgKHRoaXMuX3BhZGRpbmdUb3AgPT09IHBhZGRpbmdUb3ApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fcGFkZGluZ1RvcCA9IHBhZGRpbmdUb3A7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLl9wYWRkaW5nVG9wO1xuXHR9XG5cblx0cHVibGljIHNldFBhZGRpbmdMZWZ0KF9wYWRkaW5nTGVmdDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgcGFkZGluZ0xlZnQgPSBudW1iZXJBc1BpeGVscyhfcGFkZGluZ0xlZnQpO1xuXHRcdGlmICh0aGlzLl9wYWRkaW5nTGVmdCA9PT0gcGFkZGluZ0xlZnQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fcGFkZGluZ0xlZnQgPSBwYWRkaW5nTGVmdDtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUucGFkZGluZ0xlZnQgPSB0aGlzLl9wYWRkaW5nTGVmdDtcblx0fVxuXG5cdHB1YmxpYyBzZXRQYWRkaW5nQm90dG9tKF9wYWRkaW5nQm90dG9tOiBudW1iZXIgfCBzdHJpbmcpOiB2b2lkIHtcblx0XHRjb25zdCBwYWRkaW5nQm90dG9tID0gbnVtYmVyQXNQaXhlbHMoX3BhZGRpbmdCb3R0b20pO1xuXHRcdGlmICh0aGlzLl9wYWRkaW5nQm90dG9tID09PSBwYWRkaW5nQm90dG9tKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3BhZGRpbmdCb3R0b20gPSBwYWRkaW5nQm90dG9tO1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5wYWRkaW5nQm90dG9tID0gdGhpcy5fcGFkZGluZ0JvdHRvbTtcblx0fVxuXG5cdHB1YmxpYyBzZXRQYWRkaW5nUmlnaHQoX3BhZGRpbmdSaWdodDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgcGFkZGluZ1JpZ2h0ID0gbnVtYmVyQXNQaXhlbHMoX3BhZGRpbmdSaWdodCk7XG5cdFx0aWYgKHRoaXMuX3BhZGRpbmdSaWdodCA9PT0gcGFkZGluZ1JpZ2h0KSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3BhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodDtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5fcGFkZGluZ1JpZ2h0O1xuXHR9XG5cblx0cHVibGljIHNldEZvbnRGYW1pbHkoZm9udEZhbWlseTogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2ZvbnRGYW1pbHkgPT09IGZvbnRGYW1pbHkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZm9udEZhbWlseSA9IGZvbnRGYW1pbHk7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmZvbnRGYW1pbHkgPSB0aGlzLl9mb250RmFtaWx5O1xuXHR9XG5cblx0cHVibGljIHNldEZvbnRXZWlnaHQoZm9udFdlaWdodDogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2ZvbnRXZWlnaHQgPT09IGZvbnRXZWlnaHQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZm9udFdlaWdodCA9IGZvbnRXZWlnaHQ7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmZvbnRXZWlnaHQgPSB0aGlzLl9mb250V2VpZ2h0O1xuXHR9XG5cblx0cHVibGljIHNldEZvbnRTaXplKF9mb250U2l6ZTogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgZm9udFNpemUgPSBudW1iZXJBc1BpeGVscyhfZm9udFNpemUpO1xuXHRcdGlmICh0aGlzLl9mb250U2l6ZSA9PT0gZm9udFNpemUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZm9udFNpemUgPSBmb250U2l6ZTtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUuZm9udFNpemUgPSB0aGlzLl9mb250U2l6ZTtcblx0fVxuXG5cdHB1YmxpYyBzZXRGb250U3R5bGUoZm9udFN0eWxlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fZm9udFN0eWxlID09PSBmb250U3R5bGUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZm9udFN0eWxlID0gZm9udFN0eWxlO1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5mb250U3R5bGUgPSB0aGlzLl9mb250U3R5bGU7XG5cdH1cblxuXHRwdWJsaWMgc2V0Rm9udEZlYXR1cmVTZXR0aW5ncyhmb250RmVhdHVyZVNldHRpbmdzOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fZm9udEZlYXR1cmVTZXR0aW5ncyA9PT0gZm9udEZlYXR1cmVTZXR0aW5ncykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9mb250RmVhdHVyZVNldHRpbmdzID0gZm9udEZlYXR1cmVTZXR0aW5ncztcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUuZm9udEZlYXR1cmVTZXR0aW5ncyA9IHRoaXMuX2ZvbnRGZWF0dXJlU2V0dGluZ3M7XG5cdH1cblxuXHRwdWJsaWMgc2V0Rm9udFZhcmlhdGlvblNldHRpbmdzKGZvbnRWYXJpYXRpb25TZXR0aW5nczogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2ZvbnRWYXJpYXRpb25TZXR0aW5ncyA9PT0gZm9udFZhcmlhdGlvblNldHRpbmdzKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX2ZvbnRWYXJpYXRpb25TZXR0aW5ncyA9IGZvbnRWYXJpYXRpb25TZXR0aW5ncztcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUuZm9udFZhcmlhdGlvblNldHRpbmdzID0gdGhpcy5fZm9udFZhcmlhdGlvblNldHRpbmdzO1xuXHR9XG5cblx0cHVibGljIHNldFRleHREZWNvcmF0aW9uKHRleHREZWNvcmF0aW9uOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fdGV4dERlY29yYXRpb24gPT09IHRleHREZWNvcmF0aW9uKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3RleHREZWNvcmF0aW9uID0gdGV4dERlY29yYXRpb247XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnRleHREZWNvcmF0aW9uID0gdGhpcy5fdGV4dERlY29yYXRpb247XG5cdH1cblxuXHRwdWJsaWMgc2V0TGluZUhlaWdodChfbGluZUhlaWdodDogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgbGluZUhlaWdodCA9IG51bWJlckFzUGl4ZWxzKF9saW5lSGVpZ2h0KTtcblx0XHRpZiAodGhpcy5fbGluZUhlaWdodCA9PT0gbGluZUhlaWdodCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9saW5lSGVpZ2h0ID0gbGluZUhlaWdodDtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUubGluZUhlaWdodCA9IHRoaXMuX2xpbmVIZWlnaHQ7XG5cdH1cblxuXHRwdWJsaWMgc2V0TGV0dGVyU3BhY2luZyhfbGV0dGVyU3BhY2luZzogbnVtYmVyIHwgc3RyaW5nKTogdm9pZCB7XG5cdFx0Y29uc3QgbGV0dGVyU3BhY2luZyA9IG51bWJlckFzUGl4ZWxzKF9sZXR0ZXJTcGFjaW5nKTtcblx0XHRpZiAodGhpcy5fbGV0dGVyU3BhY2luZyA9PT0gbGV0dGVyU3BhY2luZykge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9sZXR0ZXJTcGFjaW5nID0gbGV0dGVyU3BhY2luZztcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUubGV0dGVyU3BhY2luZyA9IHRoaXMuX2xldHRlclNwYWNpbmc7XG5cdH1cblxuXHRwdWJsaWMgc2V0Q2xhc3NOYW1lKGNsYXNzTmFtZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2NsYXNzTmFtZSA9PT0gY2xhc3NOYW1lKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX2NsYXNzTmFtZSA9IGNsYXNzTmFtZTtcblx0XHR0aGlzLmRvbU5vZGUuY2xhc3NOYW1lID0gdGhpcy5fY2xhc3NOYW1lO1xuXHR9XG5cblx0cHVibGljIHRvZ2dsZUNsYXNzTmFtZShjbGFzc05hbWU6IHN0cmluZywgc2hvdWxkSGF2ZUl0PzogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuZG9tTm9kZS5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSwgc2hvdWxkSGF2ZUl0KTtcblx0XHR0aGlzLl9jbGFzc05hbWUgPSB0aGlzLmRvbU5vZGUuY2xhc3NOYW1lO1xuXHR9XG5cblx0cHVibGljIHNldERpc3BsYXkoZGlzcGxheTogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuX2Rpc3BsYXkgPT09IGRpc3BsYXkpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fZGlzcGxheSA9IGRpc3BsYXk7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmRpc3BsYXkgPSB0aGlzLl9kaXNwbGF5O1xuXHR9XG5cblx0cHVibGljIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fcG9zaXRpb24gPT09IHBvc2l0aW9uKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb247XG5cdH1cblxuXHRwdWJsaWMgc2V0VmlzaWJpbGl0eSh2aXNpYmlsaXR5OiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fdmlzaWJpbGl0eSA9PT0gdmlzaWJpbGl0eSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl92aXNpYmlsaXR5ID0gdmlzaWJpbGl0eTtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUudmlzaWJpbGl0eSA9IHRoaXMuX3Zpc2liaWxpdHk7XG5cdH1cblxuXHRwdWJsaWMgc2V0Q29sb3IoY29sb3I6IHN0cmluZyk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9jb2xvciA9PT0gY29sb3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fY29sb3IgPSBjb2xvcjtcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUuY29sb3IgPSB0aGlzLl9jb2xvcjtcblx0fVxuXG5cdHB1YmxpYyBzZXRCYWNrZ3JvdW5kQ29sb3IoYmFja2dyb3VuZENvbG9yOiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fYmFja2dyb3VuZENvbG9yID09PSBiYWNrZ3JvdW5kQ29sb3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fYmFja2dyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yO1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9iYWNrZ3JvdW5kQ29sb3I7XG5cdH1cblxuXHRwdWJsaWMgc2V0TGF5ZXJIaW50aW5nKGxheWVySGludDogYm9vbGVhbik6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9sYXllckhpbnQgPT09IGxheWVySGludCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9sYXllckhpbnQgPSBsYXllckhpbnQ7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnRyYW5zZm9ybSA9IHRoaXMuX2xheWVySGludCA/ICd0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KScgOiAnJztcblx0fVxuXG5cdHB1YmxpYyBzZXRCb3hTaGFkb3coYm94U2hhZG93OiBzdHJpbmcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fYm94U2hhZG93ID09PSBib3hTaGFkb3cpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fYm94U2hhZG93ID0gYm94U2hhZG93O1xuXHRcdHRoaXMuZG9tTm9kZS5zdHlsZS5ib3hTaGFkb3cgPSBib3hTaGFkb3c7XG5cdH1cblxuXHRwdWJsaWMgc2V0Q29udGFpbihjb250YWluOiAnbm9uZScgfCAnc3RyaWN0JyB8ICdjb250ZW50JyB8ICdzaXplJyB8ICdsYXlvdXQnIHwgJ3N0eWxlJyB8ICdwYWludCcpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fY29udGFpbiA9PT0gY29udGFpbikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLl9jb250YWluID0gY29udGFpbjtcblx0XHQoPGFueT50aGlzLmRvbU5vZGUuc3R5bGUpLmNvbnRhaW4gPSB0aGlzLl9jb250YWluO1xuXHR9XG5cblx0cHVibGljIHNldEF0dHJpYnV0ZShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcblx0XHR0aGlzLmRvbU5vZGUuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0fVxuXG5cdHB1YmxpYyByZW1vdmVBdHRyaWJ1dGUobmFtZTogc3RyaW5nKTogdm9pZCB7XG5cdFx0dGhpcy5kb21Ob2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcblx0fVxuXG5cdHB1YmxpYyBhcHBlbmRDaGlsZChjaGlsZDogRmFzdERvbU5vZGU8VD4pOiB2b2lkIHtcblx0XHR0aGlzLmRvbU5vZGUuYXBwZW5kQ2hpbGQoY2hpbGQuZG9tTm9kZSk7XG5cdH1cblxuXHRwdWJsaWMgcmVtb3ZlQ2hpbGQoY2hpbGQ6IEZhc3REb21Ob2RlPFQ+KTogdm9pZCB7XG5cdFx0dGhpcy5kb21Ob2RlLnJlbW92ZUNoaWxkKGNoaWxkLmRvbU5vZGUpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIG51bWJlckFzUGl4ZWxzKHZhbHVlOiBudW1iZXIgfCBzdHJpbmcpOiBzdHJpbmcge1xuXHRyZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBgJHt2YWx1ZX1weGAgOiB2YWx1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGYXN0RG9tTm9kZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGRvbU5vZGU6IFQpOiBGYXN0RG9tTm9kZTxUPiB7XG5cdHJldHVybiBuZXcgRmFzdERvbU5vZGUoZG9tTm9kZSk7XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCAqIGFzIGRvbSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvZG9tJztcbmltcG9ydCB7IERpc3Bvc2FibGVTdG9yZSwgSURpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBvaW50ZXJNb3ZlQ2FsbGJhY2sge1xuXHQoZXZlbnQ6IFBvaW50ZXJFdmVudCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSU9uU3RvcENhbGxiYWNrIHtcblx0KGJyb3dzZXJFdmVudD86IFBvaW50ZXJFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkO1xufVxuXG5leHBvcnQgY2xhc3MgR2xvYmFsUG9pbnRlck1vdmVNb25pdG9yIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX2hvb2tzID0gbmV3IERpc3Bvc2FibGVTdG9yZSgpO1xuXHRwcml2YXRlIF9wb2ludGVyTW92ZUNhbGxiYWNrOiBJUG9pbnRlck1vdmVDYWxsYmFjayB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIF9vblN0b3BDYWxsYmFjazogSU9uU3RvcENhbGxiYWNrIHwgbnVsbCA9IG51bGw7XG5cblx0cHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0dGhpcy5zdG9wTW9uaXRvcmluZyhmYWxzZSk7XG5cdFx0dGhpcy5faG9va3MuZGlzcG9zZSgpO1xuXHR9XG5cblx0cHVibGljIHN0b3BNb25pdG9yaW5nKGludm9rZVN0b3BDYWxsYmFjazogYm9vbGVhbiwgYnJvd3NlckV2ZW50PzogUG9pbnRlckV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5pc01vbml0b3JpbmcoKSkge1xuXHRcdFx0Ly8gTm90IG1vbml0b3Jpbmdcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBVbmhvb2tcblx0XHR0aGlzLl9ob29rcy5jbGVhcigpO1xuXHRcdHRoaXMuX3BvaW50ZXJNb3ZlQ2FsbGJhY2sgPSBudWxsO1xuXHRcdGNvbnN0IG9uU3RvcENhbGxiYWNrID0gdGhpcy5fb25TdG9wQ2FsbGJhY2s7XG5cdFx0dGhpcy5fb25TdG9wQ2FsbGJhY2sgPSBudWxsO1xuXG5cdFx0aWYgKGludm9rZVN0b3BDYWxsYmFjayAmJiBvblN0b3BDYWxsYmFjaykge1xuXHRcdFx0b25TdG9wQ2FsbGJhY2soYnJvd3NlckV2ZW50KTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgaXNNb25pdG9yaW5nKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhIXRoaXMuX3BvaW50ZXJNb3ZlQ2FsbGJhY2s7XG5cdH1cblxuXHRwdWJsaWMgc3RhcnRNb25pdG9yaW5nKFxuXHRcdGluaXRpYWxFbGVtZW50OiBFbGVtZW50LFxuXHRcdHBvaW50ZXJJZDogbnVtYmVyLFxuXHRcdGluaXRpYWxCdXR0b25zOiBudW1iZXIsXG5cdFx0cG9pbnRlck1vdmVDYWxsYmFjazogSVBvaW50ZXJNb3ZlQ2FsbGJhY2ssXG5cdFx0b25TdG9wQ2FsbGJhY2s6IElPblN0b3BDYWxsYmFja1xuXHQpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5pc01vbml0b3JpbmcoKSkge1xuXHRcdFx0dGhpcy5zdG9wTW9uaXRvcmluZyhmYWxzZSk7XG5cdFx0fVxuXHRcdHRoaXMuX3BvaW50ZXJNb3ZlQ2FsbGJhY2sgPSBwb2ludGVyTW92ZUNhbGxiYWNrO1xuXHRcdHRoaXMuX29uU3RvcENhbGxiYWNrID0gb25TdG9wQ2FsbGJhY2s7XG5cblx0XHRsZXQgZXZlbnRTb3VyY2U6IEVsZW1lbnQgfCBXaW5kb3cgPSBpbml0aWFsRWxlbWVudDtcblxuXHRcdHRyeSB7XG5cdFx0XHRpbml0aWFsRWxlbWVudC5zZXRQb2ludGVyQ2FwdHVyZShwb2ludGVySWQpO1xuXHRcdFx0dGhpcy5faG9va3MuYWRkKHRvRGlzcG9zYWJsZSgoKSA9PiB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0aW5pdGlhbEVsZW1lbnQucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHBvaW50ZXJJZCk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMTYxNzMxXG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHQvLyBgcmVsZWFzZVBvaW50ZXJDYXB0dXJlYCBzb21ldGltZXMgZmFpbHMgd2hlbiBiZWluZyBpbnZva2VkIHdpdGggdGhlIGV4Y2VwdGlvbjpcblx0XHRcdFx0XHQvLyAgICAgRE9NRXhjZXB0aW9uOiBGYWlsZWQgdG8gZXhlY3V0ZSAncmVsZWFzZVBvaW50ZXJDYXB0dXJlJyBvbiAnRWxlbWVudCc6XG5cdFx0XHRcdFx0Ly8gICAgIE5vIGFjdGl2ZSBwb2ludGVyIHdpdGggdGhlIGdpdmVuIGlkIGlzIGZvdW5kLlxuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0Ly8gVGhlcmUncyBubyBuZWVkIHRvIGRvIGFueXRoaW5nIGluIGNhc2Ugb2YgZmFpbHVyZVxuXHRcdFx0XHR9XG5cdFx0XHR9KSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE0NDU4NFxuXHRcdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xNDY5NDdcblx0XHRcdC8vIGBzZXRQb2ludGVyQ2FwdHVyZWAgc29tZXRpbWVzIGZhaWxzIHdoZW4gYmVpbmcgaW52b2tlZFxuXHRcdFx0Ly8gZnJvbSBhIGBtb3VzZWRvd25gIGxpc3RlbmVyIG9uIG1hY09TIGFuZCBXaW5kb3dzXG5cdFx0XHQvLyBhbmQgaXQgYWx3YXlzIGZhaWxzIG9uIExpbnV4IHdpdGggdGhlIGV4Y2VwdGlvbjpcblx0XHRcdC8vICAgICBET01FeGNlcHRpb246IEZhaWxlZCB0byBleGVjdXRlICdzZXRQb2ludGVyQ2FwdHVyZScgb24gJ0VsZW1lbnQnOlxuXHRcdFx0Ly8gICAgIE5vIGFjdGl2ZSBwb2ludGVyIHdpdGggdGhlIGdpdmVuIGlkIGlzIGZvdW5kLlxuXHRcdFx0Ly8gSW4gY2FzZSBvZiBmYWlsdXJlLCB3ZSBiaW5kIHRoZSBsaXN0ZW5lcnMgb24gdGhlIHdpbmRvd1xuXHRcdFx0ZXZlbnRTb3VyY2UgPSBkb20uZ2V0V2luZG93KGluaXRpYWxFbGVtZW50KTtcblx0XHR9XG5cblx0XHR0aGlzLl9ob29rcy5hZGQoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihcblx0XHRcdGV2ZW50U291cmNlLFxuXHRcdFx0ZG9tLkV2ZW50VHlwZS5QT0lOVEVSX01PVkUsXG5cdFx0XHQoZSkgPT4ge1xuXHRcdFx0XHRpZiAoZS5idXR0b25zICE9PSBpbml0aWFsQnV0dG9ucykge1xuXHRcdFx0XHRcdC8vIEJ1dHRvbnMgc3RhdGUgaGFzIGNoYW5nZWQgaW4gdGhlIG1lYW50aW1lXG5cdFx0XHRcdFx0dGhpcy5zdG9wTW9uaXRvcmluZyh0cnVlKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHRoaXMuX3BvaW50ZXJNb3ZlQ2FsbGJhY2shKGUpO1xuXHRcdFx0fVxuXHRcdCkpO1xuXG5cdFx0dGhpcy5faG9va3MuYWRkKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoXG5cdFx0XHRldmVudFNvdXJjZSxcblx0XHRcdGRvbS5FdmVudFR5cGUuUE9JTlRFUl9VUCxcblx0XHRcdChlOiBQb2ludGVyRXZlbnQpID0+IHRoaXMuc3RvcE1vbml0b3JpbmcodHJ1ZSlcblx0XHQpKTtcblx0fVxufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5mdW5jdGlvbiBjcmVhdGVEZWNvcmF0b3IobWFwRm46IChmbjogRnVuY3Rpb24sIGtleTogc3RyaW5nKSA9PiBGdW5jdGlvbik6IEZ1bmN0aW9uIHtcblx0cmV0dXJuICh0YXJnZXQ6IGFueSwga2V5OiBzdHJpbmcsIGRlc2NyaXB0b3I6IGFueSkgPT4ge1xuXHRcdGxldCBmbktleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cdFx0bGV0IGZuOiBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xuXG5cdFx0aWYgKHR5cGVvZiBkZXNjcmlwdG9yLnZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRmbktleSA9ICd2YWx1ZSc7XG5cdFx0XHRmbiA9IGRlc2NyaXB0b3IudmFsdWU7XG5cdFx0fSBlbHNlIGlmICh0eXBlb2YgZGVzY3JpcHRvci5nZXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdGZuS2V5ID0gJ2dldCc7XG5cdFx0XHRmbiA9IGRlc2NyaXB0b3IuZ2V0O1xuXHRcdH1cblxuXHRcdGlmICghZm4pIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignbm90IHN1cHBvcnRlZCcpO1xuXHRcdH1cblxuXHRcdGRlc2NyaXB0b3JbZm5LZXkhXSA9IG1hcEZuKGZuLCBrZXkpO1xuXHR9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVtb2l6ZShfdGFyZ2V0OiBhbnksIGtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBhbnkpIHtcblx0bGV0IGZuS2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblx0bGV0IGZuOiBGdW5jdGlvbiB8IG51bGwgPSBudWxsO1xuXG5cdGlmICh0eXBlb2YgZGVzY3JpcHRvci52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGZuS2V5ID0gJ3ZhbHVlJztcblx0XHRmbiA9IGRlc2NyaXB0b3IudmFsdWU7XG5cblx0XHRpZiAoZm4hLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0Y29uc29sZS53YXJuKCdNZW1vaXplIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gZnVuY3Rpb25zIHdpdGggemVybyBwYXJhbWV0ZXJzJyk7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZXNjcmlwdG9yLmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGZuS2V5ID0gJ2dldCc7XG5cdFx0Zm4gPSBkZXNjcmlwdG9yLmdldDtcblx0fVxuXG5cdGlmICghZm4pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQnKTtcblx0fVxuXG5cdGNvbnN0IG1lbW9pemVLZXkgPSBgJG1lbW9pemUkJHtrZXl9YDtcblx0ZGVzY3JpcHRvcltmbktleSFdID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0aWYgKCF0aGlzLmhhc093blByb3BlcnR5KG1lbW9pemVLZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgbWVtb2l6ZUtleSwge1xuXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0XHRcdFx0d3JpdGFibGU6IGZhbHNlLFxuXHRcdFx0XHR2YWx1ZTogZm4uYXBwbHkodGhpcywgYXJncylcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzW21lbW9pemVLZXldO1xuXHR9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEZWJvdW5jZVJlZHVjZXI8VD4ge1xuXHQocHJldmlvdXNWYWx1ZTogVCwgLi4uYXJnczogYW55W10pOiBUO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2U8VD4oZGVsYXk6IG51bWJlciwgcmVkdWNlcj86IElEZWJvdW5jZVJlZHVjZXI8VD4sIGluaXRpYWxWYWx1ZVByb3ZpZGVyPzogKCkgPT4gVCk6IEZ1bmN0aW9uIHtcblx0cmV0dXJuIGNyZWF0ZURlY29yYXRvcigoZm4sIGtleSkgPT4ge1xuXHRcdGNvbnN0IHRpbWVyS2V5ID0gYCRkZWJvdW5jZSQke2tleX1gO1xuXHRcdGNvbnN0IHJlc3VsdEtleSA9IGAkZGVib3VuY2UkcmVzdWx0JCR7a2V5fWA7XG5cblx0XHRyZXR1cm4gZnVuY3Rpb24gKHRoaXM6IGFueSwgLi4uYXJnczogYW55W10pIHtcblx0XHRcdGlmICghdGhpc1tyZXN1bHRLZXldKSB7XG5cdFx0XHRcdHRoaXNbcmVzdWx0S2V5XSA9IGluaXRpYWxWYWx1ZVByb3ZpZGVyID8gaW5pdGlhbFZhbHVlUHJvdmlkZXIoKSA6IHVuZGVmaW5lZDtcblx0XHRcdH1cblxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXNbdGltZXJLZXldKTtcblxuXHRcdFx0aWYgKHJlZHVjZXIpIHtcblx0XHRcdFx0dGhpc1tyZXN1bHRLZXldID0gcmVkdWNlcih0aGlzW3Jlc3VsdEtleV0sIC4uLmFyZ3MpO1xuXHRcdFx0XHRhcmdzID0gW3RoaXNbcmVzdWx0S2V5XV07XG5cdFx0XHR9XG5cblx0XHRcdHRoaXNbdGltZXJLZXldID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHRcdFx0XHR0aGlzW3Jlc3VsdEtleV0gPSBpbml0aWFsVmFsdWVQcm92aWRlciA/IGluaXRpYWxWYWx1ZVByb3ZpZGVyKCkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9LCBkZWxheSk7XG5cdFx0fTtcblx0fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZTxUPihkZWxheTogbnVtYmVyLCByZWR1Y2VyPzogSURlYm91bmNlUmVkdWNlcjxUPiwgaW5pdGlhbFZhbHVlUHJvdmlkZXI/OiAoKSA9PiBUKTogRnVuY3Rpb24ge1xuXHRyZXR1cm4gY3JlYXRlRGVjb3JhdG9yKChmbiwga2V5KSA9PiB7XG5cdFx0Y29uc3QgdGltZXJLZXkgPSBgJHRocm90dGxlJHRpbWVyJCR7a2V5fWA7XG5cdFx0Y29uc3QgcmVzdWx0S2V5ID0gYCR0aHJvdHRsZSRyZXN1bHQkJHtrZXl9YDtcblx0XHRjb25zdCBsYXN0UnVuS2V5ID0gYCR0aHJvdHRsZSRsYXN0UnVuJCR7a2V5fWA7XG5cdFx0Y29uc3QgcGVuZGluZ0tleSA9IGAkdGhyb3R0bGUkcGVuZGluZyQke2tleX1gO1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnksIC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0XHRpZiAoIXRoaXNbcmVzdWx0S2V5XSkge1xuXHRcdFx0XHR0aGlzW3Jlc3VsdEtleV0gPSBpbml0aWFsVmFsdWVQcm92aWRlciA/IGluaXRpYWxWYWx1ZVByb3ZpZGVyKCkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpc1tsYXN0UnVuS2V5XSA9PT0gbnVsbCB8fCB0aGlzW2xhc3RSdW5LZXldID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0dGhpc1tsYXN0UnVuS2V5XSA9IC1OdW1iZXIuTUFYX1ZBTFVFO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocmVkdWNlcikge1xuXHRcdFx0XHR0aGlzW3Jlc3VsdEtleV0gPSByZWR1Y2VyKHRoaXNbcmVzdWx0S2V5XSwgLi4uYXJncyk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzW3BlbmRpbmdLZXldKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgbmV4dFRpbWUgPSB0aGlzW2xhc3RSdW5LZXldICsgZGVsYXk7XG5cdFx0XHRpZiAobmV4dFRpbWUgPD0gRGF0ZS5ub3coKSkge1xuXHRcdFx0XHR0aGlzW2xhc3RSdW5LZXldID0gRGF0ZS5ub3coKTtcblx0XHRcdFx0Zm4uYXBwbHkodGhpcywgW3RoaXNbcmVzdWx0S2V5XV0pO1xuXHRcdFx0XHR0aGlzW3Jlc3VsdEtleV0gPSBpbml0aWFsVmFsdWVQcm92aWRlciA/IGluaXRpYWxWYWx1ZVByb3ZpZGVyKCkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzW3BlbmRpbmdLZXldID0gdHJ1ZTtcblx0XHRcdFx0dGhpc1t0aW1lcktleV0gPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzW3BlbmRpbmdLZXldID0gZmFsc2U7XG5cdFx0XHRcdFx0dGhpc1tsYXN0UnVuS2V5XSA9IERhdGUubm93KCk7XG5cdFx0XHRcdFx0Zm4uYXBwbHkodGhpcywgW3RoaXNbcmVzdWx0S2V5XV0pO1xuXHRcdFx0XHRcdHRoaXNbcmVzdWx0S2V5XSA9IGluaXRpYWxWYWx1ZVByb3ZpZGVyID8gaW5pdGlhbFZhbHVlUHJvdmlkZXIoKSA6IHVuZGVmaW5lZDtcblx0XHRcdFx0fSwgbmV4dFRpbWUgLSBEYXRlLm5vdygpKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9KTtcbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0ICogYXMgRG9tVXRpbHMgZnJvbSAndnMvYmFzZS9icm93c2VyL2RvbSc7XG5pbXBvcnQgeyBtYWluV2luZG93IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3dpbmRvdyc7XG5pbXBvcnQgKiBhcyBhcnJheXMgZnJvbSAndnMvYmFzZS9jb21tb24vYXJyYXlzJztcbmltcG9ydCB7IG1lbW9pemUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9kZWNvcmF0b3JzJztcbmltcG9ydCB7IEV2ZW50IGFzIEV2ZW50VXRpbHMgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCBJRGlzcG9zYWJsZSwgbWFya0FzU2luZ2xldG9uLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgTGlua2VkTGlzdCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpbmtlZExpc3QnO1xuXG5leHBvcnQgbmFtZXNwYWNlIEV2ZW50VHlwZSB7XG5cdGV4cG9ydCBjb25zdCBUYXAgPSAnLXh0ZXJtLWdlc3R1cmV0YXAnO1xuXHRleHBvcnQgY29uc3QgQ2hhbmdlID0gJy14dGVybS1nZXN0dXJlY2hhbmdlJztcblx0ZXhwb3J0IGNvbnN0IFN0YXJ0ID0gJy14dGVybS1nZXN0dXJlc3RhcnQnO1xuXHRleHBvcnQgY29uc3QgRW5kID0gJy14dGVybS1nZXN0dXJlc2VuZCc7XG5cdGV4cG9ydCBjb25zdCBDb250ZXh0bWVudSA9ICcteHRlcm0tZ2VzdHVyZWNvbnRleHRtZW51Jztcbn1cblxuaW50ZXJmYWNlIFRvdWNoRGF0YSB7XG5cdGlkOiBudW1iZXI7XG5cdGluaXRpYWxUYXJnZXQ6IEV2ZW50VGFyZ2V0O1xuXHRpbml0aWFsVGltZVN0YW1wOiBudW1iZXI7XG5cdGluaXRpYWxQYWdlWDogbnVtYmVyO1xuXHRpbml0aWFsUGFnZVk6IG51bWJlcjtcblx0cm9sbGluZ1RpbWVzdGFtcHM6IG51bWJlcltdO1xuXHRyb2xsaW5nUGFnZVg6IG51bWJlcltdO1xuXHRyb2xsaW5nUGFnZVk6IG51bWJlcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlc3R1cmVFdmVudCBleHRlbmRzIE1vdXNlRXZlbnQge1xuXHRpbml0aWFsVGFyZ2V0OiBFdmVudFRhcmdldCB8IHVuZGVmaW5lZDtcblx0dHJhbnNsYXRpb25YOiBudW1iZXI7XG5cdHRyYW5zbGF0aW9uWTogbnVtYmVyO1xuXHRwYWdlWDogbnVtYmVyO1xuXHRwYWdlWTogbnVtYmVyO1xuXHR0YXBDb3VudDogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgVG91Y2gge1xuXHRpZGVudGlmaWVyOiBudW1iZXI7XG5cdHNjcmVlblg6IG51bWJlcjtcblx0c2NyZWVuWTogbnVtYmVyO1xuXHRjbGllbnRYOiBudW1iZXI7XG5cdGNsaWVudFk6IG51bWJlcjtcblx0cGFnZVg6IG51bWJlcjtcblx0cGFnZVk6IG51bWJlcjtcblx0cmFkaXVzWDogbnVtYmVyO1xuXHRyYWRpdXNZOiBudW1iZXI7XG5cdHJvdGF0aW9uQW5nbGU6IG51bWJlcjtcblx0Zm9yY2U6IG51bWJlcjtcblx0dGFyZ2V0OiBFbGVtZW50O1xufVxuXG5pbnRlcmZhY2UgVG91Y2hMaXN0IHtcblx0W2k6IG51bWJlcl06IFRvdWNoO1xuXHRsZW5ndGg6IG51bWJlcjtcblx0aXRlbShpbmRleDogbnVtYmVyKTogVG91Y2g7XG5cdGlkZW50aWZpZWRUb3VjaChpZDogbnVtYmVyKTogVG91Y2g7XG59XG5cbmludGVyZmFjZSBUb3VjaEV2ZW50IGV4dGVuZHMgRXZlbnQge1xuXHR0b3VjaGVzOiBUb3VjaExpc3Q7XG5cdHRhcmdldFRvdWNoZXM6IFRvdWNoTGlzdDtcblx0Y2hhbmdlZFRvdWNoZXM6IFRvdWNoTGlzdDtcbn1cblxuZXhwb3J0IGNsYXNzIEdlc3R1cmUgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcblxuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBTQ1JPTExfRlJJQ1RJT04gPSAtMC4wMDU7XG5cdHByaXZhdGUgc3RhdGljIElOU1RBTkNFOiBHZXN0dXJlO1xuXHRwcml2YXRlIHN0YXRpYyByZWFkb25seSBIT0xEX0RFTEFZID0gNzAwO1xuXG5cdHByaXZhdGUgZGlzcGF0Y2hlZCA9IGZhbHNlO1xuXHRwcml2YXRlIHJlYWRvbmx5IHRhcmdldHMgPSBuZXcgTGlua2VkTGlzdDxIVE1MRWxlbWVudD4oKTtcblx0cHJpdmF0ZSByZWFkb25seSBpZ25vcmVUYXJnZXRzID0gbmV3IExpbmtlZExpc3Q8SFRNTEVsZW1lbnQ+KCk7XG5cdHByaXZhdGUgaGFuZGxlOiBJRGlzcG9zYWJsZSB8IG51bGw7XG5cblx0cHJpdmF0ZSByZWFkb25seSBhY3RpdmVUb3VjaGVzOiB7IFtpZDogbnVtYmVyXTogVG91Y2hEYXRhIH07XG5cblx0cHJpdmF0ZSBfbGFzdFNldFRhcENvdW50VGltZTogbnVtYmVyO1xuXG5cdHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IENMRUFSX1RBUF9DT1VOVF9USU1FID0gNDAwOyAvLyBtc1xuXG5cblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcigpO1xuXG5cdFx0dGhpcy5hY3RpdmVUb3VjaGVzID0ge307XG5cdFx0dGhpcy5oYW5kbGUgPSBudWxsO1xuXHRcdHRoaXMuX2xhc3RTZXRUYXBDb3VudFRpbWUgPSAwO1xuXG5cdFx0dGhpcy5fcmVnaXN0ZXIoRXZlbnRVdGlscy5ydW5BbmRTdWJzY3JpYmUoRG9tVXRpbHMub25EaWRSZWdpc3RlcldpbmRvdywgKHsgd2luZG93LCBkaXNwb3NhYmxlcyB9KSA9PiB7XG5cdFx0XHRkaXNwb3NhYmxlcy5hZGQoRG9tVXRpbHMuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHdpbmRvdy5kb2N1bWVudCwgJ3RvdWNoc3RhcnQnLCAoZTogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoU3RhcnQoZSksIHsgcGFzc2l2ZTogZmFsc2UgfSkpO1xuXHRcdFx0ZGlzcG9zYWJsZXMuYWRkKERvbVV0aWxzLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih3aW5kb3cuZG9jdW1lbnQsICd0b3VjaGVuZCcsIChlOiBUb3VjaEV2ZW50KSA9PiB0aGlzLm9uVG91Y2hFbmQod2luZG93LCBlKSkpO1xuXHRcdFx0ZGlzcG9zYWJsZXMuYWRkKERvbVV0aWxzLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih3aW5kb3cuZG9jdW1lbnQsICd0b3VjaG1vdmUnLCAoZTogVG91Y2hFdmVudCkgPT4gdGhpcy5vblRvdWNoTW92ZShlKSwgeyBwYXNzaXZlOiBmYWxzZSB9KSk7XG5cdFx0fSwgeyB3aW5kb3c6IG1haW5XaW5kb3csIGRpc3Bvc2FibGVzOiB0aGlzLl9zdG9yZSB9KSk7XG5cdH1cblxuXHRwdWJsaWMgc3RhdGljIGFkZFRhcmdldChlbGVtZW50OiBIVE1MRWxlbWVudCk6IElEaXNwb3NhYmxlIHtcblx0XHRpZiAoIUdlc3R1cmUuaXNUb3VjaERldmljZSgpKSB7XG5cdFx0XHRyZXR1cm4gRGlzcG9zYWJsZS5Ob25lO1xuXHRcdH1cblx0XHRpZiAoIUdlc3R1cmUuSU5TVEFOQ0UpIHtcblx0XHRcdEdlc3R1cmUuSU5TVEFOQ0UgPSBtYXJrQXNTaW5nbGV0b24obmV3IEdlc3R1cmUoKSk7XG5cdFx0fVxuXG5cdFx0Y29uc3QgcmVtb3ZlID0gR2VzdHVyZS5JTlNUQU5DRS50YXJnZXRzLnB1c2goZWxlbWVudCk7XG5cdFx0cmV0dXJuIHRvRGlzcG9zYWJsZShyZW1vdmUpO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBpZ25vcmVUYXJnZXQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBJRGlzcG9zYWJsZSB7XG5cdFx0aWYgKCFHZXN0dXJlLmlzVG91Y2hEZXZpY2UoKSkge1xuXHRcdFx0cmV0dXJuIERpc3Bvc2FibGUuTm9uZTtcblx0XHR9XG5cdFx0aWYgKCFHZXN0dXJlLklOU1RBTkNFKSB7XG5cdFx0XHRHZXN0dXJlLklOU1RBTkNFID0gbWFya0FzU2luZ2xldG9uKG5ldyBHZXN0dXJlKCkpO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlbW92ZSA9IEdlc3R1cmUuSU5TVEFOQ0UuaWdub3JlVGFyZ2V0cy5wdXNoKGVsZW1lbnQpO1xuXHRcdHJldHVybiB0b0Rpc3Bvc2FibGUocmVtb3ZlKTtcblx0fVxuXG5cdEBtZW1vaXplXG5cdHN0YXRpYyBpc1RvdWNoRGV2aWNlKCk6IGJvb2xlYW4ge1xuXHRcdC8vIGAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3dgIGFsd2F5cyBldmFsdWF0ZXMgdG8gdHJ1ZSB3aXRoIHR5cGVzY3JpcHQncyBtb2Rlcm4gdHlwaW5ncy4gVGhpcyBjYXVzZXMgYHdpbmRvd2AgdG8gYmVcblx0XHQvLyBgbmV2ZXJgIGxhdGVyIGluIGB3aW5kb3cubmF2aWdhdG9yYC4gVGhhdCdzIHdoeSB3ZSBuZWVkIHRoZSBleHBsaWNpdCBgd2luZG93IGFzIFdpbmRvd2AgY2FzdFxuXHRcdHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiBtYWluV2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDA7XG5cdH1cblxuXHRwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5oYW5kbGUpIHtcblx0XHRcdHRoaXMuaGFuZGxlLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuaGFuZGxlID0gbnVsbDtcblx0XHR9XG5cblx0XHRzdXBlci5kaXNwb3NlKCk7XG5cdH1cblxuXHRwcml2YXRlIG9uVG91Y2hTdGFydChlOiBUb3VjaEV2ZW50KTogdm9pZCB7XG5cdFx0Y29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsgLy8gdXNlIERhdGUubm93KCkgYmVjYXVzZSBvbiBGRiBlLnRpbWVTdGFtcCBpcyBub3QgZXBvY2ggYmFzZWQuXG5cblx0XHRpZiAodGhpcy5oYW5kbGUpIHtcblx0XHRcdHRoaXMuaGFuZGxlLmRpc3Bvc2UoKTtcblx0XHRcdHRoaXMuaGFuZGxlID0gbnVsbDtcblx0XHR9XG5cblx0XHRmb3IgKGxldCBpID0gMCwgbGVuID0gZS50YXJnZXRUb3VjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRjb25zdCB0b3VjaCA9IGUudGFyZ2V0VG91Y2hlcy5pdGVtKGkpO1xuXG5cdFx0XHR0aGlzLmFjdGl2ZVRvdWNoZXNbdG91Y2guaWRlbnRpZmllcl0gPSB7XG5cdFx0XHRcdGlkOiB0b3VjaC5pZGVudGlmaWVyLFxuXHRcdFx0XHRpbml0aWFsVGFyZ2V0OiB0b3VjaC50YXJnZXQsXG5cdFx0XHRcdGluaXRpYWxUaW1lU3RhbXA6IHRpbWVzdGFtcCxcblx0XHRcdFx0aW5pdGlhbFBhZ2VYOiB0b3VjaC5wYWdlWCxcblx0XHRcdFx0aW5pdGlhbFBhZ2VZOiB0b3VjaC5wYWdlWSxcblx0XHRcdFx0cm9sbGluZ1RpbWVzdGFtcHM6IFt0aW1lc3RhbXBdLFxuXHRcdFx0XHRyb2xsaW5nUGFnZVg6IFt0b3VjaC5wYWdlWF0sXG5cdFx0XHRcdHJvbGxpbmdQYWdlWTogW3RvdWNoLnBhZ2VZXVxuXHRcdFx0fTtcblxuXHRcdFx0Y29uc3QgZXZ0ID0gdGhpcy5uZXdHZXN0dXJlRXZlbnQoRXZlbnRUeXBlLlN0YXJ0LCB0b3VjaC50YXJnZXQpO1xuXHRcdFx0ZXZ0LnBhZ2VYID0gdG91Y2gucGFnZVg7XG5cdFx0XHRldnQucGFnZVkgPSB0b3VjaC5wYWdlWTtcblx0XHRcdHRoaXMuZGlzcGF0Y2hFdmVudChldnQpO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmRpc3BhdGNoZWQpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLmRpc3BhdGNoZWQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG9uVG91Y2hFbmQodGFyZ2V0V2luZG93OiBXaW5kb3csIGU6IFRvdWNoRXZlbnQpOiB2b2lkIHtcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpOyAvLyB1c2UgRGF0ZS5ub3coKSBiZWNhdXNlIG9uIEZGIGUudGltZVN0YW1wIGlzIG5vdCBlcG9jaCBiYXNlZC5cblxuXHRcdGNvbnN0IGFjdGl2ZVRvdWNoQ291bnQgPSBPYmplY3Qua2V5cyh0aGlzLmFjdGl2ZVRvdWNoZXMpLmxlbmd0aDtcblxuXHRcdGZvciAobGV0IGkgPSAwLCBsZW4gPSBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cblx0XHRcdGNvbnN0IHRvdWNoID0gZS5jaGFuZ2VkVG91Y2hlcy5pdGVtKGkpO1xuXG5cdFx0XHRpZiAoIXRoaXMuYWN0aXZlVG91Y2hlcy5oYXNPd25Qcm9wZXJ0eShTdHJpbmcodG91Y2guaWRlbnRpZmllcikpKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybignbW92ZSBvZiBhbiBVTktOT1dOIHRvdWNoJywgdG91Y2gpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgZGF0YSA9IHRoaXMuYWN0aXZlVG91Y2hlc1t0b3VjaC5pZGVudGlmaWVyXSxcblx0XHRcdFx0aG9sZFRpbWUgPSBEYXRlLm5vdygpIC0gZGF0YS5pbml0aWFsVGltZVN0YW1wO1xuXG5cdFx0XHRpZiAoaG9sZFRpbWUgPCBHZXN0dXJlLkhPTERfREVMQVlcblx0XHRcdFx0JiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVggLSBhcnJheXMudGFpbChkYXRhLnJvbGxpbmdQYWdlWCkhKSA8IDMwXG5cdFx0XHRcdCYmIE1hdGguYWJzKGRhdGEuaW5pdGlhbFBhZ2VZIC0gYXJyYXlzLnRhaWwoZGF0YS5yb2xsaW5nUGFnZVkpISkgPCAzMCkge1xuXG5cdFx0XHRcdGNvbnN0IGV2dCA9IHRoaXMubmV3R2VzdHVyZUV2ZW50KEV2ZW50VHlwZS5UYXAsIGRhdGEuaW5pdGlhbFRhcmdldCk7XG5cdFx0XHRcdGV2dC5wYWdlWCA9IGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VYKSE7XG5cdFx0XHRcdGV2dC5wYWdlWSA9IGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VZKSE7XG5cdFx0XHRcdHRoaXMuZGlzcGF0Y2hFdmVudChldnQpO1xuXG5cdFx0XHR9IGVsc2UgaWYgKGhvbGRUaW1lID49IEdlc3R1cmUuSE9MRF9ERUxBWVxuXHRcdFx0XHQmJiBNYXRoLmFicyhkYXRhLmluaXRpYWxQYWdlWCAtIGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VYKSEpIDwgMzBcblx0XHRcdFx0JiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVkgLSBhcnJheXMudGFpbChkYXRhLnJvbGxpbmdQYWdlWSkhKSA8IDMwKSB7XG5cblx0XHRcdFx0Y29uc3QgZXZ0ID0gdGhpcy5uZXdHZXN0dXJlRXZlbnQoRXZlbnRUeXBlLkNvbnRleHRtZW51LCBkYXRhLmluaXRpYWxUYXJnZXQpO1xuXHRcdFx0XHRldnQucGFnZVggPSBhcnJheXMudGFpbChkYXRhLnJvbGxpbmdQYWdlWCkhO1xuXHRcdFx0XHRldnQucGFnZVkgPSBhcnJheXMudGFpbChkYXRhLnJvbGxpbmdQYWdlWSkhO1xuXHRcdFx0XHR0aGlzLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblxuXHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUb3VjaENvdW50ID09PSAxKSB7XG5cdFx0XHRcdGNvbnN0IGZpbmFsWCA9IGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VYKSE7XG5cdFx0XHRcdGNvbnN0IGZpbmFsWSA9IGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VZKSE7XG5cblx0XHRcdFx0Y29uc3QgZGVsdGFUID0gYXJyYXlzLnRhaWwoZGF0YS5yb2xsaW5nVGltZXN0YW1wcykhIC0gZGF0YS5yb2xsaW5nVGltZXN0YW1wc1swXTtcblx0XHRcdFx0Y29uc3QgZGVsdGFYID0gZmluYWxYIC0gZGF0YS5yb2xsaW5nUGFnZVhbMF07XG5cdFx0XHRcdGNvbnN0IGRlbHRhWSA9IGZpbmFsWSAtIGRhdGEucm9sbGluZ1BhZ2VZWzBdO1xuXG5cdFx0XHRcdC8vIFdlIG5lZWQgdG8gZ2V0IGFsbCB0aGUgZGlzcGF0Y2ggdGFyZ2V0cyBvbiB0aGUgc3RhcnQgb2YgdGhlIGluZXJ0aWEgZXZlbnRcblx0XHRcdFx0Y29uc3QgZGlzcGF0Y2hUbyA9IFsuLi50aGlzLnRhcmdldHNdLmZpbHRlcih0ID0+IGRhdGEuaW5pdGlhbFRhcmdldCBpbnN0YW5jZW9mIE5vZGUgJiYgdC5jb250YWlucyhkYXRhLmluaXRpYWxUYXJnZXQpKTtcblx0XHRcdFx0dGhpcy5pbmVydGlhKHRhcmdldFdpbmRvdywgZGlzcGF0Y2hUbywgdGltZXN0YW1wLFx0Ly8gdGltZSBub3dcblx0XHRcdFx0XHRNYXRoLmFicyhkZWx0YVgpIC8gZGVsdGFULFx0XHRcdFx0XHRcdC8vIHNwZWVkXG5cdFx0XHRcdFx0ZGVsdGFYID4gMCA/IDEgOiAtMSxcdFx0XHRcdFx0XHRcdC8vIHggZGlyZWN0aW9uXG5cdFx0XHRcdFx0ZmluYWxYLFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB4IG5vd1xuXHRcdFx0XHRcdE1hdGguYWJzKGRlbHRhWSkgLyBkZWx0YVQsICBcdFx0XHRcdFx0Ly8geSBzcGVlZFxuXHRcdFx0XHRcdGRlbHRhWSA+IDAgPyAxIDogLTEsXHRcdFx0XHRcdFx0XHQvLyB5IGRpcmVjdGlvblxuXHRcdFx0XHRcdGZpbmFsWVx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyB5IG5vd1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cblx0XHRcdHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLm5ld0dlc3R1cmVFdmVudChFdmVudFR5cGUuRW5kLCBkYXRhLmluaXRpYWxUYXJnZXQpKTtcblx0XHRcdC8vIGZvcmdldCBhYm91dCB0aGlzIHRvdWNoXG5cdFx0XHRkZWxldGUgdGhpcy5hY3RpdmVUb3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmRpc3BhdGNoZWQpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLmRpc3BhdGNoZWQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIG5ld0dlc3R1cmVFdmVudCh0eXBlOiBzdHJpbmcsIGluaXRpYWxUYXJnZXQ/OiBFdmVudFRhcmdldCk6IEdlc3R1cmVFdmVudCB7XG5cdFx0Y29uc3QgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKSBhcyB1bmtub3duIGFzIEdlc3R1cmVFdmVudDtcblx0XHRldmVudC5pbml0RXZlbnQodHlwZSwgZmFsc2UsIHRydWUpO1xuXHRcdGV2ZW50LmluaXRpYWxUYXJnZXQgPSBpbml0aWFsVGFyZ2V0O1xuXHRcdGV2ZW50LnRhcENvdW50ID0gMDtcblx0XHRyZXR1cm4gZXZlbnQ7XG5cdH1cblxuXHRwcml2YXRlIGRpc3BhdGNoRXZlbnQoZXZlbnQ6IEdlc3R1cmVFdmVudCk6IHZvaWQge1xuXHRcdGlmIChldmVudC50eXBlID09PSBFdmVudFR5cGUuVGFwKSB7XG5cdFx0XHRjb25zdCBjdXJyZW50VGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cdFx0XHRsZXQgc2V0VGFwQ291bnQgPSAwO1xuXHRcdFx0aWYgKGN1cnJlbnRUaW1lIC0gdGhpcy5fbGFzdFNldFRhcENvdW50VGltZSA+IEdlc3R1cmUuQ0xFQVJfVEFQX0NPVU5UX1RJTUUpIHtcblx0XHRcdFx0c2V0VGFwQ291bnQgPSAxO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c2V0VGFwQ291bnQgPSAyO1xuXHRcdFx0fVxuXG5cdFx0XHR0aGlzLl9sYXN0U2V0VGFwQ291bnRUaW1lID0gY3VycmVudFRpbWU7XG5cdFx0XHRldmVudC50YXBDb3VudCA9IHNldFRhcENvdW50O1xuXHRcdH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNoYW5nZSB8fCBldmVudC50eXBlID09PSBFdmVudFR5cGUuQ29udGV4dG1lbnUpIHtcblx0XHRcdC8vIHRhcCBpcyBjYW5jZWxlZCBieSBzY3JvbGxpbmcgb3IgY29udGV4dCBtZW51XG5cdFx0XHR0aGlzLl9sYXN0U2V0VGFwQ291bnRUaW1lID0gMDtcblx0XHR9XG5cblx0XHRpZiAoZXZlbnQuaW5pdGlhbFRhcmdldCBpbnN0YW5jZW9mIE5vZGUpIHtcblx0XHRcdGZvciAoY29uc3QgaWdub3JlVGFyZ2V0IG9mIHRoaXMuaWdub3JlVGFyZ2V0cykge1xuXHRcdFx0XHRpZiAoaWdub3JlVGFyZ2V0LmNvbnRhaW5zKGV2ZW50LmluaXRpYWxUYXJnZXQpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHRhcmdldHM6IFtudW1iZXIsIEhUTUxFbGVtZW50XVtdID0gW107XG5cdFx0XHRmb3IgKGNvbnN0IHRhcmdldCBvZiB0aGlzLnRhcmdldHMpIHtcblx0XHRcdFx0aWYgKHRhcmdldC5jb250YWlucyhldmVudC5pbml0aWFsVGFyZ2V0KSkge1xuXHRcdFx0XHRcdGxldCBkZXB0aCA9IDA7XG5cdFx0XHRcdFx0bGV0IG5vdzogTm9kZSB8IG51bGwgPSBldmVudC5pbml0aWFsVGFyZ2V0O1xuXHRcdFx0XHRcdHdoaWxlIChub3cgJiYgbm93ICE9PSB0YXJnZXQpIHtcblx0XHRcdFx0XHRcdGRlcHRoKys7XG5cdFx0XHRcdFx0XHRub3cgPSBub3cucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGFyZ2V0cy5wdXNoKFtkZXB0aCwgdGFyZ2V0XSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGFyZ2V0cy5zb3J0KChhLCBiKSA9PiBhWzBdIC0gYlswXSk7XG5cblx0XHRcdGZvciAoY29uc3QgW18sIHRhcmdldF0gb2YgdGFyZ2V0cykge1xuXHRcdFx0XHR0YXJnZXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdFx0XHRcdHRoaXMuZGlzcGF0Y2hlZCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBpbmVydGlhKHRhcmdldFdpbmRvdzogV2luZG93LCBkaXNwYXRjaFRvOiByZWFkb25seSBFdmVudFRhcmdldFtdLCB0MTogbnVtYmVyLCB2WDogbnVtYmVyLCBkaXJYOiBudW1iZXIsIHg6IG51bWJlciwgdlk6IG51bWJlciwgZGlyWTogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLmhhbmRsZSA9IERvbVV0aWxzLnNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUodGFyZ2V0V2luZG93LCAoKSA9PiB7XG5cdFx0XHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXG5cdFx0XHQvLyB2ZWxvY2l0eTogb2xkIHNwZWVkICsgYWNjZWxfb3Zlcl90aW1lXG5cdFx0XHRjb25zdCBkZWx0YVQgPSBub3cgLSB0MTtcblx0XHRcdGxldCBkZWx0YV9wb3NfeCA9IDAsIGRlbHRhX3Bvc195ID0gMDtcblx0XHRcdGxldCBzdG9wcGVkID0gdHJ1ZTtcblxuXHRcdFx0dlggKz0gR2VzdHVyZS5TQ1JPTExfRlJJQ1RJT04gKiBkZWx0YVQ7XG5cdFx0XHR2WSArPSBHZXN0dXJlLlNDUk9MTF9GUklDVElPTiAqIGRlbHRhVDtcblxuXHRcdFx0aWYgKHZYID4gMCkge1xuXHRcdFx0XHRzdG9wcGVkID0gZmFsc2U7XG5cdFx0XHRcdGRlbHRhX3Bvc194ID0gZGlyWCAqIHZYICogZGVsdGFUO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodlkgPiAwKSB7XG5cdFx0XHRcdHN0b3BwZWQgPSBmYWxzZTtcblx0XHRcdFx0ZGVsdGFfcG9zX3kgPSBkaXJZICogdlkgKiBkZWx0YVQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGRpc3BhdGNoIHRyYW5zbGF0aW9uIGV2ZW50XG5cdFx0XHRjb25zdCBldnQgPSB0aGlzLm5ld0dlc3R1cmVFdmVudChFdmVudFR5cGUuQ2hhbmdlKTtcblx0XHRcdGV2dC50cmFuc2xhdGlvblggPSBkZWx0YV9wb3NfeDtcblx0XHRcdGV2dC50cmFuc2xhdGlvblkgPSBkZWx0YV9wb3NfeTtcblx0XHRcdGRpc3BhdGNoVG8uZm9yRWFjaChkID0+IGQuZGlzcGF0Y2hFdmVudChldnQpKTtcblxuXHRcdFx0aWYgKCFzdG9wcGVkKSB7XG5cdFx0XHRcdHRoaXMuaW5lcnRpYSh0YXJnZXRXaW5kb3csIGRpc3BhdGNoVG8sIG5vdywgdlgsIGRpclgsIHggKyBkZWx0YV9wb3NfeCwgdlksIGRpclksIHkgKyBkZWx0YV9wb3NfeSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIG9uVG91Y2hNb3ZlKGU6IFRvdWNoRXZlbnQpOiB2b2lkIHtcblx0XHRjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpOyAvLyB1c2UgRGF0ZS5ub3coKSBiZWNhdXNlIG9uIEZGIGUudGltZVN0YW1wIGlzIG5vdCBlcG9jaCBiYXNlZC5cblxuXHRcdGZvciAobGV0IGkgPSAwLCBsZW4gPSBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cblx0XHRcdGNvbnN0IHRvdWNoID0gZS5jaGFuZ2VkVG91Y2hlcy5pdGVtKGkpO1xuXG5cdFx0XHRpZiAoIXRoaXMuYWN0aXZlVG91Y2hlcy5oYXNPd25Qcm9wZXJ0eShTdHJpbmcodG91Y2guaWRlbnRpZmllcikpKSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybignZW5kIG9mIGFuIFVOS05PV04gdG91Y2gnLCB0b3VjaCk7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBkYXRhID0gdGhpcy5hY3RpdmVUb3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdO1xuXG5cdFx0XHRjb25zdCBldnQgPSB0aGlzLm5ld0dlc3R1cmVFdmVudChFdmVudFR5cGUuQ2hhbmdlLCBkYXRhLmluaXRpYWxUYXJnZXQpO1xuXHRcdFx0ZXZ0LnRyYW5zbGF0aW9uWCA9IHRvdWNoLnBhZ2VYIC0gYXJyYXlzLnRhaWwoZGF0YS5yb2xsaW5nUGFnZVgpITtcblx0XHRcdGV2dC50cmFuc2xhdGlvblkgPSB0b3VjaC5wYWdlWSAtIGFycmF5cy50YWlsKGRhdGEucm9sbGluZ1BhZ2VZKSE7XG5cdFx0XHRldnQucGFnZVggPSB0b3VjaC5wYWdlWDtcblx0XHRcdGV2dC5wYWdlWSA9IHRvdWNoLnBhZ2VZO1xuXHRcdFx0dGhpcy5kaXNwYXRjaEV2ZW50KGV2dCk7XG5cblx0XHRcdC8vIG9ubHkga2VlcCBhIGZldyBkYXRhIHBvaW50cywgdG8gYXZlcmFnZSB0aGUgZmluYWwgc3BlZWRcblx0XHRcdGlmIChkYXRhLnJvbGxpbmdQYWdlWC5sZW5ndGggPiAzKSB7XG5cdFx0XHRcdGRhdGEucm9sbGluZ1BhZ2VYLnNoaWZ0KCk7XG5cdFx0XHRcdGRhdGEucm9sbGluZ1BhZ2VZLnNoaWZ0KCk7XG5cdFx0XHRcdGRhdGEucm9sbGluZ1RpbWVzdGFtcHMuc2hpZnQoKTtcblx0XHRcdH1cblxuXHRcdFx0ZGF0YS5yb2xsaW5nUGFnZVgucHVzaCh0b3VjaC5wYWdlWCk7XG5cdFx0XHRkYXRhLnJvbGxpbmdQYWdlWS5wdXNoKHRvdWNoLnBhZ2VZKTtcblx0XHRcdGRhdGEucm9sbGluZ1RpbWVzdGFtcHMucHVzaCh0aW1lc3RhbXApO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmRpc3BhdGNoZWQpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLmRpc3BhdGNoZWQgPSBmYWxzZTtcblx0XHR9XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0ICogYXMgZG9tIGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9kb20nO1xuaW1wb3J0IHsgSUtleWJvYXJkRXZlbnQsIFN0YW5kYXJkS2V5Ym9hcmRFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9rZXlib2FyZEV2ZW50JztcbmltcG9ydCB7IElNb3VzZUV2ZW50LCBTdGFuZGFyZE1vdXNlRXZlbnQgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvbW91c2VFdmVudCc7XG5pbXBvcnQgeyBHZXN0dXJlIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3RvdWNoJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIElEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFdpZGdldCBleHRlbmRzIERpc3Bvc2FibGUge1xuXG5cdHByb3RlY3RlZCBvbmNsaWNrKGRvbU5vZGU6IEhUTUxFbGVtZW50LCBsaXN0ZW5lcjogKGU6IElNb3VzZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0dGhpcy5fcmVnaXN0ZXIoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihkb21Ob2RlLCBkb20uRXZlbnRUeXBlLkNMSUNLLCAoZTogTW91c2VFdmVudCkgPT4gbGlzdGVuZXIobmV3IFN0YW5kYXJkTW91c2VFdmVudChkb20uZ2V0V2luZG93KGRvbU5vZGUpLCBlKSkpKTtcblx0fVxuXG5cdHByb3RlY3RlZCBvbm1vdXNlZG93bihkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBJTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5NT1VTRV9ET1dOLCAoZTogTW91c2VFdmVudCkgPT4gbGlzdGVuZXIobmV3IFN0YW5kYXJkTW91c2VFdmVudChkb20uZ2V0V2luZG93KGRvbU5vZGUpLCBlKSkpKTtcblx0fVxuXG5cdHByb3RlY3RlZCBvbm1vdXNlb3Zlcihkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBJTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5NT1VTRV9PVkVSLCAoZTogTW91c2VFdmVudCkgPT4gbGlzdGVuZXIobmV3IFN0YW5kYXJkTW91c2VFdmVudChkb20uZ2V0V2luZG93KGRvbU5vZGUpLCBlKSkpKTtcblx0fVxuXG5cdHByb3RlY3RlZCBvbm1vdXNlbGVhdmUoZG9tTm9kZTogSFRNTEVsZW1lbnQsIGxpc3RlbmVyOiAoZTogSU1vdXNlRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcblx0XHR0aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGRvbU5vZGUsIGRvbS5FdmVudFR5cGUuTU9VU0VfTEVBVkUsIChlOiBNb3VzZUV2ZW50KSA9PiBsaXN0ZW5lcihuZXcgU3RhbmRhcmRNb3VzZUV2ZW50KGRvbS5nZXRXaW5kb3coZG9tTm9kZSksIGUpKSkpO1xuXHR9XG5cblx0cHJvdGVjdGVkIG9ua2V5ZG93bihkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBJS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5LRVlfRE9XTiwgKGU6IEtleWJvYXJkRXZlbnQpID0+IGxpc3RlbmVyKG5ldyBTdGFuZGFyZEtleWJvYXJkRXZlbnQoZSkpKSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgb25rZXl1cChkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBJS2V5Ym9hcmRFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5LRVlfVVAsIChlOiBLZXlib2FyZEV2ZW50KSA9PiBsaXN0ZW5lcihuZXcgU3RhbmRhcmRLZXlib2FyZEV2ZW50KGUpKSkpO1xuXHR9XG5cblx0cHJvdGVjdGVkIG9uaW5wdXQoZG9tTm9kZTogSFRNTEVsZW1lbnQsIGxpc3RlbmVyOiAoZTogRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcblx0XHR0aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGRvbU5vZGUsIGRvbS5FdmVudFR5cGUuSU5QVVQsIGxpc3RlbmVyKSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgb25ibHVyKGRvbU5vZGU6IEhUTUxFbGVtZW50LCBsaXN0ZW5lcjogKGU6IEV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG5cdFx0dGhpcy5fcmVnaXN0ZXIoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihkb21Ob2RlLCBkb20uRXZlbnRUeXBlLkJMVVIsIGxpc3RlbmVyKSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgb25mb2N1cyhkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5GT0NVUywgbGlzdGVuZXIpKTtcblx0fVxuXG5cdHByb3RlY3RlZCBvbmNoYW5nZShkb21Ob2RlOiBIVE1MRWxlbWVudCwgbGlzdGVuZXI6IChlOiBFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5DSEFOR0UsIGxpc3RlbmVyKSk7XG5cdH1cblxuXHRwcm90ZWN0ZWQgaWdub3JlR2VzdHVyZShkb21Ob2RlOiBIVE1MRWxlbWVudCk6IElEaXNwb3NhYmxlIHtcblx0XHRyZXR1cm4gR2VzdHVyZS5pZ25vcmVUYXJnZXQoZG9tTm9kZSk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgR2xvYmFsUG9pbnRlck1vdmVNb25pdG9yIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2dsb2JhbFBvaW50ZXJNb3ZlTW9uaXRvcic7XG5pbXBvcnQgeyBXaWRnZXQgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvd2lkZ2V0JztcbmltcG9ydCB7IFRpbWVvdXRUaW1lciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2FzeW5jJztcbmltcG9ydCAqIGFzIGRvbSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvZG9tJztcblxuLyoqXG4gKiBUaGUgYXJyb3cgaW1hZ2Ugc2l6ZS5cbiAqL1xuZXhwb3J0IGNvbnN0IEFSUk9XX0lNR19TSVpFID0gMTE7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsYmFyQXJyb3dPcHRpb25zIHtcblx0b25BY3RpdmF0ZTogKCkgPT4gdm9pZDtcblx0Y2xhc3NOYW1lOiBzdHJpbmc7XG5cdC8vIGljb246IFRoZW1lSWNvbjtcblxuXHRiZ1dpZHRoOiBudW1iZXI7XG5cdGJnSGVpZ2h0OiBudW1iZXI7XG5cblx0dG9wPzogbnVtYmVyO1xuXHRsZWZ0PzogbnVtYmVyO1xuXHRib3R0b20/OiBudW1iZXI7XG5cdHJpZ2h0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU2Nyb2xsYmFyQXJyb3cgZXh0ZW5kcyBXaWRnZXQge1xuXG5cdHByaXZhdGUgX29uQWN0aXZhdGU6ICgpID0+IHZvaWQ7XG5cdHB1YmxpYyBiZ0RvbU5vZGU6IEhUTUxFbGVtZW50O1xuXHRwdWJsaWMgZG9tTm9kZTogSFRNTEVsZW1lbnQ7XG5cdHByaXZhdGUgX3BvaW50ZXJkb3duUmVwZWF0VGltZXI6IGRvbS5XaW5kb3dJbnRlcnZhbFRpbWVyO1xuXHRwcml2YXRlIF9wb2ludGVyZG93blNjaGVkdWxlUmVwZWF0VGltZXI6IFRpbWVvdXRUaW1lcjtcblx0cHJpdmF0ZSBfcG9pbnRlck1vdmVNb25pdG9yOiBHbG9iYWxQb2ludGVyTW92ZU1vbml0b3I7XG5cblx0Y29uc3RydWN0b3Iob3B0czogU2Nyb2xsYmFyQXJyb3dPcHRpb25zKSB7XG5cdFx0c3VwZXIoKTtcblx0XHR0aGlzLl9vbkFjdGl2YXRlID0gb3B0cy5vbkFjdGl2YXRlO1xuXG5cdFx0dGhpcy5iZ0RvbU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR0aGlzLmJnRG9tTm9kZS5jbGFzc05hbWUgPSAnYXJyb3ctYmFja2dyb3VuZCc7XG5cdFx0dGhpcy5iZ0RvbU5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHRcdHRoaXMuYmdEb21Ob2RlLnN0eWxlLndpZHRoID0gb3B0cy5iZ1dpZHRoICsgJ3B4Jztcblx0XHR0aGlzLmJnRG9tTm9kZS5zdHlsZS5oZWlnaHQgPSBvcHRzLmJnSGVpZ2h0ICsgJ3B4Jztcblx0XHRpZiAodHlwZW9mIG9wdHMudG9wICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5iZ0RvbU5vZGUuc3R5bGUudG9wID0gJzBweCc7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2Ygb3B0cy5sZWZ0ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5iZ0RvbU5vZGUuc3R5bGUubGVmdCA9ICcwcHgnO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG9wdHMuYm90dG9tICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5iZ0RvbU5vZGUuc3R5bGUuYm90dG9tID0gJzBweCc7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2Ygb3B0cy5yaWdodCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuYmdEb21Ob2RlLnN0eWxlLnJpZ2h0ID0gJzBweCc7XG5cdFx0fVxuXG5cdFx0dGhpcy5kb21Ob2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5kb21Ob2RlLmNsYXNzTmFtZSA9IG9wdHMuY2xhc3NOYW1lO1xuXHRcdC8vIHRoaXMuZG9tTm9kZS5jbGFzc0xpc3QuYWRkKC4uLlRoZW1lSWNvbi5hc0NsYXNzTmFtZUFycmF5KG9wdHMuaWNvbikpO1xuXG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHR0aGlzLmRvbU5vZGUuc3R5bGUud2lkdGggPSBBUlJPV19JTUdfU0laRSArICdweCc7XG5cdFx0dGhpcy5kb21Ob2RlLnN0eWxlLmhlaWdodCA9IEFSUk9XX0lNR19TSVpFICsgJ3B4Jztcblx0XHRpZiAodHlwZW9mIG9wdHMudG9wICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5kb21Ob2RlLnN0eWxlLnRvcCA9IG9wdHMudG9wICsgJ3B4Jztcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBvcHRzLmxlZnQgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aGlzLmRvbU5vZGUuc3R5bGUubGVmdCA9IG9wdHMubGVmdCArICdweCc7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2Ygb3B0cy5ib3R0b20gIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aGlzLmRvbU5vZGUuc3R5bGUuYm90dG9tID0gb3B0cy5ib3R0b20gKyAncHgnO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG9wdHMucmlnaHQgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aGlzLmRvbU5vZGUuc3R5bGUucmlnaHQgPSBvcHRzLnJpZ2h0ICsgJ3B4Jztcblx0XHR9XG5cblx0XHR0aGlzLl9wb2ludGVyTW92ZU1vbml0b3IgPSB0aGlzLl9yZWdpc3RlcihuZXcgR2xvYmFsUG9pbnRlck1vdmVNb25pdG9yKCkpO1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGRvbS5hZGRTdGFuZGFyZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmJnRG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5QT0lOVEVSX0RPV04sIChlKSA9PiB0aGlzLl9hcnJvd1BvaW50ZXJEb3duKGUpKSk7XG5cdFx0dGhpcy5fcmVnaXN0ZXIoZG9tLmFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5QT0lOVEVSX0RPV04sIChlKSA9PiB0aGlzLl9hcnJvd1BvaW50ZXJEb3duKGUpKSk7XG5cblx0XHR0aGlzLl9wb2ludGVyZG93blJlcGVhdFRpbWVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IGRvbS5XaW5kb3dJbnRlcnZhbFRpbWVyKCkpO1xuXHRcdHRoaXMuX3BvaW50ZXJkb3duU2NoZWR1bGVSZXBlYXRUaW1lciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBUaW1lb3V0VGltZXIoKSk7XG5cdH1cblxuXHRwcml2YXRlIF9hcnJvd1BvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xuXHRcdGlmICghZS50YXJnZXQgfHwgIShlLnRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IHNjaGVkdWxlUmVwZWF0ZXIgPSAoKSA9PiB7XG5cdFx0XHR0aGlzLl9wb2ludGVyZG93blJlcGVhdFRpbWVyLmNhbmNlbEFuZFNldCgoKSA9PiB0aGlzLl9vbkFjdGl2YXRlKCksIDEwMDAgLyAyNCwgZG9tLmdldFdpbmRvdyhlKSk7XG5cdFx0fTtcblxuXHRcdHRoaXMuX29uQWN0aXZhdGUoKTtcblx0XHR0aGlzLl9wb2ludGVyZG93blJlcGVhdFRpbWVyLmNhbmNlbCgpO1xuXHRcdHRoaXMuX3BvaW50ZXJkb3duU2NoZWR1bGVSZXBlYXRUaW1lci5jYW5jZWxBbmRTZXQoc2NoZWR1bGVSZXBlYXRlciwgMjAwKTtcblxuXHRcdHRoaXMuX3BvaW50ZXJNb3ZlTW9uaXRvci5zdGFydE1vbml0b3JpbmcoXG5cdFx0XHRlLnRhcmdldCxcblx0XHRcdGUucG9pbnRlcklkLFxuXHRcdFx0ZS5idXR0b25zLFxuXHRcdFx0KHBvaW50ZXJNb3ZlRGF0YSkgPT4geyAvKiBJbnRlbnRpb25hbCBlbXB0eSAqLyB9LFxuXHRcdFx0KCkgPT4ge1xuXHRcdFx0XHR0aGlzLl9wb2ludGVyZG93blJlcGVhdFRpbWVyLmNhbmNlbCgpO1xuXHRcdFx0XHR0aGlzLl9wb2ludGVyZG93blNjaGVkdWxlUmVwZWF0VGltZXIuY2FuY2VsKCk7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fVxufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBFbWl0dGVyLCBFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcbmltcG9ydCB7IERpc3Bvc2FibGUsIElEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcblxuZXhwb3J0IGNvbnN0IGVudW0gU2Nyb2xsYmFyVmlzaWJpbGl0eSB7XG5cdEF1dG8gPSAxLFxuXHRIaWRkZW4gPSAyLFxuXHRWaXNpYmxlID0gM1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNjcm9sbEV2ZW50IHtcblx0aW5TbW9vdGhTY3JvbGxpbmc6IGJvb2xlYW47XG5cblx0b2xkV2lkdGg6IG51bWJlcjtcblx0b2xkU2Nyb2xsV2lkdGg6IG51bWJlcjtcblx0b2xkU2Nyb2xsTGVmdDogbnVtYmVyO1xuXG5cdHdpZHRoOiBudW1iZXI7XG5cdHNjcm9sbFdpZHRoOiBudW1iZXI7XG5cdHNjcm9sbExlZnQ6IG51bWJlcjtcblxuXHRvbGRIZWlnaHQ6IG51bWJlcjtcblx0b2xkU2Nyb2xsSGVpZ2h0OiBudW1iZXI7XG5cdG9sZFNjcm9sbFRvcDogbnVtYmVyO1xuXG5cdGhlaWdodDogbnVtYmVyO1xuXHRzY3JvbGxIZWlnaHQ6IG51bWJlcjtcblx0c2Nyb2xsVG9wOiBudW1iZXI7XG5cblx0d2lkdGhDaGFuZ2VkOiBib29sZWFuO1xuXHRzY3JvbGxXaWR0aENoYW5nZWQ6IGJvb2xlYW47XG5cdHNjcm9sbExlZnRDaGFuZ2VkOiBib29sZWFuO1xuXG5cdGhlaWdodENoYW5nZWQ6IGJvb2xlYW47XG5cdHNjcm9sbEhlaWdodENoYW5nZWQ6IGJvb2xlYW47XG5cdHNjcm9sbFRvcENoYW5nZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBTY3JvbGxTdGF0ZSBpbXBsZW1lbnRzIElTY3JvbGxEaW1lbnNpb25zLCBJU2Nyb2xsUG9zaXRpb24ge1xuXHRfc2Nyb2xsU3RhdGVCcmFuZDogdm9pZCA9IHVuZGVmaW5lZDtcblxuXHRwdWJsaWMgcmVhZG9ubHkgcmF3U2Nyb2xsTGVmdDogbnVtYmVyO1xuXHRwdWJsaWMgcmVhZG9ubHkgcmF3U2Nyb2xsVG9wOiBudW1iZXI7XG5cblx0cHVibGljIHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBzY3JvbGxXaWR0aDogbnVtYmVyO1xuXHRwdWJsaWMgcmVhZG9ubHkgc2Nyb2xsTGVmdDogbnVtYmVyO1xuXHRwdWJsaWMgcmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBzY3JvbGxIZWlnaHQ6IG51bWJlcjtcblx0cHVibGljIHJlYWRvbmx5IHNjcm9sbFRvcDogbnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgX2ZvcmNlSW50ZWdlclZhbHVlczogYm9vbGVhbixcblx0XHR3aWR0aDogbnVtYmVyLFxuXHRcdHNjcm9sbFdpZHRoOiBudW1iZXIsXG5cdFx0c2Nyb2xsTGVmdDogbnVtYmVyLFxuXHRcdGhlaWdodDogbnVtYmVyLFxuXHRcdHNjcm9sbEhlaWdodDogbnVtYmVyLFxuXHRcdHNjcm9sbFRvcDogbnVtYmVyXG5cdCkge1xuXHRcdGlmICh0aGlzLl9mb3JjZUludGVnZXJWYWx1ZXMpIHtcblx0XHRcdHdpZHRoID0gd2lkdGggfCAwO1xuXHRcdFx0c2Nyb2xsV2lkdGggPSBzY3JvbGxXaWR0aCB8IDA7XG5cdFx0XHRzY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdCB8IDA7XG5cdFx0XHRoZWlnaHQgPSBoZWlnaHQgfCAwO1xuXHRcdFx0c2Nyb2xsSGVpZ2h0ID0gc2Nyb2xsSGVpZ2h0IHwgMDtcblx0XHRcdHNjcm9sbFRvcCA9IHNjcm9sbFRvcCB8IDA7XG5cdFx0fVxuXG5cdFx0dGhpcy5yYXdTY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDsgLy8gYmVmb3JlIHZhbGlkYXRpb25cblx0XHR0aGlzLnJhd1Njcm9sbFRvcCA9IHNjcm9sbFRvcDsgLy8gYmVmb3JlIHZhbGlkYXRpb25cblxuXHRcdGlmICh3aWR0aCA8IDApIHtcblx0XHRcdHdpZHRoID0gMDtcblx0XHR9XG5cdFx0aWYgKHNjcm9sbExlZnQgKyB3aWR0aCA+IHNjcm9sbFdpZHRoKSB7XG5cdFx0XHRzY3JvbGxMZWZ0ID0gc2Nyb2xsV2lkdGggLSB3aWR0aDtcblx0XHR9XG5cdFx0aWYgKHNjcm9sbExlZnQgPCAwKSB7XG5cdFx0XHRzY3JvbGxMZWZ0ID0gMDtcblx0XHR9XG5cblx0XHRpZiAoaGVpZ2h0IDwgMCkge1xuXHRcdFx0aGVpZ2h0ID0gMDtcblx0XHR9XG5cdFx0aWYgKHNjcm9sbFRvcCArIGhlaWdodCA+IHNjcm9sbEhlaWdodCkge1xuXHRcdFx0c2Nyb2xsVG9wID0gc2Nyb2xsSGVpZ2h0IC0gaGVpZ2h0O1xuXHRcdH1cblx0XHRpZiAoc2Nyb2xsVG9wIDwgMCkge1xuXHRcdFx0c2Nyb2xsVG9wID0gMDtcblx0XHR9XG5cblx0XHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdFx0dGhpcy5zY3JvbGxXaWR0aCA9IHNjcm9sbFdpZHRoO1xuXHRcdHRoaXMuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQ7XG5cdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0dGhpcy5zY3JvbGxIZWlnaHQgPSBzY3JvbGxIZWlnaHQ7XG5cdFx0dGhpcy5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdH1cblxuXHRwdWJsaWMgZXF1YWxzKG90aGVyOiBTY3JvbGxTdGF0ZSk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAoXG5cdFx0XHR0aGlzLnJhd1Njcm9sbExlZnQgPT09IG90aGVyLnJhd1Njcm9sbExlZnRcblx0XHRcdCYmIHRoaXMucmF3U2Nyb2xsVG9wID09PSBvdGhlci5yYXdTY3JvbGxUb3Bcblx0XHRcdCYmIHRoaXMud2lkdGggPT09IG90aGVyLndpZHRoXG5cdFx0XHQmJiB0aGlzLnNjcm9sbFdpZHRoID09PSBvdGhlci5zY3JvbGxXaWR0aFxuXHRcdFx0JiYgdGhpcy5zY3JvbGxMZWZ0ID09PSBvdGhlci5zY3JvbGxMZWZ0XG5cdFx0XHQmJiB0aGlzLmhlaWdodCA9PT0gb3RoZXIuaGVpZ2h0XG5cdFx0XHQmJiB0aGlzLnNjcm9sbEhlaWdodCA9PT0gb3RoZXIuc2Nyb2xsSGVpZ2h0XG5cdFx0XHQmJiB0aGlzLnNjcm9sbFRvcCA9PT0gb3RoZXIuc2Nyb2xsVG9wXG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyB3aXRoU2Nyb2xsRGltZW5zaW9ucyh1cGRhdGU6IElOZXdTY3JvbGxEaW1lbnNpb25zLCB1c2VSYXdTY3JvbGxQb3NpdGlvbnM6IGJvb2xlYW4pOiBTY3JvbGxTdGF0ZSB7XG5cdFx0cmV0dXJuIG5ldyBTY3JvbGxTdGF0ZShcblx0XHRcdHRoaXMuX2ZvcmNlSW50ZWdlclZhbHVlcyxcblx0XHRcdCh0eXBlb2YgdXBkYXRlLndpZHRoICE9PSAndW5kZWZpbmVkJyA/IHVwZGF0ZS53aWR0aCA6IHRoaXMud2lkdGgpLFxuXHRcdFx0KHR5cGVvZiB1cGRhdGUuc2Nyb2xsV2lkdGggIT09ICd1bmRlZmluZWQnID8gdXBkYXRlLnNjcm9sbFdpZHRoIDogdGhpcy5zY3JvbGxXaWR0aCksXG5cdFx0XHR1c2VSYXdTY3JvbGxQb3NpdGlvbnMgPyB0aGlzLnJhd1Njcm9sbExlZnQgOiB0aGlzLnNjcm9sbExlZnQsXG5cdFx0XHQodHlwZW9mIHVwZGF0ZS5oZWlnaHQgIT09ICd1bmRlZmluZWQnID8gdXBkYXRlLmhlaWdodCA6IHRoaXMuaGVpZ2h0KSxcblx0XHRcdCh0eXBlb2YgdXBkYXRlLnNjcm9sbEhlaWdodCAhPT0gJ3VuZGVmaW5lZCcgPyB1cGRhdGUuc2Nyb2xsSGVpZ2h0IDogdGhpcy5zY3JvbGxIZWlnaHQpLFxuXHRcdFx0dXNlUmF3U2Nyb2xsUG9zaXRpb25zID8gdGhpcy5yYXdTY3JvbGxUb3AgOiB0aGlzLnNjcm9sbFRvcFxuXHRcdCk7XG5cdH1cblxuXHRwdWJsaWMgd2l0aFNjcm9sbFBvc2l0aW9uKHVwZGF0ZTogSU5ld1Njcm9sbFBvc2l0aW9uKTogU2Nyb2xsU3RhdGUge1xuXHRcdHJldHVybiBuZXcgU2Nyb2xsU3RhdGUoXG5cdFx0XHR0aGlzLl9mb3JjZUludGVnZXJWYWx1ZXMsXG5cdFx0XHR0aGlzLndpZHRoLFxuXHRcdFx0dGhpcy5zY3JvbGxXaWR0aCxcblx0XHRcdCh0eXBlb2YgdXBkYXRlLnNjcm9sbExlZnQgIT09ICd1bmRlZmluZWQnID8gdXBkYXRlLnNjcm9sbExlZnQgOiB0aGlzLnJhd1Njcm9sbExlZnQpLFxuXHRcdFx0dGhpcy5oZWlnaHQsXG5cdFx0XHR0aGlzLnNjcm9sbEhlaWdodCxcblx0XHRcdCh0eXBlb2YgdXBkYXRlLnNjcm9sbFRvcCAhPT0gJ3VuZGVmaW5lZCcgPyB1cGRhdGUuc2Nyb2xsVG9wIDogdGhpcy5yYXdTY3JvbGxUb3ApXG5cdFx0KTtcblx0fVxuXG5cdHB1YmxpYyBjcmVhdGVTY3JvbGxFdmVudChwcmV2aW91czogU2Nyb2xsU3RhdGUsIGluU21vb3RoU2Nyb2xsaW5nOiBib29sZWFuKTogU2Nyb2xsRXZlbnQge1xuXHRcdGNvbnN0IHdpZHRoQ2hhbmdlZCA9ICh0aGlzLndpZHRoICE9PSBwcmV2aW91cy53aWR0aCk7XG5cdFx0Y29uc3Qgc2Nyb2xsV2lkdGhDaGFuZ2VkID0gKHRoaXMuc2Nyb2xsV2lkdGggIT09IHByZXZpb3VzLnNjcm9sbFdpZHRoKTtcblx0XHRjb25zdCBzY3JvbGxMZWZ0Q2hhbmdlZCA9ICh0aGlzLnNjcm9sbExlZnQgIT09IHByZXZpb3VzLnNjcm9sbExlZnQpO1xuXG5cdFx0Y29uc3QgaGVpZ2h0Q2hhbmdlZCA9ICh0aGlzLmhlaWdodCAhPT0gcHJldmlvdXMuaGVpZ2h0KTtcblx0XHRjb25zdCBzY3JvbGxIZWlnaHRDaGFuZ2VkID0gKHRoaXMuc2Nyb2xsSGVpZ2h0ICE9PSBwcmV2aW91cy5zY3JvbGxIZWlnaHQpO1xuXHRcdGNvbnN0IHNjcm9sbFRvcENoYW5nZWQgPSAodGhpcy5zY3JvbGxUb3AgIT09IHByZXZpb3VzLnNjcm9sbFRvcCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0aW5TbW9vdGhTY3JvbGxpbmc6IGluU21vb3RoU2Nyb2xsaW5nLFxuXHRcdFx0b2xkV2lkdGg6IHByZXZpb3VzLndpZHRoLFxuXHRcdFx0b2xkU2Nyb2xsV2lkdGg6IHByZXZpb3VzLnNjcm9sbFdpZHRoLFxuXHRcdFx0b2xkU2Nyb2xsTGVmdDogcHJldmlvdXMuc2Nyb2xsTGVmdCxcblxuXHRcdFx0d2lkdGg6IHRoaXMud2lkdGgsXG5cdFx0XHRzY3JvbGxXaWR0aDogdGhpcy5zY3JvbGxXaWR0aCxcblx0XHRcdHNjcm9sbExlZnQ6IHRoaXMuc2Nyb2xsTGVmdCxcblxuXHRcdFx0b2xkSGVpZ2h0OiBwcmV2aW91cy5oZWlnaHQsXG5cdFx0XHRvbGRTY3JvbGxIZWlnaHQ6IHByZXZpb3VzLnNjcm9sbEhlaWdodCxcblx0XHRcdG9sZFNjcm9sbFRvcDogcHJldmlvdXMuc2Nyb2xsVG9wLFxuXG5cdFx0XHRoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuXHRcdFx0c2Nyb2xsSGVpZ2h0OiB0aGlzLnNjcm9sbEhlaWdodCxcblx0XHRcdHNjcm9sbFRvcDogdGhpcy5zY3JvbGxUb3AsXG5cblx0XHRcdHdpZHRoQ2hhbmdlZDogd2lkdGhDaGFuZ2VkLFxuXHRcdFx0c2Nyb2xsV2lkdGhDaGFuZ2VkOiBzY3JvbGxXaWR0aENoYW5nZWQsXG5cdFx0XHRzY3JvbGxMZWZ0Q2hhbmdlZDogc2Nyb2xsTGVmdENoYW5nZWQsXG5cblx0XHRcdGhlaWdodENoYW5nZWQ6IGhlaWdodENoYW5nZWQsXG5cdFx0XHRzY3JvbGxIZWlnaHRDaGFuZ2VkOiBzY3JvbGxIZWlnaHRDaGFuZ2VkLFxuXHRcdFx0c2Nyb2xsVG9wQ2hhbmdlZDogc2Nyb2xsVG9wQ2hhbmdlZCxcblx0XHR9O1xuXHR9XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2Nyb2xsRGltZW5zaW9ucyB7XG5cdHJlYWRvbmx5IHdpZHRoOiBudW1iZXI7XG5cdHJlYWRvbmx5IHNjcm9sbFdpZHRoOiBudW1iZXI7XG5cdHJlYWRvbmx5IGhlaWdodDogbnVtYmVyO1xuXHRyZWFkb25seSBzY3JvbGxIZWlnaHQ6IG51bWJlcjtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgSU5ld1Njcm9sbERpbWVuc2lvbnMge1xuXHR3aWR0aD86IG51bWJlcjtcblx0c2Nyb2xsV2lkdGg/OiBudW1iZXI7XG5cdGhlaWdodD86IG51bWJlcjtcblx0c2Nyb2xsSGVpZ2h0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTY3JvbGxQb3NpdGlvbiB7XG5cdHJlYWRvbmx5IHNjcm9sbExlZnQ6IG51bWJlcjtcblx0cmVhZG9ubHkgc2Nyb2xsVG9wOiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElTbW9vdGhTY3JvbGxQb3NpdGlvbiB7XG5cdHJlYWRvbmx5IHNjcm9sbExlZnQ6IG51bWJlcjtcblx0cmVhZG9ubHkgc2Nyb2xsVG9wOiBudW1iZXI7XG5cblx0cmVhZG9ubHkgd2lkdGg6IG51bWJlcjtcblx0cmVhZG9ubHkgaGVpZ2h0OiBudW1iZXI7XG59XG5leHBvcnQgaW50ZXJmYWNlIElOZXdTY3JvbGxQb3NpdGlvbiB7XG5cdHNjcm9sbExlZnQ/OiBudW1iZXI7XG5cdHNjcm9sbFRvcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJU2Nyb2xsYWJsZU9wdGlvbnMge1xuXHQvKipcblx0ICogRGVmaW5lIGlmIHRoZSBzY3JvbGwgdmFsdWVzIHNob3VsZCBhbHdheXMgYmUgaW50ZWdlcnMuXG5cdCAqL1xuXHRmb3JjZUludGVnZXJWYWx1ZXM6IGJvb2xlYW47XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGR1cmF0aW9uIChtcykgdXNlZCBmb3Igc21vb3RoIHNjcm9sbCBhbmltYXRpb25zLlxuXHQgKi9cblx0c21vb3RoU2Nyb2xsRHVyYXRpb246IG51bWJlcjtcblx0LyoqXG5cdCAqIEEgZnVuY3Rpb24gdG8gc2NoZWR1bGUgYW4gdXBkYXRlIGF0IHRoZSBuZXh0IGZyYW1lICh1c2VkIGZvciBzbW9vdGggc2Nyb2xsIGFuaW1hdGlvbnMpLlxuXHQgKi9cblx0c2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTogKGNhbGxiYWNrOiAoKSA9PiB2b2lkKSA9PiBJRGlzcG9zYWJsZTtcbn1cblxuZXhwb3J0IGNsYXNzIFNjcm9sbGFibGUgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcblxuXHRfc2Nyb2xsYWJsZUJyYW5kOiB2b2lkID0gdW5kZWZpbmVkO1xuXG5cdHByaXZhdGUgX3Ntb290aFNjcm9sbER1cmF0aW9uOiBudW1iZXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgX3NjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWU6IChjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gSURpc3Bvc2FibGU7XG5cdHByaXZhdGUgX3N0YXRlOiBTY3JvbGxTdGF0ZTtcblx0cHJpdmF0ZSBfc21vb3RoU2Nyb2xsaW5nOiBTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb24gfCBudWxsO1xuXG5cdHByaXZhdGUgX29uU2Nyb2xsID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8U2Nyb2xsRXZlbnQ+KCkpO1xuXHRwdWJsaWMgcmVhZG9ubHkgb25TY3JvbGw6IEV2ZW50PFNjcm9sbEV2ZW50PiA9IHRoaXMuX29uU2Nyb2xsLmV2ZW50O1xuXG5cdGNvbnN0cnVjdG9yKG9wdGlvbnM6IElTY3JvbGxhYmxlT3B0aW9ucykge1xuXHRcdHN1cGVyKCk7XG5cblx0XHR0aGlzLl9zbW9vdGhTY3JvbGxEdXJhdGlvbiA9IG9wdGlvbnMuc21vb3RoU2Nyb2xsRHVyYXRpb247XG5cdFx0dGhpcy5fc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSA9IG9wdGlvbnMuc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTtcblx0XHR0aGlzLl9zdGF0ZSA9IG5ldyBTY3JvbGxTdGF0ZShvcHRpb25zLmZvcmNlSW50ZWdlclZhbHVlcywgMCwgMCwgMCwgMCwgMCwgMCk7XG5cdFx0dGhpcy5fc21vb3RoU2Nyb2xsaW5nID0gbnVsbDtcblx0fVxuXG5cdHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9zbW9vdGhTY3JvbGxpbmcpIHtcblx0XHRcdHRoaXMuX3Ntb290aFNjcm9sbGluZy5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcgPSBudWxsO1xuXHRcdH1cblx0XHRzdXBlci5kaXNwb3NlKCk7XG5cdH1cblxuXHRwdWJsaWMgc2V0U21vb3RoU2Nyb2xsRHVyYXRpb24oc21vb3RoU2Nyb2xsRHVyYXRpb246IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMuX3Ntb290aFNjcm9sbER1cmF0aW9uID0gc21vb3RoU2Nyb2xsRHVyYXRpb247XG5cdH1cblxuXHRwdWJsaWMgdmFsaWRhdGVTY3JvbGxQb3NpdGlvbihzY3JvbGxQb3NpdGlvbjogSU5ld1Njcm9sbFBvc2l0aW9uKTogSVNjcm9sbFBvc2l0aW9uIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGUud2l0aFNjcm9sbFBvc2l0aW9uKHNjcm9sbFBvc2l0aW9uKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRTY3JvbGxEaW1lbnNpb25zKCk6IElTY3JvbGxEaW1lbnNpb25zIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGU7XG5cdH1cblxuXHRwdWJsaWMgc2V0U2Nyb2xsRGltZW5zaW9ucyhkaW1lbnNpb25zOiBJTmV3U2Nyb2xsRGltZW5zaW9ucywgdXNlUmF3U2Nyb2xsUG9zaXRpb25zOiBib29sZWFuKTogdm9pZCB7XG5cdFx0Y29uc3QgbmV3U3RhdGUgPSB0aGlzLl9zdGF0ZS53aXRoU2Nyb2xsRGltZW5zaW9ucyhkaW1lbnNpb25zLCB1c2VSYXdTY3JvbGxQb3NpdGlvbnMpO1xuXHRcdHRoaXMuX3NldFN0YXRlKG5ld1N0YXRlLCBCb29sZWFuKHRoaXMuX3Ntb290aFNjcm9sbGluZykpO1xuXG5cdFx0Ly8gVmFsaWRhdGUgb3V0c3RhbmRpbmcgYW5pbWF0ZWQgc2Nyb2xsIHBvc2l0aW9uIHRhcmdldFxuXHRcdHRoaXMuX3Ntb290aFNjcm9sbGluZz8uYWNjZXB0U2Nyb2xsRGltZW5zaW9ucyh0aGlzLl9zdGF0ZSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyB0aGUgZmluYWwgc2Nyb2xsIHBvc2l0aW9uIHRoYXQgdGhlIGluc3RhbmNlIHdpbGwgaGF2ZSBvbmNlIHRoZSBzbW9vdGggc2Nyb2xsIGFuaW1hdGlvbiBjb25jbHVkZXMuXG5cdCAqIElmIG5vIHNjcm9sbCBhbmltYXRpb24gaXMgb2NjdXJyaW5nLCBpdCB3aWxsIHJldHVybiB0aGUgY3VycmVudCBzY3JvbGwgcG9zaXRpb24gaW5zdGVhZC5cblx0ICovXG5cdHB1YmxpYyBnZXRGdXR1cmVTY3JvbGxQb3NpdGlvbigpOiBJU2Nyb2xsUG9zaXRpb24ge1xuXHRcdGlmICh0aGlzLl9zbW9vdGhTY3JvbGxpbmcpIHtcblx0XHRcdHJldHVybiB0aGlzLl9zbW9vdGhTY3JvbGxpbmcudG87XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9zdGF0ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHNjcm9sbCBwb3NpdGlvbi5cblx0ICogTm90ZTogVGhpcyByZXN1bHQgbWlnaHQgYmUgYW4gaW50ZXJtZWRpYXRlIHNjcm9sbCBwb3NpdGlvbiwgYXMgdGhlcmUgbWlnaHQgYmUgYW4gb25nb2luZyBzbW9vdGggc2Nyb2xsIGFuaW1hdGlvbi5cblx0ICovXG5cdHB1YmxpYyBnZXRDdXJyZW50U2Nyb2xsUG9zaXRpb24oKTogSVNjcm9sbFBvc2l0aW9uIHtcblx0XHRyZXR1cm4gdGhpcy5fc3RhdGU7XG5cdH1cblxuXHRwdWJsaWMgc2V0U2Nyb2xsUG9zaXRpb25Ob3codXBkYXRlOiBJTmV3U2Nyb2xsUG9zaXRpb24pOiB2b2lkIHtcblx0XHQvLyBubyBzbW9vdGggc2Nyb2xsaW5nIHJlcXVlc3RlZFxuXHRcdGNvbnN0IG5ld1N0YXRlID0gdGhpcy5fc3RhdGUud2l0aFNjcm9sbFBvc2l0aW9uKHVwZGF0ZSk7XG5cblx0XHQvLyBUZXJtaW5hdGUgYW55IG91dHN0YW5kaW5nIHNtb290aCBzY3JvbGxpbmdcblx0XHRpZiAodGhpcy5fc21vb3RoU2Nyb2xsaW5nKSB7XG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcuZGlzcG9zZSgpO1xuXHRcdFx0dGhpcy5fc21vb3RoU2Nyb2xsaW5nID0gbnVsbDtcblx0XHR9XG5cblx0XHR0aGlzLl9zZXRTdGF0ZShuZXdTdGF0ZSwgZmFsc2UpO1xuXHR9XG5cblx0cHVibGljIHNldFNjcm9sbFBvc2l0aW9uU21vb3RoKHVwZGF0ZTogSU5ld1Njcm9sbFBvc2l0aW9uLCByZXVzZUFuaW1hdGlvbj86IGJvb2xlYW4pOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fc21vb3RoU2Nyb2xsRHVyYXRpb24gPT09IDApIHtcblx0XHRcdC8vIFNtb290aCBzY3JvbGxpbmcgbm90IHN1cHBvcnRlZC5cblx0XHRcdHJldHVybiB0aGlzLnNldFNjcm9sbFBvc2l0aW9uTm93KHVwZGF0ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX3Ntb290aFNjcm9sbGluZykge1xuXHRcdFx0Ly8gQ29tYmluZSBvdXIgcGVuZGluZyBzY3JvbGxMZWZ0L3Njcm9sbFRvcCB3aXRoIGluY29taW5nIHNjcm9sbExlZnQvc2Nyb2xsVG9wXG5cdFx0XHR1cGRhdGUgPSB7XG5cdFx0XHRcdHNjcm9sbExlZnQ6ICh0eXBlb2YgdXBkYXRlLnNjcm9sbExlZnQgPT09ICd1bmRlZmluZWQnID8gdGhpcy5fc21vb3RoU2Nyb2xsaW5nLnRvLnNjcm9sbExlZnQgOiB1cGRhdGUuc2Nyb2xsTGVmdCksXG5cdFx0XHRcdHNjcm9sbFRvcDogKHR5cGVvZiB1cGRhdGUuc2Nyb2xsVG9wID09PSAndW5kZWZpbmVkJyA/IHRoaXMuX3Ntb290aFNjcm9sbGluZy50by5zY3JvbGxUb3AgOiB1cGRhdGUuc2Nyb2xsVG9wKVxuXHRcdFx0fTtcblxuXHRcdFx0Ly8gVmFsaWRhdGUgYHVwZGF0ZWBcblx0XHRcdGNvbnN0IHZhbGlkVGFyZ2V0ID0gdGhpcy5fc3RhdGUud2l0aFNjcm9sbFBvc2l0aW9uKHVwZGF0ZSk7XG5cblx0XHRcdGlmICh0aGlzLl9zbW9vdGhTY3JvbGxpbmcudG8uc2Nyb2xsTGVmdCA9PT0gdmFsaWRUYXJnZXQuc2Nyb2xsTGVmdCAmJiB0aGlzLl9zbW9vdGhTY3JvbGxpbmcudG8uc2Nyb2xsVG9wID09PSB2YWxpZFRhcmdldC5zY3JvbGxUb3ApIHtcblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBpbnRlcnJ1cHQgb3IgZXh0ZW5kIHRoZSBjdXJyZW50IGFuaW1hdGlvbiBzaW5jZSB3ZSdyZSBnb2luZyB0byB0aGUgc2FtZSBwbGFjZVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRsZXQgbmV3U21vb3RoU2Nyb2xsaW5nOiBTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb247XG5cdFx0XHRpZiAocmV1c2VBbmltYXRpb24pIHtcblx0XHRcdFx0bmV3U21vb3RoU2Nyb2xsaW5nID0gbmV3IFNtb290aFNjcm9sbGluZ09wZXJhdGlvbih0aGlzLl9zbW9vdGhTY3JvbGxpbmcuZnJvbSwgdmFsaWRUYXJnZXQsIHRoaXMuX3Ntb290aFNjcm9sbGluZy5zdGFydFRpbWUsIHRoaXMuX3Ntb290aFNjcm9sbGluZy5kdXJhdGlvbik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdTbW9vdGhTY3JvbGxpbmcgPSB0aGlzLl9zbW9vdGhTY3JvbGxpbmcuY29tYmluZSh0aGlzLl9zdGF0ZSwgdmFsaWRUYXJnZXQsIHRoaXMuX3Ntb290aFNjcm9sbER1cmF0aW9uKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX3Ntb290aFNjcm9sbGluZy5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcgPSBuZXdTbW9vdGhTY3JvbGxpbmc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFZhbGlkYXRlIGB1cGRhdGVgXG5cdFx0XHRjb25zdCB2YWxpZFRhcmdldCA9IHRoaXMuX3N0YXRlLndpdGhTY3JvbGxQb3NpdGlvbih1cGRhdGUpO1xuXG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcgPSBTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb24uc3RhcnQodGhpcy5fc3RhdGUsIHZhbGlkVGFyZ2V0LCB0aGlzLl9zbW9vdGhTY3JvbGxEdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0Ly8gQmVnaW4gc21vb3RoIHNjcm9sbGluZyBhbmltYXRpb25cblx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcuYW5pbWF0aW9uRnJhbWVEaXNwb3NhYmxlID0gdGhpcy5fc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRpZiAoIXRoaXMuX3Ntb290aFNjcm9sbGluZykge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcuYW5pbWF0aW9uRnJhbWVEaXNwb3NhYmxlID0gbnVsbDtcblx0XHRcdHRoaXMuX3BlcmZvcm1TbW9vdGhTY3JvbGxpbmcoKTtcblx0XHR9KTtcblx0fVxuXG5cdHB1YmxpYyBoYXNQZW5kaW5nU2Nyb2xsQW5pbWF0aW9uKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiBCb29sZWFuKHRoaXMuX3Ntb290aFNjcm9sbGluZyk7XG5cdH1cblxuXHRwcml2YXRlIF9wZXJmb3JtU21vb3RoU2Nyb2xsaW5nKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fc21vb3RoU2Nyb2xsaW5nKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IHVwZGF0ZSA9IHRoaXMuX3Ntb290aFNjcm9sbGluZy50aWNrKCk7XG5cdFx0Y29uc3QgbmV3U3RhdGUgPSB0aGlzLl9zdGF0ZS53aXRoU2Nyb2xsUG9zaXRpb24odXBkYXRlKTtcblxuXHRcdHRoaXMuX3NldFN0YXRlKG5ld1N0YXRlLCB0cnVlKTtcblxuXHRcdGlmICghdGhpcy5fc21vb3RoU2Nyb2xsaW5nKSB7XG5cdFx0XHQvLyBMb29rcyBsaWtlIHNvbWVvbmUgY2FuY2VsZWQgdGhlIHNtb290aCBzY3JvbGxpbmdcblx0XHRcdC8vIGZyb20gdGhlIHNjcm9sbCBldmVudCBoYW5kbGVyXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHVwZGF0ZS5pc0RvbmUpIHtcblx0XHRcdHRoaXMuX3Ntb290aFNjcm9sbGluZy5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLl9zbW9vdGhTY3JvbGxpbmcgPSBudWxsO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIENvbnRpbnVlIHNtb290aCBzY3JvbGxpbmcgYW5pbWF0aW9uXG5cdFx0dGhpcy5fc21vb3RoU2Nyb2xsaW5nLmFuaW1hdGlvbkZyYW1lRGlzcG9zYWJsZSA9IHRoaXMuX3NjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLl9zbW9vdGhTY3JvbGxpbmcpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fc21vb3RoU2Nyb2xsaW5nLmFuaW1hdGlvbkZyYW1lRGlzcG9zYWJsZSA9IG51bGw7XG5cdFx0XHR0aGlzLl9wZXJmb3JtU21vb3RoU2Nyb2xsaW5nKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIF9zZXRTdGF0ZShuZXdTdGF0ZTogU2Nyb2xsU3RhdGUsIGluU21vb3RoU2Nyb2xsaW5nOiBib29sZWFuKTogdm9pZCB7XG5cdFx0Y29uc3Qgb2xkU3RhdGUgPSB0aGlzLl9zdGF0ZTtcblx0XHRpZiAob2xkU3RhdGUuZXF1YWxzKG5ld1N0YXRlKSkge1xuXHRcdFx0Ly8gbm8gY2hhbmdlXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX3N0YXRlID0gbmV3U3RhdGU7XG5cdFx0dGhpcy5fb25TY3JvbGwuZmlyZSh0aGlzLl9zdGF0ZS5jcmVhdGVTY3JvbGxFdmVudChvbGRTdGF0ZSwgaW5TbW9vdGhTY3JvbGxpbmcpKTtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgU21vb3RoU2Nyb2xsaW5nVXBkYXRlIHtcblxuXHRwdWJsaWMgcmVhZG9ubHkgc2Nyb2xsTGVmdDogbnVtYmVyO1xuXHRwdWJsaWMgcmVhZG9ubHkgc2Nyb2xsVG9wOiBudW1iZXI7XG5cdHB1YmxpYyByZWFkb25seSBpc0RvbmU6IGJvb2xlYW47XG5cblx0Y29uc3RydWN0b3Ioc2Nyb2xsTGVmdDogbnVtYmVyLCBzY3JvbGxUb3A6IG51bWJlciwgaXNEb25lOiBib29sZWFuKSB7XG5cdFx0dGhpcy5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcblx0XHR0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHR0aGlzLmlzRG9uZSA9IGlzRG9uZTtcblx0fVxuXG59XG5cbmludGVyZmFjZSBJQW5pbWF0aW9uIHtcblx0KGNvbXBsZXRpb246IG51bWJlcik6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRWFzZU91dEN1YmljKGZyb206IG51bWJlciwgdG86IG51bWJlcik6IElBbmltYXRpb24ge1xuXHRjb25zdCBkZWx0YSA9IHRvIC0gZnJvbTtcblx0cmV0dXJuIGZ1bmN0aW9uIChjb21wbGV0aW9uOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdHJldHVybiBmcm9tICsgZGVsdGEgKiBlYXNlT3V0Q3ViaWMoY29tcGxldGlvbik7XG5cdH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNvbXBvc2VkKGE6IElBbmltYXRpb24sIGI6IElBbmltYXRpb24sIGN1dDogbnVtYmVyKTogSUFuaW1hdGlvbiB7XG5cdHJldHVybiBmdW5jdGlvbiAoY29tcGxldGlvbjogbnVtYmVyKTogbnVtYmVyIHtcblx0XHRpZiAoY29tcGxldGlvbiA8IGN1dCkge1xuXHRcdFx0cmV0dXJuIGEoY29tcGxldGlvbiAvIGN1dCk7XG5cdFx0fVxuXHRcdHJldHVybiBiKChjb21wbGV0aW9uIC0gY3V0KSAvICgxIC0gY3V0KSk7XG5cdH07XG59XG5cbmV4cG9ydCBjbGFzcyBTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb24ge1xuXG5cdHB1YmxpYyByZWFkb25seSBmcm9tOiBJU21vb3RoU2Nyb2xsUG9zaXRpb247XG5cdHB1YmxpYyB0bzogSVNtb290aFNjcm9sbFBvc2l0aW9uO1xuXHRwdWJsaWMgcmVhZG9ubHkgZHVyYXRpb246IG51bWJlcjtcblx0cHVibGljIHJlYWRvbmx5IHN0YXJ0VGltZTogbnVtYmVyO1xuXHRwdWJsaWMgYW5pbWF0aW9uRnJhbWVEaXNwb3NhYmxlOiBJRGlzcG9zYWJsZSB8IG51bGw7XG5cblx0cHJpdmF0ZSBzY3JvbGxMZWZ0ITogSUFuaW1hdGlvbjtcblx0cHJpdmF0ZSBzY3JvbGxUb3AhOiBJQW5pbWF0aW9uO1xuXG5cdGNvbnN0cnVjdG9yKGZyb206IElTbW9vdGhTY3JvbGxQb3NpdGlvbiwgdG86IElTbW9vdGhTY3JvbGxQb3NpdGlvbiwgc3RhcnRUaW1lOiBudW1iZXIsIGR1cmF0aW9uOiBudW1iZXIpIHtcblx0XHR0aGlzLmZyb20gPSBmcm9tO1xuXHRcdHRoaXMudG8gPSB0bztcblx0XHR0aGlzLmR1cmF0aW9uID0gZHVyYXRpb247XG5cdFx0dGhpcy5zdGFydFRpbWUgPSBzdGFydFRpbWU7XG5cblx0XHR0aGlzLmFuaW1hdGlvbkZyYW1lRGlzcG9zYWJsZSA9IG51bGw7XG5cblx0XHR0aGlzLl9pbml0QW5pbWF0aW9ucygpO1xuXHR9XG5cblx0cHJpdmF0ZSBfaW5pdEFuaW1hdGlvbnMoKTogdm9pZCB7XG5cdFx0dGhpcy5zY3JvbGxMZWZ0ID0gdGhpcy5faW5pdEFuaW1hdGlvbih0aGlzLmZyb20uc2Nyb2xsTGVmdCwgdGhpcy50by5zY3JvbGxMZWZ0LCB0aGlzLnRvLndpZHRoKTtcblx0XHR0aGlzLnNjcm9sbFRvcCA9IHRoaXMuX2luaXRBbmltYXRpb24odGhpcy5mcm9tLnNjcm9sbFRvcCwgdGhpcy50by5zY3JvbGxUb3AsIHRoaXMudG8uaGVpZ2h0KTtcblx0fVxuXG5cdHByaXZhdGUgX2luaXRBbmltYXRpb24oZnJvbTogbnVtYmVyLCB0bzogbnVtYmVyLCB2aWV3cG9ydFNpemU6IG51bWJlcik6IElBbmltYXRpb24ge1xuXHRcdGNvbnN0IGRlbHRhID0gTWF0aC5hYnMoZnJvbSAtIHRvKTtcblx0XHRpZiAoZGVsdGEgPiAyLjUgKiB2aWV3cG9ydFNpemUpIHtcblx0XHRcdGxldCBzdG9wMTogbnVtYmVyLCBzdG9wMjogbnVtYmVyO1xuXHRcdFx0aWYgKGZyb20gPCB0bykge1xuXHRcdFx0XHQvLyBzY3JvbGwgdG8gNzUlIG9mIHRoZSB2aWV3cG9ydFNpemVcblx0XHRcdFx0c3RvcDEgPSBmcm9tICsgMC43NSAqIHZpZXdwb3J0U2l6ZTtcblx0XHRcdFx0c3RvcDIgPSB0byAtIDAuNzUgKiB2aWV3cG9ydFNpemU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdG9wMSA9IGZyb20gLSAwLjc1ICogdmlld3BvcnRTaXplO1xuXHRcdFx0XHRzdG9wMiA9IHRvICsgMC43NSAqIHZpZXdwb3J0U2l6ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBjcmVhdGVDb21wb3NlZChjcmVhdGVFYXNlT3V0Q3ViaWMoZnJvbSwgc3RvcDEpLCBjcmVhdGVFYXNlT3V0Q3ViaWMoc3RvcDIsIHRvKSwgMC4zMyk7XG5cdFx0fVxuXHRcdHJldHVybiBjcmVhdGVFYXNlT3V0Q3ViaWMoZnJvbSwgdG8pO1xuXHR9XG5cblx0cHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVEaXNwb3NhYmxlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLmFuaW1hdGlvbkZyYW1lRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG5cdFx0XHR0aGlzLmFuaW1hdGlvbkZyYW1lRGlzcG9zYWJsZSA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGFjY2VwdFNjcm9sbERpbWVuc2lvbnMoc3RhdGU6IFNjcm9sbFN0YXRlKTogdm9pZCB7XG5cdFx0dGhpcy50byA9IHN0YXRlLndpdGhTY3JvbGxQb3NpdGlvbih0aGlzLnRvKTtcblx0XHR0aGlzLl9pbml0QW5pbWF0aW9ucygpO1xuXHR9XG5cblx0cHVibGljIHRpY2soKTogU21vb3RoU2Nyb2xsaW5nVXBkYXRlIHtcblx0XHRyZXR1cm4gdGhpcy5fdGljayhEYXRlLm5vdygpKTtcblx0fVxuXG5cdHByb3RlY3RlZCBfdGljayhub3c6IG51bWJlcik6IFNtb290aFNjcm9sbGluZ1VwZGF0ZSB7XG5cdFx0Y29uc3QgY29tcGxldGlvbiA9IChub3cgLSB0aGlzLnN0YXJ0VGltZSkgLyB0aGlzLmR1cmF0aW9uO1xuXG5cdFx0aWYgKGNvbXBsZXRpb24gPCAxKSB7XG5cdFx0XHRjb25zdCBuZXdTY3JvbGxMZWZ0ID0gdGhpcy5zY3JvbGxMZWZ0KGNvbXBsZXRpb24pO1xuXHRcdFx0Y29uc3QgbmV3U2Nyb2xsVG9wID0gdGhpcy5zY3JvbGxUb3AoY29tcGxldGlvbik7XG5cdFx0XHRyZXR1cm4gbmV3IFNtb290aFNjcm9sbGluZ1VwZGF0ZShuZXdTY3JvbGxMZWZ0LCBuZXdTY3JvbGxUb3AsIGZhbHNlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IFNtb290aFNjcm9sbGluZ1VwZGF0ZSh0aGlzLnRvLnNjcm9sbExlZnQsIHRoaXMudG8uc2Nyb2xsVG9wLCB0cnVlKTtcblx0fVxuXG5cdHB1YmxpYyBjb21iaW5lKGZyb206IElTbW9vdGhTY3JvbGxQb3NpdGlvbiwgdG86IElTbW9vdGhTY3JvbGxQb3NpdGlvbiwgZHVyYXRpb246IG51bWJlcik6IFNtb290aFNjcm9sbGluZ09wZXJhdGlvbiB7XG5cdFx0cmV0dXJuIFNtb290aFNjcm9sbGluZ09wZXJhdGlvbi5zdGFydChmcm9tLCB0bywgZHVyYXRpb24pO1xuXHR9XG5cblx0cHVibGljIHN0YXRpYyBzdGFydChmcm9tOiBJU21vb3RoU2Nyb2xsUG9zaXRpb24sIHRvOiBJU21vb3RoU2Nyb2xsUG9zaXRpb24sIGR1cmF0aW9uOiBudW1iZXIpOiBTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb24ge1xuXHRcdC8vICsxMCAvIC0xMCA6IHByZXRlbmQgdGhlIGFuaW1hdGlvbiBhbHJlYWR5IHN0YXJ0ZWQgZm9yIGEgcXVpY2tlciByZXNwb25zZSB0byBhIHNjcm9sbCByZXF1ZXN0XG5cdFx0ZHVyYXRpb24gPSBkdXJhdGlvbiArIDEwO1xuXHRcdGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCkgLSAxMDtcblxuXHRcdHJldHVybiBuZXcgU21vb3RoU2Nyb2xsaW5nT3BlcmF0aW9uKGZyb20sIHRvLCBzdGFydFRpbWUsIGR1cmF0aW9uKTtcblx0fVxufVxuXG5mdW5jdGlvbiBlYXNlSW5DdWJpYyh0OiBudW1iZXIpIHtcblx0cmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuXG5mdW5jdGlvbiBlYXNlT3V0Q3ViaWModDogbnVtYmVyKSB7XG5cdHJldHVybiAxIC0gZWFzZUluQ3ViaWMoMSAtIHQpO1xufVxuIiwgIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBGYXN0RG9tTm9kZSB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9mYXN0RG9tTm9kZSc7XG5pbXBvcnQgeyBUaW1lb3V0VGltZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9hc3luYyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IFNjcm9sbGJhclZpc2liaWxpdHkgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9zY3JvbGxhYmxlJztcblxuZXhwb3J0IGNsYXNzIFNjcm9sbGJhclZpc2liaWxpdHlDb250cm9sbGVyIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG5cdHByaXZhdGUgX3Zpc2liaWxpdHk6IFNjcm9sbGJhclZpc2liaWxpdHk7XG5cdHByaXZhdGUgX3Zpc2libGVDbGFzc05hbWU6IHN0cmluZztcblx0cHJpdmF0ZSBfaW52aXNpYmxlQ2xhc3NOYW1lOiBzdHJpbmc7XG5cdHByaXZhdGUgX2RvbU5vZGU6IEZhc3REb21Ob2RlPEhUTUxFbGVtZW50PiB8IG51bGw7XG5cdHByaXZhdGUgX3Jhd1Nob3VsZEJlVmlzaWJsZTogYm9vbGVhbjtcblx0cHJpdmF0ZSBfc2hvdWxkQmVWaXNpYmxlOiBib29sZWFuO1xuXHRwcml2YXRlIF9pc05lZWRlZDogYm9vbGVhbjtcblx0cHJpdmF0ZSBfaXNWaXNpYmxlOiBib29sZWFuO1xuXHRwcml2YXRlIF9yZXZlYWxUaW1lcjogVGltZW91dFRpbWVyO1xuXG5cdGNvbnN0cnVjdG9yKHZpc2liaWxpdHk6IFNjcm9sbGJhclZpc2liaWxpdHksIHZpc2libGVDbGFzc05hbWU6IHN0cmluZywgaW52aXNpYmxlQ2xhc3NOYW1lOiBzdHJpbmcpIHtcblx0XHRzdXBlcigpO1xuXHRcdHRoaXMuX3Zpc2liaWxpdHkgPSB2aXNpYmlsaXR5O1xuXHRcdHRoaXMuX3Zpc2libGVDbGFzc05hbWUgPSB2aXNpYmxlQ2xhc3NOYW1lO1xuXHRcdHRoaXMuX2ludmlzaWJsZUNsYXNzTmFtZSA9IGludmlzaWJsZUNsYXNzTmFtZTtcblx0XHR0aGlzLl9kb21Ob2RlID0gbnVsbDtcblx0XHR0aGlzLl9pc1Zpc2libGUgPSBmYWxzZTtcblx0XHR0aGlzLl9pc05lZWRlZCA9IGZhbHNlO1xuXHRcdHRoaXMuX3Jhd1Nob3VsZEJlVmlzaWJsZSA9IGZhbHNlO1xuXHRcdHRoaXMuX3Nob3VsZEJlVmlzaWJsZSA9IGZhbHNlO1xuXHRcdHRoaXMuX3JldmVhbFRpbWVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IFRpbWVvdXRUaW1lcigpKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRWaXNpYmlsaXR5KHZpc2liaWxpdHk6IFNjcm9sbGJhclZpc2liaWxpdHkpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5fdmlzaWJpbGl0eSAhPT0gdmlzaWJpbGl0eSkge1xuXHRcdFx0dGhpcy5fdmlzaWJpbGl0eSA9IHZpc2liaWxpdHk7XG5cdFx0XHR0aGlzLl91cGRhdGVTaG91bGRCZVZpc2libGUoKTtcblx0XHR9XG5cdH1cblxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLSBIaWRlIC8gUmV2ZWFsXG5cblx0cHVibGljIHNldFNob3VsZEJlVmlzaWJsZShyYXdTaG91bGRCZVZpc2libGU6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHR0aGlzLl9yYXdTaG91bGRCZVZpc2libGUgPSByYXdTaG91bGRCZVZpc2libGU7XG5cdFx0dGhpcy5fdXBkYXRlU2hvdWxkQmVWaXNpYmxlKCk7XG5cdH1cblxuXHRwcml2YXRlIF9hcHBseVZpc2liaWxpdHlTZXR0aW5nKCk6IGJvb2xlYW4ge1xuXHRcdGlmICh0aGlzLl92aXNpYmlsaXR5ID09PSBTY3JvbGxiYXJWaXNpYmlsaXR5LkhpZGRlbikge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRpZiAodGhpcy5fdmlzaWJpbGl0eSA9PT0gU2Nyb2xsYmFyVmlzaWJpbGl0eS5WaXNpYmxlKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuX3Jhd1Nob3VsZEJlVmlzaWJsZTtcblx0fVxuXG5cdHByaXZhdGUgX3VwZGF0ZVNob3VsZEJlVmlzaWJsZSgpOiB2b2lkIHtcblx0XHRjb25zdCBzaG91bGRCZVZpc2libGUgPSB0aGlzLl9hcHBseVZpc2liaWxpdHlTZXR0aW5nKCk7XG5cblx0XHRpZiAodGhpcy5fc2hvdWxkQmVWaXNpYmxlICE9PSBzaG91bGRCZVZpc2libGUpIHtcblx0XHRcdHRoaXMuX3Nob3VsZEJlVmlzaWJsZSA9IHNob3VsZEJlVmlzaWJsZTtcblx0XHRcdHRoaXMuZW5zdXJlVmlzaWJpbGl0eSgpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzZXRJc05lZWRlZChpc05lZWRlZDogYm9vbGVhbik6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc05lZWRlZCAhPT0gaXNOZWVkZWQpIHtcblx0XHRcdHRoaXMuX2lzTmVlZGVkID0gaXNOZWVkZWQ7XG5cdFx0XHR0aGlzLmVuc3VyZVZpc2liaWxpdHkoKTtcblx0XHR9XG5cdH1cblxuXHRwdWJsaWMgc2V0RG9tTm9kZShkb21Ob2RlOiBGYXN0RG9tTm9kZTxIVE1MRWxlbWVudD4pOiB2b2lkIHtcblx0XHR0aGlzLl9kb21Ob2RlID0gZG9tTm9kZTtcblx0XHR0aGlzLl9kb21Ob2RlLnNldENsYXNzTmFtZSh0aGlzLl9pbnZpc2libGVDbGFzc05hbWUpO1xuXG5cdFx0Ly8gTm93IHRoYXQgdGhlIGZsYWdzICYgdGhlIGRvbSBub2RlIGFyZSBpbiBhIGNvbnNpc3RlbnQgc3RhdGUsIGVuc3VyZSB0aGUgSGlkZGVuL1Zpc2libGUgY29uZmlndXJhdGlvblxuXHRcdHRoaXMuc2V0U2hvdWxkQmVWaXNpYmxlKGZhbHNlKTtcblx0fVxuXG5cdHB1YmxpYyBlbnN1cmVWaXNpYmlsaXR5KCk6IHZvaWQge1xuXG5cdFx0aWYgKCF0aGlzLl9pc05lZWRlZCkge1xuXHRcdFx0Ly8gTm90aGluZyB0byBiZSByZW5kZXJlZFxuXHRcdFx0dGhpcy5faGlkZShmYWxzZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX3Nob3VsZEJlVmlzaWJsZSkge1xuXHRcdFx0dGhpcy5fcmV2ZWFsKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2hpZGUodHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBfcmV2ZWFsKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLl9pc1Zpc2libGUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5faXNWaXNpYmxlID0gdHJ1ZTtcblxuXHRcdC8vIFRoZSBDU1MgYW5pbWF0aW9uIGRvZXNuJ3QgcGxheSBvdGhlcndpc2Vcblx0XHR0aGlzLl9yZXZlYWxUaW1lci5zZXRJZk5vdFNldCgoKSA9PiB7XG5cdFx0XHR0aGlzLl9kb21Ob2RlPy5zZXRDbGFzc05hbWUodGhpcy5fdmlzaWJsZUNsYXNzTmFtZSk7XG5cdFx0fSwgMCk7XG5cdH1cblxuXHRwcml2YXRlIF9oaWRlKHdpdGhGYWRlQXdheTogYm9vbGVhbik6IHZvaWQge1xuXHRcdHRoaXMuX3JldmVhbFRpbWVyLmNhbmNlbCgpO1xuXHRcdGlmICghdGhpcy5faXNWaXNpYmxlKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRoaXMuX2lzVmlzaWJsZSA9IGZhbHNlO1xuXHRcdHRoaXMuX2RvbU5vZGU/LnNldENsYXNzTmFtZSh0aGlzLl9pbnZpc2libGVDbGFzc05hbWUgKyAod2l0aEZhZGVBd2F5ID8gJyBmYWRlJyA6ICcnKSk7XG5cdH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0ICogYXMgZG9tIGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9kb20nO1xuaW1wb3J0IHsgY3JlYXRlRmFzdERvbU5vZGUsIEZhc3REb21Ob2RlIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2Zhc3REb21Ob2RlJztcbmltcG9ydCB7IEdsb2JhbFBvaW50ZXJNb3ZlTW9uaXRvciB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9nbG9iYWxQb2ludGVyTW92ZU1vbml0b3InO1xuaW1wb3J0IHsgU3RhbmRhcmRXaGVlbEV2ZW50IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL21vdXNlRXZlbnQnO1xuaW1wb3J0IHsgU2Nyb2xsYmFyQXJyb3csIFNjcm9sbGJhckFycm93T3B0aW9ucyB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvc2Nyb2xsYmFyQXJyb3cnO1xuaW1wb3J0IHsgU2Nyb2xsYmFyU3RhdGUgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL3Njcm9sbGJhclN0YXRlJztcbmltcG9ydCB7IFNjcm9sbGJhclZpc2liaWxpdHlDb250cm9sbGVyIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3VpL3Njcm9sbGJhci9zY3JvbGxiYXJWaXNpYmlsaXR5Q29udHJvbGxlcic7XG5pbXBvcnQgeyBXaWRnZXQgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvd2lkZ2V0JztcbmltcG9ydCAqIGFzIHBsYXRmb3JtIGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3BsYXRmb3JtJztcbmltcG9ydCB7IElOZXdTY3JvbGxQb3NpdGlvbiwgU2Nyb2xsYWJsZSwgU2Nyb2xsYmFyVmlzaWJpbGl0eSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3Njcm9sbGFibGUnO1xuXG4vKipcbiAqIFRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIHRvIHRoZSBzbGlkZXIgYXQgd2hpY2ggZHJhZ2dpbmcgXCJyZXNldHNcIi4gVGhpcyBpbXBsZW1lbnRzIFwic25hcHBpbmdcIlxuICovXG5jb25zdCBQT0lOVEVSX0RSQUdfUkVTRVRfRElTVEFOQ0UgPSAxNDA7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVNpbXBsaWZpZWRQb2ludGVyRXZlbnQge1xuXHRidXR0b25zOiBudW1iZXI7XG5cdHBhZ2VYOiBudW1iZXI7XG5cdHBhZ2VZOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2Nyb2xsYmFySG9zdCB7XG5cdG9uTW91c2VXaGVlbChtb3VzZVdoZWVsRXZlbnQ6IFN0YW5kYXJkV2hlZWxFdmVudCk6IHZvaWQ7XG5cdG9uRHJhZ1N0YXJ0KCk6IHZvaWQ7XG5cdG9uRHJhZ0VuZCgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFic3RyYWN0U2Nyb2xsYmFyT3B0aW9ucyB7XG5cdGxhenlSZW5kZXI6IGJvb2xlYW47XG5cdGhvc3Q6IFNjcm9sbGJhckhvc3Q7XG5cdHNjcm9sbGJhclN0YXRlOiBTY3JvbGxiYXJTdGF0ZTtcblx0dmlzaWJpbGl0eTogU2Nyb2xsYmFyVmlzaWJpbGl0eTtcblx0ZXh0cmFTY3JvbGxiYXJDbGFzc05hbWU6IHN0cmluZztcblx0c2Nyb2xsYWJsZTogU2Nyb2xsYWJsZTtcblx0c2Nyb2xsQnlQYWdlOiBib29sZWFuO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RTY3JvbGxiYXIgZXh0ZW5kcyBXaWRnZXQge1xuXG5cdHByb3RlY3RlZCBfaG9zdDogU2Nyb2xsYmFySG9zdDtcblx0cHJvdGVjdGVkIF9zY3JvbGxhYmxlOiBTY3JvbGxhYmxlO1xuXHRwcm90ZWN0ZWQgX3Njcm9sbEJ5UGFnZTogYm9vbGVhbjtcblx0cHJpdmF0ZSBfbGF6eVJlbmRlcjogYm9vbGVhbjtcblx0cHJvdGVjdGVkIF9zY3JvbGxiYXJTdGF0ZTogU2Nyb2xsYmFyU3RhdGU7XG5cdHByb3RlY3RlZCBfdmlzaWJpbGl0eUNvbnRyb2xsZXI6IFNjcm9sbGJhclZpc2liaWxpdHlDb250cm9sbGVyO1xuXHRwcml2YXRlIF9wb2ludGVyTW92ZU1vbml0b3I6IEdsb2JhbFBvaW50ZXJNb3ZlTW9uaXRvcjtcblxuXHRwdWJsaWMgZG9tTm9kZTogRmFzdERvbU5vZGU8SFRNTEVsZW1lbnQ+O1xuXHRwdWJsaWMgc2xpZGVyITogRmFzdERvbU5vZGU8SFRNTEVsZW1lbnQ+O1xuXG5cdHByb3RlY3RlZCBfc2hvdWxkUmVuZGVyOiBib29sZWFuO1xuXG5cdGNvbnN0cnVjdG9yKG9wdHM6IEFic3RyYWN0U2Nyb2xsYmFyT3B0aW9ucykge1xuXHRcdHN1cGVyKCk7XG5cdFx0dGhpcy5fbGF6eVJlbmRlciA9IG9wdHMubGF6eVJlbmRlcjtcblx0XHR0aGlzLl9ob3N0ID0gb3B0cy5ob3N0O1xuXHRcdHRoaXMuX3Njcm9sbGFibGUgPSBvcHRzLnNjcm9sbGFibGU7XG5cdFx0dGhpcy5fc2Nyb2xsQnlQYWdlID0gb3B0cy5zY3JvbGxCeVBhZ2U7XG5cdFx0dGhpcy5fc2Nyb2xsYmFyU3RhdGUgPSBvcHRzLnNjcm9sbGJhclN0YXRlO1xuXHRcdHRoaXMuX3Zpc2liaWxpdHlDb250cm9sbGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IFNjcm9sbGJhclZpc2liaWxpdHlDb250cm9sbGVyKG9wdHMudmlzaWJpbGl0eSwgJ3Zpc2libGUgc2Nyb2xsYmFyICcgKyBvcHRzLmV4dHJhU2Nyb2xsYmFyQ2xhc3NOYW1lLCAnaW52aXNpYmxlIHNjcm9sbGJhciAnICsgb3B0cy5leHRyYVNjcm9sbGJhckNsYXNzTmFtZSkpO1xuXHRcdHRoaXMuX3Zpc2liaWxpdHlDb250cm9sbGVyLnNldElzTmVlZGVkKHRoaXMuX3Njcm9sbGJhclN0YXRlLmlzTmVlZGVkKCkpO1xuXHRcdHRoaXMuX3BvaW50ZXJNb3ZlTW9uaXRvciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBHbG9iYWxQb2ludGVyTW92ZU1vbml0b3IoKSk7XG5cdFx0dGhpcy5fc2hvdWxkUmVuZGVyID0gdHJ1ZTtcblx0XHR0aGlzLmRvbU5vZGUgPSBjcmVhdGVGYXN0RG9tTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG5cdFx0dGhpcy5kb21Ob2RlLnNldEF0dHJpYnV0ZSgncm9sZScsICdwcmVzZW50YXRpb24nKTtcblx0XHR0aGlzLmRvbU5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cblx0XHR0aGlzLl92aXNpYmlsaXR5Q29udHJvbGxlci5zZXREb21Ob2RlKHRoaXMuZG9tTm9kZSk7XG5cdFx0dGhpcy5kb21Ob2RlLnNldFBvc2l0aW9uKCdhYnNvbHV0ZScpO1xuXG5cdFx0dGhpcy5fcmVnaXN0ZXIoZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmRvbU5vZGUuZG9tTm9kZSwgZG9tLkV2ZW50VHlwZS5QT0lOVEVSX0RPV04sIChlOiBQb2ludGVyRXZlbnQpID0+IHRoaXMuX2RvbU5vZGVQb2ludGVyRG93bihlKSkpO1xuXHR9XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0gY3JlYXRpb25cblxuXHQvKipcblx0ICogQ3JlYXRlcyB0aGUgZG9tIG5vZGUgZm9yIGFuIGFycm93ICYgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyXG5cdCAqL1xuXHRwcm90ZWN0ZWQgX2NyZWF0ZUFycm93KG9wdHM6IFNjcm9sbGJhckFycm93T3B0aW9ucyk6IHZvaWQge1xuXHRcdGNvbnN0IGFycm93ID0gdGhpcy5fcmVnaXN0ZXIobmV3IFNjcm9sbGJhckFycm93KG9wdHMpKTtcblx0XHR0aGlzLmRvbU5vZGUuZG9tTm9kZS5hcHBlbmRDaGlsZChhcnJvdy5iZ0RvbU5vZGUpO1xuXHRcdHRoaXMuZG9tTm9kZS5kb21Ob2RlLmFwcGVuZENoaWxkKGFycm93LmRvbU5vZGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgdGhlIHNsaWRlciBkb20gbm9kZSwgYWRkcyBpdCB0byB0aGUgY29udGFpbmVyICYgaG9va3MgdXAgdGhlIGV2ZW50c1xuXHQgKi9cblx0cHJvdGVjdGVkIF9jcmVhdGVTbGlkZXIodG9wOiBudW1iZXIsIGxlZnQ6IG51bWJlciwgd2lkdGg6IG51bWJlciB8IHVuZGVmaW5lZCwgaGVpZ2h0OiBudW1iZXIgfCB1bmRlZmluZWQpOiB2b2lkIHtcblx0XHR0aGlzLnNsaWRlciA9IGNyZWF0ZUZhc3REb21Ob2RlKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcblx0XHR0aGlzLnNsaWRlci5zZXRDbGFzc05hbWUoJ3NsaWRlcicpO1xuXHRcdHRoaXMuc2xpZGVyLnNldFBvc2l0aW9uKCdhYnNvbHV0ZScpO1xuXHRcdHRoaXMuc2xpZGVyLnNldFRvcCh0b3ApO1xuXHRcdHRoaXMuc2xpZGVyLnNldExlZnQobGVmdCk7XG5cdFx0aWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHtcblx0XHRcdHRoaXMuc2xpZGVyLnNldFdpZHRoKHdpZHRoKTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBoZWlnaHQgPT09ICdudW1iZXInKSB7XG5cdFx0XHR0aGlzLnNsaWRlci5zZXRIZWlnaHQoaGVpZ2h0KTtcblx0XHR9XG5cdFx0dGhpcy5zbGlkZXIuc2V0TGF5ZXJIaW50aW5nKHRydWUpO1xuXHRcdHRoaXMuc2xpZGVyLnNldENvbnRhaW4oJ3N0cmljdCcpO1xuXG5cdFx0dGhpcy5kb21Ob2RlLmRvbU5vZGUuYXBwZW5kQ2hpbGQodGhpcy5zbGlkZXIuZG9tTm9kZSk7XG5cblx0XHR0aGlzLl9yZWdpc3Rlcihkb20uYWRkRGlzcG9zYWJsZUxpc3RlbmVyKFxuXHRcdFx0dGhpcy5zbGlkZXIuZG9tTm9kZSxcblx0XHRcdGRvbS5FdmVudFR5cGUuUE9JTlRFUl9ET1dOLFxuXHRcdFx0KGU6IFBvaW50ZXJFdmVudCkgPT4ge1xuXHRcdFx0XHRpZiAoZS5idXR0b24gPT09IDApIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0dGhpcy5fc2xpZGVyUG9pbnRlckRvd24oZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHQpKTtcblxuXHRcdHRoaXMub25jbGljayh0aGlzLnNsaWRlci5kb21Ob2RlLCBlID0+IHtcblx0XHRcdGlmIChlLmxlZnRCdXR0b24pIHtcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tIFVwZGF0ZSBzdGF0ZVxuXG5cdHByb3RlY3RlZCBfb25FbGVtZW50U2l6ZSh2aXNpYmxlU2l6ZTogbnVtYmVyKTogYm9vbGVhbiB7XG5cdFx0aWYgKHRoaXMuX3Njcm9sbGJhclN0YXRlLnNldFZpc2libGVTaXplKHZpc2libGVTaXplKSkge1xuXHRcdFx0dGhpcy5fdmlzaWJpbGl0eUNvbnRyb2xsZXIuc2V0SXNOZWVkZWQodGhpcy5fc2Nyb2xsYmFyU3RhdGUuaXNOZWVkZWQoKSk7XG5cdFx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0cnVlO1xuXHRcdFx0aWYgKCF0aGlzLl9sYXp5UmVuZGVyKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9zaG91bGRSZW5kZXI7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX29uRWxlbWVudFNjcm9sbFNpemUoZWxlbWVudFNjcm9sbFNpemU6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGlmICh0aGlzLl9zY3JvbGxiYXJTdGF0ZS5zZXRTY3JvbGxTaXplKGVsZW1lbnRTY3JvbGxTaXplKSkge1xuXHRcdFx0dGhpcy5fdmlzaWJpbGl0eUNvbnRyb2xsZXIuc2V0SXNOZWVkZWQodGhpcy5fc2Nyb2xsYmFyU3RhdGUuaXNOZWVkZWQoKSk7XG5cdFx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0cnVlO1xuXHRcdFx0aWYgKCF0aGlzLl9sYXp5UmVuZGVyKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLl9zaG91bGRSZW5kZXI7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX29uRWxlbWVudFNjcm9sbFBvc2l0aW9uKGVsZW1lbnRTY3JvbGxQb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG5cdFx0aWYgKHRoaXMuX3Njcm9sbGJhclN0YXRlLnNldFNjcm9sbFBvc2l0aW9uKGVsZW1lbnRTY3JvbGxQb3NpdGlvbikpIHtcblx0XHRcdHRoaXMuX3Zpc2liaWxpdHlDb250cm9sbGVyLnNldElzTmVlZGVkKHRoaXMuX3Njcm9sbGJhclN0YXRlLmlzTmVlZGVkKCkpO1xuXHRcdFx0dGhpcy5fc2hvdWxkUmVuZGVyID0gdHJ1ZTtcblx0XHRcdGlmICghdGhpcy5fbGF6eVJlbmRlcikge1xuXHRcdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5fc2hvdWxkUmVuZGVyO1xuXHR9XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0gcmVuZGVyaW5nXG5cblx0cHVibGljIGJlZ2luUmV2ZWFsKCk6IHZvaWQge1xuXHRcdHRoaXMuX3Zpc2liaWxpdHlDb250cm9sbGVyLnNldFNob3VsZEJlVmlzaWJsZSh0cnVlKTtcblx0fVxuXG5cdHB1YmxpYyBiZWdpbkhpZGUoKTogdm9pZCB7XG5cdFx0dGhpcy5fdmlzaWJpbGl0eUNvbnRyb2xsZXIuc2V0U2hvdWxkQmVWaXNpYmxlKGZhbHNlKTtcblx0fVxuXG5cdHB1YmxpYyByZW5kZXIoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9zaG91bGRSZW5kZXIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fc2hvdWxkUmVuZGVyID0gZmFsc2U7XG5cblx0XHR0aGlzLl9yZW5kZXJEb21Ob2RlKHRoaXMuX3Njcm9sbGJhclN0YXRlLmdldFJlY3RhbmdsZUxhcmdlU2l6ZSgpLCB0aGlzLl9zY3JvbGxiYXJTdGF0ZS5nZXRSZWN0YW5nbGVTbWFsbFNpemUoKSk7XG5cdFx0dGhpcy5fdXBkYXRlU2xpZGVyKHRoaXMuX3Njcm9sbGJhclN0YXRlLmdldFNsaWRlclNpemUoKSwgdGhpcy5fc2Nyb2xsYmFyU3RhdGUuZ2V0QXJyb3dTaXplKCkgKyB0aGlzLl9zY3JvbGxiYXJTdGF0ZS5nZXRTbGlkZXJQb3NpdGlvbigpKTtcblx0fVxuXHQvLyAtLS0tLS0tLS0tLS0tLS0tLSBET00gZXZlbnRzXG5cblx0cHJpdmF0ZSBfZG9tTm9kZVBvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xuXHRcdGlmIChlLnRhcmdldCAhPT0gdGhpcy5kb21Ob2RlLmRvbU5vZGUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhpcy5fb25Qb2ludGVyRG93bihlKTtcblx0fVxuXG5cdHB1YmxpYyBkZWxlZ2F0ZVBvaW50ZXJEb3duKGU6IFBvaW50ZXJFdmVudCk6IHZvaWQge1xuXHRcdGNvbnN0IGRvbVRvcCA9IHRoaXMuZG9tTm9kZS5kb21Ob2RlLmdldENsaWVudFJlY3RzKClbMF0udG9wO1xuXHRcdGNvbnN0IHNsaWRlclN0YXJ0ID0gZG9tVG9wICsgdGhpcy5fc2Nyb2xsYmFyU3RhdGUuZ2V0U2xpZGVyUG9zaXRpb24oKTtcblx0XHRjb25zdCBzbGlkZXJTdG9wID0gZG9tVG9wICsgdGhpcy5fc2Nyb2xsYmFyU3RhdGUuZ2V0U2xpZGVyUG9zaXRpb24oKSArIHRoaXMuX3Njcm9sbGJhclN0YXRlLmdldFNsaWRlclNpemUoKTtcblx0XHRjb25zdCBwb2ludGVyUG9zID0gdGhpcy5fc2xpZGVyUG9pbnRlclBvc2l0aW9uKGUpO1xuXHRcdGlmIChzbGlkZXJTdGFydCA8PSBwb2ludGVyUG9zICYmIHBvaW50ZXJQb3MgPD0gc2xpZGVyU3RvcCkge1xuXHRcdFx0Ly8gQWN0IGFzIGlmIGl0IHdhcyBhIHBvaW50ZXIgZG93biBvbiB0aGUgc2xpZGVyXG5cdFx0XHRpZiAoZS5idXR0b24gPT09IDApIHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR0aGlzLl9zbGlkZXJQb2ludGVyRG93bihlKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gQWN0IGFzIGlmIGl0IHdhcyBhIHBvaW50ZXIgZG93biBvbiB0aGUgc2Nyb2xsYmFyXG5cdFx0XHR0aGlzLl9vblBvaW50ZXJEb3duKGUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgX29uUG9pbnRlckRvd24oZTogUG9pbnRlckV2ZW50KTogdm9pZCB7XG5cdFx0bGV0IG9mZnNldFg6IG51bWJlcjtcblx0XHRsZXQgb2Zmc2V0WTogbnVtYmVyO1xuXHRcdGlmIChlLnRhcmdldCA9PT0gdGhpcy5kb21Ob2RlLmRvbU5vZGUgJiYgdHlwZW9mIGUub2Zmc2V0WCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIGUub2Zmc2V0WSA9PT0gJ251bWJlcicpIHtcblx0XHRcdG9mZnNldFggPSBlLm9mZnNldFg7XG5cdFx0XHRvZmZzZXRZID0gZS5vZmZzZXRZO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zdCBkb21Ob2RlUG9zaXRpb24gPSBkb20uZ2V0RG9tTm9kZVBhZ2VQb3NpdGlvbih0aGlzLmRvbU5vZGUuZG9tTm9kZSk7XG5cdFx0XHRvZmZzZXRYID0gZS5wYWdlWCAtIGRvbU5vZGVQb3NpdGlvbi5sZWZ0O1xuXHRcdFx0b2Zmc2V0WSA9IGUucGFnZVkgLSBkb21Ob2RlUG9zaXRpb24udG9wO1xuXHRcdH1cblxuXHRcdGNvbnN0IG9mZnNldCA9IHRoaXMuX3BvaW50ZXJEb3duUmVsYXRpdmVQb3NpdGlvbihvZmZzZXRYLCBvZmZzZXRZKTtcblx0XHR0aGlzLl9zZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Ob3coXG5cdFx0XHR0aGlzLl9zY3JvbGxCeVBhZ2Vcblx0XHRcdFx0PyB0aGlzLl9zY3JvbGxiYXJTdGF0ZS5nZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Gcm9tT2Zmc2V0UGFnZWQob2Zmc2V0KVxuXHRcdFx0XHQ6IHRoaXMuX3Njcm9sbGJhclN0YXRlLmdldERlc2lyZWRTY3JvbGxQb3NpdGlvbkZyb21PZmZzZXQob2Zmc2V0KVxuXHRcdCk7XG5cblx0XHRpZiAoZS5idXR0b24gPT09IDApIHtcblx0XHRcdC8vIGxlZnQgYnV0dG9uXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLl9zbGlkZXJQb2ludGVyRG93bihlKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIF9zbGlkZXJQb2ludGVyRG93bihlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcblx0XHRpZiAoIWUudGFyZ2V0IHx8ICEoZS50YXJnZXQgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zdCBpbml0aWFsUG9pbnRlclBvc2l0aW9uID0gdGhpcy5fc2xpZGVyUG9pbnRlclBvc2l0aW9uKGUpO1xuXHRcdGNvbnN0IGluaXRpYWxQb2ludGVyT3J0aG9nb25hbFBvc2l0aW9uID0gdGhpcy5fc2xpZGVyT3J0aG9nb25hbFBvaW50ZXJQb3NpdGlvbihlKTtcblx0XHRjb25zdCBpbml0aWFsU2Nyb2xsYmFyU3RhdGUgPSB0aGlzLl9zY3JvbGxiYXJTdGF0ZS5jbG9uZSgpO1xuXHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzTmFtZSgnYWN0aXZlJywgdHJ1ZSk7XG5cblx0XHR0aGlzLl9wb2ludGVyTW92ZU1vbml0b3Iuc3RhcnRNb25pdG9yaW5nKFxuXHRcdFx0ZS50YXJnZXQsXG5cdFx0XHRlLnBvaW50ZXJJZCxcblx0XHRcdGUuYnV0dG9ucyxcblx0XHRcdChwb2ludGVyTW92ZURhdGE6IFBvaW50ZXJFdmVudCkgPT4ge1xuXHRcdFx0XHRjb25zdCBwb2ludGVyT3J0aG9nb25hbFBvc2l0aW9uID0gdGhpcy5fc2xpZGVyT3J0aG9nb25hbFBvaW50ZXJQb3NpdGlvbihwb2ludGVyTW92ZURhdGEpO1xuXHRcdFx0XHRjb25zdCBwb2ludGVyT3J0aG9nb25hbERlbHRhID0gTWF0aC5hYnMocG9pbnRlck9ydGhvZ29uYWxQb3NpdGlvbiAtIGluaXRpYWxQb2ludGVyT3J0aG9nb25hbFBvc2l0aW9uKTtcblxuXHRcdFx0XHRpZiAocGxhdGZvcm0uaXNXaW5kb3dzICYmIHBvaW50ZXJPcnRob2dvbmFsRGVsdGEgPiBQT0lOVEVSX0RSQUdfUkVTRVRfRElTVEFOQ0UpIHtcblx0XHRcdFx0XHQvLyBUaGUgcG9pbnRlciBoYXMgd29uZGVyZWQgYXdheSBmcm9tIHRoZSBzY3JvbGxiYXIgPT4gcmVzZXQgZHJhZ2dpbmdcblx0XHRcdFx0XHR0aGlzLl9zZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Ob3coaW5pdGlhbFNjcm9sbGJhclN0YXRlLmdldFNjcm9sbFBvc2l0aW9uKCkpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHBvaW50ZXJQb3NpdGlvbiA9IHRoaXMuX3NsaWRlclBvaW50ZXJQb3NpdGlvbihwb2ludGVyTW92ZURhdGEpO1xuXHRcdFx0XHRjb25zdCBwb2ludGVyRGVsdGEgPSBwb2ludGVyUG9zaXRpb24gLSBpbml0aWFsUG9pbnRlclBvc2l0aW9uO1xuXHRcdFx0XHR0aGlzLl9zZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Ob3coaW5pdGlhbFNjcm9sbGJhclN0YXRlLmdldERlc2lyZWRTY3JvbGxQb3NpdGlvbkZyb21EZWx0YShwb2ludGVyRGVsdGEpKTtcblx0XHRcdH0sXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzTmFtZSgnYWN0aXZlJywgZmFsc2UpO1xuXHRcdFx0XHR0aGlzLl9ob3N0Lm9uRHJhZ0VuZCgpO1xuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHR0aGlzLl9ob3N0Lm9uRHJhZ1N0YXJ0KCk7XG5cdH1cblxuXHRwcml2YXRlIF9zZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Ob3coX2Rlc2lyZWRTY3JvbGxQb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG5cblx0XHRjb25zdCBkZXNpcmVkU2Nyb2xsUG9zaXRpb246IElOZXdTY3JvbGxQb3NpdGlvbiA9IHt9O1xuXHRcdHRoaXMud3JpdGVTY3JvbGxQb3NpdGlvbihkZXNpcmVkU2Nyb2xsUG9zaXRpb24sIF9kZXNpcmVkU2Nyb2xsUG9zaXRpb24pO1xuXG5cdFx0dGhpcy5fc2Nyb2xsYWJsZS5zZXRTY3JvbGxQb3NpdGlvbk5vdyhkZXNpcmVkU2Nyb2xsUG9zaXRpb24pO1xuXHR9XG5cblx0cHVibGljIHVwZGF0ZVNjcm9sbGJhclNpemUoc2Nyb2xsYmFyU2l6ZTogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5fdXBkYXRlU2Nyb2xsYmFyU2l6ZShzY3JvbGxiYXJTaXplKTtcblx0XHR0aGlzLl9zY3JvbGxiYXJTdGF0ZS5zZXRTY3JvbGxiYXJTaXplKHNjcm9sbGJhclNpemUpO1xuXHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRydWU7XG5cdFx0aWYgKCF0aGlzLl9sYXp5UmVuZGVyKSB7XG5cdFx0XHR0aGlzLnJlbmRlcigpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBpc05lZWRlZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5fc2Nyb2xsYmFyU3RhdGUuaXNOZWVkZWQoKTtcblx0fVxuXG5cdC8vIC0tLS0tLS0tLS0tLS0tLS0tIE92ZXJ3cml0ZSB0aGVzZVxuXG5cdHByb3RlY3RlZCBhYnN0cmFjdCBfcmVuZGVyRG9tTm9kZShsYXJnZVNpemU6IG51bWJlciwgc21hbGxTaXplOiBudW1iZXIpOiB2b2lkO1xuXHRwcm90ZWN0ZWQgYWJzdHJhY3QgX3VwZGF0ZVNsaWRlcihzbGlkZXJTaXplOiBudW1iZXIsIHNsaWRlclBvc2l0aW9uOiBudW1iZXIpOiB2b2lkO1xuXG5cdHByb3RlY3RlZCBhYnN0cmFjdCBfcG9pbnRlckRvd25SZWxhdGl2ZVBvc2l0aW9uKG9mZnNldFg6IG51bWJlciwgb2Zmc2V0WTogbnVtYmVyKTogbnVtYmVyO1xuXHRwcm90ZWN0ZWQgYWJzdHJhY3QgX3NsaWRlclBvaW50ZXJQb3NpdGlvbihlOiBJU2ltcGxpZmllZFBvaW50ZXJFdmVudCk6IG51bWJlcjtcblx0cHJvdGVjdGVkIGFic3RyYWN0IF9zbGlkZXJPcnRob2dvbmFsUG9pbnRlclBvc2l0aW9uKGU6IElTaW1wbGlmaWVkUG9pbnRlckV2ZW50KTogbnVtYmVyO1xuXHRwcm90ZWN0ZWQgYWJzdHJhY3QgX3VwZGF0ZVNjcm9sbGJhclNpemUoc2l6ZTogbnVtYmVyKTogdm9pZDtcblxuXHRwdWJsaWMgYWJzdHJhY3Qgd3JpdGVTY3JvbGxQb3NpdGlvbih0YXJnZXQ6IElOZXdTY3JvbGxQb3NpdGlvbiwgc2Nyb2xsUG9zaXRpb246IG51bWJlcik6IHZvaWQ7XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbi8qKlxuICogVGhlIG1pbmltYWwgc2l6ZSBvZiB0aGUgc2xpZGVyIChzdWNoIHRoYXQgaXQgY2FuIHN0aWxsIGJlIGNsaWNrYWJsZSkgLS0gaXQgaXMgYXJ0aWZpY2lhbGx5IGVubGFyZ2VkLlxuICovXG5jb25zdCBNSU5JTVVNX1NMSURFUl9TSVpFID0gMjA7XG5cbmV4cG9ydCBjbGFzcyBTY3JvbGxiYXJTdGF0ZSB7XG5cblx0LyoqXG5cdCAqIEZvciB0aGUgdmVydGljYWwgc2Nyb2xsYmFyOiB0aGUgd2lkdGguXG5cdCAqIEZvciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXI6IHRoZSBoZWlnaHQuXG5cdCAqL1xuXHRwcml2YXRlIF9zY3JvbGxiYXJTaXplOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIEZvciB0aGUgdmVydGljYWwgc2Nyb2xsYmFyOiB0aGUgaGVpZ2h0IG9mIHRoZSBwYWlyIGhvcml6b250YWwgc2Nyb2xsYmFyLlxuXHQgKiBGb3IgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyOiB0aGUgd2lkdGggb2YgdGhlIHBhaXIgdmVydGljYWwgc2Nyb2xsYmFyLlxuXHQgKi9cblx0cHJpdmF0ZSBfb3Bwb3NpdGVTY3JvbGxiYXJTaXplOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIEZvciB0aGUgdmVydGljYWwgc2Nyb2xsYmFyOiB0aGUgaGVpZ2h0IG9mIHRoZSBzY3JvbGxiYXIncyBhcnJvd3MuXG5cdCAqIEZvciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXI6IHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsYmFyJ3MgYXJyb3dzLlxuXHQgKi9cblx0cHJpdmF0ZSByZWFkb25seSBfYXJyb3dTaXplOiBudW1iZXI7XG5cblx0Ly8gLS0tIHZhcmlhYmxlc1xuXHQvKipcblx0ICogRm9yIHRoZSB2ZXJ0aWNhbCBzY3JvbGxiYXI6IHRoZSB2aWV3cG9ydCBoZWlnaHQuXG5cdCAqIEZvciB0aGUgaG9yaXpvbnRhbCBzY3JvbGxiYXI6IHRoZSB2aWV3cG9ydCB3aWR0aC5cblx0ICovXG5cdHByaXZhdGUgX3Zpc2libGVTaXplOiBudW1iZXI7XG5cblx0LyoqXG5cdCAqIEZvciB0aGUgdmVydGljYWwgc2Nyb2xsYmFyOiB0aGUgc2Nyb2xsIGhlaWdodC5cblx0ICogRm9yIHRoZSBob3Jpem9udGFsIHNjcm9sbGJhcjogdGhlIHNjcm9sbCB3aWR0aC5cblx0ICovXG5cdHByaXZhdGUgX3Njcm9sbFNpemU6IG51bWJlcjtcblxuXHQvKipcblx0ICogRm9yIHRoZSB2ZXJ0aWNhbCBzY3JvbGxiYXI6IHRoZSBzY3JvbGwgdG9wLlxuXHQgKiBGb3IgdGhlIGhvcml6b250YWwgc2Nyb2xsYmFyOiB0aGUgc2Nyb2xsIGxlZnQuXG5cdCAqL1xuXHRwcml2YXRlIF9zY3JvbGxQb3NpdGlvbjogbnVtYmVyO1xuXG5cdC8vIC0tLSBjb21wdXRlZCB2YXJpYWJsZXNcblxuXHQvKipcblx0ICogYHZpc2libGVTaXplYCAtIGBvcHBvc2l0ZVNjcm9sbGJhclNpemVgXG5cdCAqL1xuXHRwcml2YXRlIF9jb21wdXRlZEF2YWlsYWJsZVNpemU6IG51bWJlcjtcblx0LyoqXG5cdCAqIChgc2Nyb2xsU2l6ZWAgPiAwICYmIGBzY3JvbGxTaXplYCA+IGB2aXNpYmxlU2l6ZWApXG5cdCAqL1xuXHRwcml2YXRlIF9jb21wdXRlZElzTmVlZGVkOiBib29sZWFuO1xuXG5cdHByaXZhdGUgX2NvbXB1dGVkU2xpZGVyU2l6ZTogbnVtYmVyO1xuXHRwcml2YXRlIF9jb21wdXRlZFNsaWRlclJhdGlvOiBudW1iZXI7XG5cdHByaXZhdGUgX2NvbXB1dGVkU2xpZGVyUG9zaXRpb246IG51bWJlcjtcblxuXHRjb25zdHJ1Y3RvcihhcnJvd1NpemU6IG51bWJlciwgc2Nyb2xsYmFyU2l6ZTogbnVtYmVyLCBvcHBvc2l0ZVNjcm9sbGJhclNpemU6IG51bWJlciwgdmlzaWJsZVNpemU6IG51bWJlciwgc2Nyb2xsU2l6ZTogbnVtYmVyLCBzY3JvbGxQb3NpdGlvbjogbnVtYmVyKSB7XG5cdFx0dGhpcy5fc2Nyb2xsYmFyU2l6ZSA9IE1hdGgucm91bmQoc2Nyb2xsYmFyU2l6ZSk7XG5cdFx0dGhpcy5fb3Bwb3NpdGVTY3JvbGxiYXJTaXplID0gTWF0aC5yb3VuZChvcHBvc2l0ZVNjcm9sbGJhclNpemUpO1xuXHRcdHRoaXMuX2Fycm93U2l6ZSA9IE1hdGgucm91bmQoYXJyb3dTaXplKTtcblxuXHRcdHRoaXMuX3Zpc2libGVTaXplID0gdmlzaWJsZVNpemU7XG5cdFx0dGhpcy5fc2Nyb2xsU2l6ZSA9IHNjcm9sbFNpemU7XG5cdFx0dGhpcy5fc2Nyb2xsUG9zaXRpb24gPSBzY3JvbGxQb3NpdGlvbjtcblxuXHRcdHRoaXMuX2NvbXB1dGVkQXZhaWxhYmxlU2l6ZSA9IDA7XG5cdFx0dGhpcy5fY29tcHV0ZWRJc05lZWRlZCA9IGZhbHNlO1xuXHRcdHRoaXMuX2NvbXB1dGVkU2xpZGVyU2l6ZSA9IDA7XG5cdFx0dGhpcy5fY29tcHV0ZWRTbGlkZXJSYXRpbyA9IDA7XG5cdFx0dGhpcy5fY29tcHV0ZWRTbGlkZXJQb3NpdGlvbiA9IDA7XG5cblx0XHR0aGlzLl9yZWZyZXNoQ29tcHV0ZWRWYWx1ZXMoKTtcblx0fVxuXG5cdHB1YmxpYyBjbG9uZSgpOiBTY3JvbGxiYXJTdGF0ZSB7XG5cdFx0cmV0dXJuIG5ldyBTY3JvbGxiYXJTdGF0ZSh0aGlzLl9hcnJvd1NpemUsIHRoaXMuX3Njcm9sbGJhclNpemUsIHRoaXMuX29wcG9zaXRlU2Nyb2xsYmFyU2l6ZSwgdGhpcy5fdmlzaWJsZVNpemUsIHRoaXMuX3Njcm9sbFNpemUsIHRoaXMuX3Njcm9sbFBvc2l0aW9uKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRWaXNpYmxlU2l6ZSh2aXNpYmxlU2l6ZTogbnVtYmVyKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgaVZpc2libGVTaXplID0gTWF0aC5yb3VuZCh2aXNpYmxlU2l6ZSk7XG5cdFx0aWYgKHRoaXMuX3Zpc2libGVTaXplICE9PSBpVmlzaWJsZVNpemUpIHtcblx0XHRcdHRoaXMuX3Zpc2libGVTaXplID0gaVZpc2libGVTaXplO1xuXHRcdFx0dGhpcy5fcmVmcmVzaENvbXB1dGVkVmFsdWVzKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHNldFNjcm9sbFNpemUoc2Nyb2xsU2l6ZTogbnVtYmVyKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgaVNjcm9sbFNpemUgPSBNYXRoLnJvdW5kKHNjcm9sbFNpemUpO1xuXHRcdGlmICh0aGlzLl9zY3JvbGxTaXplICE9PSBpU2Nyb2xsU2l6ZSkge1xuXHRcdFx0dGhpcy5fc2Nyb2xsU2l6ZSA9IGlTY3JvbGxTaXplO1xuXHRcdFx0dGhpcy5fcmVmcmVzaENvbXB1dGVkVmFsdWVzKCk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cHVibGljIHNldFNjcm9sbFBvc2l0aW9uKHNjcm9sbFBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcblx0XHRjb25zdCBpU2Nyb2xsUG9zaXRpb24gPSBNYXRoLnJvdW5kKHNjcm9sbFBvc2l0aW9uKTtcblx0XHRpZiAodGhpcy5fc2Nyb2xsUG9zaXRpb24gIT09IGlTY3JvbGxQb3NpdGlvbikge1xuXHRcdFx0dGhpcy5fc2Nyb2xsUG9zaXRpb24gPSBpU2Nyb2xsUG9zaXRpb247XG5cdFx0XHR0aGlzLl9yZWZyZXNoQ29tcHV0ZWRWYWx1ZXMoKTtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRwdWJsaWMgc2V0U2Nyb2xsYmFyU2l6ZShzY3JvbGxiYXJTaXplOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLl9zY3JvbGxiYXJTaXplID0gTWF0aC5yb3VuZChzY3JvbGxiYXJTaXplKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRPcHBvc2l0ZVNjcm9sbGJhclNpemUob3Bwb3NpdGVTY3JvbGxiYXJTaXplOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLl9vcHBvc2l0ZVNjcm9sbGJhclNpemUgPSBNYXRoLnJvdW5kKG9wcG9zaXRlU2Nyb2xsYmFyU2l6ZSk7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBfY29tcHV0ZVZhbHVlcyhvcHBvc2l0ZVNjcm9sbGJhclNpemU6IG51bWJlciwgYXJyb3dTaXplOiBudW1iZXIsIHZpc2libGVTaXplOiBudW1iZXIsIHNjcm9sbFNpemU6IG51bWJlciwgc2Nyb2xsUG9zaXRpb246IG51bWJlcikge1xuXHRcdGNvbnN0IGNvbXB1dGVkQXZhaWxhYmxlU2l6ZSA9IE1hdGgubWF4KDAsIHZpc2libGVTaXplIC0gb3Bwb3NpdGVTY3JvbGxiYXJTaXplKTtcblx0XHRjb25zdCBjb21wdXRlZFJlcHJlc2VudGFibGVTaXplID0gTWF0aC5tYXgoMCwgY29tcHV0ZWRBdmFpbGFibGVTaXplIC0gMiAqIGFycm93U2l6ZSk7XG5cdFx0Y29uc3QgY29tcHV0ZWRJc05lZWRlZCA9IChzY3JvbGxTaXplID4gMCAmJiBzY3JvbGxTaXplID4gdmlzaWJsZVNpemUpO1xuXG5cdFx0aWYgKCFjb21wdXRlZElzTmVlZGVkKSB7XG5cdFx0XHQvLyBUaGVyZSBpcyBubyBuZWVkIGZvciBhIHNsaWRlclxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Y29tcHV0ZWRBdmFpbGFibGVTaXplOiBNYXRoLnJvdW5kKGNvbXB1dGVkQXZhaWxhYmxlU2l6ZSksXG5cdFx0XHRcdGNvbXB1dGVkSXNOZWVkZWQ6IGNvbXB1dGVkSXNOZWVkZWQsXG5cdFx0XHRcdGNvbXB1dGVkU2xpZGVyU2l6ZTogTWF0aC5yb3VuZChjb21wdXRlZFJlcHJlc2VudGFibGVTaXplKSxcblx0XHRcdFx0Y29tcHV0ZWRTbGlkZXJSYXRpbzogMCxcblx0XHRcdFx0Y29tcHV0ZWRTbGlkZXJQb3NpdGlvbjogMCxcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gV2UgbXVzdCBhcnRpZmljaWFsbHkgaW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIHNsaWRlciBpZiBuZWVkZWQsIHNpbmNlIHRoZSBzbGlkZXIgd291bGQgYmUgdG9vIHNtYWxsIHRvIGdyYWIgd2l0aCB0aGUgbW91c2Ugb3RoZXJ3aXNlXG5cdFx0Y29uc3QgY29tcHV0ZWRTbGlkZXJTaXplID0gTWF0aC5yb3VuZChNYXRoLm1heChNSU5JTVVNX1NMSURFUl9TSVpFLCBNYXRoLmZsb29yKHZpc2libGVTaXplICogY29tcHV0ZWRSZXByZXNlbnRhYmxlU2l6ZSAvIHNjcm9sbFNpemUpKSk7XG5cblx0XHQvLyBUaGUgc2xpZGVyIGNhbiBtb3ZlIGZyb20gMCB0byBgY29tcHV0ZWRSZXByZXNlbnRhYmxlU2l6ZWAgLSBgY29tcHV0ZWRTbGlkZXJTaXplYFxuXHRcdC8vIGluIHRoZSBzYW1lIHdheSBgc2Nyb2xsUG9zaXRpb25gIGNhbiBtb3ZlIGZyb20gMCB0byBgc2Nyb2xsU2l6ZWAgLSBgdmlzaWJsZVNpemVgLlxuXHRcdGNvbnN0IGNvbXB1dGVkU2xpZGVyUmF0aW8gPSAoY29tcHV0ZWRSZXByZXNlbnRhYmxlU2l6ZSAtIGNvbXB1dGVkU2xpZGVyU2l6ZSkgLyAoc2Nyb2xsU2l6ZSAtIHZpc2libGVTaXplKTtcblx0XHRjb25zdCBjb21wdXRlZFNsaWRlclBvc2l0aW9uID0gKHNjcm9sbFBvc2l0aW9uICogY29tcHV0ZWRTbGlkZXJSYXRpbyk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0Y29tcHV0ZWRBdmFpbGFibGVTaXplOiBNYXRoLnJvdW5kKGNvbXB1dGVkQXZhaWxhYmxlU2l6ZSksXG5cdFx0XHRjb21wdXRlZElzTmVlZGVkOiBjb21wdXRlZElzTmVlZGVkLFxuXHRcdFx0Y29tcHV0ZWRTbGlkZXJTaXplOiBNYXRoLnJvdW5kKGNvbXB1dGVkU2xpZGVyU2l6ZSksXG5cdFx0XHRjb21wdXRlZFNsaWRlclJhdGlvOiBjb21wdXRlZFNsaWRlclJhdGlvLFxuXHRcdFx0Y29tcHV0ZWRTbGlkZXJQb3NpdGlvbjogTWF0aC5yb3VuZChjb21wdXRlZFNsaWRlclBvc2l0aW9uKSxcblx0XHR9O1xuXHR9XG5cblx0cHJpdmF0ZSBfcmVmcmVzaENvbXB1dGVkVmFsdWVzKCk6IHZvaWQge1xuXHRcdGNvbnN0IHIgPSBTY3JvbGxiYXJTdGF0ZS5fY29tcHV0ZVZhbHVlcyh0aGlzLl9vcHBvc2l0ZVNjcm9sbGJhclNpemUsIHRoaXMuX2Fycm93U2l6ZSwgdGhpcy5fdmlzaWJsZVNpemUsIHRoaXMuX3Njcm9sbFNpemUsIHRoaXMuX3Njcm9sbFBvc2l0aW9uKTtcblx0XHR0aGlzLl9jb21wdXRlZEF2YWlsYWJsZVNpemUgPSByLmNvbXB1dGVkQXZhaWxhYmxlU2l6ZTtcblx0XHR0aGlzLl9jb21wdXRlZElzTmVlZGVkID0gci5jb21wdXRlZElzTmVlZGVkO1xuXHRcdHRoaXMuX2NvbXB1dGVkU2xpZGVyU2l6ZSA9IHIuY29tcHV0ZWRTbGlkZXJTaXplO1xuXHRcdHRoaXMuX2NvbXB1dGVkU2xpZGVyUmF0aW8gPSByLmNvbXB1dGVkU2xpZGVyUmF0aW87XG5cdFx0dGhpcy5fY29tcHV0ZWRTbGlkZXJQb3NpdGlvbiA9IHIuY29tcHV0ZWRTbGlkZXJQb3NpdGlvbjtcblx0fVxuXG5cdHB1YmxpYyBnZXRBcnJvd1NpemUoKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fYXJyb3dTaXplO1xuXHR9XG5cblx0cHVibGljIGdldFNjcm9sbFBvc2l0aW9uKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3Njcm9sbFBvc2l0aW9uO1xuXHR9XG5cblx0cHVibGljIGdldFJlY3RhbmdsZUxhcmdlU2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9jb21wdXRlZEF2YWlsYWJsZVNpemU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0UmVjdGFuZ2xlU21hbGxTaXplKCk6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuX3Njcm9sbGJhclNpemU7XG5cdH1cblxuXHRwdWJsaWMgaXNOZWVkZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuIHRoaXMuX2NvbXB1dGVkSXNOZWVkZWQ7XG5cdH1cblxuXHRwdWJsaWMgZ2V0U2xpZGVyU2l6ZSgpOiBudW1iZXIge1xuXHRcdHJldHVybiB0aGlzLl9jb21wdXRlZFNsaWRlclNpemU7XG5cdH1cblxuXHRwdWJsaWMgZ2V0U2xpZGVyUG9zaXRpb24oKTogbnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy5fY29tcHV0ZWRTbGlkZXJQb3NpdGlvbjtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb21wdXRlIGEgZGVzaXJlZCBgc2Nyb2xsUG9zaXRpb25gIHN1Y2ggdGhhdCBgb2Zmc2V0YCBlbmRzIHVwIGluIHRoZSBjZW50ZXIgb2YgdGhlIHNsaWRlci5cblx0ICogYG9mZnNldGAgaXMgYmFzZWQgb24gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0gYXMgdGhlIGBzbGlkZXJQb3NpdGlvbmAuXG5cdCAqL1xuXHRwdWJsaWMgZ2V0RGVzaXJlZFNjcm9sbFBvc2l0aW9uRnJvbU9mZnNldChvZmZzZXQ6IG51bWJlcik6IG51bWJlciB7XG5cdFx0aWYgKCF0aGlzLl9jb21wdXRlZElzTmVlZGVkKSB7XG5cdFx0XHQvLyBubyBuZWVkIGZvciBhIHNsaWRlclxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVzaXJlZFNsaWRlclBvc2l0aW9uID0gb2Zmc2V0IC0gdGhpcy5fYXJyb3dTaXplIC0gdGhpcy5fY29tcHV0ZWRTbGlkZXJTaXplIC8gMjtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZChkZXNpcmVkU2xpZGVyUG9zaXRpb24gLyB0aGlzLl9jb21wdXRlZFNsaWRlclJhdGlvKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb21wdXRlIGEgZGVzaXJlZCBgc2Nyb2xsUG9zaXRpb25gIGZyb20gaWYgb2Zmc2V0IGlzIGJlZm9yZSBvciBhZnRlciB0aGUgc2xpZGVyIHBvc2l0aW9uLlxuXHQgKiBJZiBvZmZzZXQgaXMgYmVmb3JlIHNsaWRlciwgdHJlYXQgYXMgYSBwYWdlIHVwIChvciBsZWZ0KS4gIElmIGFmdGVyLCBwYWdlIGRvd24gKG9yIHJpZ2h0KS5cblx0ICogYG9mZnNldGAgYW5kIGBfY29tcHV0ZWRTbGlkZXJQb3NpdGlvbmAgYXJlIGJhc2VkIG9uIHRoZSBzYW1lIGNvb3JkaW5hdGUgc3lzdGVtLlxuXHQgKiBgX3Zpc2libGVTaXplYCBjb3JyZXNwb25kcyB0byBhIFwicGFnZVwiIG9mIGxpbmVzIGluIHRoZSByZXR1cm5lZCBjb29yZGluYXRlIHN5c3RlbS5cblx0ICovXG5cdHB1YmxpYyBnZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Gcm9tT2Zmc2V0UGFnZWQob2Zmc2V0OiBudW1iZXIpOiBudW1iZXIge1xuXHRcdGlmICghdGhpcy5fY29tcHV0ZWRJc05lZWRlZCkge1xuXHRcdFx0Ly8gbm8gbmVlZCBmb3IgYSBzbGlkZXJcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvcnJlY3RlZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX2Fycm93U2l6ZTsgIC8vIGNvbXBlbnNhdGUgaWYgaGFzIGFycm93c1xuXHRcdGxldCBkZXNpcmVkU2Nyb2xsUG9zaXRpb24gPSB0aGlzLl9zY3JvbGxQb3NpdGlvbjtcblx0XHRpZiAoY29ycmVjdGVkT2Zmc2V0IDwgdGhpcy5fY29tcHV0ZWRTbGlkZXJQb3NpdGlvbikge1xuXHRcdFx0ZGVzaXJlZFNjcm9sbFBvc2l0aW9uIC09IHRoaXMuX3Zpc2libGVTaXplOyAgLy8gcGFnZSB1cC9sZWZ0XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRlc2lyZWRTY3JvbGxQb3NpdGlvbiArPSB0aGlzLl92aXNpYmxlU2l6ZTsgIC8vIHBhZ2UgZG93bi9yaWdodFxuXHRcdH1cblx0XHRyZXR1cm4gZGVzaXJlZFNjcm9sbFBvc2l0aW9uO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbXB1dGUgYSBkZXNpcmVkIGBzY3JvbGxQb3NpdGlvbmAgc3VjaCB0aGF0IHRoZSBzbGlkZXIgbW92ZXMgYnkgYGRlbHRhYC5cblx0ICovXG5cdHB1YmxpYyBnZXREZXNpcmVkU2Nyb2xsUG9zaXRpb25Gcm9tRGVsdGEoZGVsdGE6IG51bWJlcik6IG51bWJlciB7XG5cdFx0aWYgKCF0aGlzLl9jb21wdXRlZElzTmVlZGVkKSB7XG5cdFx0XHQvLyBubyBuZWVkIGZvciBhIHNsaWRlclxuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZGVzaXJlZFNsaWRlclBvc2l0aW9uID0gdGhpcy5fY29tcHV0ZWRTbGlkZXJQb3NpdGlvbiArIGRlbHRhO1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKGRlc2lyZWRTbGlkZXJQb3NpdGlvbiAvIHRoaXMuX2NvbXB1dGVkU2xpZGVyUmF0aW8pO1xuXHR9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IEFic3RyYWN0U2Nyb2xsYmFyLCBJU2ltcGxpZmllZFBvaW50ZXJFdmVudCwgU2Nyb2xsYmFySG9zdCB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvYWJzdHJhY3RTY3JvbGxiYXInO1xuaW1wb3J0IHsgU2Nyb2xsYWJsZUVsZW1lbnRSZXNvbHZlZE9wdGlvbnMgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL3Njcm9sbGFibGVFbGVtZW50T3B0aW9ucyc7XG5pbXBvcnQgeyBTY3JvbGxiYXJTdGF0ZSB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvc2Nyb2xsYmFyU3RhdGUnO1xuaW1wb3J0IHsgSU5ld1Njcm9sbFBvc2l0aW9uLCBTY3JvbGxhYmxlLCBTY3JvbGxiYXJWaXNpYmlsaXR5LCBTY3JvbGxFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3Njcm9sbGFibGUnO1xuXG5cblxuXG5leHBvcnQgY2xhc3MgSG9yaXpvbnRhbFNjcm9sbGJhciBleHRlbmRzIEFic3RyYWN0U2Nyb2xsYmFyIHtcblxuXHRjb25zdHJ1Y3RvcihzY3JvbGxhYmxlOiBTY3JvbGxhYmxlLCBvcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudFJlc29sdmVkT3B0aW9ucywgaG9zdDogU2Nyb2xsYmFySG9zdCkge1xuXHRcdGNvbnN0IHNjcm9sbERpbWVuc2lvbnMgPSBzY3JvbGxhYmxlLmdldFNjcm9sbERpbWVuc2lvbnMoKTtcblx0XHRjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHNjcm9sbGFibGUuZ2V0Q3VycmVudFNjcm9sbFBvc2l0aW9uKCk7XG5cdFx0c3VwZXIoe1xuXHRcdFx0bGF6eVJlbmRlcjogb3B0aW9ucy5sYXp5UmVuZGVyLFxuXHRcdFx0aG9zdDogaG9zdCxcblx0XHRcdHNjcm9sbGJhclN0YXRlOiBuZXcgU2Nyb2xsYmFyU3RhdGUoXG5cdFx0XHRcdChvcHRpb25zLmhvcml6b250YWxIYXNBcnJvd3MgPyBvcHRpb25zLmFycm93U2l6ZSA6IDApLFxuXHRcdFx0XHQob3B0aW9ucy5ob3Jpem9udGFsID09PSBTY3JvbGxiYXJWaXNpYmlsaXR5LkhpZGRlbiA/IDAgOiBvcHRpb25zLmhvcml6b250YWxTY3JvbGxiYXJTaXplKSxcblx0XHRcdFx0KG9wdGlvbnMudmVydGljYWwgPT09IFNjcm9sbGJhclZpc2liaWxpdHkuSGlkZGVuID8gMCA6IG9wdGlvbnMudmVydGljYWxTY3JvbGxiYXJTaXplKSxcblx0XHRcdFx0c2Nyb2xsRGltZW5zaW9ucy53aWR0aCxcblx0XHRcdFx0c2Nyb2xsRGltZW5zaW9ucy5zY3JvbGxXaWR0aCxcblx0XHRcdFx0c2Nyb2xsUG9zaXRpb24uc2Nyb2xsTGVmdFxuXHRcdFx0KSxcblx0XHRcdHZpc2liaWxpdHk6IG9wdGlvbnMuaG9yaXpvbnRhbCxcblx0XHRcdGV4dHJhU2Nyb2xsYmFyQ2xhc3NOYW1lOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHRzY3JvbGxhYmxlOiBzY3JvbGxhYmxlLFxuXHRcdFx0c2Nyb2xsQnlQYWdlOiBvcHRpb25zLnNjcm9sbEJ5UGFnZVxuXHRcdH0pO1xuXG5cdFx0aWYgKG9wdGlvbnMuaG9yaXpvbnRhbEhhc0Fycm93cykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdob3Jpem9udGFsSGFzQXJyb3dzIGlzIG5vdCBzdXBwb3J0ZWQgaW4geHRlcm0uanMnKTtcblx0XHRcdC8vIGNvbnN0IGFycm93RGVsdGEgPSAob3B0aW9ucy5hcnJvd1NpemUgLSBBUlJPV19JTUdfU0laRSkgLyAyO1xuXHRcdFx0Ly8gY29uc3Qgc2Nyb2xsYmFyRGVsdGEgPSAob3B0aW9ucy5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSAtIEFSUk9XX0lNR19TSVpFKSAvIDI7XG5cblx0XHRcdC8vIHRoaXMuX2NyZWF0ZUFycm93KHtcblx0XHRcdC8vIFx0Y2xhc3NOYW1lOiAnc2NyYScsXG5cdFx0XHQvLyBcdGljb246IENvZGljb24uc2Nyb2xsYmFyQnV0dG9uTGVmdCxcblx0XHRcdC8vIFx0dG9wOiBzY3JvbGxiYXJEZWx0YSxcblx0XHRcdC8vIFx0bGVmdDogYXJyb3dEZWx0YSxcblx0XHRcdC8vIFx0Ym90dG9tOiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdHJpZ2h0OiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdGJnV2lkdGg6IG9wdGlvbnMuYXJyb3dTaXplLFxuXHRcdFx0Ly8gXHRiZ0hlaWdodDogb3B0aW9ucy5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSxcblx0XHRcdC8vIFx0b25BY3RpdmF0ZTogKCkgPT4gdGhpcy5faG9zdC5vbk1vdXNlV2hlZWwobmV3IFN0YW5kYXJkV2hlZWxFdmVudChudWxsLCAxLCAwKSksXG5cdFx0XHQvLyB9KTtcblxuXHRcdFx0Ly8gdGhpcy5fY3JlYXRlQXJyb3coe1xuXHRcdFx0Ly8gXHRjbGFzc05hbWU6ICdzY3JhJyxcblx0XHRcdC8vIFx0aWNvbjogQ29kaWNvbi5zY3JvbGxiYXJCdXR0b25SaWdodCxcblx0XHRcdC8vIFx0dG9wOiBzY3JvbGxiYXJEZWx0YSxcblx0XHRcdC8vIFx0bGVmdDogdW5kZWZpbmVkLFxuXHRcdFx0Ly8gXHRib3R0b206IHVuZGVmaW5lZCxcblx0XHRcdC8vIFx0cmlnaHQ6IGFycm93RGVsdGEsXG5cdFx0XHQvLyBcdGJnV2lkdGg6IG9wdGlvbnMuYXJyb3dTaXplLFxuXHRcdFx0Ly8gXHRiZ0hlaWdodDogb3B0aW9ucy5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSxcblx0XHRcdC8vIFx0b25BY3RpdmF0ZTogKCkgPT4gdGhpcy5faG9zdC5vbk1vdXNlV2hlZWwobmV3IFN0YW5kYXJkV2hlZWxFdmVudChudWxsLCAtMSwgMCkpLFxuXHRcdFx0Ly8gfSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5fY3JlYXRlU2xpZGVyKE1hdGguZmxvb3IoKG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGJhclNpemUgLSBvcHRpb25zLmhvcml6b250YWxTbGlkZXJTaXplKSAvIDIpLCAwLCB1bmRlZmluZWQsIG9wdGlvbnMuaG9yaXpvbnRhbFNsaWRlclNpemUpO1xuXHR9XG5cblx0cHJvdGVjdGVkIF91cGRhdGVTbGlkZXIoc2xpZGVyU2l6ZTogbnVtYmVyLCBzbGlkZXJQb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5zbGlkZXIuc2V0V2lkdGgoc2xpZGVyU2l6ZSk7XG5cdFx0dGhpcy5zbGlkZXIuc2V0TGVmdChzbGlkZXJQb3NpdGlvbik7XG5cdH1cblxuXHRwcm90ZWN0ZWQgX3JlbmRlckRvbU5vZGUobGFyZ2VTaXplOiBudW1iZXIsIHNtYWxsU2l6ZTogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGhpcy5kb21Ob2RlLnNldFdpZHRoKGxhcmdlU2l6ZSk7XG5cdFx0dGhpcy5kb21Ob2RlLnNldEhlaWdodChzbWFsbFNpemUpO1xuXHRcdHRoaXMuZG9tTm9kZS5zZXRMZWZ0KDApO1xuXHRcdHRoaXMuZG9tTm9kZS5zZXRCb3R0b20oMCk7XG5cdH1cblxuXHRwdWJsaWMgb25EaWRTY3JvbGwoZTogU2Nyb2xsRXZlbnQpOiBib29sZWFuIHtcblx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0aGlzLl9vbkVsZW1lbnRTY3JvbGxTaXplKGUuc2Nyb2xsV2lkdGgpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0aGlzLl9vbkVsZW1lbnRTY3JvbGxQb3NpdGlvbihlLnNjcm9sbExlZnQpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0aGlzLl9vbkVsZW1lbnRTaXplKGUud2lkdGgpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblx0XHRyZXR1cm4gdGhpcy5fc2hvdWxkUmVuZGVyO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9wb2ludGVyRG93blJlbGF0aXZlUG9zaXRpb24ob2Zmc2V0WDogbnVtYmVyLCBvZmZzZXRZOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdHJldHVybiBvZmZzZXRYO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9zbGlkZXJQb2ludGVyUG9zaXRpb24oZTogSVNpbXBsaWZpZWRQb2ludGVyRXZlbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBlLnBhZ2VYO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9zbGlkZXJPcnRob2dvbmFsUG9pbnRlclBvc2l0aW9uKGU6IElTaW1wbGlmaWVkUG9pbnRlckV2ZW50KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gZS5wYWdlWTtcblx0fVxuXG5cdHByb3RlY3RlZCBfdXBkYXRlU2Nyb2xsYmFyU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLnNsaWRlci5zZXRIZWlnaHQoc2l6ZSk7XG5cdH1cblxuXHRwdWJsaWMgd3JpdGVTY3JvbGxQb3NpdGlvbih0YXJnZXQ6IElOZXdTY3JvbGxQb3NpdGlvbiwgc2Nyb2xsUG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuXHRcdHRhcmdldC5zY3JvbGxMZWZ0ID0gc2Nyb2xsUG9zaXRpb247XG5cdH1cblxuXHRwdWJsaWMgdXBkYXRlT3B0aW9ucyhvcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudFJlc29sdmVkT3B0aW9ucyk6IHZvaWQge1xuXHRcdHRoaXMudXBkYXRlU2Nyb2xsYmFyU2l6ZShvcHRpb25zLmhvcml6b250YWwgPT09IFNjcm9sbGJhclZpc2liaWxpdHkuSGlkZGVuID8gMCA6IG9wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGJhclNpemUpO1xuXHRcdHRoaXMuX3Njcm9sbGJhclN0YXRlLnNldE9wcG9zaXRlU2Nyb2xsYmFyU2l6ZShvcHRpb25zLnZlcnRpY2FsID09PSBTY3JvbGxiYXJWaXNpYmlsaXR5LkhpZGRlbiA/IDAgOiBvcHRpb25zLnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSk7XG5cdFx0dGhpcy5fdmlzaWJpbGl0eUNvbnRyb2xsZXIuc2V0VmlzaWJpbGl0eShvcHRpb25zLmhvcml6b250YWwpO1xuXHRcdHRoaXMuX3Njcm9sbEJ5UGFnZSA9IG9wdGlvbnMuc2Nyb2xsQnlQYWdlO1xuXHR9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IEFic3RyYWN0U2Nyb2xsYmFyLCBJU2ltcGxpZmllZFBvaW50ZXJFdmVudCwgU2Nyb2xsYmFySG9zdCB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvYWJzdHJhY3RTY3JvbGxiYXInO1xuaW1wb3J0IHsgU2Nyb2xsYWJsZUVsZW1lbnRSZXNvbHZlZE9wdGlvbnMgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL3Njcm9sbGFibGVFbGVtZW50T3B0aW9ucyc7XG5pbXBvcnQgeyBTY3JvbGxiYXJTdGF0ZSB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvc2Nyb2xsYmFyU3RhdGUnO1xuaW1wb3J0IHsgSU5ld1Njcm9sbFBvc2l0aW9uLCBTY3JvbGxhYmxlLCBTY3JvbGxiYXJWaXNpYmlsaXR5LCBTY3JvbGxFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3Njcm9sbGFibGUnO1xuXG5cblxuZXhwb3J0IGNsYXNzIFZlcnRpY2FsU2Nyb2xsYmFyIGV4dGVuZHMgQWJzdHJhY3RTY3JvbGxiYXIge1xuXG5cdGNvbnN0cnVjdG9yKHNjcm9sbGFibGU6IFNjcm9sbGFibGUsIG9wdGlvbnM6IFNjcm9sbGFibGVFbGVtZW50UmVzb2x2ZWRPcHRpb25zLCBob3N0OiBTY3JvbGxiYXJIb3N0KSB7XG5cdFx0Y29uc3Qgc2Nyb2xsRGltZW5zaW9ucyA9IHNjcm9sbGFibGUuZ2V0U2Nyb2xsRGltZW5zaW9ucygpO1xuXHRcdGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gc2Nyb2xsYWJsZS5nZXRDdXJyZW50U2Nyb2xsUG9zaXRpb24oKTtcblx0XHRzdXBlcih7XG5cdFx0XHRsYXp5UmVuZGVyOiBvcHRpb25zLmxhenlSZW5kZXIsXG5cdFx0XHRob3N0OiBob3N0LFxuXHRcdFx0c2Nyb2xsYmFyU3RhdGU6IG5ldyBTY3JvbGxiYXJTdGF0ZShcblx0XHRcdFx0KG9wdGlvbnMudmVydGljYWxIYXNBcnJvd3MgPyBvcHRpb25zLmFycm93U2l6ZSA6IDApLFxuXHRcdFx0XHQob3B0aW9ucy52ZXJ0aWNhbCA9PT0gU2Nyb2xsYmFyVmlzaWJpbGl0eS5IaWRkZW4gPyAwIDogb3B0aW9ucy52ZXJ0aWNhbFNjcm9sbGJhclNpemUpLFxuXHRcdFx0XHQvLyBnaXZlIHByaW9yaXR5IHRvIHZlcnRpY2FsIHNjcm9sbCBiYXIgb3ZlciBob3Jpem9udGFsIGFuZCBsZXQgaXQgc2Nyb2xsIGFsbCB0aGUgd2F5IHRvIHRoZSBib3R0b21cblx0XHRcdFx0MCxcblx0XHRcdFx0c2Nyb2xsRGltZW5zaW9ucy5oZWlnaHQsXG5cdFx0XHRcdHNjcm9sbERpbWVuc2lvbnMuc2Nyb2xsSGVpZ2h0LFxuXHRcdFx0XHRzY3JvbGxQb3NpdGlvbi5zY3JvbGxUb3Bcblx0XHRcdCksXG5cdFx0XHR2aXNpYmlsaXR5OiBvcHRpb25zLnZlcnRpY2FsLFxuXHRcdFx0ZXh0cmFTY3JvbGxiYXJDbGFzc05hbWU6ICd2ZXJ0aWNhbCcsXG5cdFx0XHRzY3JvbGxhYmxlOiBzY3JvbGxhYmxlLFxuXHRcdFx0c2Nyb2xsQnlQYWdlOiBvcHRpb25zLnNjcm9sbEJ5UGFnZVxuXHRcdH0pO1xuXG5cdFx0aWYgKG9wdGlvbnMudmVydGljYWxIYXNBcnJvd3MpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaG9yaXpvbnRhbEhhc0Fycm93cyBpcyBub3Qgc3VwcG9ydGVkIGluIHh0ZXJtLmpzJyk7XG5cdFx0XHQvLyBjb25zdCBhcnJvd0RlbHRhID0gKG9wdGlvbnMuYXJyb3dTaXplIC0gQVJST1dfSU1HX1NJWkUpIC8gMjtcblx0XHRcdC8vIGNvbnN0IHNjcm9sbGJhckRlbHRhID0gKG9wdGlvbnMudmVydGljYWxTY3JvbGxiYXJTaXplIC0gQVJST1dfSU1HX1NJWkUpIC8gMjtcblxuXHRcdFx0Ly8gdGhpcy5fY3JlYXRlQXJyb3coe1xuXHRcdFx0Ly8gXHRjbGFzc05hbWU6ICdzY3JhJyxcblx0XHRcdC8vIFx0aWNvbjogQ29kaWNvbi5zY3JvbGxiYXJCdXR0b25VcCxcblx0XHRcdC8vIFx0dG9wOiBhcnJvd0RlbHRhLFxuXHRcdFx0Ly8gXHRsZWZ0OiBzY3JvbGxiYXJEZWx0YSxcblx0XHRcdC8vIFx0Ym90dG9tOiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdHJpZ2h0OiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdGJnV2lkdGg6IG9wdGlvbnMudmVydGljYWxTY3JvbGxiYXJTaXplLFxuXHRcdFx0Ly8gXHRiZ0hlaWdodDogb3B0aW9ucy5hcnJvd1NpemUsXG5cdFx0XHQvLyBcdG9uQWN0aXZhdGU6ICgpID0+IHRoaXMuX2hvc3Qub25Nb3VzZVdoZWVsKG5ldyBTdGFuZGFyZFdoZWVsRXZlbnQobnVsbCwgMCwgMSkpLFxuXHRcdFx0Ly8gfSk7XG5cblx0XHRcdC8vIHRoaXMuX2NyZWF0ZUFycm93KHtcblx0XHRcdC8vIFx0Y2xhc3NOYW1lOiAnc2NyYScsXG5cdFx0XHQvLyBcdGljb246IENvZGljb24uc2Nyb2xsYmFyQnV0dG9uRG93bixcblx0XHRcdC8vIFx0dG9wOiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdGxlZnQ6IHNjcm9sbGJhckRlbHRhLFxuXHRcdFx0Ly8gXHRib3R0b206IGFycm93RGVsdGEsXG5cdFx0XHQvLyBcdHJpZ2h0OiB1bmRlZmluZWQsXG5cdFx0XHQvLyBcdGJnV2lkdGg6IG9wdGlvbnMudmVydGljYWxTY3JvbGxiYXJTaXplLFxuXHRcdFx0Ly8gXHRiZ0hlaWdodDogb3B0aW9ucy5hcnJvd1NpemUsXG5cdFx0XHQvLyBcdG9uQWN0aXZhdGU6ICgpID0+IHRoaXMuX2hvc3Qub25Nb3VzZVdoZWVsKG5ldyBTdGFuZGFyZFdoZWVsRXZlbnQobnVsbCwgMCwgLTEpKSxcblx0XHRcdC8vIH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuX2NyZWF0ZVNsaWRlcigwLCBNYXRoLmZsb29yKChvcHRpb25zLnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSAtIG9wdGlvbnMudmVydGljYWxTbGlkZXJTaXplKSAvIDIpLCBvcHRpb25zLnZlcnRpY2FsU2xpZGVyU2l6ZSwgdW5kZWZpbmVkKTtcblx0fVxuXG5cdHByb3RlY3RlZCBfdXBkYXRlU2xpZGVyKHNsaWRlclNpemU6IG51bWJlciwgc2xpZGVyUG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMuc2xpZGVyLnNldEhlaWdodChzbGlkZXJTaXplKTtcblx0XHR0aGlzLnNsaWRlci5zZXRUb3Aoc2xpZGVyUG9zaXRpb24pO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9yZW5kZXJEb21Ob2RlKGxhcmdlU2l6ZTogbnVtYmVyLCBzbWFsbFNpemU6IG51bWJlcik6IHZvaWQge1xuXHRcdHRoaXMuZG9tTm9kZS5zZXRXaWR0aChzbWFsbFNpemUpO1xuXHRcdHRoaXMuZG9tTm9kZS5zZXRIZWlnaHQobGFyZ2VTaXplKTtcblx0XHR0aGlzLmRvbU5vZGUuc2V0UmlnaHQoMCk7XG5cdFx0dGhpcy5kb21Ob2RlLnNldFRvcCgwKTtcblx0fVxuXG5cdHB1YmxpYyBvbkRpZFNjcm9sbChlOiBTY3JvbGxFdmVudCk6IGJvb2xlYW4ge1xuXHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRoaXMuX29uRWxlbWVudFNjcm9sbFNpemUoZS5zY3JvbGxIZWlnaHQpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblx0XHR0aGlzLl9zaG91bGRSZW5kZXIgPSB0aGlzLl9vbkVsZW1lbnRTY3JvbGxQb3NpdGlvbihlLnNjcm9sbFRvcCkgfHwgdGhpcy5fc2hvdWxkUmVuZGVyO1xuXHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRoaXMuX29uRWxlbWVudFNpemUoZS5oZWlnaHQpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblx0XHRyZXR1cm4gdGhpcy5fc2hvdWxkUmVuZGVyO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9wb2ludGVyRG93blJlbGF0aXZlUG9zaXRpb24ob2Zmc2V0WDogbnVtYmVyLCBvZmZzZXRZOiBudW1iZXIpOiBudW1iZXIge1xuXHRcdHJldHVybiBvZmZzZXRZO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9zbGlkZXJQb2ludGVyUG9zaXRpb24oZTogSVNpbXBsaWZpZWRQb2ludGVyRXZlbnQpOiBudW1iZXIge1xuXHRcdHJldHVybiBlLnBhZ2VZO1xuXHR9XG5cblx0cHJvdGVjdGVkIF9zbGlkZXJPcnRob2dvbmFsUG9pbnRlclBvc2l0aW9uKGU6IElTaW1wbGlmaWVkUG9pbnRlckV2ZW50KTogbnVtYmVyIHtcblx0XHRyZXR1cm4gZS5wYWdlWDtcblx0fVxuXG5cdHByb3RlY3RlZCBfdXBkYXRlU2Nyb2xsYmFyU2l6ZShzaXplOiBudW1iZXIpOiB2b2lkIHtcblx0XHR0aGlzLnNsaWRlci5zZXRXaWR0aChzaXplKTtcblx0fVxuXG5cdHB1YmxpYyB3cml0ZVNjcm9sbFBvc2l0aW9uKHRhcmdldDogSU5ld1Njcm9sbFBvc2l0aW9uLCBzY3JvbGxQb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG5cdFx0dGFyZ2V0LnNjcm9sbFRvcCA9IHNjcm9sbFBvc2l0aW9uO1xuXHR9XG5cblx0cHVibGljIHVwZGF0ZU9wdGlvbnMob3B0aW9uczogU2Nyb2xsYWJsZUVsZW1lbnRSZXNvbHZlZE9wdGlvbnMpOiB2b2lkIHtcblx0XHR0aGlzLnVwZGF0ZVNjcm9sbGJhclNpemUob3B0aW9ucy52ZXJ0aWNhbCA9PT0gU2Nyb2xsYmFyVmlzaWJpbGl0eS5IaWRkZW4gPyAwIDogb3B0aW9ucy52ZXJ0aWNhbFNjcm9sbGJhclNpemUpO1xuXHRcdC8vIGdpdmUgcHJpb3JpdHkgdG8gdmVydGljYWwgc2Nyb2xsIGJhciBvdmVyIGhvcml6b250YWwgYW5kIGxldCBpdCBzY3JvbGwgYWxsIHRoZSB3YXkgdG8gdGhlIGJvdHRvbVxuXHRcdHRoaXMuX3Njcm9sbGJhclN0YXRlLnNldE9wcG9zaXRlU2Nyb2xsYmFyU2l6ZSgwKTtcblx0XHR0aGlzLl92aXNpYmlsaXR5Q29udHJvbGxlci5zZXRWaXNpYmlsaXR5KG9wdGlvbnMudmVydGljYWwpO1xuXHRcdHRoaXMuX3Njcm9sbEJ5UGFnZSA9IG9wdGlvbnMuc2Nyb2xsQnlQYWdlO1xuXHR9XG5cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgZ2V0Wm9vbUZhY3RvciwgaXNDaHJvbWUgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvYnJvd3Nlcic7XG5pbXBvcnQgKiBhcyBkb20gZnJvbSAndnMvYmFzZS9icm93c2VyL2RvbSc7XG5pbXBvcnQgeyBGYXN0RG9tTm9kZSwgY3JlYXRlRmFzdERvbU5vZGUgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvZmFzdERvbU5vZGUnO1xuaW1wb3J0IHsgSU1vdXNlRXZlbnQsIElNb3VzZVdoZWVsRXZlbnQsIFN0YW5kYXJkV2hlZWxFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9tb3VzZUV2ZW50JztcbmltcG9ydCB7IFNjcm9sbGJhckhvc3QgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL2Fic3RyYWN0U2Nyb2xsYmFyJztcbmltcG9ydCB7IEhvcml6b250YWxTY3JvbGxiYXIgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL2hvcml6b250YWxTY3JvbGxiYXInO1xuaW1wb3J0IHsgU2Nyb2xsYWJsZUVsZW1lbnRDaGFuZ2VPcHRpb25zLCBTY3JvbGxhYmxlRWxlbWVudENyZWF0aW9uT3B0aW9ucywgU2Nyb2xsYWJsZUVsZW1lbnRSZXNvbHZlZE9wdGlvbnMgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvdWkvc2Nyb2xsYmFyL3Njcm9sbGFibGVFbGVtZW50T3B0aW9ucyc7XG5pbXBvcnQgeyBWZXJ0aWNhbFNjcm9sbGJhciB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvdmVydGljYWxTY3JvbGxiYXInO1xuaW1wb3J0IHsgV2lkZ2V0IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3VpL3dpZGdldCc7XG5pbXBvcnQgeyBUaW1lb3V0VGltZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9hc3luYyc7XG5pbXBvcnQgeyBFbWl0dGVyLCBFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcbmltcG9ydCB7IElEaXNwb3NhYmxlLCBkaXNwb3NlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCAqIGFzIHBsYXRmb3JtIGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3BsYXRmb3JtJztcbmltcG9ydCB7IElOZXdTY3JvbGxEaW1lbnNpb25zLCBJTmV3U2Nyb2xsUG9zaXRpb24sIElTY3JvbGxEaW1lbnNpb25zLCBJU2Nyb2xsUG9zaXRpb24sIFNjcm9sbEV2ZW50LCBTY3JvbGxhYmxlLCBTY3JvbGxiYXJWaXNpYmlsaXR5IH0gZnJvbSAndnMvYmFzZS9jb21tb24vc2Nyb2xsYWJsZSc7XG4vLyBpbXBvcnQgJ3ZzL2NzcyEuL21lZGlhL3Njcm9sbGJhcnMnO1xuXG5jb25zdCBISURFX1RJTUVPVVQgPSA1MDA7XG5jb25zdCBTQ1JPTExfV0hFRUxfU0VOU0lUSVZJVFkgPSA1MDtcbmNvbnN0IFNDUk9MTF9XSEVFTF9TTU9PVEhfU0NST0xMX0VOQUJMRUQgPSB0cnVlO1xuXG5leHBvcnQgaW50ZXJmYWNlIElPdmVydmlld1J1bGVyTGF5b3V0SW5mbyB7XG5cdHBhcmVudDogSFRNTEVsZW1lbnQ7XG5cdGluc2VydEJlZm9yZTogSFRNTEVsZW1lbnQ7XG59XG5cbmNsYXNzIE1vdXNlV2hlZWxDbGFzc2lmaWVySXRlbSB7XG5cdHB1YmxpYyB0aW1lc3RhbXA6IG51bWJlcjtcblx0cHVibGljIGRlbHRhWDogbnVtYmVyO1xuXHRwdWJsaWMgZGVsdGFZOiBudW1iZXI7XG5cdHB1YmxpYyBzY29yZTogbnVtYmVyO1xuXG5cdGNvbnN0cnVjdG9yKHRpbWVzdGFtcDogbnVtYmVyLCBkZWx0YVg6IG51bWJlciwgZGVsdGFZOiBudW1iZXIpIHtcblx0XHR0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcblx0XHR0aGlzLmRlbHRhWCA9IGRlbHRhWDtcblx0XHR0aGlzLmRlbHRhWSA9IGRlbHRhWTtcblx0XHR0aGlzLnNjb3JlID0gMDtcblx0fVxufVxuXG5leHBvcnQgY2xhc3MgTW91c2VXaGVlbENsYXNzaWZpZXIge1xuXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSU5TVEFOQ0UgPSBuZXcgTW91c2VXaGVlbENsYXNzaWZpZXIoKTtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9jYXBhY2l0eTogbnVtYmVyO1xuXHRwcml2YXRlIF9tZW1vcnk6IE1vdXNlV2hlZWxDbGFzc2lmaWVySXRlbVtdO1xuXHRwcml2YXRlIF9mcm9udDogbnVtYmVyO1xuXHRwcml2YXRlIF9yZWFyOiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dGhpcy5fY2FwYWNpdHkgPSA1O1xuXHRcdHRoaXMuX21lbW9yeSA9IFtdO1xuXHRcdHRoaXMuX2Zyb250ID0gLTE7XG5cdFx0dGhpcy5fcmVhciA9IC0xO1xuXHR9XG5cblx0cHVibGljIGlzUGh5c2ljYWxNb3VzZVdoZWVsKCk6IGJvb2xlYW4ge1xuXHRcdGlmICh0aGlzLl9mcm9udCA9PT0gLTEgJiYgdGhpcy5fcmVhciA9PT0gLTEpIHtcblx0XHRcdC8vIG5vIGVsZW1lbnRzXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gMC41ICogbGFzdCArIDAuMjUgKiAybmQgbGFzdCArIDAuMTI1ICogM3JkIGxhc3QgKyAuLi5cblx0XHRsZXQgcmVtYWluaW5nSW5mbHVlbmNlID0gMTtcblx0XHRsZXQgc2NvcmUgPSAwO1xuXHRcdGxldCBpdGVyYXRpb24gPSAxO1xuXG5cdFx0bGV0IGluZGV4ID0gdGhpcy5fcmVhcjtcblx0XHRkbyB7XG5cdFx0XHRjb25zdCBpbmZsdWVuY2UgPSAoaW5kZXggPT09IHRoaXMuX2Zyb250ID8gcmVtYWluaW5nSW5mbHVlbmNlIDogTWF0aC5wb3coMiwgLWl0ZXJhdGlvbikpO1xuXHRcdFx0cmVtYWluaW5nSW5mbHVlbmNlIC09IGluZmx1ZW5jZTtcblx0XHRcdHNjb3JlICs9IHRoaXMuX21lbW9yeVtpbmRleF0uc2NvcmUgKiBpbmZsdWVuY2U7XG5cblx0XHRcdGlmIChpbmRleCA9PT0gdGhpcy5fZnJvbnQpIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHRcdGluZGV4ID0gKHRoaXMuX2NhcGFjaXR5ICsgaW5kZXggLSAxKSAlIHRoaXMuX2NhcGFjaXR5O1xuXHRcdFx0aXRlcmF0aW9uKys7XG5cdFx0fSB3aGlsZSAodHJ1ZSk7XG5cblx0XHRyZXR1cm4gKHNjb3JlIDw9IDAuNSk7XG5cdH1cblxuXHRwdWJsaWMgYWNjZXB0U3RhbmRhcmRXaGVlbEV2ZW50KGU6IFN0YW5kYXJkV2hlZWxFdmVudCk6IHZvaWQge1xuXHRcdGlmIChpc0Nocm9tZSkge1xuXHRcdFx0Y29uc3QgdGFyZ2V0V2luZG93ID0gZG9tLmdldFdpbmRvdyhlLmJyb3dzZXJFdmVudCk7XG5cdFx0XHRjb25zdCBwYWdlWm9vbUZhY3RvciA9IGdldFpvb21GYWN0b3IodGFyZ2V0V2luZG93KTtcblx0XHRcdC8vIE9uIENocm9tZSwgdGhlIGluY29taW5nIGRlbHRhIGV2ZW50cyBhcmUgbXVsdGlwbGllZCB3aXRoIHRoZSBPUyB6b29tIGZhY3Rvci5cblx0XHRcdC8vIFRoZSBPUyB6b29tIGZhY3RvciBjYW4gYmUgcmV2ZXJzZSBlbmdpbmVlcmVkIGJ5IHVzaW5nIHRoZSBkZXZpY2UgcGl4ZWwgcmF0aW8gYW5kIHRoZSBjb25maWd1cmVkIHpvb20gZmFjdG9yIGludG8gYWNjb3VudC5cblx0XHRcdHRoaXMuYWNjZXB0KERhdGUubm93KCksIGUuZGVsdGFYICogcGFnZVpvb21GYWN0b3IsIGUuZGVsdGFZICogcGFnZVpvb21GYWN0b3IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmFjY2VwdChEYXRlLm5vdygpLCBlLmRlbHRhWCwgZS5kZWx0YVkpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBhY2NlcHQodGltZXN0YW1wOiBudW1iZXIsIGRlbHRhWDogbnVtYmVyLCBkZWx0YVk6IG51bWJlcik6IHZvaWQge1xuXHRcdGxldCBwcmV2aW91c0l0ZW0gPSBudWxsO1xuXHRcdGNvbnN0IGl0ZW0gPSBuZXcgTW91c2VXaGVlbENsYXNzaWZpZXJJdGVtKHRpbWVzdGFtcCwgZGVsdGFYLCBkZWx0YVkpO1xuXG5cdFx0aWYgKHRoaXMuX2Zyb250ID09PSAtMSAmJiB0aGlzLl9yZWFyID09PSAtMSkge1xuXHRcdFx0dGhpcy5fbWVtb3J5WzBdID0gaXRlbTtcblx0XHRcdHRoaXMuX2Zyb250ID0gMDtcblx0XHRcdHRoaXMuX3JlYXIgPSAwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwcmV2aW91c0l0ZW0gPSB0aGlzLl9tZW1vcnlbdGhpcy5fcmVhcl07XG5cblx0XHRcdHRoaXMuX3JlYXIgPSAodGhpcy5fcmVhciArIDEpICUgdGhpcy5fY2FwYWNpdHk7XG5cdFx0XHRpZiAodGhpcy5fcmVhciA9PT0gdGhpcy5fZnJvbnQpIHtcblx0XHRcdFx0Ly8gRHJvcCBvbGRlc3Rcblx0XHRcdFx0dGhpcy5fZnJvbnQgPSAodGhpcy5fZnJvbnQgKyAxKSAlIHRoaXMuX2NhcGFjaXR5O1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fbWVtb3J5W3RoaXMuX3JlYXJdID0gaXRlbTtcblx0XHR9XG5cblx0XHRpdGVtLnNjb3JlID0gdGhpcy5fY29tcHV0ZVNjb3JlKGl0ZW0sIHByZXZpb3VzSXRlbSk7XG5cdH1cblxuXHQvKipcblx0ICogQSBzY29yZSBiZXR3ZWVuIDAgYW5kIDEgZm9yIGBpdGVtYC5cblx0ICogIC0gYSBzY29yZSB0b3dhcmRzIDAgaW5kaWNhdGVzIHRoYXQgdGhlIHNvdXJjZSBhcHBlYXJzIHRvIGJlIGEgcGh5c2ljYWwgbW91c2Ugd2hlZWxcblx0ICogIC0gYSBzY29yZSB0b3dhcmRzIDEgaW5kaWNhdGVzIHRoYXQgdGhlIHNvdXJjZSBhcHBlYXJzIHRvIGJlIGEgdG91Y2hwYWQgb3IgbWFnaWMgbW91c2UsIGV0Yy5cblx0ICovXG5cdHByaXZhdGUgX2NvbXB1dGVTY29yZShpdGVtOiBNb3VzZVdoZWVsQ2xhc3NpZmllckl0ZW0sIHByZXZpb3VzSXRlbTogTW91c2VXaGVlbENsYXNzaWZpZXJJdGVtIHwgbnVsbCk6IG51bWJlciB7XG5cblx0XHRpZiAoTWF0aC5hYnMoaXRlbS5kZWx0YVgpID4gMCAmJiBNYXRoLmFicyhpdGVtLmRlbHRhWSkgPiAwKSB7XG5cdFx0XHQvLyBib3RoIGF4ZXMgZXhlcmNpc2VkID0+IGRlZmluaXRlbHkgbm90IGEgcGh5c2ljYWwgbW91c2Ugd2hlZWxcblx0XHRcdHJldHVybiAxO1xuXHRcdH1cblxuXHRcdGxldCBzY29yZTogbnVtYmVyID0gMC41O1xuXG5cdFx0aWYgKCF0aGlzLl9pc0FsbW9zdEludChpdGVtLmRlbHRhWCkgfHwgIXRoaXMuX2lzQWxtb3N0SW50KGl0ZW0uZGVsdGFZKSkge1xuXHRcdFx0Ly8gbm9uLWludGVnZXIgZGVsdGFzID0+IGluZGljYXRvciB0aGF0IHRoaXMgaXMgbm90IGEgcGh5c2ljYWwgbW91c2Ugd2hlZWxcblx0XHRcdHNjb3JlICs9IDAuMjU7XG5cdFx0fVxuXG5cdFx0Ly8gTm9uLWFjY2VsZXJhdGluZyBzY3JvbGwgPT4gaW5kaWNhdG9yIHRoYXQgdGhpcyBpcyBhIHBoeXNpY2FsIG1vdXNlIHdoZWVsXG5cdFx0Ly8gVGhlc2UgY2FuIGJlIGlkZW50aWZpZWQgYnkgc2VlaW5nIHdoZXRoZXIgdGhleSBhcmUgdGhlIG1vZHVsZSBvZiBvbmUgYW5vdGhlci5cblx0XHRpZiAocHJldmlvdXNJdGVtKSB7XG5cdFx0XHRjb25zdCBhYnNEZWx0YVggPSBNYXRoLmFicyhpdGVtLmRlbHRhWCk7XG5cdFx0XHRjb25zdCBhYnNEZWx0YVkgPSBNYXRoLmFicyhpdGVtLmRlbHRhWSk7XG5cblx0XHRcdGNvbnN0IGFic1ByZXZpb3VzRGVsdGFYID0gTWF0aC5hYnMocHJldmlvdXNJdGVtLmRlbHRhWCk7XG5cdFx0XHRjb25zdCBhYnNQcmV2aW91c0RlbHRhWSA9IE1hdGguYWJzKHByZXZpb3VzSXRlbS5kZWx0YVkpO1xuXG5cdFx0XHQvLyBNaW4gMSB0byBhdm9pZCBkaXZpc2lvbiBieSB6ZXJvLCBtb2R1bGUgMSB3aWxsIHN0aWxsIGJlIDAuXG5cdFx0XHRjb25zdCBtaW5EZWx0YVggPSBNYXRoLm1heChNYXRoLm1pbihhYnNEZWx0YVgsIGFic1ByZXZpb3VzRGVsdGFYKSwgMSk7XG5cdFx0XHRjb25zdCBtaW5EZWx0YVkgPSBNYXRoLm1heChNYXRoLm1pbihhYnNEZWx0YVksIGFic1ByZXZpb3VzRGVsdGFZKSwgMSk7XG5cblx0XHRcdGNvbnN0IG1heERlbHRhWCA9IE1hdGgubWF4KGFic0RlbHRhWCwgYWJzUHJldmlvdXNEZWx0YVgpO1xuXHRcdFx0Y29uc3QgbWF4RGVsdGFZID0gTWF0aC5tYXgoYWJzRGVsdGFZLCBhYnNQcmV2aW91c0RlbHRhWSk7XG5cblx0XHRcdGNvbnN0IGlzU2FtZU1vZHVsbyA9IChtYXhEZWx0YVggJSBtaW5EZWx0YVggPT09IDAgJiYgbWF4RGVsdGFZICUgbWluRGVsdGFZID09PSAwKTtcblx0XHRcdGlmIChpc1NhbWVNb2R1bG8pIHtcblx0XHRcdFx0c2NvcmUgLT0gMC41O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBNYXRoLm1pbihNYXRoLm1heChzY29yZSwgMCksIDEpO1xuXHR9XG5cblx0cHJpdmF0ZSBfaXNBbG1vc3RJbnQodmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IGRlbHRhID0gTWF0aC5hYnMoTWF0aC5yb3VuZCh2YWx1ZSkgLSB2YWx1ZSk7XG5cdFx0cmV0dXJuIChkZWx0YSA8IDAuMDEpO1xuXHR9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFNjcm9sbGFibGVFbGVtZW50IGV4dGVuZHMgV2lkZ2V0IHtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudFJlc29sdmVkT3B0aW9ucztcblx0cHJvdGVjdGVkIHJlYWRvbmx5IF9zY3JvbGxhYmxlOiBTY3JvbGxhYmxlO1xuXHRwcml2YXRlIHJlYWRvbmx5IF92ZXJ0aWNhbFNjcm9sbGJhcjogVmVydGljYWxTY3JvbGxiYXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2hvcml6b250YWxTY3JvbGxiYXI6IEhvcml6b250YWxTY3JvbGxiYXI7XG5cdHByaXZhdGUgcmVhZG9ubHkgX2RvbU5vZGU6IEhUTUxFbGVtZW50O1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX2xlZnRTaGFkb3dEb21Ob2RlOiBGYXN0RG9tTm9kZTxIVE1MRWxlbWVudD4gfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IF90b3BTaGFkb3dEb21Ob2RlOiBGYXN0RG9tTm9kZTxIVE1MRWxlbWVudD4gfCBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IF90b3BMZWZ0U2hhZG93RG9tTm9kZTogRmFzdERvbU5vZGU8SFRNTEVsZW1lbnQ+IHwgbnVsbDtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9saXN0ZW5PbkRvbU5vZGU6IEhUTUxFbGVtZW50O1xuXG5cdHByaXZhdGUgX21vdXNlV2hlZWxUb0Rpc3Bvc2U6IElEaXNwb3NhYmxlW107XG5cblx0cHJpdmF0ZSBfaXNEcmFnZ2luZzogYm9vbGVhbjtcblx0cHJpdmF0ZSBfbW91c2VJc092ZXI6IGJvb2xlYW47XG5cblx0cHJpdmF0ZSByZWFkb25seSBfaGlkZVRpbWVvdXQ6IFRpbWVvdXRUaW1lcjtcblx0cHJpdmF0ZSBfc2hvdWxkUmVuZGVyOiBib29sZWFuO1xuXG5cdHByaXZhdGUgX3JldmVhbE9uU2Nyb2xsOiBib29sZWFuO1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX29uU2Nyb2xsID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8U2Nyb2xsRXZlbnQ+KCkpO1xuXHRwdWJsaWMgcmVhZG9ubHkgb25TY3JvbGw6IEV2ZW50PFNjcm9sbEV2ZW50PiA9IHRoaXMuX29uU2Nyb2xsLmV2ZW50O1xuXG5cdHByaXZhdGUgcmVhZG9ubHkgX29uV2lsbFNjcm9sbCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPFNjcm9sbEV2ZW50PigpKTtcblx0cHVibGljIHJlYWRvbmx5IG9uV2lsbFNjcm9sbDogRXZlbnQ8U2Nyb2xsRXZlbnQ+ID0gdGhpcy5fb25XaWxsU2Nyb2xsLmV2ZW50O1xuXG5cdHB1YmxpYyBnZXQgb3B0aW9ucygpOiBSZWFkb25seTxTY3JvbGxhYmxlRWxlbWVudFJlc29sdmVkT3B0aW9ucz4ge1xuXHRcdHJldHVybiB0aGlzLl9vcHRpb25zO1xuXHR9XG5cblx0cHJvdGVjdGVkIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudENyZWF0aW9uT3B0aW9ucywgc2Nyb2xsYWJsZTogU2Nyb2xsYWJsZSkge1xuXHRcdHN1cGVyKCk7XG5cdFx0Ly8gSEFDSzogeHRlcm0uanMgY3Vycm5ldGx5IHJlcXVpcmVzIG92ZXJmbG93IHRvIGFsbG93IGRlY29yYXRpb25zIHRvIGVzY2FwZSB0aGUgY29udGFpbmVyXG5cdFx0Ly8gZWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXHRcdHRoaXMuX29wdGlvbnMgPSByZXNvbHZlT3B0aW9ucyhvcHRpb25zKTtcblx0XHR0aGlzLl9zY3JvbGxhYmxlID0gc2Nyb2xsYWJsZTtcblxuXHRcdHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3Njcm9sbGFibGUub25TY3JvbGwoKGUpID0+IHtcblx0XHRcdHRoaXMuX29uV2lsbFNjcm9sbC5maXJlKGUpO1xuXHRcdFx0dGhpcy5fb25EaWRTY3JvbGwoZSk7XG5cdFx0XHR0aGlzLl9vblNjcm9sbC5maXJlKGUpO1xuXHRcdH0pKTtcblxuXHRcdGNvbnN0IHNjcm9sbGJhckhvc3Q6IFNjcm9sbGJhckhvc3QgPSB7XG5cdFx0XHRvbk1vdXNlV2hlZWw6IChtb3VzZVdoZWVsRXZlbnQ6IFN0YW5kYXJkV2hlZWxFdmVudCkgPT4gdGhpcy5fb25Nb3VzZVdoZWVsKG1vdXNlV2hlZWxFdmVudCksXG5cdFx0XHRvbkRyYWdTdGFydDogKCkgPT4gdGhpcy5fb25EcmFnU3RhcnQoKSxcblx0XHRcdG9uRHJhZ0VuZDogKCkgPT4gdGhpcy5fb25EcmFnRW5kKCksXG5cdFx0fTtcblx0XHR0aGlzLl92ZXJ0aWNhbFNjcm9sbGJhciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBWZXJ0aWNhbFNjcm9sbGJhcih0aGlzLl9zY3JvbGxhYmxlLCB0aGlzLl9vcHRpb25zLCBzY3JvbGxiYXJIb3N0KSk7XG5cdFx0dGhpcy5faG9yaXpvbnRhbFNjcm9sbGJhciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBIb3Jpem9udGFsU2Nyb2xsYmFyKHRoaXMuX3Njcm9sbGFibGUsIHRoaXMuX29wdGlvbnMsIHNjcm9sbGJhckhvc3QpKTtcblxuXHRcdHRoaXMuX2RvbU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR0aGlzLl9kb21Ob2RlLmNsYXNzTmFtZSA9ICd4dGVybS1zY3JvbGxhYmxlLWVsZW1lbnQgJyArIHRoaXMuX29wdGlvbnMuY2xhc3NOYW1lO1xuXHRcdHRoaXMuX2RvbU5vZGUuc2V0QXR0cmlidXRlKCdyb2xlJywgJ3ByZXNlbnRhdGlvbicpO1xuXHRcdHRoaXMuX2RvbU5vZGUuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXHRcdC8vIEhBQ0s6IHh0ZXJtLmpzIGN1cnJuZXRseSByZXF1aXJlcyBvdmVyZmxvdyB0byBhbGxvdyBkZWNvcmF0aW9ucyB0byBlc2NhcGUgdGhlIGNvbnRhaW5lclxuXHRcdC8vIHRoaXMuX2RvbU5vZGUuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblx0XHR0aGlzLl9kb21Ob2RlLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXHRcdHRoaXMuX2RvbU5vZGUuYXBwZW5kQ2hpbGQodGhpcy5faG9yaXpvbnRhbFNjcm9sbGJhci5kb21Ob2RlLmRvbU5vZGUpO1xuXHRcdHRoaXMuX2RvbU5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fdmVydGljYWxTY3JvbGxiYXIuZG9tTm9kZS5kb21Ob2RlKTtcblxuXHRcdGlmICh0aGlzLl9vcHRpb25zLnVzZVNoYWRvd3MpIHtcblx0XHRcdHRoaXMuX2xlZnRTaGFkb3dEb21Ob2RlID0gY3JlYXRlRmFzdERvbU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuXHRcdFx0dGhpcy5fbGVmdFNoYWRvd0RvbU5vZGUuc2V0Q2xhc3NOYW1lKCdzaGFkb3cnKTtcblx0XHRcdHRoaXMuX2RvbU5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fbGVmdFNoYWRvd0RvbU5vZGUuZG9tTm9kZSk7XG5cblx0XHRcdHRoaXMuX3RvcFNoYWRvd0RvbU5vZGUgPSBjcmVhdGVGYXN0RG9tTm9kZShkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG5cdFx0XHR0aGlzLl90b3BTaGFkb3dEb21Ob2RlLnNldENsYXNzTmFtZSgnc2hhZG93Jyk7XG5cdFx0XHR0aGlzLl9kb21Ob2RlLmFwcGVuZENoaWxkKHRoaXMuX3RvcFNoYWRvd0RvbU5vZGUuZG9tTm9kZSk7XG5cblx0XHRcdHRoaXMuX3RvcExlZnRTaGFkb3dEb21Ob2RlID0gY3JlYXRlRmFzdERvbU5vZGUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuXHRcdFx0dGhpcy5fdG9wTGVmdFNoYWRvd0RvbU5vZGUuc2V0Q2xhc3NOYW1lKCdzaGFkb3cnKTtcblx0XHRcdHRoaXMuX2RvbU5vZGUuYXBwZW5kQ2hpbGQodGhpcy5fdG9wTGVmdFNoYWRvd0RvbU5vZGUuZG9tTm9kZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuX2xlZnRTaGFkb3dEb21Ob2RlID0gbnVsbDtcblx0XHRcdHRoaXMuX3RvcFNoYWRvd0RvbU5vZGUgPSBudWxsO1xuXHRcdFx0dGhpcy5fdG9wTGVmdFNoYWRvd0RvbU5vZGUgPSBudWxsO1xuXHRcdH1cblxuXHRcdHRoaXMuX2xpc3Rlbk9uRG9tTm9kZSA9IHRoaXMuX29wdGlvbnMubGlzdGVuT25Eb21Ob2RlIHx8IHRoaXMuX2RvbU5vZGU7XG5cblx0XHR0aGlzLl9tb3VzZVdoZWVsVG9EaXNwb3NlID0gW107XG5cdFx0dGhpcy5fc2V0TGlzdGVuaW5nVG9Nb3VzZVdoZWVsKHRoaXMuX29wdGlvbnMuaGFuZGxlTW91c2VXaGVlbCk7XG5cblx0XHR0aGlzLm9ubW91c2VvdmVyKHRoaXMuX2xpc3Rlbk9uRG9tTm9kZSwgKGUpID0+IHRoaXMuX29uTW91c2VPdmVyKGUpKTtcblx0XHR0aGlzLm9ubW91c2VsZWF2ZSh0aGlzLl9saXN0ZW5PbkRvbU5vZGUsIChlKSA9PiB0aGlzLl9vbk1vdXNlTGVhdmUoZSkpO1xuXG5cdFx0dGhpcy5faGlkZVRpbWVvdXQgPSB0aGlzLl9yZWdpc3RlcihuZXcgVGltZW91dFRpbWVyKCkpO1xuXHRcdHRoaXMuX2lzRHJhZ2dpbmcgPSBmYWxzZTtcblx0XHR0aGlzLl9tb3VzZUlzT3ZlciA9IGZhbHNlO1xuXG5cdFx0dGhpcy5fc2hvdWxkUmVuZGVyID0gdHJ1ZTtcblxuXHRcdHRoaXMuX3JldmVhbE9uU2Nyb2xsID0gdHJ1ZTtcblx0fVxuXG5cdHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuXHRcdHRoaXMuX21vdXNlV2hlZWxUb0Rpc3Bvc2UgPSBkaXNwb3NlKHRoaXMuX21vdXNlV2hlZWxUb0Rpc3Bvc2UpO1xuXHRcdHN1cGVyLmRpc3Bvc2UoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGhlIGdlbmVyYXRlZCAnc2Nyb2xsYWJsZScgZG9tIG5vZGVcblx0ICovXG5cdHB1YmxpYyBnZXREb21Ob2RlKCk6IEhUTUxFbGVtZW50IHtcblx0XHRyZXR1cm4gdGhpcy5fZG9tTm9kZTtcblx0fVxuXG5cdHB1YmxpYyBnZXRPdmVydmlld1J1bGVyTGF5b3V0SW5mbygpOiBJT3ZlcnZpZXdSdWxlckxheW91dEluZm8ge1xuXHRcdHJldHVybiB7XG5cdFx0XHRwYXJlbnQ6IHRoaXMuX2RvbU5vZGUsXG5cdFx0XHRpbnNlcnRCZWZvcmU6IHRoaXMuX3ZlcnRpY2FsU2Nyb2xsYmFyLmRvbU5vZGUuZG9tTm9kZSxcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIERlbGVnYXRlIGEgcG9pbnRlciBkb3duIGV2ZW50IHRvIHRoZSB2ZXJ0aWNhbCBzY3JvbGxiYXIuXG5cdCAqIFRoaXMgaXMgdG8gaGVscCB3aXRoIGNsaWNraW5nIHNvbWV3aGVyZSBlbHNlIGFuZCBoYXZpbmcgdGhlIHNjcm9sbGJhciByZWFjdC5cblx0ICovXG5cdHB1YmxpYyBkZWxlZ2F0ZVZlcnRpY2FsU2Nyb2xsYmFyUG9pbnRlckRvd24oYnJvd3NlckV2ZW50OiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcblx0XHR0aGlzLl92ZXJ0aWNhbFNjcm9sbGJhci5kZWxlZ2F0ZVBvaW50ZXJEb3duKGJyb3dzZXJFdmVudCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0U2Nyb2xsRGltZW5zaW9ucygpOiBJU2Nyb2xsRGltZW5zaW9ucyB7XG5cdFx0cmV0dXJuIHRoaXMuX3Njcm9sbGFibGUuZ2V0U2Nyb2xsRGltZW5zaW9ucygpO1xuXHR9XG5cblx0cHVibGljIHNldFNjcm9sbERpbWVuc2lvbnMoZGltZW5zaW9uczogSU5ld1Njcm9sbERpbWVuc2lvbnMpOiB2b2lkIHtcblx0XHR0aGlzLl9zY3JvbGxhYmxlLnNldFNjcm9sbERpbWVuc2lvbnMoZGltZW5zaW9ucywgZmFsc2UpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgY2xhc3MgbmFtZSBvZiB0aGUgc2Nyb2xsYWJsZSBlbGVtZW50LlxuXHQgKi9cblx0cHVibGljIHVwZGF0ZUNsYXNzTmFtZShuZXdDbGFzc05hbWU6IHN0cmluZyk6IHZvaWQge1xuXHRcdHRoaXMuX29wdGlvbnMuY2xhc3NOYW1lID0gbmV3Q2xhc3NOYW1lO1xuXHRcdC8vIERlZmF1bHRzIGFyZSBkaWZmZXJlbnQgb24gTWFjc1xuXHRcdGlmIChwbGF0Zm9ybS5pc01hY2ludG9zaCkge1xuXHRcdFx0dGhpcy5fb3B0aW9ucy5jbGFzc05hbWUgKz0gJyBtYWMnO1xuXHRcdH1cblx0XHR0aGlzLl9kb21Ob2RlLmNsYXNzTmFtZSA9ICd4dGVybS1zY3JvbGxhYmxlLWVsZW1lbnQgJyArIHRoaXMuX29wdGlvbnMuY2xhc3NOYW1lO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBzY3JvbGxiYXIuXG5cdCAqL1xuXHRwdWJsaWMgdXBkYXRlT3B0aW9ucyhuZXdPcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudENoYW5nZU9wdGlvbnMpOiB2b2lkIHtcblx0XHRpZiAodHlwZW9mIG5ld09wdGlvbnMuaGFuZGxlTW91c2VXaGVlbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuaGFuZGxlTW91c2VXaGVlbCA9IG5ld09wdGlvbnMuaGFuZGxlTW91c2VXaGVlbDtcblx0XHRcdHRoaXMuX3NldExpc3RlbmluZ1RvTW91c2VXaGVlbCh0aGlzLl9vcHRpb25zLmhhbmRsZU1vdXNlV2hlZWwpO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG5ld09wdGlvbnMubW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5fb3B0aW9ucy5tb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHkgPSBuZXdPcHRpb25zLm1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBuZXdPcHRpb25zLmZhc3RTY3JvbGxTZW5zaXRpdml0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5ID0gbmV3T3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHk7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgbmV3T3B0aW9ucy5zY3JvbGxQcmVkb21pbmFudEF4aXMgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHR0aGlzLl9vcHRpb25zLnNjcm9sbFByZWRvbWluYW50QXhpcyA9IG5ld09wdGlvbnMuc2Nyb2xsUHJlZG9taW5hbnRBeGlzO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG5ld09wdGlvbnMuaG9yaXpvbnRhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuaG9yaXpvbnRhbCA9IG5ld09wdGlvbnMuaG9yaXpvbnRhbDtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBuZXdPcHRpb25zLnZlcnRpY2FsICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5fb3B0aW9ucy52ZXJ0aWNhbCA9IG5ld09wdGlvbnMudmVydGljYWw7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgbmV3T3B0aW9ucy5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuaG9yaXpvbnRhbFNjcm9sbGJhclNpemUgPSBuZXdPcHRpb25zLmhvcml6b250YWxTY3JvbGxiYXJTaXplO1xuXHRcdH1cblx0XHRpZiAodHlwZW9mIG5ld09wdGlvbnMudmVydGljYWxTY3JvbGxiYXJTaXplICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0dGhpcy5fb3B0aW9ucy52ZXJ0aWNhbFNjcm9sbGJhclNpemUgPSBuZXdPcHRpb25zLnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZTtcblx0XHR9XG5cdFx0aWYgKHR5cGVvZiBuZXdPcHRpb25zLnNjcm9sbEJ5UGFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuX29wdGlvbnMuc2Nyb2xsQnlQYWdlID0gbmV3T3B0aW9ucy5zY3JvbGxCeVBhZ2U7XG5cdFx0fVxuXHRcdHRoaXMuX2hvcml6b250YWxTY3JvbGxiYXIudXBkYXRlT3B0aW9ucyh0aGlzLl9vcHRpb25zKTtcblx0XHR0aGlzLl92ZXJ0aWNhbFNjcm9sbGJhci51cGRhdGVPcHRpb25zKHRoaXMuX29wdGlvbnMpO1xuXG5cdFx0aWYgKCF0aGlzLl9vcHRpb25zLmxhenlSZW5kZXIpIHtcblx0XHRcdHRoaXMuX3JlbmRlcigpO1xuXHRcdH1cblx0fVxuXG5cdHB1YmxpYyBzZXRSZXZlYWxPblNjcm9sbCh2YWx1ZTogYm9vbGVhbikge1xuXHRcdHRoaXMuX3JldmVhbE9uU2Nyb2xsID0gdmFsdWU7XG5cdH1cblxuXHRwdWJsaWMgZGVsZWdhdGVTY3JvbGxGcm9tTW91c2VXaGVlbEV2ZW50KGJyb3dzZXJFdmVudDogSU1vdXNlV2hlZWxFdmVudCkge1xuXHRcdHRoaXMuX29uTW91c2VXaGVlbChuZXcgU3RhbmRhcmRXaGVlbEV2ZW50KGJyb3dzZXJFdmVudCkpO1xuXHR9XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0gbW91c2Ugd2hlZWwgc2Nyb2xsaW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0cHJpdmF0ZSBfc2V0TGlzdGVuaW5nVG9Nb3VzZVdoZWVsKHNob3VsZExpc3RlbjogYm9vbGVhbik6IHZvaWQge1xuXHRcdGNvbnN0IGlzTGlzdGVuaW5nID0gKHRoaXMuX21vdXNlV2hlZWxUb0Rpc3Bvc2UubGVuZ3RoID4gMCk7XG5cblx0XHRpZiAoaXNMaXN0ZW5pbmcgPT09IHNob3VsZExpc3Rlbikge1xuXHRcdFx0Ly8gTm8gY2hhbmdlXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcCBsaXN0ZW5pbmcgKGlmIG5lY2Vzc2FyeSlcblx0XHR0aGlzLl9tb3VzZVdoZWVsVG9EaXNwb3NlID0gZGlzcG9zZSh0aGlzLl9tb3VzZVdoZWVsVG9EaXNwb3NlKTtcblxuXHRcdC8vIFN0YXJ0IGxpc3RlbmluZyAoaWYgbmVjZXNzYXJ5KVxuXHRcdGlmIChzaG91bGRMaXN0ZW4pIHtcblx0XHRcdGNvbnN0IG9uTW91c2VXaGVlbCA9IChicm93c2VyRXZlbnQ6IElNb3VzZVdoZWVsRXZlbnQpID0+IHtcblx0XHRcdFx0dGhpcy5fb25Nb3VzZVdoZWVsKG5ldyBTdGFuZGFyZFdoZWVsRXZlbnQoYnJvd3NlckV2ZW50KSk7XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLl9tb3VzZVdoZWVsVG9EaXNwb3NlLnB1c2goZG9tLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLl9saXN0ZW5PbkRvbU5vZGUsIGRvbS5FdmVudFR5cGUuTU9VU0VfV0hFRUwsIG9uTW91c2VXaGVlbCwgeyBwYXNzaXZlOiBmYWxzZSB9KSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBfb25Nb3VzZVdoZWVsKGU6IFN0YW5kYXJkV2hlZWxFdmVudCk6IHZvaWQge1xuXHRcdGlmIChlLmJyb3dzZXJFdmVudD8uZGVmYXVsdFByZXZlbnRlZCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IGNsYXNzaWZpZXIgPSBNb3VzZVdoZWVsQ2xhc3NpZmllci5JTlNUQU5DRTtcblx0XHRpZiAoU0NST0xMX1dIRUVMX1NNT09USF9TQ1JPTExfRU5BQkxFRCkge1xuXHRcdFx0Y2xhc3NpZmllci5hY2NlcHRTdGFuZGFyZFdoZWVsRXZlbnQoZSk7XG5cdFx0fVxuXG5cdFx0Ly8gdXNlZnVsIGZvciBjcmVhdGluZyB1bml0IHRlc3RzOlxuXHRcdC8vIGNvbnNvbGUubG9nKGAke0RhdGUubm93KCl9LCAke2UuZGVsdGFZfSwgJHtlLmRlbHRhWH1gKTtcblxuXHRcdGxldCBkaWRTY3JvbGwgPSBmYWxzZTtcblxuXHRcdGlmIChlLmRlbHRhWSB8fCBlLmRlbHRhWCkge1xuXHRcdFx0bGV0IGRlbHRhWSA9IGUuZGVsdGFZICogdGhpcy5fb3B0aW9ucy5tb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk7XG5cdFx0XHRsZXQgZGVsdGFYID0gZS5kZWx0YVggKiB0aGlzLl9vcHRpb25zLm1vdXNlV2hlZWxTY3JvbGxTZW5zaXRpdml0eTtcblxuXHRcdFx0aWYgKHRoaXMuX29wdGlvbnMuc2Nyb2xsUHJlZG9taW5hbnRBeGlzKSB7XG5cdFx0XHRcdGlmICh0aGlzLl9vcHRpb25zLnNjcm9sbFlUb1ggJiYgZGVsdGFYICsgZGVsdGFZID09PSAwKSB7XG5cdFx0XHRcdFx0Ly8gd2hlbiBjb25maWd1cmVkIHRvIG1hcCBZIHRvIFggYW5kIHdlIGJvdGggc2VlXG5cdFx0XHRcdFx0Ly8gbm8gZG9taW5hbnQgYXhpcyBhbmQgWCBhbmQgWSBhcmUgY29tcGV0aW5nIHdpdGhcblx0XHRcdFx0XHQvLyBpZGVudGljYWwgdmFsdWVzIGludG8gb3Bwb3NpdGUgZGlyZWN0aW9ucywgd2Vcblx0XHRcdFx0XHQvLyBpZ25vcmUgdGhlIGRlbHRhIGFzIHdlIGNhbm5vdCBtYWtlIGEgZGVjaXNpb24gdGhlblxuXHRcdFx0XHRcdGRlbHRhWCA9IGRlbHRhWSA9IDA7XG5cdFx0XHRcdH0gZWxzZSBpZiAoTWF0aC5hYnMoZGVsdGFZKSA+PSBNYXRoLmFicyhkZWx0YVgpKSB7XG5cdFx0XHRcdFx0ZGVsdGFYID0gMDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWx0YVkgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLl9vcHRpb25zLmZsaXBBeGVzKSB7XG5cdFx0XHRcdFtkZWx0YVksIGRlbHRhWF0gPSBbZGVsdGFYLCBkZWx0YVldO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IHZlcnRpY2FsIHNjcm9sbGluZyB0byBob3Jpem9udGFsIGlmIHNoaWZ0IGlzIGhlbGQsIHRoaXNcblx0XHRcdC8vIGlzIGhhbmRsZWQgYXQgYSBoaWdoZXIgbGV2ZWwgb24gTWFjXG5cdFx0XHRjb25zdCBzaGlmdENvbnZlcnQgPSAhcGxhdGZvcm0uaXNNYWNpbnRvc2ggJiYgZS5icm93c2VyRXZlbnQgJiYgZS5icm93c2VyRXZlbnQuc2hpZnRLZXk7XG5cdFx0XHRpZiAoKHRoaXMuX29wdGlvbnMuc2Nyb2xsWVRvWCB8fCBzaGlmdENvbnZlcnQpICYmICFkZWx0YVgpIHtcblx0XHRcdFx0ZGVsdGFYID0gZGVsdGFZO1xuXHRcdFx0XHRkZWx0YVkgPSAwO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZS5icm93c2VyRXZlbnQgJiYgZS5icm93c2VyRXZlbnQuYWx0S2V5KSB7XG5cdFx0XHRcdC8vIGZhc3RTY3JvbGxpbmdcblx0XHRcdFx0ZGVsdGFYID0gZGVsdGFYICogdGhpcy5fb3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHk7XG5cdFx0XHRcdGRlbHRhWSA9IGRlbHRhWSAqIHRoaXMuX29wdGlvbnMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5O1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCBmdXR1cmVTY3JvbGxQb3NpdGlvbiA9IHRoaXMuX3Njcm9sbGFibGUuZ2V0RnV0dXJlU2Nyb2xsUG9zaXRpb24oKTtcblxuXHRcdFx0bGV0IGRlc2lyZWRTY3JvbGxQb3NpdGlvbjogSU5ld1Njcm9sbFBvc2l0aW9uID0ge307XG5cdFx0XHRpZiAoZGVsdGFZKSB7XG5cdFx0XHRcdGNvbnN0IGRlbHRhU2Nyb2xsVG9wID0gU0NST0xMX1dIRUVMX1NFTlNJVElWSVRZICogZGVsdGFZO1xuXHRcdFx0XHQvLyBIZXJlIHdlIGNvbnZlcnQgdmFsdWVzIHN1Y2ggYXMgLTAuMyB0byAtMSBvciAwLjMgdG8gMSwgb3RoZXJ3aXNlIGxvdyBzcGVlZCBzY3JvbGxpbmcgd2lsbCBuZXZlciBzY3JvbGxcblx0XHRcdFx0Y29uc3QgZGVzaXJlZFNjcm9sbFRvcCA9IGZ1dHVyZVNjcm9sbFBvc2l0aW9uLnNjcm9sbFRvcCAtIChkZWx0YVNjcm9sbFRvcCA8IDAgPyBNYXRoLmZsb29yKGRlbHRhU2Nyb2xsVG9wKSA6IE1hdGguY2VpbChkZWx0YVNjcm9sbFRvcCkpO1xuXHRcdFx0XHR0aGlzLl92ZXJ0aWNhbFNjcm9sbGJhci53cml0ZVNjcm9sbFBvc2l0aW9uKGRlc2lyZWRTY3JvbGxQb3NpdGlvbiwgZGVzaXJlZFNjcm9sbFRvcCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZGVsdGFYKSB7XG5cdFx0XHRcdGNvbnN0IGRlbHRhU2Nyb2xsTGVmdCA9IFNDUk9MTF9XSEVFTF9TRU5TSVRJVklUWSAqIGRlbHRhWDtcblx0XHRcdFx0Ly8gSGVyZSB3ZSBjb252ZXJ0IHZhbHVlcyBzdWNoIGFzIC0wLjMgdG8gLTEgb3IgMC4zIHRvIDEsIG90aGVyd2lzZSBsb3cgc3BlZWQgc2Nyb2xsaW5nIHdpbGwgbmV2ZXIgc2Nyb2xsXG5cdFx0XHRcdGNvbnN0IGRlc2lyZWRTY3JvbGxMZWZ0ID0gZnV0dXJlU2Nyb2xsUG9zaXRpb24uc2Nyb2xsTGVmdCAtIChkZWx0YVNjcm9sbExlZnQgPCAwID8gTWF0aC5mbG9vcihkZWx0YVNjcm9sbExlZnQpIDogTWF0aC5jZWlsKGRlbHRhU2Nyb2xsTGVmdCkpO1xuXHRcdFx0XHR0aGlzLl9ob3Jpem9udGFsU2Nyb2xsYmFyLndyaXRlU2Nyb2xsUG9zaXRpb24oZGVzaXJlZFNjcm9sbFBvc2l0aW9uLCBkZXNpcmVkU2Nyb2xsTGVmdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENoZWNrIHRoYXQgd2UgYXJlIHNjcm9sbGluZyB0b3dhcmRzIGEgbG9jYXRpb24gd2hpY2ggaXMgdmFsaWRcblx0XHRcdGRlc2lyZWRTY3JvbGxQb3NpdGlvbiA9IHRoaXMuX3Njcm9sbGFibGUudmFsaWRhdGVTY3JvbGxQb3NpdGlvbihkZXNpcmVkU2Nyb2xsUG9zaXRpb24pO1xuXG5cdFx0XHRpZiAoZnV0dXJlU2Nyb2xsUG9zaXRpb24uc2Nyb2xsTGVmdCAhPT0gZGVzaXJlZFNjcm9sbFBvc2l0aW9uLnNjcm9sbExlZnQgfHwgZnV0dXJlU2Nyb2xsUG9zaXRpb24uc2Nyb2xsVG9wICE9PSBkZXNpcmVkU2Nyb2xsUG9zaXRpb24uc2Nyb2xsVG9wKSB7XG5cblx0XHRcdFx0Y29uc3QgY2FuUGVyZm9ybVNtb290aFNjcm9sbCA9IChcblx0XHRcdFx0XHRTQ1JPTExfV0hFRUxfU01PT1RIX1NDUk9MTF9FTkFCTEVEXG5cdFx0XHRcdFx0JiYgdGhpcy5fb3B0aW9ucy5tb3VzZVdoZWVsU21vb3RoU2Nyb2xsXG5cdFx0XHRcdFx0JiYgY2xhc3NpZmllci5pc1BoeXNpY2FsTW91c2VXaGVlbCgpXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKGNhblBlcmZvcm1TbW9vdGhTY3JvbGwpIHtcblx0XHRcdFx0XHR0aGlzLl9zY3JvbGxhYmxlLnNldFNjcm9sbFBvc2l0aW9uU21vb3RoKGRlc2lyZWRTY3JvbGxQb3NpdGlvbik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fc2Nyb2xsYWJsZS5zZXRTY3JvbGxQb3NpdGlvbk5vdyhkZXNpcmVkU2Nyb2xsUG9zaXRpb24pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGlkU2Nyb2xsID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgY29uc3VtZU1vdXNlV2hlZWwgPSBkaWRTY3JvbGw7XG5cdFx0aWYgKCFjb25zdW1lTW91c2VXaGVlbCAmJiB0aGlzLl9vcHRpb25zLmFsd2F5c0NvbnN1bWVNb3VzZVdoZWVsKSB7XG5cdFx0XHRjb25zdW1lTW91c2VXaGVlbCA9IHRydWU7XG5cdFx0fVxuXHRcdGlmICghY29uc3VtZU1vdXNlV2hlZWwgJiYgdGhpcy5fb3B0aW9ucy5jb25zdW1lTW91c2VXaGVlbElmU2Nyb2xsYmFySXNOZWVkZWQgJiYgKHRoaXMuX3ZlcnRpY2FsU2Nyb2xsYmFyLmlzTmVlZGVkKCkgfHwgdGhpcy5faG9yaXpvbnRhbFNjcm9sbGJhci5pc05lZWRlZCgpKSkge1xuXHRcdFx0Y29uc3VtZU1vdXNlV2hlZWwgPSB0cnVlO1xuXHRcdH1cblxuXHRcdGlmIChjb25zdW1lTW91c2VXaGVlbCkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIF9vbkRpZFNjcm9sbChlOiBTY3JvbGxFdmVudCk6IHZvaWQge1xuXHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRoaXMuX2hvcml6b250YWxTY3JvbGxiYXIub25EaWRTY3JvbGwoZSkgfHwgdGhpcy5fc2hvdWxkUmVuZGVyO1xuXHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRoaXMuX3ZlcnRpY2FsU2Nyb2xsYmFyLm9uRGlkU2Nyb2xsKGUpIHx8IHRoaXMuX3Nob3VsZFJlbmRlcjtcblxuXHRcdGlmICh0aGlzLl9vcHRpb25zLnVzZVNoYWRvd3MpIHtcblx0XHRcdHRoaXMuX3Nob3VsZFJlbmRlciA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX3JldmVhbE9uU2Nyb2xsKSB7XG5cdFx0XHR0aGlzLl9yZXZlYWwoKTtcblx0XHR9XG5cblx0XHRpZiAoIXRoaXMuX29wdGlvbnMubGF6eVJlbmRlcikge1xuXHRcdFx0dGhpcy5fcmVuZGVyKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlciAvIG11dGF0ZSB0aGUgRE9NIG5vdy5cblx0ICogU2hvdWxkIGJlIHVzZWQgdG9nZXRoZXIgd2l0aCB0aGUgY3RvciBvcHRpb24gYGxhenlSZW5kZXJgLlxuXHQgKi9cblx0cHVibGljIHJlbmRlck5vdygpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuX29wdGlvbnMubGF6eVJlbmRlcikge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgdXNlIGBsYXp5UmVuZGVyYCB0b2dldGhlciB3aXRoIGByZW5kZXJOb3dgIScpO1xuXHRcdH1cblxuXHRcdHRoaXMuX3JlbmRlcigpO1xuXHR9XG5cblx0cHJpdmF0ZSBfcmVuZGVyKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fc2hvdWxkUmVuZGVyKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5fc2hvdWxkUmVuZGVyID0gZmFsc2U7XG5cblx0XHR0aGlzLl9ob3Jpem9udGFsU2Nyb2xsYmFyLnJlbmRlcigpO1xuXHRcdHRoaXMuX3ZlcnRpY2FsU2Nyb2xsYmFyLnJlbmRlcigpO1xuXG5cdFx0aWYgKHRoaXMuX29wdGlvbnMudXNlU2hhZG93cykge1xuXHRcdFx0Y29uc3Qgc2Nyb2xsU3RhdGUgPSB0aGlzLl9zY3JvbGxhYmxlLmdldEN1cnJlbnRTY3JvbGxQb3NpdGlvbigpO1xuXHRcdFx0Y29uc3QgZW5hYmxlVG9wID0gc2Nyb2xsU3RhdGUuc2Nyb2xsVG9wID4gMDtcblx0XHRcdGNvbnN0IGVuYWJsZUxlZnQgPSBzY3JvbGxTdGF0ZS5zY3JvbGxMZWZ0ID4gMDtcblxuXHRcdFx0Y29uc3QgbGVmdENsYXNzTmFtZSA9IChlbmFibGVMZWZ0ID8gJyBsZWZ0JyA6ICcnKTtcblx0XHRcdGNvbnN0IHRvcENsYXNzTmFtZSA9IChlbmFibGVUb3AgPyAnIHRvcCcgOiAnJyk7XG5cdFx0XHRjb25zdCB0b3BMZWZ0Q2xhc3NOYW1lID0gKGVuYWJsZUxlZnQgfHwgZW5hYmxlVG9wID8gJyB0b3AtbGVmdC1jb3JuZXInIDogJycpO1xuXHRcdFx0dGhpcy5fbGVmdFNoYWRvd0RvbU5vZGUhLnNldENsYXNzTmFtZShgc2hhZG93JHtsZWZ0Q2xhc3NOYW1lfWApO1xuXHRcdFx0dGhpcy5fdG9wU2hhZG93RG9tTm9kZSEuc2V0Q2xhc3NOYW1lKGBzaGFkb3cke3RvcENsYXNzTmFtZX1gKTtcblx0XHRcdHRoaXMuX3RvcExlZnRTaGFkb3dEb21Ob2RlIS5zZXRDbGFzc05hbWUoYHNoYWRvdyR7dG9wTGVmdENsYXNzTmFtZX0ke3RvcENsYXNzTmFtZX0ke2xlZnRDbGFzc05hbWV9YCk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0gZmFkZSBpbiAvIGZhZGUgb3V0IC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0cHJpdmF0ZSBfb25EcmFnU3RhcnQoKTogdm9pZCB7XG5cdFx0dGhpcy5faXNEcmFnZ2luZyA9IHRydWU7XG5cdFx0dGhpcy5fcmV2ZWFsKCk7XG5cdH1cblxuXHRwcml2YXRlIF9vbkRyYWdFbmQoKTogdm9pZCB7XG5cdFx0dGhpcy5faXNEcmFnZ2luZyA9IGZhbHNlO1xuXHRcdHRoaXMuX2hpZGUoKTtcblx0fVxuXG5cdHByaXZhdGUgX29uTW91c2VMZWF2ZShlOiBJTW91c2VFdmVudCk6IHZvaWQge1xuXHRcdHRoaXMuX21vdXNlSXNPdmVyID0gZmFsc2U7XG5cdFx0dGhpcy5faGlkZSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBfb25Nb3VzZU92ZXIoZTogSU1vdXNlRXZlbnQpOiB2b2lkIHtcblx0XHR0aGlzLl9tb3VzZUlzT3ZlciA9IHRydWU7XG5cdFx0dGhpcy5fcmV2ZWFsKCk7XG5cdH1cblxuXHRwcml2YXRlIF9yZXZlYWwoKTogdm9pZCB7XG5cdFx0dGhpcy5fdmVydGljYWxTY3JvbGxiYXIuYmVnaW5SZXZlYWwoKTtcblx0XHR0aGlzLl9ob3Jpem9udGFsU2Nyb2xsYmFyLmJlZ2luUmV2ZWFsKCk7XG5cdFx0dGhpcy5fc2NoZWR1bGVIaWRlKCk7XG5cdH1cblxuXHRwcml2YXRlIF9oaWRlKCk6IHZvaWQge1xuXHRcdGlmICghdGhpcy5fbW91c2VJc092ZXIgJiYgIXRoaXMuX2lzRHJhZ2dpbmcpIHtcblx0XHRcdHRoaXMuX3ZlcnRpY2FsU2Nyb2xsYmFyLmJlZ2luSGlkZSgpO1xuXHRcdFx0dGhpcy5faG9yaXpvbnRhbFNjcm9sbGJhci5iZWdpbkhpZGUoKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIF9zY2hlZHVsZUhpZGUoKTogdm9pZCB7XG5cdFx0aWYgKCF0aGlzLl9tb3VzZUlzT3ZlciAmJiAhdGhpcy5faXNEcmFnZ2luZykge1xuXHRcdFx0dGhpcy5faGlkZVRpbWVvdXQuY2FuY2VsQW5kU2V0KCgpID0+IHRoaXMuX2hpZGUoKSwgSElERV9USU1FT1VUKTtcblx0XHR9XG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIFNjcm9sbGFibGVFbGVtZW50IGV4dGVuZHMgQWJzdHJhY3RTY3JvbGxhYmxlRWxlbWVudCB7XG5cblx0Y29uc3RydWN0b3IoZWxlbWVudDogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IFNjcm9sbGFibGVFbGVtZW50Q3JlYXRpb25PcHRpb25zKSB7XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0b3B0aW9ucy5tb3VzZVdoZWVsU21vb3RoU2Nyb2xsID0gZmFsc2U7XG5cdFx0Y29uc3Qgc2Nyb2xsYWJsZSA9IG5ldyBTY3JvbGxhYmxlKHtcblx0XHRcdGZvcmNlSW50ZWdlclZhbHVlczogdHJ1ZSxcblx0XHRcdHNtb290aFNjcm9sbER1cmF0aW9uOiAwLFxuXHRcdFx0c2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTogKGNhbGxiYWNrKSA9PiBkb20uc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZShkb20uZ2V0V2luZG93KGVsZW1lbnQpLCBjYWxsYmFjaylcblx0XHR9KTtcblx0XHRzdXBlcihlbGVtZW50LCBvcHRpb25zLCBzY3JvbGxhYmxlKTtcblx0XHR0aGlzLl9yZWdpc3RlcihzY3JvbGxhYmxlKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRTY3JvbGxQb3NpdGlvbih1cGRhdGU6IElOZXdTY3JvbGxQb3NpdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3Njcm9sbGFibGUuc2V0U2Nyb2xsUG9zaXRpb25Ob3codXBkYXRlKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRTY3JvbGxQb3NpdGlvbigpOiBJU2Nyb2xsUG9zaXRpb24ge1xuXHRcdHJldHVybiB0aGlzLl9zY3JvbGxhYmxlLmdldEN1cnJlbnRTY3JvbGxQb3NpdGlvbigpO1xuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBTbW9vdGhTY3JvbGxhYmxlRWxlbWVudCBleHRlbmRzIEFic3RyYWN0U2Nyb2xsYWJsZUVsZW1lbnQge1xuXG5cdGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBTY3JvbGxhYmxlRWxlbWVudENyZWF0aW9uT3B0aW9ucywgc2Nyb2xsYWJsZTogU2Nyb2xsYWJsZSkge1xuXHRcdHN1cGVyKGVsZW1lbnQsIG9wdGlvbnMsIHNjcm9sbGFibGUpO1xuXHR9XG5cblx0cHVibGljIHNldFNjcm9sbFBvc2l0aW9uKHVwZGF0ZTogSU5ld1Njcm9sbFBvc2l0aW9uICYgeyByZXVzZUFuaW1hdGlvbj86IGJvb2xlYW4gfSk6IHZvaWQge1xuXHRcdGlmICh1cGRhdGUucmV1c2VBbmltYXRpb24pIHtcblx0XHRcdHRoaXMuX3Njcm9sbGFibGUuc2V0U2Nyb2xsUG9zaXRpb25TbW9vdGgodXBkYXRlLCB1cGRhdGUucmV1c2VBbmltYXRpb24pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLl9zY3JvbGxhYmxlLnNldFNjcm9sbFBvc2l0aW9uTm93KHVwZGF0ZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGdldFNjcm9sbFBvc2l0aW9uKCk6IElTY3JvbGxQb3NpdGlvbiB7XG5cdFx0cmV0dXJuIHRoaXMuX3Njcm9sbGFibGUuZ2V0Q3VycmVudFNjcm9sbFBvc2l0aW9uKCk7XG5cdH1cblxufVxuXG5leHBvcnQgY2xhc3MgRG9tU2Nyb2xsYWJsZUVsZW1lbnQgZXh0ZW5kcyBBYnN0cmFjdFNjcm9sbGFibGVFbGVtZW50IHtcblxuXHRwcml2YXRlIF9lbGVtZW50OiBIVE1MRWxlbWVudDtcblxuXHRjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgb3B0aW9uczogU2Nyb2xsYWJsZUVsZW1lbnRDcmVhdGlvbk9wdGlvbnMpIHtcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XHRvcHRpb25zLm1vdXNlV2hlZWxTbW9vdGhTY3JvbGwgPSBmYWxzZTtcblx0XHRjb25zdCBzY3JvbGxhYmxlID0gbmV3IFNjcm9sbGFibGUoe1xuXHRcdFx0Zm9yY2VJbnRlZ2VyVmFsdWVzOiBmYWxzZSwgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvdnNjb2RlL2lzc3Vlcy8xMzk4Nzdcblx0XHRcdHNtb290aFNjcm9sbER1cmF0aW9uOiAwLFxuXHRcdFx0c2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZTogKGNhbGxiYWNrKSA9PiBkb20uc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZShkb20uZ2V0V2luZG93KGVsZW1lbnQpLCBjYWxsYmFjaylcblx0XHR9KTtcblx0XHRzdXBlcihlbGVtZW50LCBvcHRpb25zLCBzY3JvbGxhYmxlKTtcblx0XHR0aGlzLl9yZWdpc3RlcihzY3JvbGxhYmxlKTtcblx0XHR0aGlzLl9lbGVtZW50ID0gZWxlbWVudDtcblx0XHR0aGlzLl9yZWdpc3Rlcih0aGlzLm9uU2Nyb2xsKChlKSA9PiB7XG5cdFx0XHRpZiAoZS5zY3JvbGxUb3BDaGFuZ2VkKSB7XG5cdFx0XHRcdHRoaXMuX2VsZW1lbnQuc2Nyb2xsVG9wID0gZS5zY3JvbGxUb3A7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZS5zY3JvbGxMZWZ0Q2hhbmdlZCkge1xuXHRcdFx0XHR0aGlzLl9lbGVtZW50LnNjcm9sbExlZnQgPSBlLnNjcm9sbExlZnQ7XG5cdFx0XHR9XG5cdFx0fSkpO1xuXHRcdHRoaXMuc2NhbkRvbU5vZGUoKTtcblx0fVxuXG5cdHB1YmxpYyBzZXRTY3JvbGxQb3NpdGlvbih1cGRhdGU6IElOZXdTY3JvbGxQb3NpdGlvbik6IHZvaWQge1xuXHRcdHRoaXMuX3Njcm9sbGFibGUuc2V0U2Nyb2xsUG9zaXRpb25Ob3codXBkYXRlKTtcblx0fVxuXG5cdHB1YmxpYyBnZXRTY3JvbGxQb3NpdGlvbigpOiBJU2Nyb2xsUG9zaXRpb24ge1xuXHRcdHJldHVybiB0aGlzLl9zY3JvbGxhYmxlLmdldEN1cnJlbnRTY3JvbGxQb3NpdGlvbigpO1xuXHR9XG5cblx0cHVibGljIHNjYW5Eb21Ob2RlKCk6IHZvaWQge1xuXHRcdC8vIHdpZHRoLCBzY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCwgaGVpZ2h0LCBzY3JvbGxUb3AsIHNjcm9sbEhlaWdodFxuXHRcdHRoaXMuc2V0U2Nyb2xsRGltZW5zaW9ucyh7XG5cdFx0XHR3aWR0aDogdGhpcy5fZWxlbWVudC5jbGllbnRXaWR0aCxcblx0XHRcdHNjcm9sbFdpZHRoOiB0aGlzLl9lbGVtZW50LnNjcm9sbFdpZHRoLFxuXHRcdFx0aGVpZ2h0OiB0aGlzLl9lbGVtZW50LmNsaWVudEhlaWdodCxcblx0XHRcdHNjcm9sbEhlaWdodDogdGhpcy5fZWxlbWVudC5zY3JvbGxIZWlnaHRcblx0XHR9KTtcblx0XHR0aGlzLnNldFNjcm9sbFBvc2l0aW9uKHtcblx0XHRcdHNjcm9sbExlZnQ6IHRoaXMuX2VsZW1lbnQuc2Nyb2xsTGVmdCxcblx0XHRcdHNjcm9sbFRvcDogdGhpcy5fZWxlbWVudC5zY3JvbGxUb3AsXG5cdFx0fSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZU9wdGlvbnMob3B0czogU2Nyb2xsYWJsZUVsZW1lbnRDcmVhdGlvbk9wdGlvbnMpOiBTY3JvbGxhYmxlRWxlbWVudFJlc29sdmVkT3B0aW9ucyB7XG5cdGNvbnN0IHJlc3VsdDogU2Nyb2xsYWJsZUVsZW1lbnRSZXNvbHZlZE9wdGlvbnMgPSB7XG5cdFx0bGF6eVJlbmRlcjogKHR5cGVvZiBvcHRzLmxhenlSZW5kZXIgIT09ICd1bmRlZmluZWQnID8gb3B0cy5sYXp5UmVuZGVyIDogZmFsc2UpLFxuXHRcdGNsYXNzTmFtZTogKHR5cGVvZiBvcHRzLmNsYXNzTmFtZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmNsYXNzTmFtZSA6ICcnKSxcblx0XHR1c2VTaGFkb3dzOiAodHlwZW9mIG9wdHMudXNlU2hhZG93cyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLnVzZVNoYWRvd3MgOiB0cnVlKSxcblx0XHRoYW5kbGVNb3VzZVdoZWVsOiAodHlwZW9mIG9wdHMuaGFuZGxlTW91c2VXaGVlbCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmhhbmRsZU1vdXNlV2hlZWwgOiB0cnVlKSxcblx0XHRmbGlwQXhlczogKHR5cGVvZiBvcHRzLmZsaXBBeGVzICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuZmxpcEF4ZXMgOiBmYWxzZSksXG5cdFx0Y29uc3VtZU1vdXNlV2hlZWxJZlNjcm9sbGJhcklzTmVlZGVkOiAodHlwZW9mIG9wdHMuY29uc3VtZU1vdXNlV2hlZWxJZlNjcm9sbGJhcklzTmVlZGVkICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuY29uc3VtZU1vdXNlV2hlZWxJZlNjcm9sbGJhcklzTmVlZGVkIDogZmFsc2UpLFxuXHRcdGFsd2F5c0NvbnN1bWVNb3VzZVdoZWVsOiAodHlwZW9mIG9wdHMuYWx3YXlzQ29uc3VtZU1vdXNlV2hlZWwgIT09ICd1bmRlZmluZWQnID8gb3B0cy5hbHdheXNDb25zdW1lTW91c2VXaGVlbCA6IGZhbHNlKSxcblx0XHRzY3JvbGxZVG9YOiAodHlwZW9mIG9wdHMuc2Nyb2xsWVRvWCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLnNjcm9sbFlUb1ggOiBmYWxzZSksXG5cdFx0bW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5OiAodHlwZW9mIG9wdHMubW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5ICE9PSAndW5kZWZpbmVkJyA/IG9wdHMubW91c2VXaGVlbFNjcm9sbFNlbnNpdGl2aXR5IDogMSksXG5cdFx0ZmFzdFNjcm9sbFNlbnNpdGl2aXR5OiAodHlwZW9mIG9wdHMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5ICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5IDogNSksXG5cdFx0c2Nyb2xsUHJlZG9taW5hbnRBeGlzOiAodHlwZW9mIG9wdHMuc2Nyb2xsUHJlZG9taW5hbnRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuc2Nyb2xsUHJlZG9taW5hbnRBeGlzIDogdHJ1ZSksXG5cdFx0bW91c2VXaGVlbFNtb290aFNjcm9sbDogKHR5cGVvZiBvcHRzLm1vdXNlV2hlZWxTbW9vdGhTY3JvbGwgIT09ICd1bmRlZmluZWQnID8gb3B0cy5tb3VzZVdoZWVsU21vb3RoU2Nyb2xsIDogdHJ1ZSksXG5cdFx0YXJyb3dTaXplOiAodHlwZW9mIG9wdHMuYXJyb3dTaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuYXJyb3dTaXplIDogMTEpLFxuXG5cdFx0bGlzdGVuT25Eb21Ob2RlOiAodHlwZW9mIG9wdHMubGlzdGVuT25Eb21Ob2RlICE9PSAndW5kZWZpbmVkJyA/IG9wdHMubGlzdGVuT25Eb21Ob2RlIDogbnVsbCksXG5cblx0XHRob3Jpem9udGFsOiAodHlwZW9mIG9wdHMuaG9yaXpvbnRhbCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmhvcml6b250YWwgOiBTY3JvbGxiYXJWaXNpYmlsaXR5LkF1dG8pLFxuXHRcdGhvcml6b250YWxTY3JvbGxiYXJTaXplOiAodHlwZW9mIG9wdHMuaG9yaXpvbnRhbFNjcm9sbGJhclNpemUgIT09ICd1bmRlZmluZWQnID8gb3B0cy5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSA6IDEwKSxcblx0XHRob3Jpem9udGFsU2xpZGVyU2l6ZTogKHR5cGVvZiBvcHRzLmhvcml6b250YWxTbGlkZXJTaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdHMuaG9yaXpvbnRhbFNsaWRlclNpemUgOiAwKSxcblx0XHRob3Jpem9udGFsSGFzQXJyb3dzOiAodHlwZW9mIG9wdHMuaG9yaXpvbnRhbEhhc0Fycm93cyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLmhvcml6b250YWxIYXNBcnJvd3MgOiBmYWxzZSksXG5cblx0XHR2ZXJ0aWNhbDogKHR5cGVvZiBvcHRzLnZlcnRpY2FsICE9PSAndW5kZWZpbmVkJyA/IG9wdHMudmVydGljYWwgOiBTY3JvbGxiYXJWaXNpYmlsaXR5LkF1dG8pLFxuXHRcdHZlcnRpY2FsU2Nyb2xsYmFyU2l6ZTogKHR5cGVvZiBvcHRzLnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRzLnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSA6IDEwKSxcblx0XHR2ZXJ0aWNhbEhhc0Fycm93czogKHR5cGVvZiBvcHRzLnZlcnRpY2FsSGFzQXJyb3dzICE9PSAndW5kZWZpbmVkJyA/IG9wdHMudmVydGljYWxIYXNBcnJvd3MgOiBmYWxzZSksXG5cdFx0dmVydGljYWxTbGlkZXJTaXplOiAodHlwZW9mIG9wdHMudmVydGljYWxTbGlkZXJTaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdHMudmVydGljYWxTbGlkZXJTaXplIDogMCksXG5cblx0XHRzY3JvbGxCeVBhZ2U6ICh0eXBlb2Ygb3B0cy5zY3JvbGxCeVBhZ2UgIT09ICd1bmRlZmluZWQnID8gb3B0cy5zY3JvbGxCeVBhZ2UgOiBmYWxzZSlcblx0fTtcblxuXHRyZXN1bHQuaG9yaXpvbnRhbFNsaWRlclNpemUgPSAodHlwZW9mIG9wdHMuaG9yaXpvbnRhbFNsaWRlclNpemUgIT09ICd1bmRlZmluZWQnID8gb3B0cy5ob3Jpem9udGFsU2xpZGVyU2l6ZSA6IHJlc3VsdC5ob3Jpem9udGFsU2Nyb2xsYmFyU2l6ZSk7XG5cdHJlc3VsdC52ZXJ0aWNhbFNsaWRlclNpemUgPSAodHlwZW9mIG9wdHMudmVydGljYWxTbGlkZXJTaXplICE9PSAndW5kZWZpbmVkJyA/IG9wdHMudmVydGljYWxTbGlkZXJTaXplIDogcmVzdWx0LnZlcnRpY2FsU2Nyb2xsYmFyU2l6ZSk7XG5cblx0Ly8gRGVmYXVsdHMgYXJlIGRpZmZlcmVudCBvbiBNYWNzXG5cdGlmIChwbGF0Zm9ybS5pc01hY2ludG9zaCkge1xuXHRcdHJlc3VsdC5jbGFzc05hbWUgKz0gJyBtYWMnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlQnJvd3NlclNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlLCBJVGhlbWVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBWaWV3cG9ydENvbnN0YW50cyB9IGZyb20gJ2Jyb3dzZXIvc2hhcmVkL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlTW91c2VTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgQ29yZU1vdXNlRXZlbnRUeXBlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IHNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvZG9tJztcbmltcG9ydCB7IFNtb290aFNjcm9sbGFibGVFbGVtZW50IH0gZnJvbSAndnMvYmFzZS9icm93c2VyL3VpL3Njcm9sbGJhci9zY3JvbGxhYmxlRWxlbWVudCc7XG5pbXBvcnQgdHlwZSB7IFNjcm9sbGFibGVFbGVtZW50Q2hhbmdlT3B0aW9ucyB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci91aS9zY3JvbGxiYXIvc2Nyb2xsYWJsZUVsZW1lbnRPcHRpb25zJztcbmltcG9ydCB7IEVtaXR0ZXIsIEV2ZW50IH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuaW1wb3J0IHsgU2Nyb2xsYWJsZSwgU2Nyb2xsYmFyVmlzaWJpbGl0eSwgdHlwZSBTY3JvbGxFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL3Njcm9sbGFibGUnO1xuXG5leHBvcnQgY2xhc3MgVmlld3BvcnQgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcblxuICBwcm90ZWN0ZWQgX29uUmVxdWVzdFNjcm9sbExpbmVzID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFNjcm9sbExpbmVzID0gdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZXZlbnQ7XG5cbiAgcHJpdmF0ZSBfc2Nyb2xsYWJsZUVsZW1lbnQ6IFNtb290aFNjcm9sbGFibGVFbGVtZW50O1xuICBwcml2YXRlIF9zdHlsZUVsZW1lbnQ6IEhUTUxTdHlsZUVsZW1lbnQ7XG5cbiAgcHJpdmF0ZSBfcXVldWVkQW5pbWF0aW9uRnJhbWU/OiBudW1iZXI7XG4gIHByaXZhdGUgX2xhdGVzdFlEaXNwPzogbnVtYmVyO1xuICBwcml2YXRlIF9pc1N5bmNpbmc6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaXNIYW5kbGluZ1Njcm9sbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9zdXBwcmVzc09uU2Nyb2xsSGFuZGxlcjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIHNjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNvcmVCcm93c2VyU2VydmljZSBjb3JlQnJvd3NlclNlcnZpY2U6IElDb3JlQnJvd3NlclNlcnZpY2UsXG4gICAgQElDb3JlTW91c2VTZXJ2aWNlIGNvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlLFxuICAgIEBJVGhlbWVTZXJ2aWNlIHRoZW1lU2VydmljZTogSVRoZW1lU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBjb25zdCBzY3JvbGxhYmxlID0gdGhpcy5fcmVnaXN0ZXIobmV3IFNjcm9sbGFibGUoe1xuICAgICAgZm9yY2VJbnRlZ2VyVmFsdWVzOiBmYWxzZSxcbiAgICAgIHNtb290aFNjcm9sbER1cmF0aW9uOiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNtb290aFNjcm9sbER1cmF0aW9uLFxuICAgICAgLy8gVGhpcyBpcyB1c2VkIG92ZXIgYElSZW5kZXJTZXJ2aWNlLmFkZFJlZnJlc2hDYWxsYmFja2Agc2luY2UgaXQgY2FuIGJlIGNhbmNlbGVkXG4gICAgICBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lOiBjYiA9PiBzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKGNvcmVCcm93c2VyU2VydmljZS53aW5kb3csIGNiKVxuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdzbW9vdGhTY3JvbGxEdXJhdGlvbicsICgpID0+IHtcbiAgICAgIHNjcm9sbGFibGUuc2V0U21vb3RoU2Nyb2xsRHVyYXRpb24odGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zbW9vdGhTY3JvbGxEdXJhdGlvbik7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQgPSB0aGlzLl9yZWdpc3RlcihuZXcgU21vb3RoU2Nyb2xsYWJsZUVsZW1lbnQoc2NyZWVuRWxlbWVudCwge1xuICAgICAgdmVydGljYWw6IFNjcm9sbGJhclZpc2liaWxpdHkuQXV0byxcbiAgICAgIGhvcml6b250YWw6IFNjcm9sbGJhclZpc2liaWxpdHkuSGlkZGVuLFxuICAgICAgdXNlU2hhZG93czogZmFsc2UsXG4gICAgICBtb3VzZVdoZWVsU21vb3RoU2Nyb2xsOiB0cnVlLFxuICAgICAgLi4udGhpcy5fZ2V0Q2hhbmdlT3B0aW9ucygpXG4gICAgfSwgc2Nyb2xsYWJsZSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoW1xuICAgICAgJ3Njcm9sbFNlbnNpdGl2aXR5JyxcbiAgICAgICdmYXN0U2Nyb2xsU2Vuc2l0aXZpdHknLFxuICAgICAgJ292ZXJ2aWV3UnVsZXInXG4gICAgXSwgKCkgPT4gdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQudXBkYXRlT3B0aW9ucyh0aGlzLl9nZXRDaGFuZ2VPcHRpb25zKCkpKSk7XG4gICAgLy8gRG9uJ3QgaGFuZGxlIG1vdXNlIHdoZWVsIGlmIHdoZWVsIGV2ZW50cyBhcmUgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IG1vdXNlIHByb3RvdGNvbFxuICAgIHRoaXMuX3JlZ2lzdGVyKGNvcmVNb3VzZVNlcnZpY2Uub25Qcm90b2NvbENoYW5nZSh0eXBlID0+IHtcbiAgICAgIHRoaXMuX3Njcm9sbGFibGVFbGVtZW50LnVwZGF0ZU9wdGlvbnMoe1xuICAgICAgICBoYW5kbGVNb3VzZVdoZWVsOiAhKHR5cGUgJiBDb3JlTW91c2VFdmVudFR5cGUuV0hFRUwpXG4gICAgICB9KTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLl9zY3JvbGxhYmxlRWxlbWVudC5zZXRTY3JvbGxEaW1lbnNpb25zKHsgaGVpZ2h0OiAwLCBzY3JvbGxIZWlnaHQ6IDAgfSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoRXZlbnQucnVuQW5kU3Vic2NyaWJlKHRoZW1lU2VydmljZS5vbkNoYW5nZUNvbG9ycywgKCkgPT4ge1xuICAgICAgdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuZ2V0RG9tTm9kZSgpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoZW1lU2VydmljZS5jb2xvcnMuYmFja2dyb3VuZC5jc3M7XG4gICAgfSkpO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuZ2V0RG9tTm9kZSgpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4gdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuZ2V0RG9tTm9kZSgpLnJlbW92ZSgpKSk7XG5cbiAgICB0aGlzLl9zdHlsZUVsZW1lbnQgPSBjb3JlQnJvd3NlclNlcnZpY2UubWFpbkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9zdHlsZUVsZW1lbnQpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB0aGlzLl9zdHlsZUVsZW1lbnQucmVtb3ZlKCkpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5ydW5BbmRTdWJzY3JpYmUodGhlbWVTZXJ2aWNlLm9uQ2hhbmdlQ29sb3JzLCAoKSA9PiB7XG4gICAgICB0aGlzLl9zdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBbXG4gICAgICAgIGAueHRlcm0gLnh0ZXJtLXNjcm9sbGFibGUtZWxlbWVudCA+IC5zY3JvbGxiYXIgPiAuc2xpZGVyIHtgLFxuICAgICAgICBgICBiYWNrZ3JvdW5kOiAke3RoZW1lU2VydmljZS5jb2xvcnMuc2Nyb2xsYmFyU2xpZGVyQmFja2dyb3VuZC5jc3N9O2AsXG4gICAgICAgIGB9YCxcbiAgICAgICAgYC54dGVybSAueHRlcm0tc2Nyb2xsYWJsZS1lbGVtZW50ID4gLnNjcm9sbGJhciA+IC5zbGlkZXI6aG92ZXIge2AsXG4gICAgICAgIGAgIGJhY2tncm91bmQ6ICR7dGhlbWVTZXJ2aWNlLmNvbG9ycy5zY3JvbGxiYXJTbGlkZXJIb3ZlckJhY2tncm91bmQuY3NzfTtgLFxuICAgICAgICBgfWAsXG4gICAgICAgIGAueHRlcm0gLnh0ZXJtLXNjcm9sbGFibGUtZWxlbWVudCA+IC5zY3JvbGxiYXIgPiAuc2xpZGVyLmFjdGl2ZSB7YCxcbiAgICAgICAgYCAgYmFja2dyb3VuZDogJHt0aGVtZVNlcnZpY2UuY29sb3JzLnNjcm9sbGJhclNsaWRlckFjdGl2ZUJhY2tncm91bmQuY3NzfTtgLFxuICAgICAgICBgfWBcbiAgICAgIF0uam9pbignXFxuJyk7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblJlc2l6ZSgoKSA9PiB0aGlzLnF1ZXVlU3luYygpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKCkgPT4ge1xuICAgICAgLy8gUmVzZXQgX2xhdGVzdFlEaXNwIHdoZW4gc3dpdGNoaW5nIGJ1ZmZlcnMgdG8gcHJldmVudCBzdGFsZSBzY3JvbGwgcG9zaXRpb25cbiAgICAgIC8vIGZyb20gYWx0IGJ1ZmZlciBjb250YW1pbmF0aW5nIG5vcm1hbCBidWZmZXIgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICB0aGlzLl9sYXRlc3RZRGlzcCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMucXVldWVTeW5jKCk7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoKCkgPT4gdGhpcy5fc3luYygpKSk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9zY3JvbGxhYmxlRWxlbWVudC5vblNjcm9sbChlID0+IHRoaXMuX2hhbmRsZVNjcm9sbChlKSkpO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHBvcyA9IHRoaXMuX3Njcm9sbGFibGVFbGVtZW50LmdldFNjcm9sbFBvc2l0aW9uKCk7XG4gICAgdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuc2V0U2Nyb2xsUG9zaXRpb24oe1xuICAgICAgcmV1c2VBbmltYXRpb246IHRydWUsXG4gICAgICBzY3JvbGxUb3A6IHBvcy5zY3JvbGxUb3AgKyBkaXNwICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIsIGRpc2FibGVTbW9vdGhTY3JvbGw/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGRpc2FibGVTbW9vdGhTY3JvbGwpIHtcbiAgICAgIHRoaXMuX2xhdGVzdFlEaXNwID0gbGluZTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuc2V0U2Nyb2xsUG9zaXRpb24oe1xuICAgICAgcmV1c2VBbmltYXRpb246ICFkaXNhYmxlU21vb3RoU2Nyb2xsLFxuICAgICAgc2Nyb2xsVG9wOiBsaW5lICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfZ2V0Q2hhbmdlT3B0aW9ucygpOiBTY3JvbGxhYmxlRWxlbWVudENoYW5nZU9wdGlvbnMge1xuICAgIHJldHVybiB7XG4gICAgICBtb3VzZVdoZWVsU2Nyb2xsU2Vuc2l0aXZpdHk6IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHksXG4gICAgICBmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5LFxuICAgICAgdmVydGljYWxTY3JvbGxiYXJTaXplOiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm92ZXJ2aWV3UnVsZXI/LndpZHRoIHx8IFZpZXdwb3J0Q29uc3RhbnRzLkRFRkFVTFRfU0NST0xMX0JBUl9XSURUSFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgcXVldWVTeW5jKHlkaXNwPzogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHN0YXRlXG4gICAgaWYgKHlkaXNwICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2xhdGVzdFlEaXNwID0geWRpc3A7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgcXVldWUgbW9yZSB0aGFuIG9uZSBjYWxsYmFja1xuICAgIGlmICh0aGlzLl9xdWV1ZWRBbmltYXRpb25GcmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3F1ZXVlZEFuaW1hdGlvbkZyYW1lID0gdGhpcy5fcmVuZGVyU2VydmljZS5hZGRSZWZyZXNoQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgdGhpcy5fcXVldWVkQW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9zeW5jKHRoaXMuX2xhdGVzdFlEaXNwKTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3N5bmMoeWRpc3A6IG51bWJlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlIHx8IHRoaXMuX2lzU3luY2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc1N5bmNpbmcgPSB0cnVlO1xuXG4gICAgLy8gSWdub3JlIGFueSBvblNjcm9sbCBldmVudCB0aGF0IGhhcHBlbnMgYXMgYSByZXN1bHQgb2YgZGltZW5zaW9ucyBjaGFuZ2luZyBhcyB0aGlzIHNob3VsZFxuICAgIC8vIG5ldmVyIGNhdXNlIGEgc2Nyb2xsTGluZXMgY2FsbCwgb25seSBzZXRTY3JvbGxQb3NpdGlvbiBjYW4gZG8gdGhhdC5cbiAgICB0aGlzLl9zdXBwcmVzc09uU2Nyb2xsSGFuZGxlciA9IHRydWU7XG4gICAgdGhpcy5fc2Nyb2xsYWJsZUVsZW1lbnQuc2V0U2Nyb2xsRGltZW5zaW9ucyh7XG4gICAgICBoZWlnaHQ6IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2FudmFzLmhlaWdodCxcbiAgICAgIHNjcm9sbEhlaWdodDogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCAqIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aFxuICAgIH0pO1xuICAgIHRoaXMuX3N1cHByZXNzT25TY3JvbGxIYW5kbGVyID0gZmFsc2U7XG5cbiAgICAvLyBJZiB5ZGlzcCBoYXMgYmVlbiBjaGFuZ2VkIGJ5IHNvbWUgb3RoZXIgY29tcG9uZW50IChpbnB1dC9idWZmZXIpLCB0aGVuIHN0b3AgYW5pbWF0aW5nIHNtb290aFxuICAgIC8vIHNjcm9sbCBhbmQgc2Nyb2xsIHRoZXJlIGltbWVkaWF0ZWx5LlxuICAgIGlmICh5ZGlzcCAhPT0gdGhpcy5fbGF0ZXN0WURpc3ApIHtcbiAgICAgIHRoaXMuX3Njcm9sbGFibGVFbGVtZW50LnNldFNjcm9sbFBvc2l0aW9uKHtcbiAgICAgICAgc2Nyb2xsVG9wOiB5ZGlzcCAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHRcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2lzU3luY2luZyA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlU2Nyb2xsKGU6IFNjcm9sbEV2ZW50KTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9pc0hhbmRsaW5nU2Nyb2xsIHx8IHRoaXMuX3N1cHByZXNzT25TY3JvbGxIYW5kbGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzSGFuZGxpbmdTY3JvbGwgPSB0cnVlO1xuICAgIGNvbnN0IG5ld1JvdyA9IE1hdGgucm91bmQoZS5zY3JvbGxUb3AgLyB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0KTtcbiAgICBjb25zdCBkaWZmID0gbmV3Um93IC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgaWYgKGRpZmYgIT09IDApIHtcbiAgICAgIHRoaXMuX2xhdGVzdFlEaXNwID0gbmV3Um93O1xuICAgICAgdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZmlyZShkaWZmKTtcbiAgICB9XG4gICAgdGhpcy5faXNIYW5kbGluZ1Njcm9sbCA9IGZhbHNlO1xuICB9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElDb3JlQnJvd3NlclNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElEZWNvcmF0aW9uU2VydmljZSwgSUludGVybmFsRGVjb3JhdGlvbiB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBjbGFzcyBCdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBfY29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfZGVjb3JhdGlvbkVsZW1lbnRzOiBNYXA8SUludGVybmFsRGVjb3JhdGlvbiwgSFRNTEVsZW1lbnQ+ID0gbmV3IE1hcCgpO1xuXG4gIHByaXZhdGUgX2FuaW1hdGlvbkZyYW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FsdEJ1ZmZlcklzQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2RpbWVuc2lvbnNDaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJQ29yZUJyb3dzZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZSxcbiAgICBASURlY29yYXRpb25TZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2RlY29yYXRpb25TZXJ2aWNlOiBJRGVjb3JhdGlvblNlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0tZGVjb3JhdGlvbi1jb250YWluZXInKTtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lcik7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoKSA9PiB0aGlzLl9kb1JlZnJlc2hEZWNvcmF0aW9ucygpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKCkgPT4ge1xuICAgICAgdGhpcy5fZGltZW5zaW9uc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fcXVldWVSZWZyZXNoKCk7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5vbkRwckNoYW5nZSgoKSA9PiB0aGlzLl9xdWV1ZVJlZnJlc2goKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuX2FsdEJ1ZmZlcklzQWN0aXZlID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIgPT09IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hbHQ7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKCkgPT4gdGhpcy5fcXVldWVSZWZyZXNoKCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZW1vdmVkKGRlY29yYXRpb24gPT4gdGhpcy5fcmVtb3ZlRGVjb3JhdGlvbihkZWNvcmF0aW9uKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICB0aGlzLl9jb250YWluZXIucmVtb3ZlKCk7XG4gICAgICB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuY2xlYXIoKTtcbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIF9xdWV1ZVJlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmFkZFJlZnJlc2hDYWxsYmFjaygoKSA9PiB7XG4gICAgICB0aGlzLl9kb1JlZnJlc2hEZWNvcmF0aW9ucygpO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9kb1JlZnJlc2hEZWNvcmF0aW9ucygpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IGRlY29yYXRpb24gb2YgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpIHtcbiAgICAgIHRoaXMuX3JlbmRlckRlY29yYXRpb24oZGVjb3JhdGlvbik7XG4gICAgfVxuICAgIHRoaXMuX2RpbWVuc2lvbnNDaGFuZ2VkID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJEZWNvcmF0aW9uKGRlY29yYXRpb246IElJbnRlcm5hbERlY29yYXRpb24pOiB2b2lkIHtcbiAgICB0aGlzLl9yZWZyZXNoU3R5bGUoZGVjb3JhdGlvbik7XG4gICAgaWYgKHRoaXMuX2RpbWVuc2lvbnNDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoWFBvc2l0aW9uKGRlY29yYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NyZWF0ZUVsZW1lbnQoZGVjb3JhdGlvbjogSUludGVybmFsRGVjb3JhdGlvbik6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm1haW5Eb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWRlY29yYXRpb24nKTtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3h0ZXJtLWRlY29yYXRpb24tdG9wLWxheWVyJywgZGVjb3JhdGlvbj8ub3B0aW9ucz8ubGF5ZXIgPT09ICd0b3AnKTtcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7TWF0aC5yb3VuZCgoZGVjb3JhdGlvbi5vcHRpb25zLndpZHRoIHx8IDEpICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoKX1weGA7XG4gICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHsoZGVjb3JhdGlvbi5vcHRpb25zLmhlaWdodCB8fCAxKSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUudG9wID0gYCR7KGRlY29yYXRpb24ubWFya2VyLmxpbmUgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLnlkaXNwKSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IGAke3RoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuXG4gICAgY29uc3QgeCA9IGRlY29yYXRpb24ub3B0aW9ucy54ID8/IDA7XG4gICAgaWYgKHggJiYgeCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgLy8gZXhjZWVkZWQgdGhlIGNvbnRhaW5lciB3aWR0aCwgc28gaGlkZVxuICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgICB0aGlzLl9yZWZyZXNoWFBvc2l0aW9uKGRlY29yYXRpb24sIGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoU3R5bGUoZGVjb3JhdGlvbjogSUludGVybmFsRGVjb3JhdGlvbik6IHZvaWQge1xuICAgIGNvbnN0IGxpbmUgPSBkZWNvcmF0aW9uLm1hcmtlci5saW5lIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS55ZGlzcDtcbiAgICBpZiAobGluZSA8IDAgfHwgbGluZSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIC8vIG91dHNpZGUgb2Ygdmlld3BvcnRcbiAgICAgIGlmIChkZWNvcmF0aW9uLmVsZW1lbnQpIHtcbiAgICAgICAgZGVjb3JhdGlvbi5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGRlY29yYXRpb24ub25SZW5kZXJFbWl0dGVyLmZpcmUoZGVjb3JhdGlvbi5lbGVtZW50KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGVsZW1lbnQgPSB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZ2V0KGRlY29yYXRpb24pO1xuICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLl9jcmVhdGVFbGVtZW50KGRlY29yYXRpb24pO1xuICAgICAgICBkZWNvcmF0aW9uLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuc2V0KGRlY29yYXRpb24sIGVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIGRlY29yYXRpb24ub25EaXNwb3NlKCgpID0+IHtcbiAgICAgICAgICB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZGVsZXRlKGRlY29yYXRpb24pO1xuICAgICAgICAgIGVsZW1lbnQhLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMuX2FsdEJ1ZmZlcklzQWN0aXZlID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICAgIGlmICghdGhpcy5fYWx0QnVmZmVySXNBY3RpdmUpIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke01hdGgucm91bmQoKGRlY29yYXRpb24ub3B0aW9ucy53aWR0aCB8fCAxKSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aCl9cHhgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmhlaWdodCA9IGAkeyhkZWNvcmF0aW9uLm9wdGlvbnMuaGVpZ2h0IHx8IDEpICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodH1weGA7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudG9wID0gYCR7bGluZSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmxpbmVIZWlnaHQgPSBgJHt0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0fXB4YDtcbiAgICAgIH1cbiAgICAgIGRlY29yYXRpb24ub25SZW5kZXJFbWl0dGVyLmZpcmUoZWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFhQb3NpdGlvbihkZWNvcmF0aW9uOiBJSW50ZXJuYWxEZWNvcmF0aW9uLCBlbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZCA9IGRlY29yYXRpb24uZWxlbWVudCk6IHZvaWQge1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB4ID0gZGVjb3JhdGlvbi5vcHRpb25zLnggPz8gMDtcbiAgICBpZiAoKGRlY29yYXRpb24ub3B0aW9ucy5hbmNob3IgfHwgJ2xlZnQnKSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IHggPyBgJHt4ICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRofXB4YCA6ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSB4ID8gYCR7eCAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aH1weGAgOiAnJztcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVEZWNvcmF0aW9uKGRlY29yYXRpb246IElJbnRlcm5hbERlY29yYXRpb24pOiB2b2lkIHtcbiAgICB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZ2V0KGRlY29yYXRpb24pPy5yZW1vdmUoKTtcbiAgICB0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZGVsZXRlKGRlY29yYXRpb24pO1xuICAgIGRlY29yYXRpb24uZGlzcG9zZSgpO1xuICB9XG59XG4iLCAiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElJbnRlcm5hbERlY29yYXRpb24gfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDb2xvclpvbmVTdG9yZSB7XG4gIHJlYWRvbmx5IHpvbmVzOiBJQ29sb3Jab25lW107XG4gIGNsZWFyKCk6IHZvaWQ7XG4gIGFkZERlY29yYXRpb24oZGVjb3JhdGlvbjogSUludGVybmFsRGVjb3JhdGlvbik6IHZvaWQ7XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBhbW91bnQgb2YgcGFkZGluZyBpbiBsaW5lcyB0aGF0IHdpbGwgYmUgYWRkZWQgYmV0d2VlbiB6b25lcywgaWYgbmV3IGxpbmVzIGludGVyc2VjdFxuICAgKiB0aGUgcGFkZGluZyB0aGV5IHdpbGwgYmUgbWVyZ2VkIGludG8gdGhlIHNhbWUgem9uZS5cbiAgICovXG4gIHNldFBhZGRpbmcocGFkZGluZzogeyBbcG9zaXRpb246IHN0cmluZ106IG51bWJlciB9KTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29sb3Jab25lIHtcbiAgLyoqIENvbG9yIGluIGEgZm9ybWF0IHN1cHBvcnRlZCBieSBjYW52YXMnIGZpbGxTdHlsZS4gKi9cbiAgY29sb3I6IHN0cmluZztcbiAgcG9zaXRpb246ICdmdWxsJyB8ICdsZWZ0JyB8ICdjZW50ZXInIHwgJ3JpZ2h0JyB8IHVuZGVmaW5lZDtcbiAgc3RhcnRCdWZmZXJMaW5lOiBudW1iZXI7XG4gIGVuZEJ1ZmZlckxpbmU6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIElNaW5pbWFsRGVjb3JhdGlvbkZvckNvbG9yWm9uZSB7XG4gIG1hcmtlcjogUGljazxJSW50ZXJuYWxEZWNvcmF0aW9uWydtYXJrZXInXSwgJ2xpbmUnPjtcbiAgb3B0aW9uczogUGljazxJSW50ZXJuYWxEZWNvcmF0aW9uWydvcHRpb25zJ10sICdvdmVydmlld1J1bGVyT3B0aW9ucyc+O1xufVxuXG5leHBvcnQgY2xhc3MgQ29sb3Jab25lU3RvcmUgaW1wbGVtZW50cyBJQ29sb3Jab25lU3RvcmUge1xuICBwcml2YXRlIF96b25lczogSUNvbG9yWm9uZVtdID0gW107XG5cbiAgLy8gVGhlIHpvbmUgcG9vbCBpcyB1c2VkIHRvIGtlZXAgem9uZSBvYmplY3RzIGZyb20gYmVpbmcgZnJlZWQgYmV0d2VlbiBjbGVhcmluZyB0aGUgY29sb3Igem9uZVxuICAvLyBzdG9yZSBhbmQgZmV0Y2hpbmcgdGhlIHpvbmVzLiBUaGlzIGhlbHBzIHJlZHVjZSBHQyBwcmVzc3VyZSBzaW5jZSB0aGUgY29sb3Igem9uZXMgYXJlXG4gIC8vIGFjY3VtdWxhdGVkIG9uIHBvdGVudGlhbGx5IGV2ZXJ5IHNjcm9sbCBldmVudC5cbiAgcHJpdmF0ZSBfem9uZVBvb2w6IElDb2xvclpvbmVbXSA9IFtdO1xuICBwcml2YXRlIF96b25lUG9vbEluZGV4ID0gMDtcblxuICBwcml2YXRlIF9saW5lUGFkZGluZzogeyBbcG9zaXRpb246IHN0cmluZ106IG51bWJlciB9ID0ge1xuICAgIGZ1bGw6IDAsXG4gICAgbGVmdDogMCxcbiAgICBjZW50ZXI6IDAsXG4gICAgcmlnaHQ6IDBcbiAgfTtcblxuICBwdWJsaWMgZ2V0IHpvbmVzKCk6IElDb2xvclpvbmVbXSB7XG4gICAgLy8gVHJpbSB0aGUgem9uZSBwb29sIHRvIGZyZWUgdW51c2VkIG1lbW9yeVxuICAgIHRoaXMuX3pvbmVQb29sLmxlbmd0aCA9IE1hdGgubWluKHRoaXMuX3pvbmVQb29sLmxlbmd0aCwgdGhpcy5fem9uZXMubGVuZ3RoKTtcbiAgICByZXR1cm4gdGhpcy5fem9uZXM7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fem9uZXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl96b25lUG9vbEluZGV4ID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBhZGREZWNvcmF0aW9uKGRlY29yYXRpb246IElNaW5pbWFsRGVjb3JhdGlvbkZvckNvbG9yWm9uZSk6IHZvaWQge1xuICAgIGlmICghZGVjb3JhdGlvbi5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAoY29uc3QgeiBvZiB0aGlzLl96b25lcykge1xuICAgICAgaWYgKHouY29sb3IgPT09IGRlY29yYXRpb24ub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5jb2xvciAmJlxuICAgICAgICAgIHoucG9zaXRpb24gPT09IGRlY29yYXRpb24ub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgICBpZiAodGhpcy5fbGluZUludGVyc2VjdHNab25lKHosIGRlY29yYXRpb24ubWFya2VyLmxpbmUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9saW5lQWRqYWNlbnRUb1pvbmUoeiwgZGVjb3JhdGlvbi5tYXJrZXIubGluZSwgZGVjb3JhdGlvbi5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uKSkge1xuICAgICAgICAgIHRoaXMuX2FkZExpbmVUb1pvbmUoeiwgZGVjb3JhdGlvbi5tYXJrZXIubGluZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIENyZWF0ZSB1c2luZyB6b25lIHBvb2wgaWYgcG9zc2libGVcbiAgICBpZiAodGhpcy5fem9uZVBvb2xJbmRleCA8IHRoaXMuX3pvbmVQb29sLmxlbmd0aCkge1xuICAgICAgdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0uY29sb3IgPSBkZWNvcmF0aW9uLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3I7XG4gICAgICB0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5wb3NpdGlvbiA9IGRlY29yYXRpb24ub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbjtcbiAgICAgIHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLnN0YXJ0QnVmZmVyTGluZSA9IGRlY29yYXRpb24ubWFya2VyLmxpbmU7XG4gICAgICB0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5lbmRCdWZmZXJMaW5lID0gZGVjb3JhdGlvbi5tYXJrZXIubGluZTtcbiAgICAgIHRoaXMuX3pvbmVzLnB1c2godGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleCsrXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIENyZWF0ZVxuICAgIHRoaXMuX3pvbmVzLnB1c2goe1xuICAgICAgY29sb3I6IGRlY29yYXRpb24ub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5jb2xvcixcbiAgICAgIHBvc2l0aW9uOiBkZWNvcmF0aW9uLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24sXG4gICAgICBzdGFydEJ1ZmZlckxpbmU6IGRlY29yYXRpb24ubWFya2VyLmxpbmUsXG4gICAgICBlbmRCdWZmZXJMaW5lOiBkZWNvcmF0aW9uLm1hcmtlci5saW5lXG4gICAgfSk7XG4gICAgdGhpcy5fem9uZVBvb2wucHVzaCh0aGlzLl96b25lc1t0aGlzLl96b25lcy5sZW5ndGggLSAxXSk7XG4gICAgdGhpcy5fem9uZVBvb2xJbmRleCsrO1xuICB9XG5cbiAgcHVibGljIHNldFBhZGRpbmcocGFkZGluZzogeyBbcG9zaXRpb246IHN0cmluZ106IG51bWJlciB9KTogdm9pZCB7XG4gICAgdGhpcy5fbGluZVBhZGRpbmcgPSBwYWRkaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBfbGluZUludGVyc2VjdHNab25lKHpvbmU6IElDb2xvclpvbmUsIGxpbmU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBsaW5lID49IHpvbmUuc3RhcnRCdWZmZXJMaW5lICYmXG4gICAgICBsaW5lIDw9IHpvbmUuZW5kQnVmZmVyTGluZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9saW5lQWRqYWNlbnRUb1pvbmUoem9uZTogSUNvbG9yWm9uZSwgbGluZTogbnVtYmVyLCBwb3NpdGlvbjogSUNvbG9yWm9uZVsncG9zaXRpb24nXSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAobGluZSA+PSB6b25lLnN0YXJ0QnVmZmVyTGluZSAtIHRoaXMuX2xpbmVQYWRkaW5nW3Bvc2l0aW9uIHx8ICdmdWxsJ10pICYmXG4gICAgICAobGluZSA8PSB6b25lLmVuZEJ1ZmZlckxpbmUgKyB0aGlzLl9saW5lUGFkZGluZ1twb3NpdGlvbiB8fCAnZnVsbCddKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9hZGRMaW5lVG9ab25lKHpvbmU6IElDb2xvclpvbmUsIGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIHpvbmUuc3RhcnRCdWZmZXJMaW5lID0gTWF0aC5taW4oem9uZS5zdGFydEJ1ZmZlckxpbmUsIGxpbmUpO1xuICAgIHpvbmUuZW5kQnVmZmVyTGluZSA9IE1hdGgubWF4KHpvbmUuZW5kQnVmZmVyTGluZSwgbGluZSk7XG4gIH1cbn1cbiIsICIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgQ29sb3Jab25lU3RvcmUsIElDb2xvclpvbmUsIElDb2xvclpvbmVTdG9yZSB9IGZyb20gJ2Jyb3dzZXIvZGVjb3JhdGlvbnMvQ29sb3Jab25lU3RvcmUnO1xuaW1wb3J0IHsgSUNvcmVCcm93c2VyU2VydmljZSwgSVJlbmRlclNlcnZpY2UsIElUaGVtZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSURlY29yYXRpb25TZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG5jb25zdCBlbnVtIENvbnN0YW50cyB7XG4gIE9WRVJWSUVXX1JVTEVSX0JPUkRFUl9XSURUSCA9IDFcbn1cblxuLy8gSGVscGVyIG9iamVjdHMgdG8gYXZvaWQgZXhjZXNzaXZlIGNhbGN1bGF0aW9uIGFuZCBnYXJiYWdlIGNvbGxlY3Rpb24gZHVyaW5nIHJlbmRlcmluZy4gVGhlc2UgYXJlXG4vLyBzdGF0aWMgdmFsdWVzIGZvciBlYWNoIHJlbmRlciBhbmQgY2FuIGJlIGFjY2Vzc2VkIHVzaW5nIHRoZSBkZWNvcmF0aW9uIHBvc2l0aW9uIGFzIHRoZSBrZXkuXG5jb25zdCBkcmF3SGVpZ2h0ID0ge1xuICBmdWxsOiAwLFxuICBsZWZ0OiAwLFxuICBjZW50ZXI6IDAsXG4gIHJpZ2h0OiAwXG59O1xuY29uc3QgZHJhd1dpZHRoID0ge1xuICBmdWxsOiAwLFxuICBsZWZ0OiAwLFxuICBjZW50ZXI6IDAsXG4gIHJpZ2h0OiAwXG59O1xuY29uc3QgZHJhd1ggPSB7XG4gIGZ1bGw6IDAsXG4gIGxlZnQ6IDAsXG4gIGNlbnRlcjogMCxcbiAgcmlnaHQ6IDBcbn07XG5cbmV4cG9ydCBjbGFzcyBPdmVydmlld1J1bGVyUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBfY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX2NvbG9yWm9uZVN0b3JlOiBJQ29sb3Jab25lU3RvcmUgPSBuZXcgQ29sb3Jab25lU3RvcmUoKTtcbiAgcHJpdmF0ZSBnZXQgX3dpZHRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMub3ZlcnZpZXdSdWxlcj8ud2lkdGggfHwgMDtcbiAgfVxuICBwcml2YXRlIF9hbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnM6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB0cnVlO1xuICBwcml2YXRlIF9zaG91bGRVcGRhdGVBbmNob3I6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB0cnVlO1xuICBwcml2YXRlIF9sYXN0S25vd25CdWZmZXJMZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfY29udGFpbmVySGVpZ2h0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdmlld3BvcnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9zY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElEZWNvcmF0aW9uU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9kZWNvcmF0aW9uU2VydmljZTogSURlY29yYXRpb25TZXJ2aWNlLFxuICAgIEBJUmVuZGVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElUaGVtZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfdGhlbWVTZXJ2aWNlOiBJVGhlbWVTZXJ2aWNlLFxuICAgIEBJQ29yZUJyb3dzZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2NhbnZhcyA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5tYWluRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgdGhpcy5fY2FudmFzLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWRlY29yYXRpb24tb3ZlcnZpZXctcnVsZXInKTtcbiAgICB0aGlzLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5wYXJlbnRFbGVtZW50Py5pbnNlcnRCZWZvcmUodGhpcy5fY2FudmFzLCB0aGlzLl92aWV3cG9ydEVsZW1lbnQpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB0aGlzLl9jYW52YXM/LnJlbW92ZSgpKSk7XG5cbiAgICBjb25zdCBjdHggPSB0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAoIWN0eCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDdHggY2Fubm90IGJlIG51bGwnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY3R4ID0gY3R4O1xuICAgIH1cblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKCkgPT4gdGhpcy5fcXVldWVSZWZyZXNoKHVuZGVmaW5lZCwgdHJ1ZSkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZW1vdmVkKCgpID0+IHRoaXMuX3F1ZXVlUmVmcmVzaCh1bmRlZmluZWQsIHRydWUpKSk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoKSA9PiB0aGlzLl9xdWV1ZVJlZnJlc2goKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuX2NhbnZhcyEuc3R5bGUuZGlzcGxheSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyID09PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWx0ID8gJ25vbmUnIDogJ2Jsb2NrJztcbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblNjcm9sbCgoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fbGFzdEtub3duQnVmZmVyTGVuZ3RoICE9PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMubm9ybWFsLmxpbmVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cygpO1xuICAgICAgICB0aGlzLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIC8vIENvbnRhaW5lciBoZWlnaHQgY2hhbmdlZFxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXIoKCk6IHZvaWQgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jb250YWluZXJIZWlnaHQgfHwgdGhpcy5fY29udGFpbmVySGVpZ2h0ICE9PSB0aGlzLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICB0aGlzLl9xdWV1ZVJlZnJlc2godHJ1ZSk7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckhlaWdodCA9IHRoaXMuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5vbkRwckNoYW5nZSgoKSA9PiB0aGlzLl9xdWV1ZVJlZnJlc2godHJ1ZSkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdvdmVydmlld1J1bGVyJywgKCkgPT4gdGhpcy5fcXVldWVSZWZyZXNoKHRydWUpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fdGhlbWVTZXJ2aWNlLm9uQ2hhbmdlQ29sb3JzKCgpID0+IHRoaXMuX3F1ZXVlUmVmcmVzaCgpKSk7XG4gICAgdGhpcy5fcXVldWVSZWZyZXNoKHRydWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaERyYXdDb25zdGFudHMoKTogdm9pZCB7XG4gICAgLy8gd2lkdGhcbiAgICBjb25zdCBvdXRlcldpZHRoID0gTWF0aC5mbG9vcigodGhpcy5fY2FudmFzLndpZHRoIC0gQ29uc3RhbnRzLk9WRVJWSUVXX1JVTEVSX0JPUkRFUl9XSURUSCkgLyAzKTtcbiAgICBjb25zdCBpbm5lcldpZHRoID0gTWF0aC5jZWlsKCh0aGlzLl9jYW52YXMud2lkdGggLSBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRIKSAvIDMpO1xuICAgIGRyYXdXaWR0aC5mdWxsID0gdGhpcy5fY2FudmFzLndpZHRoO1xuICAgIGRyYXdXaWR0aC5sZWZ0ID0gb3V0ZXJXaWR0aDtcbiAgICBkcmF3V2lkdGguY2VudGVyID0gaW5uZXJXaWR0aDtcbiAgICBkcmF3V2lkdGgucmlnaHQgPSBvdXRlcldpZHRoO1xuICAgIC8vIGhlaWdodFxuICAgIHRoaXMuX3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzKCk7XG4gICAgLy8geFxuICAgIGRyYXdYLmZ1bGwgPSBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRIO1xuICAgIGRyYXdYLmxlZnQgPSBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRIO1xuICAgIGRyYXdYLmNlbnRlciA9IENvbnN0YW50cy5PVkVSVklFV19SVUxFUl9CT1JERVJfV0lEVEggKyBkcmF3V2lkdGgubGVmdDtcbiAgICBkcmF3WC5yaWdodCA9IENvbnN0YW50cy5PVkVSVklFV19SVUxFUl9CT1JERVJfV0lEVEggKyBkcmF3V2lkdGgubGVmdCArIGRyYXdXaWR0aC5jZW50ZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cygpOiB2b2lkIHtcbiAgICBkcmF3SGVpZ2h0LmZ1bGwgPSBNYXRoLnJvdW5kKDIgKiB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByKTtcbiAgICAvLyBDYWxjdWxhdGUgYWN0dWFsIHBpeGVscyBwZXIgbGluZVxuICAgIGNvbnN0IHBpeGVsc1BlckxpbmUgPSB0aGlzLl9jYW52YXMuaGVpZ2h0IC8gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoO1xuICAgIC8vIENsYW1wIGFjdHVhbCBwaXhlbHMgd2l0aGluIGEgcmFuZ2VcbiAgICBjb25zdCBub25GdWxsSGVpZ2h0ID0gTWF0aC5yb3VuZChNYXRoLm1heChNYXRoLm1pbihwaXhlbHNQZXJMaW5lLCAxMiksIDYpICogdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmRwcik7XG4gICAgZHJhd0hlaWdodC5sZWZ0ID0gbm9uRnVsbEhlaWdodDtcbiAgICBkcmF3SGVpZ2h0LmNlbnRlciA9IG5vbkZ1bGxIZWlnaHQ7XG4gICAgZHJhd0hlaWdodC5yaWdodCA9IG5vbkZ1bGxIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpOiB2b2lkIHtcbiAgICB0aGlzLl9jb2xvclpvbmVTdG9yZS5zZXRQYWRkaW5nKHtcbiAgICAgIGZ1bGw6IE1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGggLyAodGhpcy5fY2FudmFzLmhlaWdodCAtIDEpICogZHJhd0hlaWdodC5mdWxsKSxcbiAgICAgIGxlZnQ6IE1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGggLyAodGhpcy5fY2FudmFzLmhlaWdodCAtIDEpICogZHJhd0hlaWdodC5sZWZ0KSxcbiAgICAgIGNlbnRlcjogTWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCAvICh0aGlzLl9jYW52YXMuaGVpZ2h0IC0gMSkgKiBkcmF3SGVpZ2h0LmNlbnRlciksXG4gICAgICByaWdodDogTWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCAvICh0aGlzLl9jYW52YXMuaGVpZ2h0IC0gMSkgKiBkcmF3SGVpZ2h0LnJpZ2h0KVxuICAgIH0pO1xuICAgIHRoaXMuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5ub3JtYWwubGluZXMubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoID0gYCR7dGhpcy5fd2lkdGh9cHhgO1xuICAgIHRoaXMuX2NhbnZhcy53aWR0aCA9IE1hdGgucm91bmQodGhpcy5fd2lkdGggKiB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByKTtcbiAgICB0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHR9cHhgO1xuICAgIHRoaXMuX2NhbnZhcy5oZWlnaHQgPSBNYXRoLnJvdW5kKHRoaXMuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0ICogdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmRwcik7XG4gICAgdGhpcy5fcmVmcmVzaERyYXdDb25zdGFudHMoKTtcbiAgICB0aGlzLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaERlY29yYXRpb25zKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucygpO1xuICAgIH1cbiAgICB0aGlzLl9jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuX2NhbnZhcy53aWR0aCwgdGhpcy5fY2FudmFzLmhlaWdodCk7XG4gICAgdGhpcy5fY29sb3Jab25lU3RvcmUuY2xlYXIoKTtcbiAgICBmb3IgKGNvbnN0IGRlY29yYXRpb24gb2YgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpIHtcbiAgICAgIHRoaXMuX2NvbG9yWm9uZVN0b3JlLmFkZERlY29yYXRpb24oZGVjb3JhdGlvbik7XG4gICAgfVxuICAgIHRoaXMuX2N0eC5saW5lV2lkdGggPSAxO1xuICAgIHRoaXMuX3JlbmRlclJ1bGVyT3V0bGluZSgpO1xuICAgIGNvbnN0IHpvbmVzID0gdGhpcy5fY29sb3Jab25lU3RvcmUuem9uZXM7XG4gICAgZm9yIChjb25zdCB6b25lIG9mIHpvbmVzKSB7XG4gICAgICBpZiAoem9uZS5wb3NpdGlvbiAhPT0gJ2Z1bGwnKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNvbG9yWm9uZSh6b25lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCB6b25lIG9mIHpvbmVzKSB7XG4gICAgICBpZiAoem9uZS5wb3NpdGlvbiA9PT0gJ2Z1bGwnKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlckNvbG9yWm9uZSh6b25lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucyA9IGZhbHNlO1xuICAgIHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvciA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVuZGVyUnVsZXJPdXRsaW5lKCk6IHZvaWQge1xuICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzLm92ZXJ2aWV3UnVsZXJCb3JkZXIuY3NzO1xuICAgIHRoaXMuX2N0eC5maWxsUmVjdCgwLCAwLCBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRILCB0aGlzLl9jYW52YXMuaGVpZ2h0KTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5vdmVydmlld1J1bGVyLnNob3dUb3BCb3JkZXIpIHtcbiAgICAgIHRoaXMuX2N0eC5maWxsUmVjdChDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRILCAwLCB0aGlzLl9jYW52YXMud2lkdGggLSBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRILCBDb25zdGFudHMuT1ZFUlZJRVdfUlVMRVJfQk9SREVSX1dJRFRIKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMub3ZlcnZpZXdSdWxlci5zaG93Qm90dG9tQm9yZGVyKSB7XG4gICAgICB0aGlzLl9jdHguZmlsbFJlY3QoQ29uc3RhbnRzLk9WRVJWSUVXX1JVTEVSX0JPUkRFUl9XSURUSCwgdGhpcy5fY2FudmFzLmhlaWdodCAtIENvbnN0YW50cy5PVkVSVklFV19SVUxFUl9CT1JERVJfV0lEVEgsIHRoaXMuX2NhbnZhcy53aWR0aCAtIENvbnN0YW50cy5PVkVSVklFV19SVUxFUl9CT1JERVJfV0lEVEgsIHRoaXMuX2NhbnZhcy5oZWlnaHQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlckNvbG9yWm9uZSh6b25lOiBJQ29sb3Jab25lKTogdm9pZCB7XG4gICAgdGhpcy5fY3R4LmZpbGxTdHlsZSA9IHpvbmUuY29sb3I7XG4gICAgdGhpcy5fY3R4LmZpbGxSZWN0KFxuICAgICAgLyogeCAqLyBkcmF3WFt6b25lLnBvc2l0aW9uIHx8ICdmdWxsJ10sXG4gICAgICAvKiB5ICovIE1hdGgucm91bmQoXG4gICAgICAgICh0aGlzLl9jYW52YXMuaGVpZ2h0IC0gMSkgKiAvLyAtMSB0byBlbnN1cmUgYXQgbGVhc3QgMnB4IGFyZSBhbGxvd2VkIGZvciBkZWNvcmF0aW9uIG9uIGxhc3QgbGluZVxuICAgICAgICAoem9uZS5zdGFydEJ1ZmZlckxpbmUgLyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCkgLSBkcmF3SGVpZ2h0W3pvbmUucG9zaXRpb24gfHwgJ2Z1bGwnXSAvIDJcbiAgICAgICksXG4gICAgICAvKiB3ICovIGRyYXdXaWR0aFt6b25lLnBvc2l0aW9uIHx8ICdmdWxsJ10sXG4gICAgICAvKiBoICovIE1hdGgucm91bmQoXG4gICAgICAgICh0aGlzLl9jYW52YXMuaGVpZ2h0IC0gMSkgKiAvLyAtMSB0byBlbnN1cmUgYXQgbGVhc3QgMnB4IGFyZSBhbGxvd2VkIGZvciBkZWNvcmF0aW9uIG9uIGxhc3QgbGluZVxuICAgICAgICAoKHpvbmUuZW5kQnVmZmVyTGluZSAtIHpvbmUuc3RhcnRCdWZmZXJMaW5lKSAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoKSArIGRyYXdIZWlnaHRbem9uZS5wb3NpdGlvbiB8fCAnZnVsbCddXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX3F1ZXVlUmVmcmVzaCh1cGRhdGVDYW52YXNEaW1lbnNpb25zPzogYm9vbGVhbiwgdXBkYXRlQW5jaG9yPzogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnMgPSB1cGRhdGVDYW52YXNEaW1lbnNpb25zIHx8IHRoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnM7XG4gICAgdGhpcy5fc2hvdWxkVXBkYXRlQW5jaG9yID0gdXBkYXRlQW5jaG9yIHx8IHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcjtcbiAgICBpZiAodGhpcy5fYW5pbWF0aW9uRnJhbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgIHRoaXMuX3JlZnJlc2hEZWNvcmF0aW9ucygpO1xuICAgICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG4gICAgfSk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbi8qKlxuICogQzAgY29udHJvbCBjb2Rlc1xuICogU2VlID0gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQzBfYW5kX0MxX2NvbnRyb2xfY29kZXNcbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBDMCB7XG4gIC8qKiBOdWxsIChDYXJldCA9IF5ALCBDID0gXFwwKSAqL1xuICBleHBvcnQgY29uc3QgTlVMID0gJ1xceDAwJztcbiAgLyoqIFN0YXJ0IG9mIEhlYWRpbmcgKENhcmV0ID0gXkEpICovXG4gIGV4cG9ydCBjb25zdCBTT0ggPSAnXFx4MDEnO1xuICAvKiogU3RhcnQgb2YgVGV4dCAoQ2FyZXQgPSBeQikgKi9cbiAgZXhwb3J0IGNvbnN0IFNUWCA9ICdcXHgwMic7XG4gIC8qKiBFbmQgb2YgVGV4dCAoQ2FyZXQgPSBeQykgKi9cbiAgZXhwb3J0IGNvbnN0IEVUWCA9ICdcXHgwMyc7XG4gIC8qKiBFbmQgb2YgVHJhbnNtaXNzaW9uIChDYXJldCA9IF5EKSAqL1xuICBleHBvcnQgY29uc3QgRU9UID0gJ1xceDA0JztcbiAgLyoqIEVucXVpcnkgKENhcmV0ID0gXkUpICovXG4gIGV4cG9ydCBjb25zdCBFTlEgPSAnXFx4MDUnO1xuICAvKiogQWNrbm93bGVkZ2UgKENhcmV0ID0gXkYpICovXG4gIGV4cG9ydCBjb25zdCBBQ0sgPSAnXFx4MDYnO1xuICAvKiogQmVsbCAoQ2FyZXQgPSBeRywgQyA9IFxcYSkgKi9cbiAgZXhwb3J0IGNvbnN0IEJFTCA9ICdcXHgwNyc7XG4gIC8qKiBCYWNrc3BhY2UgKENhcmV0ID0gXkgsIEMgPSBcXGIpICovXG4gIGV4cG9ydCBjb25zdCBCUyAgPSAnXFx4MDgnO1xuICAvKiogQ2hhcmFjdGVyIFRhYnVsYXRpb24sIEhvcml6b250YWwgVGFidWxhdGlvbiAoQ2FyZXQgPSBeSSwgQyA9IFxcdCkgKi9cbiAgZXhwb3J0IGNvbnN0IEhUICA9ICdcXHgwOSc7XG4gIC8qKiBMaW5lIEZlZWQgKENhcmV0ID0gXkosIEMgPSBcXG4pICovXG4gIGV4cG9ydCBjb25zdCBMRiAgPSAnXFx4MGEnO1xuICAvKiogTGluZSBUYWJ1bGF0aW9uLCBWZXJ0aWNhbCBUYWJ1bGF0aW9uIChDYXJldCA9IF5LLCBDID0gXFx2KSAqL1xuICBleHBvcnQgY29uc3QgVlQgID0gJ1xceDBiJztcbiAgLyoqIEZvcm0gRmVlZCAoQ2FyZXQgPSBeTCwgQyA9IFxcZikgKi9cbiAgZXhwb3J0IGNvbnN0IEZGICA9ICdcXHgwYyc7XG4gIC8qKiBDYXJyaWFnZSBSZXR1cm4gKENhcmV0ID0gXk0sIEMgPSBcXHIpICovXG4gIGV4cG9ydCBjb25zdCBDUiAgPSAnXFx4MGQnO1xuICAvKiogU2hpZnQgT3V0IChDYXJldCA9IF5OKSAqL1xuICBleHBvcnQgY29uc3QgU08gID0gJ1xceDBlJztcbiAgLyoqIFNoaWZ0IEluIChDYXJldCA9IF5PKSAqL1xuICBleHBvcnQgY29uc3QgU0kgID0gJ1xceDBmJztcbiAgLyoqIERhdGEgTGluayBFc2NhcGUgKENhcmV0ID0gXlApICovXG4gIGV4cG9ydCBjb25zdCBETEUgPSAnXFx4MTAnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgT25lIChYT04pIChDYXJldCA9IF5RKSAqL1xuICBleHBvcnQgY29uc3QgREMxID0gJ1xceDExJztcbiAgLyoqIERldmljZSBDb250cm9sIFR3byAoQ2FyZXQgPSBeUikgKi9cbiAgZXhwb3J0IGNvbnN0IERDMiA9ICdcXHgxMic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBUaHJlZSAoWE9GRikgKENhcmV0ID0gXlMpICovXG4gIGV4cG9ydCBjb25zdCBEQzMgPSAnXFx4MTMnO1xuICAvKiogRGV2aWNlIENvbnRyb2wgRm91ciAoQ2FyZXQgPSBeVCkgKi9cbiAgZXhwb3J0IGNvbnN0IERDNCA9ICdcXHgxNCc7XG4gIC8qKiBOZWdhdGl2ZSBBY2tub3dsZWRnZSAoQ2FyZXQgPSBeVSkgKi9cbiAgZXhwb3J0IGNvbnN0IE5BSyA9ICdcXHgxNSc7XG4gIC8qKiBTeW5jaHJvbm91cyBJZGxlIChDYXJldCA9IF5WKSAqL1xuICBleHBvcnQgY29uc3QgU1lOID0gJ1xceDE2JztcbiAgLyoqIEVuZCBvZiBUcmFuc21pc3Npb24gQmxvY2sgKENhcmV0ID0gXlcpICovXG4gIGV4cG9ydCBjb25zdCBFVEIgPSAnXFx4MTcnO1xuICAvKiogQ2FuY2VsIChDYXJldCA9IF5YKSAqL1xuICBleHBvcnQgY29uc3QgQ0FOID0gJ1xceDE4JztcbiAgLyoqIEVuZCBvZiBNZWRpdW0gKENhcmV0ID0gXlkpICovXG4gIGV4cG9ydCBjb25zdCBFTSAgPSAnXFx4MTknO1xuICAvKiogU3Vic3RpdHV0ZSAoQ2FyZXQgPSBeWikgKi9cbiAgZXhwb3J0IGNvbnN0IFNVQiA9ICdcXHgxYSc7XG4gIC8qKiBFc2NhcGUgKENhcmV0ID0gXlssIEMgPSBcXGUpICovXG4gIGV4cG9ydCBjb25zdCBFU0MgPSAnXFx4MWInO1xuICAvKiogRmlsZSBTZXBhcmF0b3IgKENhcmV0ID0gXlxcKSAqL1xuICBleHBvcnQgY29uc3QgRlMgID0gJ1xceDFjJztcbiAgLyoqIEdyb3VwIFNlcGFyYXRvciAoQ2FyZXQgPSBeXSkgKi9cbiAgZXhwb3J0IGNvbnN0IEdTICA9ICdcXHgxZCc7XG4gIC8qKiBSZWNvcmQgU2VwYXJhdG9yIChDYXJldCA9IF5eKSAqL1xuICBleHBvcnQgY29uc3QgUlMgID0gJ1xceDFlJztcbiAgLyoqIFVuaXQgU2VwYXJhdG9yIChDYXJldCA9IF5fKSAqL1xuICBleHBvcnQgY29uc3QgVVMgID0gJ1xceDFmJztcbiAgLyoqIFNwYWNlICovXG4gIGV4cG9ydCBjb25zdCBTUCAgPSAnXFx4MjAnO1xuICAvKiogRGVsZXRlIChDYXJldCA9IF4/KSAqL1xuICBleHBvcnQgY29uc3QgREVMID0gJ1xceDdmJztcbn1cblxuLyoqXG4gKiBDMSBjb250cm9sIGNvZGVzXG4gKiBTZWUgPSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9DMF9hbmRfQzFfY29udHJvbF9jb2Rlc1xuICovXG5leHBvcnQgbmFtZXNwYWNlIEMxIHtcbiAgLyoqIHBhZGRpbmcgY2hhcmFjdGVyICovXG4gIGV4cG9ydCBjb25zdCBQQUQgPSAnXFx4ODAnO1xuICAvKiogSGlnaCBPY3RldCBQcmVzZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhPUCA9ICdcXHg4MSc7XG4gIC8qKiBCcmVhayBQZXJtaXR0ZWQgSGVyZSAqL1xuICBleHBvcnQgY29uc3QgQlBIID0gJ1xceDgyJztcbiAgLyoqIE5vIEJyZWFrIEhlcmUgKi9cbiAgZXhwb3J0IGNvbnN0IE5CSCA9ICdcXHg4Myc7XG4gIC8qKiBJbmRleCAqL1xuICBleHBvcnQgY29uc3QgSU5EID0gJ1xceDg0JztcbiAgLyoqIE5leHQgTGluZSAqL1xuICBleHBvcnQgY29uc3QgTkVMID0gJ1xceDg1JztcbiAgLyoqIFN0YXJ0IG9mIFNlbGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNTQSA9ICdcXHg4Nic7XG4gIC8qKiBFbmQgb2YgU2VsZWN0ZWQgQXJlYSAqL1xuICBleHBvcnQgY29uc3QgRVNBID0gJ1xceDg3JztcbiAgLyoqIEhvcml6b250YWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IEhUUyA9ICdcXHg4OCc7XG4gIC8qKiBIb3Jpem9udGFsIFRhYnVsYXRpb24gV2l0aCBKdXN0aWZpY2F0aW9uICovXG4gIGV4cG9ydCBjb25zdCBIVEogPSAnXFx4ODknO1xuICAvKiogVmVydGljYWwgVGFidWxhdGlvbiBTZXQgKi9cbiAgZXhwb3J0IGNvbnN0IFZUUyA9ICdcXHg4YSc7XG4gIC8qKiBQYXJ0aWFsIExpbmUgRG93biAqL1xuICBleHBvcnQgY29uc3QgUExEID0gJ1xceDhiJztcbiAgLyoqIFBhcnRpYWwgTGluZSBVcCAqL1xuICBleHBvcnQgY29uc3QgUExVID0gJ1xceDhjJztcbiAgLyoqIFJldmVyc2UgSW5kZXggKi9cbiAgZXhwb3J0IGNvbnN0IFJJID0gJ1xceDhkJztcbiAgLyoqIFNpbmdsZS1TaGlmdCAyICovXG4gIGV4cG9ydCBjb25zdCBTUzIgPSAnXFx4OGUnO1xuICAvKiogU2luZ2xlLVNoaWZ0IDMgKi9cbiAgZXhwb3J0IGNvbnN0IFNTMyA9ICdcXHg4Zic7XG4gIC8qKiBEZXZpY2UgQ29udHJvbCBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IERDUyA9ICdcXHg5MCc7XG4gIC8qKiBQcml2YXRlIFVzZSAxICovXG4gIGV4cG9ydCBjb25zdCBQVTEgPSAnXFx4OTEnO1xuICAvKiogUHJpdmF0ZSBVc2UgMiAqL1xuICBleHBvcnQgY29uc3QgUFUyID0gJ1xceDkyJztcbiAgLyoqIFNldCBUcmFuc21pdCBTdGF0ZSAqL1xuICBleHBvcnQgY29uc3QgU1RTID0gJ1xceDkzJztcbiAgLyoqIERlc3RydWN0aXZlIGJhY2tzcGFjZSwgaW50ZW5kZWQgdG8gZWxpbWluYXRlIGFtYmlndWl0eSBhYm91dCBtZWFuaW5nIG9mIEJTLiAqL1xuICBleHBvcnQgY29uc3QgQ0NIID0gJ1xceDk0JztcbiAgLyoqIE1lc3NhZ2UgV2FpdGluZyAqL1xuICBleHBvcnQgY29uc3QgTVcgPSAnXFx4OTUnO1xuICAvKiogU3RhcnQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IFNQQSA9ICdcXHg5Nic7XG4gIC8qKiBFbmQgb2YgUHJvdGVjdGVkIEFyZWEgKi9cbiAgZXhwb3J0IGNvbnN0IEVQQSA9ICdcXHg5Nyc7XG4gIC8qKiBTdGFydCBvZiBTdHJpbmcgKi9cbiAgZXhwb3J0IGNvbnN0IFNPUyA9ICdcXHg5OCc7XG4gIC8qKiBTaW5nbGUgR3JhcGhpYyBDaGFyYWN0ZXIgSW50cm9kdWNlciAqL1xuICBleHBvcnQgY29uc3QgU0dDSSA9ICdcXHg5OSc7XG4gIC8qKiBTaW5nbGUgQ2hhcmFjdGVyIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IFNDSSA9ICdcXHg5YSc7XG4gIC8qKiBDb250cm9sIFNlcXVlbmNlIEludHJvZHVjZXIgKi9cbiAgZXhwb3J0IGNvbnN0IENTSSA9ICdcXHg5Yic7XG4gIC8qKiBTdHJpbmcgVGVybWluYXRvciAqL1xuICBleHBvcnQgY29uc3QgU1QgPSAnXFx4OWMnO1xuICAvKiogT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kICovXG4gIGV4cG9ydCBjb25zdCBPU0MgPSAnXFx4OWQnO1xuICAvKiogUHJpdmFjeSBNZXNzYWdlICovXG4gIGV4cG9ydCBjb25zdCBQTSA9ICdcXHg5ZSc7XG4gIC8qKiBBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmQgKi9cbiAgZXhwb3J0IGNvbnN0IEFQQyA9ICdcXHg5Zic7XG59XG5leHBvcnQgbmFtZXNwYWNlIEMxX0VTQ0FQRUQge1xuICBleHBvcnQgY29uc3QgU1QgPSBgJHtDMC5FU0N9XFxcXGA7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEMwIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcblxuaW50ZXJmYWNlIElQb3NpdGlvbiB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIGVuZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIEVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgZm9yIGhhbmRsaW5nIGNvbXBvc2l0aW9uc3RhcnQsIGNvbXBvc2l0aW9udXBkYXRlIGFuZCBjb21wb3NpdGlvbmVuZFxuICogZXZlbnRzLCBkaXNwbGF5aW5nIHRoZSBpbi1wcm9ncmVzcyBjb21wb3NpdGlvbiB0byB0aGUgVUkgYW5kIGZvcndhcmRpbmcgdGhlIGZpbmFsIGNvbXBvc2l0aW9uXG4gKiB0byB0aGUgaGFuZGxlci5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbXBvc2l0aW9uSGVscGVyIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgaW5wdXQgY29tcG9zaXRpb24gaXMgY3VycmVudGx5IGhhcHBlbmluZywgZWcuIHZpYSBhIG1vYmlsZSBrZXlib2FyZCwgc3BlZWNoIGlucHV0IG9yXG4gICAqIElNRS4gVGhpcyB2YXJpYWJsZSBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNvbXBvc2l0aW9uVGV4dCBzaG91bGQgYmUgZGlzcGxheWVkIG9uIHRoZSBVSS5cbiAgICovXG4gIHByaXZhdGUgX2lzQ29tcG9zaW5nOiBib29sZWFuO1xuICBwdWJsaWMgZ2V0IGlzQ29tcG9zaW5nKCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5faXNDb21wb3Npbmc7IH1cblxuICAvKipcbiAgICogVGhlIHBvc2l0aW9uIHdpdGhpbiB0aGUgaW5wdXQgdGV4dGFyZWEncyB2YWx1ZSBvZiB0aGUgY3VycmVudCBjb21wb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX2NvbXBvc2l0aW9uUG9zaXRpb246IElQb3NpdGlvbjtcblxuICAvKipcbiAgICogV2hldGhlciBhIGNvbXBvc2l0aW9uIGlzIGluIHRoZSBwcm9jZXNzIG9mIGJlaW5nIHNlbnQsIHNldHRpbmcgdGhpcyB0byBmYWxzZSB3aWxsIGNhbmNlbCBhbnlcbiAgICogaW4tcHJvZ3Jlc3MgY29tcG9zaXRpb24uXG4gICAqL1xuICBwcml2YXRlIF9pc1NlbmRpbmdDb21wb3NpdGlvbjogYm9vbGVhbjtcblxuICAvKipcbiAgICogRGF0YSBhbHJlYWR5IHNlbnQgZHVlIHRvIGtleWRvd24gZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9kYXRhQWxyZWFkeVNlbnQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF90ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50LFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIEBJUmVuZGVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9yZW5kZXJTZXJ2aWNlOiBJUmVuZGVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IGZhbHNlO1xuICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbiA9IHsgc3RhcnQ6IDAsIGVuZDogMCB9O1xuICAgIHRoaXMuX2RhdGFBbHJlYWR5U2VudCA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIGNvbXBvc2l0aW9uc3RhcnQgZXZlbnQsIGFjdGl2YXRpbmcgdGhlIGNvbXBvc2l0aW9uIHZpZXcuXG4gICAqL1xuICBwdWJsaWMgY29tcG9zaXRpb25zdGFydCgpOiB2b2lkIHtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IHRydWU7XG4gICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLmxlbmd0aDtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQgPSAnJztcbiAgICB0aGlzLl9kYXRhQWxyZWFkeVNlbnQgPSAnJztcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY29tcG9zaXRpb251cGRhdGUgZXZlbnQsIHVwZGF0aW5nIHRoZSBjb21wb3NpdGlvbiB2aWV3LlxuICAgKiBAcGFyYW0gZXYgVGhlIGV2ZW50LlxuICAgKi9cbiAgcHVibGljIGNvbXBvc2l0aW9udXBkYXRlKGV2OiBQaWNrPENvbXBvc2l0aW9uRXZlbnQsICdkYXRhJz4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQgPSBldi5kYXRhO1xuICAgIHRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGg7XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgY29tcG9zaXRpb25lbmQgZXZlbnQsIGhpZGluZyB0aGUgY29tcG9zaXRpb24gdmlldyBhbmQgc2VuZGluZyB0aGUgY29tcG9zaXRpb24gdG9cbiAgICogdGhlIGhhbmRsZXIuXG4gICAqL1xuICBwdWJsaWMgY29tcG9zaXRpb25lbmQoKTogdm9pZCB7XG4gICAgdGhpcy5fZmluYWxpemVDb21wb3NpdGlvbih0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSBrZXlkb3duIGV2ZW50LCByb3V0aW5nIGFueSBuZWNlc3NhcnkgZXZlbnRzIHRvIHRoZSBDb21wb3NpdGlvbkhlbHBlciBmdW5jdGlvbnMuXG4gICAqIEBwYXJhbSBldiBUaGUga2V5ZG93biBldmVudC5cbiAgICogQHJldHVybnMgV2hldGhlciB0aGUgVGVybWluYWwgc2hvdWxkIGNvbnRpbnVlIHByb2Nlc3NpbmcgdGhlIGtleWRvd24gZXZlbnQuXG4gICAqL1xuICBwdWJsaWMga2V5ZG93bihldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLl9pc0NvbXBvc2luZyB8fCB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbikge1xuICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDIwIHx8IGV2LmtleUNvZGUgPT09IDIyOSkge1xuICAgICAgICAvLyAyMCBpcyBDYXBzTG9jaywgMjI5IGlzIEVudGVyXG4gICAgICAgIC8vIENvbnRpbnVlIGNvbXBvc2luZyBpZiB0aGUga2V5Q29kZSBpcyB0aGUgXCJjb21wb3NpdGlvbiBjaGFyYWN0ZXJcIlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoZXYua2V5Q29kZSA9PT0gMTYgfHwgZXYua2V5Q29kZSA9PT0gMTcgfHwgZXYua2V5Q29kZSA9PT0gMTgpIHtcbiAgICAgICAgLy8gQ29udGludWUgY29tcG9zaW5nIGlmIHRoZSBrZXlDb2RlIGlzIGEgbW9kaWZpZXIga2V5XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEZpbmlzaCBjb21wb3NpdGlvbiBpbW1lZGlhdGVseS4gVGhpcyBpcyBtYWlubHkgaGVyZSBmb3IgdGhlIGNhc2Ugd2hlcmUgZW50ZXIgaXNcbiAgICAgIC8vIHByZXNzZWQgYW5kIHRoZSBoYW5kbGVyIG5lZWRzIHRvIGJlIHRyaWdnZXJlZCBiZWZvcmUgdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQuXG4gICAgICB0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKGZhbHNlKTtcbiAgICB9XG5cbiAgICBpZiAoZXYua2V5Q29kZSA9PT0gMjI5KSB7XG4gICAgICAvLyBJZiB0aGUgXCJjb21wb3NpdGlvbiBjaGFyYWN0ZXJcIiBpcyB1c2VkIGJ1dCBnZXRzIHRvIHRoaXMgcG9pbnQgaXQgbWVhbnMgYSBub24tY29tcG9zaXRpb25cbiAgICAgIC8vIGNoYXJhY3RlciAoZWcuIG51bWJlcnMgYW5kIHB1bmN0dWF0aW9uKSB3YXMgcHJlc3NlZCB3aGVuIHRoZSBJTUUgd2FzIGFjdGl2ZS5cbiAgICAgIHRoaXMuX2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmFsaXplcyB0aGUgY29tcG9zaXRpb24sIHJlc3VtaW5nIHJlZ3VsYXIgaW5wdXQgYWN0aW9ucy4gVGhpcyBpcyBjYWxsZWQgd2hlbiBhIGNvbXBvc2l0aW9uXG4gICAqIGlzIGVuZGluZy5cbiAgICogQHBhcmFtIHdhaXRGb3JQcm9wYWdhdGlvbiBXaGV0aGVyIHRvIHdhaXQgZm9yIGV2ZW50cyB0byBwcm9wYWdhdGUgYmVmb3JlIHNlbmRpbmdcbiAgICogICB0aGUgaW5wdXQuIFRoaXMgc2hvdWxkIGJlIGZhbHNlIGlmIGEgbm9uLWNvbXBvc2l0aW9uIGtleXN0cm9rZSBpcyBlbnRlcmVkIGJlZm9yZSB0aGVcbiAgICogICBjb21wb3NpdGlvbmVuZCBldmVudCBpcyB0cmlnZ2VyZWQsIHN1Y2ggYXMgZW50ZXIsIHNvIHRoYXQgdGhlIGNvbXBvc2l0aW9uIGlzIHNlbnQgYmVmb3JlXG4gICAqICAgdGhlIGNvbW1hbmQgaXMgZXhlY3V0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9maW5hbGl6ZUNvbXBvc2l0aW9uKHdhaXRGb3JQcm9wYWdhdGlvbjogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB0aGlzLl9pc0NvbXBvc2luZyA9IGZhbHNlO1xuXG4gICAgaWYgKCF3YWl0Rm9yUHJvcGFnYXRpb24pIHtcbiAgICAgIC8vIENhbmNlbCBhbnkgZGVsYXllZCBjb21wb3NpdGlvbiBzZW5kIHJlcXVlc3RzIGFuZCBzZW5kIHRoZSBpbnB1dCBpbW1lZGlhdGVseS5cbiAgICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gZmFsc2U7XG4gICAgICBjb25zdCBpbnB1dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyh0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LCB0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGlucHV0LCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWFrZSBhIGRlZXAgY29weSBvZiB0aGUgY29tcG9zaXRpb24gcG9zaXRpb24gaGVyZSBhcyBhIG5ldyBjb21wb3NpdGlvbnN0YXJ0IGV2ZW50IG1heVxuICAgICAgLy8gZmlyZSBiZWZvcmUgdGhlIHNldFRpbWVvdXQgZXhlY3V0ZXMuXG4gICAgICBjb25zdCBjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsXG4gICAgICAgIGVuZDogdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmRcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbmNlIGNvbXBvc2l0aW9uKiBldmVudHMgaGFwcGVuIGJlZm9yZSB0aGUgY2hhbmdlcyB0YWtlIHBsYWNlIGluIHRoZSB0ZXh0YXJlYSBvbiBtb3N0XG4gICAgICAvLyBicm93c2VycywgdXNlIGEgc2V0VGltZW91dCB3aXRoIDBtcyB0aW1lIHRvIGFsbG93IHRoZSBuYXRpdmUgY29tcG9zaXRpb25lbmQgZXZlbnQgdG9cbiAgICAgIC8vIGNvbXBsZXRlLiBUaGlzIGVuc3VyZXMgdGhlIGNvcnJlY3QgY2hhcmFjdGVyIGlzIHJldHJpZXZlZC5cbiAgICAgIC8vIFRoaXMgc29sdXRpb24gd2FzIHVzZWQgYmVjYXVzZTpcbiAgICAgIC8vIC0gVGhlIGNvbXBvc2l0aW9uZW5kIGV2ZW50J3MgZGF0YSBwcm9wZXJ0eSBpcyB1bnJlbGlhYmxlLCBhdCBsZWFzdCBvbiBDaHJvbWl1bVxuICAgICAgLy8gLSBUaGUgbGFzdCBjb21wb3NpdGlvbnVwZGF0ZSBldmVudCdzIGRhdGEgcHJvcGVydHkgZG9lcyBub3QgYWx3YXlzIGFjY3VyYXRlbHkgZGVzY3JpYmVcbiAgICAgIC8vICAgdGhlIGNoYXJhY3RlciwgYSBjb3VudGVyIGV4YW1wbGUgYmVpbmcgS29yZWFuIHdoZXJlIGFuIGVuZGluZyBjb25zb25zYW50IGNhbiBtb3ZlIHRvXG4gICAgICAvLyAgIHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVyIGlmIHRoZSBmb2xsb3dpbmcgaW5wdXQgaXMgYSB2b3dlbC5cbiAgICAgIHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAvLyBFbnN1cmUgdGhhdCB0aGUgaW5wdXQgaGFzIG5vdCBhbHJlYWR5IGJlZW4gc2VudFxuICAgICAgICBpZiAodGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICB0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIGxldCBpbnB1dDtcbiAgICAgICAgICAvLyBBZGQgbGVuZ3RoIG9mIGRhdGEgYWxyZWFkeSBzZW50IGR1ZSB0byBrZXlkb3duIGV2ZW50LFxuICAgICAgICAgIC8vIG90aGVyd2lzZSBpbnB1dCBjaGFyYWN0ZXJzIGNhbiBiZSBkdXBsaWNhdGVkLiAoSXNzdWUgIzMxOTEpXG4gICAgICAgICAgY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQgKz0gdGhpcy5fZGF0YUFscmVhZHlTZW50Lmxlbmd0aDtcbiAgICAgICAgICBpZiAodGhpcy5faXNDb21wb3NpbmcpIHtcbiAgICAgICAgICAgIC8vIFVzZSB0aGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIG5ldyBjb21wb3NpdGlvbiB0byBnZXQgdGhlIHN0cmluZ1xuICAgICAgICAgICAgLy8gaWYgYSBuZXcgY29tcG9zaXRpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICAgICAgICBpbnB1dCA9IHRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhjdXJyZW50Q29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCwgdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIERvbid0IHVzZSB0aGUgZW5kIHBvc2l0aW9uIGhlcmUgaW4gb3JkZXIgdG8gcGljayB1cCBhbnkgY2hhcmFjdGVycyBhZnRlciB0aGVcbiAgICAgICAgICAgIC8vIGNvbXBvc2l0aW9uIGhhcyBmaW5pc2hlZCwgZm9yIGV4YW1wbGUgd2hlbiB0eXBpbmcgYSBub24tY29tcG9zaXRpb24gY2hhcmFjdGVyXG4gICAgICAgICAgICAvLyAoZWcuIDIpIGFmdGVyIGEgY29tcG9zaXRpb24gY2hhcmFjdGVyLlxuICAgICAgICAgICAgaW5wdXQgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5wdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpbnB1dCwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkgYW55IGNoYW5nZXMgbWFkZSB0byB0aGUgdGV4dGFyZWEgYWZ0ZXIgdGhlIGN1cnJlbnQgZXZlbnQgY2hhaW4gaXMgYWxsb3dlZCB0byBjb21wbGV0ZS5cbiAgICogVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW4gbm90IGN1cnJlbnRseSBjb21wb3NpbmcgYnV0IGEga2V5ZG93biBldmVudCB3aXRoIHRoZSBcImNvbXBvc2l0aW9uXG4gICAqIGNoYXJhY3RlclwiICgyMjkpIGlzIHRyaWdnZXJlZCwgaW4gb3JkZXIgdG8gYWxsb3cgbm9uLWNvbXBvc2l0aW9uIHRleHQgdG8gYmUgZW50ZXJlZCB3aGVuIGFuXG4gICAqIElNRSBpcyBhY3RpdmUuXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXMoKTogdm9pZCB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl90ZXh0YXJlYS52YWx1ZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIElnbm9yZSBpZiBhIGNvbXBvc2l0aW9uIGhhcyBzdGFydGVkIHNpbmNlIHRoZSB0aW1lb3V0XG4gICAgICBpZiAoIXRoaXMuX2lzQ29tcG9zaW5nKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gdGhpcy5fdGV4dGFyZWEudmFsdWU7XG5cbiAgICAgICAgY29uc3QgZGlmZiA9IG5ld1ZhbHVlLnJlcGxhY2Uob2xkVmFsdWUsICcnKTtcblxuICAgICAgICB0aGlzLl9kYXRhQWxyZWFkeVNlbnQgPSBkaWZmO1xuXG4gICAgICAgIGlmIChuZXdWYWx1ZS5sZW5ndGggPiBvbGRWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRpZmYsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlLmxlbmd0aCA8IG9sZFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuREVMfWAsIHRydWUpO1xuICAgICAgICB9IGVsc2UgaWYgKChuZXdWYWx1ZS5sZW5ndGggPT09IG9sZFZhbHVlLmxlbmd0aCkgJiYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KG5ld1ZhbHVlLCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfSwgMCk7XG4gIH1cblxuICAvKipcbiAgICogUG9zaXRpb25zIHRoZSBjb21wb3NpdGlvbiB2aWV3IG9uIHRvcCBvZiB0aGUgY3Vyc29yIGFuZCB0aGUgdGV4dGFyZWEganVzdCBiZWxvdyBpdCAoc28gdGhlXG4gICAqIElNRSBoZWxwZXIgZGlhbG9nIGlzIHBvc2l0aW9uZWQgY29ycmVjdGx5KS5cbiAgICogQHBhcmFtIGRvbnRSZWN1cnNlIFdoZXRoZXIgdG8gdXNlIHNldFRpbWVvdXQgdG8gcmVjdXJzaXZlbHkgdHJpZ2dlciBhbm90aGVyIHVwZGF0ZSwgdGhpcyBpc1xuICAgKiAgIG5lY2Vzc2FyeSBhcyB0aGUgSU1FIGV2ZW50cyBhY3Jvc3MgYnJvd3NlcnMgYXJlIG5vdCBjb25zaXN0ZW50bHkgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHVibGljIHVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoZG9udFJlY3Vyc2U/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pc0NvbXBvc2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnQpIHtcbiAgICAgIGNvbnN0IGN1cnNvclggPSBNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgLSAxKTtcblxuICAgICAgY29uc3QgY2VsbEhlaWdodCA9IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQ7XG4gICAgICBjb25zdCBjdXJzb3JUb3AgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodDtcbiAgICAgIGNvbnN0IGN1cnNvckxlZnQgPSBjdXJzb3JYICogdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoO1xuXG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuaGVpZ2h0ID0gY2VsbEhlaWdodCArICdweCc7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGluZUhlaWdodCA9IGNlbGxIZWlnaHQgKyAncHgnO1xuICAgICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRGYW1pbHkgPSB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHk7XG4gICAgICB0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udFNpemUgPSB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplICsgJ3B4JztcbiAgICAgIC8vIFN5bmMgdGhlIHRleHRhcmVhIHRvIHRoZSBleGFjdCBwb3NpdGlvbiBvZiB0aGUgY29tcG9zaXRpb24gdmlldyBzbyB0aGUgSU1FIGtub3dzIHdoZXJlIHRoZVxuICAgICAgLy8gdGV4dCBpcy5cbiAgICAgIGNvbnN0IGNvbXBvc2l0aW9uVmlld0JvdW5kcyA9IHRoaXMuX2NvbXBvc2l0aW9uVmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLmxlZnQgPSBjdXJzb3JMZWZ0ICsgJ3B4JztcbiAgICAgIHRoaXMuX3RleHRhcmVhLnN0eWxlLnRvcCA9IGN1cnNvclRvcCArICdweCc7XG4gICAgICAvLyBFbnN1cmUgdGhlIHRleHQgYXJlYSBpcyBhdCBsZWFzdCAxeDEsIG90aGVyd2lzZSBjZXJ0YWluIElNRXMgbWF5IGJyZWFrXG4gICAgICB0aGlzLl90ZXh0YXJlYS5zdHlsZS53aWR0aCA9IE1hdGgubWF4KGNvbXBvc2l0aW9uVmlld0JvdW5kcy53aWR0aCwgMSkgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gTWF0aC5tYXgoY29tcG9zaXRpb25WaWV3Qm91bmRzLmhlaWdodCwgMSkgKyAncHgnO1xuICAgICAgdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodCA9IGNvbXBvc2l0aW9uVmlld0JvdW5kcy5oZWlnaHQgKyAncHgnO1xuICAgIH1cblxuICAgIGlmICghZG9udFJlY3Vyc2UpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKHRydWUpLCAwKTtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb2xvciwgSUNvbG9yUkdCIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxubGV0ICRyID0gMDtcbmxldCAkZyA9IDA7XG5sZXQgJGIgPSAwO1xubGV0ICRhID0gMDtcblxuZXhwb3J0IGNvbnN0IE5VTExfQ09MT1I6IElDb2xvciA9IHtcbiAgY3NzOiAnIzAwMDAwMDAwJyxcbiAgcmdiYTogMFxufTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcImNoYW5uZWxzXCIgKGluZGl2aWR1YWwgY29sb3IgY2hhbm5lbHMgYXMgbnVtYmVycykuXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgY2hhbm5lbHMge1xuICBleHBvcnQgZnVuY3Rpb24gdG9Dc3MocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlciwgYT86IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGEgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGAjJHt0b1BhZGRlZEhleChyKX0ke3RvUGFkZGVkSGV4KGcpfSR7dG9QYWRkZWRIZXgoYil9JHt0b1BhZGRlZEhleChhKX1gO1xuICAgIH1cbiAgICByZXR1cm4gYCMke3RvUGFkZGVkSGV4KHIpfSR7dG9QYWRkZWRIZXgoZyl9JHt0b1BhZGRlZEhleChiKX1gO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHRvUmdiYShyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIgPSAweEZGKTogbnVtYmVyIHtcbiAgICAvLyBOb3RlOiBUaGUgYWdncmVnYXRlZCBudW1iZXIgaXMgUkdCQTMyIChCRSksIHRodXMgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIEFCR1IzMlxuICAgIC8vIG9uIExFIHN5c3RlbXMsIGJlZm9yZSBpdCBjYW4gYmUgdXNlZCBmb3IgZGlyZWN0IDMyLWJpdCBidWZmZXIgd3JpdGVzLlxuICAgIC8vID4+PiAwIGZvcmNlcyBhbiB1bnNpZ25lZCBpbnRcbiAgICByZXR1cm4gKHIgPDwgMjQgfCBnIDw8IDE2IHwgYiA8PCA4IHwgYSkgPj4+IDA7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gdG9Db2xvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhPzogbnVtYmVyKTogSUNvbG9yIHtcbiAgICByZXR1cm4ge1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiLCBhKSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiLCBhKVxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBgSUNvbG9yYC5cbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBjb2xvciB7XG4gIGV4cG9ydCBmdW5jdGlvbiBibGVuZChiZzogSUNvbG9yLCBmZzogSUNvbG9yKTogSUNvbG9yIHtcbiAgICAkYSA9IChmZy5yZ2JhICYgMHhGRikgLyAyNTU7XG4gICAgaWYgKCRhID09PSAxKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjc3M6IGZnLmNzcyxcbiAgICAgICAgcmdiYTogZmcucmdiYVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZmdSID0gKGZnLnJnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBmZ0cgPSAoZmcucmdiYSA+PiAxNikgJiAweEZGO1xuICAgIGNvbnN0IGZnQiA9IChmZy5yZ2JhID4+IDgpICYgMHhGRjtcbiAgICBjb25zdCBiZ1IgPSAoYmcucmdiYSA+PiAyNCkgJiAweEZGO1xuICAgIGNvbnN0IGJnRyA9IChiZy5yZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnLnJnYmEgPj4gOCkgJiAweEZGO1xuICAgICRyID0gYmdSICsgTWF0aC5yb3VuZCgoZmdSIC0gYmdSKSAqICRhKTtcbiAgICAkZyA9IGJnRyArIE1hdGgucm91bmQoKGZnRyAtIGJnRykgKiAkYSk7XG4gICAgJGIgPSBiZ0IgKyBNYXRoLnJvdW5kKChmZ0IgLSBiZ0IpICogJGEpO1xuICAgIGNvbnN0IGNzcyA9IGNoYW5uZWxzLnRvQ3NzKCRyLCAkZywgJGIpO1xuICAgIGNvbnN0IHJnYmEgPSBjaGFubmVscy50b1JnYmEoJHIsICRnLCAkYik7XG4gICAgcmV0dXJuIHsgY3NzLCByZ2JhIH07XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gaXNPcGFxdWUoY29sb3I6IElDb2xvcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoY29sb3IucmdiYSAmIDB4RkYpID09PSAweEZGO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUNvbnRyYXN0UmF0aW8oYmc6IElDb2xvciwgZmc6IElDb2xvciwgcmF0aW86IG51bWJlcik6IElDb2xvciB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgcmVzdWx0ID0gcmdiYS5lbnN1cmVDb250cmFzdFJhdGlvKGJnLnJnYmEsIGZnLnJnYmEsIHJhdGlvKTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGNoYW5uZWxzLnRvQ29sb3IoXG4gICAgICAocmVzdWx0ID4+IDI0ICYgMHhGRiksXG4gICAgICAocmVzdWx0ID4+IDE2ICYgMHhGRiksXG4gICAgICAocmVzdWx0ID4+IDggICYgMHhGRilcbiAgICApO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIG9wYXF1ZShjb2xvcjogSUNvbG9yKTogSUNvbG9yIHtcbiAgICBjb25zdCByZ2JhQ29sb3IgPSAoY29sb3IucmdiYSB8IDB4RkYpID4+PiAwO1xuICAgIFskciwgJGcsICRiXSA9IHJnYmEudG9DaGFubmVscyhyZ2JhQ29sb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBjc3M6IGNoYW5uZWxzLnRvQ3NzKCRyLCAkZywgJGIpLFxuICAgICAgcmdiYTogcmdiYUNvbG9yXG4gICAgfTtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBvcGFjaXR5KGNvbG9yOiBJQ29sb3IsIG9wYWNpdHk6IG51bWJlcik6IElDb2xvciB7XG4gICAgJGEgPSBNYXRoLnJvdW5kKG9wYWNpdHkgKiAweEZGKTtcbiAgICBbJHIsICRnLCAkYl0gPSByZ2JhLnRvQ2hhbm5lbHMoY29sb3IucmdiYSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNzczogY2hhbm5lbHMudG9Dc3MoJHIsICRnLCAkYiwgJGEpLFxuICAgICAgcmdiYTogY2hhbm5lbHMudG9SZ2JhKCRyLCAkZywgJGIsICRhKVxuICAgIH07XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlPcGFjaXR5KGNvbG9yOiBJQ29sb3IsIGZhY3RvcjogbnVtYmVyKTogSUNvbG9yIHtcbiAgICAkYSA9IGNvbG9yLnJnYmEgJiAweEZGO1xuICAgIHJldHVybiBvcGFjaXR5KGNvbG9yLCAoJGEgKiBmYWN0b3IpIC8gMHhGRik7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gdG9Db2xvclJHQihjb2xvcjogSUNvbG9yKTogSUNvbG9yUkdCIHtcbiAgICByZXR1cm4gWyhjb2xvci5yZ2JhID4+IDI0KSAmIDB4RkYsIChjb2xvci5yZ2JhID4+IDE2KSAmIDB4RkYsIChjb2xvci5yZ2JhID4+IDgpICYgMHhGRl07XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcImNzc1wiIChzdHJpbmc6ICcjcmdiJywgJyNyZ2JhJywgJyNycmdnYmInLFxuICogJyNycmdnYmJhYScpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIGNzcyB7XG4gIC8vIEF0dGVtcHQgdG8gc2V0IGdldCB0aGUgc2hhcmVkIGNhbnZhcyBjb250ZXh0XG4gIGxldCAkY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgfCB1bmRlZmluZWQ7XG4gIGxldCAkbGl0bXVzQ29sb3I6IENhbnZhc0dyYWRpZW50IHwgdW5kZWZpbmVkO1xuICB0cnkge1xuICAgIC8vIFRoaXMgaXMgZ3VhcmFudGVlZCB0byBydW4gaW4gdGhlIGZpcnN0IHdpbmRvdywgc28gZG9jdW1lbnQgc2hvdWxkIGJlIGNvcnJlY3RcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSAxO1xuICAgIGNhbnZhcy5oZWlnaHQgPSAxO1xuICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgIHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZVxuICAgIH0pO1xuICAgIGlmIChjdHgpIHtcbiAgICAgICRjdHggPSBjdHg7XG4gICAgICAkY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb3B5JztcbiAgICAgICRsaXRtdXNDb2xvciA9ICRjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMSwgMSk7XG4gICAgfVxuICB9XG4gIGNhdGNoIHtcbiAgICAvLyBub29wXG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSBjc3Mgc3RyaW5nIHRvIGFuIElDb2xvciwgdGhpcyBzaG91bGQgaGFuZGxlIGFsbCB2YWxpZCBDU1MgY29sb3Igc3RyaW5ncyBhbmQgd2lsbFxuICAgKiB0aHJvdyBpZiBpdCdzIGludmFsaWQuIFRoZSBpZGVhbCBmb3JtYXQgdG8gdXNlIGlzIGAjcnJnZ2JiW2FhXWAgYXMgaXQncyB0aGUgZmFzdGVzdCB0byBwYXJzZS5cbiAgICpcbiAgICogT25seSBgI3JnYlthXWAsIGAjcnJnZ2JiW2FhXWAsIGByZ2IoKWAgYW5kIGByZ2JhKClgIGZvcm1hdHMgYXJlIHN1cHBvcnRlZCB3aGVuIHJ1biBpbiBhIE5vZGVcbiAgICogZW52aXJvbm1lbnQuXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gdG9Db2xvcihjc3M6IHN0cmluZyk6IElDb2xvciB7XG4gICAgLy8gRm9ybWF0czogI3JnYlthXSBhbmQgI3JyZ2diYlthYV1cbiAgICBpZiAoY3NzLm1hdGNoKC8jW1xcZGEtZl17Myw4fS9pKSkge1xuICAgICAgc3dpdGNoIChjc3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgNDogeyAvLyAjcmdiXG4gICAgICAgICAgJHIgPSBwYXJzZUludChjc3Muc2xpY2UoMSwgMikucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgJGcgPSBwYXJzZUludChjc3Muc2xpY2UoMiwgMykucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgJGIgPSBwYXJzZUludChjc3Muc2xpY2UoMywgNCkucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgcmV0dXJuIGNoYW5uZWxzLnRvQ29sb3IoJHIsICRnLCAkYik7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSA1OiB7IC8vICNyZ2JhXG4gICAgICAgICAgJHIgPSBwYXJzZUludChjc3Muc2xpY2UoMSwgMikucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgJGcgPSBwYXJzZUludChjc3Muc2xpY2UoMiwgMykucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgJGIgPSBwYXJzZUludChjc3Muc2xpY2UoMywgNCkucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgJGEgPSBwYXJzZUludChjc3Muc2xpY2UoNCwgNSkucmVwZWF0KDIpLCAxNik7XG4gICAgICAgICAgcmV0dXJuIGNoYW5uZWxzLnRvQ29sb3IoJHIsICRnLCAkYiwgJGEpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgNzogLy8gI3JyZ2diYlxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjc3MsXG4gICAgICAgICAgICByZ2JhOiAocGFyc2VJbnQoY3NzLnNsaWNlKDEpLCAxNikgPDwgOCB8IDB4RkYpID4+PiAwXG4gICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA5OiAvLyAjcnJnZ2JiYWFcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY3NzLFxuICAgICAgICAgICAgcmdiYTogcGFyc2VJbnQoY3NzLnNsaWNlKDEpLCAxNikgPj4+IDBcbiAgICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvcm1hdHM6IHJnYigpIG9yIHJnYmEoKVxuICAgIGNvbnN0IHJnYmFNYXRjaCA9IGNzcy5tYXRjaCgvcmdiYT9cXChcXHMqKFxcZHsxLDN9KVxccyosXFxzKihcXGR7MSwzfSlcXHMqLFxccyooXFxkezEsM30pXFxzKigsXFxzKigwfDF8XFxkP1xcLihcXGQrKSlcXHMqKT9cXCkvKTtcbiAgICBpZiAocmdiYU1hdGNoKSB7XG4gICAgICAkciA9IHBhcnNlSW50KHJnYmFNYXRjaFsxXSk7XG4gICAgICAkZyA9IHBhcnNlSW50KHJnYmFNYXRjaFsyXSk7XG4gICAgICAkYiA9IHBhcnNlSW50KHJnYmFNYXRjaFszXSk7XG4gICAgICAkYSA9IE1hdGgucm91bmQoKHJnYmFNYXRjaFs1XSA9PT0gdW5kZWZpbmVkID8gMSA6IHBhcnNlRmxvYXQocmdiYU1hdGNoWzVdKSkgKiAweEZGKTtcbiAgICAgIHJldHVybiBjaGFubmVscy50b0NvbG9yKCRyLCAkZywgJGIsICRhKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB0aGUgY29udGV4dCBpcyBhdmFpbGFibGUgZm9yIGNhbnZhcy1iYXNlZCBjb2xvciBwYXJzaW5nXG4gICAgaWYgKCEkY3R4IHx8ICEkbGl0bXVzQ29sb3IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXQnKTtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSB0aGUgY29sb3IgdXNpbmcgY2FudmFzIGZpbGxTdHlsZVxuICAgIC8vIFNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNmaWxsLWFuZC1zdHJva2Utc3R5bGVzXG4gICAgJGN0eC5maWxsU3R5bGUgPSAkbGl0bXVzQ29sb3I7XG4gICAgJGN0eC5maWxsU3R5bGUgPSBjc3M7XG4gICAgaWYgKHR5cGVvZiAkY3R4LmZpbGxTdHlsZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXQnKTtcbiAgICB9XG5cbiAgICAkY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIFskciwgJGcsICRiLCAkYV0gPSAkY3R4LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuXG4gICAgLy8gVmFsaWRhdGUgdGhlIGNvbG9yIGlzIG5vbi10cmFuc3BhcmVudCBhcyBjb2xvciBodWUgZ2V0cyBsb3N0IHdoZW4gZHJhd24gdG8gdGhlIGNhbnZhc1xuICAgIGlmICgkYSAhPT0gMHhGRikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdjc3MudG9Db2xvcjogVW5zdXBwb3J0ZWQgY3NzIGZvcm1hdCcpO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgdGhlIGNvbG9yIGZyb20gdGhlIGNhbnZhcycgZmlsbFN0eWxlIHByb3BlcnR5IHdoaWNoIGV4cG9zZXMgdGhlIGNvbG9yIHZhbHVlIGluIHJnYmEoKVxuICAgIC8vIGZvcm1hdFxuICAgIC8vIFNlZSBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9jYW52YXMuaHRtbCNzZXJpYWxpc2F0aW9uLW9mLWEtY29sb3JcbiAgICByZXR1cm4ge1xuICAgICAgcmdiYTogY2hhbm5lbHMudG9SZ2JhKCRyLCAkZywgJGIsICRhKSxcbiAgICAgIGNzc1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb25zIHdoZXJlIHRoZSBzb3VyY2UgdHlwZSBpcyBcInJnYlwiIChudW1iZXI6IDB4cnJnZ2JiKS5cbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSByZ2Ige1xuICAvKipcbiAgICogR2V0cyB0aGUgcmVsYXRpdmUgbHVtaW5hbmNlIG9mIGFuIFJHQiBjb2xvciwgdGhpcyBpcyB1c2VmdWwgaW4gZGV0ZXJtaW5pbmcgdGhlIGNvbnRyYXN0IHJhdGlvXG4gICAqIGJldHdlZW4gdHdvIGNvbG9ycy5cbiAgICogQHBhcmFtIHJnYiBUaGUgY29sb3IgdG8gdXNlLlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI3JlbGF0aXZlbHVtaW5hbmNlZGVmXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gcmVsYXRpdmVMdW1pbmFuY2UocmdiOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiByZWxhdGl2ZUx1bWluYW5jZTIoXG4gICAgICAocmdiID4+IDE2KSAmIDB4RkYsXG4gICAgICAocmdiID4+IDggKSAmIDB4RkYsXG4gICAgICAocmdiICAgICAgKSAmIDB4RkYpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHJlbGF0aXZlIGx1bWluYW5jZSBvZiBhbiBSR0IgY29sb3IsIHRoaXMgaXMgdXNlZnVsIGluIGRldGVybWluaW5nIHRoZSBjb250cmFzdCByYXRpb1xuICAgKiBiZXR3ZWVuIHR3byBjb2xvcnMuXG4gICAqIEBwYXJhbSByIFRoZSByZWQgY2hhbm5lbCAoMHgwMCB0byAweEZGKS5cbiAgICogQHBhcmFtIGcgVGhlIGdyZWVuIGNoYW5uZWwgKDB4MDAgdG8gMHhGRikuXG4gICAqIEBwYXJhbSBiIFRoZSBibHVlIGNoYW5uZWwgKDB4MDAgdG8gMHhGRikuXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL1dDQUcyMC8jcmVsYXRpdmVsdW1pbmFuY2VkZWZcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiByZWxhdGl2ZUx1bWluYW5jZTIocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgcnMgPSByIC8gMjU1O1xuICAgIGNvbnN0IGdzID0gZyAvIDI1NTtcbiAgICBjb25zdCBicyA9IGIgLyAyNTU7XG4gICAgY29uc3QgcnIgPSBycyA8PSAwLjAzOTI4ID8gcnMgLyAxMi45MiA6IE1hdGgucG93KChycyArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xuICAgIGNvbnN0IHJnID0gZ3MgPD0gMC4wMzkyOCA/IGdzIC8gMTIuOTIgOiBNYXRoLnBvdygoZ3MgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgICBjb25zdCByYiA9IGJzIDw9IDAuMDM5MjggPyBicyAvIDEyLjkyIDogTWF0aC5wb3coKGJzICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgcmV0dXJuIHJyICogMC4yMTI2ICsgcmcgKiAwLjcxNTIgKyByYiAqIDAuMDcyMjtcbiAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgd2hlcmUgdGhlIHNvdXJjZSB0eXBlIGlzIFwicmdiYVwiIChudW1iZXI6IDB4cnJnZ2JiYWEpLlxuICovXG5leHBvcnQgbmFtZXNwYWNlIHJnYmEge1xuICBleHBvcnQgZnVuY3Rpb24gYmxlbmQoYmc6IG51bWJlciwgZmc6IG51bWJlcik6IG51bWJlciB7XG4gICAgJGEgPSAoZmcgJiAweEZGKSAvIDB4RkY7XG4gICAgaWYgKCRhID09PSAxKSB7XG4gICAgICByZXR1cm4gZmc7XG4gICAgfVxuICAgIGNvbnN0IGZnUiA9IChmZyA+PiAyNCkgJiAweEZGO1xuICAgIGNvbnN0IGZnRyA9IChmZyA+PiAxNikgJiAweEZGO1xuICAgIGNvbnN0IGZnQiA9IChmZyA+PiA4KSAmIDB4RkY7XG4gICAgY29uc3QgYmdSID0gKGJnID4+IDI0KSAmIDB4RkY7XG4gICAgY29uc3QgYmdHID0gKGJnID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnID4+IDgpICYgMHhGRjtcbiAgICAkciA9IGJnUiArIE1hdGgucm91bmQoKGZnUiAtIGJnUikgKiAkYSk7XG4gICAgJGcgPSBiZ0cgKyBNYXRoLnJvdW5kKChmZ0cgLSBiZ0cpICogJGEpO1xuICAgICRiID0gYmdCICsgTWF0aC5yb3VuZCgoZmdCIC0gYmdCKSAqICRhKTtcbiAgICByZXR1cm4gY2hhbm5lbHMudG9SZ2JhKCRyLCAkZywgJGIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgZm9yZWdyb3VuZCBjb2xvciBhbmQgYSBiYWNrZ3JvdW5kIGNvbG9yLCBlaXRoZXIgaW5jcmVhc2Ugb3IgcmVkdWNlIHRoZSBsdW1pbmFuY2Ugb2YgdGhlXG4gICAqIGZvcmVncm91bmQgY29sb3IgdW50aWwgdGhlIHNwZWNpZmllZCBjb250cmFzdCByYXRpbyBpcyBtZXQuIElmIHB1cmUgd2hpdGUgb3IgYmxhY2sgaXMgaGl0XG4gICAqIHdpdGhvdXQgdGhlIGNvbnRyYXN0IHJhdGlvIGJlaW5nIG1ldCwgZ28gdGhlIG90aGVyIGRpcmVjdGlvbiB1c2luZyB0aGUgYmFja2dyb3VuZCBjb2xvciBhcyB0aGVcbiAgICogZm9yZWdyb3VuZCBjb2xvciBhbmQgdGFrZSBlaXRoZXIgdGhlIGZpcnN0IG9yIHNlY29uZCByZXN1bHQgZGVwZW5kaW5nIG9uIHdoaWNoIGhhcyB0aGUgaGlnaGVyXG4gICAqIGNvbnRyYXN0IHJhdGlvLlxuICAgKlxuICAgKiBgdW5kZWZpbmVkYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoZSBjb250cmFzdCByYXRpbyBpcyBhbHJlYWR5IG1ldC5cbiAgICpcbiAgICogQHBhcmFtIGJnUmdiYSBUaGUgYmFja2dyb3VuZCBjb2xvciBpbiByZ2JhIGZvcm1hdC5cbiAgICogQHBhcmFtIGZnUmdiYSBUaGUgZm9yZWdyb3VuZCBjb2xvciBpbiByZ2JhIGZvcm1hdC5cbiAgICogQHBhcmFtIHJhdGlvIFRoZSBjb250cmFzdCByYXRpbyB0byBhY2hpZXZlLlxuICAgKi9cbiAgZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZUNvbnRyYXN0UmF0aW8oYmdSZ2JhOiBudW1iZXIsIGZnUmdiYTogbnVtYmVyLCByYXRpbzogbnVtYmVyKTogbnVtYmVyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBiZ0wgPSByZ2IucmVsYXRpdmVMdW1pbmFuY2UoYmdSZ2JhID4+IDgpO1xuICAgIGNvbnN0IGZnTCA9IHJnYi5yZWxhdGl2ZUx1bWluYW5jZShmZ1JnYmEgPj4gOCk7XG4gICAgY29uc3QgY3IgPSBjb250cmFzdFJhdGlvKGJnTCwgZmdMKTtcbiAgICBpZiAoY3IgPCByYXRpbykge1xuICAgICAgaWYgKGZnTCA8IGJnTCkge1xuICAgICAgICBjb25zdCByZXN1bHRBID0gcmVkdWNlTHVtaW5hbmNlKGJnUmdiYSwgZmdSZ2JhLCByYXRpbyk7XG4gICAgICAgIGNvbnN0IHJlc3VsdEFSYXRpbyA9IGNvbnRyYXN0UmF0aW8oYmdMLCByZ2IucmVsYXRpdmVMdW1pbmFuY2UocmVzdWx0QSA+PiA4KSk7XG4gICAgICAgIGlmIChyZXN1bHRBUmF0aW8gPCByYXRpbykge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdEIgPSBpbmNyZWFzZUx1bWluYW5jZShiZ1JnYmEsIGZnUmdiYSwgcmF0aW8pO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdEJSYXRpbyA9IGNvbnRyYXN0UmF0aW8oYmdMLCByZ2IucmVsYXRpdmVMdW1pbmFuY2UocmVzdWx0QiA+PiA4KSk7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdEFSYXRpbyA+IHJlc3VsdEJSYXRpbyA/IHJlc3VsdEEgOiByZXN1bHRCO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRBO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0QSA9IGluY3JlYXNlTHVtaW5hbmNlKGJnUmdiYSwgZmdSZ2JhLCByYXRpbyk7XG4gICAgICBjb25zdCByZXN1bHRBUmF0aW8gPSBjb250cmFzdFJhdGlvKGJnTCwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlKHJlc3VsdEEgPj4gOCkpO1xuICAgICAgaWYgKHJlc3VsdEFSYXRpbyA8IHJhdGlvKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdEIgPSByZWR1Y2VMdW1pbmFuY2UoYmdSZ2JhLCBmZ1JnYmEsIHJhdGlvKTtcbiAgICAgICAgY29uc3QgcmVzdWx0QlJhdGlvID0gY29udHJhc3RSYXRpbyhiZ0wsIHJnYi5yZWxhdGl2ZUx1bWluYW5jZShyZXN1bHRCID4+IDgpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdEFSYXRpbyA+IHJlc3VsdEJSYXRpbyA/IHJlc3VsdEEgOiByZXN1bHRCO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdEE7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlTHVtaW5hbmNlKGJnUmdiYTogbnVtYmVyLCBmZ1JnYmE6IG51bWJlciwgcmF0aW86IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gVGhpcyBpcyBhIG5haXZlIGJ1dCBmYXN0IGFwcHJvYWNoIHRvIHJlZHVjaW5nIGx1bWluYW5jZSBhcyBjb252ZXJ0aW5nIHRvXG4gICAgLy8gSFNMIGFuZCBiYWNrIGlzIGV4cGVuc2l2ZVxuICAgIGNvbnN0IGJnUiA9IChiZ1JnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBiZ0cgPSAoYmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBmZ1IgPSAoZmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgbGV0IGZnRyA9IChmZ1JnYmEgPj4gMTYpICYgMHhGRjtcbiAgICBsZXQgZmdCID0gKGZnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnRywgZmdCKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgd2hpbGUgKGNyIDwgcmF0aW8gJiYgKGZnUiA+IDAgfHwgZmdHID4gMCB8fCBmZ0IgPiAwKSkge1xuICAgICAgLy8gUmVkdWNlIGJ5IDEwJSB1bnRpbCB0aGUgcmF0aW8gaXMgaGl0XG4gICAgICBmZ1IgLT0gTWF0aC5tYXgoMCwgTWF0aC5jZWlsKGZnUiAqIDAuMSkpO1xuICAgICAgZmdHIC09IE1hdGgubWF4KDAsIE1hdGguY2VpbChmZ0cgKiAwLjEpKTtcbiAgICAgIGZnQiAtPSBNYXRoLm1heCgwLCBNYXRoLmNlaWwoZmdCICogMC4xKSk7XG4gICAgICBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnRywgZmdCKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgfVxuICAgIHJldHVybiAoZmdSIDw8IDI0IHwgZmdHIDw8IDE2IHwgZmdCIDw8IDggfCAweEZGKSA+Pj4gMDtcbiAgfVxuXG4gIGV4cG9ydCBmdW5jdGlvbiBpbmNyZWFzZUx1bWluYW5jZShiZ1JnYmE6IG51bWJlciwgZmdSZ2JhOiBudW1iZXIsIHJhdGlvOiBudW1iZXIpOiBudW1iZXIge1xuICAgIC8vIFRoaXMgaXMgYSBuYWl2ZSBidXQgZmFzdCBhcHByb2FjaCB0byBpbmNyZWFzaW5nIGx1bWluYW5jZSBhcyBjb252ZXJ0aW5nIHRvXG4gICAgLy8gSFNMIGFuZCBiYWNrIGlzIGV4cGVuc2l2ZVxuICAgIGNvbnN0IGJnUiA9IChiZ1JnYmEgPj4gMjQpICYgMHhGRjtcbiAgICBjb25zdCBiZ0cgPSAoYmdSZ2JhID4+IDE2KSAmIDB4RkY7XG4gICAgY29uc3QgYmdCID0gKGJnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBmZ1IgPSAoZmdSZ2JhID4+IDI0KSAmIDB4RkY7XG4gICAgbGV0IGZnRyA9IChmZ1JnYmEgPj4gMTYpICYgMHhGRjtcbiAgICBsZXQgZmdCID0gKGZnUmdiYSA+PiAgOCkgJiAweEZGO1xuICAgIGxldCBjciA9IGNvbnRyYXN0UmF0aW8ocmdiLnJlbGF0aXZlTHVtaW5hbmNlMihmZ1IsIGZnRywgZmdCKSwgcmdiLnJlbGF0aXZlTHVtaW5hbmNlMihiZ1IsIGJnRywgYmdCKSk7XG4gICAgd2hpbGUgKGNyIDwgcmF0aW8gJiYgKGZnUiA8IDB4RkYgfHwgZmdHIDwgMHhGRiB8fCBmZ0IgPCAweEZGKSkge1xuICAgICAgLy8gSW5jcmVhc2UgYnkgMTAlIHVudGlsIHRoZSByYXRpbyBpcyBoaXRcbiAgICAgIGZnUiA9IE1hdGgubWluKDB4RkYsIGZnUiArIE1hdGguY2VpbCgoMjU1IC0gZmdSKSAqIDAuMSkpO1xuICAgICAgZmdHID0gTWF0aC5taW4oMHhGRiwgZmdHICsgTWF0aC5jZWlsKCgyNTUgLSBmZ0cpICogMC4xKSk7XG4gICAgICBmZ0IgPSBNYXRoLm1pbigweEZGLCBmZ0IgKyBNYXRoLmNlaWwoKDI1NSAtIGZnQikgKiAwLjEpKTtcbiAgICAgIGNyID0gY29udHJhc3RSYXRpbyhyZ2IucmVsYXRpdmVMdW1pbmFuY2UyKGZnUiwgZmdHLCBmZ0IpLCByZ2IucmVsYXRpdmVMdW1pbmFuY2UyKGJnUiwgYmdHLCBiZ0IpKTtcbiAgICB9XG4gICAgcmV0dXJuIChmZ1IgPDwgMjQgfCBmZ0cgPDwgMTYgfCBmZ0IgPDwgOCB8IDB4RkYpID4+PiAwO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIHRvQ2hhbm5lbHModmFsdWU6IG51bWJlcik6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgICByZXR1cm4gWyh2YWx1ZSA+PiAyNCkgJiAweEZGLCAodmFsdWUgPj4gMTYpICYgMHhGRiwgKHZhbHVlID4+IDgpICYgMHhGRiwgdmFsdWUgJiAweEZGXTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9QYWRkZWRIZXgoYzogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IGMudG9TdHJpbmcoMTYpO1xuICByZXR1cm4gcy5sZW5ndGggPCAyID8gJzAnICsgcyA6IHM7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgY29udHJhc3QgcmF0aW8gYmV0d2VlbiB0d28gcmVsYXRpdmUgbHVtaW5hbmNlIHZhbHVlcy5cbiAqIEBwYXJhbSBsMSBUaGUgZmlyc3QgcmVsYXRpdmUgbHVtaW5hbmNlLlxuICogQHBhcmFtIGwyIFRoZSBmaXJzdCByZWxhdGl2ZSBsdW1pbmFuY2UuXG4gKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI2NvbnRyYXN0LXJhdGlvZGVmXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250cmFzdFJhdGlvKGwxOiBudW1iZXIsIGwyOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAobDEgPCBsMikge1xuICAgIHJldHVybiAobDIgKyAwLjA1KSAvIChsMSArIDAuMDUpO1xuICB9XG4gIHJldHVybiAobDEgKyAwLjA1KSAvIChsMiArIDAuMDUpO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgQ2hhckRhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBXSElURVNQQUNFX0NFTExfQ0hBUiwgQ29udGVudCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuXG5leHBvcnQgY2xhc3MgSm9pbmVkQ2VsbERhdGEgZXh0ZW5kcyBBdHRyaWJ1dGVEYXRhIGltcGxlbWVudHMgSUNlbGxEYXRhIHtcbiAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcbiAgLy8gLmNvbnRlbnQgY2FycmllcyBubyBtZWFuaW5nIGZvciBqb2luZWQgQ2VsbERhdGEsIHNpbXBseSBudWxsaWZ5IGl0XG4gIC8vIHRodXMgd2UgaGF2ZSB0byBvdmVybG9hZCBhbGwgb3RoZXIgLmNvbnRlbnQgYWNjZXNzb3JzXG4gIHB1YmxpYyBjb250ZW50OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmc6IG51bWJlcjtcbiAgcHVibGljIGJnOiBudW1iZXI7XG4gIHB1YmxpYyBjb21iaW5lZERhdGE6IHN0cmluZyA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKGZpcnN0Q2VsbDogSUNlbGxEYXRhLCBjaGFyczogc3RyaW5nLCB3aWR0aDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmZnID0gZmlyc3RDZWxsLmZnO1xuICAgIHRoaXMuYmcgPSBmaXJzdENlbGwuYmc7XG4gICAgdGhpcy5jb21iaW5lZERhdGEgPSBjaGFycztcbiAgICB0aGlzLl93aWR0aCA9IHdpZHRoO1xuICB9XG5cbiAgcHVibGljIGlzQ29tYmluZWQoKTogbnVtYmVyIHtcbiAgICAvLyBhbHdheXMgbWFyayBqb2luZWQgY2VsbCBkYXRhIGFzIGNvbWJpbmVkXG4gICAgcmV0dXJuIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuXG4gIHB1YmxpYyBnZXRXaWR0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl93aWR0aDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDaGFycygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbWJpbmVkRGF0YTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb2RlKCk6IG51bWJlciB7XG4gICAgLy8gY29kZSBhbHdheXMgZ2V0cyB0aGUgaGlnaGVzdCBwb3NzaWJsZSBmYWtlIGNvZGVwb2ludCAocmVhZCBhcyAtMSlcbiAgICAvLyB0aGlzIGlzIG5lZWRlZCBhcyBjb2RlIGlzIHVzZWQgYnkgY2FjaGVzIGFzIGlkZW50aWZpZXJcbiAgICByZXR1cm4gMHgxRkZGRkY7XG4gIH1cblxuICBwdWJsaWMgc2V0RnJvbUNoYXJEYXRhKHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXNDaGFyRGF0YSgpOiBDaGFyRGF0YSB7XG4gICAgcmV0dXJuIFt0aGlzLmZnLCB0aGlzLmdldENoYXJzKCksIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRDb2RlKCldO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIGltcGxlbWVudHMgSUNoYXJhY3RlckpvaW5lclNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfY2hhcmFjdGVySm9pbmVyczogSUNoYXJhY3RlckpvaW5lcltdID0gW107XG4gIHByaXZhdGUgX25leHRDaGFyYWN0ZXJKb2luZXJJZDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkgeyB9XG5cbiAgcHVibGljIHJlZ2lzdGVyKGhhbmRsZXI6ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXSk6IG51bWJlciB7XG4gICAgY29uc3Qgam9pbmVyOiBJQ2hhcmFjdGVySm9pbmVyID0ge1xuICAgICAgaWQ6IHRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZCsrLFxuICAgICAgaGFuZGxlclxuICAgIH07XG5cbiAgICB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnB1c2goam9pbmVyKTtcbiAgICByZXR1cm4gam9pbmVyLmlkO1xuICB9XG5cbiAgcHVibGljIGRlcmVnaXN0ZXIoam9pbmVySWQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbaV0uaWQgPT09IGpvaW5lcklkKSB7XG4gICAgICAgIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyb3c6IG51bWJlcik6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgaWYgKHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChyb3cpO1xuICAgIGlmICghbGluZSB8fCBsaW5lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgY29uc3QgbGluZVN0ciA9IGxpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJ1ZSk7XG5cbiAgICAvLyBCZWNhdXNlIHNvbWUgY2VsbHMgY2FuIGJlIHJlcHJlc2VudGVkIGJ5IG11bHRpcGxlIGphdmFzY3JpcHQgY2hhcmFjdGVycyxcbiAgICAvLyB3ZSB0cmFjayB0aGUgY2VsbCBhbmQgdGhlIHN0cmluZyBpbmRleGVzIHNlcGFyYXRlbHkuIFRoaXMgYWxsb3dzIHVzIHRvXG4gICAgLy8gdHJhbnNsYXRlIHRoZSBzdHJpbmcgcmFuZ2VzIHdlIGdldCBmcm9tIHRoZSBqb2luZXJzIGJhY2sgaW50byBjZWxsIHJhbmdlc1xuICAgIC8vIGZvciB1c2Ugd2hlbiByZW5kZXJpbmdcbiAgICBsZXQgcmFuZ2VTdGFydENvbHVtbiA9IDA7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlU3RhcnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IHJhbmdlQXR0ckZHID0gbGluZS5nZXRGZygwKTtcbiAgICBsZXQgcmFuZ2VBdHRyQkcgPSBsaW5lLmdldEJnKDApO1xuXG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCBsaW5lLmdldFRyaW1tZWRMZW5ndGgoKTsgeCsrKSB7XG4gICAgICBsaW5lLmxvYWRDZWxsKHgsIHRoaXMuX3dvcmtDZWxsKTtcblxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgaXMgb2Ygd2lkdGggMCwgc2tpcCBpdC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuZCBvZiByYW5nZVxuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmZnICE9PSByYW5nZUF0dHJGRyB8fCB0aGlzLl93b3JrQ2VsbC5iZyAhPT0gcmFuZ2VBdHRyQkcpIHtcbiAgICAgICAgLy8gSWYgd2UgZW5kZWQgdXAgd2l0aCBhIHNlcXVlbmNlIG9mIG1vcmUgdGhhbiBvbmUgY2hhcmFjdGVyLFxuICAgICAgICAvLyBsb29rIGZvciByYW5nZXMgdG8gam9pbi5cbiAgICAgICAgaWYgKHggLSByYW5nZVN0YXJ0Q29sdW1uID4gMSkge1xuICAgICAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgICAgIGxpbmVTdHIsXG4gICAgICAgICAgICByYW5nZVN0YXJ0U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgICAgICBsaW5lLFxuICAgICAgICAgICAgcmFuZ2VTdGFydENvbHVtblxuICAgICAgICAgICk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBqb2luZWRSYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJhbmdlcy5wdXNoKGpvaW5lZFJhbmdlc1tpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgb3VyIG1hcmtlcnMgZm9yIGEgbmV3IHJhbmdlLlxuICAgICAgICByYW5nZVN0YXJ0Q29sdW1uID0geDtcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4ID0gY3VycmVudFN0cmluZ0luZGV4O1xuICAgICAgICByYW5nZUF0dHJGRyA9IHRoaXMuX3dvcmtDZWxsLmZnO1xuICAgICAgICByYW5nZUF0dHJCRyA9IHRoaXMuX3dvcmtDZWxsLmJnO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFByb2Nlc3MgYW55IHRyYWlsaW5nIHJhbmdlcy5cbiAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gcmFuZ2VTdGFydENvbHVtbiA+IDEpIHtcbiAgICAgIGNvbnN0IGpvaW5lZFJhbmdlcyA9IHRoaXMuX2dldEpvaW5lZFJhbmdlcyhcbiAgICAgICAgbGluZVN0cixcbiAgICAgICAgcmFuZ2VTdGFydFN0cmluZ0luZGV4LFxuICAgICAgICBjdXJyZW50U3RyaW5nSW5kZXgsXG4gICAgICAgIGxpbmUsXG4gICAgICAgIHJhbmdlU3RhcnRDb2x1bW5cbiAgICAgICk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpvaW5lZFJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByYW5nZXMucHVzaChqb2luZWRSYW5nZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZXM7XG4gIH1cblxuICAvKipcbiAgICogR2l2ZW4gYSBzZWdtZW50IG9mIGEgbGluZSBvZiB0ZXh0LCBmaW5kIGFsbCByYW5nZXMgb2YgdGV4dCB0aGF0IHNob3VsZCBiZVxuICAgKiBqb2luZWQgaW4gYSBzaW5nbGUgcmVuZGVyaW5nIHVuaXQuIFJhbmdlcyBhcmUgaW50ZXJuYWxseSBjb252ZXJ0ZWQgdG9cbiAgICogY29sdW1uIHJhbmdlcywgcmF0aGVyIHRoYW4gc3RyaW5nIHJhbmdlcy5cbiAgICogQHBhcmFtIGxpbmUgU3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmdWxsIGxpbmUgb2YgdGV4dFxuICAgKiBAcGFyYW0gc3RhcnRJbmRleCBTdGFydCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGluY2x1c2l2ZSlcbiAgICogQHBhcmFtIGVuZEluZGV4IEVuZCBwb3NpdGlvbiBvZiB0aGUgcmFuZ2UgdG8gc2VhcmNoIGluIHRoZSBzdHJpbmcgKGV4Y2x1c2l2ZSlcbiAgICovXG4gIHByaXZhdGUgX2dldEpvaW5lZFJhbmdlcyhsaW5lOiBzdHJpbmcsIHN0YXJ0SW5kZXg6IG51bWJlciwgZW5kSW5kZXg6IG51bWJlciwgbGluZURhdGE6IElCdWZmZXJMaW5lLCBzdGFydENvbDogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXVtdIHtcbiAgICBjb25zdCB0ZXh0ID0gbGluZS5zdWJzdHJpbmcoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuICAgIC8vIEF0IHRoaXMgcG9pbnQgd2UgYWxyZWFkeSBrbm93IHRoYXQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIGpvaW5lciBzb1xuICAgIC8vIHdlIGNhbiBqdXN0IHB1bGwgaXRzIHZhbHVlIGFuZCBhc3NpZ24gaXQgZGlyZWN0bHkgcmF0aGVyIHRoYW5cbiAgICAvLyBtZXJnaW5nIGl0IGludG8gYW4gZW1wdHkgYXJyYXksIHdoaWNoIGluY3VycyB1bm5lY2Vzc2FyeSB3cml0ZXMuXG4gICAgbGV0IGFsbEpvaW5lZFJhbmdlczogW251bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgdHJ5IHtcbiAgICAgIGFsbEpvaW5lZFJhbmdlcyA9IHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbMF0uaGFuZGxlcih0ZXh0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gV2UgbWVyZ2UgYW55IG92ZXJsYXBwaW5nIHJhbmdlcyBhY3Jvc3MgdGhlIGRpZmZlcmVudCBqb2luZXJzXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBqb2luZXJSYW5nZXMgPSB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzW2ldLmhhbmRsZXIodGV4dCk7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgam9pbmVyUmFuZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgQ2hhcmFjdGVySm9pbmVyU2VydmljZS5fbWVyZ2VSYW5nZXMoYWxsSm9pbmVkUmFuZ2VzLCBqb2luZXJSYW5nZXNbal0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzKGFsbEpvaW5lZFJhbmdlcywgbGluZURhdGEsIHN0YXJ0Q29sKTtcbiAgICByZXR1cm4gYWxsSm9pbmVkUmFuZ2VzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCByYW5nZXMgaW4tcGxhY2UgdG8gYWRqdXN0IGZvciB2YXJpYXRpb25zIGJldHdlZW5cbiAgICogc3RyaW5nIGxlbmd0aCBhbmQgY2VsbCB3aWR0aCBzbyB0aGF0IHRoZSByYW5nZSByZXByZXNlbnRzIGEgY2VsbCByYW5nZSxcbiAgICogcmF0aGVyIHRoYW4gdGhlIHN0cmluZyByYW5nZSB0aGUgam9pbmVyIHByb3ZpZGVzLlxuICAgKiBAcGFyYW0gcmFuZ2VzIFN0cmluZyByYW5nZXMgY29udGFpbmluZyBzdGFydCAoaW5jbHVzaXZlKSBhbmQgZW5kIChleGNsdXNpdmUpIGluZGV4XG4gICAqIEBwYXJhbSBsaW5lIENlbGwgZGF0YSBmb3IgdGhlIHJlbGV2YW50IGxpbmUgaW4gdGhlIHRlcm1pbmFsXG4gICAqIEBwYXJhbSBzdGFydENvbCBPZmZzZXQgd2l0aGluIHRoZSBsaW5lIHRvIHN0YXJ0IGZyb21cbiAgICovXG4gIHByaXZhdGUgX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhyYW5nZXM6IFtudW1iZXIsIG51bWJlcl1bXSwgbGluZTogSUJ1ZmZlckxpbmUsIHN0YXJ0Q29sOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY3VycmVudFJhbmdlSW5kZXggPSAwO1xuICAgIGxldCBjdXJyZW50UmFuZ2VTdGFydGVkID0gZmFsc2U7XG4gICAgbGV0IGN1cnJlbnRTdHJpbmdJbmRleCA9IDA7XG4gICAgbGV0IGN1cnJlbnRSYW5nZSA9IHJhbmdlc1tjdXJyZW50UmFuZ2VJbmRleF07XG5cbiAgICAvLyBJZiB3ZSBnb3QgdGhyb3VnaCBhbGwgb2YgdGhlIHJhbmdlcywgc3RvcCBzZWFyY2hpbmdcbiAgICBpZiAoIWN1cnJlbnRSYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IHggPSBzdGFydENvbDsgeCA8IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczsgeCsrKSB7XG4gICAgICBjb25zdCB3aWR0aCA9IGxpbmUuZ2V0V2lkdGgoeCk7XG4gICAgICBjb25zdCBsZW5ndGggPSBsaW5lLmdldFN0cmluZyh4KS5sZW5ndGggfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO1xuXG4gICAgICAvLyBXZSBza2lwIHplcm8td2lkdGggY2hhcmFjdGVycyB3aGVuIGNyZWF0aW5nIHRoZSBzdHJpbmcgdG8gam9pbiB0aGUgdGV4dFxuICAgICAgLy8gc28gd2UgZG8gdGhlIHNhbWUgaGVyZVxuICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIHN0YXJ0IG9mIHRoZSByYW5nZVxuICAgICAgaWYgKCFjdXJyZW50UmFuZ2VTdGFydGVkICYmIGN1cnJlbnRSYW5nZVswXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzBdID0geDtcbiAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgZW5kIG9mIHRoZSByYW5nZVxuICAgICAgaWYgKGN1cnJlbnRSYW5nZVsxXSA8PSBjdXJyZW50U3RyaW5nSW5kZXgpIHtcbiAgICAgICAgY3VycmVudFJhbmdlWzFdID0geDtcblxuICAgICAgICAvLyBXZSdyZSBmaW5pc2hlZCB3aXRoIHRoaXMgcmFuZ2UsIHNvIHdlIG1vdmUgdG8gdGhlIG5leHQgb25lXG4gICAgICAgIGN1cnJlbnRSYW5nZSA9IHJhbmdlc1srK2N1cnJlbnRSYW5nZUluZGV4XTtcblxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gbW9yZSByYW5nZXMgbGVmdCwgc3RvcCBzZWFyY2hpbmdcbiAgICAgICAgaWYgKCFjdXJyZW50UmFuZ2UpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJhbmdlcyBjYW4gYmUgb24gYWRqYWNlbnQgY2hhcmFjdGVycy4gQmVjYXVzZSB0aGUgZW5kIGluZGV4IG9mIHRoZVxuICAgICAgICAvLyByYW5nZXMgYXJlIGV4Y2x1c2l2ZSwgdGhpcyBtZWFucyB0aGF0IHRoZSBpbmRleCBmb3IgdGhlIHN0YXJ0IG9mIGFcbiAgICAgICAgLy8gcmFuZ2UgY2FuIGJlIHRoZSBzYW1lIGFzIHRoZSBlbmQgaW5kZXggb2YgdGhlIHByZXZpb3VzIHJhbmdlLiBUb1xuICAgICAgICAvLyBhY2NvdW50IGZvciB0aGUgc3RhcnQgb2YgdGhlIG5leHQgcmFuZ2UsIHdlIGNoZWNrIGhlcmUganVzdCBpbiBjYXNlLlxuICAgICAgICBpZiAoY3VycmVudFJhbmdlWzBdIDw9IGN1cnJlbnRTdHJpbmdJbmRleCkge1xuICAgICAgICAgIGN1cnJlbnRSYW5nZVswXSA9IHg7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudFJhbmdlU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB0aGUgc3RyaW5nIGluZGV4IGJhc2VkIG9uIHRoZSBjaGFyYWN0ZXIgbGVuZ3RoIHRvIGxpbmUgdXAgd2l0aFxuICAgICAgLy8gdGhlIGNvbHVtbiBhZGp1c3RtZW50XG4gICAgICBjdXJyZW50U3RyaW5nSW5kZXggKz0gbGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIElmIHRoZXJlIGlzIHN0aWxsIGEgcmFuZ2UgbGVmdCBhdCB0aGUgZW5kLCBpdCBtdXN0IGV4dGVuZCBhbGwgdGhlIHdheSB0b1xuICAgIC8vIHRoZSBlbmQgb2YgdGhlIGxpbmUuXG4gICAgaWYgKGN1cnJlbnRSYW5nZSkge1xuICAgICAgY3VycmVudFJhbmdlWzFdID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlIHByb3ZpZGVkIHN0YXJ0IGFuZCBlbmQgaW50byB0aGUgbGlzdCBvZlxuICAgKiBleGlzdGluZyByYW5nZXMuIFRoZSBtZXJnZSBpcyBkb25lIGluIHBsYWNlIG9uIHRoZSBleGlzdGluZyByYW5nZSBmb3JcbiAgICogcGVyZm9ybWFuY2UgYW5kIGlzIGFsc28gcmV0dXJuZWQuXG4gICAqIEBwYXJhbSByYW5nZXMgRXhpc3RpbmcgcmFuZ2UgbGlzdFxuICAgKiBAcGFyYW0gbmV3UmFuZ2UgVHVwbGUgb2YgdHdvIG51bWJlcnMgcmVwcmVzZW50aW5nIHRoZSBuZXcgcmFuZ2UgdG8gbWVyZ2UgaW4uXG4gICAqIEByZXR1cm5zIFRoZSByYW5nZXMgaW5wdXQgd2l0aCB0aGUgbmV3IHJhbmdlIG1lcmdlZCBpbiBwbGFjZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX21lcmdlUmFuZ2VzKHJhbmdlczogW251bWJlciwgbnVtYmVyXVtdLCBuZXdSYW5nZTogW251bWJlciwgbnVtYmVyXSk6IFtudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgbGV0IGluUmFuZ2UgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmFuZ2UgPSByYW5nZXNbaV07XG4gICAgICBpZiAoIWluUmFuZ2UpIHtcbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzBdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAxOiBOZXcgcmFuZ2UgaXMgYmVmb3JlIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICByYW5nZXMuc3BsaWNlKGksIDAsIG5ld1JhbmdlKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSAyOiBOZXcgcmFuZ2UgaXMgZWl0aGVyIHdob2xseSBjb250YWluZWQgd2l0aGluIHRoZVxuICAgICAgICAgIC8vIHNlYXJjaCByYW5nZSBvciBvdmVybGFwcyB3aXRoIHRoZSBmcm9udCBvZiBpdFxuICAgICAgICAgIHJhbmdlWzBdID0gTWF0aC5taW4obmV3UmFuZ2VbMF0sIHJhbmdlWzBdKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzBdIDwgcmFuZ2VbMV0pIHtcbiAgICAgICAgICAvLyBDYXNlIDM6IE5ldyByYW5nZSBlaXRoZXIgd2hvbGx5IGNvbnRhaW5zIHRoZSBzZWFyY2ggcmFuZ2VcbiAgICAgICAgICAvLyBvciBvdmVybGFwcyB3aXRoIHRoZSBlbmQgb2YgaXRcbiAgICAgICAgICByYW5nZVswXSA9IE1hdGgubWluKG5ld1JhbmdlWzBdLCByYW5nZVswXSk7XG4gICAgICAgICAgaW5SYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXNlIDQ6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIHNlYXJjaCByYW5nZVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChuZXdSYW5nZVsxXSA8PSByYW5nZVswXSkge1xuICAgICAgICAgIC8vIENhc2UgNTogTmV3IHJhbmdlIGV4dGVuZHMgZnJvbSBwcmV2aW91cyByYW5nZSBidXQgZG9lc24ndFxuICAgICAgICAgIC8vIHJlYWNoIHRoZSBjdXJyZW50IG9uZVxuICAgICAgICAgIHJhbmdlc1tpIC0gMV1bMV0gPSBuZXdSYW5nZVsxXTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld1JhbmdlWzFdIDw9IHJhbmdlWzFdKSB7XG4gICAgICAgICAgLy8gQ2FzZSA2OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHBydmlvdXMgcmFuZ2UgaW50byB0aGVcbiAgICAgICAgICAvLyBjdXJyZW50IHJhbmdlXG4gICAgICAgICAgcmFuZ2VzW2kgLSAxXVsxXSA9IE1hdGgubWF4KG5ld1JhbmdlWzFdLCByYW5nZVsxXSk7XG4gICAgICAgICAgcmFuZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICByZXR1cm4gcmFuZ2VzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FzZSA3OiBOZXcgcmFuZ2UgZXh0ZW5kcyBmcm9tIHByZXZpb3VzIHJhbmdlIHBhc3QgdGhlXG4gICAgICAgIC8vIGVuZCBvZiB0aGUgY3VycmVudCByYW5nZVxuICAgICAgICByYW5nZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICBpLS07XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGluUmFuZ2UpIHtcbiAgICAgIC8vIENhc2UgODogTmV3IHJhbmdlIGV4dGVuZHMgcGFzdCB0aGUgbGFzdCBleGlzdGluZyByYW5nZVxuICAgICAgcmFuZ2VzW3Jhbmdlcy5sZW5ndGggLSAxXVsxXSA9IG5ld1JhbmdlWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDYXNlIDk6IE5ldyByYW5nZSBzdGFydHMgYWZ0ZXIgdGhlIGxhc3QgZXhpc3RpbmcgcmFuZ2VcbiAgICAgIHJhbmdlcy5wdXNoKG5ld1JhbmdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VzO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGltZW5zaW9ucywgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL3NoYXJlZC9UeXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0lmRmFsc3k8VD4odmFsdWU6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogVCB7XG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlIG11c3Qgbm90IGJlIGZhbHN5Jyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQb3dlcmxpbmVHbHlwaChjb2RlcG9pbnQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAvLyBPbmx5IHJldHVybiB0cnVlIGZvciBQb3dlcmxpbmUgc3ltYm9scyB3aGljaCByZXF1aXJlXG4gIC8vIGRpZmZlcmVudCBwYWRkaW5nIGFuZCBzaG91bGQgYmUgZXhjbHVkZWQgZnJvbSBtaW5pbXVtIGNvbnRyYXN0XG4gIC8vIHJhdGlvIHN0YW5kYXJkc1xuICByZXR1cm4gMHhFMEE0IDw9IGNvZGVwb2ludCAmJiBjb2RlcG9pbnQgPD0gMHhFMEQ2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZXN0cmljdGVkUG93ZXJsaW5lR2x5cGgoY29kZXBvaW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgcmV0dXJuIDB4RTBCMCA8PSBjb2RlcG9pbnQgJiYgY29kZXBvaW50IDw9IDB4RTBCNztcbn1cblxuZnVuY3Rpb24gaXNOZXJkRm9udEdseXBoKGNvZGVwb2ludDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAweEUwMDAgPD0gY29kZXBvaW50ICYmIGNvZGVwb2ludCA8PSAweEY4RkY7XG59XG5cbmZ1bmN0aW9uIGlzQm94T3JCbG9ja0dseXBoKGNvZGVwb2ludDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAweDI1MDAgPD0gY29kZXBvaW50ICYmIGNvZGVwb2ludCA8PSAweDI1OUY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0Vtb2ppKGNvZGVwb2ludDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgY29kZXBvaW50ID49IDB4MUY2MDAgJiYgY29kZXBvaW50IDw9IDB4MUY2NEYgfHwgLy8gRW1vdGljb25zXG4gICAgY29kZXBvaW50ID49IDB4MUYzMDAgJiYgY29kZXBvaW50IDw9IDB4MUY1RkYgfHwgLy8gTWlzYyBTeW1ib2xzIGFuZCBQaWN0b2dyYXBoc1xuICAgIGNvZGVwb2ludCA+PSAweDFGNjgwICYmIGNvZGVwb2ludCA8PSAweDFGNkZGIHx8IC8vIFRyYW5zcG9ydCBhbmQgTWFwXG4gICAgY29kZXBvaW50ID49IDB4MjYwMCAgJiYgY29kZXBvaW50IDw9IDB4MjZGRiAgfHwgLy8gTWlzYyBzeW1ib2xzXG4gICAgY29kZXBvaW50ID49IDB4MjcwMCAgJiYgY29kZXBvaW50IDw9IDB4MjdCRiAgfHwgLy8gRGluZ2JhdHNcbiAgICBjb2RlcG9pbnQgPj0gMHhGRTAwICAmJiBjb2RlcG9pbnQgPD0gMHhGRTBGICB8fCAvLyBWYXJpYXRpb24gU2VsZWN0b3JzXG4gICAgY29kZXBvaW50ID49IDB4MUY5MDAgJiYgY29kZXBvaW50IDw9IDB4MUY5RkYgfHwgLy8gU3VwcGxlbWVudGFsIFN5bWJvbHMgYW5kIFBpY3RvZ3JhcGhzXG4gICAgY29kZXBvaW50ID49IDB4MUYxRTYgJiYgY29kZXBvaW50IDw9IDB4MUYxRkZcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFsbG93UmVzY2FsaW5nKGNvZGVwb2ludDogbnVtYmVyIHwgdW5kZWZpbmVkLCB3aWR0aDogbnVtYmVyLCBnbHlwaFNpemVYOiBudW1iZXIsIGRldmljZUNlbGxXaWR0aDogbnVtYmVyKTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgLy8gSXMgc2luZ2xlIGNlbGwgd2lkdGhcbiAgICB3aWR0aCA9PT0gMSAmJlxuICAgIC8vIEdseXBoIGV4Y2VlZHMgY2VsbCBib3VuZHMsIGFkZCA1MCUgdG8gYXZvaWQgaHVydGluZyByZWFkYWJpbGl0eSBieSByZXNjYWxpbmcgZ2x5cGhzIHRoYXRcbiAgICAvLyBiYXJlbHkgb3ZlcmxhcFxuICAgIGdseXBoU2l6ZVggPiBNYXRoLmNlaWwoZGV2aWNlQ2VsbFdpZHRoICogMS41KSAmJlxuICAgIC8vIE5ldmVyIHJlc2NhbGUgYXNjaWlcbiAgICBjb2RlcG9pbnQgIT09IHVuZGVmaW5lZCAmJiBjb2RlcG9pbnQgPiAweEZGICYmXG4gICAgLy8gTmV2ZXIgcmVzY2FsZSBlbW9qaVxuICAgICFpc0Vtb2ppKGNvZGVwb2ludCkgJiZcbiAgICAvLyBOZXZlciByZXNjYWxlIHBvd2VybGluZSBvciBuZXJkIGZvbnRzXG4gICAgIWlzUG93ZXJsaW5lR2x5cGgoY29kZXBvaW50KSAmJiAhaXNOZXJkRm9udEdseXBoKGNvZGVwb2ludClcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyZWF0R2x5cGhBc0JhY2tncm91bmRDb2xvcihjb2RlcG9pbnQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNQb3dlcmxpbmVHbHlwaChjb2RlcG9pbnQpIHx8IGlzQm94T3JCbG9ja0dseXBoKGNvZGVwb2ludCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZW5kZXJEaW1lbnNpb25zKCk6IElSZW5kZXJEaW1lbnNpb25zIHtcbiAgcmV0dXJuIHtcbiAgICBjc3M6IHtcbiAgICAgIGNhbnZhczogY3JlYXRlRGltZW5zaW9uKCksXG4gICAgICBjZWxsOiBjcmVhdGVEaW1lbnNpb24oKVxuICAgIH0sXG4gICAgZGV2aWNlOiB7XG4gICAgICBjYW52YXM6IGNyZWF0ZURpbWVuc2lvbigpLFxuICAgICAgY2VsbDogY3JlYXRlRGltZW5zaW9uKCksXG4gICAgICBjaGFyOiB7XG4gICAgICAgIHdpZHRoOiAwLFxuICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgIGxlZnQ6IDAsXG4gICAgICAgIHRvcDogMFxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGltZW5zaW9uKCk6IElEaW1lbnNpb25zIHtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVOZXh0VmFyaWFudE9mZnNldChjZWxsV2lkdGg6IG51bWJlciwgbGluZVdpZHRoOiBudW1iZXIsIGN1cnJlbnRPZmZzZXQ6IG51bWJlciA9IDApOiBudW1iZXIge1xuICByZXR1cm4gKGNlbGxXaWR0aCAtIChNYXRoLnJvdW5kKGxpbmVXaWR0aCkgKiAyIC0gY3VycmVudE9mZnNldCkpICUgKE1hdGgucm91bmQobGluZVdpZHRoKSAqIDIpO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4LCAyMDIzIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgSUNvbG9yIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IElOVkVSVEVEX0RFRkFVTFRfQ09MT1IgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL3NoYXJlZC9Db25zdGFudHMnO1xuaW1wb3J0IHsgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIEF0dHJpYnV0ZXMgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlLCBJRGVjb3JhdGlvblNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBjaGFubmVscywgY29sb3IgfSBmcm9tICdjb21tb24vQ29sb3InO1xuaW1wb3J0IHsgSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsIElDb3JlQnJvd3NlclNlcnZpY2UsIElUaGVtZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEpvaW5lZENlbGxEYXRhIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlJztcbmltcG9ydCB7IHRyZWF0R2x5cGhBc0JhY2tncm91bmRDb2xvciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvc2hhcmVkL1JlbmRlcmVyVXRpbHMnO1xuaW1wb3J0IHsgQXR0cmlidXRlRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBXaWR0aENhY2hlIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9kb20vV2lkdGhDYWNoZSc7XG5pbXBvcnQgeyBJQ29sb3JDb250cmFzdENhY2hlIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5cblxuZXhwb3J0IGNvbnN0IGVudW0gUm93Q3NzIHtcbiAgQk9MRF9DTEFTUyA9ICd4dGVybS1ib2xkJyxcbiAgRElNX0NMQVNTID0gJ3h0ZXJtLWRpbScsXG4gIElUQUxJQ19DTEFTUyA9ICd4dGVybS1pdGFsaWMnLFxuICBVTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tdW5kZXJsaW5lJyxcbiAgT1ZFUkxJTkVfQ0xBU1MgPSAneHRlcm0tb3ZlcmxpbmUnLFxuICBTVFJJS0VUSFJPVUdIX0NMQVNTID0gJ3h0ZXJtLXN0cmlrZXRocm91Z2gnLFxuICBDVVJTT1JfQ0xBU1MgPSAneHRlcm0tY3Vyc29yJyxcbiAgQ1VSU09SX0JMSU5LX0NMQVNTID0gJ3h0ZXJtLWN1cnNvci1ibGluaycsXG4gIENVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyA9ICd4dGVybS1jdXJzb3ItYmxvY2snLFxuICBDVVJTT1JfU1RZTEVfT1VUTElORV9DTEFTUyA9ICd4dGVybS1jdXJzb3Itb3V0bGluZScsXG4gIENVUlNPUl9TVFlMRV9CQVJfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLWJhcicsXG4gIENVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MgPSAneHRlcm0tY3Vyc29yLXVuZGVybGluZSdcbn1cblxuXG5leHBvcnQgY2xhc3MgRG9tUmVuZGVyZXJSb3dGYWN0b3J5IHtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgcHJpdmF0ZSBfc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3NlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBkZWZhdWx0U3BhY2luZyA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZG9jdW1lbnQ6IERvY3VtZW50LFxuICAgIEBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlOiBJQ2hhcmFjdGVySm9pbmVyU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElDb3JlQnJvd3NlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZUJyb3dzZXJTZXJ2aWNlOiBJQ29yZUJyb3dzZXJTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBASURlY29yYXRpb25TZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2RlY29yYXRpb25TZXJ2aWNlOiBJRGVjb3JhdGlvblNlcnZpY2UsXG4gICAgQElUaGVtZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfdGhlbWVTZXJ2aWNlOiBJVGhlbWVTZXJ2aWNlXG4gICkge31cblxuICBwdWJsaWMgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLl9zZWxlY3Rpb25FbmQgPSBlbmQ7XG4gICAgdGhpcy5fY29sdW1uU2VsZWN0TW9kZSA9IGNvbHVtblNlbGVjdE1vZGU7XG4gIH1cblxuICBwdWJsaWMgY3JlYXRlUm93KFxuICAgIGxpbmVEYXRhOiBJQnVmZmVyTGluZSxcbiAgICByb3c6IG51bWJlcixcbiAgICBpc0N1cnNvclJvdzogYm9vbGVhbixcbiAgICBjdXJzb3JTdHlsZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGN1cnNvckluYWN0aXZlU3R5bGU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBjdXJzb3JYOiBudW1iZXIsXG4gICAgY3Vyc29yQmxpbms6IGJvb2xlYW4sXG4gICAgY2VsbFdpZHRoOiBudW1iZXIsXG4gICAgd2lkdGhDYWNoZTogV2lkdGhDYWNoZSxcbiAgICBsaW5rU3RhcnQ6IG51bWJlcixcbiAgICBsaW5rRW5kOiBudW1iZXJcbiAgKTogSFRNTFNwYW5FbGVtZW50W10ge1xuXG4gICAgY29uc3QgZWxlbWVudHM6IEhUTUxTcGFuRWxlbWVudFtdID0gW107XG4gICAgY29uc3Qgam9pbmVkUmFuZ2VzID0gdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5nZXRKb2luZWRDaGFyYWN0ZXJzKHJvdyk7XG4gICAgY29uc3QgY29sb3JzID0gdGhpcy5fdGhlbWVTZXJ2aWNlLmNvbG9ycztcblxuICAgIGxldCBsaW5lTGVuZ3RoID0gbGluZURhdGEuZ2V0Tm9CZ1RyaW1tZWRMZW5ndGgoKTtcbiAgICBpZiAoaXNDdXJzb3JSb3cgJiYgbGluZUxlbmd0aCA8IGN1cnNvclggKyAxKSB7XG4gICAgICBsaW5lTGVuZ3RoID0gY3Vyc29yWCArIDE7XG4gICAgfVxuXG4gICAgbGV0IGNoYXJFbGVtZW50OiBIVE1MU3BhbkVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGNlbGxBbW91bnQgPSAwO1xuICAgIGxldCB0ZXh0ID0gJyc7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBvbGRCZyA9IDA7XG4gICAgbGV0IG9sZEZnID0gMDtcbiAgICBsZXQgb2xkRXh0ID0gMDtcbiAgICBsZXQgb2xkTGlua0hvdmVyOiBudW1iZXIgfCBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IG9sZFNwYWNpbmcgPSAwO1xuICAgIGxldCBvbGRJc0luU2VsZWN0aW9uOiBib29sZWFuID0gZmFsc2U7XG4gICAgbGV0IHNwYWNpbmcgPSAwO1xuICAgIGxldCBza2lwSm9pbmVkQ2hlY2tVbnRpbFggPSAwO1xuICAgIGNvbnN0IGNsYXNzZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBoYXNIb3ZlciA9IGxpbmtTdGFydCAhPT0gLTEgJiYgbGlua0VuZCAhPT0gLTE7XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGxpbmVMZW5ndGg7IHgrKykge1xuICAgICAgbGluZURhdGEubG9hZENlbGwoeCwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgbGV0IHdpZHRoID0gdGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKTtcblxuICAgICAgLy8gVGhlIGNoYXJhY3RlciB0byB0aGUgbGVmdCBpcyBhIHdpZGUgY2hhcmFjdGVyLCBkcmF3aW5nIGlzIG93bmVkIGJ5IHRoZSBjaGFyIGF0IHgtMVxuICAgICAgaWYgKHdpZHRoID09PSAwKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0cnVlLCBpbmRpY2F0ZXMgdGhhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIocykgdG8gZHJhdyB3ZXJlIGpvaW5lZC5cbiAgICAgIGxldCBpc0pvaW5lZCA9IGZhbHNlO1xuXG4gICAgICAvLyBJbmRpY2F0ZXMgd2hldGhlciB0aGlzIGNlbGwgaXMgcGFydCBvZiBhIGpvaW5lZCByYW5nZSB0aGF0IHNob3VsZCBiZSBpZ25vcmVkIGFzIGl0IGNhbm5vdFxuICAgICAgLy8gYmUgcmVuZGVyZWQgZW50aXJlbHksIGxpa2UgdGhlIHNlbGVjdGlvbiBzdGF0ZSBkaWZmZXJzIGFjcm9zcyB0aGUgcmFuZ2UuXG4gICAgICBsZXQgaXNWYWxpZEpvaW5SYW5nZSA9ICh4ID49IHNraXBKb2luZWRDaGVja1VudGlsWCk7XG5cbiAgICAgIGxldCBsYXN0Q2hhclggPSB4O1xuXG4gICAgICAvLyBQcm9jZXNzIGFueSBqb2luZWQgY2hhcmFjdGVyIHJhbmdlcyBhcyBuZWVkZWQuIEJlY2F1c2Ugb2YgaG93IHRoZVxuICAgICAgLy8gcmFuZ2VzIGFyZSBwcm9kdWNlZCwgd2Uga25vdyB0aGF0IHRoZXkgYXJlIHZhbGlkIGZvciB0aGUgY2hhcmFjdGVyc1xuICAgICAgLy8gYW5kIGF0dHJpYnV0ZXMgb2Ygb3VyIGlucHV0LlxuICAgICAgbGV0IGNlbGwgPSB0aGlzLl93b3JrQ2VsbDtcbiAgICAgIGlmIChqb2luZWRSYW5nZXMubGVuZ3RoID4gMCAmJiB4ID09PSBqb2luZWRSYW5nZXNbMF1bMF0gJiYgaXNWYWxpZEpvaW5SYW5nZSkge1xuICAgICAgICBjb25zdCByYW5nZSA9IGpvaW5lZFJhbmdlcy5zaGlmdCgpITtcbiAgICAgICAgLy8gSWYgdGhlIGxpZ2F0dXJlJ3Mgc2VsZWN0aW9uIHN0YXRlIGlzIG5vdCBjb25zaXN0ZW50LCBkb24ndCBqb2luIGl0LiBUaGlzIGhlbHBzIHRoZVxuICAgICAgICAvLyBzZWxlY3Rpb24gcmVuZGVyIGNvcnJlY3RseSByZWdhcmRsZXNzIHdoZXRoZXIgdGhleSBzaG91bGQgYmUgam9pbmVkLlxuICAgICAgICBjb25zdCBmaXJzdFNlbGVjdGlvblN0YXRlID0gdGhpcy5faXNDZWxsSW5TZWxlY3Rpb24ocmFuZ2VbMF0sIHJvdyk7XG4gICAgICAgIGZvciAoaSA9IHJhbmdlWzBdICsgMTsgaSA8IHJhbmdlWzFdOyBpKyspIHtcbiAgICAgICAgICBpc1ZhbGlkSm9pblJhbmdlICYmPSAoZmlyc3RTZWxlY3Rpb25TdGF0ZSA9PT0gdGhpcy5faXNDZWxsSW5TZWxlY3Rpb24oaSwgcm93KSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2ltaWxhcmx5LCBpZiB0aGUgY3Vyc29yIGlzIGluIHRoZSBsaWdhdHVyZSwgZG9uJ3Qgam9pbiBpdC5cbiAgICAgICAgaXNWYWxpZEpvaW5SYW5nZSAmJj0gIWlzQ3Vyc29yUm93IHx8IGN1cnNvclggPCByYW5nZVswXSB8fCBjdXJzb3JYID49IHJhbmdlWzFdO1xuICAgICAgICBpZiAoIWlzVmFsaWRKb2luUmFuZ2UpIHtcbiAgICAgICAgICBza2lwSm9pbmVkQ2hlY2tVbnRpbFggPSByYW5nZVsxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpc0pvaW5lZCA9IHRydWU7XG5cbiAgICAgICAgICAvLyBXZSBhbHJlYWR5IGtub3cgdGhlIGV4YWN0IHN0YXJ0IGFuZCBlbmQgY29sdW1uIG9mIHRoZSBqb2luZWQgcmFuZ2UsXG4gICAgICAgICAgLy8gc28gd2UgZ2V0IHRoZSBzdHJpbmcgYW5kIHdpZHRoIHJlcHJlc2VudGluZyBpdCBkaXJlY3RseVxuICAgICAgICAgIGNlbGwgPSBuZXcgSm9pbmVkQ2VsbERhdGEoXG4gICAgICAgICAgICB0aGlzLl93b3JrQ2VsbCxcbiAgICAgICAgICAgIGxpbmVEYXRhLnRyYW5zbGF0ZVRvU3RyaW5nKHRydWUsIHJhbmdlWzBdLCByYW5nZVsxXSksXG4gICAgICAgICAgICByYW5nZVsxXSAtIHJhbmdlWzBdXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIFNraXAgb3ZlciB0aGUgY2VsbHMgb2NjdXBpZWQgYnkgdGhpcyByYW5nZSBpbiB0aGUgbG9vcFxuICAgICAgICAgIGxhc3RDaGFyWCA9IHJhbmdlWzFdIC0gMTtcblxuICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIHdpZHRoXG4gICAgICAgICAgd2lkdGggPSBjZWxsLmdldFdpZHRoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaXNJblNlbGVjdGlvbiA9IHRoaXMuX2lzQ2VsbEluU2VsZWN0aW9uKHgsIHJvdyk7XG4gICAgICBjb25zdCBpc0N1cnNvckNlbGwgPSBpc0N1cnNvclJvdyAmJiB4ID09PSBjdXJzb3JYO1xuICAgICAgY29uc3QgaXNMaW5rSG92ZXIgPSBoYXNIb3ZlciAmJiB4ID49IGxpbmtTdGFydCAmJiB4IDw9IGxpbmtFbmQ7XG5cbiAgICAgIGxldCBpc0RlY29yYXRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZm9yRWFjaERlY29yYXRpb25BdENlbGwoeCwgcm93LCB1bmRlZmluZWQsIGQgPT4ge1xuICAgICAgICBpc0RlY29yYXRlZCA9IHRydWU7XG4gICAgICB9KTtcblxuICAgICAgLy8gZ2V0IGNoYXJzIHRvIHJlbmRlciBmb3IgdGhpcyBjZWxsXG4gICAgICBsZXQgY2hhcnMgPSBjZWxsLmdldENoYXJzKCkgfHwgV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgICBpZiAoY2hhcnMgPT09ICcgJyAmJiAoY2VsbC5pc1VuZGVybGluZSgpIHx8IGNlbGwuaXNPdmVybGluZSgpKSkge1xuICAgICAgICBjaGFycyA9ICdcXHhhMCc7XG4gICAgICB9XG5cbiAgICAgIC8vIGxvb2t1cCBjaGFyIHJlbmRlciB3aWR0aCBhbmQgY2FsYyBzcGFjaW5nXG4gICAgICBzcGFjaW5nID0gd2lkdGggKiBjZWxsV2lkdGggLSB3aWR0aENhY2hlLmdldChjaGFycywgY2VsbC5pc0JvbGQoKSwgY2VsbC5pc0l0YWxpYygpKTtcblxuICAgICAgaWYgKCFjaGFyRWxlbWVudCkge1xuICAgICAgICBjaGFyRWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBjaGFycyBjYW4gb25seSBiZSBtZXJnZWQgb24gZXhpc3Rpbmcgc3BhbiBpZjpcbiAgICAgICAgICogLSBleGlzdGluZyBzcGFuIG9ubHkgY29udGFpbnMgbWVyZ2VhYmxlIGNoYXJzIChjZWxsQW1vdW50ICE9IDApXG4gICAgICAgICAqIC0gYmcgZGlkIG5vdCBjaGFuZ2UgKG9yIGJvdGggYXJlIGluIHNlbGVjdGlvbilcbiAgICAgICAgICogLSBmZyBkaWQgbm90IGNoYW5nZSAob3IgYm90aCBhcmUgaW4gc2VsZWN0aW9uIGFuZCBzZWxlY3Rpb24gZmcgaXMgc2V0KVxuICAgICAgICAgKiAtIGV4dCBkaWQgbm90IGNoYW5nZVxuICAgICAgICAgKiAtIHVuZGVybGluZSBmcm9tIGhvdmVyIHN0YXRlIGRpZCBub3QgY2hhbmdlXG4gICAgICAgICAqIC0gY2VsbCBjb250ZW50IHJlbmRlcnMgdG8gc2FtZSBsZXR0ZXItc3BhY2luZ1xuICAgICAgICAgKiAtIGNlbGwgaXMgbm90IGN1cnNvclxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNlbGxBbW91bnRcbiAgICAgICAgICAmJiAoXG4gICAgICAgICAgICAoaXNJblNlbGVjdGlvbiAmJiBvbGRJc0luU2VsZWN0aW9uKVxuICAgICAgICAgICAgfHwgKCFpc0luU2VsZWN0aW9uICYmICFvbGRJc0luU2VsZWN0aW9uICYmIGNlbGwuYmcgPT09IG9sZEJnKVxuICAgICAgICAgIClcbiAgICAgICAgICAmJiAoXG4gICAgICAgICAgICAoaXNJblNlbGVjdGlvbiAmJiBvbGRJc0luU2VsZWN0aW9uICYmIGNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kKVxuICAgICAgICAgICAgfHwgY2VsbC5mZyA9PT0gb2xkRmdcbiAgICAgICAgICApXG4gICAgICAgICAgJiYgY2VsbC5leHRlbmRlZC5leHQgPT09IG9sZEV4dFxuICAgICAgICAgICYmIGlzTGlua0hvdmVyID09PSBvbGRMaW5rSG92ZXJcbiAgICAgICAgICAmJiBzcGFjaW5nID09PSBvbGRTcGFjaW5nXG4gICAgICAgICAgJiYgIWlzQ3Vyc29yQ2VsbFxuICAgICAgICAgICYmICFpc0pvaW5lZFxuICAgICAgICAgICYmICFpc0RlY29yYXRlZFxuICAgICAgICAgICYmIGlzVmFsaWRKb2luUmFuZ2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gbm8gc3BhbiBhbHRlcmF0aW9ucywgdGh1cyBvbmx5IGFjY291bnQgY2hhcnMgc2tpcHBpbmcgYWxsIGNvZGUgYmVsb3dcbiAgICAgICAgICBpZiAoY2VsbC5pc0ludmlzaWJsZSgpKSB7XG4gICAgICAgICAgICB0ZXh0ICs9IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ICs9IGNoYXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjZWxsQW1vdW50Kys7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogY2Fubm90IG1lcmdlOlxuICAgICAgICAgICAqIC0gYXBwbHkgbGVmdC1vdmVyIHRleHQgdG8gb2xkIHNwYW5cbiAgICAgICAgICAgKiAtIGNyZWF0ZSBuZXcgc3BhbiwgcmVzZXQgc3RhdGUgaG9sZGVycyBjZWxsQW1vdW50ICYgdGV4dFxuICAgICAgICAgICAqL1xuICAgICAgICAgIGlmIChjZWxsQW1vdW50KSB7XG4gICAgICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNoYXJFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgIGNlbGxBbW91bnQgPSAwO1xuICAgICAgICAgIHRleHQgPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gcHJlc2VydmUgY29uZGl0aW9ucyBmb3IgbmV4dCBtZXJnZXIgZXZhbCByb3VuZFxuICAgICAgb2xkQmcgPSBjZWxsLmJnO1xuICAgICAgb2xkRmcgPSBjZWxsLmZnO1xuICAgICAgb2xkRXh0ID0gY2VsbC5leHRlbmRlZC5leHQ7XG4gICAgICBvbGRMaW5rSG92ZXIgPSBpc0xpbmtIb3ZlcjtcbiAgICAgIG9sZFNwYWNpbmcgPSBzcGFjaW5nO1xuICAgICAgb2xkSXNJblNlbGVjdGlvbiA9IGlzSW5TZWxlY3Rpb247XG5cbiAgICAgIGlmIChpc0pvaW5lZCkge1xuICAgICAgICAvLyBUaGUgRE9NIHJlbmRlcmVyIGNvbG9ycyB0aGUgYmFja2dyb3VuZCBvZiB0aGUgY3Vyc29yIGJ1dCBmb3IgbGlnYXR1cmVzIGFsbCBjZWxscyBhcmVcbiAgICAgICAgLy8gam9pbmVkLiBUaGUgd29ya2Fyb3VuZCBoZXJlIGlzIHRvIHNob3cgYSBjdXJzb3IgYXJvdW5kIHRoZSB3aG9sZSBsaWdhdHVyZSBzbyBpdCBzaG93cyB1cCxcbiAgICAgICAgLy8gdGhlIGN1cnNvciBsb29rcyB0aGUgc2FtZSB3aGVuIG9uIGFueSBjaGFyYWN0ZXIgb2YgdGhlIGxpZ2F0dXJlIHRob3VnaFxuICAgICAgICBpZiAoY3Vyc29yWCA+PSB4ICYmIGN1cnNvclggPD0gbGFzdENoYXJYKSB7XG4gICAgICAgICAgY3Vyc29yWCA9IHg7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiAmJiBpc0N1cnNvckNlbGwgJiYgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZCkge1xuICAgICAgICBjbGFzc2VzLnB1c2goUm93Q3NzLkNVUlNPUl9DTEFTUyk7XG4gICAgICAgIGlmICh0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgaWYgKGN1cnNvckJsaW5rKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goUm93Q3NzLkNVUlNPUl9CTElOS19DTEFTUyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsYXNzZXMucHVzaChcbiAgICAgICAgICAgIGN1cnNvclN0eWxlID09PSAnYmFyJ1xuICAgICAgICAgICAgICA/IFJvd0Nzcy5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTXG4gICAgICAgICAgICAgIDogY3Vyc29yU3R5bGUgPT09ICd1bmRlcmxpbmUnXG4gICAgICAgICAgICAgICAgPyBSb3dDc3MuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTU1xuICAgICAgICAgICAgICAgIDogUm93Q3NzLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTU1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGN1cnNvckluYWN0aXZlU3R5bGUpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoY3Vyc29ySW5hY3RpdmVTdHlsZSkge1xuICAgICAgICAgICAgICBjYXNlICdvdXRsaW5lJzpcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goUm93Q3NzLkNVUlNPUl9TVFlMRV9PVVRMSU5FX0NMQVNTKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnYmxvY2snOlxuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaChSb3dDc3MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSAnYmFyJzpcbiAgICAgICAgICAgICAgICBjbGFzc2VzLnB1c2goUm93Q3NzLkNVUlNPUl9TVFlMRV9CQVJfQ0xBU1MpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlICd1bmRlcmxpbmUnOlxuICAgICAgICAgICAgICAgIGNsYXNzZXMucHVzaChSb3dDc3MuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjZWxsLmlzQm9sZCgpKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaChSb3dDc3MuQk9MRF9DTEFTUyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChjZWxsLmlzSXRhbGljKCkpIHtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKFJvd0Nzcy5JVEFMSUNfQ0xBU1MpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2VsbC5pc0RpbSgpKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaChSb3dDc3MuRElNX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNlbGwuaXNJbnZpc2libGUoKSkge1xuICAgICAgICB0ZXh0ID0gV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gY2VsbC5nZXRDaGFycygpIHx8IFdISVRFU1BBQ0VfQ0VMTF9DSEFSO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2VsbC5pc1VuZGVybGluZSgpKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaChgJHtSb3dDc3MuVU5ERVJMSU5FX0NMQVNTfS0ke2NlbGwuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGV9YCk7XG4gICAgICAgIGlmICh0ZXh0ID09PSAnICcpIHtcbiAgICAgICAgICB0ZXh0ID0gJ1xceGEwJzsgLy8gPSAmbmJzcDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNlbGwuaXNVbmRlcmxpbmVDb2xvckRlZmF1bHQoKSkge1xuICAgICAgICAgIGlmIChjZWxsLmlzVW5kZXJsaW5lQ29sb3JSR0IoKSkge1xuICAgICAgICAgICAgY2hhckVsZW1lbnQuc3R5bGUudGV4dERlY29yYXRpb25Db2xvciA9IGByZ2IoJHtBdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoY2VsbC5nZXRVbmRlcmxpbmVDb2xvcigpKS5qb2luKCcsJyl9KWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBmZyA9IGNlbGwuZ2V0VW5kZXJsaW5lQ29sb3IoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzICYmIGNlbGwuaXNCb2xkKCkgJiYgZmcgPCA4KSB7XG4gICAgICAgICAgICAgIGZnICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFyRWxlbWVudC5zdHlsZS50ZXh0RGVjb3JhdGlvbkNvbG9yID0gY29sb3JzLmFuc2lbZmddLmNzcztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNlbGwuaXNPdmVybGluZSgpKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaChSb3dDc3MuT1ZFUkxJTkVfQ0xBU1MpO1xuICAgICAgICBpZiAodGV4dCA9PT0gJyAnKSB7XG4gICAgICAgICAgdGV4dCA9ICdcXHhhMCc7IC8vID0gJm5ic3A7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGNlbGwuaXNTdHJpa2V0aHJvdWdoKCkpIHtcbiAgICAgICAgY2xhc3Nlcy5wdXNoKFJvd0Nzcy5TVFJJS0VUSFJPVUdIX0NMQVNTKTtcbiAgICAgIH1cblxuICAgICAgLy8gYXBwbHkgbGluayBob3ZlciB1bmRlcmxpbmUgbGF0ZSwgZWZmZWN0aXZlbHkgb3ZlcnJpZGVzIGFueSBwcmV2aW91cyB0ZXh0LWRlY29yYXRpb25cbiAgICAgIC8vIHNldHRpbmdzXG4gICAgICBpZiAoaXNMaW5rSG92ZXIpIHtcbiAgICAgICAgY2hhckVsZW1lbnQuc3R5bGUudGV4dERlY29yYXRpb24gPSAndW5kZXJsaW5lJztcbiAgICAgIH1cblxuICAgICAgbGV0IGZnID0gY2VsbC5nZXRGZ0NvbG9yKCk7XG4gICAgICBsZXQgZmdDb2xvck1vZGUgPSBjZWxsLmdldEZnQ29sb3JNb2RlKCk7XG4gICAgICBsZXQgYmcgPSBjZWxsLmdldEJnQ29sb3IoKTtcbiAgICAgIGxldCBiZ0NvbG9yTW9kZSA9IGNlbGwuZ2V0QmdDb2xvck1vZGUoKTtcbiAgICAgIGNvbnN0IGlzSW52ZXJzZSA9ICEhY2VsbC5pc0ludmVyc2UoKTtcbiAgICAgIGlmIChpc0ludmVyc2UpIHtcbiAgICAgICAgY29uc3QgdGVtcCA9IGZnO1xuICAgICAgICBmZyA9IGJnO1xuICAgICAgICBiZyA9IHRlbXA7XG4gICAgICAgIGNvbnN0IHRlbXAyID0gZmdDb2xvck1vZGU7XG4gICAgICAgIGZnQ29sb3JNb2RlID0gYmdDb2xvck1vZGU7XG4gICAgICAgIGJnQ29sb3JNb2RlID0gdGVtcDI7XG4gICAgICB9XG5cbiAgICAgIC8vIEFwcGx5IGFueSBkZWNvcmF0aW9uIGZvcmVncm91bmQvYmFja2dyb3VuZCBvdmVycmlkZXMsIHRoaXMgbXVzdCBoYXBwZW4gYWZ0ZXIgaW52ZXJzZSBoYXNcbiAgICAgIC8vIGJlZW4gYXBwbGllZFxuICAgICAgbGV0IGJnT3ZlcnJpZGU6IElDb2xvciB8IHVuZGVmaW5lZDtcbiAgICAgIGxldCBmZ092ZXJyaWRlOiBJQ29sb3IgfCB1bmRlZmluZWQ7XG4gICAgICBsZXQgaXNUb3AgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmZvckVhY2hEZWNvcmF0aW9uQXRDZWxsKHgsIHJvdywgdW5kZWZpbmVkLCBkID0+IHtcbiAgICAgICAgaWYgKGQub3B0aW9ucy5sYXllciAhPT0gJ3RvcCcgJiYgaXNUb3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQuYmFja2dyb3VuZENvbG9yUkdCKSB7XG4gICAgICAgICAgYmdDb2xvck1vZGUgPSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgICAgICBiZyA9IGQuYmFja2dyb3VuZENvbG9yUkdCLnJnYmEgPj4gOCAmIDB4RkZGRkZGO1xuICAgICAgICAgIGJnT3ZlcnJpZGUgPSBkLmJhY2tncm91bmRDb2xvclJHQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZC5mb3JlZ3JvdW5kQ29sb3JSR0IpIHtcbiAgICAgICAgICBmZ0NvbG9yTW9kZSA9IEF0dHJpYnV0ZXMuQ01fUkdCO1xuICAgICAgICAgIGZnID0gZC5mb3JlZ3JvdW5kQ29sb3JSR0IucmdiYSA+PiA4ICYgMHhGRkZGRkY7XG4gICAgICAgICAgZmdPdmVycmlkZSA9IGQuZm9yZWdyb3VuZENvbG9yUkdCO1xuICAgICAgICB9XG4gICAgICAgIGlzVG9wID0gZC5vcHRpb25zLmxheWVyID09PSAndG9wJztcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBcHBseSBzZWxlY3Rpb25cbiAgICAgIGlmICghaXNUb3AgJiYgaXNJblNlbGVjdGlvbikge1xuICAgICAgICAvLyBJZiBpbiB0aGUgc2VsZWN0aW9uLCBmb3JjZSB0aGUgZWxlbWVudCB0byBiZSBhYm92ZSB0aGUgc2VsZWN0aW9uIHRvIGltcHJvdmUgY29udHJhc3QgYW5kXG4gICAgICAgIC8vIHN1cHBvcnQgb3BhcXVlIHNlbGVjdGlvbnMuIFRoZSBhcHBsaWVzIGJhY2tncm91bmQgaXMgbm90IGFjdHVhbGx5IG5lZWRlZCBoZXJlIGFzXG4gICAgICAgIC8vIHNlbGVjdGlvbiBpcyBkcmF3biBpbiBhIHNlcGVyYXRlIGNvbnRhaW5lciwgdGhlIG1haW4gcHVycG9zZSBvZiB0aGlzIHRvIGVuc3VyaW5nIG1pbmltdW1cbiAgICAgICAgLy8gY29udHJhc3QgcmF0aW9cbiAgICAgICAgYmdPdmVycmlkZSA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQgPyBjb2xvcnMuc2VsZWN0aW9uQmFja2dyb3VuZE9wYXF1ZSA6IGNvbG9ycy5zZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmRPcGFxdWU7XG4gICAgICAgIGJnID0gYmdPdmVycmlkZS5yZ2JhID4+IDggJiAweEZGRkZGRjtcbiAgICAgICAgYmdDb2xvck1vZGUgPSBBdHRyaWJ1dGVzLkNNX1JHQjtcbiAgICAgICAgLy8gU2luY2UgYW4gb3BhcXVlIHNlbGVjdGlvbiBpcyBiZWluZyByZW5kZXJlZCwgdGhlIHNlbGVjdGlvbiBwcmV0ZW5kcyB0byBiZSBhIGRlY29yYXRpb24gdG9cbiAgICAgICAgLy8gZW5zdXJlIHRleHQgaXMgZHJhd24gYWJvdmUgdGhlIHNlbGVjdGlvbi5cbiAgICAgICAgaXNUb3AgPSB0cnVlO1xuICAgICAgICAvLyBBcHBseSBzZWxlY3Rpb24gZm9yZWdyb3VuZCBpZiBhcHBsaWNhYmxlXG4gICAgICAgIGlmIChjb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCkge1xuICAgICAgICAgIGZnQ29sb3JNb2RlID0gQXR0cmlidXRlcy5DTV9SR0I7XG4gICAgICAgICAgZmcgPSBjb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZC5yZ2JhID4+IDggJiAweEZGRkZGRjtcbiAgICAgICAgICBmZ092ZXJyaWRlID0gY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgaXQncyBhIHRvcCBkZWNvcmF0aW9uLCByZW5kZXIgYWJvdmUgdGhlIHNlbGVjdGlvblxuICAgICAgaWYgKGlzVG9wKSB7XG4gICAgICAgIGNsYXNzZXMucHVzaCgneHRlcm0tZGVjb3JhdGlvbi10b3AnKTtcbiAgICAgIH1cblxuICAgICAgLy8gQmFja2dyb3VuZFxuICAgICAgbGV0IHJlc29sdmVkQmc6IElDb2xvcjtcbiAgICAgIHN3aXRjaCAoYmdDb2xvck1vZGUpIHtcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AxNjpcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX1AyNTY6XG4gICAgICAgICAgcmVzb2x2ZWRCZyA9IGNvbG9ycy5hbnNpW2JnXTtcbiAgICAgICAgICBjbGFzc2VzLnB1c2goYHh0ZXJtLWJnLSR7Ymd9YCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgICAgcmVzb2x2ZWRCZyA9IGNoYW5uZWxzLnRvQ29sb3IoYmcgPj4gMTYsIGJnID4+IDggJiAweEZGLCBiZyAmIDB4RkYpO1xuICAgICAgICAgIHRoaXMuX2FkZFN0eWxlKGNoYXJFbGVtZW50LCBgYmFja2dyb3VuZC1jb2xvcjojJHtwYWRTdGFydCgoYmcgPj4+IDApLnRvU3RyaW5nKDE2KSwgJzAnLCA2KX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKGlzSW52ZXJzZSkge1xuICAgICAgICAgICAgcmVzb2x2ZWRCZyA9IGNvbG9ycy5mb3JlZ3JvdW5kO1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGB4dGVybS1iZy0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdmVkQmcgPSBjb2xvcnMuYmFja2dyb3VuZDtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGJhY2tncm91bmQgb3ZlcnJpZGUgYnkgbm93IGl0J3MgdGhlIG9yaWdpbmFsIGNvbG9yLCBzbyBhcHBseSBkaW0gaWYgbmVlZGVkXG4gICAgICBpZiAoIWJnT3ZlcnJpZGUpIHtcbiAgICAgICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgICAgIGJnT3ZlcnJpZGUgPSBjb2xvci5tdWx0aXBseU9wYWNpdHkocmVzb2x2ZWRCZywgMC41KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGb3JlZ3JvdW5kXG4gICAgICBzd2l0Y2ggKGZnQ29sb3JNb2RlKSB7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMTY6XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9QMjU2OlxuICAgICAgICAgIGlmIChjZWxsLmlzQm9sZCgpICYmIGZnIDwgOCAmJiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzKSB7XG4gICAgICAgICAgICBmZyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KGNoYXJFbGVtZW50LCByZXNvbHZlZEJnLCBjb2xvcnMuYW5zaVtmZ10sIGNlbGwsIGJnT3ZlcnJpZGUsIHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgeHRlcm0tZmctJHtmZ31gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgQXR0cmlidXRlcy5DTV9SR0I6XG4gICAgICAgICAgY29uc3QgY29sb3IgPSBjaGFubmVscy50b0NvbG9yKFxuICAgICAgICAgICAgKGZnID4+IDE2KSAmIDB4RkYsXG4gICAgICAgICAgICAoZmcgPj4gIDgpICYgMHhGRixcbiAgICAgICAgICAgIChmZyAgICAgICkgJiAweEZGXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIXRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KGNoYXJFbGVtZW50LCByZXNvbHZlZEJnLCBjb2xvciwgY2VsbCwgYmdPdmVycmlkZSwgZmdPdmVycmlkZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZFN0eWxlKGNoYXJFbGVtZW50LCBgY29sb3I6IyR7cGFkU3RhcnQoZmcudG9TdHJpbmcoMTYpLCAnMCcsIDYpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBBdHRyaWJ1dGVzLkNNX0RFRkFVTFQ6XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKCF0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdChjaGFyRWxlbWVudCwgcmVzb2x2ZWRCZywgY29sb3JzLmZvcmVncm91bmQsIGNlbGwsIGJnT3ZlcnJpZGUsIGZnT3ZlcnJpZGUpKSB7XG4gICAgICAgICAgICBpZiAoaXNJbnZlcnNlKSB7XG4gICAgICAgICAgICAgIGNsYXNzZXMucHVzaChgeHRlcm0tZmctJHtJTlZFUlRFRF9ERUZBVUxUX0NPTE9SfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gYXBwbHkgQ1NTIGNsYXNzZXNcbiAgICAgIC8vIHNsaWdodGx5IGZhc3RlciB0aGFuIHVzaW5nIGNsYXNzTGlzdCBieSBvbWl0dGluZ1xuICAgICAgLy8gY2hlY2tzIGZvciBkb3VibGVkIGVudHJpZXMgKGNvZGUgYWJvdmUgc2hvdWxkIG5vdCBoYXZlIGRvdWJsZXRzKVxuICAgICAgaWYgKGNsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbignICcpO1xuICAgICAgICBjbGFzc2VzLmxlbmd0aCA9IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4Y2x1ZGUgY29uZGl0aW9ucyBmb3IgY2VsbCBtZXJnaW5nIC0gbmV2ZXIgbWVyZ2UgdGhlc2VcbiAgICAgIGlmICghaXNDdXJzb3JDZWxsICYmICFpc0pvaW5lZCAmJiAhaXNEZWNvcmF0ZWQgJiYgaXNWYWxpZEpvaW5SYW5nZSkge1xuICAgICAgICBjZWxsQW1vdW50Kys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICB9XG4gICAgICAvLyBhcHBseSBsZXR0ZXItc3BhY2luZyBydWxlXG4gICAgICBpZiAoc3BhY2luZyAhPT0gdGhpcy5kZWZhdWx0U3BhY2luZykge1xuICAgICAgICBjaGFyRWxlbWVudC5zdHlsZS5sZXR0ZXJTcGFjaW5nID0gYCR7c3BhY2luZ31weGA7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnRzLnB1c2goY2hhckVsZW1lbnQpO1xuICAgICAgeCA9IGxhc3RDaGFyWDtcbiAgICB9XG5cbiAgICAvLyBwb3N0Zml4IHRleHQgb2YgbGFzdCBtZXJnZWQgc3BhblxuICAgIGlmIChjaGFyRWxlbWVudCAmJiBjZWxsQW1vdW50KSB7XG4gICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsZW1lbnRzO1xuICB9XG5cbiAgcHJpdmF0ZSBfYXBwbHlNaW5pbXVtQ29udHJhc3QoZWxlbWVudDogSFRNTEVsZW1lbnQsIGJnOiBJQ29sb3IsIGZnOiBJQ29sb3IsIGNlbGw6IElDZWxsRGF0YSwgYmdPdmVycmlkZTogSUNvbG9yIHwgdW5kZWZpbmVkLCBmZ092ZXJyaWRlOiBJQ29sb3IgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyA9PT0gMSB8fCB0cmVhdEdseXBoQXNCYWNrZ3JvdW5kQ29sb3IoY2VsbC5nZXRDb2RlKCkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVHJ5IGdldCBmcm9tIGNhY2hlIGZpcnN0LCBvbmx5IHVzZSB0aGUgY2FjaGUgd2hlbiB0aGVyZSBhcmUgbm8gZGVjb3JhdGlvbiBvdmVycmlkZXNcbiAgICBjb25zdCBjYWNoZSA9IHRoaXMuX2dldENvbnRyYXN0Q2FjaGUoY2VsbCk7XG4gICAgbGV0IGFkanVzdGVkQ29sb3I6IElDb2xvciB8IHVuZGVmaW5lZCB8IG51bGwgPSB1bmRlZmluZWQ7XG4gICAgaWYgKCFiZ092ZXJyaWRlICYmICFmZ092ZXJyaWRlKSB7XG4gICAgICBhZGp1c3RlZENvbG9yID0gY2FjaGUuZ2V0Q29sb3IoYmcucmdiYSwgZmcucmdiYSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsY3VsYXRlIGFuZCBzdG9yZSBpbiBjYWNoZVxuICAgIGlmIChhZGp1c3RlZENvbG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIERpbSBjZWxscyBvbmx5IHJlcXVpcmUgaGFsZiB0aGUgY29udHJhc3QsIG90aGVyd2lzZSB0aGV5IHdvdWxkbid0IGJlIGRpc3Rpbmd1aXNoYWJsZSBmcm9tXG4gICAgICAvLyBub24tZGltIGNlbGxzXG4gICAgICBjb25zdCByYXRpbyA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8gLyAoY2VsbC5pc0RpbSgpID8gMiA6IDEpO1xuICAgICAgYWRqdXN0ZWRDb2xvciA9IGNvbG9yLmVuc3VyZUNvbnRyYXN0UmF0aW8oYmdPdmVycmlkZSB8fCBiZywgZmdPdmVycmlkZSB8fCBmZywgcmF0aW8pO1xuICAgICAgY2FjaGUuc2V0Q29sb3IoKGJnT3ZlcnJpZGUgfHwgYmcpLnJnYmEsIChmZ092ZXJyaWRlIHx8IGZnKS5yZ2JhLCBhZGp1c3RlZENvbG9yID8/IG51bGwpO1xuICAgIH1cblxuICAgIGlmIChhZGp1c3RlZENvbG9yKSB7XG4gICAgICB0aGlzLl9hZGRTdHlsZShlbGVtZW50LCBgY29sb3I6JHthZGp1c3RlZENvbG9yLmNzc31gKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldENvbnRyYXN0Q2FjaGUoY2VsbDogSUNlbGxEYXRhKTogSUNvbG9yQ29udHJhc3RDYWNoZSB7XG4gICAgaWYgKGNlbGwuaXNEaW0oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3RoZW1lU2VydmljZS5jb2xvcnMuaGFsZkNvbnRyYXN0Q2FjaGU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzLmNvbnRyYXN0Q2FjaGU7XG4gIH1cblxuICBwcml2YXRlIF9hZGRTdHlsZShlbGVtZW50OiBIVE1MRWxlbWVudCwgc3R5bGU6IHN0cmluZyk6IHZvaWQge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke2VsZW1lbnQuZ2V0QXR0cmlidXRlKCdzdHlsZScpIHx8ICcnfSR7c3R5bGV9O2ApO1xuICB9XG5cbiAgcHJpdmF0ZSBfaXNDZWxsSW5TZWxlY3Rpb24oeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX3NlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX3NlbGVjdGlvbkVuZDtcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2NvbHVtblNlbGVjdE1vZGUpIHtcbiAgICAgIGlmIChzdGFydFswXSA8PSBlbmRbMF0pIHtcbiAgICAgICAgcmV0dXJuIHggPj0gc3RhcnRbMF0gJiYgeSA+PSBzdGFydFsxXSAmJlxuICAgICAgICAgIHggPCBlbmRbMF0gJiYgeSA8PSBlbmRbMV07XG4gICAgICB9XG4gICAgICByZXR1cm4geCA8IHN0YXJ0WzBdICYmIHkgPj0gc3RhcnRbMV0gJiZcbiAgICAgICAgeCA+PSBlbmRbMF0gJiYgeSA8PSBlbmRbMV07XG4gICAgfVxuICAgIHJldHVybiAoeSA+IHN0YXJ0WzFdICYmIHkgPCBlbmRbMV0pIHx8XG4gICAgICAgIChzdGFydFsxXSA9PT0gZW5kWzFdICYmIHkgPT09IHN0YXJ0WzFdICYmIHggPj0gc3RhcnRbMF0gJiYgeCA8IGVuZFswXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdIDwgZW5kWzFdICYmIHkgPT09IGVuZFsxXSAmJiB4IDwgZW5kWzBdKSB8fFxuICAgICAgICAoc3RhcnRbMV0gPCBlbmRbMV0gJiYgeSA9PT0gc3RhcnRbMV0gJiYgeCA+PSBzdGFydFswXSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcGFkU3RhcnQodGV4dDogc3RyaW5nLCBwYWRDaGFyOiBzdHJpbmcsIGxlbmd0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgd2hpbGUgKHRleHQubGVuZ3RoIDwgbGVuZ3RoKSB7XG4gICAgdGV4dCA9IHBhZENoYXIgKyB0ZXh0O1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIzIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRm9udFdlaWdodCB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cblxuZXhwb3J0IGNvbnN0IGVudW0gV2lkdGhDYWNoZVNldHRpbmdzIHtcbiAgLyoqIHNlbnRpbmVsIGZvciB1bnNldCB2YWx1ZXMgaW4gZmxhdCBjYWNoZSAqL1xuICBGTEFUX1VOU0VUID0gLTk5OTksXG4gIC8qKiBzaXplIG9mIGZsYXQgY2FjaGUsIHNpemUtMSBlcXVhbHMgaGlnaGVzdCBjb2RlcG9pbnQgaGFuZGxlZCBieSBmbGF0ICovXG4gIEZMQVRfU0laRSA9IDI1NixcbiAgLyoqIGNoYXIgcmVwZWF0IGZvciBtZWFzdXJpbmcgKi9cbiAgUkVQRUFUID0gMzJcbn1cblxuXG5jb25zdCBlbnVtIEZvbnRWYXJpYW50IHtcbiAgUkVHVUxBUiA9IDAsXG4gIEJPTEQgPSAxLFxuICBJVEFMSUMgPSAyLFxuICBCT0xEX0lUQUxJQyA9IDNcbn1cblxuXG5leHBvcnQgY2xhc3MgV2lkdGhDYWNoZSBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgLy8gZmxhdCBjYWNoZSBmb3IgcmVndWxhciB2YXJpYW50IHVwIHRvIENhY2hlU2V0dGluZ3MuRkxBVF9TSVpFXG4gIC8vIE5PVEU6IH40eCBmYXN0ZXIgYWNjZXNzIHRoYW4gaG9sZXkgKHNlcnZpbmcgPj44MCUgb2YgdGVybWluYWwgY29udGVudClcbiAgLy8gICAgICAgSXQgaGFzIGEgc21hbGwgbWVtb3J5IGZvb3RwcmludCAob25seSAxTUIgZm9yIGZ1bGwgQk1QIGNhY2hpbmcpLFxuICAvLyAgICAgICBzdGlsbCB0aGUgc3dlZXQgc3BvdCBpcyBub3QgcmVhY2hlZCBiZWZvcmUgdG91Y2hpbmcgMzJrIGRpZmZlcmVudCBjb2RlcG9pbnRzLFxuICAvLyAgICAgICB0aHVzIHdlIHN0b3JlIHRoZSByZW1haW5pbmcgPDwyMCUgb2YgdGVybWluYWwgZGF0YSBpbiBhIGhvbGV5IHN0cnVjdHVyZS5cbiAgcHJvdGVjdGVkIF9mbGF0ID0gbmV3IEZsb2F0MzJBcnJheShXaWR0aENhY2hlU2V0dGluZ3MuRkxBVF9TSVpFKTtcblxuICAvLyBob2xleSBjYWNoZSBmb3IgYm9sZCwgaXRhbGljIGFuZCBib2xkJml0YWxpYyBmb3IgYW55IHN0cmluZ1xuICAvLyBGSVhNRTogY2FuIGdyb3cgcmVhbGx5IGJpZyBvdmVyIHRpbWUgKH44LjUgTUIgZm9yIGZ1bGwgQk1QIGNhY2hpbmcpLFxuICAvLyAgICAgICAgc28gYSBzaGFyZWQgQVBJIGFjcm9zcyB0ZXJtaW5hbHMgaXMgbmVlZGVkXG4gIHByb3RlY3RlZCBfaG9sZXk6IE1hcDxzdHJpbmcsIG51bWJlcj4gfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfZm9udCA9ICcnO1xuICBwcml2YXRlIF9mb250U2l6ZSA9IDA7XG4gIHByaXZhdGUgX3dlaWdodDogRm9udFdlaWdodCA9ICdub3JtYWwnO1xuICBwcml2YXRlIF93ZWlnaHRCb2xkOiBGb250V2VpZ2h0ID0gJ2JvbGQnO1xuICBwcml2YXRlIF9jb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICBwcml2YXRlIF9tZWFzdXJlRWxlbWVudHM6IEhUTUxTcGFuRWxlbWVudFtdID0gW107XG5cbiAgY29uc3RydWN0b3IoX2RvY3VtZW50OiBEb2N1bWVudCwgX2hlbHBlckNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIgPSBfZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLXdpZHRoLWNhY2hlLW1lYXN1cmUtY29udGFpbmVyJyk7XG4gICAgdGhpcy5fY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIC8vIFNQIHNob3VsZCBzdGFjayBpbiBzcGFuc1xuICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZSc7XG4gICAgLy8gYXZvaWQgdW5kZXJjdXRzIGluIG5vbi1tb25vc3BhY2UgZm9udHMgZnJvbSBrZXJuaW5nXG4gICAgdGhpcy5fY29udGFpbmVyLnN0eWxlLmZvbnRLZXJuaW5nID0gJ25vbmUnO1xuXG4gICAgY29uc3QgcmVndWxhciA9IF9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgcmVndWxhci5jbGFzc0xpc3QuYWRkKCd4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCcpO1xuXG4gICAgY29uc3QgYm9sZCA9IF9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgYm9sZC5jbGFzc0xpc3QuYWRkKCd4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCcpO1xuICAgIGJvbGQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuICAgIGNvbnN0IGl0YWxpYyA9IF9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgaXRhbGljLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50Jyk7XG4gICAgaXRhbGljLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXG4gICAgY29uc3QgYm9sZEl0YWxpYyA9IF9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgYm9sZEl0YWxpYy5jbGFzc0xpc3QuYWRkKCd4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCcpO1xuICAgIGJvbGRJdGFsaWMuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICBib2xkSXRhbGljLnN0eWxlLmZvbnRTdHlsZSA9ICdpdGFsaWMnO1xuXG4gICAgLy8gTk9URTogbXVzdCBiZSBpbiBvcmRlciBvZiBGb250VmFyaWFudFxuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50cyA9IFtyZWd1bGFyLCBib2xkLCBpdGFsaWMsIGJvbGRJdGFsaWNdO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChyZWd1bGFyKTtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoYm9sZCk7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGl0YWxpYyk7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGJvbGRJdGFsaWMpO1xuXG4gICAgX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5fY29udGFpbmVyLnJlbW92ZSgpOyAgICAgICAgICAgLy8gcmVtb3ZlIGVsZW1lbnRzIGZyb20gRE9NXG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnRzLmxlbmd0aCA9IDA7ICAgLy8gcmVsZWFzZSBlbGVtZW50IHJlZnNcbiAgICB0aGlzLl9ob2xleSA9IHVuZGVmaW5lZDsgICAgICAgICAgICAvLyBmcmVlIGNhY2hlIG1lbW9yeSB2aWEgR0NcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciB0aGUgd2lkdGggY2FjaGUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZmxhdC5maWxsKFdpZHRoQ2FjaGVTZXR0aW5ncy5GTEFUX1VOU0VUKTtcbiAgICAvLyAuY2xlYXIoKSBoYXMgc29tZSBvdmVyaGVhZCwgcmUtYXNzaWduIGluc3RlYWQgKD4zIHRpbWVzIGZhc3RlcilcbiAgICB0aGlzLl9ob2xleSA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBmb250IGZvciBtZWFzdXJpbmcuXG4gICAqIE11c3QgYmUgY2FsbGVkIGZvciBhbnkgY2hhbmdlcyBvbiBmb250IHNldHRpbmdzLlxuICAgKiBBbHNvIGNsZWFycyB0aGUgY2FjaGUuXG4gICAqL1xuICBwdWJsaWMgc2V0Rm9udChmb250OiBzdHJpbmcsIGZvbnRTaXplOiBudW1iZXIsIHdlaWdodDogRm9udFdlaWdodCwgd2VpZ2h0Qm9sZDogRm9udFdlaWdodCk6IHZvaWQge1xuICAgIC8vIHNraXAgaWYgbm90aGluZyBjaGFuZ2VkXG4gICAgaWYgKGZvbnQgPT09IHRoaXMuX2ZvbnRcbiAgICAgICYmIGZvbnRTaXplID09PSB0aGlzLl9mb250U2l6ZVxuICAgICAgJiYgd2VpZ2h0ID09PSB0aGlzLl93ZWlnaHRcbiAgICAgICYmIHdlaWdodEJvbGQgPT09IHRoaXMuX3dlaWdodEJvbGRcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9mb250ID0gZm9udDtcbiAgICB0aGlzLl9mb250U2l6ZSA9IGZvbnRTaXplO1xuICAgIHRoaXMuX3dlaWdodCA9IHdlaWdodDtcbiAgICB0aGlzLl93ZWlnaHRCb2xkID0gd2VpZ2h0Qm9sZDtcblxuICAgIHRoaXMuX2NvbnRhaW5lci5zdHlsZS5mb250RmFtaWx5ID0gdGhpcy5fZm9udDtcbiAgICB0aGlzLl9jb250YWluZXIuc3R5bGUuZm9udFNpemUgPSBgJHt0aGlzLl9mb250U2l6ZX1weGA7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnRzW0ZvbnRWYXJpYW50LlJFR1VMQVJdLnN0eWxlLmZvbnRXZWlnaHQgPSBgJHt3ZWlnaHR9YDtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudHNbRm9udFZhcmlhbnQuQk9MRF0uc3R5bGUuZm9udFdlaWdodCA9IGAke3dlaWdodEJvbGR9YDtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudHNbRm9udFZhcmlhbnQuSVRBTElDXS5zdHlsZS5mb250V2VpZ2h0ID0gYCR7d2VpZ2h0fWA7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnRzW0ZvbnRWYXJpYW50LkJPTERfSVRBTElDXS5zdHlsZS5mb250V2VpZ2h0ID0gYCR7d2VpZ2h0Qm9sZH1gO1xuXG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVuZGVyIHdpZHRoIGZvciBjZWxsIGNvbnRlbnQgYGNgIHdpdGggY3VycmVudCBmb250IHNldHRpbmdzLlxuICAgKiBgdmFyaWFudGAgZGVub3RlcyB0aGUgZm9udCB2YXJpYW50IHRvIGJlIHVzZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0KGM6IHN0cmluZywgYm9sZDogYm9vbGVhbiB8IG51bWJlciwgaXRhbGljOiBib29sZWFuIHwgbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgY3AgPSAwO1xuICAgIGlmICghYm9sZCAmJiAhaXRhbGljICYmIGMubGVuZ3RoID09PSAxICYmIChjcCA9IGMuY2hhckNvZGVBdCgwKSkgPCBXaWR0aENhY2hlU2V0dGluZ3MuRkxBVF9TSVpFKSB7XG4gICAgICBpZiAodGhpcy5fZmxhdFtjcF0gIT09IFdpZHRoQ2FjaGVTZXR0aW5ncy5GTEFUX1VOU0VUKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mbGF0W2NwXTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fbWVhc3VyZShjLCAwKTtcbiAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgdGhpcy5fZmxhdFtjcF0gPSB3aWR0aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3aWR0aDtcbiAgICB9XG4gICAgbGV0IGtleSA9IGM7XG4gICAgaWYgKGJvbGQpIGtleSArPSAnQic7XG4gICAgaWYgKGl0YWxpYykga2V5ICs9ICdJJztcbiAgICBsZXQgd2lkdGggPSB0aGlzLl9ob2xleSEuZ2V0KGtleSk7XG4gICAgaWYgKHdpZHRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCB2YXJpYW50ID0gMDtcbiAgICAgIGlmIChib2xkKSB2YXJpYW50IHw9IEZvbnRWYXJpYW50LkJPTEQ7XG4gICAgICBpZiAoaXRhbGljKSB2YXJpYW50IHw9IEZvbnRWYXJpYW50LklUQUxJQztcbiAgICAgIHdpZHRoID0gdGhpcy5fbWVhc3VyZShjLCB2YXJpYW50KTtcbiAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgdGhpcy5faG9sZXkhLnNldChrZXksIHdpZHRoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHdpZHRoO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9tZWFzdXJlKGM6IHN0cmluZywgdmFyaWFudDogRm9udFZhcmlhbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IGVsID0gdGhpcy5fbWVhc3VyZUVsZW1lbnRzW3ZhcmlhbnRdO1xuICAgIGVsLnRleHRDb250ZW50ID0gYy5yZXBlYXQoV2lkdGhDYWNoZVNldHRpbmdzLlJFUEVBVCk7XG4gICAgcmV0dXJuIGVsLm9mZnNldFdpZHRoIC8gV2lkdGhDYWNoZVNldHRpbmdzLlJFUEVBVDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVRlcm1pbmFsIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJU2VsZWN0aW9uUmVuZGVyTW9kZWwgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL3NoYXJlZC9UeXBlcyc7XG5pbXBvcnQgeyBUZXJtaW5hbCB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5cbmNsYXNzIFNlbGVjdGlvblJlbmRlck1vZGVsIGltcGxlbWVudHMgSVNlbGVjdGlvblJlbmRlck1vZGVsIHtcbiAgcHVibGljIGhhc1NlbGVjdGlvbiE6IGJvb2xlYW47XG4gIHB1YmxpYyBjb2x1bW5TZWxlY3RNb2RlITogYm9vbGVhbjtcbiAgcHVibGljIHZpZXdwb3J0U3RhcnRSb3chOiBudW1iZXI7XG4gIHB1YmxpYyB2aWV3cG9ydEVuZFJvdyE6IG51bWJlcjtcbiAgcHVibGljIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3chOiBudW1iZXI7XG4gIHB1YmxpYyB2aWV3cG9ydENhcHBlZEVuZFJvdyE6IG51bWJlcjtcbiAgcHVibGljIHN0YXJ0Q29sITogbnVtYmVyO1xuICBwdWJsaWMgZW5kQ29sITogbnVtYmVyO1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIHB1YmxpYyBzZWxlY3Rpb25FbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMuaGFzU2VsZWN0aW9uID0gZmFsc2U7XG4gICAgdGhpcy5jb2x1bW5TZWxlY3RNb2RlID0gZmFsc2U7XG4gICAgdGhpcy52aWV3cG9ydFN0YXJ0Um93ID0gMDtcbiAgICB0aGlzLnZpZXdwb3J0RW5kUm93ID0gMDtcbiAgICB0aGlzLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSAwO1xuICAgIHRoaXMudmlld3BvcnRDYXBwZWRFbmRSb3cgPSAwO1xuICAgIHRoaXMuc3RhcnRDb2wgPSAwO1xuICAgIHRoaXMuZW5kQ29sID0gMDtcbiAgICB0aGlzLnNlbGVjdGlvblN0YXJ0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2VsZWN0aW9uRW5kID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSh0ZXJtaW5hbDogSVRlcm1pbmFsLCBzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGlvblN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5zZWxlY3Rpb25FbmQgPSBlbmQ7XG4gICAgLy8gU2VsZWN0aW9uIGRvZXMgbm90IGV4aXN0XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kIHx8IChzdGFydFswXSA9PT0gZW5kWzBdICYmIHN0YXJ0WzFdID09PSBlbmRbMV0pKSB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNsYXRlIGZyb20gYnVmZmVyIHBvc2l0aW9uIHRvIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgY29uc3Qgdmlld3BvcnRZID0gdGVybWluYWwuYnVmZmVycy5hY3RpdmUueWRpc3A7XG4gICAgY29uc3Qgdmlld3BvcnRTdGFydFJvdyA9IHN0YXJ0WzFdIC0gdmlld3BvcnRZO1xuICAgIGNvbnN0IHZpZXdwb3J0RW5kUm93ID0gZW5kWzFdIC0gdmlld3BvcnRZO1xuICAgIGNvbnN0IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPSBNYXRoLm1heCh2aWV3cG9ydFN0YXJ0Um93LCAwKTtcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IE1hdGgubWluKHZpZXdwb3J0RW5kUm93LCB0ZXJtaW5hbC5yb3dzIC0gMSk7XG5cbiAgICAvLyBObyBuZWVkIHRvIGRyYXcgdGhlIHNlbGVjdGlvblxuICAgIGlmICh2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID49IHRlcm1pbmFsLnJvd3MgfHwgdmlld3BvcnRDYXBwZWRFbmRSb3cgPCAwKSB7XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5oYXNTZWxlY3Rpb24gPSB0cnVlO1xuICAgIHRoaXMuY29sdW1uU2VsZWN0TW9kZSA9IGNvbHVtblNlbGVjdE1vZGU7XG4gICAgdGhpcy52aWV3cG9ydFN0YXJ0Um93ID0gdmlld3BvcnRTdGFydFJvdztcbiAgICB0aGlzLnZpZXdwb3J0RW5kUm93ID0gdmlld3BvcnRFbmRSb3c7XG4gICAgdGhpcy52aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gdmlld3BvcnRDYXBwZWRTdGFydFJvdztcbiAgICB0aGlzLnZpZXdwb3J0Q2FwcGVkRW5kUm93ID0gdmlld3BvcnRDYXBwZWRFbmRSb3c7XG4gICAgdGhpcy5zdGFydENvbCA9IHN0YXJ0WzBdO1xuICAgIHRoaXMuZW5kQ29sID0gZW5kWzBdO1xuICB9XG5cbiAgcHVibGljIGlzQ2VsbFNlbGVjdGVkKHRlcm1pbmFsOiBUZXJtaW5hbCwgeDogbnVtYmVyLCB5OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaGFzU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHkgLT0gdGVybWluYWwuYnVmZmVyLmFjdGl2ZS52aWV3cG9ydFk7XG4gICAgaWYgKHRoaXMuY29sdW1uU2VsZWN0TW9kZSkge1xuICAgICAgaWYgKHRoaXMuc3RhcnRDb2wgPD0gdGhpcy5lbmRDb2wpIHtcbiAgICAgICAgcmV0dXJuIHggPj0gdGhpcy5zdGFydENvbCAmJiB5ID49IHRoaXMudmlld3BvcnRDYXBwZWRTdGFydFJvdyAmJlxuICAgICAgICAgIHggPCB0aGlzLmVuZENvbCAmJiB5IDw9IHRoaXMudmlld3BvcnRDYXBwZWRFbmRSb3c7XG4gICAgICB9XG4gICAgICByZXR1cm4geCA8IHRoaXMuc3RhcnRDb2wgJiYgeSA+PSB0aGlzLnZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgJiZcbiAgICAgICAgeCA+PSB0aGlzLmVuZENvbCAmJiB5IDw9IHRoaXMudmlld3BvcnRDYXBwZWRFbmRSb3c7XG4gICAgfVxuICAgIHJldHVybiAoeSA+IHRoaXMudmlld3BvcnRTdGFydFJvdyAmJiB5IDwgdGhpcy52aWV3cG9ydEVuZFJvdykgfHxcbiAgICAgICh0aGlzLnZpZXdwb3J0U3RhcnRSb3cgPT09IHRoaXMudmlld3BvcnRFbmRSb3cgJiYgeSA9PT0gdGhpcy52aWV3cG9ydFN0YXJ0Um93ICYmIHggPj0gdGhpcy5zdGFydENvbCAmJiB4IDwgdGhpcy5lbmRDb2wpIHx8XG4gICAgICAodGhpcy52aWV3cG9ydFN0YXJ0Um93IDwgdGhpcy52aWV3cG9ydEVuZFJvdyAmJiB5ID09PSB0aGlzLnZpZXdwb3J0RW5kUm93ICYmIHggPCB0aGlzLmVuZENvbCkgfHxcbiAgICAgICh0aGlzLnZpZXdwb3J0U3RhcnRSb3cgPCB0aGlzLnZpZXdwb3J0RW5kUm93ICYmIHkgPT09IHRoaXMudmlld3BvcnRTdGFydFJvdyAmJiB4ID49IHRoaXMuc3RhcnRDb2wpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZWxlY3Rpb25SZW5kZXJNb2RlbCgpOiBJU2VsZWN0aW9uUmVuZGVyTW9kZWwge1xuICByZXR1cm4gbmV3IFNlbGVjdGlvblJlbmRlck1vZGVsKCk7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEb21SZW5kZXJlclJvd0ZhY3RvcnksIFJvd0NzcyB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyUm93RmFjdG9yeSc7XG5pbXBvcnQgeyBXaWR0aENhY2hlIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9kb20vV2lkdGhDYWNoZSc7XG5pbXBvcnQgeyBJTlZFUlRFRF9ERUZBVUxUX0NPTE9SIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9zaGFyZWQvQ29uc3RhbnRzJztcbmltcG9ydCB7IGNyZWF0ZVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL3NoYXJlZC9SZW5kZXJlclV0aWxzJztcbmltcG9ydCB7IGNyZWF0ZVNlbGVjdGlvblJlbmRlck1vZGVsIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9zaGFyZWQvU2VsZWN0aW9uUmVuZGVyTW9kZWwnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJlciwgSVJlcXVlc3RSZWRyYXdFdmVudCwgSVNlbGVjdGlvblJlbmRlck1vZGVsIH0gZnJvbSAnYnJvd3Nlci9yZW5kZXJlci9zaGFyZWQvVHlwZXMnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSUNvcmVCcm93c2VyU2VydmljZSwgSVRoZW1lU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUxpbmtpZmllcjIsIElMaW5raWZpZXJFdmVudCwgSVRlcm1pbmFsLCBSZWFkb25seUNvbG9yU2V0IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBjb2xvciB9IGZyb20gJ2NvbW1vbi9Db2xvcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSUluc3RhbnRpYXRpb25TZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuXG5jb25zdCBURVJNSU5BTF9DTEFTU19QUkVGSVggPSAneHRlcm0tZG9tLXJlbmRlcmVyLW93bmVyLSc7XG5jb25zdCBST1dfQ09OVEFJTkVSX0NMQVNTID0gJ3h0ZXJtLXJvd3MnO1xuY29uc3QgRkdfQ0xBU1NfUFJFRklYID0gJ3h0ZXJtLWZnLSc7XG5jb25zdCBCR19DTEFTU19QUkVGSVggPSAneHRlcm0tYmctJztcbmNvbnN0IEZPQ1VTX0NMQVNTID0gJ3h0ZXJtLWZvY3VzJztcbmNvbnN0IFNFTEVDVElPTl9DTEFTUyA9ICd4dGVybS1zZWxlY3Rpb24nO1xuXG5sZXQgbmV4dFRlcm1pbmFsSWQgPSAxO1xuXG4vKipcbiAqIFRoZSBzdGFuZGFyZCByZW5kZXJlciBhbmQgZmFsbGJhY2sgZm9yIHdoZW4gdGhlIHdlYmdsIGFkZG9uIGlzIHNsb3cuIFRoaXMgaXMgbm90IG1lYW50IHRvIGJlXG4gKiBwYXJ0aWN1bGFybHkgZmFzdCBhbmQgd2lsbCBldmVuIGxhY2sgc29tZSBmZWF0dXJlcyBzdWNoIGFzIGN1c3RvbSBnbHlwaHMsIGhvZXZlciB0aGlzIGlzIG1vcmVcbiAqIHJlbGlhYmxlIGFzIHdlYmdsIG1heSBub3Qgd29yayBvbiBzb21lIG1hY2hpbmVzLlxuICovXG5leHBvcnQgY2xhc3MgRG9tUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSVJlbmRlcmVyIHtcbiAgcHJpdmF0ZSBfcm93RmFjdG9yeTogRG9tUmVuZGVyZXJSb3dGYWN0b3J5O1xuICBwcml2YXRlIF90ZXJtaW5hbENsYXNzOiBudW1iZXIgPSBuZXh0VGVybWluYWxJZCsrO1xuXG4gIHByaXZhdGUgX3RoZW1lU3R5bGVFbGVtZW50ITogSFRNTFN0eWxlRWxlbWVudDtcbiAgcHJpdmF0ZSBfZGltZW5zaW9uc1N0eWxlRWxlbWVudCE6IEhUTUxTdHlsZUVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0VsZW1lbnRzOiBIVE1MRWxlbWVudFtdID0gW107XG4gIHByaXZhdGUgX3NlbGVjdGlvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3dpZHRoQ2FjaGU6IFdpZHRoQ2FjaGU7XG4gIHByaXZhdGUgX3NlbGVjdGlvblJlbmRlck1vZGVsOiBJU2VsZWN0aW9uUmVuZGVyTW9kZWwgPSBjcmVhdGVTZWxlY3Rpb25SZW5kZXJNb2RlbCgpO1xuXG4gIHB1YmxpYyBkaW1lbnNpb25zOiBJUmVuZGVyRGltZW5zaW9ucztcblxuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0UmVkcmF3ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SVJlcXVlc3RSZWRyYXdFdmVudD4oKSkuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdGVybWluYWw6IElUZXJtaW5hbCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9kb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfdmlld3BvcnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9oZWxwZXJDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2xpbmtpZmllcjI6IElMaW5raWZpZXIyLFxuICAgIEBJSW5zdGFudGlhdGlvblNlcnZpY2UgaW5zdGFudGlhdGlvblNlcnZpY2U6IElJbnN0YW50aWF0aW9uU2VydmljZSxcbiAgICBASUNoYXJTaXplU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jaGFyU2l6ZVNlcnZpY2U6IElDaGFyU2l6ZVNlcnZpY2UsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNvcmVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsXG4gICAgQElDb3JlQnJvd3NlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZUJyb3dzZXJTZXJ2aWNlOiBJQ29yZUJyb3dzZXJTZXJ2aWNlLFxuICAgIEBJVGhlbWVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3RoZW1lU2VydmljZTogSVRoZW1lU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lciA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFJPV19DT05UQUlORVJfQ0xBU1MpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5zdHlsZS5saW5lSGVpZ2h0ID0gJ25vcm1hbCc7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dFbGVtZW50cyh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoU0VMRUNUSU9OX0NMQVNTKTtcbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG5cbiAgICB0aGlzLmRpbWVuc2lvbnMgPSBjcmVhdGVSZW5kZXJEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKCgpID0+IHRoaXMuX2hhbmRsZU9wdGlvbnNDaGFuZ2VkKCkpKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3RoZW1lU2VydmljZS5vbkNoYW5nZUNvbG9ycyhlID0+IHRoaXMuX2luamVjdENzcyhlKSkpO1xuICAgIHRoaXMuX2luamVjdENzcyh0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzKTtcblxuICAgIHRoaXMuX3Jvd0ZhY3RvcnkgPSBpbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShEb21SZW5kZXJlclJvd0ZhY3RvcnksIGRvY3VtZW50KTtcblxuICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZChURVJNSU5BTF9DTEFTU19QUkVGSVggKyB0aGlzLl90ZXJtaW5hbENsYXNzKTtcbiAgICB0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3Jvd0NvbnRhaW5lcik7XG4gICAgdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fbGlua2lmaWVyMi5vblNob3dMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5faGFuZGxlTGlua0hvdmVyKGUpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fbGlua2lmaWVyMi5vbkhpZGVMaW5rVW5kZXJsaW5lKGUgPT4gdGhpcy5faGFuZGxlTGlua0xlYXZlKGUpKSk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFRFUk1JTkFMX0NMQVNTX1BSRUZJWCArIHRoaXMuX3Rlcm1pbmFsQ2xhc3MpO1xuXG4gICAgICAvLyBPdXRzaWRlIGluZmx1ZW5jZXMgc3VjaCBhcyBSZWFjdCB1bm1vdW50cyBtYXkgbWFuaXB1bGF0ZSB0aGUgRE9NIGJlZm9yZSBvdXIgZGlzcG9zYWwuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20veHRlcm1qcy94dGVybS5qcy9pc3N1ZXMvMjk2MFxuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgdGhpcy5fd2lkdGhDYWNoZS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl90aGVtZVN0eWxlRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5fd2lkdGhDYWNoZSA9IG5ldyBXaWR0aENhY2hlKHRoaXMuX2RvY3VtZW50LCB0aGlzLl9oZWxwZXJDb250YWluZXIpO1xuICAgIHRoaXMuX3dpZHRoQ2FjaGUuc2V0Rm9udChcbiAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSxcbiAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUsXG4gICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHQsXG4gICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkXG4gICAgKTtcbiAgICB0aGlzLl9zZXREZWZhdWx0U3BhY2luZygpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlRGltZW5zaW9ucygpOiB2b2lkIHtcbiAgICBjb25zdCBkcHIgPSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuZHByO1xuICAgIHRoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2hhci53aWR0aCA9IHRoaXMuX2NoYXJTaXplU2VydmljZS53aWR0aCAqIGRwcjtcbiAgICB0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIuaGVpZ2h0ID0gTWF0aC5jZWlsKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQgKiBkcHIpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2VsbC53aWR0aCA9IHRoaXMuZGltZW5zaW9ucy5kZXZpY2UuY2hhci53aWR0aCArIE1hdGgucm91bmQodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sZXR0ZXJTcGFjaW5nKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNlbGwuaGVpZ2h0ID0gTWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIuaGVpZ2h0ICogdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5lSGVpZ2h0KTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNoYXIubGVmdCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLmRldmljZS5jaGFyLnRvcCA9IDA7XG4gICAgdGhpcy5kaW1lbnNpb25zLmRldmljZS5jYW52YXMud2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuZGV2aWNlLmNlbGwud2lkdGggKiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgdGhpcy5kaW1lbnNpb25zLmRldmljZS5jYW52YXMuaGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmRldmljZS5jZWxsLmhlaWdodCAqIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLmRldmljZS5jYW52YXMud2lkdGggLyBkcHIpO1xuICAgIHRoaXMuZGltZW5zaW9ucy5jc3MuY2FudmFzLmhlaWdodCA9IE1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLmRldmljZS5jYW52YXMuaGVpZ2h0IC8gZHByKTtcbiAgICB0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aCAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICB0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0ID0gdGhpcy5kaW1lbnNpb25zLmNzcy5jYW52YXMuaGVpZ2h0IC8gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuX3Jvd0VsZW1lbnRzKSB7XG4gICAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7dGhpcy5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGh9cHhgO1xuICAgICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwuaGVpZ2h0fXB4YDtcbiAgICAgIGVsZW1lbnQuc3R5bGUubGluZUhlaWdodCA9IGAke3RoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuICAgICAgLy8gTWFrZSBzdXJlIHJvd3MgZG9uJ3Qgb3ZlcmZsb3cgb250byBmb2xsb3dpbmcgcm93XG4gICAgICBlbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KSB7XG4gICAgICB0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3R5bGVzID1cbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9IHNwYW4ge2AgK1xuICAgICAgYCBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7YCArICAgLy8gVE9ETzogZmluZCB3b3JrYXJvdW5kIGZvciBpbmxpbmUtYmxvY2sgKGNyZWF0ZXMgfjIwJSByZW5kZXIgcGVuYWx0eSlcbiAgICAgIGAgaGVpZ2h0OiAxMDAlO2AgK1xuICAgICAgYCB2ZXJ0aWNhbC1hbGlnbjogdG9wO2AgK1xuICAgICAgYH1gO1xuXG4gICAgdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudC50ZXh0Q29udGVudCA9IHN0eWxlcztcblxuICAgIHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSB0aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuaGVpZ2h0O1xuICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHt0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aH1weGA7XG4gICAgdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHR9cHhgO1xuICB9XG5cbiAgcHJpdmF0ZSBfaW5qZWN0Q3NzKGNvbG9yczogUmVhZG9ubHlDb2xvclNldCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIEJhc2UgQ1NTXG4gICAgbGV0IHN0eWxlcyA9XG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSB7YCArXG4gICAgICAvLyBEaXNhYmxpbmcgcG9pbnRlciBldmVudHMgY2lyY3VtdmVudHMgYSBicm93c2VyIGJlaGF2aW9yIHRoYXQgcHJldmVudHMgYGNsaWNrYCBldmVudHMgZnJvbVxuICAgICAgLy8gYmVpbmcgZGVsaXZlcmVkIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyByZXBsYWNlZCBkdXJpbmcgdGhlIGNsaWNrLiBUaGlzIGhhcHBlbmVkIGR1ZSB0b1xuICAgICAgLy8gcmVmcmVzaCgpIGJlaW5nIGNhbGxlZCBkdXJpbmcgdGhlIG1vdXNlZG93biBoYW5kbGVyIHRvIHN0YXJ0IGEgc2VsZWN0aW9uLlxuICAgICAgYCBwb2ludGVyLWV2ZW50czogbm9uZTtgICtcbiAgICAgIGAgY29sb3I6ICR7Y29sb3JzLmZvcmVncm91bmQuY3NzfTtgICtcbiAgICAgIGAgZm9udC1mYW1pbHk6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5fTtgICtcbiAgICAgIGAgZm9udC1zaXplOiAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemV9cHg7YCArXG4gICAgICBgIGZvbnQta2VybmluZzogbm9uZTtgICtcbiAgICAgIGAgd2hpdGUtc3BhY2U6IHByZWAgK1xuICAgICAgYH1gO1xuICAgIHN0eWxlcyArPVxuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLnh0ZXJtLWRpbSB7YCArXG4gICAgICBgIGNvbG9yOiAke2NvbG9yLm11bHRpcGx5T3BhY2l0eShjb2xvcnMuZm9yZWdyb3VuZCwgMC41KS5jc3N9O2AgK1xuICAgICAgYH1gO1xuICAgIC8vIFRleHQgc3R5bGVzXG4gICAgc3R5bGVzICs9XG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuOm5vdCguJHtSb3dDc3MuQk9MRF9DTEFTU30pIHtgICtcbiAgICAgIGAgZm9udC13ZWlnaHQ6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0fTtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSBzcGFuLiR7Um93Q3NzLkJPTERfQ0xBU1N9IHtgICtcbiAgICAgIGAgZm9udC13ZWlnaHQ6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0Qm9sZH07YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gc3Bhbi4ke1Jvd0Nzcy5JVEFMSUNfQ0xBU1N9IHtgICtcbiAgICAgIGAgZm9udC1zdHlsZTogaXRhbGljO2AgK1xuICAgICAgYH1gO1xuICAgIC8vIEJsaW5rIGFuaW1hdGlvblxuICAgIGNvbnN0IGJsaW5rQW5pbWF0aW9uVW5kZXJsaW5lSWQgPSBgYmxpbmtfdW5kZXJsaW5lXyR7dGhpcy5fdGVybWluYWxDbGFzc31gO1xuICAgIGNvbnN0IGJsaW5rQW5pbWF0aW9uQmFySWQgPSBgYmxpbmtfYmFyXyR7dGhpcy5fdGVybWluYWxDbGFzc31gO1xuICAgIGNvbnN0IGJsaW5rQW5pbWF0aW9uQmxvY2tJZCA9IGBibGlua19ibG9ja18ke3RoaXMuX3Rlcm1pbmFsQ2xhc3N9YDtcbiAgICBzdHlsZXMgKz1cbiAgICAgIGBAa2V5ZnJhbWVzICR7YmxpbmtBbmltYXRpb25VbmRlcmxpbmVJZH0ge2AgK1xuICAgICAgYCA1MCUge2AgK1xuICAgICAgYCAgYm9yZGVyLWJvdHRvbS1zdHlsZTogaGlkZGVuO2AgK1xuICAgICAgYCB9YCArXG4gICAgICBgfWA7XG4gICAgc3R5bGVzICs9XG4gICAgICBgQGtleWZyYW1lcyAke2JsaW5rQW5pbWF0aW9uQmFySWR9IHtgICtcbiAgICAgIGAgNTAlIHtgICtcbiAgICAgIGAgIGJveC1zaGFkb3c6IG5vbmU7YCArXG4gICAgICBgIH1gICtcbiAgICAgIGB9YDtcbiAgICBzdHlsZXMgKz1cbiAgICAgIGBAa2V5ZnJhbWVzICR7YmxpbmtBbmltYXRpb25CbG9ja0lkfSB7YCArXG4gICAgICBgIDAlIHtgICtcbiAgICAgIGAgIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCAgY29sb3I6ICR7Y29sb3JzLmN1cnNvckFjY2VudC5jc3N9O2AgK1xuICAgICAgYCB9YCArXG4gICAgICBgIDUwJSB7YCArXG4gICAgICBgICBiYWNrZ3JvdW5kLWNvbG9yOiBpbmhlcml0O2AgK1xuICAgICAgYCAgY29sb3I6ICR7Y29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCB9YCArXG4gICAgICBgfWA7XG4gICAgLy8gQ3Vyc29yXG4gICAgc3R5bGVzICs9XG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfS4ke0ZPQ1VTX0NMQVNTfSAuJHtSb3dDc3MuQ1VSU09SX0NMQVNTfS4ke1Jvd0Nzcy5DVVJTT1JfQkxJTktfQ0xBU1N9LiR7Um93Q3NzLkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1N9IHtgICtcbiAgICAgIGAgYW5pbWF0aW9uOiAke2JsaW5rQW5pbWF0aW9uVW5kZXJsaW5lSWR9IDFzIHN0ZXAtZW5kIGluZmluaXRlO2AgK1xuICAgICAgYH1gICtcbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke1JPV19DT05UQUlORVJfQ0xBU1N9LiR7Rk9DVVNfQ0xBU1N9IC4ke1Jvd0Nzcy5DVVJTT1JfQ0xBU1N9LiR7Um93Q3NzLkNVUlNPUl9CTElOS19DTEFTU30uJHtSb3dDc3MuQ1VSU09SX1NUWUxFX0JBUl9DTEFTU30ge2AgK1xuICAgICAgYCBhbmltYXRpb246ICR7YmxpbmtBbmltYXRpb25CYXJJZH0gMXMgc3RlcC1lbmQgaW5maW5pdGU7YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30uJHtGT0NVU19DTEFTU30gLiR7Um93Q3NzLkNVUlNPUl9DTEFTU30uJHtSb3dDc3MuQ1VSU09SX0JMSU5LX0NMQVNTfS4ke1Jvd0Nzcy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1N9IHtgICtcbiAgICAgIGAgYW5pbWF0aW9uOiAke2JsaW5rQW5pbWF0aW9uQmxvY2tJZH0gMXMgc3RlcC1lbmQgaW5maW5pdGU7YCArXG4gICAgICBgfWAgK1xuICAgICAgLy8gIWltcG9ydGFudCBoZWxwcyBmaXggYW4gaXNzdWUgd2hlcmUgdGhlIGN1cnNvciB3aWxsIG5vdCByZW5kZXIgb24gdG9wIG9mIHRoZSBzZWxlY3Rpb24sXG4gICAgICAvLyBob3dldmVyIGl0J3MgdmVyeSBoYXJkIHRvIGZpeCB0aGlzIGlzc3VlIGFuZCByZXRhaW4gdGhlIGJsaW5rIGFuaW1hdGlvbiB3aXRob3V0IHRoZSB1c2Ugb2ZcbiAgICAgIC8vICFpbXBvcnRhbnQuIFNvIHRoaXMgZWRnZSBjYXNlIGZhaWxzIHdoZW4gY3Vyc29yIGJsaW5rIGlzIG9uLlxuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Um93Q3NzLkNVUlNPUl9DTEFTU30uJHtSb3dDc3MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTfSB7YCArXG4gICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCBjb2xvcjogJHtjb2xvcnMuY3Vyc29yQWNjZW50LmNzc307YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Um93Q3NzLkNVUlNPUl9DTEFTU30uJHtSb3dDc3MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTfTpub3QoLiR7Um93Q3NzLkNVUlNPUl9CTElOS19DTEFTU30pIHtgICtcbiAgICAgIGAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvcnMuY3Vyc29yLmNzc30gIWltcG9ydGFudDtgICtcbiAgICAgIGAgY29sb3I6ICR7Y29sb3JzLmN1cnNvckFjY2VudC5jc3N9ICFpbXBvcnRhbnQ7YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Um93Q3NzLkNVUlNPUl9DTEFTU30uJHtSb3dDc3MuQ1VSU09SX1NUWUxFX09VVExJTkVfQ0xBU1N9IHtgICtcbiAgICAgIGAgb3V0bGluZTogMXB4IHNvbGlkICR7Y29sb3JzLmN1cnNvci5jc3N9O2AgK1xuICAgICAgYCBvdXRsaW5lLW9mZnNldDogLTFweDtgICtcbiAgICAgIGB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtST1dfQ09OVEFJTkVSX0NMQVNTfSAuJHtSb3dDc3MuQ1VSU09SX0NMQVNTfS4ke1Jvd0Nzcy5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTfSB7YCArXG4gICAgICBgIGJveC1zaGFkb3c6ICR7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JXaWR0aH1weCAwIDAgJHtjb2xvcnMuY3Vyc29yLmNzc30gaW5zZXQ7YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7Uk9XX0NPTlRBSU5FUl9DTEFTU30gLiR7Um93Q3NzLkNVUlNPUl9DTEFTU30uJHtSb3dDc3MuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTU30ge2AgK1xuICAgICAgYCBib3JkZXItYm90dG9tOiAxcHggJHtjb2xvcnMuY3Vyc29yLmNzc307YCArXG4gICAgICBgIGJvcmRlci1ib3R0b20tc3R5bGU6IHNvbGlkO2AgK1xuICAgICAgYCBoZWlnaHQ6IGNhbGMoMTAwJSAtIDFweCk7YCArXG4gICAgICBgfWA7XG4gICAgLy8gU2VsZWN0aW9uXG4gICAgc3R5bGVzICs9XG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtTRUxFQ1RJT05fQ0xBU1N9IHtgICtcbiAgICAgIGAgcG9zaXRpb246IGFic29sdXRlO2AgK1xuICAgICAgYCB0b3A6IDA7YCArXG4gICAgICBgIGxlZnQ6IDA7YCArXG4gICAgICBgIHotaW5kZXg6IDE7YCArXG4gICAgICBgIHBvaW50ZXItZXZlbnRzOiBub25lO2AgK1xuICAgICAgYH1gICtcbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9LmZvY3VzIC4ke1NFTEVDVElPTl9DTEFTU30gZGl2IHtgICtcbiAgICAgIGAgcG9zaXRpb246IGFic29sdXRlO2AgK1xuICAgICAgYCBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9ycy5zZWxlY3Rpb25CYWNrZ3JvdW5kT3BhcXVlLmNzc307YCArXG4gICAgICBgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7U0VMRUNUSU9OX0NMQVNTfSBkaXYge2AgK1xuICAgICAgYCBwb3NpdGlvbjogYWJzb2x1dGU7YCArXG4gICAgICBgIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3JzLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZE9wYXF1ZS5jc3N9O2AgK1xuICAgICAgYH1gO1xuICAgIC8vIENvbG9yc1xuICAgIGZvciAoY29uc3QgW2ksIGNdIG9mIGNvbG9ycy5hbnNpLmVudHJpZXMoKSkge1xuICAgICAgc3R5bGVzICs9XG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke2l9IHsgY29sb3I6ICR7Yy5jc3N9OyB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke2l9LiR7Um93Q3NzLkRJTV9DTEFTU30geyBjb2xvcjogJHtjb2xvci5tdWx0aXBseU9wYWNpdHkoYywgMC41KS5jc3N9OyB9YCArXG4gICAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0JHX0NMQVNTX1BSRUZJWH0ke2l9IHsgYmFja2dyb3VuZC1jb2xvcjogJHtjLmNzc307IH1gO1xuICAgIH1cbiAgICBzdHlsZXMgKz1cbiAgICAgIGAke3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3J9IC4ke0ZHX0NMQVNTX1BSRUZJWH0ke0lOVkVSVEVEX0RFRkFVTFRfQ09MT1J9IHsgY29sb3I6ICR7Y29sb3Iub3BhcXVlKGNvbG9ycy5iYWNrZ3JvdW5kKS5jc3N9OyB9YCArXG4gICAgICBgJHt0aGlzLl90ZXJtaW5hbFNlbGVjdG9yfSAuJHtGR19DTEFTU19QUkVGSVh9JHtJTlZFUlRFRF9ERUZBVUxUX0NPTE9SfS4ke1Jvd0Nzcy5ESU1fQ0xBU1N9IHsgY29sb3I6ICR7Y29sb3IubXVsdGlwbHlPcGFjaXR5KGNvbG9yLm9wYXF1ZShjb2xvcnMuYmFja2dyb3VuZCksIDAuNSkuY3NzfTsgfWAgK1xuICAgICAgYCR7dGhpcy5fdGVybWluYWxTZWxlY3Rvcn0gLiR7QkdfQ0xBU1NfUFJFRklYfSR7SU5WRVJURURfREVGQVVMVF9DT0xPUn0geyBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9ycy5mb3JlZ3JvdW5kLmNzc307IH1gO1xuXG4gICAgdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBzdHlsZXM7XG4gIH1cblxuICAvKipcbiAgICogZGVmYXVsdCBsZXR0ZXIgc3BhY2luZ1xuICAgKiBEdWUgdG8gcm91bmRpbmcgaXNzdWVzIGluIGRpbWVuc2lvbnMgZHByIGNhbGMgZ2x5cGggbWlnaHQgcmVuZGVyXG4gICAqIHNsaWdodGx5IHRvbyB3aWRlIG9yIHRvbyBuYXJyb3cuIFRoZSBtZXRob2QgY29ycmVjdHMgdGhlIHN0YWNraW5nIG9mZnNldHNcbiAgICogYnkgYXBwbHlpbmcgYSBkZWZhdWx0IGxldHRlci1zcGFjaW5nIGZvciBhbGwgY2hhcnMuXG4gICAqIFRoZSB2YWx1ZSBnZXRzIHBhc3NlZCB0byB0aGUgcm93IGZhY3RvcnkgdG8gYXZvaWQgc2V0dGluZyB0aGlzIHZhbHVlIGFnYWluXG4gICAqIChyZW5kZXIgc3BlZWR1cCBpcyByb3VnaGx5IDEwJSkuXG4gICAqL1xuICBwcml2YXRlIF9zZXREZWZhdWx0U3BhY2luZygpOiB2b2lkIHtcbiAgICAvLyBtZWFzdXJlIHNhbWUgY2hhciBhcyBpbiBDaGFyU2l6ZVNlcnZpY2UgdG8gZ2V0IHRoZSBiYXNlIGRldmlhdGlvblxuICAgIGNvbnN0IHNwYWNpbmcgPSB0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGggLSB0aGlzLl93aWR0aENhY2hlLmdldCgnVycsIGZhbHNlLCBmYWxzZSk7XG4gICAgdGhpcy5fcm93Q29udGFpbmVyLnN0eWxlLmxldHRlclNwYWNpbmcgPSBgJHtzcGFjaW5nfXB4YDtcbiAgICB0aGlzLl9yb3dGYWN0b3J5LmRlZmF1bHRTcGFjaW5nID0gc3BhY2luZztcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVEZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICB0aGlzLl93aWR0aENhY2hlLmNsZWFyKCk7XG4gICAgdGhpcy5fc2V0RGVmYXVsdFNwYWNpbmcoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZnJlc2hSb3dFbGVtZW50cyhjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIC8vIEFkZCBtaXNzaW5nIGVsZW1lbnRzXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDsgaSA8PSByb3dzOyBpKyspIHtcbiAgICAgIGNvbnN0IHJvdyA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50cy5wdXNoKHJvdyk7XG4gICAgfVxuICAgIC8vIFJlbW92ZSBleGNlc3MgZWxlbWVudHNcbiAgICB3aGlsZSAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoID4gcm93cykge1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpISk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhbmRsZVJlc2l6ZShjb2xzOiBudW1iZXIsIHJvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3JlZnJlc2hSb3dFbGVtZW50cyhjb2xzLCByb3dzKTtcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5oYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKHRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLnNlbGVjdGlvblN0YXJ0LCB0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC5zZWxlY3Rpb25FbmQsIHRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLmNvbHVtblNlbGVjdE1vZGUpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUNoYXJTaXplQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICB0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgdGhpcy5fd2lkdGhDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuX3NldERlZmF1bHRTcGFjaW5nKCk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQmx1cigpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShGT0NVU19DTEFTUyk7XG4gICAgdGhpcy5yZW5kZXJSb3dzKDAsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUZvY3VzKCk6IHZvaWQge1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKEZPQ1VTX0NMQVNTKTtcbiAgICB0aGlzLnJlbmRlclJvd3ModGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSwgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChzdGFydDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgZW5kOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBjb2x1bW5TZWxlY3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFsbCBzZWxlY3Rpb25zXG4gICAgdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnJlcGxhY2VDaGlsZHJlbigpO1xuICAgIHRoaXMuX3Jvd0ZhY3RvcnkuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgICB0aGlzLnJlbmRlclJvd3MoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG5cbiAgICAvLyBTZWxlY3Rpb24gZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC51cGRhdGUodGhpcy5fdGVybWluYWwsIHN0YXJ0LCBlbmQsIGNvbHVtblNlbGVjdE1vZGUpO1xuICAgIGlmICghdGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWwuaGFzU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVHJhbnNsYXRlIGZyb20gYnVmZmVyIHBvc2l0aW9uIHRvIHZpZXdwb3J0IHBvc2l0aW9uXG4gICAgY29uc3Qgdmlld3BvcnRTdGFydFJvdyA9IHRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLnZpZXdwb3J0U3RhcnRSb3c7XG4gICAgY29uc3Qgdmlld3BvcnRFbmRSb3cgPSB0aGlzLl9zZWxlY3Rpb25SZW5kZXJNb2RlbC52aWV3cG9ydEVuZFJvdztcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZFN0YXJ0Um93ID0gdGhpcy5fc2VsZWN0aW9uUmVuZGVyTW9kZWwudmlld3BvcnRDYXBwZWRTdGFydFJvdztcbiAgICBjb25zdCB2aWV3cG9ydENhcHBlZEVuZFJvdyA9IHRoaXMuX3NlbGVjdGlvblJlbmRlck1vZGVsLnZpZXdwb3J0Q2FwcGVkRW5kUm93O1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzZWxlY3Rpb25zXG4gICAgY29uc3QgZG9jdW1lbnRGcmFnbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgIGlmIChjb2x1bW5TZWxlY3RNb2RlKSB7XG4gICAgICBjb25zdCBpc1hGbGlwcGVkID0gc3RhcnRbMF0gPiBlbmRbMF07XG4gICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKFxuICAgICAgICB0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIGlzWEZsaXBwZWQgPyBlbmRbMF0gOiBzdGFydFswXSwgaXNYRmxpcHBlZCA/IHN0YXJ0WzBdIDogZW5kWzBdLCB2aWV3cG9ydENhcHBlZEVuZFJvdyAtIHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgKyAxKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRHJhdyBmaXJzdCByb3dcbiAgICAgIGNvbnN0IHN0YXJ0Q29sID0gdmlld3BvcnRTdGFydFJvdyA9PT0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyA/IHN0YXJ0WzBdIDogMDtcbiAgICAgIGNvbnN0IGVuZENvbCA9IHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgPT09IHZpZXdwb3J0RW5kUm93ID8gZW5kWzBdIDogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgZG9jdW1lbnRGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRDb2wpKTtcbiAgICAgIC8vIERyYXcgbWlkZGxlIHJvd3NcbiAgICAgIGNvbnN0IG1pZGRsZVJvd3NDb3VudCA9IHZpZXdwb3J0Q2FwcGVkRW5kUm93IC0gdmlld3BvcnRDYXBwZWRTdGFydFJvdyAtIDE7XG4gICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRTdGFydFJvdyArIDEsIDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgbWlkZGxlUm93c0NvdW50KSk7XG4gICAgICAvLyBEcmF3IGZpbmFsIHJvd1xuICAgICAgaWYgKHZpZXdwb3J0Q2FwcGVkU3RhcnRSb3cgIT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93KSB7XG4gICAgICAgIC8vIE9ubHkgZHJhdyB2aWV3cG9ydEVuZFJvdyBpZiBpdCdzIG5vdCB0aGUgc2FtZSBhcyB2aWV3cG9ydHRhcnRSb3dcbiAgICAgICAgY29uc3QgZW5kQ29sID0gdmlld3BvcnRFbmRSb3cgPT09IHZpZXdwb3J0Q2FwcGVkRW5kUm93ID8gZW5kWzBdIDogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICBkb2N1bWVudEZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQodmlld3BvcnRDYXBwZWRFbmRSb3csIDAsIGVuZENvbCkpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnRGcmFnbWVudCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNlbGVjdGlvbiBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24uXG4gICAqIEBwYXJhbSByb3cgVGhlIHJvdyBvZiB0aGUgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gY29sU3RhcnQgVGhlIHN0YXJ0IGNvbHVtbi5cbiAgICogQHBhcmFtIGNvbEVuZCBUaGUgZW5kIGNvbHVtbnMuXG4gICAqL1xuICBwcml2YXRlIF9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHJvdzogbnVtYmVyLCBjb2xTdGFydDogbnVtYmVyLCBjb2xFbmQ6IG51bWJlciwgcm93Q291bnQ6IG51bWJlciA9IDEpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGxlZnQgPSBjb2xTdGFydCAqIHRoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aDtcbiAgICBsZXQgd2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGggKiAoY29sRW5kIC0gY29sU3RhcnQpO1xuICAgIGlmIChsZWZ0ICsgd2lkdGggPiB0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aCkge1xuICAgICAgd2lkdGggPSB0aGlzLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aCAtIGxlZnQ7XG4gICAgfVxuXG4gICAgZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtyb3dDb3VudCAqIHRoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHR9cHhgO1xuICAgIGVsZW1lbnQuc3R5bGUudG9wID0gYCR7cm93ICogdGhpcy5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7bGVmdH1weGA7XG4gICAgZWxlbWVudC5zdHlsZS53aWR0aCA9IGAke3dpZHRofXB4YDtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVDdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIC8vIE5vLW9wLCB0aGUgY3Vyc29yIGlzIGRyYXduIHdoZW4gcm93cyBhcmUgZHJhd25cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU9wdGlvbnNDaGFuZ2VkKCk6IHZvaWQge1xuICAgIC8vIEZvcmNlIGEgcmVmcmVzaFxuICAgIHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTtcbiAgICAvLyBSZWZyZXNoIENTU1xuICAgIHRoaXMuX2luamVjdENzcyh0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzKTtcbiAgICAvLyB1cGRhdGUgc3BhY2luZyBjYWNoZVxuICAgIHRoaXMuX3dpZHRoQ2FjaGUuc2V0Rm9udChcbiAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSxcbiAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUsXG4gICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHQsXG4gICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkXG4gICAgKTtcbiAgICB0aGlzLl9zZXREZWZhdWx0U3BhY2luZygpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLl9yb3dFbGVtZW50cykge1xuICAgICAgLyoqXG4gICAgICAgKiBOT1RFOiBUaGlzIHVzZWQgdG8gYmUgYGUuaW5uZXJUZXh0ID0gJyc7YCBidXQgdGhhdCBkb2Vzbid0IHdvcmsgd2hlbiB1c2luZyBganNkb21gIGFuZFxuICAgICAgICogYEB0ZXN0aW5nLWxpYnJhcnkvcmVhY3RgXG4gICAgICAgKlxuICAgICAgICogcmVmZXJlbmNlczpcbiAgICAgICAqIC0gaHR0cHM6Ly9naXRodWIuY29tL3Rlc3RpbmctbGlicmFyeS9yZWFjdC10ZXN0aW5nLWxpYnJhcnkvaXNzdWVzLzExNDZcbiAgICAgICAqIC0gaHR0cHM6Ly9naXRodWIuY29tL2pzZG9tL2pzZG9tL2lzc3Vlcy8xMjQ1XG4gICAgICAgKi9cbiAgICAgIGUucmVwbGFjZUNoaWxkcmVuKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBjdXJzb3JBYnNvbHV0ZVkgPSBidWZmZXIueWJhc2UgKyBidWZmZXIueTtcbiAgICBjb25zdCBjdXJzb3JYID0gTWF0aC5taW4oYnVmZmVyLngsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEpO1xuICAgIGNvbnN0IGN1cnNvckJsaW5rID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmN1cnNvckJsaW5rID8/IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yQmxpbms7XG4gICAgY29uc3QgY3Vyc29yU3R5bGUgPSB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuY3Vyc29yU3R5bGUgPz8gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZTtcbiAgICBjb25zdCBjdXJzb3JJbmFjdGl2ZVN0eWxlID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JJbmFjdGl2ZVN0eWxlO1xuXG4gICAgZm9yIChsZXQgeSA9IHN0YXJ0OyB5IDw9IGVuZDsgeSsrKSB7XG4gICAgICBjb25zdCByb3cgPSB5ICsgYnVmZmVyLnlkaXNwO1xuICAgICAgY29uc3Qgcm93RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzW3ldO1xuICAgICAgY29uc3QgbGluZURhdGEgPSBidWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBpZiAoIXJvd0VsZW1lbnQgfHwgIWxpbmVEYXRhKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcm93RWxlbWVudC5yZXBsYWNlQ2hpbGRyZW4oXG4gICAgICAgIC4uLnRoaXMuX3Jvd0ZhY3RvcnkuY3JlYXRlUm93KFxuICAgICAgICAgIGxpbmVEYXRhLFxuICAgICAgICAgIHJvdyxcbiAgICAgICAgICByb3cgPT09IGN1cnNvckFic29sdXRlWSxcbiAgICAgICAgICBjdXJzb3JTdHlsZSxcbiAgICAgICAgICBjdXJzb3JJbmFjdGl2ZVN0eWxlLFxuICAgICAgICAgIGN1cnNvclgsXG4gICAgICAgICAgY3Vyc29yQmxpbmssXG4gICAgICAgICAgdGhpcy5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoLFxuICAgICAgICAgIHRoaXMuX3dpZHRoQ2FjaGUsXG4gICAgICAgICAgLTEsXG4gICAgICAgICAgLTFcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldCBfdGVybWluYWxTZWxlY3RvcigpOiBzdHJpbmcge1xuICAgIHJldHVybiBgLiR7VEVSTUlOQUxfQ0xBU1NfUFJFRklYfSR7dGhpcy5fdGVybWluYWxDbGFzc31gO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlTGlua0hvdmVyKGU6IElMaW5raWZpZXJFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSwgZS54MiwgZS55MSwgZS55MiwgZS5jb2xzLCB0cnVlKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUxpbmtMZWF2ZShlOiBJTGlua2lmaWVyRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsIGUueDIsIGUueTEsIGUueTIsIGUuY29scywgZmFsc2UpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0Q2VsbFVuZGVybGluZSh4OiBudW1iZXIsIHgyOiBudW1iZXIsIHk6IG51bWJlciwgeTI6IG51bWJlciwgY29sczogbnVtYmVyLCBlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgLyoqXG4gICAgICogTk9URTogVGhlIGxpbmtpZmllciBtYXkgc2VuZCBvdXQgb2Ygdmlld3BvcnQgeS12YWx1ZXMgaWY6XG4gICAgICogLSBuZWdhdGl2ZSB5LXZhbHVlOiB0aGUgbGluayBzdGFydGVkIGF0IGEgaGlnaGVyIGxpbmVcbiAgICAgKiAtIHktdmFsdWUgPj0gbWF4WTogdGhlIGxpbmsgZW5kcyBhdCBhIGxpbmUgYmVsb3cgdmlld3BvcnRcbiAgICAgKlxuICAgICAqIEZvciBuZWdhdGl2ZSB5LXZhbHVlcyB3ZSBjYW4gc2ltcGx5IGFkanVzdCB4ID0gMCxcbiAgICAgKiBhcyBoaWdoZXIgdXAgbGluayBzdGFydCBtZWFucywgdGhhdCBldmVyeXRoaW5nIGZyb21cbiAgICAgKiAoMCwwKSBpcyBhIGxpbmsgdW5kZXIgdG9wLWRvd24tbGVmdC1yaWdodCBjaGFyIHByb2dyZXNzaW9uXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsbHkgdGhlcmUgbWlnaHQgYmUgYSBzbWFsbCBjaGFuY2Ugb2Ygb3V0LW9mLXN5bmMgeHx5LXZhbHVlc1xuICAgICAqIGZyb20gYSByYWNlIGNvbmRpdGlvbiBvZiByZW5kZXIgdXBkYXRlcyB2cy4gbGluayBldmVudCBoYW5kbGVyIGV4ZWN1dGlvbjpcbiAgICAgKiAtIChzeW5jKSByZXNpemU6IGNoYW5jZXMgdGVybWluYWwgYnVmZmVyIGluIHN5bmMsIHNjaGVkdWxlcyByZW5kZXIgdXBkYXRlIGFzeW5jXG4gICAgICogLSAoYXN5bmMpIGxpbmsgaGFuZGxlciByYWNlIGNvbmRpdGlvbjogbmV3IGJ1ZmZlciBtZXRyaWNzLCBidXQgc3RpbGwgb24gb2xkIHJlbmRlciBzdGF0ZVxuICAgICAqIC0gKGFzeW5jKSByZW5kZXIgdXBkYXRlOiBicmluZ3MgdGVybSBtZXRyaWNzIGFuZCByZW5kZXIgc3RhdGUgYmFjayBpbiBzeW5jXG4gICAgICovXG4gICAgLy8gY2xpcCBjb29yZHMgaW50byB2aWV3cG9ydFxuICAgIGlmICh5IDwgMCkgeCA9IDA7XG4gICAgaWYgKHkyIDwgMCkgeDIgPSAwO1xuICAgIGNvbnN0IG1heFkgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxO1xuICAgIHkgPSBNYXRoLm1heChNYXRoLm1pbih5LCBtYXhZKSwgMCk7XG4gICAgeTIgPSBNYXRoLm1heChNYXRoLm1pbih5MiwgbWF4WSksIDApO1xuXG4gICAgY29scyA9IE1hdGgubWluKGNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgY3Vyc29yQWJzb2x1dGVZID0gYnVmZmVyLnliYXNlICsgYnVmZmVyLnk7XG4gICAgY29uc3QgY3Vyc29yWCA9IE1hdGgubWluKGJ1ZmZlci54LCBjb2xzIC0gMSk7XG4gICAgY29uc3QgY3Vyc29yQmxpbmsgPSB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rO1xuICAgIGNvbnN0IGN1cnNvclN0eWxlID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZTtcbiAgICBjb25zdCBjdXJzb3JJbmFjdGl2ZVN0eWxlID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JJbmFjdGl2ZVN0eWxlO1xuXG4gICAgLy8gcmVmcmVzaCByb3dzIHdpdGhpbiBsaW5rIHJhbmdlXG4gICAgZm9yIChsZXQgaSA9IHk7IGkgPD0geTI7ICsraSkge1xuICAgICAgY29uc3Qgcm93ID0gaSArIGJ1ZmZlci55ZGlzcDtcbiAgICAgIGNvbnN0IHJvd0VsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1tpXTtcbiAgICAgIGNvbnN0IGJ1ZmZlcmxpbmUgPSBidWZmZXIubGluZXMuZ2V0KHJvdyk7XG4gICAgICBpZiAoIXJvd0VsZW1lbnQgfHwgIWJ1ZmZlcmxpbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByb3dFbGVtZW50LnJlcGxhY2VDaGlsZHJlbihcbiAgICAgICAgLi4udGhpcy5fcm93RmFjdG9yeS5jcmVhdGVSb3coXG4gICAgICAgICAgYnVmZmVybGluZSxcbiAgICAgICAgICByb3csXG4gICAgICAgICAgcm93ID09PSBjdXJzb3JBYnNvbHV0ZVksXG4gICAgICAgICAgY3Vyc29yU3R5bGUsXG4gICAgICAgICAgY3Vyc29ySW5hY3RpdmVTdHlsZSxcbiAgICAgICAgICBjdXJzb3JYLFxuICAgICAgICAgIGN1cnNvckJsaW5rLFxuICAgICAgICAgIHRoaXMuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aCxcbiAgICAgICAgICB0aGlzLl93aWR0aENhY2hlLFxuICAgICAgICAgIGVuYWJsZWQgPyAoaSA9PT0geSA/IHggOiAwKSA6IC0xLFxuICAgICAgICAgIGVuYWJsZWQgPyAoKGkgPT09IHkyID8geDIgOiBjb2xzKSAtIDEpIDogLTFcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5cbmV4cG9ydCBjbGFzcyBDaGFyU2l6ZVNlcnZpY2UgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUNoYXJTaXplU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgd2lkdGg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBoZWlnaHQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX21lYXN1cmVTdHJhdGVneTogSU1lYXN1cmVTdHJhdGVneTtcblxuICBwdWJsaWMgZ2V0IGhhc1ZhbGlkU2l6ZSgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMud2lkdGggPiAwICYmIHRoaXMuaGVpZ2h0ID4gMDsgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQ2hhclNpemVDaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQ2hhclNpemVDaGFuZ2UgPSB0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGRvY3VtZW50OiBEb2N1bWVudCxcbiAgICBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0cnkge1xuICAgICAgdGhpcy5fbWVhc3VyZVN0cmF0ZWd5ID0gdGhpcy5fcmVnaXN0ZXIobmV3IFRleHRNZXRyaWNzTWVhc3VyZVN0cmF0ZWd5KHRoaXMuX29wdGlvbnNTZXJ2aWNlKSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICB0aGlzLl9tZWFzdXJlU3RyYXRlZ3kgPSB0aGlzLl9yZWdpc3RlcihuZXcgRG9tTWVhc3VyZVN0cmF0ZWd5KGRvY3VtZW50LCBwYXJlbnRFbGVtZW50LCB0aGlzLl9vcHRpb25zU2VydmljZSkpO1xuICAgIH1cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vbk11bHRpcGxlT3B0aW9uQ2hhbmdlKFsnZm9udEZhbWlseScsICdmb250U2l6ZSddLCAoKSA9PiB0aGlzLm1lYXN1cmUoKSkpO1xuICB9XG5cbiAgcHVibGljIG1lYXN1cmUoKTogdm9pZCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fbWVhc3VyZVN0cmF0ZWd5Lm1lYXN1cmUoKTtcbiAgICBpZiAocmVzdWx0LndpZHRoICE9PSB0aGlzLndpZHRoIHx8IHJlc3VsdC5oZWlnaHQgIT09IHRoaXMuaGVpZ2h0KSB7XG4gICAgICB0aGlzLndpZHRoID0gcmVzdWx0LndpZHRoO1xuICAgICAgdGhpcy5oZWlnaHQgPSByZXN1bHQuaGVpZ2h0O1xuICAgICAgdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5maXJlKCk7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBJTWVhc3VyZVN0cmF0ZWd5IHtcbiAgbWVhc3VyZSgpOiBSZWFkb25seTxJTWVhc3VyZVJlc3VsdD47XG59XG5cbmludGVyZmFjZSBJTWVhc3VyZVJlc3VsdCB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xufVxuXG5jb25zdCBlbnVtIERvbU1lYXN1cmVTdHJhdGVneUNvbnN0YW50cyB7XG4gIFJFUEVBVCA9IDMyXG59XG5cbmFic3RyYWN0IGNsYXNzIEJhc2VNZWFzdXJlU3RhdGVneSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJTWVhc3VyZVN0cmF0ZWd5IHtcbiAgcHJvdGVjdGVkIF9yZXN1bHQ6IElNZWFzdXJlUmVzdWx0ID0geyB3aWR0aDogMCwgaGVpZ2h0OiAwIH07XG5cbiAgcHJvdGVjdGVkIF92YWxpZGF0ZUFuZFNldCh3aWR0aDogbnVtYmVyIHwgdW5kZWZpbmVkLCBoZWlnaHQ6IG51bWJlciB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIC8vIElmIHZhbHVlcyBhcmUgMCB0aGVuIHRoZSBlbGVtZW50IGlzIGxpa2VseSBjdXJyZW50bHkgZGlzcGxheTpub25lLCBpbiB3aGljaCBjYXNlIHdlIHNob3VsZFxuICAgIC8vIHJldGFpbiB0aGUgcHJldmlvdXMgdmFsdWUuXG4gICAgaWYgKHdpZHRoICE9PSB1bmRlZmluZWQgJiYgd2lkdGggPiAwICYmIGhlaWdodCAhPT0gdW5kZWZpbmVkICYmIGhlaWdodCA+IDApIHtcbiAgICAgIHRoaXMuX3Jlc3VsdC53aWR0aCA9IHdpZHRoO1xuICAgICAgdGhpcy5fcmVzdWx0LmhlaWdodCA9IGhlaWdodDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgbWVhc3VyZSgpOiBSZWFkb25seTxJTWVhc3VyZVJlc3VsdD47XG59XG5cbmNsYXNzIERvbU1lYXN1cmVTdHJhdGVneSBleHRlbmRzIEJhc2VNZWFzdXJlU3RhdGVneSB7XG4gIHByaXZhdGUgX21lYXN1cmVFbGVtZW50OiBIVE1MRWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9kb2N1bWVudDogRG9jdW1lbnQsXG4gICAgcHJpdmF0ZSBfcGFyZW50RWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50Jyk7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQudGV4dENvbnRlbnQgPSAnVycucmVwZWF0KERvbU1lYXN1cmVTdHJhdGVneUNvbnN0YW50cy5SRVBFQVQpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSAncHJlJztcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250S2VybmluZyA9ICdub25lJztcbiAgICB0aGlzLl9wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX21lYXN1cmVFbGVtZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBtZWFzdXJlKCk6IFJlYWRvbmx5PElNZWFzdXJlUmVzdWx0PiB7XG4gICAgdGhpcy5fbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udEZhbWlseSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseTtcbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250U2l6ZSA9IGAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemV9cHhgO1xuXG4gICAgLy8gTm90ZSB0aGF0IHRoaXMgdHJpZ2dlcnMgYSBzeW5jaHJvbm91cyBsYXlvdXRcbiAgICB0aGlzLl92YWxpZGF0ZUFuZFNldChOdW1iZXIodGhpcy5fbWVhc3VyZUVsZW1lbnQub2Zmc2V0V2lkdGgpIC8gRG9tTWVhc3VyZVN0cmF0ZWd5Q29uc3RhbnRzLlJFUEVBVCwgTnVtYmVyKHRoaXMuX21lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodCkpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3Jlc3VsdDtcbiAgfVxufVxuXG5jbGFzcyBUZXh0TWV0cmljc01lYXN1cmVTdHJhdGVneSBleHRlbmRzIEJhc2VNZWFzdXJlU3RhdGVneSB7XG4gIHByaXZhdGUgX2NhbnZhczogT2Zmc2NyZWVuQ2FudmFzO1xuICBwcml2YXRlIF9jdHg6IE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgLy8gVGhpcyB3aWxsIHRocm93IGlmIGFueSByZXF1aXJlZCBBUEkgaXMgbm90IHN1cHBvcnRlZFxuICAgIHRoaXMuX2NhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMoMTAwLCAxMDApO1xuICAgIHRoaXMuX2N0eCA9IHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCcyZCcpITtcbiAgICBjb25zdCBhID0gdGhpcy5fY3R4Lm1lYXN1cmVUZXh0KCdXJyk7XG4gICAgaWYgKCEoJ3dpZHRoJyBpbiBhICYmICdmb250Qm91bmRpbmdCb3hBc2NlbnQnIGluIGEgJiYgJ2ZvbnRCb3VuZGluZ0JveERlc2NlbnQnIGluIGEpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmVkIGZvbnQgbWV0cmljcyBub3Qgc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1lYXN1cmUoKTogUmVhZG9ubHk8SU1lYXN1cmVSZXN1bHQ+IHtcbiAgICB0aGlzLl9jdHguZm9udCA9IGAke3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemV9cHggJHt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHl9YDtcbiAgICBjb25zdCBtZXRyaWNzID0gdGhpcy5fY3R4Lm1lYXN1cmVUZXh0KCdXJyk7XG4gICAgdGhpcy5fdmFsaWRhdGVBbmRTZXQobWV0cmljcy53aWR0aCwgbWV0cmljcy5mb250Qm91bmRpbmdCb3hBc2NlbnQgKyBtZXRyaWNzLmZvbnRCb3VuZGluZ0JveERlc2NlbnQpO1xuICAgIHJldHVybiB0aGlzLl9yZXN1bHQ7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDb3JlQnJvd3NlclNlcnZpY2UgfSBmcm9tICcuL1NlcnZpY2VzJztcbmltcG9ydCB7IEVtaXR0ZXIsIEV2ZW50IH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZUxpc3RlbmVyIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2RvbSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCBNdXRhYmxlRGlzcG9zYWJsZSwgdG9EaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIENvcmVCcm93c2VyU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQ29yZUJyb3dzZXJTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX2lzRm9jdXNlZCA9IGZhbHNlO1xuICBwcml2YXRlIF9jYWNoZWRJc0ZvY3VzZWQ6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3NjcmVlbkRwck1vbml0b3IgPSB0aGlzLl9yZWdpc3RlcihuZXcgU2NyZWVuRHByTW9uaXRvcih0aGlzLl93aW5kb3cpKTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkRwckNoYW5nZSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPG51bWJlcj4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRwckNoYW5nZSA9IHRoaXMuX29uRHByQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbldpbmRvd0NoYW5nZSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uV2luZG93Q2hhbmdlID0gdGhpcy5fb25XaW5kb3dDaGFuZ2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBfdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQsXG4gICAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3cgJiB0eXBlb2YgZ2xvYmFsVGhpcyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgbWFpbkRvY3VtZW50OiBEb2N1bWVudFxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gTW9uaXRvciBkZXZpY2UgcGl4ZWwgcmF0aW9cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLm9uV2luZG93Q2hhbmdlKHcgPT4gdGhpcy5fc2NyZWVuRHByTW9uaXRvci5zZXRXaW5kb3codykpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuX3NjcmVlbkRwck1vbml0b3Iub25EcHJDaGFuZ2UsIHRoaXMuX29uRHByQ2hhbmdlKSk7XG5cbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5fdGV4dGFyZWEsICdmb2N1cycsICgpID0+IHRoaXMuX2lzRm9jdXNlZCA9IHRydWUpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5fdGV4dGFyZWEsICdibHVyJywgKCkgPT4gdGhpcy5faXNGb2N1c2VkID0gZmFsc2UpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgd2luZG93KCk6IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzIHtcbiAgICByZXR1cm4gdGhpcy5fd2luZG93O1xuICB9XG5cbiAgcHVibGljIHNldCB3aW5kb3codmFsdWU6IFdpbmRvdyAmIHR5cGVvZiBnbG9iYWxUaGlzKSB7XG4gICAgaWYgKHRoaXMuX3dpbmRvdyAhPT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX3dpbmRvdyA9IHZhbHVlO1xuICAgICAgdGhpcy5fb25XaW5kb3dDaGFuZ2UuZmlyZSh0aGlzLl93aW5kb3cpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgZHByKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzRm9jdXNlZCgpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fY2FjaGVkSXNGb2N1c2VkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2NhY2hlZElzRm9jdXNlZCA9IHRoaXMuX2lzRm9jdXNlZCAmJiB0aGlzLl90ZXh0YXJlYS5vd25lckRvY3VtZW50Lmhhc0ZvY3VzKCk7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB0aGlzLl9jYWNoZWRJc0ZvY3VzZWQgPSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkSXNGb2N1c2VkO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgc2NyZWVuIGRldmljZSBwaXhlbCByYXRpbyBtb25pdG9yIGFsbG93cyBsaXN0ZW5pbmcgZm9yIHdoZW4gdGhlXG4gKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB2YWx1ZSBjaGFuZ2VzLiBUaGlzIGlzIGRvbmUgbm90IHdpdGggcG9sbGluZyBidXQgd2l0aFxuICogdGhlIHVzZSBvZiB3aW5kb3cubWF0Y2hNZWRpYSB0byB3YXRjaCBtZWRpYSBxdWVyaWVzLiBXaGVuIHRoZSBldmVudCBmaXJlcyxcbiAqIHRoZSBsaXN0ZW5lciB3aWxsIGJlIHJlYXR0YWNoZWQgdXNpbmcgYSBkaWZmZXJlbnQgbWVkaWEgcXVlcnkgdG8gZW5zdXJlIHRoYXRcbiAqIGFueSBmdXJ0aGVyIGNoYW5nZXMgd2lsbCBfcmVnaXN0ZXIuXG4gKlxuICogVGhlIGxpc3RlbmVyIHNob3VsZCBmaXJlIG9uIGJvdGggd2luZG93IHpvb20gY2hhbmdlcyBhbmQgc3dpdGNoaW5nIHRvIGFcbiAqIG1vbml0b3Igd2l0aCBhIGRpZmZlcmVudCBEUEkuXG4gKi9cbmNsYXNzIFNjcmVlbkRwck1vbml0b3IgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfY3VycmVudERldmljZVBpeGVsUmF0aW86IG51bWJlcjtcbiAgcHJpdmF0ZSBfb3V0ZXJMaXN0ZW5lcjogKCh0aGlzOiBNZWRpYVF1ZXJ5TGlzdCwgZXY6IE1lZGlhUXVlcnlMaXN0RXZlbnQpID0+IGFueSkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdDogTWVkaWFRdWVyeUxpc3QgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3dpbmRvd1Jlc2l6ZUxpc3RlbmVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlKCkpO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uRHByQ2hhbmdlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uRHByQ2hhbmdlID0gdGhpcy5fb25EcHJDaGFuZ2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfcGFyZW50V2luZG93OiBXaW5kb3cpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBsaXN0ZW5lciBhbmQgZHByIHZhbHVlXG4gICAgdGhpcy5fb3V0ZXJMaXN0ZW5lciA9ICgpID0+IHRoaXMuX3NldERwckFuZEZpcmVJZkRpZmZlcnMoKTtcbiAgICB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHRoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3VwZGF0ZURwcigpO1xuXG4gICAgLy8gTW9uaXRvciBhY3RpdmUgd2luZG93IHJlc2l6ZVxuICAgIHRoaXMuX3NldFdpbmRvd1Jlc2l6ZUxpc3RlbmVyKCk7XG5cbiAgICAvLyBTZXR1cCBhZGRpdGlvbmFsIGRpc3Bvc2FibGVzXG4gICAgdGhpcy5fcmVnaXN0ZXIodG9EaXNwb3NhYmxlKCgpID0+IHRoaXMuY2xlYXJMaXN0ZW5lcigpKSk7XG4gIH1cblxuXG4gIHB1YmxpYyBzZXRXaW5kb3cocGFyZW50V2luZG93OiBXaW5kb3cpOiB2b2lkIHtcbiAgICB0aGlzLl9wYXJlbnRXaW5kb3cgPSBwYXJlbnRXaW5kb3c7XG4gICAgdGhpcy5fc2V0V2luZG93UmVzaXplTGlzdGVuZXIoKTtcbiAgICB0aGlzLl9zZXREcHJBbmRGaXJlSWZEaWZmZXJzKCk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRXaW5kb3dSZXNpemVMaXN0ZW5lcigpOiB2b2lkIHtcbiAgICB0aGlzLl93aW5kb3dSZXNpemVMaXN0ZW5lci52YWx1ZSA9IGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLl9wYXJlbnRXaW5kb3csICdyZXNpemUnLCAoKSA9PiB0aGlzLl9zZXREcHJBbmRGaXJlSWZEaWZmZXJzKCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc2V0RHByQW5kRmlyZUlmRGlmZmVycygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fcGFyZW50V2luZG93LmRldmljZVBpeGVsUmF0aW8gIT09IHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICB0aGlzLl9vbkRwckNoYW5nZS5maXJlKHRoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtcbiAgICB9XG4gICAgdGhpcy5fdXBkYXRlRHByKCk7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVEcHIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9vdXRlckxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgbGlzdGVuZXJzIGZvciBvbGQgRFBSXG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0Py5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lcnMgZm9yIG5ldyBEUFJcbiAgICB0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyA9IHRoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHRoaXMuX3BhcmVudFdpbmRvdy5tYXRjaE1lZGlhKGBzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAke3RoaXMuX3BhcmVudFdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfWRwcHgpYCk7XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyTGlzdGVuZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QgfHwgIXRoaXMuX291dGVyTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpO1xuICAgIHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vdXRlckxpc3RlbmVyID0gdW5kZWZpbmVkO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgSUxpbmtQcm92aWRlciwgSUxpbmtQcm92aWRlclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBMaW5rUHJvdmlkZXJTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElMaW5rUHJvdmlkZXJTZXJ2aWNlIHtcbiAgZGVjbGFyZSBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcHVibGljIHJlYWRvbmx5IGxpbmtQcm92aWRlcnM6IElMaW5rUHJvdmlkZXJbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodG9EaXNwb3NhYmxlKCgpID0+IHRoaXMubGlua1Byb3ZpZGVycy5sZW5ndGggPSAwKSk7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJMaW5rUHJvdmlkZXIobGlua1Byb3ZpZGVyOiBJTGlua1Byb3ZpZGVyKTogSURpc3Bvc2FibGUge1xuICAgIHRoaXMubGlua1Byb3ZpZGVycy5wdXNoKGxpbmtQcm92aWRlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBsaW5rIHByb3ZpZGVyIGZyb20gdGhlIGxpc3RcbiAgICAgICAgY29uc3QgcHJvdmlkZXJJbmRleCA9IHRoaXMubGlua1Byb3ZpZGVycy5pbmRleE9mKGxpbmtQcm92aWRlcik7XG5cbiAgICAgICAgaWYgKHByb3ZpZGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5saW5rUHJvdmlkZXJzLnNwbGljZShwcm92aWRlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudCh3aW5kb3c6IFBpY2s8V2luZG93LCAnZ2V0Q29tcHV0ZWRTdHlsZSc+LCBldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IGVsZW1lbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICBjb25zdCBsZWZ0UGFkZGluZyA9IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWxlZnQnKSk7XG4gIGNvbnN0IHRvcFBhZGRpbmcgPSBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSk7XG4gIHJldHVybiBbXG4gICAgZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCAtIGxlZnRQYWRkaW5nLFxuICAgIGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcCAtIHRvcFBhZGRpbmdcbiAgXTtcbn1cblxuLyoqXG4gKiBHZXRzIGNvb3JkaW5hdGVzIHdpdGhpbiB0aGUgdGVybWluYWwgZm9yIGEgcGFydGljdWxhciBtb3VzZSBldmVudC4gVGhlIHJlc3VsdFxuICogaXMgcmV0dXJuZWQgYXMgYW4gYXJyYXkgaW4gdGhlIGZvcm0gW3gsIHldIGluc3RlYWQgb2YgYW4gb2JqZWN0IGFzIGl0J3MgYVxuICogbGl0dGxlIGZhc3RlciBhbmQgdGhpcyBmdW5jdGlvbiBpcyB1c2VkIGluIHNvbWUgbG93IGxldmVsIGNvZGUuXG4gKiBAcGFyYW0gd2luZG93IFRoZSB3aW5kb3cgb2JqZWN0IHRoZSBlbGVtZW50IGJlbG9uZ3MgdG8uXG4gKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIHRlcm1pbmFsJ3MgY29udGFpbmVyIGVsZW1lbnQuXG4gKiBAcGFyYW0gY29sQ291bnQgVGhlIG51bWJlciBvZiBjb2x1bW5zIGluIHRoZSB0ZXJtaW5hbC5cbiAqIEBwYXJhbSByb3dDb3VudCBUaGUgbnVtYmVyIG9mIHJvd3MgbiB0aGUgdGVybWluYWwuXG4gKiBAcGFyYW0gaGFzVmFsaWRDaGFyU2l6ZSBXaGV0aGVyIHRoZXJlIGlzIGEgdmFsaWQgY2hhcmFjdGVyIHNpemUgYXZhaWxhYmxlLlxuICogQHBhcmFtIGNzc0NlbGxXaWR0aCBUaGUgY2VsbCB3aWR0aCBkZXZpY2UgcGl4ZWwgcmVuZGVyIGRpbWVuc2lvbnMuXG4gKiBAcGFyYW0gY3NzQ2VsbEhlaWdodCBUaGUgY2VsbCBoZWlnaHQgZGV2aWNlIHBpeGVsIHJlbmRlciBkaW1lbnNpb25zLlxuICogQHBhcmFtIGlzU2VsZWN0aW9uIFdoZXRoZXIgdGhlIHJlcXVlc3QgaXMgZm9yIHRoZSBzZWxlY3Rpb24gb3Igbm90LiBUaGlzIHdpbGxcbiAqIGFwcGx5IGFuIG9mZnNldCB0byB0aGUgeCB2YWx1ZSBzdWNoIHRoYXQgdGhlIGxlZnQgaGFsZiBvZiB0aGUgY2VsbCB3aWxsXG4gKiBzZWxlY3QgdGhhdCBjZWxsIGFuZCB0aGUgcmlnaHQgaGFsZiB3aWxsIHNlbGVjdCB0aGUgbmV4dCBjZWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29vcmRzKHdpbmRvdzogUGljazxXaW5kb3csICdnZXRDb21wdXRlZFN0eWxlJz4sIGV2ZW50OiBQaWNrPE1vdXNlRXZlbnQsICdjbGllbnRYJyB8ICdjbGllbnRZJz4sIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBjb2xDb3VudDogbnVtYmVyLCByb3dDb3VudDogbnVtYmVyLCBoYXNWYWxpZENoYXJTaXplOiBib29sZWFuLCBjc3NDZWxsV2lkdGg6IG51bWJlciwgY3NzQ2VsbEhlaWdodDogbnVtYmVyLCBpc1NlbGVjdGlvbj86IGJvb2xlYW4pOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgLy8gQ29vcmRpbmF0ZXMgY2Fubm90IGJlIG1lYXN1cmVkIGlmIHRoZXJlIGFyZSBubyB2YWxpZFxuICBpZiAoIWhhc1ZhbGlkQ2hhclNpemUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgY29vcmRzID0gZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQod2luZG93LCBldmVudCwgZWxlbWVudCk7XG4gIGlmICghY29vcmRzKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvb3Jkc1swXSA9IE1hdGguY2VpbCgoY29vcmRzWzBdICsgKGlzU2VsZWN0aW9uID8gY3NzQ2VsbFdpZHRoIC8gMiA6IDApKSAvIGNzc0NlbGxXaWR0aCk7XG4gIGNvb3Jkc1sxXSA9IE1hdGguY2VpbChjb29yZHNbMV0gLyBjc3NDZWxsSGVpZ2h0KTtcblxuICAvLyBFbnN1cmUgY29vcmRpbmF0ZXMgYXJlIHdpdGhpbiB0aGUgdGVybWluYWwgdmlld3BvcnQuIE5vdGUgdGhhdCBzZWxlY3Rpb25zXG4gIC8vIG5lZWQgYW4gYWRkaXRpb24gcG9pbnQgb2YgcHJlY2lzaW9uIHRvIGNvdmVyIHRoZSBlbmQgcG9pbnQgKGFzIGNoYXJhY3RlcnNcbiAgLy8gY292ZXIgaGFsZiBvZiBvbmUgY2hhciBhbmQgaGFsZiBvZiB0aGUgbmV4dCkuXG4gIGNvb3Jkc1swXSA9IE1hdGgubWluKE1hdGgubWF4KGNvb3Jkc1swXSwgMSksIGNvbENvdW50ICsgKGlzU2VsZWN0aW9uID8gMSA6IDApKTtcbiAgY29vcmRzWzFdID0gTWF0aC5taW4oTWF0aC5tYXgoY29vcmRzWzFdLCAxKSwgcm93Q291bnQpO1xuXG4gIHJldHVybiBjb29yZHM7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2hhclNpemVTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSwgSU1vdXNlU2VydmljZSB9IGZyb20gJy4vU2VydmljZXMnO1xuaW1wb3J0IHsgZ2V0Q29vcmRzLCBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudCB9IGZyb20gJ2Jyb3dzZXIvaW5wdXQvTW91c2UnO1xuXG5leHBvcnQgY2xhc3MgTW91c2VTZXJ2aWNlIGltcGxlbWVudHMgSU1vdXNlU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2UsXG4gICAgQElDaGFyU2l6ZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY2hhclNpemVTZXJ2aWNlOiBJQ2hhclNpemVTZXJ2aWNlXG4gICkge1xuICB9XG5cbiAgcHVibGljIGdldENvb3JkcyhldmVudDoge2NsaWVudFg6IG51bWJlciwgY2xpZW50WTogbnVtYmVyfSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGNvbENvdW50OiBudW1iZXIsIHJvd0NvdW50OiBudW1iZXIsIGlzU2VsZWN0aW9uPzogYm9vbGVhbik6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBnZXRDb29yZHMoXG4gICAgICB3aW5kb3csXG4gICAgICBldmVudCxcbiAgICAgIGVsZW1lbnQsXG4gICAgICBjb2xDb3VudCxcbiAgICAgIHJvd0NvdW50LFxuICAgICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSxcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aCxcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQsXG4gICAgICBpc1NlbGVjdGlvblxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW91c2VSZXBvcnRDb29yZHMoZXZlbnQ6IE1vdXNlRXZlbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogeyBjb2w6IG51bWJlciwgcm93OiBudW1iZXIsIHg6IG51bWJlciwgeTogbnVtYmVyIH0gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IGdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KHdpbmRvdywgZXZlbnQsIGVsZW1lbnQpO1xuICAgIGlmICghdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29vcmRzWzBdID0gTWF0aC5taW4oTWF0aC5tYXgoY29vcmRzWzBdLCAwKSwgdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGggLSAxKTtcbiAgICBjb29yZHNbMV0gPSBNYXRoLm1pbihNYXRoLm1heChjb29yZHNbMV0sIDApLCB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQgLSAxKTtcbiAgICByZXR1cm4ge1xuICAgICAgY29sOiBNYXRoLmZsb29yKGNvb3Jkc1swXSAvIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aCksXG4gICAgICByb3c6IE1hdGguZmxvb3IoY29vcmRzWzFdIC8gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCksXG4gICAgICB4OiBNYXRoLmZsb29yKGNvb3Jkc1swXSksXG4gICAgICB5OiBNYXRoLmZsb29yKGNvb3Jkc1sxXSlcbiAgICB9O1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUmVuZGVyRGVib3VuY2VyV2l0aENhbGxiYWNrIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ29yZUJyb3dzZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbi8qKlxuICogRGVib3VuY2VzIGNhbGxzIHRvIHJlbmRlciB0ZXJtaW5hbCByb3dzIHVzaW5nIGFuaW1hdGlvbiBmcmFtZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZW5kZXJEZWJvdW5jZXIgaW1wbGVtZW50cyBJUmVuZGVyRGVib3VuY2VyV2l0aENhbGxiYWNrIHtcbiAgcHJpdmF0ZSBfcm93U3RhcnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcm93RW5kOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FuaW1hdGlvbkZyYW1lOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3JlZnJlc2hDYWxsYmFja3M6IEZyYW1lUmVxdWVzdENhbGxiYWNrW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9yZW5kZXJDYWxsYmFjazogKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKSA9PiB2b2lkLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZVxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9hbmltYXRpb25GcmFtZSkge1xuICAgICAgdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSk7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWRkUmVmcmVzaENhbGxiYWNrKGNhbGxiYWNrOiBGcmFtZVJlcXVlc3RDYWxsYmFjayk6IG51bWJlciB7XG4gICAgdGhpcy5fcmVmcmVzaENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICBpZiAoIXRoaXMuX2FuaW1hdGlvbkZyYW1lKSB7XG4gICAgICB0aGlzLl9hbmltYXRpb25GcmFtZSA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX2lubmVyUmVmcmVzaCgpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FuaW1hdGlvbkZyYW1lO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2gocm93U3RhcnQ6IG51bWJlciB8IHVuZGVmaW5lZCwgcm93RW5kOiBudW1iZXIgfCB1bmRlZmluZWQsIHJvd0NvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb3VudCA9IHJvd0NvdW50O1xuICAgIC8vIEdldCB0aGUgbWluL21heCByb3cgc3RhcnQvZW5kIGZvciB0aGUgYXJnIHZhbHVlc1xuICAgIHJvd1N0YXJ0ID0gcm93U3RhcnQgIT09IHVuZGVmaW5lZCA/IHJvd1N0YXJ0IDogMDtcbiAgICByb3dFbmQgPSByb3dFbmQgIT09IHVuZGVmaW5lZCA/IHJvd0VuZCA6IHRoaXMuX3Jvd0NvdW50IC0gMTtcbiAgICAvLyBTZXQgdGhlIHByb3BlcnRpZXMgdG8gdGhlIHVwZGF0ZWQgdmFsdWVzXG4gICAgdGhpcy5fcm93U3RhcnQgPSB0aGlzLl9yb3dTdGFydCAhPT0gdW5kZWZpbmVkID8gTWF0aC5taW4odGhpcy5fcm93U3RhcnQsIHJvd1N0YXJ0KSA6IHJvd1N0YXJ0O1xuICAgIHRoaXMuX3Jvd0VuZCA9IHRoaXMuX3Jvd0VuZCAhPT0gdW5kZWZpbmVkID8gTWF0aC5tYXgodGhpcy5fcm93RW5kLCByb3dFbmQpIDogcm93RW5kO1xuXG4gICAgaWYgKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9pbm5lclJlZnJlc2goKSk7XG4gIH1cblxuICBwcml2YXRlIF9pbm5lclJlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBNYWtlIHN1cmUgdmFsdWVzIGFyZSBzZXRcbiAgICBpZiAodGhpcy5fcm93U3RhcnQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yb3dFbmQgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl9yb3dDb3VudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9ydW5SZWZyZXNoQ2FsbGJhY2tzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2xhbXAgdmFsdWVzXG4gICAgY29uc3Qgc3RhcnQgPSBNYXRoLm1heCh0aGlzLl9yb3dTdGFydCwgMCk7XG4gICAgY29uc3QgZW5kID0gTWF0aC5taW4odGhpcy5fcm93RW5kLCB0aGlzLl9yb3dDb3VudCAtIDEpO1xuXG4gICAgLy8gUmVzZXQgZGVib3VuY2VyICh0aGlzIGhhcHBlbnMgYmVmb3JlIHJlbmRlciBjYWxsYmFjayBhcyB0aGUgcmVuZGVyIGNvdWxkIHRyaWdnZXIgaXQgYWdhaW4pXG4gICAgdGhpcy5fcm93U3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fcm93RW5kID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gUnVuIHJlbmRlciBjYWxsYmFja1xuICAgIHRoaXMuX3JlbmRlckNhbGxiYWNrKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKTtcbiAgfVxuXG4gIHByaXZhdGUgX3J1blJlZnJlc2hDYWxsYmFja3MoKTogdm9pZCB7XG4gICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiB0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzKSB7XG4gICAgICBjYWxsYmFjaygwKTtcbiAgICB9XG4gICAgdGhpcy5fcmVmcmVzaENhbGxiYWNrcyA9IFtdO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbnRlcmZhY2UgSU5hdmlnYXRvciB7XG4gIHVzZXJBZ2VudDogc3RyaW5nO1xuICBsYW5ndWFnZTogc3RyaW5nO1xuICBwbGF0Zm9ybTogc3RyaW5nO1xufVxuXG4vLyBXZSdyZSBkZWNsYXJpbmcgYSBuYXZpZ2F0b3IgZ2xvYmFsIGhlcmUgYXMgd2UgZXhwZWN0IGl0IGluIGFsbCBydW50aW1lcyAobm9kZSBhbmQgYnJvd3NlciksIGJ1dFxuLy8gd2Ugd2FudCB0aGlzIG1vZHVsZSB0byBsaXZlIGluIGNvbW1vbi5cbmRlY2xhcmUgY29uc3QgbmF2aWdhdG9yOiBJTmF2aWdhdG9yO1xuZGVjbGFyZSBjb25zdCBwcm9jZXNzOiB1bmtub3duO1xuXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAndGl0bGUnIGluIChwcm9jZXNzIGFzIGFueSkpID8gdHJ1ZSA6IGZhbHNlO1xuY29uc3QgdXNlckFnZW50ID0gKGlzTm9kZSkgPyAnbm9kZScgOiBuYXZpZ2F0b3IudXNlckFnZW50O1xuY29uc3QgcGxhdGZvcm0gPSAoaXNOb2RlKSA/ICdub2RlJyA6IG5hdmlnYXRvci5wbGF0Zm9ybTtcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9IHVzZXJBZ2VudC5pbmNsdWRlcygnRmlyZWZveCcpO1xuZXhwb3J0IGNvbnN0IGlzTGVnYWN5RWRnZSA9IHVzZXJBZ2VudC5pbmNsdWRlcygnRWRnZScpO1xuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdCh1c2VyQWdlbnQpO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNhZmFyaVZlcnNpb24oKTogbnVtYmVyIHtcbiAgaWYgKCFpc1NhZmFyaSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIGNvbnN0IG1ham9yVmVyc2lvbiA9IHVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyhcXGQrKS8pO1xuICBpZiAobWFqb3JWZXJzaW9uID09PSBudWxsIHx8IG1ham9yVmVyc2lvbi5sZW5ndGggPCAyKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHBhcnNlSW50KG1ham9yVmVyc2lvblsxXSk7XG59XG5cbi8vIEZpbmQgdGhlIHVzZXJzIHBsYXRmb3JtLiBXZSB1c2UgdGhpcyB0byBpbnRlcnByZXQgdGhlIG1ldGEga2V5XG4vLyBhbmQgSVNPIHRoaXJkIGxldmVsIHNoaWZ0cy5cbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xLzE5ODc3OTI0LzU3NzU5OFxuZXhwb3J0IGNvbnN0IGlzTWFjID0gWydNYWNpbnRvc2gnLCAnTWFjSW50ZWwnLCAnTWFjUFBDJywgJ01hYzY4SyddLmluY2x1ZGVzKHBsYXRmb3JtKTtcbmV4cG9ydCBjb25zdCBpc0lwYWQgPSBwbGF0Zm9ybSA9PT0gJ2lQYWQnO1xuZXhwb3J0IGNvbnN0IGlzSXBob25lID0gcGxhdGZvcm0gPT09ICdpUGhvbmUnO1xuZXhwb3J0IGNvbnN0IGlzV2luZG93cyA9IFsnV2luZG93cycsICdXaW4xNicsICdXaW4zMicsICdXaW5DRSddLmluY2x1ZGVzKHBsYXRmb3JtKTtcbmV4cG9ydCBjb25zdCBpc0xpbnV4ID0gcGxhdGZvcm0uaW5kZXhPZignTGludXgnKSA+PSAwO1xuLy8gTm90ZSB0aGF0IHdoZW4gdGhpcyBpcyB0cnVlLCBpc0xpbnV4IHdpbGwgYWxzbyBiZSB0cnVlLlxuZXhwb3J0IGNvbnN0IGlzQ2hyb21lT1MgPSAvXFxiQ3JPU1xcYi8udGVzdCh1c2VyQWdlbnQpO1xuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgaXNOb2RlIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcblxuaW50ZXJmYWNlIElUYXNrUXVldWUge1xuICAvKipcbiAgICogQWRkcyBhIHRhc2sgdG8gdGhlIHF1ZXVlIHdoaWNoIHdpbGwgcnVuIGluIGEgZnV0dXJlIGlkbGUgY2FsbGJhY2suXG4gICAqIFRvIGF2b2lkIHBlcmNlaXZhYmxlIHN0YWxscyBvbiB0aGUgbWFpbnRocmVhZCwgdGFza3Mgd2l0aCBoZWF2eSB3b3JrbG9hZFxuICAgKiBzaG91bGQgc3BsaXQgdGhlaXIgd29yayBpbnRvIHNtYWxsZXIgcGllY2VzIGFuZCByZXR1cm4gYHRydWVgIHRvIGdldFxuICAgKiBjYWxsZWQgYWdhaW4gdW50aWwgdGhlIHdvcmsgaXMgZG9uZSAob24gZmFsc3kgcmV0dXJuIHZhbHVlKS5cbiAgICovXG4gIGVucXVldWUodGFzazogKCkgPT4gYm9vbGVhbiB8IHZvaWQpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBGbHVzaGVzIHRoZSBxdWV1ZSwgcnVubmluZyBhbGwgcmVtYWluaW5nIHRhc2tzIHN5bmNocm9ub3VzbHkuXG4gICAqL1xuICBmbHVzaCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDbGVhcnMgYW55IHJlbWFpbmluZyB0YXNrcyBmcm9tIHRoZSBxdWV1ZSwgdGhlc2Ugd2lsbCBub3QgYmUgcnVuLlxuICAgKi9cbiAgY2xlYXIoKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIElUYXNrRGVhZGxpbmUge1xuICB0aW1lUmVtYWluaW5nKCk6IG51bWJlcjtcbn1cbnR5cGUgQ2FsbGJhY2tXaXRoRGVhZGxpbmUgPSAoZGVhZGxpbmU6IElUYXNrRGVhZGxpbmUpID0+IHZvaWQ7XG5cbmFic3RyYWN0IGNsYXNzIFRhc2tRdWV1ZSBpbXBsZW1lbnRzIElUYXNrUXVldWUge1xuICBwcml2YXRlIF90YXNrczogKCgpID0+IGJvb2xlYW4gfCB2b2lkKVtdID0gW107XG4gIHByaXZhdGUgX2lkbGVDYWxsYmFjaz86IG51bWJlcjtcbiAgcHJpdmF0ZSBfaSA9IDA7XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IF9yZXF1ZXN0Q2FsbGJhY2soY2FsbGJhY2s6IENhbGxiYWNrV2l0aERlYWRsaW5lKTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgYWJzdHJhY3QgX2NhbmNlbENhbGxiYWNrKGlkZW50aWZpZXI6IG51bWJlcik6IHZvaWQ7XG5cbiAgcHVibGljIGVucXVldWUodGFzazogKCkgPT4gYm9vbGVhbiB8IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl90YXNrcy5wdXNoKHRhc2spO1xuICAgIHRoaXMuX3N0YXJ0KCk7XG4gIH1cblxuICBwdWJsaWMgZmx1c2goKTogdm9pZCB7XG4gICAgd2hpbGUgKHRoaXMuX2kgPCB0aGlzLl90YXNrcy5sZW5ndGgpIHtcbiAgICAgIGlmICghdGhpcy5fdGFza3NbdGhpcy5faV0oKSkge1xuICAgICAgICB0aGlzLl9pKys7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2xlYXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faWRsZUNhbGxiYWNrKSB7XG4gICAgICB0aGlzLl9jYW5jZWxDYWxsYmFjayh0aGlzLl9pZGxlQ2FsbGJhY2spO1xuICAgICAgdGhpcy5faWRsZUNhbGxiYWNrID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICB0aGlzLl9pID0gMDtcbiAgICB0aGlzLl90YXNrcy5sZW5ndGggPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9pZGxlQ2FsbGJhY2spIHtcbiAgICAgIHRoaXMuX2lkbGVDYWxsYmFjayA9IHRoaXMuX3JlcXVlc3RDYWxsYmFjayh0aGlzLl9wcm9jZXNzLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Byb2Nlc3MoZGVhZGxpbmU6IElUYXNrRGVhZGxpbmUpOiB2b2lkIHtcbiAgICB0aGlzLl9pZGxlQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XG4gICAgbGV0IHRhc2tEdXJhdGlvbiA9IDA7XG4gICAgbGV0IGxvbmdlc3RUYXNrID0gMDtcbiAgICBsZXQgbGFzdERlYWRsaW5lUmVtYWluaW5nID0gZGVhZGxpbmUudGltZVJlbWFpbmluZygpO1xuICAgIGxldCBkZWFkbGluZVJlbWFpbmluZyA9IDA7XG4gICAgd2hpbGUgKHRoaXMuX2kgPCB0aGlzLl90YXNrcy5sZW5ndGgpIHtcbiAgICAgIHRhc2tEdXJhdGlvbiA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgaWYgKCF0aGlzLl90YXNrc1t0aGlzLl9pXSgpKSB7XG4gICAgICAgIHRoaXMuX2krKztcbiAgICAgIH1cbiAgICAgIC8vIG90aGVyIHRoYW4gcGVyZm9ybWFuY2Uubm93LCBwZXJmb3JtYW5jZS5ub3cgbWlnaHQgbm90IGJlIHN0YWJsZSAoY2hhbmdlcyBvbiB3YWxsIGNsb2NrXG4gICAgICAvLyBjaGFuZ2VzKSwgdGhpcyBpcyBub3QgYW4gaXNzdWUgaGVyZSBhcyBhIGNsb2NrIGNoYW5nZSBkdXJpbmcgYSBzaG9ydCBydW5uaW5nIHRhc2sgaXMgdmVyeVxuICAgICAgLy8gdW5saWtlbHkgaW4gY2FzZSBpdCBzdGlsbCBoYXBwZW5lZCBhbmQgbGVhZHMgdG8gbmVnYXRpdmUgZHVyYXRpb24sIHNpbXBseSBhc3N1bWUgMSBtc2VjXG4gICAgICB0YXNrRHVyYXRpb24gPSBNYXRoLm1heCgxLCBwZXJmb3JtYW5jZS5ub3coKSAtIHRhc2tEdXJhdGlvbik7XG4gICAgICBsb25nZXN0VGFzayA9IE1hdGgubWF4KHRhc2tEdXJhdGlvbiwgbG9uZ2VzdFRhc2spO1xuICAgICAgLy8gR3Vlc3MgdGhlIGZvbGxvd2luZyB0YXNrIHdpbGwgdGFrZSBhIHNpbWlsYXIgdGltZSB0byB0aGUgbG9uZ2VzdCB0YXNrIGluIHRoaXMgYmF0Y2gsIGFsbG93XG4gICAgICAvLyBhZGRpdGlvbmFsIHJvb20gdG8gdHJ5IGF2b2lkIGV4Y2VlZGluZyB0aGUgZGVhZGxpbmVcbiAgICAgIGRlYWRsaW5lUmVtYWluaW5nID0gZGVhZGxpbmUudGltZVJlbWFpbmluZygpO1xuICAgICAgaWYgKGxvbmdlc3RUYXNrICogMS41ID4gZGVhZGxpbmVSZW1haW5pbmcpIHtcbiAgICAgICAgLy8gV2FybiB3aGVuIHRoZSB0aW1lIGV4Y2VlZGluZyB0aGUgZGVhZGxpbmUgaXMgb3ZlciAyMG1zLCBpZiB0aGlzIGhhcHBlbnMgaW4gcHJhY3RpY2UgdGhlXG4gICAgICAgIC8vIHRhc2sgc2hvdWxkIGJlIHNwbGl0IGludG8gc3ViLXRhc2tzIHRvIGVuc3VyZSB0aGUgVUkgcmVtYWlucyByZXNwb25zaXZlLlxuICAgICAgICBpZiAobGFzdERlYWRsaW5lUmVtYWluaW5nIC0gdGFza0R1cmF0aW9uIDwgLTIwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGB0YXNrIHF1ZXVlIGV4Y2VlZGVkIGFsbG90dGVkIGRlYWRsaW5lIGJ5ICR7TWF0aC5hYnMoTWF0aC5yb3VuZChsYXN0RGVhZGxpbmVSZW1haW5pbmcgLSB0YXNrRHVyYXRpb24pKX1tc2ApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGxhc3REZWFkbGluZVJlbWFpbmluZyA9IGRlYWRsaW5lUmVtYWluaW5nO1xuICAgIH1cbiAgICB0aGlzLmNsZWFyKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHF1ZXVlIG9mIHRoYXQgcnVucyB0YXNrcyBvdmVyIHNldmVyYWwgdGFza3MgdmlhIHNldFRpbWVvdXQsIHRyeWluZyB0byBtYWludGFpbiBhYm92ZSA2MCBmcmFtZXNcbiAqIHBlciBzZWNvbmQuIFRoZSB0YXNrcyB3aWxsIHJ1biBpbiB0aGUgb3JkZXIgdGhleSBhcmUgZW5xdWV1ZWQsIGJ1dCB0aGV5IHdpbGwgcnVuIHNvbWUgdGltZSBsYXRlcixcbiAqIGFuZCBjYXJlIHNob3VsZCBiZSB0YWtlbiB0byBlbnN1cmUgdGhleSdyZSBub24tdXJnZW50IGFuZCB3aWxsIG5vdCBpbnRyb2R1Y2UgcmFjZSBjb25kaXRpb25zLlxuICovXG5leHBvcnQgY2xhc3MgUHJpb3JpdHlUYXNrUXVldWUgZXh0ZW5kcyBUYXNrUXVldWUge1xuICBwcm90ZWN0ZWQgX3JlcXVlc3RDYWxsYmFjayhjYWxsYmFjazogQ2FsbGJhY2tXaXRoRGVhZGxpbmUpOiBudW1iZXIge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKHRoaXMuX2NyZWF0ZURlYWRsaW5lKDE2KSkpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jYW5jZWxDYWxsYmFjayhpZGVudGlmaWVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjbGVhclRpbWVvdXQoaWRlbnRpZmllcik7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVEZWFkbGluZShkdXJhdGlvbjogbnVtYmVyKTogSVRhc2tEZWFkbGluZSB7XG4gICAgY29uc3QgZW5kID0gcGVyZm9ybWFuY2Uubm93KCkgKyBkdXJhdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgdGltZVJlbWFpbmluZzogKCkgPT4gTWF0aC5tYXgoMCwgZW5kIC0gcGVyZm9ybWFuY2Uubm93KCkpXG4gICAgfTtcbiAgfVxufVxuXG5jbGFzcyBJZGxlVGFza1F1ZXVlSW50ZXJuYWwgZXh0ZW5kcyBUYXNrUXVldWUge1xuICBwcm90ZWN0ZWQgX3JlcXVlc3RDYWxsYmFjayhjYWxsYmFjazogSWRsZVJlcXVlc3RDYWxsYmFjayk6IG51bWJlciB7XG4gICAgcmV0dXJuIHJlcXVlc3RJZGxlQ2FsbGJhY2soY2FsbGJhY2spO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jYW5jZWxDYWxsYmFjayhpZGVudGlmaWVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjYW5jZWxJZGxlQ2FsbGJhY2soaWRlbnRpZmllcik7XG4gIH1cbn1cblxuLyoqXG4gKiBBIHF1ZXVlIG9mIHRoYXQgcnVucyB0YXNrcyBvdmVyIHNldmVyYWwgaWRsZSBjYWxsYmFja3MsIHRyeWluZyB0byByZXNwZWN0IHRoZSBpZGxlIGNhbGxiYWNrJ3NcbiAqIGRlYWRsaW5lIGdpdmVuIGJ5IHRoZSBlbnZpcm9ubWVudC4gVGhlIHRhc2tzIHdpbGwgcnVuIGluIHRoZSBvcmRlciB0aGV5IGFyZSBlbnF1ZXVlZCwgYnV0IHRoZXlcbiAqIHdpbGwgcnVuIHNvbWUgdGltZSBsYXRlciwgYW5kIGNhcmUgc2hvdWxkIGJlIHRha2VuIHRvIGVuc3VyZSB0aGV5J3JlIG5vbi11cmdlbnQgYW5kIHdpbGwgbm90XG4gKiBpbnRyb2R1Y2UgcmFjZSBjb25kaXRpb25zLlxuICpcbiAqIFRoaXMgcmV2ZXJ0cyB0byBhIHtAbGluayBQcmlvcml0eVRhc2tRdWV1ZX0gaWYgdGhlIGVudmlyb25tZW50IGRvZXMgbm90IHN1cHBvcnQgaWRsZSBjYWxsYmFja3MuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbmV4cG9ydCBjb25zdCBJZGxlVGFza1F1ZXVlID0gKCFpc05vZGUgJiYgJ3JlcXVlc3RJZGxlQ2FsbGJhY2snIGluIHdpbmRvdykgPyBJZGxlVGFza1F1ZXVlSW50ZXJuYWwgOiBQcmlvcml0eVRhc2tRdWV1ZTtcblxuLyoqXG4gKiBBbiBvYmplY3QgdGhhdCB0cmFja3MgYSBzaW5nbGUgZGVib3VuY2VkIHRhc2sgdGhhdCB3aWxsIHJ1biBvbiB0aGUgbmV4dCBpZGxlIGZyYW1lLiBXaGVuIGNhbGxlZFxuICogbXVsdGlwbGUgdGltZXMsIG9ubHkgdGhlIGxhc3Qgc2V0IHRhc2sgd2lsbCBydW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBEZWJvdW5jZWRJZGxlVGFzayB7XG4gIHByaXZhdGUgX3F1ZXVlOiBJVGFza1F1ZXVlO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3F1ZXVlID0gbmV3IElkbGVUYXNrUXVldWUoKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQodGFzazogKCkgPT4gYm9vbGVhbiB8IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9xdWV1ZS5jbGVhcigpO1xuICAgIHRoaXMuX3F1ZXVlLmVucXVldWUodGFzayk7XG4gIH1cblxuICBwdWJsaWMgZmx1c2goKTogdm9pZCB7XG4gICAgdGhpcy5fcXVldWUuZmx1c2goKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgUmVuZGVyRGVib3VuY2VyIH0gZnJvbSAnYnJvd3Nlci9SZW5kZXJEZWJvdW5jZXInO1xuaW1wb3J0IHsgSVJlbmRlckRlYm91bmNlcldpdGhDYWxsYmFjayB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMsIElSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvc2hhcmVkL1R5cGVzJztcbmltcG9ydCB7IElDaGFyU2l6ZVNlcnZpY2UsIElDb3JlQnJvd3NlclNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlLCBJVGhlbWVTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCBNdXRhYmxlRGlzcG9zYWJsZSwgdG9EaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IERlYm91bmNlZElkbGVUYXNrIH0gZnJvbSAnY29tbW9uL1Rhc2tRdWV1ZSc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJRGVjb3JhdGlvblNlcnZpY2UsIElPcHRpb25zU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuXG5pbnRlcmZhY2UgSVNlbGVjdGlvblN0YXRlIHtcbiAgc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIGVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgY29sdW1uU2VsZWN0TW9kZTogYm9vbGVhbjtcbn1cblxuY29uc3QgZW51bSBDb25zdGFudHMge1xuICBTWU5DSFJPTklaRURfT1VUUFVUX1RJTUVPVVRfTVMgPSAxMDAwXG59XG5cbmV4cG9ydCBjbGFzcyBSZW5kZXJTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElSZW5kZXJTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX3JlbmRlcmVyOiBNdXRhYmxlRGlzcG9zYWJsZTxJUmVuZGVyZXI+ID0gdGhpcy5fcmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlKCkpO1xuICBwcml2YXRlIF9yZW5kZXJEZWJvdW5jZXI6IElSZW5kZXJEZWJvdW5jZXJXaXRoQ2FsbGJhY2s7XG4gIHByaXZhdGUgX3BhdXNlZFJlc2l6ZVRhc2sgPSBuZXcgRGVib3VuY2VkSWRsZVRhc2soKTtcbiAgcHJpdmF0ZSBfb2JzZXJ2ZXJEaXNwb3NhYmxlID0gdGhpcy5fcmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlKCkpO1xuXG4gIHByaXZhdGUgX2lzUGF1c2VkOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX25lZWRzRnVsbFJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaXNOZXh0UmVuZGVyUmVkcmF3T25seTogYm9vbGVhbiA9IHRydWU7XG4gIHByaXZhdGUgX25lZWRzU2VsZWN0aW9uUmVmcmVzaDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9jYW52YXNXaWR0aDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfY2FudmFzSGVpZ2h0OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9zeW5jT3V0cHV0SGFuZGxlcjogU3luY2hyb25pemVkT3V0cHV0SGFuZGxlcjtcbiAgcHJpdmF0ZSBfc2VsZWN0aW9uU3RhdGU6IElTZWxlY3Rpb25TdGF0ZSA9IHtcbiAgICBzdGFydDogdW5kZWZpbmVkLFxuICAgIGVuZDogdW5kZWZpbmVkLFxuICAgIGNvbHVtblNlbGVjdE1vZGU6IGZhbHNlXG4gIH07XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25EaW1lbnNpb25zQ2hhbmdlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SVJlbmRlckRpbWVuc2lvbnM+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25EaW1lbnNpb25zQ2hhbmdlID0gdGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx7IHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyIH0+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlID0gdGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlbmRlciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlbmRlciA9IHRoaXMuX29uUmVuZGVyLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlZnJlc2hSZXF1ZXN0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVmcmVzaFJlcXVlc3QgPSB0aGlzLl9vblJlZnJlc2hSZXF1ZXN0LmV2ZW50O1xuXG4gIHB1YmxpYyBnZXQgZGltZW5zaW9ucygpOiBJUmVuZGVyRGltZW5zaW9ucyB7IHJldHVybiB0aGlzLl9yZW5kZXJlci52YWx1ZSEuZGltZW5zaW9uczsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIsXG4gICAgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlLFxuICAgIEBJQ2hhclNpemVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSxcbiAgICBASUNvcmVTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsXG4gICAgQElEZWNvcmF0aW9uU2VydmljZSBkZWNvcmF0aW9uU2VydmljZTogSURlY29yYXRpb25TZXJ2aWNlLFxuICAgIEBJQnVmZmVyU2VydmljZSBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBASUNvcmVCcm93c2VyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlQnJvd3NlclNlcnZpY2U6IElDb3JlQnJvd3NlclNlcnZpY2UsXG4gICAgQElUaGVtZVNlcnZpY2UgdGhlbWVTZXJ2aWNlOiBJVGhlbWVTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9yZW5kZXJEZWJvdW5jZXIgPSBuZXcgUmVuZGVyRGVib3VuY2VyKChzdGFydCwgZW5kKSA9PiB0aGlzLl9yZW5kZXJSb3dzKHN0YXJ0LCBlbmQpLCB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3JlbmRlckRlYm91bmNlcik7XG5cbiAgICB0aGlzLl9zeW5jT3V0cHV0SGFuZGxlciA9IG5ldyBTeW5jaHJvbml6ZWRPdXRwdXRIYW5kbGVyKFxuICAgICAgdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLFxuICAgICAgdGhpcy5fY29yZVNlcnZpY2UsXG4gICAgICAoKSA9PiB0aGlzLl9mdWxsUmVmcmVzaCgpXG4gICAgKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4gdGhpcy5fc3luY091dHB1dEhhbmRsZXIuZGlzcG9zZSgpKSk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uub25EcHJDaGFuZ2UoKCkgPT4gdGhpcy5oYW5kbGVEZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCkpKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKGJ1ZmZlclNlcnZpY2Uub25SZXNpemUoKCkgPT4gdGhpcy5fZnVsbFJlZnJlc2goKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGJ1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKCgpID0+IHRoaXMuX3JlbmRlcmVyLnZhbHVlPy5jbGVhcigpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKCkgPT4gdGhpcy5faGFuZGxlT3B0aW9uc0NoYW5nZWQoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2NoYXJTaXplU2VydmljZS5vbkNoYXJTaXplQ2hhbmdlKCgpID0+IHRoaXMuaGFuZGxlQ2hhclNpemVDaGFuZ2VkKCkpKTtcblxuICAgIC8vIERvIGEgZnVsbCByZWZyZXNoIHdoZW5ldmVyIGFueSBkZWNvcmF0aW9uIGlzIGFkZGVkIG9yIHJlbW92ZWQuIFRoaXMgbWF5IG5vdCBhY3R1YWxseSByZXN1bHRcbiAgICAvLyBpbiBjaGFuZ2VzIGJ1dCBzaW5jZSBkZWNvcmF0aW9ucyBzaG91bGQgYmUgdXNlZCBzcGFyaW5nbHkgb3IgYWRkZWQvcmVtb3ZlZCBhbGwgaW4gdGhlIHNhbWVcbiAgICAvLyBmcmFtZSB0aGlzIHNob3VsZCBoYXZlIG1pbmltYWwgcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgIHRoaXMuX3JlZ2lzdGVyKGRlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKCkgPT4gdGhpcy5fZnVsbFJlZnJlc2goKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGRlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlbW92ZWQoKCkgPT4gdGhpcy5fZnVsbFJlZnJlc2goKSkpO1xuXG4gICAgLy8gQ2xlYXIgdGhlIHJlbmRlcmVyIHdoZW4gdGhlIGEgY2hhbmdlIHRoYXQgY291bGQgYWZmZWN0IGdseXBocyBvY2N1cnNcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vbk11bHRpcGxlT3B0aW9uQ2hhbmdlKFtcbiAgICAgICdjdXN0b21HbHlwaHMnLFxuICAgICAgJ2RyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJyxcbiAgICAgICdsZXR0ZXJTcGFjaW5nJyxcbiAgICAgICdsaW5lSGVpZ2h0JyxcbiAgICAgICdmb250RmFtaWx5JyxcbiAgICAgICdmb250U2l6ZScsXG4gICAgICAnZm9udFdlaWdodCcsXG4gICAgICAnZm9udFdlaWdodEJvbGQnLFxuICAgICAgJ21pbmltdW1Db250cmFzdFJhdGlvJyxcbiAgICAgICdyZXNjYWxlT3ZlcmxhcHBpbmdHbHlwaHMnXG4gICAgXSwgKCkgPT4ge1xuICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgdGhpcy5oYW5kbGVSZXNpemUoYnVmZmVyU2VydmljZS5jb2xzLCBidWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgICAgdGhpcy5fZnVsbFJlZnJlc2goKTtcbiAgICB9KSk7XG5cbiAgICAvLyBSZWZyZXNoIHRoZSBjdXJzb3IgbGluZSB3aGVuIHRoZSBjdXJzb3IgY2hhbmdlc1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoW1xuICAgICAgJ2N1cnNvckJsaW5rJyxcbiAgICAgICdjdXJzb3JTdHlsZSdcbiAgICBdLCAoKSA9PiB0aGlzLnJlZnJlc2hSb3dzKGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnksIGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnksIHRydWUpKSk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0aGVtZVNlcnZpY2Uub25DaGFuZ2VDb2xvcnMoKCkgPT4gdGhpcy5fZnVsbFJlZnJlc2goKSkpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXJJbnRlcnNlY3Rpb25PYnNlcnZlcih0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LCBzY3JlZW5FbGVtZW50KTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uub25XaW5kb3dDaGFuZ2UoKHcpID0+IHRoaXMuX3JlZ2lzdGVySW50ZXJzZWN0aW9uT2JzZXJ2ZXIodywgc2NyZWVuRWxlbWVudCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZ2lzdGVySW50ZXJzZWN0aW9uT2JzZXJ2ZXIodzogV2luZG93ICYgdHlwZW9mIGdsb2JhbFRoaXMsIHNjcmVlbkVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gRGV0ZWN0IHdoZXRoZXIgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgaXMgZGV0ZWN0ZWQgYW5kIGVuYWJsZSByZW5kZXJlciBwYXVzZVxuICAgIC8vIGFuZCByZXN1bWUgYmFzZWQgb24gdGVybWluYWwgdmlzaWJpbGl0eSBpZiBzb1xuICAgIGlmICgnSW50ZXJzZWN0aW9uT2JzZXJ2ZXInIGluIHcpIHtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IHcuSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoZSA9PiB0aGlzLl9oYW5kbGVJbnRlcnNlY3Rpb25DaGFuZ2UoZVtlLmxlbmd0aCAtIDFdKSwgeyB0aHJlc2hvbGQ6IDAgfSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKHNjcmVlbkVsZW1lbnQpO1xuICAgICAgdGhpcy5fb2JzZXJ2ZXJEaXNwb3NhYmxlLnZhbHVlID0gdG9EaXNwb3NhYmxlKCgpID0+IG9ic2VydmVyLmRpc2Nvbm5lY3QoKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlSW50ZXJzZWN0aW9uQ2hhbmdlKGVudHJ5OiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5KTogdm9pZCB7XG4gICAgdGhpcy5faXNQYXVzZWQgPSBlbnRyeS5pc0ludGVyc2VjdGluZyA9PT0gdW5kZWZpbmVkID8gKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID09PSAwKSA6ICFlbnRyeS5pc0ludGVyc2VjdGluZztcblxuICAgIC8vIFRlcm1pbmFsIHdhcyBoaWRkZW4gb24gb3BlblxuICAgIGlmICghdGhpcy5faXNQYXVzZWQgJiYgIXRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUpIHtcbiAgICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9pc1BhdXNlZCAmJiB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoKSB7XG4gICAgICB0aGlzLl9wYXVzZWRSZXNpemVUYXNrLmZsdXNoKCk7XG4gICAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlZnJlc2hSb3dzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBpc1JlZHJhd09ubHk6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9pc1BhdXNlZCkge1xuICAgICAgdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zeW5jaHJvbml6ZWRPdXRwdXQpIHtcbiAgICAgIHRoaXMuX3N5bmNPdXRwdXRIYW5kbGVyLmJ1ZmZlclJvd3Moc3RhcnQsIGVuZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyZWQgPSB0aGlzLl9zeW5jT3V0cHV0SGFuZGxlci5mbHVzaCgpO1xuICAgIGlmIChidWZmZXJlZCkge1xuICAgICAgc3RhcnQgPSBNYXRoLm1pbihzdGFydCwgYnVmZmVyZWQuc3RhcnQpO1xuICAgICAgZW5kID0gTWF0aC5tYXgoZW5kLCBidWZmZXJlZC5lbmQpO1xuICAgIH1cblxuICAgIGlmICghaXNSZWRyYXdPbmx5KSB7XG4gICAgICB0aGlzLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlckRlYm91bmNlci5yZWZyZXNoKHN0YXJ0LCBlbmQsIHRoaXMuX3Jvd0NvdW50KTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2tpcCByZW5kZXJpbmcgaWYgc3luY2hyb25pemVkIG91dHB1dCBtb2RlIGlzIGVuYWJsZWQuIFRoaXMgY2hlY2sgbXVzdCBoYXBwZW4gaGVyZVxuICAgIC8vIChpbiBhZGRpdGlvbiB0byByZWZyZXNoUm93cykgdG8gaGFuZGxlIHJlbmRlcnMgdGhhdCB3ZXJlIHF1ZXVlZCBiZWZvcmUgdGhlIG1vZGUgd2FzIGVuYWJsZWQuXG4gICAgaWYgKHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zeW5jaHJvbml6ZWRPdXRwdXQpIHtcbiAgICAgIHRoaXMuX3N5bmNPdXRwdXRIYW5kbGVyLmJ1ZmZlclJvd3Moc3RhcnQsIGVuZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2luY2UgdGhpcyBpcyBkZWJvdW5jZWQsIGEgcmVzaXplIGV2ZW50IGNvdWxkIGhhdmUgaGFwcGVuZWQgYmV0d2VlbiB0aGUgdGltZSBhIHJlZnJlc2ggd2FzXG4gICAgLy8gcmVxdWVzdGVkIGFuZCB3aGVuIHRoaXMgdHJpZ2dlcnMuIENsYW1wIHRoZSB2YWx1ZXMgb2Ygc3RhcnQgYW5kIGVuZCB0byBlbnN1cmUgdGhleSdyZSB2YWxpZFxuICAgIC8vIGdpdmVuIHRoZSBjdXJyZW50IHZpZXdwb3J0IHN0YXRlLlxuICAgIHN0YXJ0ID0gTWF0aC5taW4oc3RhcnQsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gICAgZW5kID0gTWF0aC5taW4oZW5kLCB0aGlzLl9yb3dDb3VudCAtIDEpO1xuXG4gICAgLy8gUmVuZGVyXG4gICAgdGhpcy5fcmVuZGVyZXIudmFsdWUucmVuZGVyUm93cyhzdGFydCwgZW5kKTtcblxuICAgIC8vIFVwZGF0ZSBzZWxlY3Rpb24gaWYgbmVlZGVkXG4gICAgaWYgKHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCkge1xuICAgICAgdGhpcy5fcmVuZGVyZXIudmFsdWUuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydCwgdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kLCB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlKTtcbiAgICAgIHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEZpcmUgcmVuZGVyIGV2ZW50IG9ubHkgaWYgaXQgd2FzIG5vdCBhIHJlZHJhd1xuICAgIGlmICghdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seSkge1xuICAgICAgdGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmZpcmUoeyBzdGFydCwgZW5kIH0pO1xuICAgIH1cbiAgICB0aGlzLl9vblJlbmRlci5maXJlKHsgc3RhcnQsIGVuZCB9KTtcbiAgICB0aGlzLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5ID0gdHJ1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yb3dDb3VudCA9IHJvd3M7XG4gICAgdGhpcy5fZmlyZU9uQ2FudmFzUmVzaXplKCk7XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVPcHRpb25zQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVmcmVzaFJvd3MoMCwgdGhpcy5fcm93Q291bnQgLSAxKTtcbiAgICB0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIERvbid0IGZpcmUgdGhlIGV2ZW50IGlmIHRoZSBkaW1lbnNpb25zIGhhdmVuJ3QgY2hhbmdlZFxuICAgIGlmICh0aGlzLl9yZW5kZXJlci52YWx1ZS5kaW1lbnNpb25zLmNzcy5jYW52YXMud2lkdGggPT09IHRoaXMuX2NhbnZhc1dpZHRoICYmIHRoaXMuX3JlbmRlcmVyLnZhbHVlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQgPT09IHRoaXMuX2NhbnZhc0hlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9vbkRpbWVuc2lvbnNDaGFuZ2UuZmlyZSh0aGlzLl9yZW5kZXJlci52YWx1ZS5kaW1lbnNpb25zKTtcbiAgfVxuXG4gIHB1YmxpYyBoYXNSZW5kZXJlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLl9yZW5kZXJlci52YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRSZW5kZXJlcihyZW5kZXJlcjogSVJlbmRlcmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIudmFsdWUgPSByZW5kZXJlcjtcbiAgICAvLyBJZiB0aGUgdmFsdWUgd2FzIG5vdCBzZXQsIHRoZSB0ZXJtaW5hbCBpcyBiZWluZyBkaXNwb3NlZCBzbyBpZ25vcmUgaXRcbiAgICBpZiAodGhpcy5fcmVuZGVyZXIudmFsdWUpIHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyLnZhbHVlLm9uUmVxdWVzdFJlZHJhdyhlID0+IHRoaXMucmVmcmVzaFJvd3MoZS5zdGFydCwgZS5lbmQsIHRydWUpKTtcblxuICAgICAgLy8gRm9yY2UgYSByZWZyZXNoXG4gICAgICB0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2ggPSB0cnVlO1xuICAgICAgdGhpcy5fZnVsbFJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWRkUmVmcmVzaENhbGxiYWNrKGNhbGxiYWNrOiBGcmFtZVJlcXVlc3RDYWxsYmFjayk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlckRlYm91bmNlci5hZGRSZWZyZXNoQ2FsbGJhY2soY2FsbGJhY2spO1xuICB9XG5cbiAgcHJpdmF0ZSBfZnVsbFJlZnJlc2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzUGF1c2VkKSB7XG4gICAgICB0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWZyZXNoUm93cygwLCB0aGlzLl9yb3dDb3VudCAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjbGVhclRleHR1cmVBdGxhcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlcmVyLnZhbHVlLmNsZWFyVGV4dHVyZUF0bGFzPy4oKTtcbiAgICB0aGlzLl9mdWxsUmVmcmVzaCgpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZURldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTogdm9pZCB7XG4gICAgLy8gRm9yY2UgY2hhciBzaXplIG1lYXN1cmVtZW50IGFzIERvbU1lYXN1cmVTdHJhdGVneShnZXRCb3VuZGluZ0NsaWVudFJlY3QpIGlzIG5vdCBzdGFibGVcbiAgICAvLyB3aGVuIGRldmljZVBpeGVsUmF0aW8gY2hhbmdlc1xuICAgIHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCk7XG5cbiAgICBpZiAoIXRoaXMuX3JlbmRlcmVyLnZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlcmVyLnZhbHVlLmhhbmRsZURldmljZVBpeGVsUmF0aW9DaGFuZ2UoKTtcbiAgICB0aGlzLnJlZnJlc2hSb3dzKDAsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlUmVzaXplKGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJlci52YWx1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5faXNQYXVzZWQpIHtcbiAgICAgIHRoaXMuX3BhdXNlZFJlc2l6ZVRhc2suc2V0KCgpID0+IHRoaXMuX3JlbmRlcmVyLnZhbHVlPy5oYW5kbGVSZXNpemUoY29scywgcm93cykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW5kZXJlci52YWx1ZS5oYW5kbGVSZXNpemUoY29scywgcm93cyk7XG4gICAgfVxuICAgIHRoaXMuX2Z1bGxSZWZyZXNoKCk7XG4gIH1cblxuICAvLyBUT0RPOiBJcyB0aGlzIHVzZWZ1bCB3aGVuIHdlIGhhdmUgb25SZXNpemU/XG4gIHB1YmxpYyBoYW5kbGVDaGFyU2l6ZUNoYW5nZWQoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIudmFsdWU/LmhhbmRsZUNoYXJTaXplQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUJsdXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIudmFsdWU/LmhhbmRsZUJsdXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVGb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlRm9jdXMoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVTZWxlY3Rpb25DaGFuZ2VkKHN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkLCBlbmQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGNvbHVtblNlbGVjdE1vZGU6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZCA9IGVuZDtcbiAgICB0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlID0gY29sdW1uU2VsZWN0TW9kZTtcbiAgICB0aGlzLl9yZW5kZXJlci52YWx1ZT8uaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChzdGFydCwgZW5kLCBjb2x1bW5TZWxlY3RNb2RlKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVDdXJzb3JNb3ZlKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlcmVyLnZhbHVlPy5oYW5kbGVDdXJzb3JNb3ZlKCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVuZGVyZXIudmFsdWU/LmNsZWFyKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBCdWZmZXJzIHJvdyByZWZyZXNoIHJlcXVlc3RzIGR1cmluZyBzeW5jaHJvbml6ZWQgb3V0cHV0IG1vZGUgKERFQyBtb2RlIDIwMjYpLlxuICogV2hlbiB0aGUgbW9kZSBpcyBkaXNhYmxlZCwgdGhlIGFjY3VtdWxhdGVkIHJvdyByYW5nZSBpcyBmbHVzaGVkIGZvciByZW5kZXJpbmcuXG4gKiBBIHNhZmV0eSB0aW1lb3V0IGVuc3VyZXMgcmVuZGVyaW5nIG9jY3VycyBldmVuIGlmIHRoZSBlbmQgc2VxdWVuY2UgaXMgbm90IHJlY2VpdmVkLlxuICovXG5jbGFzcyBTeW5jaHJvbml6ZWRPdXRwdXRIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfc3RhcnQ6IG51bWJlciA9IDA7XG4gIHByaXZhdGUgX2VuZDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9pc0J1ZmZlcmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX29uVGltZW91dDogKCkgPT4gdm9pZFxuICApIHt9XG5cbiAgcHVibGljIGJ1ZmZlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzQnVmZmVyaW5nKSB7XG4gICAgICB0aGlzLl9zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5fZW5kID0gZW5kO1xuICAgICAgdGhpcy5faXNCdWZmZXJpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdGFydCA9IE1hdGgubWluKHRoaXMuX3N0YXJ0LCBzdGFydCk7XG4gICAgICB0aGlzLl9lbmQgPSBNYXRoLm1heCh0aGlzLl9lbmQsIGVuZCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3RpbWVvdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fdGltZW91dCA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zeW5jaHJvbml6ZWRPdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fb25UaW1lb3V0KCk7XG4gICAgICB9LCBDb25zdGFudHMuU1lOQ0hST05JWkVEX09VVFBVVF9USU1FT1VUX01TKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZmx1c2goKTogeyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9IHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5fdGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9pc0J1ZmZlcmluZykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB7IHN0YXJ0OiB0aGlzLl9zdGFydCwgZW5kOiB0aGlzLl9lbmQgfTtcbiAgICB0aGlzLl9pc0J1ZmZlcmluZyA9IGZhbHNlO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fdGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBDMCB9IGZyb20gJ2NvbW1vbi9kYXRhL0VzY2FwZVNlcXVlbmNlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmNvbnN0IGVudW0gRGlyZWN0aW9uIHtcbiAgVVAgPSAnQScsXG4gIERPV04gPSAnQicsXG4gIFJJR0hUID0gJ0MnLFxuICBMRUZUID0gJ0QnXG59XG5cbi8qKlxuICogQ29uY2F0ZW5hdGVzIGFsbCB0aGUgYXJyb3cgc2VxdWVuY2VzIHRvZ2V0aGVyLlxuICogUmVzZXRzIHRoZSBzdGFydGluZyByb3cgdG8gYW4gdW53cmFwcGVkIHJvdywgbW92ZXMgdG8gdGhlIHJlcXVlc3RlZCByb3csXG4gKiB0aGVuIG1vdmVzIHRvIHJlcXVlc3RlZCBjb2wuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlVG9DZWxsU2VxdWVuY2UodGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGNvbnN0IHN0YXJ0WCA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLng7XG4gIGNvbnN0IHN0YXJ0WSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnk7XG5cbiAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIHRyeSB0byBuYXZpZ2F0ZSBiZXR3ZWVuIHJvd3NcbiAgaWYgKCFidWZmZXJTZXJ2aWNlLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKSB7XG4gICAgcmV0dXJuIHJlc2V0U3RhcnRpbmdSb3coc3RhcnRYLCBzdGFydFksIHRhcmdldFgsIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKSArXG4gICAgICBtb3ZlVG9SZXF1ZXN0ZWRSb3coc3RhcnRZLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikgK1xuICAgICAgbW92ZVRvUmVxdWVzdGVkQ29sKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcik7XG4gIH1cblxuICAvLyBPbmx5IG1vdmUgaG9yaXpvbnRhbGx5IGZvciB0aGUgbm9ybWFsIGJ1ZmZlclxuICBsZXQgZGlyZWN0aW9uO1xuICBpZiAoc3RhcnRZID09PSB0YXJnZXRZKSB7XG4gICAgZGlyZWN0aW9uID0gc3RhcnRYID4gdGFyZ2V0WCA/IERpcmVjdGlvbi5MRUZUIDogRGlyZWN0aW9uLlJJR0hUO1xuICAgIHJldHVybiByZXBlYXQoTWF0aC5hYnMoc3RhcnRYIC0gdGFyZ2V0WCksIHNlcXVlbmNlKGRpcmVjdGlvbiwgYXBwbGljYXRpb25DdXJzb3IpKTtcbiAgfVxuICBkaXJlY3Rpb24gPSBzdGFydFkgPiB0YXJnZXRZID8gRGlyZWN0aW9uLkxFRlQgOiBEaXJlY3Rpb24uUklHSFQ7XG4gIGNvbnN0IHJvd0RpZmZlcmVuY2UgPSBNYXRoLmFicyhzdGFydFkgLSB0YXJnZXRZKTtcbiAgY29uc3QgY2VsbHNUb01vdmUgPSBjb2xzRnJvbVJvd0VuZChzdGFydFkgPiB0YXJnZXRZID8gdGFyZ2V0WCA6IHN0YXJ0WCwgYnVmZmVyU2VydmljZSkgK1xuICAgIChyb3dEaWZmZXJlbmNlIC0gMSkgKiBidWZmZXJTZXJ2aWNlLmNvbHMgKyAxIC8qIHdyYXAgYXJvdW5kIDEgcm93ICovICtcbiAgICBjb2xzRnJvbVJvd0JlZ2lubmluZyhzdGFydFkgPiB0YXJnZXRZID8gc3RhcnRYIDogdGFyZ2V0WCwgYnVmZmVyU2VydmljZSk7XG4gIHJldHVybiByZXBlYXQoY2VsbHNUb01vdmUsIHNlcXVlbmNlKGRpcmVjdGlvbiwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBudW1iZXIgb2YgY29scyBmcm9tIGEgcm93IGJlZ2lubmluZyB0byBhIGNvbC5cbiAqL1xuZnVuY3Rpb24gY29sc0Zyb21Sb3dCZWdpbm5pbmcoY3Vyclg6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UpOiBudW1iZXIge1xuICByZXR1cm4gY3VyclggLSAxO1xufVxuXG4vKipcbiAqIEZpbmQgdGhlIG51bWJlciBvZiBjb2xzIGZyb20gYSBjb2wgdG8gcm93IGVuZC5cbiAqL1xuZnVuY3Rpb24gY29sc0Zyb21Sb3dFbmQoY3Vyclg6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UpOiBudW1iZXIge1xuICByZXR1cm4gYnVmZmVyU2VydmljZS5jb2xzIC0gY3Vyclg7XG59XG5cbi8qKlxuICogSWYgdGhlIGluaXRpYWwgcG9zaXRpb24gb2YgdGhlIGN1cnNvciBpcyBvbiBhIHJvdyB0aGF0IGlzIHdyYXBwZWQsIG1vdmUgdGhlXG4gKiBjdXJzb3IgdXAgdG8gdGhlIGZpcnN0IHJvdyB0aGF0IGlzIG5vdCB3cmFwcGVkIHRvIGhhdmUgYWNjdXJhdGUgdmVydGljYWxcbiAqIHBvc2l0aW9uaW5nLlxuICovXG5mdW5jdGlvbiByZXNldFN0YXJ0aW5nUm93KHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGlmIChtb3ZlVG9SZXF1ZXN0ZWRSb3coc3RhcnRZLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcikubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIHJldHVybiByZXBlYXQoYnVmZmVyTGluZShcbiAgICBzdGFydFgsIHN0YXJ0WSwgc3RhcnRYLFxuICAgIHN0YXJ0WSAtIHdyYXBwZWRSb3dzRm9yUm93KHN0YXJ0WSwgYnVmZmVyU2VydmljZSksIGZhbHNlLCBidWZmZXJTZXJ2aWNlXG4gICkubGVuZ3RoLCBzZXF1ZW5jZShEaXJlY3Rpb24uTEVGVCwgYXBwbGljYXRpb25DdXJzb3IpKTtcbn1cblxuLyoqXG4gKiBVc2luZyB0aGUgcmVzZXQgc3RhcnRpbmcgYW5kIGVuZGluZyByb3csIG1vdmUgdG8gdGhlIHJlcXVlc3RlZCByb3csXG4gKiBpZ25vcmluZyB3cmFwcGVkIHJvd3NcbiAqL1xuZnVuY3Rpb24gbW92ZVRvUmVxdWVzdGVkUm93KHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGNvbnN0IHN0YXJ0Um93ID0gc3RhcnRZIC0gd3JhcHBlZFJvd3NGb3JSb3coc3RhcnRZLCBidWZmZXJTZXJ2aWNlKTtcbiAgY29uc3QgZW5kUm93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KHRhcmdldFksIGJ1ZmZlclNlcnZpY2UpO1xuXG4gIGNvbnN0IHJvd3NUb01vdmUgPSBNYXRoLmFicyhzdGFydFJvdyAtIGVuZFJvdykgLSB3cmFwcGVkUm93c0NvdW50KHN0YXJ0WSwgdGFyZ2V0WSwgYnVmZmVyU2VydmljZSk7XG5cbiAgcmV0dXJuIHJlcGVhdChyb3dzVG9Nb3ZlLCBzZXF1ZW5jZSh2ZXJ0aWNhbERpcmVjdGlvbihzdGFydFksIHRhcmdldFkpLCBhcHBsaWNhdGlvbkN1cnNvcikpO1xufVxuXG4vKipcbiAqIE1vdmUgdG8gdGhlIHJlcXVlc3RlZCBjb2wgb24gdGhlIGVuZGluZyByb3dcbiAqL1xuZnVuY3Rpb24gbW92ZVRvUmVxdWVzdGVkQ29sKHN0YXJ0WDogbnVtYmVyLCBzdGFydFk6IG51bWJlciwgdGFyZ2V0WDogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcjogYm9vbGVhbik6IHN0cmluZyB7XG4gIGxldCBzdGFydFJvdztcbiAgaWYgKG1vdmVUb1JlcXVlc3RlZFJvdyhzdGFydFksIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKS5sZW5ndGggPiAwKSB7XG4gICAgc3RhcnRSb3cgPSB0YXJnZXRZIC0gd3JhcHBlZFJvd3NGb3JSb3codGFyZ2V0WSwgYnVmZmVyU2VydmljZSk7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnRSb3cgPSBzdGFydFk7XG4gIH1cblxuICBjb25zdCBlbmRSb3cgPSB0YXJnZXRZO1xuICBjb25zdCBkaXJlY3Rpb24gPSBob3Jpem9udGFsRGlyZWN0aW9uKHN0YXJ0WCwgc3RhcnRZLCB0YXJnZXRYLCB0YXJnZXRZLCBidWZmZXJTZXJ2aWNlLCBhcHBsaWNhdGlvbkN1cnNvcik7XG5cbiAgcmV0dXJuIHJlcGVhdChidWZmZXJMaW5lKFxuICAgIHN0YXJ0WCwgc3RhcnRSb3csIHRhcmdldFgsIGVuZFJvdyxcbiAgICBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5SSUdIVCwgYnVmZmVyU2VydmljZVxuICApLmxlbmd0aCwgc2VxdWVuY2UoZGlyZWN0aW9uLCBhcHBsaWNhdGlvbkN1cnNvcikpO1xufVxuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zXG4gKi9cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2Ygd3JhcHBlZCByb3dzIGJldHdlZW4gdGhlIHVud3JhcHBlZCBzdGFydGluZyBhbmRcbiAqIGVuZGluZyByb3dzLiBUaGVzZSByb3dzIG5lZWQgdG8gaWdub3JlZCBzaW5jZSB0aGUgY3Vyc29yIHNraXBzIG92ZXIgdGhlbS5cbiAqL1xuZnVuY3Rpb24gd3JhcHBlZFJvd3NDb3VudChzdGFydFk6IG51bWJlciwgdGFyZ2V0WTogbnVtYmVyLCBidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSk6IG51bWJlciB7XG4gIGxldCB3cmFwcGVkUm93cyA9IDA7XG4gIGNvbnN0IHN0YXJ0Um93ID0gc3RhcnRZIC0gd3JhcHBlZFJvd3NGb3JSb3coc3RhcnRZLCBidWZmZXJTZXJ2aWNlKTtcbiAgY29uc3QgZW5kUm93ID0gdGFyZ2V0WSAtIHdyYXBwZWRSb3dzRm9yUm93KHRhcmdldFksIGJ1ZmZlclNlcnZpY2UpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5hYnMoc3RhcnRSb3cgLSBlbmRSb3cpOyBpKyspIHtcbiAgICBjb25zdCBkaXJlY3Rpb24gPSB2ZXJ0aWNhbERpcmVjdGlvbihzdGFydFksIHRhcmdldFkpID09PSBEaXJlY3Rpb24uVVAgPyAtMSA6IDE7XG4gICAgY29uc3QgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChzdGFydFJvdyArIChkaXJlY3Rpb24gKiBpKSk7XG4gICAgaWYgKGxpbmU/LmlzV3JhcHBlZCkge1xuICAgICAgd3JhcHBlZFJvd3MrKztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gd3JhcHBlZFJvd3M7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbnVtYmVyIG9mIHdyYXBwZWQgcm93cyB0aGF0IG1ha2UgdXAgYSBnaXZlbiByb3cuXG4gKiBAcGFyYW0gY3VycmVudFJvdyBUaGUgcm93IHRvIGRldGVybWluZSBob3cgbWFueSB3cmFwcGVkIHJvd3MgbWFrZSBpdCB1cFxuICovXG5mdW5jdGlvbiB3cmFwcGVkUm93c0ZvclJvdyhjdXJyZW50Um93OiBudW1iZXIsIGJ1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlKTogbnVtYmVyIHtcbiAgbGV0IHJvd0NvdW50ID0gMDtcbiAgbGV0IGxpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoY3VycmVudFJvdyk7XG4gIGxldCBsaW5lV3JhcHMgPSBsaW5lPy5pc1dyYXBwZWQ7XG5cbiAgd2hpbGUgKGxpbmVXcmFwcyAmJiBjdXJyZW50Um93ID49IDAgJiYgY3VycmVudFJvdyA8IGJ1ZmZlclNlcnZpY2Uucm93cykge1xuICAgIHJvd0NvdW50Kys7XG4gICAgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCgtLWN1cnJlbnRSb3cpO1xuICAgIGxpbmVXcmFwcyA9IGxpbmU/LmlzV3JhcHBlZDtcbiAgfVxuXG4gIHJldHVybiByb3dDb3VudDtcbn1cblxuLyoqXG4gKiBEaXJlY3Rpb24gZGV0ZXJtaW5lcnNcbiAqL1xuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHJpZ2h0IG9yIGxlZnQgYXJyb3cgaXMgbmVlZGVkXG4gKi9cbmZ1bmN0aW9uIGhvcml6b250YWxEaXJlY3Rpb24oc3RhcnRYOiBudW1iZXIsIHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRYOiBudW1iZXIsIHRhcmdldFk6IG51bWJlciwgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogRGlyZWN0aW9uIHtcbiAgbGV0IHN0YXJ0Um93O1xuICBpZiAobW92ZVRvUmVxdWVzdGVkUm93KHRhcmdldFgsIHRhcmdldFksIGJ1ZmZlclNlcnZpY2UsIGFwcGxpY2F0aW9uQ3Vyc29yKS5sZW5ndGggPiAwKSB7XG4gICAgc3RhcnRSb3cgPSB0YXJnZXRZIC0gd3JhcHBlZFJvd3NGb3JSb3codGFyZ2V0WSwgYnVmZmVyU2VydmljZSk7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnRSb3cgPSBzdGFydFk7XG4gIH1cblxuICBpZiAoKHN0YXJ0WCA8IHRhcmdldFggJiZcbiAgICBzdGFydFJvdyA8PSB0YXJnZXRZKSB8fCAvLyBkb3duL3JpZ2h0IG9yIHNhbWUgeS9yaWdodFxuICAgIChzdGFydFggPj0gdGFyZ2V0WCAmJlxuICAgIHN0YXJ0Um93IDwgdGFyZ2V0WSkpIHsgIC8vIGRvd24vbGVmdCBvciBzYW1lIHkvbGVmdFxuICAgIHJldHVybiBEaXJlY3Rpb24uUklHSFQ7XG4gIH1cbiAgcmV0dXJuIERpcmVjdGlvbi5MRUZUO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIHVwIG9yIGRvd24gYXJyb3cgaXMgbmVlZGVkXG4gKi9cbmZ1bmN0aW9uIHZlcnRpY2FsRGlyZWN0aW9uKHN0YXJ0WTogbnVtYmVyLCB0YXJnZXRZOiBudW1iZXIpOiBEaXJlY3Rpb24ge1xuICByZXR1cm4gc3RhcnRZID4gdGFyZ2V0WSA/IERpcmVjdGlvbi5VUCA6IERpcmVjdGlvbi5ET1dOO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgdGhlIHN0cmluZyBvZiBjaGFycyBpbiB0aGUgYnVmZmVyIGZyb20gYSBzdGFydGluZyByb3cgYW5kIGNvbFxuICogdG8gYW4gZW5kaW5nIHJvdyBhbmQgY29sXG4gKiBAcGFyYW0gc3RhcnRDb2wgVGhlIHN0YXJ0aW5nIGNvbHVtbiBwb3NpdGlvblxuICogQHBhcmFtIHN0YXJ0Um93IFRoZSBzdGFydGluZyByb3cgcG9zaXRpb25cbiAqIEBwYXJhbSBlbmRDb2wgVGhlIGVuZGluZyBjb2x1bW4gcG9zaXRpb25cbiAqIEBwYXJhbSBlbmRSb3cgVGhlIGVuZGluZyByb3cgcG9zaXRpb25cbiAqIEBwYXJhbSBmb3J3YXJkIERpcmVjdGlvbiB0byBtb3ZlXG4gKi9cbmZ1bmN0aW9uIGJ1ZmZlckxpbmUoXG4gIHN0YXJ0Q29sOiBudW1iZXIsXG4gIHN0YXJ0Um93OiBudW1iZXIsXG4gIGVuZENvbDogbnVtYmVyLFxuICBlbmRSb3c6IG51bWJlcixcbiAgZm9yd2FyZDogYm9vbGVhbixcbiAgYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2Vcbik6IHN0cmluZyB7XG4gIGxldCBjdXJyZW50Q29sID0gc3RhcnRDb2w7XG4gIGxldCBjdXJyZW50Um93ID0gc3RhcnRSb3c7XG4gIGxldCBidWZmZXJTdHIgPSAnJztcblxuICB3aGlsZSAoKGN1cnJlbnRDb2wgIT09IGVuZENvbCB8fCBjdXJyZW50Um93ICE9PSBlbmRSb3cpICYmXG4gICAgICAgICBjdXJyZW50Um93ID49IDAgJiZcbiAgICAgICAgIGN1cnJlbnRSb3cgPCBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgpIHtcbiAgICBjdXJyZW50Q29sICs9IGZvcndhcmQgPyAxIDogLTE7XG5cbiAgICBpZiAoZm9yd2FyZCAmJiBjdXJyZW50Q29sID4gYnVmZmVyU2VydmljZS5jb2xzIC0gMSkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICAgICApO1xuICAgICAgY3VycmVudENvbCA9IDA7XG4gICAgICBzdGFydENvbCA9IDA7XG4gICAgICBjdXJyZW50Um93Kys7XG4gICAgfSBlbHNlIGlmICghZm9yd2FyZCAmJiBjdXJyZW50Q29sIDwgMCkge1xuICAgICAgYnVmZmVyU3RyICs9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhcbiAgICAgICAgY3VycmVudFJvdywgZmFsc2UsIDAsIHN0YXJ0Q29sICsgMVxuICAgICAgKTtcbiAgICAgIGN1cnJlbnRDb2wgPSBidWZmZXJTZXJ2aWNlLmNvbHMgLSAxO1xuICAgICAgc3RhcnRDb2wgPSBjdXJyZW50Q29sO1xuICAgICAgY3VycmVudFJvdy0tO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWZmZXJTdHIgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoXG4gICAgY3VycmVudFJvdywgZmFsc2UsIHN0YXJ0Q29sLCBjdXJyZW50Q29sXG4gICk7XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyB0aGUgZXNjYXBlIHNlcXVlbmNlIGZvciBjbGlja2luZyBhbiBhcnJvd1xuICogQHBhcmFtIGRpcmVjdGlvbiBUaGUgZGlyZWN0aW9uIHRvIG1vdmVcbiAqL1xuZnVuY3Rpb24gc2VxdWVuY2UoZGlyZWN0aW9uOiBEaXJlY3Rpb24sIGFwcGxpY2F0aW9uQ3Vyc29yOiBib29sZWFuKTogc3RyaW5nIHtcbiAgY29uc3QgbW9kID0gIGFwcGxpY2F0aW9uQ3Vyc29yID8gJ08nIDogJ1snO1xuICByZXR1cm4gQzAuRVNDICsgbW9kICsgZGlyZWN0aW9uO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzdHJpbmcgcmVwZWF0ZWQgYSBnaXZlbiBudW1iZXIgb2YgdGltZXNcbiAqIFBvbHlmaWxsIGZyb20gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL3JlcGVhdFxuICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgdGltZXMgdG8gcmVwZWF0IHRoZSBzdHJpbmdcbiAqIEBwYXJhbSBzdHIgVGhlIHN0cmluZyB0aGF0IGlzIHRvIGJlIHJlcGVhdGVkXG4gKi9cbmZ1bmN0aW9uIHJlcGVhdChjb3VudDogbnVtYmVyLCBzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvdW50ID0gTWF0aC5mbG9vcihjb3VudCk7XG4gIGxldCBycHQgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgcnB0ICs9IHN0cjtcbiAgfVxuICByZXR1cm4gcnB0O1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzZWxlY3Rpb24gd2l0aGluIHRoZSBidWZmZXIuIFRoaXMgbW9kZWwgb25seSBjYXJlcyBhYm91dCBjb2x1bW5cbiAqIGFuZCByb3cgY29vcmRpbmF0ZXMsIG5vdCB3aWRlIGNoYXJhY3RlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25Nb2RlbCB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHNlbGVjdCBhbGwgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIHB1YmxpYyBpc1NlbGVjdEFsbEFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBUaGUgbWluaW1hbCBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbiBmcm9tIHRoZSBzdGFydCBwb3NpdGlvbi4gV2hlbiBkb3VibGVcbiAgICogY2xpY2tpbmcgb24gYSB3b3JkLCB0aGUgd29yZCB3aWxsIGJlIHNlbGVjdGVkIHdoaWNoIG1ha2VzIHRoZSBzZWxlY3Rpb25cbiAgICogc3RhcnQgYXQgdGhlIHN0YXJ0IG9mIHRoZSB3b3JkIGFuZCBtYWtlcyB0aGlzIHZhcmlhYmxlIHRoZSBsZW5ndGguXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnRMZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBbeCwgeV0gcG9zaXRpb24gdGhlIHNlbGVjdGlvbiBlbmRzIGF0LlxuICAgKi9cbiAgcHVibGljIHNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgdGhlIGN1cnJlbnQgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU2VsZWN0aW9uKCk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gc3RhcnQsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gc2VsZWN0IGFsbC5cbiAgICovXG4gIHB1YmxpYyBnZXQgZmluYWxTZWxlY3Rpb25TdGFydCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFswLCAwXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gdGhpcy5zZWxlY3Rpb25FbmQgOiB0aGlzLnNlbGVjdGlvblN0YXJ0O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBmaW5hbCBzZWxlY3Rpb24gZW5kLCB0YWtpbmcgaW50byBjb25zaWRlcmF0aW9uIHNlbGVjdCBhbGwsIGRvdWJsZSBjbGlja1xuICAgKiB3b3JkIHNlbGVjdGlvbiBhbmQgdHJpcGxlIGNsaWNrIGxpbmUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIGdldCBmaW5hbFNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5pc1NlbGVjdEFsbEFjdGl2ZSkge1xuICAgICAgcmV0dXJuIFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlICsgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMV07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgc2VsZWN0aW9uIHN0YXJ0ICsgbGVuZ3RoIGlmIHRoZSBlbmQgZG9lc24ndCBleGlzdCBvciB0aGV5J3JlIHJldmVyc2VkXG4gICAgaWYgKCF0aGlzLnNlbGVjdGlvbkVuZCB8fCB0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpIHtcbiAgICAgIGNvbnN0IHN0YXJ0UGx1c0xlbmd0aCA9IHRoaXMuc2VsZWN0aW9uU3RhcnRbMF0gKyB0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO1xuICAgICAgaWYgKHN0YXJ0UGx1c0xlbmd0aCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAvLyBFbnN1cmUgdGhlIHRyYWlsaW5nIEVPTCBpc24ndCBpbmNsdWRlZCB3aGVuIHRoZSBzZWxlY3Rpb24gZW5kcyBvbiB0aGUgcmlnaHQgZWRnZVxuICAgICAgICBpZiAoc3RhcnRQbHVzTGVuZ3RoICUgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gKyBNYXRoLmZsb29yKHN0YXJ0UGx1c0xlbmd0aCAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykgLSAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCAlIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5zZWxlY3Rpb25TdGFydFsxXSArIE1hdGguZmxvb3Ioc3RhcnRQbHVzTGVuZ3RoIC8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKV07XG4gICAgICB9XG4gICAgICByZXR1cm4gW3N0YXJ0UGx1c0xlbmd0aCwgdGhpcy5zZWxlY3Rpb25TdGFydFsxXV07XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoZSB0aGUgd29yZC9saW5lIGlzIHNlbGVjdGVkIGFmdGVyIGEgZG91YmxlL3RyaXBsZSBjbGlja1xuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKSB7XG4gICAgICAvLyBTZWxlY3QgdGhlIGxhcmdlciBvZiB0aGUgdHdvIHdoZW4gc3RhcnQgYW5kIGVuZCBhcmUgb24gdGhlIHNhbWUgbGluZVxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kWzFdID09PSB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdKSB7XG4gICAgICAgIC8vIEtlZXAgdGhlIHdob2xlIHdyYXBwZWQgd29yZC9saW5lIHNlbGVjdGVkIGlmIHRoZSBjb250ZW50IHdyYXBzIG11bHRpcGxlIGxpbmVzXG4gICAgICAgIGNvbnN0IHN0YXJ0UGx1c0xlbmd0aCA9IHRoaXMuc2VsZWN0aW9uU3RhcnRbMF0gKyB0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoO1xuICAgICAgICBpZiAoc3RhcnRQbHVzTGVuZ3RoID4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICAgICAgcmV0dXJuIFtzdGFydFBsdXNMZW5ndGggJSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gKyBNYXRoLmZsb29yKHN0YXJ0UGx1c0xlbmd0aCAvIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbTWF0aC5tYXgoc3RhcnRQbHVzTGVuZ3RoLCB0aGlzLnNlbGVjdGlvbkVuZFswXSksIHRoaXMuc2VsZWN0aW9uRW5kWzFdXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uRW5kO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VsZWN0aW9uIHN0YXJ0IGFuZCBlbmQgYXJlIHJldmVyc2VkLlxuICAgKi9cbiAgcHVibGljIGFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25TdGFydDtcbiAgICBjb25zdCBlbmQgPSB0aGlzLnNlbGVjdGlvbkVuZDtcbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YXJ0WzFdID4gZW5kWzFdIHx8IChzdGFydFsxXSA9PT0gZW5kWzFdICYmIHN0YXJ0WzBdID4gZW5kWzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGJ1ZmZlciBiZWluZyB0cmltbWVkLCBhZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IHRoZSBidWZmZXIgaXMgYmVpbmcgdHJpbW1lZC5cbiAgICogQHJldHVybnMgV2hldGhlciBhIHJlZnJlc2ggaXMgbmVjZXNzYXJ5LlxuICAgKi9cbiAgcHVibGljIGhhbmRsZVRyaW0oYW1vdW50OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAvLyBBZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgdHJpbW1lZCBhbW91bnQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gLT0gYW1vdW50O1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWxlY3Rpb25FbmQpIHtcbiAgICAgIHRoaXMuc2VsZWN0aW9uRW5kWzFdIC09IGFtb3VudDtcbiAgICB9XG5cbiAgICAvLyBUaGUgc2VsZWN0aW9uIGhhcyBtb3ZlZCBvZmYgdGhlIGJ1ZmZlciwgY2xlYXIgaXQuXG4gICAgaWYgKHRoaXMuc2VsZWN0aW9uRW5kICYmIHRoaXMuc2VsZWN0aW9uRW5kWzFdIDwgMCkge1xuICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHNlbGVjdGlvbiBzdGFydCBpcyB0cmltbWVkLCBlbnN1cmUgdGhlIHN0YXJ0IGNvbHVtbiBpcyAwLlxuICAgIGlmICh0aGlzLnNlbGVjdGlvblN0YXJ0ICYmIHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0gPCAwKSB7XG4gICAgICB0aGlzLnNlbGVjdGlvblN0YXJ0WzFdID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyUmFuZ2UgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZ2VMZW5ndGgocmFuZ2U6IElCdWZmZXJSYW5nZSwgYnVmZmVyQ29sczogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHJhbmdlLnN0YXJ0LnkgPiByYW5nZS5lbmQueSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQnVmZmVyIHJhbmdlIGVuZCAoJHtyYW5nZS5lbmQueH0sICR7cmFuZ2UuZW5kLnl9KSBjYW5ub3QgYmUgYmVmb3JlIHN0YXJ0ICgke3JhbmdlLnN0YXJ0Lnh9LCAke3JhbmdlLnN0YXJ0Lnl9KWApO1xuICB9XG4gIHJldHVybiBidWZmZXJDb2xzICogKHJhbmdlLmVuZC55IC0gcmFuZ2Uuc3RhcnQueSkgKyAocmFuZ2UuZW5kLnggLSByYW5nZS5zdGFydC54ICsgMSk7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQnVmZmVyUmFuZ2UsIElMaW5raWZpZXIyIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBnZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudCB9IGZyb20gJ2Jyb3dzZXIvaW5wdXQvTW91c2UnO1xuaW1wb3J0IHsgbW92ZVRvQ2VsbFNlcXVlbmNlIH0gZnJvbSAnYnJvd3Nlci9pbnB1dC9Nb3ZlVG9DZWxsJztcbmltcG9ydCB7IFNlbGVjdGlvbk1vZGVsIH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vU2VsZWN0aW9uTW9kZWwnO1xuaW1wb3J0IHsgSVNlbGVjdGlvblJlZHJhd1JlcXVlc3RFdmVudCwgSVNlbGVjdGlvblJlcXVlc3RTY3JvbGxMaW5lc0V2ZW50IH0gZnJvbSAnYnJvd3Nlci9zZWxlY3Rpb24vVHlwZXMnO1xuaW1wb3J0IHsgSUNvcmVCcm93c2VyU2VydmljZSwgSU1vdXNlU2VydmljZSwgSVJlbmRlclNlcnZpY2UsIElTZWxlY3Rpb25TZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0ICogYXMgQnJvd3NlciBmcm9tICdjb21tb24vUGxhdGZvcm0nO1xuaW1wb3J0IHsgSUJ1ZmZlckxpbmUsIElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IGdldFJhbmdlTGVuZ3RoIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJSYW5nZSc7XG5pbXBvcnQgeyBDZWxsRGF0YSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQ2VsbERhdGEnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UsIElDb3JlU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5cbi8qKlxuICogVGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIG1vdXNlIG5lZWRzIHRvIGJlIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCBpblxuICogb3JkZXIgdG8gc2Nyb2xsIGF0IHRoZSBtYXhpbXVtIHNwZWVkLlxuICovXG5jb25zdCBEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEID0gNTA7XG5cbi8qKlxuICogVGhlIG1heGltdW0gc2Nyb2xsaW5nIHNwZWVkXG4gKi9cbmNvbnN0IERSQUdfU0NST0xMX01BWF9TUEVFRCA9IDE1O1xuXG4vKipcbiAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGJldHdlZW4gZHJhZyBzY3JvbGwgdXBkYXRlcy5cbiAqL1xuY29uc3QgRFJBR19TQ1JPTExfSU5URVJWQUwgPSA1MDtcblxuLyoqXG4gKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0aGF0IGNhbiBoYXZlIGVsYXBzZWQgZm9yIGFuIGFsdCBjbGljayB0byBtb3ZlIHRoZVxuICogY3Vyc29yLlxuICovXG5jb25zdCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSA9IDUwMDtcblxuY29uc3QgTk9OX0JSRUFLSU5HX1NQQUNFX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG5jb25zdCBBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYID0gbmV3IFJlZ0V4cChOT05fQlJFQUtJTkdfU1BBQ0VfQ0hBUiwgJ2cnKTtcblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgcG9zaXRpb24gb2YgYSB3b3JkIG9uIGEgbGluZS5cbiAqL1xuaW50ZXJmYWNlIElXb3JkUG9zaXRpb24ge1xuICBzdGFydDogbnVtYmVyO1xuICBsZW5ndGg6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBIHNlbGVjdGlvbiBtb2RlLCB0aGlzIGRyaXZlcyBob3cgdGhlIHNlbGVjdGlvbiBiZWhhdmVzIG9uIG1vdXNlIG1vdmUuXG4gKi9cbmV4cG9ydCBjb25zdCBlbnVtIFNlbGVjdGlvbk1vZGUge1xuICBOT1JNQUwsXG4gIFdPUkQsXG4gIExJTkUsXG4gIENPTFVNTlxufVxuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIHRoZSBzZWxlY3Rpb24gb2YgdGhlIHRlcm1pbmFsLiBXaXRoIGhlbHAgZnJvbVxuICogU2VsZWN0aW9uTW9kZWwsIFNlbGVjdGlvblNlcnZpY2UgaGFuZGxlcyB3aXRoIGFsbCBsb2dpYyBhc3NvY2lhdGVkIHdpdGhcbiAqIGRlYWxpbmcgd2l0aCB0aGUgc2VsZWN0aW9uLCBpbmNsdWRpbmcgaGFuZGxpbmcgbW91c2UgaW50ZXJhY3Rpb24sIHdpZGVcbiAqIGNoYXJhY3RlcnMgYW5kIGZldGNoaW5nIHRoZSBhY3R1YWwgdGV4dCB3aXRoaW4gdGhlIHNlbGVjdGlvbi4gUmVuZGVyaW5nIGlzXG4gKiBub3QgaGFuZGxlZCBieSB0aGUgU2VsZWN0aW9uU2VydmljZSBidXQgdGhlIG9uUmVkcmF3UmVxdWVzdCBldmVudCBpcyBmaXJlZFxuICogd2hlbiB0aGUgc2VsZWN0aW9uIGlzIHJlYWR5IHRvIGJlIHJlZHJhd24gKG9uIGFuIGFuaW1hdGlvbiBmcmFtZSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBTZWxlY3Rpb25TZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElTZWxlY3Rpb25TZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBfbW9kZWw6IFNlbGVjdGlvbk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgYW1vdW50IHRvIHNjcm9sbCBldmVyeSBkcmFnIHNjcm9sbCB1cGRhdGUgKGRlcGVuZHMgb24gaG93IGZhciB0aGUgbW91c2VcbiAgICogZHJhZyBpcyBhYm92ZSBvciBiZWxvdyB0aGUgdGVybWluYWwpLlxuICAgKi9cbiAgcHJpdmF0ZSBfZHJhZ1Njcm9sbEFtb3VudDogbnVtYmVyID0gMDtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc2VsZWN0aW9uIG1vZGUuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2FjdGl2ZVNlbGVjdGlvbk1vZGU6IFNlbGVjdGlvbk1vZGU7XG5cbiAgLyoqXG4gICAqIEEgc2V0SW50ZXJ2YWwgdGltZXIgdGhhdCBpcyBhY3RpdmUgd2hpbGUgdGhlIG1vdXNlIGlzIGRvd24gd2hvc2UgY2FsbGJhY2tcbiAgICogc2Nyb2xscyB0aGUgdmlld3BvcnQgd2hlbiBuZWNlc3NhcnkuXG4gICAqL1xuICBwcml2YXRlIF9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcjogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgYW5pbWF0aW9uIGZyYW1lIElEIHVzZWQgZm9yIHJlZnJlc2hpbmcgdGhlIHNlbGVjdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2hBbmltYXRpb25GcmFtZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHNlbGVjdGlvbiBpcyBlbmFibGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfZW5hYmxlZCA9IHRydWU7XG5cbiAgcHJpdmF0ZSBfbW91c2VNb3ZlTGlzdGVuZXI6IEV2ZW50TGlzdGVuZXI7XG4gIHByaXZhdGUgX21vdXNlVXBMaXN0ZW5lcjogRXZlbnRMaXN0ZW5lcjtcbiAgcHJpdmF0ZSBfdHJpbUxpc3RlbmVyOiBJRGlzcG9zYWJsZTtcbiAgcHJpdmF0ZSBfd29ya0NlbGw6IENlbGxEYXRhID0gbmV3IENlbGxEYXRhKCk7XG5cbiAgcHJpdmF0ZSBfbW91c2VEb3duVGltZVN0YW1wOiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9vbGRIYXNTZWxlY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfb2xkU2VsZWN0aW9uU3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX29sZFNlbGVjdGlvbkVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkxpbnV4TW91c2VTZWxlY3Rpb24gPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25MaW51eE1vdXNlU2VsZWN0aW9uID0gdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlZHJhd1JlcXVlc3QgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxJU2VsZWN0aW9uUmVkcmF3UmVxdWVzdEV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFJlZHJhdyA9IHRoaXMuX29uUmVkcmF3UmVxdWVzdC5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25TZWxlY3Rpb25DaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFNjcm9sbExpbmVzID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SVNlbGVjdGlvblJlcXVlc3RTY3JvbGxMaW5lc0V2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFNjcm9sbExpbmVzID0gdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbGlua2lmaWVyOiBJTGlua2lmaWVyMixcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElDb3JlU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlU2VydmljZTogSUNvcmVTZXJ2aWNlLFxuICAgIEBJTW91c2VTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlLFxuICAgIEBJQ29yZUJyb3dzZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVCcm93c2VyU2VydmljZTogSUNvcmVCcm93c2VyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gSW5pdCBsaXN0ZW5lcnNcbiAgICB0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciA9IGV2ZW50ID0+IHRoaXMuX2hhbmRsZU1vdXNlTW92ZShldmVudCBhcyBNb3VzZUV2ZW50KTtcbiAgICB0aGlzLl9tb3VzZVVwTGlzdGVuZXIgPSBldmVudCA9PiB0aGlzLl9oYW5kbGVNb3VzZVVwKGV2ZW50IGFzIE1vdXNlRXZlbnQpO1xuICAgIHRoaXMuX2NvcmVTZXJ2aWNlLm9uVXNlcklucHV0KCgpID0+IHtcbiAgICAgIGlmICh0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMub25UcmltKGFtb3VudCA9PiB0aGlzLl9oYW5kbGVUcmltKGFtb3VudCkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKGUgPT4gdGhpcy5faGFuZGxlQnVmZmVyQWN0aXZhdGUoZSkpKTtcblxuICAgIHRoaXMuZW5hYmxlKCk7XG5cbiAgICB0aGlzLl9tb2RlbCA9IG5ldyBTZWxlY3Rpb25Nb2RlbCh0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gU2VsZWN0aW9uTW9kZS5OT1JNQUw7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4ge1xuICAgICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gICAgfSkpO1xuXG4gICAgLy8gQ2xlYXIgc2VsZWN0aW9uIHdoZW4gcmVzaXppbmcgdmVydGljYWxseS4gVGhpcyBleHBlcmllbmNlIGNvdWxkIGJlIGltcHJvdmVkLCB0aGlzIGlzIHRoZVxuICAgIC8vIHNpbXBsZSBvcHRpb24gdG8gZml4IHRoZSBidWdneSBiZWhhdmlvci4gaHR0cHM6Ly9naXRodWIuY29tL3h0ZXJtanMveHRlcm0uanMvaXNzdWVzLzUzMDBcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplKGUgPT4ge1xuICAgICAgaWYgKGUucm93c0NoYW5nZWQpIHtcbiAgICAgICAgdGhpcy5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzYWJsZXMgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyLiBUaGlzIGlzIHVzZWZ1bCBmb3Igd2hlbiB0ZXJtaW5hbCBtb3VzZVxuICAgKiBhcmUgZW5hYmxlZC5cbiAgICovXG4gIHB1YmxpYyBkaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB0aGlzLl9lbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHRoZSBzZWxlY3Rpb24gbWFuYWdlci5cbiAgICovXG4gIHB1YmxpYyBlbmFibGUoKTogdm9pZCB7XG4gICAgdGhpcy5fZW5hYmxlZCA9IHRydWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblN0YXJ0KCk6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydDsgfVxuICBwdWJsaWMgZ2V0IHNlbGVjdGlvbkVuZCgpOiBbbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHsgcmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kOyB9XG5cbiAgLyoqXG4gICAqIEdldHMgd2hldGhlciB0aGVyZSBpcyBhbiBhY3RpdmUgdGV4dCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgZ2V0IGhhc1NlbGVjdGlvbigpOiBib29sZWFuIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdGFydFswXSAhPT0gZW5kWzBdIHx8IHN0YXJ0WzFdICE9PSBlbmRbMV07XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdGV4dCBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAqL1xuICBwdWJsaWMgZ2V0IHNlbGVjdGlvblRleHQoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OKSB7XG4gICAgICAvLyBJZ25vcmUgemVybyB3aWR0aCBzZWxlY3Rpb25zXG4gICAgICBpZiAoc3RhcnRbMF0gPT09IGVuZFswXSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvciBjb2x1bW4gc2VsZWN0aW9uIGl0J3Mgbm90IGVub3VnaCB0byByZWx5IG9uIGZpbmFsIHNlbGVjdGlvbidzIHN3YXBwaW5nIG9mIHJldmVyc2VkXG4gICAgICAvLyB2YWx1ZXMsIGl0IGFsc28gbmVlZHMgdGhlIHggY29vcmRpbmF0ZXMgdG8gc3dhcCBpbmRlcGVuZGVudGx5IG9mIHRoZSB5IGNvb3JkaW5hdGUgaXMgbmVlZGVkXG4gICAgICBjb25zdCBzdGFydENvbCA9IHN0YXJ0WzBdIDwgZW5kWzBdID8gc3RhcnRbMF0gOiBlbmRbMF07XG4gICAgICBjb25zdCBlbmRDb2wgPSBzdGFydFswXSA8IGVuZFswXSA/IGVuZFswXSA6IHN0YXJ0WzBdO1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0WzFdOyBpIDw9IGVuZFsxXTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmVUZXh0ID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhpLCB0cnVlLCBzdGFydENvbCwgZW5kQ29sKTtcbiAgICAgICAgcmVzdWx0LnB1c2gobGluZVRleHQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBHZXQgZmlyc3Qgcm93XG4gICAgICBjb25zdCBzdGFydFJvd0VuZENvbCA9IHN0YXJ0WzFdID09PSBlbmRbMV0gPyBlbmRbMF0gOiB1bmRlZmluZWQ7XG4gICAgICByZXN1bHQucHVzaChidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHN0YXJ0WzFdLCB0cnVlLCBzdGFydFswXSwgc3RhcnRSb3dFbmRDb2wpKTtcblxuICAgICAgLy8gR2V0IG1pZGRsZSByb3dzXG4gICAgICBmb3IgKGxldCBpID0gc3RhcnRbMV0gKyAxOyBpIDw9IGVuZFsxXSAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBidWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChpKTtcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGksIHRydWUpO1xuICAgICAgICBpZiAoYnVmZmVyTGluZT8uaXNXcmFwcGVkKSB7XG4gICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSArPSBsaW5lVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQucHVzaChsaW5lVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0IGZpbmFsIHJvd1xuICAgICAgaWYgKHN0YXJ0WzFdICE9PSBlbmRbMV0pIHtcbiAgICAgICAgY29uc3QgYnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoZW5kWzFdKTtcbiAgICAgICAgY29uc3QgbGluZVRleHQgPSBidWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGVuZFsxXSwgdHJ1ZSwgMCwgZW5kWzBdKTtcbiAgICAgICAgaWYgKGJ1ZmZlckxpbmUgJiYgYnVmZmVyTGluZSEuaXNXcmFwcGVkKSB7XG4gICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSArPSBsaW5lVGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQucHVzaChsaW5lVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgc3RyaW5nIGJ5IHJlcGxhY2luZyBub24tYnJlYWtpbmcgc3BhY2UgY2hhcnMgd2l0aCByZWd1bGFyIHNwYWNlc1xuICAgIC8vIGFuZCBqb2luaW5nIHRoZSBhcnJheSBpbnRvIGEgbXVsdGktbGluZSBzdHJpbmcuXG4gICAgY29uc3QgZm9ybWF0dGVkUmVzdWx0ID0gcmVzdWx0Lm1hcChsaW5lID0+IHtcbiAgICAgIHJldHVybiBsaW5lLnJlcGxhY2UoQUxMX05PTl9CUkVBS0lOR19TUEFDRV9SRUdFWCwgJyAnKTtcbiAgICB9KS5qb2luKEJyb3dzZXIuaXNXaW5kb3dzID8gJ1xcclxcbicgOiAnXFxuJyk7XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkUmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogUXVldWVzIGEgcmVmcmVzaCwgcmVkcmF3aW5nIHRoZSBzZWxlY3Rpb24gb24gdGhlIG5leHQgb3Bwb3J0dW5pdHkuXG4gICAqIEBwYXJhbSBpc0xpbnV4TW91c2VTZWxlY3Rpb24gV2hldGhlciB0aGUgc2VsZWN0aW9uIHNob3VsZCBiZSByZWdpc3RlcmVkIGFzIGEgbmV3XG4gICAqIHNlbGVjdGlvbiBvbiBMaW51eC5cbiAgICovXG4gIHB1YmxpYyByZWZyZXNoKGlzTGludXhNb3VzZVNlbGVjdGlvbj86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAvLyBRdWV1ZSB0aGUgcmVmcmVzaCBmb3IgdGhlIHJlbmRlcmVyXG4gICAgaWYgKCF0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUpIHtcbiAgICAgIHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSA9IHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS53aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuX3JlZnJlc2goKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHBsYXRmb3JtIGlzIExpbnV4IGFuZCB0aGUgcmVmcmVzaCBjYWxsIGNvbWVzIGZyb20gYSBtb3VzZSBldmVudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgc2VsZWN0aW9uIGZvciBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uLlxuICAgIGlmIChCcm93c2VyLmlzTGludXggJiYgaXNMaW51eE1vdXNlU2VsZWN0aW9uKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb25UZXh0ID0gdGhpcy5zZWxlY3Rpb25UZXh0O1xuICAgICAgaWYgKHNlbGVjdGlvblRleHQubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5maXJlKHRoaXMuc2VsZWN0aW9uVGV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIHRoZSByZWZyZXNoIGV2ZW50LCBjYXVzaW5nIGNvbnN1bWVycyB0byBwaWNrIGl0IHVwIGFuZCByZWRyYXcgdGhlXG4gICAqIHNlbGVjdGlvbiBzdGF0ZS5cbiAgICovXG4gIHByaXZhdGUgX3JlZnJlc2goKTogdm9pZCB7XG4gICAgdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX29uUmVkcmF3UmVxdWVzdC5maXJlKHtcbiAgICAgIHN0YXJ0OiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZCxcbiAgICAgIGNvbHVtblNlbGVjdE1vZGU6IHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuQ09MVU1OXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBjdXJyZW50IGNsaWNrIHdhcyBpbnNpZGUgdGhlIGN1cnJlbnQgc2VsZWN0aW9uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnRcbiAgICovXG4gIHByaXZhdGUgX2lzQ2xpY2tJblNlbGVjdGlvbihldmVudDogTW91c2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQ7XG4gICAgY29uc3QgZW5kID0gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7XG5cbiAgICBpZiAoIXN0YXJ0IHx8ICFlbmQgfHwgIWNvb3Jkcykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbihjb29yZHMsIHN0YXJ0LCBlbmQpO1xuICB9XG5cbiAgcHVibGljIGlzQ2VsbEluU2VsZWN0aW9uKHg6IG51bWJlciwgeTogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO1xuICAgIGlmICghc3RhcnQgfHwgIWVuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYXJlQ29vcmRzSW5TZWxlY3Rpb24oW3gsIHldLCBzdGFydCwgZW5kKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYXJlQ29vcmRzSW5TZWxlY3Rpb24oY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdLCBzdGFydDogW251bWJlciwgbnVtYmVyXSwgZW5kOiBbbnVtYmVyLCBudW1iZXJdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChjb29yZHNbMV0gPiBzdGFydFsxXSAmJiBjb29yZHNbMV0gPCBlbmRbMV0pIHx8XG4gICAgICAgIChzdGFydFsxXSA9PT0gZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gc3RhcnRbMV0gJiYgY29vcmRzWzBdID49IHN0YXJ0WzBdICYmIGNvb3Jkc1swXSA8IGVuZFswXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdIDwgZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gZW5kWzFdICYmIGNvb3Jkc1swXSA8IGVuZFswXSkgfHxcbiAgICAgICAgKHN0YXJ0WzFdIDwgZW5kWzFdICYmIGNvb3Jkc1sxXSA9PT0gc3RhcnRbMV0gJiYgY29vcmRzWzBdID49IHN0YXJ0WzBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIHdvcmQgYXQgdGhlIGN1cnJlbnQgbW91c2UgZXZlbnQgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9zZWxlY3RXb3JkQXRDdXJzb3IoZXZlbnQ6IE1vdXNlRXZlbnQsIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb246IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGxpbmsgdW5kZXIgdGhlIGN1cnNvciBmaXJzdCBhbmQgc2VsZWN0IHRoYXQgaWYgc29cbiAgICBjb25zdCByYW5nZSA9IHRoaXMuX2xpbmtpZmllci5jdXJyZW50TGluaz8ubGluaz8ucmFuZ2U7XG4gICAgaWYgKHJhbmdlKSB7XG4gICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IFtyYW5nZS5zdGFydC54IC0gMSwgcmFuZ2Uuc3RhcnQueSAtIDFdO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSBnZXRSYW5nZUxlbmd0aChyYW5nZSwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICB0aGlzLl9zZWxlY3RXb3JkQXQoY29vcmRzLCBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uKTtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyBhbGwgdGV4dCB3aXRoaW4gdGhlIHRlcm1pbmFsLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5pc1NlbGVjdEFsbEFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICBzdGFydCA9IE1hdGgubWF4KHN0YXJ0LCAwKTtcbiAgICBlbmQgPSBNYXRoLm1pbihlbmQsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCAtIDEpO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0ID0gWzAsIHN0YXJ0XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSBbdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCBlbmRdO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGJ1ZmZlciBiZWluZyB0cmltbWVkLCBhZGp1c3QgdGhlIHNlbGVjdGlvbiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGFtb3VudCBUaGUgYW1vdW50IHRoZSBidWZmZXIgaXMgYmVpbmcgdHJpbW1lZC5cbiAgICovXG4gIHByaXZhdGUgX2hhbmRsZVRyaW0oYW1vdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSB0aGlzLl9tb2RlbC5oYW5kbGVUcmltKGFtb3VudCk7XG4gICAgaWYgKG5lZWRzUmVmcmVzaCkge1xuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIDAtYmFzZWQgW3gsIHldIGJ1ZmZlciBjb29yZGluYXRlcyBvZiB0aGUgY3VycmVudCBtb3VzZSBldmVudC5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50OiBNb3VzZUV2ZW50KTogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29vcmRzID0gdGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhldmVudCwgdGhpcy5fc2NyZWVuRWxlbWVudCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsIHRydWUpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgdG8gMC1iYXNlZFxuICAgIGNvb3Jkc1swXS0tO1xuICAgIGNvb3Jkc1sxXS0tO1xuXG4gICAgLy8gQ29udmVydCB2aWV3cG9ydCBjb29yZHMgdG8gYnVmZmVyIGNvb3Jkc1xuICAgIGNvb3Jkc1sxXSArPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtcbiAgICByZXR1cm4gY29vcmRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGFtb3VudCB0aGUgdmlld3BvcnQgc2hvdWxkIGJlIHNjcm9sbGVkIGJhc2VkIG9uIGhvdyBmYXIgb3V0IG9mIHRoZVxuICAgKiB0ZXJtaW5hbCB0aGUgbW91c2UgaXMuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50KGV2ZW50OiBNb3VzZUV2ZW50KTogbnVtYmVyIHtcbiAgICBsZXQgb2Zmc2V0ID0gZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQodGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdywgZXZlbnQsIHRoaXMuX3NjcmVlbkVsZW1lbnQpWzFdO1xuICAgIGNvbnN0IHRlcm1pbmFsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jYW52YXMuaGVpZ2h0O1xuICAgIGlmIChvZmZzZXQgPj0gMCAmJiBvZmZzZXQgPD0gdGVybWluYWxIZWlnaHQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBpZiAob2Zmc2V0ID4gdGVybWluYWxIZWlnaHQpIHtcbiAgICAgIG9mZnNldCAtPSB0ZXJtaW5hbEhlaWdodDtcbiAgICB9XG5cbiAgICBvZmZzZXQgPSBNYXRoLm1pbihNYXRoLm1heChvZmZzZXQsIC1EUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEKSwgRFJBR19TQ1JPTExfTUFYX1RIUkVTSE9MRCk7XG4gICAgb2Zmc2V0IC89IERSQUdfU0NST0xMX01BWF9USFJFU0hPTEQ7XG4gICAgcmV0dXJuIChvZmZzZXQgLyBNYXRoLmFicyhvZmZzZXQpKSArIE1hdGgucm91bmQob2Zmc2V0ICogKERSQUdfU0NST0xMX01BWF9TUEVFRCAtIDEpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBtYW5hZ2VyIHNob3VsZCBmb3JjZSBzZWxlY3Rpb24sIHJlZ2FyZGxlc3Mgb2ZcbiAgICogd2hldGhlciB0aGUgdGVybWluYWwgaXMgaW4gbW91c2UgZXZlbnRzIG1vZGUuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwdWJsaWMgc2hvdWxkRm9yY2VTZWxlY3Rpb24oZXZlbnQ6IE1vdXNlRXZlbnQpOiBib29sZWFuIHtcbiAgICBpZiAoQnJvd3Nlci5pc01hYykge1xuICAgICAgcmV0dXJuIGV2ZW50LmFsdEtleSAmJiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudC5zaGlmdEtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRlIG1vdXNlZG93biBldmVudCwgc2V0dGluZyB1cCBmb3IgYSBuZXcgc2VsZWN0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlZG93biBldmVudC5cbiAgICovXG4gIHB1YmxpYyBoYW5kbGVNb3VzZURvd24oZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9tb3VzZURvd25UaW1lU3RhbXAgPSBldmVudC50aW1lU3RhbXA7XG4gICAgLy8gSWYgd2UgaGF2ZSBzZWxlY3Rpb24sIHdlIHdhbnQgdGhlIGNvbnRleHQgbWVudSBvbiByaWdodCBjbGljayBldmVuIGlmIHRoZVxuICAgIC8vIHRlcm1pbmFsIGlzIGluIG1vdXNlIG1vZGUuXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMiAmJiB0aGlzLmhhc1NlbGVjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWN0aW9uIHRoZSBwcmltYXJ5IGJ1dHRvblxuICAgIGlmIChldmVudC5idXR0b24gIT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbGxvdyBzZWxlY3Rpb24gd2hlbiB1c2luZyBhIHNwZWNpZmljIG1vZGlmaWVyIGtleSwgZXZlbiB3aGVuIGRpc2FibGVkXG4gICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICBpZiAoIXRoaXMuc2hvdWxkRm9yY2VTZWxlY3Rpb24oZXZlbnQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gRG9uJ3Qgc2VuZCB0aGUgbW91c2UgZG93biBldmVudCB0byB0aGUgY3VycmVudCBwcm9jZXNzLCB3ZSB3YW50IHRvIHNlbGVjdFxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLy8gVGVsbCB0aGUgYnJvd3NlciBub3QgdG8gc3RhcnQgYSByZWd1bGFyIHNlbGVjdGlvblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAvLyBSZXNldCBkcmFnIHNjcm9sbCBzdGF0ZVxuICAgIHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPSAwO1xuXG4gICAgaWYgKHRoaXMuX2VuYWJsZWQgJiYgZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIHRoaXMuX2hhbmRsZUluY3JlbWVudGFsQ2xpY2soZXZlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVNpbmdsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGV0YWlsID09PSAyKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURvdWJsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGV0YWlsID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVRyaXBsZUNsaWNrKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lcnMgd2hlbiBtb3VzZWRvd24gaXMgdHJpZ2dlcmVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfYWRkTW91c2VEb3duTGlzdGVuZXJzKCk6IHZvaWQge1xuICAgIC8vIExpc3RlbiBvbiB0aGUgZG9jdW1lbnQgc28gdGhhdCBkcmFnZ2luZyBvdXRzaWRlIG9mIHZpZXdwb3J0IHdvcmtzXG4gICAgaWYgKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKTtcbiAgICAgIHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcExpc3RlbmVyKTtcbiAgICB9XG4gICAgdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIgPSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LnNldEludGVydmFsKCgpID0+IHRoaXMuX2RyYWdTY3JvbGwoKSwgRFJBR19TQ1JPTExfSU5URVJWQUwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIGxpc3RlbmVycyB0aGF0IGFyZSByZWdpc3RlcmVkIHdoZW4gbW91c2Vkb3duIGlzIHRyaWdnZXJlZC5cbiAgICovXG4gIHByaXZhdGUgX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50KSB7XG4gICAgICB0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwTGlzdGVuZXIpO1xuICAgIH1cbiAgICB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIpO1xuICAgIHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGluY3JlbWVudGFsIGNsaWNrLCBzZXR0aW5nIHRoZSBzZWxlY3Rpb24gZW5kIHBvc2l0aW9uIHRvIHRoZSBtb3VzZVxuICAgKiBwb3NpdGlvbi5cbiAgICogQHBhcmFtIGV2ZW50IFRoZSBtb3VzZSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgX2hhbmRsZUluY3JlbWVudGFsQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzaW5nbGUgY2xpY2ssIHJlc2V0dGluZyByZWxldmFudCBzdGF0ZSBhbmQgc2V0dGluZyB0aGUgc2VsZWN0aW9uXG4gICAqIHN0YXJ0IHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlU2luZ2xlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aCA9IDA7XG4gICAgdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gdGhpcy5zaG91bGRDb2x1bW5TZWxlY3QoZXZlbnQpID8gU2VsZWN0aW9uTW9kZS5DT0xVTU4gOiBTZWxlY3Rpb25Nb2RlLk5PUk1BTDtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIG5ldyBzZWxlY3Rpb25cbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoIXRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIEVuc3VyZSB0aGUgbGluZSBleGlzdHNcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZWFybHkgaWYgdGhlIGNsaWNrIGV2ZW50IGlzIG5vdCBpbiB0aGUgYnVmZmVyIChlZy4gaW4gc2Nyb2xsIGJhcilcbiAgICBpZiAobGluZS5sZW5ndGggPT09IHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIG1vdXNlIGlzIG92ZXIgdGhlIHNlY29uZCBoYWxmIG9mIGEgd2lkZSBjaGFyYWN0ZXIsIGFkanVzdCB0aGVcbiAgICAvLyBzZWxlY3Rpb24gdG8gY292ZXIgdGhlIHdob2xlIGNoYXJhY3RlclxuICAgIGlmIChsaW5lLmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKSA9PT0gMCkge1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0rKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBkb3VibGUgY2xpY2ssIHNlbGVjdGluZyB0aGUgY3VycmVudCB3b3JkLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlRG91YmxlQ2xpY2soZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGV2ZW50LCB0cnVlKSkge1xuICAgICAgdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9IFNlbGVjdGlvbk1vZGUuV09SRDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGVyZm9ybXMgYSB0cmlwbGUgY2xpY2ssIHNlbGVjdGluZyB0aGUgY3VycmVudCBsaW5lIGFuZCBhY3RpdmF0aW5nIGxpbmVcbiAgICogc2VsZWN0IG1vZGUuXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVUcmlwbGVDbGljayhldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGNvbnN0IGNvb3JkcyA9IHRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGV2ZW50KTtcbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICB0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlID0gU2VsZWN0aW9uTW9kZS5MSU5FO1xuICAgICAgdGhpcy5fc2VsZWN0TGluZUF0KGNvb3Jkc1sxXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgc2hvdWxkIG9wZXJhdGUgaW4gY29sdW1uIHNlbGVjdCBtb2RlXG4gICAqIEBwYXJhbSBldmVudCB0aGUgbW91c2Ugb3Iga2V5Ym9hcmQgZXZlbnRcbiAgICovXG4gIHB1YmxpYyBzaG91bGRDb2x1bW5TZWxlY3QoZXZlbnQ6IEtleWJvYXJkRXZlbnQgfCBNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGV2ZW50LmFsdEtleSAmJiAhKEJyb3dzZXIuaXNNYWMgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5tYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUgbW91c2Vtb3ZlIGV2ZW50IHdoZW4gdGhlIG1vdXNlIGJ1dHRvbiBpcyBkb3duLCByZWNvcmRpbmcgdGhlXG4gICAqIGVuZCBvZiB0aGUgc2VsZWN0aW9uIGFuZCByZWZyZXNoaW5nIHRoZSBzZWxlY3Rpb24uXG4gICAqIEBwYXJhbSBldmVudCBUaGUgbW91c2Vtb3ZlIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIG1vdXNlbW92ZSBsaXN0ZW5lciBpcyBhY3RpdmUgaXQgbWVhbnMgdGhhdCBhIHNlbGVjdGlvbiBpc1xuICAgIC8vIGN1cnJlbnRseSBiZWluZyBtYWRlLCB3ZSBzaG91bGQgc3RvcCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IG1vdXNlIGV2ZW50c1xuICAgIC8vIHRvIGJlIHNlbnQgdG8gdGhlIHB0eS5cbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlcmUgaXMgbm8gc2VsZWN0aW9uIHN0YXJ0LCB0aGlzIGNhbiBoYXBwZW4gaWYgdGhlIGZpcnN0XG4gICAgLy8gY2xpY2sgaW4gdGhlIHRlcm1pbmFsIGlzIGFuIGluY3JlbWVudGFsIGNsaWNrXG4gICAgaWYgKCF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlY29yZCB0aGUgcHJldmlvdXMgcG9zaXRpb24gc28gd2Uga25vdyB3aGV0aGVyIHRvIHJlZHJhdyB0aGUgc2VsZWN0aW9uXG4gICAgLy8gYXQgdGhlIGVuZC5cbiAgICBjb25zdCBwcmV2aW91c1NlbGVjdGlvbkVuZCA9IHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA/IFt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXV0gOiBudWxsO1xuXG4gICAgLy8gU2V0IHRoZSBpbml0aWFsIHNlbGVjdGlvbiBlbmQgYmFzZWQgb24gdGhlIG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kID0gdGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZXZlbnQpO1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2VsZWN0IHRoZSBlbnRpcmUgbGluZSBpZiBsaW5lIHNlbGVjdCBtb2RlIGlzIGFjdGl2ZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSA9PT0gU2VsZWN0aW9uTW9kZS5MSU5FKSB7XG4gICAgICBpZiAodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdIDwgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0pIHtcbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUgPT09IFNlbGVjdGlvbk1vZGUuV09SRCkge1xuICAgICAgdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKTtcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGFtb3VudCBvZiBzY3JvbGxpbmcgdGhhdCB3aWxsIGhhcHBlbi5cbiAgICB0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID0gdGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChldmVudCk7XG5cbiAgICAvLyBJZiB0aGUgY3Vyc29yIHdhcyBhYm92ZSBvciBiZWxvdyB0aGUgdmlld3BvcnQsIG1ha2Ugc3VyZSBpdCdzIGF0IHRoZVxuICAgIC8vIHN0YXJ0IG9yIGVuZCBvZiB0aGUgdmlld3BvcnQgcmVzcGVjdGl2ZWx5LiBUaGlzIHNob3VsZCBvbmx5IGhhcHBlbiB3aGVuXG4gICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSAhPT0gU2VsZWN0aW9uTW9kZS5DT0xVTU4pIHtcbiAgICAgIGlmICh0aGlzLl9kcmFnU2Nyb2xsQW1vdW50ID4gMCkge1xuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPCAwKSB7XG4gICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNoYXJhY3RlciBpcyBhIHdpZGUgY2hhcmFjdGVyIGluY2x1ZGUgdGhlIGNlbGwgdG8gdGhlIHJpZ2h0IGluIHRoZVxuICAgIC8vIHNlbGVjdGlvbi4gTm90ZSB0aGF0IHNlbGVjdGlvbnMgYXQgdGhlIHZlcnkgZW5kIG9mIHRoZSBsaW5lIHdpbGwgbmV2ZXJcbiAgICAvLyBoYXZlIGEgY2hhcmFjdGVyLlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPCBidWZmZXIubGluZXMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO1xuICAgICAgaWYgKGxpbmUgJiYgbGluZS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0pID09PSAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0gPCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpIHtcbiAgICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0rKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9ubHkgZHJhdyBoZXJlIGlmIHRoZSBzZWxlY3Rpb24gY2hhbmdlcy5cbiAgICBpZiAoIXByZXZpb3VzU2VsZWN0aW9uRW5kIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFswXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdIHx8XG4gICAgICBwcmV2aW91c1NlbGVjdGlvbkVuZFsxXSAhPT0gdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdKSB7XG4gICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjYWxsYmFjayB0aGF0IG9jY3VycyBldmVyeSBEUkFHX1NDUk9MTF9JTlRFUlZBTCBtcyB0aGF0IGRvZXMgdGhlXG4gICAqIHNjcm9sbGluZyBvZiB0aGUgdmlld3BvcnQuXG4gICAqL1xuICBwcml2YXRlIF9kcmFnU2Nyb2xsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kIHx8ICF0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZHJhZ1Njcm9sbEFtb3VudCkge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZmlyZSh7IGFtb3VudDogdGhpcy5fZHJhZ1Njcm9sbEFtb3VudCwgc3VwcHJlc3NTY3JvbGxFdmVudDogZmFsc2UgfSk7XG4gICAgICAvLyBSZS1ldmFsdWF0ZSBzZWxlY3Rpb25cbiAgICAgIC8vIElmIHRoZSBjdXJzb3Igd2FzIGFib3ZlIG9yIGJlbG93IHRoZSB2aWV3cG9ydCwgbWFrZSBzdXJlIGl0J3MgYXQgdGhlXG4gICAgICAvLyBzdGFydCBvciBlbmQgb2YgdGhlIHZpZXdwb3J0IHJlc3BlY3RpdmVseS4gVGhpcyBzaG91bGQgb25seSBoYXBwZW4gd2hlblxuICAgICAgLy8gTk9UIGluIGNvbHVtbiBzZWxlY3QgbW9kZS5cbiAgICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgICAgaWYgKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQgPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0gPSBNYXRoLm1pbihidWZmZXIueWRpc3AgKyB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsIGJ1ZmZlci5saW5lcy5sZW5ndGggLSAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlICE9PSBTZWxlY3Rpb25Nb2RlLkNPTFVNTikge1xuICAgICAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdID0gYnVmZmVyLnlkaXNwO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIG1vdXNldXAgZXZlbnQsIHJlbW92aW5nIHRoZSBtb3VzZWRvd24gbGlzdGVuZXJzLlxuICAgKiBAcGFyYW0gZXZlbnQgVGhlIG1vdXNldXAgZXZlbnQuXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVNb3VzZVVwKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgdGltZUVsYXBzZWQgPSBldmVudC50aW1lU3RhbXAgLSB0aGlzLl9tb3VzZURvd25UaW1lU3RhbXA7XG5cbiAgICB0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKTtcblxuICAgIGlmICh0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoIDw9IDEgJiYgdGltZUVsYXBzZWQgPCBBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSAmJiBldmVudC5hbHRLZXkgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbHRDbGlja01vdmVzQ3Vyc29yKSB7XG4gICAgICBpZiAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgPT09IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKSB7XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gdGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhcbiAgICAgICAgICBldmVudCxcbiAgICAgICAgICB0aGlzLl9lbGVtZW50LFxuICAgICAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsXG4gICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVzICYmIGNvb3JkaW5hdGVzWzBdICE9PSB1bmRlZmluZWQgJiYgY29vcmRpbmF0ZXNbMV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IHNlcXVlbmNlID0gbW92ZVRvQ2VsbFNlcXVlbmNlKGNvb3JkaW5hdGVzWzBdIC0gMSwgY29vcmRpbmF0ZXNbMV0gLSAxLCB0aGlzLl9idWZmZXJTZXJ2aWNlLCB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHNlcXVlbmNlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKTogdm9pZCB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO1xuICAgIGNvbnN0IGhhc1NlbGVjdGlvbiA9ICEhc3RhcnQgJiYgISFlbmQgJiYgKHN0YXJ0WzBdICE9PSBlbmRbMF0gfHwgc3RhcnRbMV0gIT09IGVuZFsxXSk7XG5cbiAgICBpZiAoIWhhc1NlbGVjdGlvbikge1xuICAgICAgaWYgKHRoaXMuX29sZEhhc1NlbGVjdGlvbikge1xuICAgICAgICB0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2Uoc3RhcnQsIGVuZCwgaGFzU2VsZWN0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTYW5pdHkgY2hlY2ssIHRoZXNlIHNob3VsZCBub3QgYmUgdW5kZWZpbmVkIGFzIHRoZXJlIGlzIGEgc2VsZWN0aW9uXG4gICAgaWYgKCFzdGFydCB8fCAhZW5kKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9vbGRTZWxlY3Rpb25TdGFydCB8fCAhdGhpcy5fb2xkU2VsZWN0aW9uRW5kIHx8IChcbiAgICAgIHN0YXJ0WzBdICE9PSB0aGlzLl9vbGRTZWxlY3Rpb25TdGFydFswXSB8fCBzdGFydFsxXSAhPT0gdGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMV0gfHxcbiAgICAgIGVuZFswXSAhPT0gdGhpcy5fb2xkU2VsZWN0aW9uRW5kWzBdIHx8IGVuZFsxXSAhPT0gdGhpcy5fb2xkU2VsZWN0aW9uRW5kWzFdKSkge1xuXG4gICAgICB0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2Uoc3RhcnQsIGVuZCwgaGFzU2VsZWN0aW9uKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9maXJlT25TZWxlY3Rpb25DaGFuZ2Uoc3RhcnQ6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQsIGVuZDogW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZCwgaGFzU2VsZWN0aW9uOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fb2xkU2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLl9vbGRTZWxlY3Rpb25FbmQgPSBlbmQ7XG4gICAgdGhpcy5fb2xkSGFzU2VsZWN0aW9uID0gaGFzU2VsZWN0aW9uO1xuICAgIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUJ1ZmZlckFjdGl2YXRlKGU6IHthY3RpdmVCdWZmZXI6IElCdWZmZXIsIGluYWN0aXZlQnVmZmVyOiBJQnVmZmVyfSk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAvLyBPbmx5IGFkanVzdCB0aGUgc2VsZWN0aW9uIG9uIHRyaW0sIHNoaWZ0RWxlbWVudHMgaXMgcmFyZWx5IHVzZWQgKG9ubHkgaW5cbiAgICAvLyByZXZlcnNlSW5kZXgpIGFuZCBkZWxldGUgaW4gYSBzcGxpY2UgaXMgb25seSBldmVyIHVzZWQgd2hlbiB0aGUgc2FtZVxuICAgIC8vIG51bWJlciBvZiBlbGVtZW50cyB3YXMganVzdCBhZGRlZC4gR2l2ZW4gdGhpcyBpcyBjb3VsZCBhY3R1YWxseSBiZVxuICAgIC8vIGJlbmVmaWNpYWwgdG8gbGVhdmUgdGhlIHNlbGVjdGlvbiBhcyBpcyBmb3IgdGhlc2UgY2FzZXMuXG4gICAgdGhpcy5fdHJpbUxpc3RlbmVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl90cmltTGlzdGVuZXIgPSBlLmFjdGl2ZUJ1ZmZlci5saW5lcy5vblRyaW0oYW1vdW50ID0+IHRoaXMuX2hhbmRsZVRyaW0oYW1vdW50KSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgYSB2aWV3cG9ydCBjb2x1bW4gKDAgdG8gY29scyAtIDEpIHRvIHRoZSBjaGFyYWN0ZXIgaW5kZXggb24gdGhlXG4gICAqIGJ1ZmZlciBsaW5lLCB0aGUgbGF0dGVyIHRha2VzIGludG8gYWNjb3VudCB3aWRlIGFuZCBudWxsIGNoYXJhY3RlcnMuXG4gICAqIEBwYXJhbSBidWZmZXJMaW5lIFRoZSBidWZmZXIgbGluZSB0byB1c2UuXG4gICAqIEBwYXJhbSB4IFRoZSB4IGluZGV4IGluIHRoZSBidWZmZXIgbGluZSB0byBjb252ZXJ0LlxuICAgKi9cbiAgcHJpdmF0ZSBfY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChidWZmZXJMaW5lOiBJQnVmZmVyTGluZSwgeDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgY2hhckluZGV4ID0geDtcbiAgICBmb3IgKGxldCBpID0gMDsgeCA+PSBpOyBpKyspIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGJ1ZmZlckxpbmUubG9hZENlbGwoaSwgdGhpcy5fd29ya0NlbGwpLmdldENoYXJzKCkubGVuZ3RoO1xuICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgLy8gV2lkZSBjaGFyYWN0ZXJzIGFyZW4ndCBpbmNsdWRlZCBpbiB0aGUgbGluZSBzdHJpbmcgc28gZGVjcmVtZW50IHRoZVxuICAgICAgICAvLyBpbmRleCBzbyB0aGUgaW5kZXggaXMgYmFjayBvbiB0aGUgd2lkZSBjaGFyYWN0ZXIuXG4gICAgICAgIGNoYXJJbmRleC0tO1xuICAgICAgfSBlbHNlIGlmIChsZW5ndGggPiAxICYmIHggIT09IGkpIHtcbiAgICAgICAgLy8gRW1vamlzIHRha2UgdXAgbXVsdGlwbGUgY2hhcmFjdGVycywgc28gYWRqdXN0IGFjY29yZGluZ2x5LiBGb3IgdGhlc2VcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCBvdCBpbmNsdWRlIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIGNvbHVtbiBhcyB3ZSdyZVxuICAgICAgICAvLyByZXR1cm5pbmcgdGhlIHN0YXJ0IGluZGV4IGluIHRoZSBzdHJpbmcsIG5vdCB0aGUgZW5kIGluZGV4LlxuICAgICAgICBjaGFySW5kZXggKz0gbGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYXJJbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBzZXRTZWxlY3Rpb24oY29sOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbY29sLCByb3ddO1xuICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoID0gbGVuZ3RoO1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpO1xuICB9XG5cbiAgcHVibGljIHJpZ2h0Q2xpY2tTZWxlY3QoZXY6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzQ2xpY2tJblNlbGVjdGlvbihldikpIHtcbiAgICAgIGlmICh0aGlzLl9zZWxlY3RXb3JkQXRDdXJzb3IoZXYsIGZhbHNlKSkge1xuICAgICAgICB0aGlzLnJlZnJlc2godHJ1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBwb3NpdGlvbmFsIGluZm9ybWF0aW9uIGZvciB0aGUgd29yZCBhdCB0aGUgY29vcmRpbmF0ZWQgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBnZXQgdGhlIHdvcmQgYXQuXG4gICAqL1xuICBwcml2YXRlIF9nZXRXb3JkQXQoY29vcmRzOiBbbnVtYmVyLCBudW1iZXJdLCBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uOiBib29sZWFuLCBmb2xsb3dXcmFwcGVkTGluZXNBYm92ZTogYm9vbGVhbiA9IHRydWUsIGZvbGxvd1dyYXBwZWRMaW5lc0JlbG93OiBib29sZWFuID0gdHJ1ZSk6IElXb3JkUG9zaXRpb24gfCB1bmRlZmluZWQge1xuICAgIC8vIEVuc3VyZSBjb29yZHMgYXJlIHdpdGhpbiB2aWV3cG9ydCAoZWcuIG5vdCB3aXRoaW4gc2Nyb2xsIGJhcilcbiAgICBpZiAoY29vcmRzWzBdID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0pO1xuICAgIGlmICghYnVmZmVyTGluZSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lID0gYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhjb29yZHNbMV0sIGZhbHNlKTtcblxuICAgIC8vIEdldCBhY3R1YWwgaW5kZXgsIHRha2luZyBpbnRvIGNvbnNpZGVyYXRpb24gd2lkZSBjaGFyYWN0ZXJzXG4gICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLl9jb252ZXJ0Vmlld3BvcnRDb2xUb0NoYXJhY3RlckluZGV4KGJ1ZmZlckxpbmUsIGNvb3Jkc1swXSk7XG4gICAgbGV0IGVuZEluZGV4ID0gc3RhcnRJbmRleDtcblxuICAgIC8vIFJlY29yZCBvZmZzZXQgdG8gYmUgdXNlZCBsYXRlclxuICAgIGNvbnN0IGNoYXJPZmZzZXQgPSBjb29yZHNbMF0gLSBzdGFydEluZGV4O1xuICAgIGxldCBsZWZ0V2lkZUNoYXJDb3VudCA9IDA7XG4gICAgbGV0IHJpZ2h0V2lkZUNoYXJDb3VudCA9IDA7XG4gICAgbGV0IGxlZnRMb25nQ2hhck9mZnNldCA9IDA7XG4gICAgbGV0IHJpZ2h0TG9uZ0NoYXJPZmZzZXQgPSAwO1xuXG4gICAgaWYgKGxpbmUuY2hhckF0KHN0YXJ0SW5kZXgpID09PSAnICcpIHtcbiAgICAgIC8vIEV4cGFuZCB1bnRpbCBub24td2hpdGVzcGFjZSBpcyBoaXRcbiAgICAgIHdoaWxlIChzdGFydEluZGV4ID4gMCAmJiBsaW5lLmNoYXJBdChzdGFydEluZGV4IC0gMSkgPT09ICcgJykge1xuICAgICAgICBzdGFydEluZGV4LS07XG4gICAgICB9XG4gICAgICB3aGlsZSAoZW5kSW5kZXggPCBsaW5lLmxlbmd0aCAmJiBsaW5lLmNoYXJBdChlbmRJbmRleCArIDEpID09PSAnICcpIHtcbiAgICAgICAgZW5kSW5kZXgrKztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRXhwYW5kIHVudGlsIHdoaXRlc3BhY2UgaXMgaGl0LiBUaGlzIGFsZ29yaXRobSB3b3JrcyBieSBzY2FubmluZyBsZWZ0XG4gICAgICAvLyBhbmQgcmlnaHQgZnJvbSB0aGUgc3RhcnRpbmcgcG9zaXRpb24sIGtlZXBpbmcgYm90aCB0aGUgaW5kZXggZm9ybWF0XG4gICAgICAvLyAobGluZSkgYW5kIHRoZSBjb2x1bW4gZm9ybWF0IChidWZmZXJMaW5lKSBpbiBzeW5jLiBXaGVuIGEgd2lkZVxuICAgICAgLy8gY2hhcmFjdGVyIGlzIGhpdCwgaXQgaXMgcmVjb3JkZWQgYW5kIHRoZSBjb2x1bW4gaW5kZXggaXMgYWRqdXN0ZWQuXG4gICAgICBsZXQgc3RhcnRDb2wgPSBjb29yZHNbMF07XG4gICAgICBsZXQgZW5kQ29sID0gY29vcmRzWzBdO1xuXG4gICAgICAvLyBDb25zaWRlciB0aGUgaW5pdGlhbCBwb3NpdGlvbiwgc2tpcCBpdCBhbmQgaW5jcmVtZW50IHRoZSB3aWRlIGNoYXJcbiAgICAgIC8vIHZhcmlhYmxlXG4gICAgICBpZiAoYnVmZmVyTGluZS5nZXRXaWR0aChzdGFydENvbCkgPT09IDApIHtcbiAgICAgICAgbGVmdFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgc3RhcnRDb2wtLTtcbiAgICAgIH1cbiAgICAgIGlmIChidWZmZXJMaW5lLmdldFdpZHRoKGVuZENvbCkgPT09IDIpIHtcbiAgICAgICAgcmlnaHRXaWRlQ2hhckNvdW50Kys7XG4gICAgICAgIGVuZENvbCsrO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgdGhlIGVuZCBpbmRleCBmb3IgY2hhcmFjdGVycyB3aG9zZSBsZW5ndGggYXJlID4gMSAoZW1vamlzKVxuICAgICAgY29uc3QgbGVuZ3RoID0gYnVmZmVyTGluZS5nZXRTdHJpbmcoZW5kQ29sKS5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgICByaWdodExvbmdDaGFyT2Zmc2V0ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgIGVuZEluZGV4ICs9IGxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4cGFuZCB0aGUgc3RyaW5nIGluIGJvdGggZGlyZWN0aW9ucyB1bnRpbCBhIHNwYWNlIGlzIGhpdFxuICAgICAgd2hpbGUgKHN0YXJ0Q29sID4gMCAmJiBzdGFydEluZGV4ID4gMCAmJiAhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihidWZmZXJMaW5lLmxvYWRDZWxsKHN0YXJ0Q29sIC0gMSwgdGhpcy5fd29ya0NlbGwpKSkge1xuICAgICAgICBidWZmZXJMaW5lLmxvYWRDZWxsKHN0YXJ0Q29sIC0gMSwgdGhpcy5fd29ya0NlbGwpO1xuICAgICAgICBjb25zdCBsZW5ndGggPSB0aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkgPT09IDApIHtcbiAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBjaGFyYWN0ZXIgaXMgYSB3aWRlIGNoYXIsIHJlY29yZCBpdCBhbmQgc2tpcCB0aGUgY29sdW1uXG4gICAgICAgICAgbGVmdFdpZGVDaGFyQ291bnQrKztcbiAgICAgICAgICBzdGFydENvbC0tO1xuICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBjaGFyYWN0ZXIncyBzdHJpbmcgaXMgbG9uZ2VyIHRoYW4gMSBjaGFyIChlZy4gZW1vamkpLFxuICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXhcbiAgICAgICAgICBsZWZ0TG9uZ0NoYXJPZmZzZXQgKz0gbGVuZ3RoIC0gMTtcbiAgICAgICAgICBzdGFydEluZGV4IC09IGxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgc3RhcnRJbmRleC0tO1xuICAgICAgICBzdGFydENvbC0tO1xuICAgICAgfVxuICAgICAgd2hpbGUgKGVuZENvbCA8IGJ1ZmZlckxpbmUubGVuZ3RoICYmIGVuZEluZGV4ICsgMSA8IGxpbmUubGVuZ3RoICYmICF0aGlzLl9pc0NoYXJXb3JkU2VwYXJhdG9yKGJ1ZmZlckxpbmUubG9hZENlbGwoZW5kQ29sICsgMSwgdGhpcy5fd29ya0NlbGwpKSkge1xuICAgICAgICBidWZmZXJMaW5lLmxvYWRDZWxsKGVuZENvbCArIDEsIHRoaXMuX3dvcmtDZWxsKTtcbiAgICAgICAgY29uc3QgbGVuZ3RoID0gdGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7XG4gICAgICAgIGlmICh0aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpID09PSAyKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIG5leHQgY2hhcmFjdGVyIGlzIGEgd2lkZSBjaGFyLCByZWNvcmQgaXQgYW5kIHNraXAgdGhlIGNvbHVtblxuICAgICAgICAgIHJpZ2h0V2lkZUNoYXJDb3VudCsrO1xuICAgICAgICAgIGVuZENvbCsrO1xuICAgICAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgbmV4dCBjaGFyYWN0ZXIncyBzdHJpbmcgaXMgbG9uZ2VyIHRoYW4gMSBjaGFyIChlZy4gZW1vamkpLFxuICAgICAgICAgIC8vIGFkanVzdCB0aGUgaW5kZXhcbiAgICAgICAgICByaWdodExvbmdDaGFyT2Zmc2V0ICs9IGxlbmd0aCAtIDE7XG4gICAgICAgICAgZW5kSW5kZXggKz0gbGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbmRJbmRleCsrO1xuICAgICAgICBlbmRDb2wrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbmNyZW1lbmV0IHRoZSBlbmQgaW5kZXggc28gaXQgaXMgYXQgdGhlIHN0YXJ0IG9mIHRoZSBuZXh0IGNoYXJhY3RlclxuICAgIGVuZEluZGV4Kys7XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIHN0YXJ0IF9jb2x1bW5fLCBjb252ZXJ0aW5nIHRoZSB0aGUgc3RyaW5nIGluZGV4ZXMgYmFjayB0b1xuICAgIC8vIGNvbHVtbiBjb29yZGluYXRlcy5cbiAgICBsZXQgc3RhcnQgPVxuICAgICAgICBzdGFydEluZGV4IC8vIFRoZSBpbmRleCBvZiB0aGUgc2VsZWN0aW9uJ3Mgc3RhcnQgY2hhciBpbiB0aGUgbGluZSBzdHJpbmdcbiAgICAgICAgKyBjaGFyT2Zmc2V0IC8vIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIGluaXRpYWwgY2hhcidzIGNvbHVtbiBhbmQgaW5kZXhcbiAgICAgICAgLSBsZWZ0V2lkZUNoYXJDb3VudCAvLyBUaGUgbnVtYmVyIG9mIHdpZGUgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyXG4gICAgICAgICsgbGVmdExvbmdDaGFyT2Zmc2V0OyAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyIGFkZGVkIGJ5IGNvbHVtbnMgd2l0aCBzdHJpbmdzIGxvbmdlciB0aGFuIDEgKGVtb2ppcylcblxuICAgIC8vIENhbGN1bGF0ZSB0aGUgbGVuZ3RoIGluIF9jb2x1bW5zXywgY29udmVydGluZyB0aGUgdGhlIHN0cmluZyBpbmRleGVzIGJhY2tcbiAgICAvLyB0byBjb2x1bW4gY29vcmRpbmF0ZXMuXG4gICAgbGV0IGxlbmd0aCA9IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgLy8gRGlzYWxsb3cgbGVuZ3RocyBsYXJnZXIgdGhhbiB0aGUgdGVybWluYWwgY29sc1xuICAgICAgZW5kSW5kZXggLy8gVGhlIGluZGV4IG9mIHRoZSBzZWxlY3Rpb24ncyBlbmQgY2hhciBpbiB0aGUgbGluZSBzdHJpbmdcbiAgICAgIC0gc3RhcnRJbmRleCAvLyBUaGUgaW5kZXggb2YgdGhlIHNlbGVjdGlvbidzIHN0YXJ0IGNoYXIgaW4gdGhlIGxpbmUgc3RyaW5nXG4gICAgICArIGxlZnRXaWRlQ2hhckNvdW50IC8vIFRoZSBudW1iZXIgb2Ygd2lkZSBjaGFycyBsZWZ0IG9mIHRoZSBpbml0aWFsIGNoYXJcbiAgICAgICsgcmlnaHRXaWRlQ2hhckNvdW50IC8vIFRoZSBudW1iZXIgb2Ygd2lkZSBjaGFycyByaWdodCBvZiB0aGUgaW5pdGlhbCBjaGFyIChpbmNsdXNpdmUpXG4gICAgICAtIGxlZnRMb25nQ2hhck9mZnNldCAvLyBUaGUgbnVtYmVyIG9mIGFkZGl0aW9uYWwgY2hhcnMgbGVmdCBvZiB0aGUgaW5pdGlhbCBjaGFyIGFkZGVkIGJ5IGNvbHVtbnMgd2l0aCBzdHJpbmdzIGxvbmdlciB0aGFuIDEgKGVtb2ppcylcbiAgICAgIC0gcmlnaHRMb25nQ2hhck9mZnNldCk7IC8vIFRoZSBudW1iZXIgb2YgYWRkaXRpb25hbCBjaGFycyByaWdodCBvZiB0aGUgaW5pdGlhbCBjaGFyIChpbmNsdXNpdmUpIGFkZGVkIGJ5IGNvbHVtbnMgd2l0aCBzdHJpbmdzIGxvbmdlciB0aGFuIDEgKGVtb2ppcylcblxuICAgIGlmICghYWxsb3dXaGl0ZXNwYWNlT25seVNlbGVjdGlvbiAmJiBsaW5lLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KS50cmltKCkgPT09ICcnKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFJlY3Vyc2UgdXB3YXJkcyBpZiB0aGUgbGluZSBpcyB3cmFwcGVkIGFuZCB0aGUgd29yZCB3cmFwcyB0byB0aGUgYWJvdmUgbGluZVxuICAgIGlmIChmb2xsb3dXcmFwcGVkTGluZXNBYm92ZSkge1xuICAgICAgaWYgKHN0YXJ0ID09PSAwICYmIGJ1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KDApICE9PSAzMiAvKiAnICcgKi8pIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNCdWZmZXJMaW5lID0gYnVmZmVyLmxpbmVzLmdldChjb29yZHNbMV0gLSAxKTtcbiAgICAgICAgaWYgKHByZXZpb3VzQnVmZmVyTGluZSAmJiBidWZmZXJMaW5lLmlzV3JhcHBlZCAmJiBwcmV2aW91c0J1ZmZlckxpbmUuZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEpICE9PSAzMiAvKiAnICcgKi8pIHtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIDEsIGNvb3Jkc1sxXSAtIDFdLCBmYWxzZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICAgIGlmIChwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyAtIHByZXZpb3VzTGluZVdvcmRQb3NpdGlvbi5zdGFydDtcbiAgICAgICAgICAgIHN0YXJ0IC09IG9mZnNldDtcbiAgICAgICAgICAgIGxlbmd0aCArPSBvZmZzZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVjdXJzZSBkb3dud2FyZHMgaWYgdGhlIGxpbmUgaXMgd3JhcHBlZCBhbmQgdGhlIHdvcmQgd3JhcHMgdG8gdGhlIG5leHQgbGluZVxuICAgIGlmIChmb2xsb3dXcmFwcGVkTGluZXNCZWxvdykge1xuICAgICAgaWYgKHN0YXJ0ICsgbGVuZ3RoID09PSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgJiYgYnVmZmVyTGluZS5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSkgIT09IDMyIC8qICcgJyAqLykge1xuICAgICAgICBjb25zdCBuZXh0QnVmZmVyTGluZSA9IGJ1ZmZlci5saW5lcy5nZXQoY29vcmRzWzFdICsgMSk7XG4gICAgICAgIGlmIChuZXh0QnVmZmVyTGluZT8uaXNXcmFwcGVkICYmIG5leHRCdWZmZXJMaW5lLmdldENvZGVQb2ludCgwKSAhPT0gMzIgLyogJyAnICovKSB7XG4gICAgICAgICAgY29uc3QgbmV4dExpbmVXb3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoWzAsIGNvb3Jkc1sxXSArIDFdLCBmYWxzZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICAgIGlmIChuZXh0TGluZVdvcmRQb3NpdGlvbikge1xuICAgICAgICAgICAgbGVuZ3RoICs9IG5leHRMaW5lV29yZFBvc2l0aW9uLmxlbmd0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4geyBzdGFydCwgbGVuZ3RoIH07XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgd29yZCBhdCB0aGUgY29vcmRpbmF0ZXMgc3BlY2lmaWVkLlxuICAgKiBAcGFyYW0gY29vcmRzIFRoZSBjb29yZGluYXRlcyB0byBnZXQgdGhlIHdvcmQgYXQuXG4gICAqIEBwYXJhbSBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uIElmIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHNlbGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgX3NlbGVjdFdvcmRBdChjb29yZHM6IFtudW1iZXIsIG51bWJlcl0sIGFsbG93V2hpdGVzcGFjZU9ubHlTZWxlY3Rpb246IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCB3b3JkUG9zaXRpb24gPSB0aGlzLl9nZXRXb3JkQXQoY29vcmRzLCBhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uKTtcbiAgICBpZiAod29yZFBvc2l0aW9uKSB7XG4gICAgICAvLyBBZGp1c3QgbmVnYXRpdmUgc3RhcnQgdmFsdWVcbiAgICAgIHdoaWxlICh3b3JkUG9zaXRpb24uc3RhcnQgPCAwKSB7XG4gICAgICAgIHdvcmRQb3NpdGlvbi5zdGFydCArPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7XG4gICAgICAgIGNvb3Jkc1sxXS0tO1xuICAgICAgfVxuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbd29yZFBvc2l0aW9uLnN0YXJ0LCBjb29yZHNbMV1dO1xuICAgICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSB3b3JkUG9zaXRpb24ubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzZWxlY3Rpb24gZW5kIHRvIHRoZSB3b3JkIGF0IHRoZSBjb29yZGluYXRlZCBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBjb29yZHMgVGhlIGNvb3JkaW5hdGVzIHRvIGdldCB0aGUgd29yZCBhdC5cbiAgICovXG4gIHByaXZhdGUgX3NlbGVjdFRvV29yZEF0KGNvb3JkczogW251bWJlciwgbnVtYmVyXSk6IHZvaWQge1xuICAgIGNvbnN0IHdvcmRQb3NpdGlvbiA9IHRoaXMuX2dldFdvcmRBdChjb29yZHMsIHRydWUpO1xuICAgIGlmICh3b3JkUG9zaXRpb24pIHtcbiAgICAgIGxldCBlbmRSb3cgPSBjb29yZHNbMV07XG5cbiAgICAgIC8vIEFkanVzdCBuZWdhdGl2ZSBzdGFydCB2YWx1ZVxuICAgICAgd2hpbGUgKHdvcmRQb3NpdGlvbi5zdGFydCA8IDApIHtcbiAgICAgICAgd29yZFBvc2l0aW9uLnN0YXJ0ICs9IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scztcbiAgICAgICAgZW5kUm93LS07XG4gICAgICB9XG5cbiAgICAgIC8vIEFkanVzdCB3cmFwcGVkIGxlbmd0aCB2YWx1ZSwgdGhpcyBvbmx5IG5lZWRzIHRvIGhhcHBlbiB3aGVuIHZhbHVlcyBhcmUgcmV2ZXJzZWQgYXMgaW4gdGhhdFxuICAgICAgLy8gY2FzZSB3ZSdyZSBpbnRlcmVzdGVkIGluIHRoZSBzdGFydCBvZiB0aGUgd29yZCwgbm90IHRoZSBlbmRcbiAgICAgIGlmICghdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSkge1xuICAgICAgICB3aGlsZSAod29yZFBvc2l0aW9uLnN0YXJ0ICsgd29yZFBvc2l0aW9uLmxlbmd0aCA+IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAgIHdvcmRQb3NpdGlvbi5sZW5ndGggLT0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgICAgICAgIGVuZFJvdysrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCA9IFt0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpID8gd29yZFBvc2l0aW9uLnN0YXJ0IDogd29yZFBvc2l0aW9uLnN0YXJ0ICsgd29yZFBvc2l0aW9uLmxlbmd0aCwgZW5kUm93XTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZSBjaGFyYWN0ZXIgaXMgY29uc2lkZXJlZCBhIHdvcmQgc2VwYXJhdG9yIGJ5IHRoZSBzZWxlY3RcbiAgICogd29yZCBsb2dpYy5cbiAgICogQHBhcmFtIGNlbGwgVGhlIGNlbGwgdG8gY2hlY2suXG4gICAqL1xuICBwcml2YXRlIF9pc0NoYXJXb3JkU2VwYXJhdG9yKGNlbGw6IENlbGxEYXRhKTogYm9vbGVhbiB7XG4gICAgLy8gWmVybyB3aWR0aCBjaGFyYWN0ZXJzIGFyZSBuZXZlciBzZXBhcmF0b3JzIGFzIHRoZXkgYXJlIGFsd2F5cyB0byB0aGVcbiAgICAvLyByaWdodCBvZiB3aWRlIGNoYXJhY3RlcnNcbiAgICBpZiAoY2VsbC5nZXRXaWR0aCgpID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndvcmRTZXBhcmF0b3IuaW5kZXhPZihjZWxsLmdldENoYXJzKCkpID49IDA7XG4gIH1cblxuICAvKipcbiAgICogU2VsZWN0cyB0aGUgbGluZSBzcGVjaWZpZWQuXG4gICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIGluZGV4LlxuICAgKi9cbiAgcHJvdGVjdGVkIF9zZWxlY3RMaW5lQXQobGluZTogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgd3JhcHBlZFJhbmdlID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShsaW5lKTtcbiAgICBjb25zdCByYW5nZTogSUJ1ZmZlclJhbmdlID0ge1xuICAgICAgc3RhcnQ6IHsgeDogMCwgeTogd3JhcHBlZFJhbmdlLmZpcnN0IH0sXG4gICAgICBlbmQ6IHsgeDogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSwgeTogd3JhcHBlZFJhbmdlLmxhc3QgfVxuICAgIH07XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQgPSBbMCwgd3JhcHBlZFJhbmdlLmZpcnN0XTtcbiAgICB0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGggPSBnZXRSYW5nZUxlbmd0aChyYW5nZSwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZXhwb3J0IGNsYXNzIFR3b0tleU1hcDxURmlyc3QgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIsIFRTZWNvbmQgZXh0ZW5kcyBzdHJpbmcgfCBudW1iZXIsIFRWYWx1ZT4ge1xuICBwcml2YXRlIF9kYXRhOiB7IFtiZzogc3RyaW5nIHwgbnVtYmVyXTogeyBbZmc6IHN0cmluZyB8IG51bWJlcl06IFRWYWx1ZSB8IHVuZGVmaW5lZCB9IHwgdW5kZWZpbmVkIH0gPSB7fTtcblxuICBwdWJsaWMgc2V0KGZpcnN0OiBURmlyc3QsIHNlY29uZDogVFNlY29uZCwgdmFsdWU6IFRWYWx1ZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fZGF0YVtmaXJzdF0pIHtcbiAgICAgIHRoaXMuX2RhdGFbZmlyc3RdID0ge307XG4gICAgfVxuICAgIHRoaXMuX2RhdGFbZmlyc3QgYXMgc3RyaW5nIHwgbnVtYmVyXSFbc2Vjb25kXSA9IHZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldChmaXJzdDogVEZpcnN0LCBzZWNvbmQ6IFRTZWNvbmQpOiBUVmFsdWUgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2ZpcnN0IGFzIHN0cmluZyB8IG51bWJlcl0gPyB0aGlzLl9kYXRhW2ZpcnN0IGFzIHN0cmluZyB8IG51bWJlcl0hW3NlY29uZF0gOiB1bmRlZmluZWQ7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YSA9IHt9O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGb3VyS2V5TWFwPFRGaXJzdCBleHRlbmRzIHN0cmluZyB8IG51bWJlciwgVFNlY29uZCBleHRlbmRzIHN0cmluZyB8IG51bWJlciwgVFRoaXJkIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyLCBURm91cnRoIGV4dGVuZHMgc3RyaW5nIHwgbnVtYmVyLCBUVmFsdWU+IHtcbiAgcHJpdmF0ZSBfZGF0YTogVHdvS2V5TWFwPFRGaXJzdCwgVFNlY29uZCwgVHdvS2V5TWFwPFRUaGlyZCwgVEZvdXJ0aCwgVFZhbHVlPj4gPSBuZXcgVHdvS2V5TWFwKCk7XG5cbiAgcHVibGljIHNldChmaXJzdDogVEZpcnN0LCBzZWNvbmQ6IFRTZWNvbmQsIHRoaXJkOiBUVGhpcmQsIGZvdXJ0aDogVEZvdXJ0aCwgdmFsdWU6IFRWYWx1ZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fZGF0YS5nZXQoZmlyc3QsIHNlY29uZCkpIHtcbiAgICAgIHRoaXMuX2RhdGEuc2V0KGZpcnN0LCBzZWNvbmQsIG5ldyBUd29LZXlNYXAoKSk7XG4gICAgfVxuICAgIHRoaXMuX2RhdGEuZ2V0KGZpcnN0LCBzZWNvbmQpIS5zZXQodGhpcmQsIGZvdXJ0aCwgdmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGdldChmaXJzdDogVEZpcnN0LCBzZWNvbmQ6IFRTZWNvbmQsIHRoaXJkOiBUVGhpcmQsIGZvdXJ0aDogVEZvdXJ0aCk6IFRWYWx1ZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGEuZ2V0KGZpcnN0LCBzZWNvbmQpPy5nZXQodGhpcmQsIGZvdXJ0aCk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fZGF0YS5jbGVhcigpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ29sb3JDb250cmFzdENhY2hlIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgVHdvS2V5TWFwIH0gZnJvbSAnY29tbW9uL011bHRpS2V5TWFwJztcblxuZXhwb3J0IGNsYXNzIENvbG9yQ29udHJhc3RDYWNoZSBpbXBsZW1lbnRzIElDb2xvckNvbnRyYXN0Q2FjaGUge1xuICBwcml2YXRlIF9jb2xvcjogVHdvS2V5TWFwPC8qIGJnICovbnVtYmVyLCAvKiBmZyAqL251bWJlciwgSUNvbG9yIHwgbnVsbD4gPSBuZXcgVHdvS2V5TWFwKCk7XG4gIHByaXZhdGUgX2NzczogVHdvS2V5TWFwPC8qIGJnICovbnVtYmVyLCAvKiBmZyAqL251bWJlciwgc3RyaW5nIHwgbnVsbD4gPSBuZXcgVHdvS2V5TWFwKCk7XG5cbiAgcHVibGljIHNldENzcyhiZzogbnVtYmVyLCBmZzogbnVtYmVyLCB2YWx1ZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuX2Nzcy5zZXQoYmcsIGZnLCB2YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3NzKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fY3NzLmdldChiZywgZmcpO1xuICB9XG5cbiAgcHVibGljIHNldENvbG9yKGJnOiBudW1iZXIsIGZnOiBudW1iZXIsIHZhbHVlOiBJQ29sb3IgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5fY29sb3Iuc2V0KGJnLCBmZywgdmFsdWUpO1xuICB9XG5cbiAgcHVibGljIGdldENvbG9yKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJQ29sb3IgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3IuZ2V0KGJnLCBmZyk7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5fY29sb3IuY2xlYXIoKTtcbiAgICB0aGlzLl9jc3MuY2xlYXIoKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElDb2xvciwgSUNvcmVUZXJtaW5hbCwgSVRlcm1pbmFsT3B0aW9ucyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSwgVGVybWluYWwgYXMgSVRlcm1pbmFsQXBpIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcbmltcG9ydCB7IGNoYW5uZWxzLCBjc3MgfSBmcm9tICdjb21tb24vQ29sb3InO1xuaW1wb3J0IHR5cGUgeyBFdmVudCB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuLyoqXG4gKiBBIHBvcnRpb24gb2YgdGhlIHB1YmxpYyBBUEkgdGhhdCBhcmUgaW1wbGVtZW50ZWQgaWRlbnRpYWxseSBpbnRlcm5hbGx5IGFuZCBzaW1wbHkgcGFzc2VkIHRocm91Z2guXG4gKi9cbnR5cGUgSW50ZXJuYWxQYXNzdGhyb3VnaEFwaXMgPSBPbWl0PElUZXJtaW5hbEFwaSwgJ2J1ZmZlcicgfCAncGFyc2VyJyB8ICd1bmljb2RlJyB8ICdtb2RlcycgfCAnd3JpdGVsbicgfCAnbG9hZEFkZG9uJz47XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlcm1pbmFsIGV4dGVuZHMgSW50ZXJuYWxQYXNzdGhyb3VnaEFwaXMsIElDb3JlVGVybWluYWwge1xuICBzY3JlZW5FbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgYnJvd3NlcjogSUJyb3dzZXI7XG4gIGJ1ZmZlcjogSUJ1ZmZlcjtcbiAgbGlua2lmaWVyOiBJTGlua2lmaWVyMiB8IHVuZGVmaW5lZDtcbiAgb3B0aW9uczogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz47XG5cbiAgb25CbHVyOiBFdmVudDx2b2lkPjtcbiAgb25Gb2N1czogRXZlbnQ8dm9pZD47XG4gIG9uQTExeUNoYXI6IEV2ZW50PHN0cmluZz47XG4gIG9uQTExeVRhYjogRXZlbnQ8bnVtYmVyPjtcbiAgb25XaWxsT3BlbjogRXZlbnQ8SFRNTEVsZW1lbnQ+O1xuXG4gIGNhbmNlbChldjogTW91c2VFdmVudCB8IFdoZWVsRXZlbnQgfCBLZXlib2FyZEV2ZW50IHwgSW5wdXRFdmVudCwgZm9yY2U/OiBib29sZWFuKTogYm9vbGVhbiB8IHZvaWQ7XG59XG5cbmV4cG9ydCB0eXBlIEN1c3RvbUtleUV2ZW50SGFuZGxlciA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4gYm9vbGVhbjtcbmV4cG9ydCB0eXBlIEN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBMaW5lRGF0YSA9IENoYXJEYXRhW107XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBvc2l0aW9uSGVscGVyIHtcbiAgcmVhZG9ubHkgaXNDb21wb3Npbmc6IGJvb2xlYW47XG4gIGNvbXBvc2l0aW9uc3RhcnQoKTogdm9pZDtcbiAgY29tcG9zaXRpb251cGRhdGUoZXY6IENvbXBvc2l0aW9uRXZlbnQpOiB2b2lkO1xuICBjb21wb3NpdGlvbmVuZCgpOiB2b2lkO1xuICB1cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKGRvbnRSZWN1cnNlPzogYm9vbGVhbik6IHZvaWQ7XG4gIGtleWRvd24oZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCcm93c2VyIHtcbiAgaXNOb2RlOiBib29sZWFuO1xuICB1c2VyQWdlbnQ6IHN0cmluZztcbiAgcGxhdGZvcm06IHN0cmluZztcbiAgaXNGaXJlZm94OiBib29sZWFuO1xuICBpc01hYzogYm9vbGVhbjtcbiAgaXNJcGFkOiBib29sZWFuO1xuICBpc0lwaG9uZTogYm9vbGVhbjtcbiAgaXNXaW5kb3dzOiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb2xvclNldCB7XG4gIGZvcmVncm91bmQ6IElDb2xvcjtcbiAgYmFja2dyb3VuZDogSUNvbG9yO1xuICBjdXJzb3I6IElDb2xvcjtcbiAgY3Vyc29yQWNjZW50OiBJQ29sb3I7XG4gIHNlbGVjdGlvbkZvcmVncm91bmQ6IElDb2xvciB8IHVuZGVmaW5lZDtcbiAgc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50OiBJQ29sb3I7XG4gIC8qKiBUaGUgc2VsZWN0aW9uIGJsZW5kZWQgb24gdG9wIG9mIGJhY2tncm91bmQuICovXG4gIHNlbGVjdGlvbkJhY2tncm91bmRPcGFxdWU6IElDb2xvcjtcbiAgc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kVHJhbnNwYXJlbnQ6IElDb2xvcjtcbiAgc2VsZWN0aW9uSW5hY3RpdmVCYWNrZ3JvdW5kT3BhcXVlOiBJQ29sb3I7XG4gIHNjcm9sbGJhclNsaWRlckJhY2tncm91bmQ6IElDb2xvcjtcbiAgc2Nyb2xsYmFyU2xpZGVySG92ZXJCYWNrZ3JvdW5kOiBJQ29sb3I7XG4gIHNjcm9sbGJhclNsaWRlckFjdGl2ZUJhY2tncm91bmQ6IElDb2xvcjtcbiAgb3ZlcnZpZXdSdWxlckJvcmRlcjogSUNvbG9yO1xuICBhbnNpOiBJQ29sb3JbXTtcbiAgLyoqIE1hcHMgb3JpZ2luYWwgY29sb3JzIHRvIGNvbG9ycyB0aGF0IHJlc3BlY3QgbWluaW11bSBjb250cmFzdCByYXRpby4gKi9cbiAgY29udHJhc3RDYWNoZTogSUNvbG9yQ29udHJhc3RDYWNoZTtcbiAgLyoqIE1hcHMgb3JpZ2luYWwgY29sb3JzIHRvIGNvbG9ycyB0aGF0IHJlc3BlY3QgX2hhbGZfIG9mIHRoZSBtaW5pbXVtIGNvbnRyYXN0IHJhdGlvLiAqL1xuICBoYWxmQ29udHJhc3RDYWNoZTogSUNvbG9yQ29udHJhc3RDYWNoZTtcbn1cblxuZXhwb3J0IHR5cGUgUmVhZG9ubHlDb2xvclNldCA9IFJlYWRvbmx5PE9taXQ8SUNvbG9yU2V0LCAnYW5zaSc+PiAmIHsgYW5zaTogUmVhZG9ubHk8UGljazxJQ29sb3JTZXQsICdhbnNpJz5bJ2Fuc2knXT4gfTtcblxuZXhwb3J0IGludGVyZmFjZSBJQ29sb3JDb250cmFzdENhY2hlIHtcbiAgY2xlYXIoKTogdm9pZDtcbiAgc2V0Q3NzKGJnOiBudW1iZXIsIGZnOiBudW1iZXIsIHZhbHVlOiBzdHJpbmcgfCBudWxsKTogdm9pZDtcbiAgZ2V0Q3NzKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICBzZXRDb2xvcihiZzogbnVtYmVyLCBmZzogbnVtYmVyLCB2YWx1ZTogSUNvbG9yIHwgbnVsbCk6IHZvaWQ7XG4gIGdldENvbG9yKGJnOiBudW1iZXIsIGZnOiBudW1iZXIpOiBJQ29sb3IgfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQYXJ0aWFsQ29sb3JTZXQge1xuICBmb3JlZ3JvdW5kOiBJQ29sb3I7XG4gIGJhY2tncm91bmQ6IElDb2xvcjtcbiAgY3Vyc29yPzogSUNvbG9yO1xuICBjdXJzb3JBY2NlbnQ/OiBJQ29sb3I7XG4gIHNlbGVjdGlvbkJhY2tncm91bmQ/OiBJQ29sb3I7XG4gIGFuc2k6IElDb2xvcltdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElWaWV3cG9ydCBleHRlbmRzIElEaXNwb3NhYmxlIHtcbiAgc2Nyb2xsQmFyV2lkdGg6IG51bWJlcjtcbiAgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsTGluZXM6IEV2ZW50PHsgYW1vdW50OiBudW1iZXIsIHN1cHByZXNzU2Nyb2xsRXZlbnQ6IGJvb2xlYW4gfT47XG4gIHN5bmNTY3JvbGxBcmVhKGltbWVkaWF0ZT86IGJvb2xlYW4sIGZvcmNlPzogYm9vbGVhbik6IHZvaWQ7XG4gIGdldExpbmVzU2Nyb2xsZWQoZXY6IFdoZWVsRXZlbnQpOiBudW1iZXI7XG4gIGdldEJ1ZmZlckVsZW1lbnRzKHN0YXJ0TGluZTogbnVtYmVyLCBlbmRMaW5lPzogbnVtYmVyKTogeyBidWZmZXJFbGVtZW50czogSFRNTEVsZW1lbnRbXSwgY3Vyc29yRWxlbWVudD86IEhUTUxFbGVtZW50IH07XG4gIGhhbmRsZVdoZWVsKGV2OiBXaGVlbEV2ZW50KTogYm9vbGVhbjtcbiAgaGFuZGxlVG91Y2hTdGFydChldjogVG91Y2hFdmVudCk6IHZvaWQ7XG4gIGhhbmRsZVRvdWNoTW92ZShldjogVG91Y2hFdmVudCk6IGJvb2xlYW47XG4gIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlcik6IHZvaWQ7ICAvLyB0b2RvIGFwaSBuYW1lP1xuICByZXNldCgpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElMaW5raWZpZXJFdmVudCB7XG4gIHgxOiBudW1iZXI7XG4gIHkxOiBudW1iZXI7XG4gIHgyOiBudW1iZXI7XG4gIHkyOiBudW1iZXI7XG4gIGNvbHM6IG51bWJlcjtcbiAgZmc6IG51bWJlciB8IHVuZGVmaW5lZDtcbn1cblxuaW50ZXJmYWNlIElMaW5rU3RhdGUge1xuICBkZWNvcmF0aW9uczogSUxpbmtEZWNvcmF0aW9ucztcbiAgaXNIb3ZlcmVkOiBib29sZWFuO1xufVxuZXhwb3J0IGludGVyZmFjZSBJTGlua1dpdGhTdGF0ZSB7XG4gIGxpbms6IElMaW5rO1xuICBzdGF0ZT86IElMaW5rU3RhdGU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmtpZmllcjIgZXh0ZW5kcyBJRGlzcG9zYWJsZSB7XG4gIG9uU2hvd0xpbmtVbmRlcmxpbmU6IEV2ZW50PElMaW5raWZpZXJFdmVudD47XG4gIG9uSGlkZUxpbmtVbmRlcmxpbmU6IEV2ZW50PElMaW5raWZpZXJFdmVudD47XG4gIHJlYWRvbmx5IGN1cnJlbnRMaW5rOiBJTGlua1dpdGhTdGF0ZSB8IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGluayB7XG4gIHJhbmdlOiBJQnVmZmVyUmFuZ2U7XG4gIHRleHQ6IHN0cmluZztcbiAgZGVjb3JhdGlvbnM/OiBJTGlua0RlY29yYXRpb25zO1xuICBhY3RpdmF0ZShldmVudDogTW91c2VFdmVudCwgdGV4dDogc3RyaW5nKTogdm9pZDtcbiAgaG92ZXI/KGV2ZW50OiBNb3VzZUV2ZW50LCB0ZXh0OiBzdHJpbmcpOiB2b2lkO1xuICBsZWF2ZT8oZXZlbnQ6IE1vdXNlRXZlbnQsIHRleHQ6IHN0cmluZyk6IHZvaWQ7XG4gIGRpc3Bvc2U/KCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxpbmtEZWNvcmF0aW9ucyB7XG4gIHBvaW50ZXJDdXJzb3I6IGJvb2xlYW47XG4gIHVuZGVybGluZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQnVmZmVyUmFuZ2Uge1xuICBzdGFydDogSUJ1ZmZlckNlbGxQb3NpdGlvbjtcbiAgZW5kOiBJQnVmZmVyQ2VsbFBvc2l0aW9uO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCdWZmZXJDZWxsUG9zaXRpb24ge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgQ2hhcmFjdGVySm9pbmVySGFuZGxlciA9ICh0ZXh0OiBzdHJpbmcpID0+IFtudW1iZXIsIG51bWJlcl1bXTtcblxuZXhwb3J0IGludGVyZmFjZSBJQ2hhcmFjdGVySm9pbmVyIHtcbiAgaWQ6IG51bWJlcjtcbiAgaGFuZGxlcjogQ2hhcmFjdGVySm9pbmVySGFuZGxlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyRGVib3VuY2VyIGV4dGVuZHMgSURpc3Bvc2FibGUge1xuICByZWZyZXNoKHJvd1N0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQsIHJvd0VuZDogbnVtYmVyIHwgdW5kZWZpbmVkLCByb3dDb3VudDogbnVtYmVyKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyRGVib3VuY2VyV2l0aENhbGxiYWNrIGV4dGVuZHMgSVJlbmRlckRlYm91bmNlciB7XG4gIGFkZFJlZnJlc2hDYWxsYmFjayhjYWxsYmFjazogRnJhbWVSZXF1ZXN0Q2FsbGJhY2spOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJ1ZmZlckVsZW1lbnRQcm92aWRlciB7XG4gIHByb3ZpZGVCdWZmZXJFbGVtZW50cygpOiBEb2N1bWVudEZyYWdtZW50IHwgSFRNTEVsZW1lbnQ7XG59XG5cbi8vIEFuIElJRkUgdG8gZ2VuZXJhdGUgREVGQVVMVF9BTlNJX0NPTE9SUy5cbmV4cG9ydCBjb25zdCBERUZBVUxUX0FOU0lfQ09MT1JTID0gT2JqZWN0LmZyZWV6ZSgoKCkgPT4ge1xuICBjb25zdCBjb2xvcnMgPSBbXG4gICAgLy8gZGFyazpcbiAgICBjc3MudG9Db2xvcignIzJlMzQzNicpLFxuICAgIGNzcy50b0NvbG9yKCcjY2MwMDAwJyksXG4gICAgY3NzLnRvQ29sb3IoJyM0ZTlhMDYnKSxcbiAgICBjc3MudG9Db2xvcignI2M0YTAwMCcpLFxuICAgIGNzcy50b0NvbG9yKCcjMzQ2NWE0JyksXG4gICAgY3NzLnRvQ29sb3IoJyM3NTUwN2InKSxcbiAgICBjc3MudG9Db2xvcignIzA2OTg5YScpLFxuICAgIGNzcy50b0NvbG9yKCcjZDNkN2NmJyksXG4gICAgLy8gYnJpZ2h0OlxuICAgIGNzcy50b0NvbG9yKCcjNTU1NzUzJyksXG4gICAgY3NzLnRvQ29sb3IoJyNlZjI5MjknKSxcbiAgICBjc3MudG9Db2xvcignIzhhZTIzNCcpLFxuICAgIGNzcy50b0NvbG9yKCcjZmNlOTRmJyksXG4gICAgY3NzLnRvQ29sb3IoJyM3MjlmY2YnKSxcbiAgICBjc3MudG9Db2xvcignI2FkN2ZhOCcpLFxuICAgIGNzcy50b0NvbG9yKCcjMzRlMmUyJyksXG4gICAgY3NzLnRvQ29sb3IoJyNlZWVlZWMnKVxuICBdO1xuXG4gIC8vIEZpbGwgaW4gdGhlIHJlbWFpbmluZyAyNDAgQU5TSSBjb2xvcnMuXG4gIC8vIEdlbmVyYXRlIGNvbG9ycyAoMTYtMjMxKVxuICBjb25zdCB2ID0gWzB4MDAsIDB4NWYsIDB4ODcsIDB4YWYsIDB4ZDcsIDB4ZmZdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IDIxNjsgaSsrKSB7XG4gICAgY29uc3QgciA9IHZbKGkgLyAzNikgJSA2IHwgMF07XG4gICAgY29uc3QgZyA9IHZbKGkgLyA2KSAlIDYgfCAwXTtcbiAgICBjb25zdCBiID0gdltpICUgNl07XG4gICAgY29sb3JzLnB1c2goe1xuICAgICAgY3NzOiBjaGFubmVscy50b0NzcyhyLCBnLCBiKSxcbiAgICAgIHJnYmE6IGNoYW5uZWxzLnRvUmdiYShyLCBnLCBiKVxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgZ3JleXMgKDIzMi0yNTUpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjQ7IGkrKykge1xuICAgIGNvbnN0IGMgPSA4ICsgaSAqIDEwO1xuICAgIGNvbG9ycy5wdXNoKHtcbiAgICAgIGNzczogY2hhbm5lbHMudG9Dc3MoYywgYywgYyksXG4gICAgICByZ2JhOiBjaGFubmVscy50b1JnYmEoYywgYywgYylcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBjb2xvcnM7XG59KSgpKTtcbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENvbG9yQ29udHJhc3RDYWNoZSB9IGZyb20gJ2Jyb3dzZXIvQ29sb3JDb250cmFzdENhY2hlJztcbmltcG9ydCB7IElUaGVtZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IERFRkFVTFRfQU5TSV9DT0xPUlMsIElDb2xvckNvbnRyYXN0Q2FjaGUsIElDb2xvclNldCwgUmVhZG9ubHlDb2xvclNldCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgY29sb3IsIGNzcywgTlVMTF9DT0xPUiB9IGZyb20gJ2NvbW1vbi9Db2xvcic7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IElPcHRpb25zU2VydmljZSwgSVRoZW1lIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEFsbENvbG9ySW5kZXgsIElDb2xvciwgU3BlY2lhbENvbG9ySW5kZXggfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuaW50ZXJmYWNlIElSZXN0b3JlQ29sb3JTZXQge1xuICBmb3JlZ3JvdW5kOiBJQ29sb3I7XG4gIGJhY2tncm91bmQ6IElDb2xvcjtcbiAgY3Vyc29yOiBJQ29sb3I7XG4gIGFuc2k6IElDb2xvcltdO1xufVxuXG5cbmNvbnN0IERFRkFVTFRfRk9SRUdST1VORCA9IGNzcy50b0NvbG9yKCcjZmZmZmZmJyk7XG5jb25zdCBERUZBVUxUX0JBQ0tHUk9VTkQgPSBjc3MudG9Db2xvcignIzAwMDAwMCcpO1xuY29uc3QgREVGQVVMVF9DVVJTT1IgPSBjc3MudG9Db2xvcignI2ZmZmZmZicpO1xuY29uc3QgREVGQVVMVF9DVVJTT1JfQUNDRU5UID0gREVGQVVMVF9CQUNLR1JPVU5EO1xuY29uc3QgREVGQVVMVF9TRUxFQ1RJT04gPSB7XG4gIGNzczogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKScsXG4gIHJnYmE6IDB4RkZGRkZGNERcbn07XG5jb25zdCBERUZBVUxUX09WRVJWSUVXX1JVTEVSX0JPUkRFUiA9IERFRkFVTFRfRk9SRUdST1VORDtcblxuZXhwb3J0IGNsYXNzIFRoZW1lU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVGhlbWVTZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgX2NvbG9yczogSUNvbG9yU2V0O1xuICBwcml2YXRlIF9jb250cmFzdENhY2hlOiBJQ29sb3JDb250cmFzdENhY2hlID0gbmV3IENvbG9yQ29udHJhc3RDYWNoZSgpO1xuICBwcml2YXRlIF9oYWxmQ29udHJhc3RDYWNoZTogSUNvbG9yQ29udHJhc3RDYWNoZSA9IG5ldyBDb2xvckNvbnRyYXN0Q2FjaGUoKTtcbiAgcHJpdmF0ZSBfcmVzdG9yZUNvbG9ycyE6IElSZXN0b3JlQ29sb3JTZXQ7XG5cbiAgcHVibGljIGdldCBjb2xvcnMoKTogUmVhZG9ubHlDb2xvclNldCB7IHJldHVybiB0aGlzLl9jb2xvcnM7IH1cblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkNoYW5nZUNvbG9ycyA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPFJlYWRvbmx5Q29sb3JTZXQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25DaGFuZ2VDb2xvcnMgPSB0aGlzLl9vbkNoYW5nZUNvbG9ycy5ldmVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuX2NvbG9ycyA9IHtcbiAgICAgIGZvcmVncm91bmQ6IERFRkFVTFRfRk9SRUdST1VORCxcbiAgICAgIGJhY2tncm91bmQ6IERFRkFVTFRfQkFDS0dST1VORCxcbiAgICAgIGN1cnNvcjogREVGQVVMVF9DVVJTT1IsXG4gICAgICBjdXJzb3JBY2NlbnQ6IERFRkFVTFRfQ1VSU09SX0FDQ0VOVCxcbiAgICAgIHNlbGVjdGlvbkZvcmVncm91bmQ6IHVuZGVmaW5lZCxcbiAgICAgIHNlbGVjdGlvbkJhY2tncm91bmRUcmFuc3BhcmVudDogREVGQVVMVF9TRUxFQ1RJT04sXG4gICAgICBzZWxlY3Rpb25CYWNrZ3JvdW5kT3BhcXVlOiBjb2xvci5ibGVuZChERUZBVUxUX0JBQ0tHUk9VTkQsIERFRkFVTFRfU0VMRUNUSU9OKSxcbiAgICAgIHNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50OiBERUZBVUxUX1NFTEVDVElPTixcbiAgICAgIHNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZE9wYXF1ZTogY29sb3IuYmxlbmQoREVGQVVMVF9CQUNLR1JPVU5ELCBERUZBVUxUX1NFTEVDVElPTiksXG4gICAgICBzY3JvbGxiYXJTbGlkZXJCYWNrZ3JvdW5kOiBjb2xvci5vcGFjaXR5KERFRkFVTFRfRk9SRUdST1VORCwgMC4yKSxcbiAgICAgIHNjcm9sbGJhclNsaWRlckhvdmVyQmFja2dyb3VuZDogY29sb3Iub3BhY2l0eShERUZBVUxUX0ZPUkVHUk9VTkQsIDAuNCksXG4gICAgICBzY3JvbGxiYXJTbGlkZXJBY3RpdmVCYWNrZ3JvdW5kOiBjb2xvci5vcGFjaXR5KERFRkFVTFRfRk9SRUdST1VORCwgMC41KSxcbiAgICAgIG92ZXJ2aWV3UnVsZXJCb3JkZXI6IERFRkFVTFRfRk9SRUdST1VORCxcbiAgICAgIGFuc2k6IERFRkFVTFRfQU5TSV9DT0xPUlMuc2xpY2UoKSxcbiAgICAgIGNvbnRyYXN0Q2FjaGU6IHRoaXMuX2NvbnRyYXN0Q2FjaGUsXG4gICAgICBoYWxmQ29udHJhc3RDYWNoZTogdGhpcy5faGFsZkNvbnRyYXN0Q2FjaGVcbiAgICB9O1xuICAgIHRoaXMuX3VwZGF0ZVJlc3RvcmVDb2xvcnMoKTtcbiAgICB0aGlzLl9zZXRUaGVtZSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRoZW1lKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uU3BlY2lmaWNPcHRpb25DaGFuZ2UoJ21pbmltdW1Db250cmFzdFJhdGlvJywgKCkgPT4gdGhpcy5fY29udHJhc3RDYWNoZS5jbGVhcigpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25TcGVjaWZpY09wdGlvbkNoYW5nZSgndGhlbWUnLCAoKSA9PiB0aGlzLl9zZXRUaGVtZSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRoZW1lKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRlcm1pbmFsJ3MgdGhlbWUuXG4gICAqIEBwYXJhbSB0aGVtZSBUaGUgIHRoZW1lIHRvIHVzZS4gSWYgYSBwYXJ0aWFsIHRoZW1lIGlzIHByb3ZpZGVkIHRoZW4gZGVmYXVsdFxuICAgKiBjb2xvcnMgd2lsbCBiZSB1c2VkIHdoZXJlIGNvbG9ycyBhcmUgbm90IGRlZmluZWQuXG4gICAqL1xuICBwcml2YXRlIF9zZXRUaGVtZSh0aGVtZTogSVRoZW1lID0ge30pOiB2b2lkIHtcbiAgICBjb25zdCBjb2xvcnMgPSB0aGlzLl9jb2xvcnM7XG4gICAgY29sb3JzLmZvcmVncm91bmQgPSBwYXJzZUNvbG9yKHRoZW1lLmZvcmVncm91bmQsIERFRkFVTFRfRk9SRUdST1VORCk7XG4gICAgY29sb3JzLmJhY2tncm91bmQgPSBwYXJzZUNvbG9yKHRoZW1lLmJhY2tncm91bmQsIERFRkFVTFRfQkFDS0dST1VORCk7XG4gICAgY29sb3JzLmN1cnNvciA9IGNvbG9yLmJsZW5kKGNvbG9ycy5iYWNrZ3JvdW5kLCBwYXJzZUNvbG9yKHRoZW1lLmN1cnNvciwgREVGQVVMVF9DVVJTT1IpKTtcbiAgICBjb2xvcnMuY3Vyc29yQWNjZW50ID0gY29sb3IuYmxlbmQoY29sb3JzLmJhY2tncm91bmQsIHBhcnNlQ29sb3IodGhlbWUuY3Vyc29yQWNjZW50LCBERUZBVUxUX0NVUlNPUl9BQ0NFTlQpKTtcbiAgICBjb2xvcnMuc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50ID0gcGFyc2VDb2xvcih0aGVtZS5zZWxlY3Rpb25CYWNrZ3JvdW5kLCBERUZBVUxUX1NFTEVDVElPTik7XG4gICAgY29sb3JzLnNlbGVjdGlvbkJhY2tncm91bmRPcGFxdWUgPSBjb2xvci5ibGVuZChjb2xvcnMuYmFja2dyb3VuZCwgY29sb3JzLnNlbGVjdGlvbkJhY2tncm91bmRUcmFuc3BhcmVudCk7XG4gICAgY29sb3JzLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50ID0gcGFyc2VDb2xvcih0aGVtZS5zZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmQsIGNvbG9ycy5zZWxlY3Rpb25CYWNrZ3JvdW5kVHJhbnNwYXJlbnQpO1xuICAgIGNvbG9ycy5zZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmRPcGFxdWUgPSBjb2xvci5ibGVuZChjb2xvcnMuYmFja2dyb3VuZCwgY29sb3JzLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50KTtcbiAgICBjb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCA9IHRoZW1lLnNlbGVjdGlvbkZvcmVncm91bmQgPyBwYXJzZUNvbG9yKHRoZW1lLnNlbGVjdGlvbkZvcmVncm91bmQsIE5VTExfQ09MT1IpIDogdW5kZWZpbmVkO1xuICAgIGlmIChjb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCA9PT0gTlVMTF9DT0xPUikge1xuICAgICAgY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgc2VsZWN0aW9uIGNvbG9yIGlzIG9wYXF1ZSwgYmxlbmQgaXQgd2l0aCBiYWNrZ3JvdW5kIHdpdGggMC4zIG9wYWNpdHlcbiAgICAgKiBJc3N1ZSAjMjczN1xuICAgICAqL1xuICAgIGlmIChjb2xvci5pc09wYXF1ZShjb2xvcnMuc2VsZWN0aW9uQmFja2dyb3VuZFRyYW5zcGFyZW50KSkge1xuICAgICAgY29uc3Qgb3BhY2l0eSA9IDAuMztcbiAgICAgIGNvbG9ycy5zZWxlY3Rpb25CYWNrZ3JvdW5kVHJhbnNwYXJlbnQgPSBjb2xvci5vcGFjaXR5KGNvbG9ycy5zZWxlY3Rpb25CYWNrZ3JvdW5kVHJhbnNwYXJlbnQsIG9wYWNpdHkpO1xuICAgIH1cbiAgICBpZiAoY29sb3IuaXNPcGFxdWUoY29sb3JzLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50KSkge1xuICAgICAgY29uc3Qgb3BhY2l0eSA9IDAuMztcbiAgICAgIGNvbG9ycy5zZWxlY3Rpb25JbmFjdGl2ZUJhY2tncm91bmRUcmFuc3BhcmVudCA9IGNvbG9yLm9wYWNpdHkoY29sb3JzLnNlbGVjdGlvbkluYWN0aXZlQmFja2dyb3VuZFRyYW5zcGFyZW50LCBvcGFjaXR5KTtcbiAgICB9XG4gICAgY29sb3JzLnNjcm9sbGJhclNsaWRlckJhY2tncm91bmQgPSBwYXJzZUNvbG9yKHRoZW1lLnNjcm9sbGJhclNsaWRlckJhY2tncm91bmQsIGNvbG9yLm9wYWNpdHkoY29sb3JzLmZvcmVncm91bmQsIDAuMikpO1xuICAgIGNvbG9ycy5zY3JvbGxiYXJTbGlkZXJIb3ZlckJhY2tncm91bmQgPSBwYXJzZUNvbG9yKHRoZW1lLnNjcm9sbGJhclNsaWRlckhvdmVyQmFja2dyb3VuZCwgY29sb3Iub3BhY2l0eShjb2xvcnMuZm9yZWdyb3VuZCwgMC40KSk7XG4gICAgY29sb3JzLnNjcm9sbGJhclNsaWRlckFjdGl2ZUJhY2tncm91bmQgPSBwYXJzZUNvbG9yKHRoZW1lLnNjcm9sbGJhclNsaWRlckFjdGl2ZUJhY2tncm91bmQsIGNvbG9yLm9wYWNpdHkoY29sb3JzLmZvcmVncm91bmQsIDAuNSkpO1xuICAgIGNvbG9ycy5vdmVydmlld1J1bGVyQm9yZGVyID0gcGFyc2VDb2xvcih0aGVtZS5vdmVydmlld1J1bGVyQm9yZGVyLCBERUZBVUxUX09WRVJWSUVXX1JVTEVSX0JPUkRFUik7XG4gICAgY29sb3JzLmFuc2kgPSBERUZBVUxUX0FOU0lfQ09MT1JTLnNsaWNlKCk7XG4gICAgY29sb3JzLmFuc2lbMF0gPSBwYXJzZUNvbG9yKHRoZW1lLmJsYWNrLCBERUZBVUxUX0FOU0lfQ09MT1JTWzBdKTtcbiAgICBjb2xvcnMuYW5zaVsxXSA9IHBhcnNlQ29sb3IodGhlbWUucmVkLCBERUZBVUxUX0FOU0lfQ09MT1JTWzFdKTtcbiAgICBjb2xvcnMuYW5zaVsyXSA9IHBhcnNlQ29sb3IodGhlbWUuZ3JlZW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbMl0pO1xuICAgIGNvbG9ycy5hbnNpWzNdID0gcGFyc2VDb2xvcih0aGVtZS55ZWxsb3csIERFRkFVTFRfQU5TSV9DT0xPUlNbM10pO1xuICAgIGNvbG9ycy5hbnNpWzRdID0gcGFyc2VDb2xvcih0aGVtZS5ibHVlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzRdKTtcbiAgICBjb2xvcnMuYW5zaVs1XSA9IHBhcnNlQ29sb3IodGhlbWUubWFnZW50YSwgREVGQVVMVF9BTlNJX0NPTE9SU1s1XSk7XG4gICAgY29sb3JzLmFuc2lbNl0gPSBwYXJzZUNvbG9yKHRoZW1lLmN5YW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbNl0pO1xuICAgIGNvbG9ycy5hbnNpWzddID0gcGFyc2VDb2xvcih0aGVtZS53aGl0ZSwgREVGQVVMVF9BTlNJX0NPTE9SU1s3XSk7XG4gICAgY29sb3JzLmFuc2lbOF0gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodEJsYWNrLCBERUZBVUxUX0FOU0lfQ09MT1JTWzhdKTtcbiAgICBjb2xvcnMuYW5zaVs5XSA9IHBhcnNlQ29sb3IodGhlbWUuYnJpZ2h0UmVkLCBERUZBVUxUX0FOU0lfQ09MT1JTWzldKTtcbiAgICBjb2xvcnMuYW5zaVsxMF0gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodEdyZWVuLCBERUZBVUxUX0FOU0lfQ09MT1JTWzEwXSk7XG4gICAgY29sb3JzLmFuc2lbMTFdID0gcGFyc2VDb2xvcih0aGVtZS5icmlnaHRZZWxsb3csIERFRkFVTFRfQU5TSV9DT0xPUlNbMTFdKTtcbiAgICBjb2xvcnMuYW5zaVsxMl0gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodEJsdWUsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTJdKTtcbiAgICBjb2xvcnMuYW5zaVsxM10gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodE1hZ2VudGEsIERFRkFVTFRfQU5TSV9DT0xPUlNbMTNdKTtcbiAgICBjb2xvcnMuYW5zaVsxNF0gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodEN5YW4sIERFRkFVTFRfQU5TSV9DT0xPUlNbMTRdKTtcbiAgICBjb2xvcnMuYW5zaVsxNV0gPSBwYXJzZUNvbG9yKHRoZW1lLmJyaWdodFdoaXRlLCBERUZBVUxUX0FOU0lfQ09MT1JTWzE1XSk7XG4gICAgaWYgKHRoZW1lLmV4dGVuZGVkQW5zaSkge1xuICAgICAgY29uc3QgY29sb3JDb3VudCA9IE1hdGgubWluKGNvbG9ycy5hbnNpLmxlbmd0aCAtIDE2LCB0aGVtZS5leHRlbmRlZEFuc2kubGVuZ3RoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3JDb3VudDsgaSsrKSB7XG4gICAgICAgIGNvbG9ycy5hbnNpW2kgKyAxNl0gPSBwYXJzZUNvbG9yKHRoZW1lLmV4dGVuZGVkQW5zaVtpXSwgREVGQVVMVF9BTlNJX0NPTE9SU1tpICsgMTZdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQ2xlYXIgb3VyIHRoZSBjYWNoZVxuICAgIHRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLl9oYWxmQ29udHJhc3RDYWNoZS5jbGVhcigpO1xuICAgIHRoaXMuX3VwZGF0ZVJlc3RvcmVDb2xvcnMoKTtcbiAgICB0aGlzLl9vbkNoYW5nZUNvbG9ycy5maXJlKHRoaXMuY29sb3JzKTtcbiAgfVxuXG4gIHB1YmxpYyByZXN0b3JlQ29sb3Ioc2xvdD86IEFsbENvbG9ySW5kZXgpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0b3JlQ29sb3Ioc2xvdCk7XG4gICAgdGhpcy5fb25DaGFuZ2VDb2xvcnMuZmlyZSh0aGlzLmNvbG9ycyk7XG4gIH1cblxuICBwcml2YXRlIF9yZXN0b3JlQ29sb3Ioc2xvdDogQWxsQ29sb3JJbmRleCB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgIC8vIHVuc2V0IHNsb3QgcmVzdG9yZXMgYWxsIGFuc2kgY29sb3JzXG4gICAgaWYgKHNsb3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2kubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdGhpcy5fY29sb3JzLmFuc2lbaV0gPSB0aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2lbaV07XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAoc2xvdCkge1xuICAgICAgY2FzZSBTcGVjaWFsQ29sb3JJbmRleC5GT1JFR1JPVU5EOlxuICAgICAgICB0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCA9IHRoaXMuX3Jlc3RvcmVDb2xvcnMuZm9yZWdyb3VuZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNwZWNpYWxDb2xvckluZGV4LkJBQ0tHUk9VTkQ6XG4gICAgICAgIHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kID0gdGhpcy5fcmVzdG9yZUNvbG9ycy5iYWNrZ3JvdW5kO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgU3BlY2lhbENvbG9ySW5kZXguQ1VSU09SOlxuICAgICAgICB0aGlzLl9jb2xvcnMuY3Vyc29yID0gdGhpcy5fcmVzdG9yZUNvbG9ycy5jdXJzb3I7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhpcy5fY29sb3JzLmFuc2lbc2xvdF0gPSB0aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2lbc2xvdF07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1vZGlmeUNvbG9ycyhjYWxsYmFjazogKGNvbG9yczogSUNvbG9yU2V0KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgY2FsbGJhY2sodGhpcy5fY29sb3JzKTtcbiAgICAvLyBBc3N1bWUgdGhlIGNoYW5nZSBoYXBwZW5lZFxuICAgIHRoaXMuX29uQ2hhbmdlQ29sb3JzLmZpcmUodGhpcy5jb2xvcnMpO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlUmVzdG9yZUNvbG9ycygpOiB2b2lkIHtcbiAgICB0aGlzLl9yZXN0b3JlQ29sb3JzID0ge1xuICAgICAgZm9yZWdyb3VuZDogdGhpcy5fY29sb3JzLmZvcmVncm91bmQsXG4gICAgICBiYWNrZ3JvdW5kOiB0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCxcbiAgICAgIGN1cnNvcjogdGhpcy5fY29sb3JzLmN1cnNvcixcbiAgICAgIGFuc2k6IHRoaXMuX2NvbG9ycy5hbnNpLnNsaWNlKClcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ29sb3IoXG4gIGNzc1N0cmluZzogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICBmYWxsYmFjazogSUNvbG9yXG4pOiBJQ29sb3Ige1xuICBpZiAoY3NzU3RyaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGNzcy50b0NvbG9yKGNzc1N0cmluZyk7XG4gICAgfSBjYXRjaCB7XG4gICAgICAvLyBuby1vcFxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsbGJhY2s7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBUaGlzIHdhcyBoZWF2aWx5IGluc3BpcmVkIGZyb20gbWljcm9zb2Z0L3ZzY29kZSdzIGRlcGVuZGVuY3kgaW5qZWN0aW9uIHN5c3RlbSAoTUlUKS5cbiAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IElJbnN0YW50aWF0aW9uU2VydmljZSwgSVNlcnZpY2VJZGVudGlmaWVyIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IGdldFNlcnZpY2VEZXBlbmRlbmNpZXMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZVJlZ2lzdHJ5JztcblxuZXhwb3J0IGNsYXNzIFNlcnZpY2VDb2xsZWN0aW9uIHtcblxuICBwcml2YXRlIF9lbnRyaWVzID0gbmV3IE1hcDxJU2VydmljZUlkZW50aWZpZXI8YW55PiwgYW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKC4uLmVudHJpZXM6IFtJU2VydmljZUlkZW50aWZpZXI8YW55PiwgYW55XVtdKSB7XG4gICAgZm9yIChjb25zdCBbaWQsIHNlcnZpY2VdIG9mIGVudHJpZXMpIHtcbiAgICAgIHRoaXMuc2V0KGlkLCBzZXJ2aWNlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0PFQ+KGlkOiBJU2VydmljZUlkZW50aWZpZXI8VD4sIGluc3RhbmNlOiBUKTogVCB7XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZW50cmllcy5nZXQoaWQpO1xuICAgIHRoaXMuX2VudHJpZXMuc2V0KGlkLCBpbnN0YW5jZSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoKGNhbGxiYWNrOiAoaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxhbnk+LCBpbnN0YW5jZTogYW55KSA9PiBhbnkpOiB2b2lkIHtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiB0aGlzLl9lbnRyaWVzLmVudHJpZXMoKSkge1xuICAgICAgY2FsbGJhY2soa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGhhcyhpZDogSVNlcnZpY2VJZGVudGlmaWVyPGFueT4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fZW50cmllcy5oYXMoaWQpO1xuICB9XG5cbiAgcHVibGljIGdldDxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+KTogVCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2VudHJpZXMuZ2V0KGlkKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSW5zdGFudGlhdGlvblNlcnZpY2UgaW1wbGVtZW50cyBJSW5zdGFudGlhdGlvblNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfc2VydmljZXM6IFNlcnZpY2VDb2xsZWN0aW9uID0gbmV3IFNlcnZpY2VDb2xsZWN0aW9uKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc2VydmljZXMuc2V0KElJbnN0YW50aWF0aW9uU2VydmljZSwgdGhpcyk7XG4gIH1cblxuICBwdWJsaWMgc2V0U2VydmljZTxUPihpZDogSVNlcnZpY2VJZGVudGlmaWVyPFQ+LCBpbnN0YW5jZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX3NlcnZpY2VzLnNldChpZCwgaW5zdGFuY2UpO1xuICB9XG5cbiAgcHVibGljIGdldFNlcnZpY2U8VD4oaWQ6IElTZXJ2aWNlSWRlbnRpZmllcjxUPik6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlcy5nZXQoaWQpO1xuICB9XG5cbiAgcHVibGljIGNyZWF0ZUluc3RhbmNlPFQ+KGN0b3I6IGFueSwgLi4uYXJnczogYW55W10pOiBUIHtcbiAgICBjb25zdCBzZXJ2aWNlRGVwZW5kZW5jaWVzID0gZ2V0U2VydmljZURlcGVuZGVuY2llcyhjdG9yKS5zb3J0KChhLCBiKSA9PiBhLmluZGV4IC0gYi5pbmRleCk7XG5cbiAgICBjb25zdCBzZXJ2aWNlQXJnczogYW55W10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IGRlcGVuZGVuY3kgb2Ygc2VydmljZURlcGVuZGVuY2llcykge1xuICAgICAgY29uc3Qgc2VydmljZSA9IHRoaXMuX3NlcnZpY2VzLmdldChkZXBlbmRlbmN5LmlkKTtcbiAgICAgIGlmICghc2VydmljZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtjcmVhdGVJbnN0YW5jZV0gJHtjdG9yLm5hbWV9IGRlcGVuZHMgb24gVU5LTk9XTiBzZXJ2aWNlICR7ZGVwZW5kZW5jeS5pZC5faWR9LmApO1xuICAgICAgfVxuICAgICAgc2VydmljZUFyZ3MucHVzaChzZXJ2aWNlKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNlcnZpY2VBcmdQb3MgPSBzZXJ2aWNlRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDAgPyBzZXJ2aWNlRGVwZW5kZW5jaWVzWzBdLmluZGV4IDogYXJncy5sZW5ndGg7XG5cbiAgICAvLyBjaGVjayBmb3IgYXJndW1lbnQgbWlzbWF0Y2hlcywgYWRqdXN0IHN0YXRpYyBhcmdzIGlmIG5lZWRlZFxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gZmlyc3RTZXJ2aWNlQXJnUG9zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFtjcmVhdGVJbnN0YW5jZV0gRmlyc3Qgc2VydmljZSBkZXBlbmRlbmN5IG9mICR7Y3Rvci5uYW1lfSBhdCBwb3NpdGlvbiAke2ZpcnN0U2VydmljZUFyZ1BvcyArIDF9IGNvbmZsaWN0cyB3aXRoICR7YXJncy5sZW5ndGh9IHN0YXRpYyBhcmd1bWVudHNgKTtcbiAgICB9XG5cbiAgICAvLyBub3cgY3JlYXRlIHRoZSBpbnN0YW5jZVxuICAgIHJldHVybiBuZXcgY3RvciguLi5bLi4uYXJncywgLi4uc2VydmljZUFyZ3NdKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJTG9nU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBMb2dMZXZlbEVudW0gfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuXG50eXBlIExvZ1R5cGUgPSAobWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKSA9PiB2b2lkO1xuXG5pbnRlcmZhY2UgSUNvbnNvbGUge1xuICBsb2c6IExvZ1R5cGU7XG4gIGVycm9yOiBMb2dUeXBlO1xuICBpbmZvOiBMb2dUeXBlO1xuICB0cmFjZTogTG9nVHlwZTtcbiAgd2FybjogTG9nVHlwZTtcbn1cblxuLy8gY29uc29sZSBpcyBhdmFpbGFibGUgb24gYm90aCBub2RlLmpzIGFuZCBicm93c2VyIGNvbnRleHRzIGJ1dCB0aGUgY29tbW9uXG4vLyBtb2R1bGUgZG9lc24ndCBkZXBlbmQgb24gdGhlbSBzbyB3ZSBuZWVkIHRvIGV4cGxpY2l0bHkgZGVjbGFyZSBpdC5cbmRlY2xhcmUgY29uc3QgY29uc29sZTogSUNvbnNvbGU7XG5cbmNvbnN0IG9wdGlvbnNLZXlUb0xvZ0xldmVsOiB7IFtrZXk6IHN0cmluZ106IExvZ0xldmVsRW51bSB9ID0ge1xuICB0cmFjZTogTG9nTGV2ZWxFbnVtLlRSQUNFLFxuICBkZWJ1ZzogTG9nTGV2ZWxFbnVtLkRFQlVHLFxuICBpbmZvOiBMb2dMZXZlbEVudW0uSU5GTyxcbiAgd2FybjogTG9nTGV2ZWxFbnVtLldBUk4sXG4gIGVycm9yOiBMb2dMZXZlbEVudW0uRVJST1IsXG4gIG9mZjogTG9nTGV2ZWxFbnVtLk9GRlxufTtcblxuY29uc3QgTE9HX1BSRUZJWCA9ICd4dGVybS5qczogJztcblxuZXhwb3J0IGNsYXNzIExvZ1NlcnZpY2UgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUxvZ1NlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHJpdmF0ZSBfbG9nTGV2ZWw6IExvZ0xldmVsRW51bSA9IExvZ0xldmVsRW51bS5PRkY7XG4gIHB1YmxpYyBnZXQgbG9nTGV2ZWwoKTogTG9nTGV2ZWxFbnVtIHsgcmV0dXJuIHRoaXMuX2xvZ0xldmVsOyB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElPcHRpb25zU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9vcHRpb25zU2VydmljZTogSU9wdGlvbnNTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fdXBkYXRlTG9nTGV2ZWwoKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdsb2dMZXZlbCcsICgpID0+IHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCkpKTtcblxuICAgIC8vIEZvciB0cmFjZSBsb2dnaW5nLCBhc3N1bWUgdGhlIGxhdGVzdCBjcmVhdGVkIGxvZyBzZXJ2aWNlIGlzIHZhbGlkXG4gICAgdHJhY2VMb2dnZXIgPSB0aGlzO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlTG9nTGV2ZWwoKTogdm9pZCB7XG4gICAgdGhpcy5fbG9nTGV2ZWwgPSBvcHRpb25zS2V5VG9Mb2dMZXZlbFt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxvZ0xldmVsXTtcbiAgfVxuXG4gIHByaXZhdGUgX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMob3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25hbFBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25hbFBhcmFtc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBvcHRpb25hbFBhcmFtc1tpXSA9IG9wdGlvbmFsUGFyYW1zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbG9nKHR5cGU6IExvZ1R5cGUsIG1lc3NhZ2U6IHN0cmluZywgb3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgdGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhvcHRpb25hbFBhcmFtcyk7XG4gICAgdHlwZS5jYWxsKGNvbnNvbGUsICh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlciA/ICcnIDogTE9HX1BSRUZJWCkgKyBtZXNzYWdlLCAuLi5vcHRpb25hbFBhcmFtcyk7XG4gIH1cblxuICBwdWJsaWMgdHJhY2UobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLlRSQUNFKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LnRyYWNlLmJpbmQodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXIpID8/IGNvbnNvbGUubG9nLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5ERUJVRykge1xuICAgICAgdGhpcy5fbG9nKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyPy5kZWJ1Zy5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKSA/PyBjb25zb2xlLmxvZywgbWVzc2FnZSwgb3B0aW9uYWxQYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2xvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5JTkZPKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LmluZm8uYmluZCh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcikgPz8gY29uc29sZS5pbmZvLCBtZXNzYWdlLCBvcHRpb25hbFBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHdhcm4obWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLldBUk4pIHtcbiAgICAgIHRoaXMuX2xvZyh0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmxvZ2dlcj8ud2Fybi5iaW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMubG9nZ2VyKSA/PyBjb25zb2xlLndhcm4sIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLkVSUk9SKSB7XG4gICAgICB0aGlzLl9sb2codGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXI/LmVycm9yLmJpbmQodGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5sb2dnZXIpID8/IGNvbnNvbGUuZXJyb3IsIG1lc3NhZ2UsIG9wdGlvbmFsUGFyYW1zKTtcbiAgICB9XG4gIH1cbn1cblxubGV0IHRyYWNlTG9nZ2VyOiBJTG9nU2VydmljZTtcbmV4cG9ydCBmdW5jdGlvbiBzZXRUcmFjZUxvZ2dlcihsb2dnZXI6IElMb2dTZXJ2aWNlKTogdm9pZCB7XG4gIHRyYWNlTG9nZ2VyID0gbG9nZ2VyO1xufVxuXG4vKipcbiAqIEEgZGVjb3JhdG9yIHRoYXQgY2FuIGJlIHVzZWQgdG8gYXV0b21hdGljYWxseSBsb2cgdHJhY2UgY2FsbHMgdG8gdGhlIGRlY29yYXRlZCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYWNlQ2FsbChfdGFyZ2V0OiBhbnksIGtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBhbnkpOiBhbnkge1xuICBpZiAodHlwZW9mIGRlc2NyaXB0b3IudmFsdWUgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBzdXBwb3J0ZWQnKTtcbiAgfVxuICBjb25zdCBmbktleSA9ICd2YWx1ZSc7XG4gIGNvbnN0IGZuID0gZGVzY3JpcHRvci52YWx1ZTtcbiAgZGVzY3JpcHRvcltmbktleV0gPSBmdW5jdGlvbiAoLi4uYXJnczogYW55W10pIHtcbiAgICAvLyBFYXJseSBleGl0XG4gICAgaWYgKHRyYWNlTG9nZ2VyLmxvZ0xldmVsICE9PSBMb2dMZXZlbEVudW0uVFJBQ0UpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG5cbiAgICB0cmFjZUxvZ2dlci50cmFjZShgR2x5cGhSZW5kZXJlciMke2ZuLm5hbWV9KCR7YXJncy5tYXAoZSA9PiBKU09OLnN0cmluZ2lmeShlKSkuam9pbignLCAnKX0pYCk7XG4gICAgY29uc3QgcmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgdHJhY2VMb2dnZXIudHJhY2UoYEdseXBoUmVuZGVyZXIjJHtmbi5uYW1lfSByZXR1cm5gLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJQ2lyY3VsYXJMaXN0IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBJSW5zZXJ0RXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGVsZXRlRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuICBhbW91bnQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2lyY3VsYXIgbGlzdDsgYSBsaXN0IHdpdGggYSBtYXhpbXVtIHNpemUgdGhhdCB3cmFwcyBhcm91bmQgd2hlbiBwdXNoIGlzIGNhbGxlZCxcbiAqIG92ZXJyaWRpbmcgdmFsdWVzIGF0IHRoZSBzdGFydCBvZiB0aGUgbGlzdC5cbiAqL1xuZXhwb3J0IGNsYXNzIENpcmN1bGFyTGlzdDxUPiBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQ2lyY3VsYXJMaXN0PFQ+IHtcbiAgcHJvdGVjdGVkIF9hcnJheTogKFQgfCB1bmRlZmluZWQpW107XG4gIHByaXZhdGUgX3N0YXJ0SW5kZXg6IG51bWJlcjtcbiAgcHJpdmF0ZSBfbGVuZ3RoOiBudW1iZXI7XG5cbiAgcHVibGljIHJlYWRvbmx5IG9uRGVsZXRlRW1pdHRlciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPElEZWxldGVFdmVudD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRlbGV0ZSA9IHRoaXMub25EZWxldGVFbWl0dGVyLmV2ZW50O1xuICBwdWJsaWMgcmVhZG9ubHkgb25JbnNlcnRFbWl0dGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SUluc2VydEV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uSW5zZXJ0ID0gdGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnQ7XG4gIHB1YmxpYyByZWFkb25seSBvblRyaW1FbWl0dGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uVHJpbSA9IHRoaXMub25UcmltRW1pdHRlci5ldmVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9tYXhMZW5ndGg6IG51bWJlclxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2FycmF5ID0gbmV3IEFycmF5PFQ+KHRoaXMuX21heExlbmd0aCk7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gICAgdGhpcy5fbGVuZ3RoID0gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWF4TGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heExlbmd0aDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgbWF4TGVuZ3RoKG5ld01heExlbmd0aDogbnVtYmVyKSB7XG4gICAgLy8gVGhlcmUgd2FzIG5vIGNoYW5nZSBpbiBtYXhMZW5ndGgsIHJldHVybiBlYXJseS5cbiAgICBpZiAodGhpcy5fbWF4TGVuZ3RoID09PSBuZXdNYXhMZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZWNvbnN0cnVjdCBhcnJheSwgc3RhcnRpbmcgYXQgaW5kZXggMC4gT25seSB0cmFuc2ZlciB2YWx1ZXMgZnJvbSB0aGVcbiAgICAvLyBpbmRleGVzIDAgdG8gbGVuZ3RoLlxuICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IEFycmF5PFQgfCB1bmRlZmluZWQ+KG5ld01heExlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbihuZXdNYXhMZW5ndGgsIHRoaXMubGVuZ3RoKTsgaSsrKSB7XG4gICAgICBuZXdBcnJheVtpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXTtcbiAgICB9XG4gICAgdGhpcy5fYXJyYXkgPSBuZXdBcnJheTtcbiAgICB0aGlzLl9tYXhMZW5ndGggPSBuZXdNYXhMZW5ndGg7XG4gICAgdGhpcy5fc3RhcnRJbmRleCA9IDA7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgc2V0IGxlbmd0aChuZXdMZW5ndGg6IG51bWJlcikge1xuICAgIGlmIChuZXdMZW5ndGggPiB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLl9sZW5ndGg7IGkgPCBuZXdMZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9hcnJheVtpXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fbGVuZ3RoID0gbmV3TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHZhbHVlIGF0IGFuIGluZGV4LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgdGhlcmUgaXMgbm8gYm91bmRzIGNoZWNraW5nIGhlcmUsIHRoZSBpbmRleCByZWZlcmVuY2UgaXNcbiAgICogY2lyY3VsYXIgc28gdGhpcyBzaG91bGQgYWx3YXlzIHJldHVybiBhIHZhbHVlIGFuZCBuZXZlciB0aHJvdy5cbiAgICogQHBhcmFtIGluZGV4IFRoZSBpbmRleCBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgY29ycmVzcG9uZGluZyB0byB0aGUgaW5kZXguXG4gICAqL1xuICBwdWJsaWMgZ2V0KGluZGV4OiBudW1iZXIpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoaW5kZXgpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBhdCBhbiBpbmRleC5cbiAgICpcbiAgICogTm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHRoZXJlIGlzIG5vIGJvdW5kcyBjaGVja2luZyBoZXJlLCB0aGUgaW5kZXggcmVmZXJlbmNlIGlzXG4gICAqIGNpcmN1bGFyIHNvIHRoaXMgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWx1ZSBhbmQgbmV2ZXIgdGhyb3cuXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgaW5kZXggdG8gc2V0LlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAgICovXG4gIHB1YmxpYyBzZXQoaW5kZXg6IG51bWJlciwgdmFsdWU6IFQgfCB1bmRlZmluZWQpOiB2b2lkIHtcbiAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpbmRleCldID0gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogUHVzaGVzIGEgbmV3IHZhbHVlIG9udG8gdGhlIGxpc3QsIHdyYXBwaW5nIGFyb3VuZCB0byB0aGUgc3RhcnQgb2YgdGhlIGFycmF5LCBvdmVycmlkaW5nIGluZGV4IDBcbiAgICogaWYgdGhlIG1heGltdW0gbGVuZ3RoIGlzIHJlYWNoZWQuXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHVzaCBvbnRvIHRoZSBsaXN0LlxuICAgKi9cbiAgcHVibGljIHB1c2godmFsdWU6IFQpOiB2b2lkIHtcbiAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgpXSA9IHZhbHVlO1xuICAgIGlmICh0aGlzLl9sZW5ndGggPT09IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgdGhpcy5fc3RhcnRJbmRleCA9ICsrdGhpcy5fc3RhcnRJbmRleCAlIHRoaXMuX21heExlbmd0aDtcbiAgICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sZW5ndGgrKztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWR2YW5jZSByaW5nYnVmZmVyIGluZGV4IGFuZCByZXR1cm4gY3VycmVudCBlbGVtZW50IGZvciByZWN5Y2xpbmcuXG4gICAqIE5vdGU6IFRoZSBidWZmZXIgbXVzdCBiZSBmdWxsIGZvciB0aGlzIG1ldGhvZCB0byB3b3JrLlxuICAgKiBAdGhyb3dzIFdoZW4gdGhlIGJ1ZmZlciBpcyBub3QgZnVsbC5cbiAgICovXG4gIHB1YmxpYyByZWN5Y2xlKCk6IFQge1xuICAgIGlmICh0aGlzLl9sZW5ndGggIT09IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSByZWN5Y2xlIHdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsJyk7XG4gICAgfVxuICAgIHRoaXMuX3N0YXJ0SW5kZXggPSArK3RoaXMuX3N0YXJ0SW5kZXggJSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSk7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aCAtIDEpXSE7XG4gIH1cblxuICAvKipcbiAgICogUmluZ2J1ZmZlciBpcyBhdCBtYXggbGVuZ3RoLlxuICAgKi9cbiAgcHVibGljIGdldCBpc0Z1bGwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aCA9PT0gdGhpcy5fbWF4TGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5kIHJldHVybnMgdGhlIGxhc3QgdmFsdWUgb24gdGhlIGxpc3QuXG4gICAqIEByZXR1cm5zIFRoZSBwb3BwZWQgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgcG9wKCk6IFQgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgtLSAtIDEpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFuZC9vciBpbnNlcnRzIGl0ZW1zIGF0IGEgcGFydGljdWxhciBpbmRleCAoaW4gdGhhdCBvcmRlcikuIFVubGlrZVxuICAgKiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLCB0aGlzIG9wZXJhdGlvbiBkb2VzIG5vdCByZXR1cm4gdGhlIGRlbGV0ZWQgaXRlbXMgYXMgYSBuZXcgYXJyYXkgaW5cbiAgICogb3JkZXIgdG8gc2F2ZSBjcmVhdGluZyBhIG5ldyBhcnJheS4gTm90ZSB0aGF0IHRoaXMgb3BlcmF0aW9uIG1heSBzaGlmdCBhbGwgdmFsdWVzIGluIHRoZSBsaXN0XG4gICAqIGluIHRoZSB3b3JzdCBjYXNlLlxuICAgKiBAcGFyYW0gc3RhcnQgVGhlIGluZGV4IHRvIGRlbGV0ZSBhbmQvb3IgaW5zZXJ0LlxuICAgKiBAcGFyYW0gZGVsZXRlQ291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBkZWxldGUuXG4gICAqIEBwYXJhbSBpdGVtcyBUaGUgaXRlbXMgdG8gaW5zZXJ0LlxuICAgKi9cbiAgcHVibGljIHNwbGljZShzdGFydDogbnVtYmVyLCBkZWxldGVDb3VudDogbnVtYmVyLCAuLi5pdGVtczogVFtdKTogdm9pZCB7XG4gICAgLy8gRGVsZXRlIGl0ZW1zXG4gICAgaWYgKGRlbGV0ZUNvdW50KSB7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCB0aGlzLl9sZW5ndGggLSBkZWxldGVDb3VudDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkpXSA9IHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGkgKyBkZWxldGVDb3VudCldO1xuICAgICAgfVxuICAgICAgdGhpcy5fbGVuZ3RoIC09IGRlbGV0ZUNvdW50O1xuICAgICAgdGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7IGluZGV4OiBzdGFydCwgYW1vdW50OiBkZWxldGVDb3VudCB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgaXRlbXNcbiAgICBmb3IgKGxldCBpID0gdGhpcy5fbGVuZ3RoIC0gMTsgaSA+PSBzdGFydDsgaS0tKSB7XG4gICAgICB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpICsgaXRlbXMubGVuZ3RoKV0gPSB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChpKV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHN0YXJ0ICsgaSldID0gaXRlbXNbaV07XG4gICAgfVxuICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHRoaXMub25JbnNlcnRFbWl0dGVyLmZpcmUoeyBpbmRleDogc3RhcnQsIGFtb3VudDogaXRlbXMubGVuZ3RoIH0pO1xuICAgIH1cblxuICAgIC8vIEFkanVzdCBsZW5ndGggYXMgbmVlZGVkXG4gICAgaWYgKHRoaXMuX2xlbmd0aCArIGl0ZW1zLmxlbmd0aCA+IHRoaXMuX21heExlbmd0aCkge1xuICAgICAgY29uc3QgY291bnRUb1RyaW0gPSAodGhpcy5fbGVuZ3RoICsgaXRlbXMubGVuZ3RoKSAtIHRoaXMuX21heExlbmd0aDtcbiAgICAgIHRoaXMuX3N0YXJ0SW5kZXggKz0gY291bnRUb1RyaW07XG4gICAgICB0aGlzLl9sZW5ndGggPSB0aGlzLl9tYXhMZW5ndGg7XG4gICAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShjb3VudFRvVHJpbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xlbmd0aCArPSBpdGVtcy5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaW1zIGEgbnVtYmVyIG9mIGl0ZW1zIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBsaXN0LlxuICAgKiBAcGFyYW0gY291bnQgVGhlIG51bWJlciBvZiBpdGVtcyB0byByZW1vdmUuXG4gICAqL1xuICBwdWJsaWMgdHJpbVN0YXJ0KGNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoY291bnQgPiB0aGlzLl9sZW5ndGgpIHtcbiAgICAgIGNvdW50ID0gdGhpcy5fbGVuZ3RoO1xuICAgIH1cbiAgICB0aGlzLl9zdGFydEluZGV4ICs9IGNvdW50O1xuICAgIHRoaXMuX2xlbmd0aCAtPSBjb3VudDtcbiAgICB0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShjb3VudCk7XG4gIH1cblxuICBwdWJsaWMgc2hpZnRFbGVtZW50cyhzdGFydDogbnVtYmVyLCBjb3VudDogbnVtYmVyLCBvZmZzZXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChjb3VudCA8PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5fbGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3N0YXJ0IGFyZ3VtZW50IG91dCBvZiByYW5nZScpO1xuICAgIH1cbiAgICBpZiAoc3RhcnQgKyBvZmZzZXQgPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBzaGlmdCBlbGVtZW50cyBpbiBsaXN0IGJleW9uZCBpbmRleCAwJyk7XG4gICAgfVxuXG4gICAgaWYgKG9mZnNldCA+IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSBjb3VudCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIHRoaXMuc2V0KHN0YXJ0ICsgaSArIG9mZnNldCwgdGhpcy5nZXQoc3RhcnQgKyBpKSk7XG4gICAgICB9XG4gICAgICBjb25zdCBleHBhbmRMaXN0QnkgPSAoc3RhcnQgKyBjb3VudCArIG9mZnNldCkgLSB0aGlzLl9sZW5ndGg7XG4gICAgICBpZiAoZXhwYW5kTGlzdEJ5ID4gMCkge1xuICAgICAgICB0aGlzLl9sZW5ndGggKz0gZXhwYW5kTGlzdEJ5O1xuICAgICAgICB3aGlsZSAodGhpcy5fbGVuZ3RoID4gdGhpcy5fbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5fbGVuZ3RoLS07XG4gICAgICAgICAgdGhpcy5fc3RhcnRJbmRleCsrO1xuICAgICAgICAgIHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLnNldChzdGFydCArIGkgKyBvZmZzZXQsIHRoaXMuZ2V0KHN0YXJ0ICsgaSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjeWNsaWMgaW5kZXggZm9yIHRoZSBzcGVjaWZpZWQgcmVndWxhciBpbmRleC4gVGhlIGN5Y2xpYyBpbmRleCBjYW4gdGhlbiBiZSB1c2VkIG9uIHRoZVxuICAgKiBiYWNraW5nIGFycmF5IHRvIGdldCB0aGUgZWxlbWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlZ3VsYXIgaW5kZXguXG4gICAqIEBwYXJhbSBpbmRleCBUaGUgcmVndWxhciBpbmRleC5cbiAgICogQHJldHVybnMgVGhlIGN5Y2xpYyBpbmRleC5cbiAgICovXG4gIHByaXZhdGUgX2dldEN5Y2xpY0luZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy5fc3RhcnRJbmRleCArIGluZGV4KSAlIHRoaXMuX21heExlbmd0aDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2hhckRhdGEsIElBdHRyaWJ1dGVEYXRhLCBJQnVmZmVyTGluZSwgSUNlbGxEYXRhLCBJRXh0ZW5kZWRBdHRycyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9BdHRyaWJ1dGVEYXRhJztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBBdHRyaWJ1dGVzLCBCZ0ZsYWdzLCBDSEFSX0RBVEFfQVRUUl9JTkRFWCwgQ0hBUl9EQVRBX0NIQVJfSU5ERVgsIENIQVJfREFUQV9XSURUSF9JTkRFWCwgQ29udGVudCwgTlVMTF9DRUxMX0NIQVIsIE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIFdISVRFU1BBQ0VfQ0VMTF9DSEFSIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgc3RyaW5nRnJvbUNvZGVQb2ludCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5cbi8qKlxuICogYnVmZmVyIG1lbW9yeSBsYXlvdXQ6XG4gKlxuICogICB8ICAgICAgICAgICAgIHVpbnQzMl90ICAgICAgICAgICAgIHwgICAgICAgIHVpbnQzMl90ICAgICAgICAgfCAgICAgICAgdWludDMyX3QgICAgICAgICB8XG4gKiAgIHwgICAgICAgICAgICAgYGNvbnRlbnRgICAgICAgICAgICAgfCAgICAgICAgICBgRkdgICAgICAgICAgICB8ICAgICAgICAgIGBCR2AgICAgICAgICAgIHxcbiAqICAgfCB3Y3dpZHRoKDIpIGNvbWIoMSkgY29kZXBvaW50KDIxKSB8IGZsYWdzKDgpIFIoOCkgRyg4KSBCKDgpIHwgZmxhZ3MoOCkgUig4KSBHKDgpIEIoOCkgfFxuICovXG5cblxuLyoqIHR5cGVkIGFycmF5IHNsb3RzIHRha2VuIGJ5IG9uZSBjZWxsICovXG5jb25zdCBDRUxMX1NJWkUgPSAzO1xuXG4vKipcbiAqIENlbGwgbWVtYmVyIGluZGljZXMuXG4gKlxuICogRGlyZWN0IGFjY2VzczpcbiAqICAgIGBjb250ZW50ID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO2BcbiAqICAgIGBmZyA9IGRhdGFbY29sdW1uICogQ0VMTF9TSVpFICsgQ2VsbC5GR107YFxuICogICAgYGJnID0gZGF0YVtjb2x1bW4gKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtgXG4gKi9cbmNvbnN0IGVudW0gQ2VsbCB7XG4gIENPTlRFTlQgPSAwLFxuICBGRyA9IDEsIC8vIGN1cnJlbnRseSBzaW1wbHkgaG9sZHMgYWxsIGtub3duIGF0dHJzXG4gIEJHID0gMiAgLy8gY3VycmVudGx5IHVudXNlZFxufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9BVFRSX0RBVEEgPSBPYmplY3QuZnJlZXplKG5ldyBBdHRyaWJ1dGVEYXRhKCkpO1xuXG4vLyBXb3JrIHZhcmlhYmxlcyB0byBhdm9pZCBnYXJiYWdlIGNvbGxlY3Rpb25cbmxldCAkc3RhcnRJbmRleCA9IDA7XG5cbi8qKiBGYWN0b3Igd2hlbiB0byBjbGVhbnVwIHVuZGVybHlpbmcgYXJyYXkgYnVmZmVyIGFmdGVyIHNocmlua2luZy4gKi9cbmNvbnN0IENMRUFOVVBfVEhSRVNIT0xEID0gMjtcblxuLyoqXG4gKiBUeXBlZCBhcnJheSBiYXNlZCBidWZmZXJsaW5lIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRoZXJlIGFyZSAyIHdheXMgdG8gaW5zZXJ0IGRhdGEgaW50byB0aGUgY2VsbCBidWZmZXI6XG4gKiAtIGBzZXRDZWxsRnJvbUNvZGVwb2ludGAgKyBgYWRkQ29kZXBvaW50VG9DZWxsYFxuICogICBVc2UgdGhlc2UgZm9yIGRhdGEgdGhhdCBpcyBhbHJlYWR5IFVURjMyLlxuICogICBVc2VkIGR1cmluZyBub3JtYWwgaW5wdXQgaW4gYElucHV0SGFuZGxlcmAgZm9yIGZhc3RlciBidWZmZXIgYWNjZXNzLlxuICogLSBgc2V0Q2VsbGBcbiAqICAgVGhpcyBtZXRob2QgdGFrZXMgYSBDZWxsRGF0YSBvYmplY3QgYW5kIHN0b3JlcyB0aGUgZGF0YSBpbiB0aGUgYnVmZmVyLlxuICogICBVc2UgYENlbGxEYXRhLmZyb21DaGFyRGF0YWAgdG8gY3JlYXRlIHRoZSBDZWxsRGF0YSBvYmplY3QgKGUuZy4gZnJvbSBKUyBzdHJpbmcpLlxuICpcbiAqIFRvIHJldHJpZXZlIGRhdGEgZnJvbSB0aGUgYnVmZmVyIHVzZSBlaXRoZXIgb25lIG9mIHRoZSBwcmltaXRpdmUgbWV0aG9kc1xuICogKGlmIG9ubHkgb25lIHBhcnRpY3VsYXIgdmFsdWUgaXMgbmVlZGVkKSBvciBgbG9hZENlbGxgLiBGb3IgYGxvYWRDZWxsYCBpbiBhIGxvb3BcbiAqIG1lbW9yeSBhbGxvY3MgLyBHQyBwcmVzc3VyZSBjYW4gYmUgZ3JlYXRseSByZWR1Y2VkIGJ5IHJldXNpbmcgdGhlIENlbGxEYXRhIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJ1ZmZlckxpbmUgaW1wbGVtZW50cyBJQnVmZmVyTGluZSB7XG4gIHByb3RlY3RlZCBfZGF0YTogVWludDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfY29tYmluZWQ6IHtbaW5kZXg6IG51bWJlcl06IHN0cmluZ30gPSB7fTtcbiAgcHJvdGVjdGVkIF9leHRlbmRlZEF0dHJzOiB7W2luZGV4OiBudW1iZXJdOiBJRXh0ZW5kZWRBdHRycyB8IHVuZGVmaW5lZH0gPSB7fTtcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbHM6IG51bWJlciwgZmlsbENlbGxEYXRhPzogSUNlbGxEYXRhLCBwdWJsaWMgaXNXcmFwcGVkOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KGNvbHMgKiBDRUxMX1NJWkUpO1xuICAgIGNvbnN0IGNlbGwgPSBmaWxsQ2VsbERhdGEgfHwgQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERV0pO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sczsgKytpKSB7XG4gICAgICB0aGlzLnNldENlbGwoaSwgY2VsbCk7XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gY29scztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY2VsbCBkYXRhIENoYXJEYXRhLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcHVibGljIGdldChpbmRleDogbnVtYmVyKTogQ2hhckRhdGEge1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBjb25zdCBjcCA9IGNvbnRlbnQgJiBDb250ZW50LkNPREVQT0lOVF9NQVNLO1xuICAgIHJldHVybiBbXG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10sXG4gICAgICAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSylcbiAgICAgICAgPyB0aGlzLl9jb21iaW5lZFtpbmRleF1cbiAgICAgICAgOiAoY3ApID8gc3RyaW5nRnJvbUNvZGVQb2ludChjcCkgOiAnJyxcbiAgICAgIGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCxcbiAgICAgIChjb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKVxuICAgICAgICA/IHRoaXMuX2NvbWJpbmVkW2luZGV4XS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2luZGV4XS5sZW5ndGggLSAxKVxuICAgICAgICA6IGNwXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgY2VsbCBkYXRhIGZyb20gQ2hhckRhdGEuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBwdWJsaWMgc2V0KGluZGV4OiBudW1iZXIsIHZhbHVlOiBDaGFyRGF0YSk6IHZvaWQge1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IHZhbHVlW0NIQVJfREFUQV9BVFRSX0lOREVYXTtcbiAgICBpZiAodmFsdWVbQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2luZGV4XSA9IHZhbHVlWzFdO1xuICAgICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBpbmRleCB8IENvbnRlbnQuSVNfQ09NQklORURfTUFTSyB8ICh2YWx1ZVtDSEFSX0RBVEFfV0lEVEhfSU5ERVhdIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IHZhbHVlW0NIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApIHwgKHZhbHVlW0NIQVJfREFUQV9XSURUSF9JTkRFWF0gPDwgQ29udGVudC5XSURUSF9TSElGVCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHByaW1pdGl2ZSBnZXR0ZXJzXG4gICAqIHVzZSB0aGVzZSB3aGVuIG9ubHkgb25lIHZhbHVlIGlzIG5lZWRlZCwgb3RoZXJ3aXNlIHVzZSBgbG9hZENlbGxgXG4gICAqL1xuICBwdWJsaWMgZ2V0V2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID4+IENvbnRlbnQuV0lEVEhfU0hJRlQ7XG4gIH1cblxuICAvKiogVGVzdCB3aGV0aGVyIGNvbnRlbnQgaGFzIHdpZHRoLiAqL1xuICBwdWJsaWMgaGFzV2lkdGgoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5XSURUSF9NQVNLO1xuICB9XG5cbiAgLyoqIEdldCBGRyBjZWxsIGNvbXBvbmVudC4gKi9cbiAgcHVibGljIGdldEZnKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR107XG4gIH1cblxuICAvKiogR2V0IEJHIGNlbGwgY29tcG9uZW50LiAqL1xuICBwdWJsaWMgZ2V0QmcoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IHdoZXRoZXIgY29udGFpbnMgYW55IGNoYXJzLlxuICAgKiBCYXNpY2FsbHkgYW4gZW1wdHkgaGFzIG5vIGNvbnRlbnQsIGJ1dCBvdGhlciBjZWxscyBtaWdodCBkaWZmZXIgaW4gRkcvQkdcbiAgICogZnJvbSByZWFsIGVtcHR5IGNlbGxzLlxuICAgKi9cbiAgcHVibGljIGhhc0NvbnRlbnQoaW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5IQVNfQ09OVEVOVF9NQVNLO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb2RlcG9pbnQgb2YgdGhlIGNlbGwuXG4gICAqIFRvIGJlIGluIGxpbmUgd2l0aCBgY29kZWAgaW4gQ2hhckRhdGEgdGhpcyBlaXRoZXIgcmV0dXJuc1xuICAgKiBhIHNpbmdsZSBVVEYzMiBjb2RlcG9pbnQgb3IgdGhlIGxhc3QgY29kZXBvaW50IG9mIGEgY29tYmluZWQgc3RyaW5nLlxuICAgKi9cbiAgcHVibGljIGdldENvZGVQb2ludChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb21iaW5lZFtpbmRleF0uY2hhckNvZGVBdCh0aGlzLl9jb21iaW5lZFtpbmRleF0ubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgfVxuXG4gIC8qKiBUZXN0IHdoZXRoZXIgdGhlIGNlbGwgY29udGFpbnMgYSBjb21iaW5lZCBzdHJpbmcuICovXG4gIHB1YmxpYyBpc0NvbWJpbmVkKGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSztcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIHRoZSBzdHJpbmcgY29udGVudCBvZiB0aGUgY2VsbC4gKi9cbiAgcHVibGljIGdldFN0cmluZyhpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF07XG4gICAgaWYgKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb21iaW5lZFtpbmRleF07XG4gICAgfVxuICAgIGlmIChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykge1xuICAgICAgcmV0dXJuIHN0cmluZ0Zyb21Db2RlUG9pbnQoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spO1xuICAgIH1cbiAgICAvLyByZXR1cm4gZW1wdHkgc3RyaW5nIGZvciBlbXB0eSBjZWxsc1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIC8qKiBHZXQgc3RhdGUgb2YgcHJvdGVjdGVkIGZsYWcuICovXG4gIHB1YmxpYyBpc1Byb3RlY3RlZChpbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQkddICYgQmdGbGFncy5QUk9URUNURUQ7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCBkYXRhIGF0IGBpbmRleGAgaW50byBgY2VsbGAuIFRoaXMgaXMgdXNlZCB0byBhY2Nlc3MgY2VsbHMgaW4gYSB3YXkgdGhhdCdzIG1vcmUgZnJpZW5kbHlcbiAgICogdG8gR0MgYXMgaXQgc2lnbmlmaWNhbnRseSByZWR1Y2VkIHRoZSBhbW91bnQgb2YgbmV3IG9iamVjdHMvcmVmZXJlbmNlcyBuZWVkZWQuXG4gICAqL1xuICBwdWJsaWMgbG9hZENlbGwoaW5kZXg6IG51bWJlciwgY2VsbDogSUNlbGxEYXRhKTogSUNlbGxEYXRhIHtcbiAgICAkc3RhcnRJbmRleCA9IGluZGV4ICogQ0VMTF9TSVpFO1xuICAgIGNlbGwuY29udGVudCA9IHRoaXMuX2RhdGFbJHN0YXJ0SW5kZXggKyBDZWxsLkNPTlRFTlRdO1xuICAgIGNlbGwuZmcgPSB0aGlzLl9kYXRhWyRzdGFydEluZGV4ICsgQ2VsbC5GR107XG4gICAgY2VsbC5iZyA9IHRoaXMuX2RhdGFbJHN0YXJ0SW5kZXggKyBDZWxsLkJHXTtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICBjZWxsLmNvbWJpbmVkRGF0YSA9IHRoaXMuX2NvbWJpbmVkW2luZGV4XTtcbiAgICB9XG4gICAgaWYgKGNlbGwuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkge1xuICAgICAgY2VsbC5leHRlbmRlZCA9IHRoaXMuX2V4dGVuZGVkQXR0cnNbaW5kZXhdITtcbiAgICB9XG4gICAgcmV0dXJuIGNlbGw7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGRhdGEgYXQgYGluZGV4YCB0byBgY2VsbGAuXG4gICAqL1xuICBwdWJsaWMgc2V0Q2VsbChpbmRleDogbnVtYmVyLCBjZWxsOiBJQ2VsbERhdGEpOiB2b2lkIHtcbiAgICBpZiAoY2VsbC5jb250ZW50ICYgQ29udGVudC5JU19DT01CSU5FRF9NQVNLKSB7XG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gPSBjZWxsLmNvbWJpbmVkRGF0YTtcbiAgICB9XG4gICAgaWYgKGNlbGwuYmcgJiBCZ0ZsYWdzLkhBU19FWFRFTkRFRCkge1xuICAgICAgdGhpcy5fZXh0ZW5kZWRBdHRyc1tpbmRleF0gPSBjZWxsLmV4dGVuZGVkO1xuICAgIH1cbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA9IGNlbGwuY29udGVudDtcbiAgICB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5GR10gPSBjZWxsLmZnO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSA9IGNlbGwuYmc7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGNlbGwgZGF0YSBmcm9tIGlucHV0IGhhbmRsZXIuXG4gICAqIFNpbmNlIHRoZSBpbnB1dCBoYW5kbGVyIHNlZSB0aGUgaW5jb21pbmcgY2hhcnMgYXMgVVRGMzIgY29kZXBvaW50cyxcbiAgICogaXQgZ2V0cyBhbiBvcHRpbWl6ZWQgYWNjZXNzIG1ldGhvZC5cbiAgICovXG4gIHB1YmxpYyBzZXRDZWxsRnJvbUNvZGVwb2ludChpbmRleDogbnVtYmVyLCBjb2RlUG9pbnQ6IG51bWJlciwgd2lkdGg6IG51bWJlciwgYXR0cnM6IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKGF0dHJzLmJnICYgQmdGbGFncy5IQVNfRVhURU5ERUQpIHtcbiAgICAgIHRoaXMuX2V4dGVuZGVkQXR0cnNbaW5kZXhdID0gYXR0cnMuZXh0ZW5kZWQ7XG4gICAgfVxuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID0gY29kZVBvaW50IHwgKHdpZHRoIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkZHXSA9IGF0dHJzLmZnO1xuICAgIHRoaXMuX2RhdGFbaW5kZXggKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSA9IGF0dHJzLmJnO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvZGVwb2ludCB0byBhIGNlbGwgZnJvbSBpbnB1dCBoYW5kbGVyLlxuICAgKiBEdXJpbmcgaW5wdXQgc3RhZ2UgY29tYmluaW5nIGNoYXJzIHdpdGggYSB3aWR0aCBvZiAwIGZvbGxvdyBhbmQgc3RhY2tcbiAgICogb250byBhIGxlYWRpbmcgY2hhci4gU2luY2Ugd2UgYWxyZWFkeSBzZXQgdGhlIGF0dHJzXG4gICAqIGJ5IHRoZSBwcmV2aW91cyBgc2V0RGF0YUZyb21Db2RlUG9pbnRgIGNhbGwsIHdlIGNhbiBvbWl0IGl0IGhlcmUuXG4gICAqL1xuICBwdWJsaWMgYWRkQ29kZXBvaW50VG9DZWxsKGluZGV4OiBudW1iZXIsIGNvZGVQb2ludDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgbGV0IGNvbnRlbnQgPSB0aGlzLl9kYXRhW2luZGV4ICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXTtcbiAgICBpZiAoY29udGVudCAmIENvbnRlbnQuSVNfQ09NQklORURfTUFTSykge1xuICAgICAgLy8gd2UgYWxyZWFkeSBoYXZlIGEgY29tYmluZWQgc3RyaW5nLCBzaW1wbHkgYWRkXG4gICAgICB0aGlzLl9jb21iaW5lZFtpbmRleF0gKz0gc3RyaW5nRnJvbUNvZGVQb2ludChjb2RlUG9pbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY29udGVudCAmIENvbnRlbnQuQ09ERVBPSU5UX01BU0spIHtcbiAgICAgICAgLy8gbm9ybWFsIGNhc2UgZm9yIGNvbWJpbmluZyBjaGFyczpcbiAgICAgICAgLy8gIC0gbW92ZSBjdXJyZW50IGxlYWRpbmcgY2hhciArIG5ldyBvbmUgaW50byBjb21iaW5lZCBzdHJpbmdcbiAgICAgICAgLy8gIC0gc2V0IGNvbWJpbmVkIGZsYWdcbiAgICAgICAgdGhpcy5fY29tYmluZWRbaW5kZXhdID0gc3RyaW5nRnJvbUNvZGVQb2ludChjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSykgKyBzdHJpbmdGcm9tQ29kZVBvaW50KGNvZGVQb2ludCk7XG4gICAgICAgIGNvbnRlbnQgJj0gfkNvbnRlbnQuQ09ERVBPSU5UX01BU0s7IC8vIHNldCBjb2RlcG9pbnQgaW4gYnVmZmVyIHRvIDBcbiAgICAgICAgY29udGVudCB8PSBDb250ZW50LklTX0NPTUJJTkVEX01BU0s7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbiAtIHdlIGFjdHVhbGx5IGhhdmUgbm8gZGF0YSBpbiB0aGUgY2VsbCB5ZXRcbiAgICAgICAgLy8gc2ltcGx5IHNldCB0aGUgZGF0YSBpbiB0aGUgY2VsbCBidWZmZXIgd2l0aCBhIHdpZHRoIG9mIDFcbiAgICAgICAgY29udGVudCA9IGNvZGVQb2ludCB8ICgxIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAod2lkdGgpIHtcbiAgICAgIGNvbnRlbnQgJj0gfkNvbnRlbnQuV0lEVEhfTUFTSztcbiAgICAgIGNvbnRlbnQgfD0gd2lkdGggPDwgQ29udGVudC5XSURUSF9TSElGVDtcbiAgICB9XG4gICAgdGhpcy5fZGF0YVtpbmRleCAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gPSBjb250ZW50O1xuICB9XG5cbiAgcHVibGljIGluc2VydENlbGxzKHBvczogbnVtYmVyLCBuOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgcG9zICU9IHRoaXMubGVuZ3RoO1xuXG4gICAgLy8gaGFuZGxlIGZ1bGx3aWR0aCBhdCBwb3M6IHJlc2V0IGNlbGwgb25lIHRvIHRoZSBsZWZ0IGlmIHBvcyBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmIChwb3MgJiYgdGhpcy5nZXRXaWR0aChwb3MgLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludChwb3MgLSAxLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cblxuICAgIGlmIChuIDwgdGhpcy5sZW5ndGggLSBwb3MpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIHBvcyAtIG4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB0aGlzLnNldENlbGwocG9zICsgbiArIGksIHRoaXMubG9hZENlbGwocG9zICsgaSwgY2VsbCkpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSBwb3M7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGhhbmRsZSBmdWxsd2lkdGggYXQgbGluZSBlbmQ6IHJlc2V0IGxhc3QgY2VsbCBpZiBpdCBpcyBmaXJzdCBjZWxsIG9mIGEgd2lkZSBjaGFyXG4gICAgaWYgKHRoaXMuZ2V0V2lkdGgodGhpcy5sZW5ndGggLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludCh0aGlzLmxlbmd0aCAtIDEsIDAsIDEsIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlbGV0ZUNlbGxzKHBvczogbnVtYmVyLCBuOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhKTogdm9pZCB7XG4gICAgcG9zICU9IHRoaXMubGVuZ3RoO1xuICAgIGlmIChuIDwgdGhpcy5sZW5ndGggLSBwb3MpIHtcbiAgICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sZW5ndGggLSBwb3MgLSBuOyArK2kpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsKHBvcyArIGksIHRoaXMubG9hZENlbGwocG9zICsgbiArIGksIGNlbGwpKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIG47IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbChpLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gcG9zOyBpIDwgdGhpcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IHBvczpcbiAgICAvLyAtIHJlc2V0IHBvcy0xIGlmIHdpZGUgY2hhclxuICAgIC8vIC0gcmVzZXQgcG9zIGlmIHdpZHRoPT0wIChwcmV2aW91cyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhcilcbiAgICBpZiAocG9zICYmIHRoaXMuZ2V0V2lkdGgocG9zIC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQocG9zIC0gMSwgMCwgMSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0V2lkdGgocG9zKSA9PT0gMCAmJiAhdGhpcy5oYXNDb250ZW50KHBvcykpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQocG9zLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZXBsYWNlQ2VsbHMoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgLy8gZnVsbCBicmFuY2hpbmcgb24gcmVzcGVjdFByb3RlY3Q9PXRydWUsIGhvcGVmdWxseSBnZXR0aW5nIGZhc3QgSklUIGZvciBzdGFuZGFyZCBjYXNlXG4gICAgaWYgKHJlc3BlY3RQcm90ZWN0KSB7XG4gICAgICBpZiAoc3RhcnQgJiYgdGhpcy5nZXRXaWR0aChzdGFydCAtIDEpID09PSAyICYmICF0aGlzLmlzUHJvdGVjdGVkKHN0YXJ0IC0gMSkpIHtcbiAgICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludChzdGFydCAtIDEsIDAsIDEsIGZpbGxDZWxsRGF0YSk7XG4gICAgICB9XG4gICAgICBpZiAoZW5kIDwgdGhpcy5sZW5ndGggJiYgdGhpcy5nZXRXaWR0aChlbmQgLSAxKSA9PT0gMiAmJiAhdGhpcy5pc1Byb3RlY3RlZChlbmQpKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQoZW5kLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHN0YXJ0IDwgZW5kICAmJiBzdGFydCA8IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1Byb3RlY3RlZChzdGFydCkpIHtcbiAgICAgICAgICB0aGlzLnNldENlbGwoc3RhcnQsIGZpbGxDZWxsRGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgc3RhcnQrKztcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IHN0YXJ0OiByZXNldCBjZWxsIG9uZSB0byB0aGUgbGVmdCBpZiBzdGFydCBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmIChzdGFydCAmJiB0aGlzLmdldFdpZHRoKHN0YXJ0IC0gMSkgPT09IDIpIHtcbiAgICAgIHRoaXMuc2V0Q2VsbEZyb21Db2RlcG9pbnQoc3RhcnQgLSAxLCAwLCAxLCBmaWxsQ2VsbERhdGEpO1xuICAgIH1cbiAgICAvLyBoYW5kbGUgZnVsbHdpZHRoIGF0IGxhc3QgY2VsbCArIDE6IHJlc2V0IHRvIGVtcHR5IGNlbGwgaWYgaXQgaXMgc2Vjb25kIHBhcnQgb2YgYSB3aWRlIGNoYXJcbiAgICBpZiAoZW5kIDwgdGhpcy5sZW5ndGggJiYgdGhpcy5nZXRXaWR0aChlbmQgLSAxKSA9PT0gMikge1xuICAgICAgdGhpcy5zZXRDZWxsRnJvbUNvZGVwb2ludChlbmQsIDAsIDEsIGZpbGxDZWxsRGF0YSk7XG4gICAgfVxuXG4gICAgd2hpbGUgKHN0YXJ0IDwgZW5kICAmJiBzdGFydCA8IHRoaXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLnNldENlbGwoc3RhcnQrKywgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplIEJ1ZmZlckxpbmUgdG8gYGNvbHNgIGZpbGxpbmcgZXhjZXNzIGNlbGxzIHdpdGggYGZpbGxDZWxsRGF0YWAuXG4gICAqIFRoZSB1bmRlcmx5aW5nIGFycmF5IGJ1ZmZlciB3aWxsIG5vdCBjaGFuZ2UgaWYgdGhlcmUgaXMgc3RpbGwgZW5vdWdoIHNwYWNlXG4gICAqIHRvIGhvbGQgdGhlIG5ldyBidWZmZXIgbGluZSBkYXRhLlxuICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nLCB3aGV0aGVyIGEgYGNsZWFudXBNZW1vcnlgIGNhbGwgd291bGQgZnJlZVxuICAgKiBleGNlc3MgbWVtb3J5ICh0cnVlIGFmdGVyIHNocmlua2luZyA+IENMRUFOVVBfVEhSRVNIT0xEKS5cbiAgICovXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCBmaWxsQ2VsbERhdGE6IElDZWxsRGF0YSk6IGJvb2xlYW4ge1xuICAgIGlmIChjb2xzID09PSB0aGlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2RhdGEubGVuZ3RoICogNCAqIENMRUFOVVBfVEhSRVNIT0xEIDwgdGhpcy5fZGF0YS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICB9XG4gICAgY29uc3QgdWludDMyQ2VsbHMgPSBjb2xzICogQ0VMTF9TSVpFO1xuICAgIGlmIChjb2xzID4gdGhpcy5sZW5ndGgpIHtcbiAgICAgIGlmICh0aGlzLl9kYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoID49IHVpbnQzMkNlbGxzICogNCkge1xuICAgICAgICAvLyBvcHRpbWl6YXRpb246IGF2b2lkIGFsbG9jIGFuZCBkYXRhIGNvcHkgaWYgYnVmZmVyIGhhcyBlbm91Z2ggcm9vbVxuICAgICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuX2RhdGEuYnVmZmVyLCAwLCB1aW50MzJDZWxscyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBzbG93IHBhdGg6IG5ldyBhbGxvYyBhbmQgZnVsbCBkYXRhIGNvcHlcbiAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheSh1aW50MzJDZWxscyk7XG4gICAgICAgIGRhdGEuc2V0KHRoaXMuX2RhdGEpO1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aDsgaSA8IGNvbHM7ICsraSkge1xuICAgICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gb3B0aW1pemF0aW9uOiBqdXN0IHNocmluayB0aGUgdmlldyBvbiBleGlzdGluZyBidWZmZXJcbiAgICAgIHRoaXMuX2RhdGEgPSB0aGlzLl9kYXRhLnN1YmFycmF5KDAsIHVpbnQzMkNlbGxzKTtcbiAgICAgIC8vIFJlbW92ZSBhbnkgY3V0IG9mZiBjb21iaW5lZCBkYXRhXG4gICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fY29tYmluZWQpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KGtleXNbaV0sIDEwKTtcbiAgICAgICAgaWYgKGtleSA+PSBjb2xzKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2NvbWJpbmVkW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBhbnkgY3V0IG9mZiBleHRlbmRlZCBhdHRyaWJ1dGVzXG4gICAgICBjb25zdCBleHRLZXlzID0gT2JqZWN0LmtleXModGhpcy5fZXh0ZW5kZWRBdHRycyk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4dEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoZXh0S2V5c1tpXSwgMTApO1xuICAgICAgICBpZiAoa2V5ID49IGNvbHMpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5fZXh0ZW5kZWRBdHRyc1trZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMubGVuZ3RoID0gY29scztcbiAgICByZXR1cm4gdWludDMyQ2VsbHMgKiA0ICogQ0xFQU5VUF9USFJFU0hPTEQgPCB0aGlzLl9kYXRhLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFudXAgdW5kZXJseWluZyBhcnJheSBidWZmZXIuXG4gICAqIEEgY2xlYW51cCB3aWxsIGJlIHRyaWdnZXJlZCBpZiB0aGUgYXJyYXkgYnVmZmVyIGV4Y2VlZHMgdGhlIGFjdHVhbCB1c2VkXG4gICAqIG1lbW9yeSBieSBhIGZhY3RvciBvZiBDTEVBTlVQX1RIUkVTSE9MRC5cbiAgICogUmV0dXJucyAwIG9yIDEgaW5kaWNhdGluZyB3aGV0aGVyIGEgY2xlYW51cCBoYXBwZW5lZC5cbiAgICovXG4gIHB1YmxpYyBjbGVhbnVwTWVtb3J5KCk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMuX2RhdGEubGVuZ3RoICogNCAqIENMRUFOVVBfVEhSRVNIT0xEIDwgdGhpcy5fZGF0YS5idWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhLmxlbmd0aCk7XG4gICAgICBkYXRhLnNldCh0aGlzLl9kYXRhKTtcbiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgLyoqIGZpbGwgYSBsaW5lIHdpdGggZmlsbENoYXJEYXRhICovXG4gIHB1YmxpYyBmaWxsKGZpbGxDZWxsRGF0YTogSUNlbGxEYXRhLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgLy8gZnVsbCBicmFuY2hpbmcgb24gcmVzcGVjdFByb3RlY3Q9PXRydWUsIGhvcGVmdWxseSBnZXR0aW5nIGZhc3QgSklUIGZvciBzdGFuZGFyZCBjYXNlXG4gICAgaWYgKHJlc3BlY3RQcm90ZWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvdGVjdGVkKGkpKSB7XG4gICAgICAgICAgdGhpcy5zZXRDZWxsKGksIGZpbGxDZWxsRGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY29tYmluZWQgPSB7fTtcbiAgICB0aGlzLl9leHRlbmRlZEF0dHJzID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICB0aGlzLnNldENlbGwoaSwgZmlsbENlbGxEYXRhKTtcbiAgICB9XG4gIH1cblxuICAvKiogYWx0ZXIgdG8gYSBmdWxsIGNvcHkgb2YgbGluZSAgKi9cbiAgcHVibGljIGNvcHlGcm9tKGxpbmU6IEJ1ZmZlckxpbmUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5sZW5ndGggIT09IGxpbmUubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9kYXRhID0gbmV3IFVpbnQzMkFycmF5KGxpbmUuX2RhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1c2UgaGlnaCBzcGVlZCBjb3B5IGlmIGxlbmd0aHMgYXJlIGVxdWFsXG4gICAgICB0aGlzLl9kYXRhLnNldChsaW5lLl9kYXRhKTtcbiAgICB9XG4gICAgdGhpcy5sZW5ndGggPSBsaW5lLmxlbmd0aDtcbiAgICB0aGlzLl9jb21iaW5lZCA9IHt9O1xuICAgIGZvciAoY29uc3QgZWwgaW4gbGluZS5fY29tYmluZWQpIHtcbiAgICAgIHRoaXMuX2NvbWJpbmVkW2VsXSA9IGxpbmUuX2NvbWJpbmVkW2VsXTtcbiAgICB9XG4gICAgdGhpcy5fZXh0ZW5kZWRBdHRycyA9IHt9O1xuICAgIGZvciAoY29uc3QgZWwgaW4gbGluZS5fZXh0ZW5kZWRBdHRycykge1xuICAgICAgdGhpcy5fZXh0ZW5kZWRBdHRyc1tlbF0gPSBsaW5lLl9leHRlbmRlZEF0dHJzW2VsXTtcbiAgICB9XG4gICAgdGhpcy5pc1dyYXBwZWQgPSBsaW5lLmlzV3JhcHBlZDtcbiAgfVxuXG4gIC8qKiBjcmVhdGUgYSBuZXcgY2xvbmUgKi9cbiAgcHVibGljIGNsb25lKCk6IElCdWZmZXJMaW5lIHtcbiAgICBjb25zdCBuZXdMaW5lID0gbmV3IEJ1ZmZlckxpbmUoMCk7XG4gICAgbmV3TGluZS5fZGF0YSA9IG5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhKTtcbiAgICBuZXdMaW5lLmxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgIGZvciAoY29uc3QgZWwgaW4gdGhpcy5fY29tYmluZWQpIHtcbiAgICAgIG5ld0xpbmUuX2NvbWJpbmVkW2VsXSA9IHRoaXMuX2NvbWJpbmVkW2VsXTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBlbCBpbiB0aGlzLl9leHRlbmRlZEF0dHJzKSB7XG4gICAgICBuZXdMaW5lLl9leHRlbmRlZEF0dHJzW2VsXSA9IHRoaXMuX2V4dGVuZGVkQXR0cnNbZWxdO1xuICAgIH1cbiAgICBuZXdMaW5lLmlzV3JhcHBlZCA9IHRoaXMuaXNXcmFwcGVkO1xuICAgIHJldHVybiBuZXdMaW5lO1xuICB9XG5cbiAgcHVibGljIGdldFRyaW1tZWRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgaWYgKCh0aGlzLl9kYXRhW2kgKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdICYgQ29udGVudC5IQVNfQ09OVEVOVF9NQVNLKSkge1xuICAgICAgICByZXR1cm4gaSArICh0aGlzLl9kYXRhW2kgKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdID4+IENvbnRlbnQuV0lEVEhfU0hJRlQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXROb0JnVHJpbW1lZExlbmd0aCgpOiBudW1iZXIge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBpZiAoKHRoaXMuX2RhdGFbaSAqIENFTExfU0laRSArIENlbGwuQ09OVEVOVF0gJiBDb250ZW50LkhBU19DT05URU5UX01BU0spIHx8ICh0aGlzLl9kYXRhW2kgKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSAmIEF0dHJpYnV0ZXMuQ01fTUFTSykpIHtcbiAgICAgICAgcmV0dXJuIGkgKyAodGhpcy5fZGF0YVtpICogQ0VMTF9TSVpFICsgQ2VsbC5DT05URU5UXSA+PiBDb250ZW50LldJRFRIX1NISUZUKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBwdWJsaWMgY29weUNlbGxzRnJvbShzcmM6IEJ1ZmZlckxpbmUsIHNyY0NvbDogbnVtYmVyLCBkZXN0Q29sOiBudW1iZXIsIGxlbmd0aDogbnVtYmVyLCBhcHBseUluUmV2ZXJzZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IHNyY0RhdGEgPSBzcmMuX2RhdGE7XG4gICAgaWYgKGFwcGx5SW5SZXZlcnNlKSB7XG4gICAgICBmb3IgKGxldCBjZWxsID0gbGVuZ3RoIC0gMTsgY2VsbCA+PSAwOyBjZWxsLS0pIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBDRUxMX1NJWkU7IGkrKykge1xuICAgICAgICAgIHRoaXMuX2RhdGFbKGRlc3RDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldID0gc3JjRGF0YVsoc3JjQ29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBpXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3JjRGF0YVsoc3JjQ29sICsgY2VsbCkgKiBDRUxMX1NJWkUgKyBDZWxsLkJHXSAmIEJnRmxhZ3MuSEFTX0VYVEVOREVEKSB7XG4gICAgICAgICAgdGhpcy5fZXh0ZW5kZWRBdHRyc1tkZXN0Q29sICsgY2VsbF0gPSBzcmMuX2V4dGVuZGVkQXR0cnNbc3JjQ29sICsgY2VsbF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgY2VsbCA9IDA7IGNlbGwgPCBsZW5ndGg7IGNlbGwrKykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IENFTExfU0laRTsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5fZGF0YVsoZGVzdENvbCArIGNlbGwpICogQ0VMTF9TSVpFICsgaV0gPSBzcmNEYXRhWyhzcmNDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIGldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzcmNEYXRhWyhzcmNDb2wgKyBjZWxsKSAqIENFTExfU0laRSArIENlbGwuQkddICYgQmdGbGFncy5IQVNfRVhURU5ERUQpIHtcbiAgICAgICAgICB0aGlzLl9leHRlbmRlZEF0dHJzW2Rlc3RDb2wgKyBjZWxsXSA9IHNyYy5fZXh0ZW5kZWRBdHRyc1tzcmNDb2wgKyBjZWxsXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vdmUgYW55IGNvbWJpbmVkIGRhdGEgb3ZlciBhcyBuZWVkZWQsIEZJWE1FOiByZXBlYXQgZm9yIGV4dGVuZGVkIGF0dHJzXG4gICAgY29uc3Qgc3JjQ29tYmluZWRLZXlzID0gT2JqZWN0LmtleXMoc3JjLl9jb21iaW5lZCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcmNDb21iaW5lZEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KHNyY0NvbWJpbmVkS2V5c1tpXSwgMTApO1xuICAgICAgaWYgKGtleSA+PSBzcmNDb2wpIHtcbiAgICAgICAgdGhpcy5fY29tYmluZWRba2V5IC0gc3JjQ29sICsgZGVzdENvbF0gPSBzcmMuX2NvbWJpbmVkW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGJ1ZmZlciBsaW5lIHRvIGEgc3RyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0gdHJpbVJpZ2h0IFdoZXRoZXIgdG8gdHJpbSBhbnkgZW1wdHkgY2VsbHMgb24gdGhlIHJpZ2h0LlxuICAgKiBAcGFyYW0gc3RhcnRDb2wgVGhlIGNvbHVtbiB0byBzdGFydCB0aGUgc3RyaW5nICgwLWJhc2VkIGluY2x1c2l2ZSkuXG4gICAqIEBwYXJhbSBlbmRDb2wgVGhlIGNvbHVtbiB0byBlbmQgdGhlIHN0cmluZyAoMC1iYXNlZCBleGNsdXNpdmUpLlxuICAgKiBAcGFyYW0gb3V0Q29sdW1ucyBpZiBzcGVjaWZpZWQsIHRoaXMgYXJyYXkgd2lsbCBiZSBmaWxsZWQgd2l0aCBjb2x1bW4gbnVtYmVycyBzdWNoIHRoYXRcbiAgICogYHJldHVybmVkU3RyaW5nW2ldYCBpcyBkaXNwbGF5ZWQgYXQgYG91dENvbHVtbnNbaV1gIGNvbHVtbi4gYG91dENvbHVtbnNbcmV0dXJuZWRTdHJpbmcubGVuZ3RoXWBcbiAgICogaXMgd2hlcmUgdGhlIGNoYXJhY3RlciBmb2xsb3dpbmcgYHJldHVybmVkU3RyaW5nYCB3aWxsIGJlIGRpc3BsYXllZC5cbiAgICpcbiAgICogV2hlbiBhIHNpbmdsZSBjZWxsIGlzIHRyYW5zbGF0ZWQgdG8gbXVsdGlwbGUgVVRGLTE2IGNvZGUgdW5pdHMgKGUuZy4gc3Vycm9nYXRlIHBhaXIpIGluIHRoZVxuICAgKiByZXR1cm5lZCBzdHJpbmcsIHRoZSBjb3JyZXNwb25kaW5nIGVudHJpZXMgaW4gYG91dENvbHVtbnNgIHdpbGwgaGF2ZSB0aGUgc2FtZSBjb2x1bW4gbnVtYmVyLlxuICAgKi9cbiAgcHVibGljIHRyYW5zbGF0ZVRvU3RyaW5nKHRyaW1SaWdodD86IGJvb2xlYW4sIHN0YXJ0Q29sPzogbnVtYmVyLCBlbmRDb2w/OiBudW1iZXIsIG91dENvbHVtbnM/OiBudW1iZXJbXSk6IHN0cmluZyB7XG4gICAgc3RhcnRDb2wgPSBzdGFydENvbCA/PyAwO1xuICAgIGVuZENvbCA9IGVuZENvbCA/PyB0aGlzLmxlbmd0aDtcbiAgICBpZiAodHJpbVJpZ2h0KSB7XG4gICAgICBlbmRDb2wgPSBNYXRoLm1pbihlbmRDb2wsIHRoaXMuZ2V0VHJpbW1lZExlbmd0aCgpKTtcbiAgICB9XG4gICAgaWYgKG91dENvbHVtbnMpIHtcbiAgICAgIG91dENvbHVtbnMubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIHdoaWxlIChzdGFydENvbCA8IGVuZENvbCkge1xuICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuX2RhdGFbc3RhcnRDb2wgKiBDRUxMX1NJWkUgKyBDZWxsLkNPTlRFTlRdO1xuICAgICAgY29uc3QgY3AgPSBjb250ZW50ICYgQ29udGVudC5DT0RFUE9JTlRfTUFTSztcbiAgICAgIGNvbnN0IGNoYXJzID0gKGNvbnRlbnQgJiBDb250ZW50LklTX0NPTUJJTkVEX01BU0spID8gdGhpcy5fY29tYmluZWRbc3RhcnRDb2xdIDogKGNwKSA/IHN0cmluZ0Zyb21Db2RlUG9pbnQoY3ApIDogV0hJVEVTUEFDRV9DRUxMX0NIQVI7XG4gICAgICByZXN1bHQgKz0gY2hhcnM7XG4gICAgICBpZiAob3V0Q29sdW1ucykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgb3V0Q29sdW1ucy5wdXNoKHN0YXJ0Q29sKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3RhcnRDb2wgKz0gKGNvbnRlbnQgPj4gQ29udGVudC5XSURUSF9TSElGVCkgfHwgMTsgLy8gYWx3YXlzIGFkdmFuY2UgYnkgYXQgbGVhc3QgMVxuICAgIH1cbiAgICBpZiAob3V0Q29sdW1ucykge1xuICAgICAgb3V0Q29sdW1ucy5wdXNoKHN0YXJ0Q29sKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQnVmZmVyTGluZSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBDaXJjdWxhckxpc3QgfSBmcm9tICdjb21tb24vQ2lyY3VsYXJMaXN0JztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElOZXdMYXlvdXRSZXN1bHQge1xuICBsYXlvdXQ6IG51bWJlcltdO1xuICBjb3VudFJlbW92ZWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZXMgYW5kIHJldHVybnMgaW5kZXhlcyB0byBiZSByZW1vdmVkIGFmdGVyIGEgcmVmbG93IGxhcmdlciBvY2N1cnMuIExpbmVzIHdpbGwgYmUgcmVtb3ZlZFxuICogd2hlbiBhIHdyYXBwZWQgbGluZSB1bndyYXBzLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gb2xkQ29scyBUaGUgY29sdW1ucyBiZWZvcmUgcmVzaXplXG4gKiBAcGFyYW0gbmV3Q29scyBUaGUgY29sdW1ucyBhZnRlciByZXNpemUuXG4gKiBAcGFyYW0gYnVmZmVyQWJzb2x1dGVZIFRoZSBhYnNvbHV0ZSB5IHBvc2l0aW9uIG9mIHRoZSBjdXJzb3IgKGJhc2VZICsgY3Vyc29yWSkuXG4gKiBAcGFyYW0gbnVsbENlbGwgVGhlIGNlbGwgZGF0YSB0byB1c2Ugd2hlbiBmaWxsaW5nIGluIGVtcHR5IGNlbGxzLlxuICogQHBhcmFtIHJlZmxvd0N1cnNvckxpbmUgV2hldGhlciB0byByZWZsb3cgdGhlIGxpbmUgY29udGFpbmluZyB0aGUgY3Vyc29yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZShsaW5lczogQ2lyY3VsYXJMaXN0PElCdWZmZXJMaW5lPiwgb2xkQ29sczogbnVtYmVyLCBuZXdDb2xzOiBudW1iZXIsIGJ1ZmZlckFic29sdXRlWTogbnVtYmVyLCBudWxsQ2VsbDogSUNlbGxEYXRhLCByZWZsb3dDdXJzb3JMaW5lOiBib29sZWFuKTogbnVtYmVyW10ge1xuICAvLyBHYXRoZXIgYWxsIEJ1ZmZlckxpbmVzIHRoYXQgbmVlZCB0byBiZSByZW1vdmVkIGZyb20gdGhlIEJ1ZmZlciBoZXJlIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgLy8gYmF0Y2hlZCB1cCBhbmQgb25seSBjb21taXR0ZWQgb25jZVxuICBjb25zdCB0b1JlbW92ZTogbnVtYmVyW10gPSBbXTtcblxuICBmb3IgKGxldCB5ID0gMDsgeSA8IGxpbmVzLmxlbmd0aCAtIDE7IHkrKykge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgcm93IGlzIHdyYXBwZWRcbiAgICBsZXQgaSA9IHk7XG4gICAgbGV0IG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICBpZiAoIW5leHRMaW5lLmlzV3JhcHBlZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaG93IG1hbnkgbGluZXMgaXQncyB3cmFwcGVkIGZvclxuICAgIGNvbnN0IHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdID0gW2xpbmVzLmdldCh5KSBhcyBCdWZmZXJMaW5lXTtcbiAgICB3aGlsZSAoaSA8IGxpbmVzLmxlbmd0aCAmJiBuZXh0TGluZS5pc1dyYXBwZWQpIHtcbiAgICAgIHdyYXBwZWRMaW5lcy5wdXNoKG5leHRMaW5lKTtcbiAgICAgIG5leHRMaW5lID0gbGluZXMuZ2V0KCsraSkgYXMgQnVmZmVyTGluZTtcbiAgICB9XG5cbiAgICBpZiAoIXJlZmxvd0N1cnNvckxpbmUpIHtcbiAgICAgIC8vIElmIHRoZXNlIGxpbmVzIGNvbnRhaW4gdGhlIGN1cnNvciBkb24ndCB0b3VjaCB0aGVtLCB0aGUgcHJvZ3JhbSB3aWxsIGhhbmRsZSBmaXhpbmcgdXBcbiAgICAgIC8vIHdyYXBwZWQgbGluZXMgd2l0aCB0aGUgY3Vyc29yXG4gICAgICBpZiAoYnVmZmVyQWJzb2x1dGVZID49IHkgJiYgYnVmZmVyQWJzb2x1dGVZIDwgaSkge1xuICAgICAgICB5ICs9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnNcbiAgICBsZXQgZGVzdExpbmVJbmRleCA9IDA7XG4gICAgbGV0IGRlc3RDb2wgPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBkZXN0TGluZUluZGV4LCBvbGRDb2xzKTtcbiAgICBsZXQgc3JjTGluZUluZGV4ID0gMTtcbiAgICBsZXQgc3JjQ29sID0gMDtcbiAgICB3aGlsZSAoc3JjTGluZUluZGV4IDwgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc3JjVHJpbW1lZFRpbmVMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lSW5kZXgsIG9sZENvbHMpO1xuICAgICAgY29uc3Qgc3JjUmVtYWluaW5nQ2VsbHMgPSBzcmNUcmltbWVkVGluZUxlbmd0aCAtIHNyY0NvbDtcbiAgICAgIGNvbnN0IGRlc3RSZW1haW5pbmdDZWxscyA9IG5ld0NvbHMgLSBkZXN0Q29sO1xuICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNSZW1haW5pbmdDZWxscywgZGVzdFJlbWFpbmluZ0NlbGxzKTtcblxuICAgICAgd3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdLmNvcHlDZWxsc0Zyb20od3JhcHBlZExpbmVzW3NyY0xpbmVJbmRleF0sIHNyY0NvbCwgZGVzdENvbCwgY2VsbHNUb0NvcHksIGZhbHNlKTtcblxuICAgICAgZGVzdENvbCArPSBjZWxsc1RvQ29weTtcbiAgICAgIGlmIChkZXN0Q29sID09PSBuZXdDb2xzKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgrKztcbiAgICAgICAgZGVzdENvbCA9IDA7XG4gICAgICB9XG4gICAgICBzcmNDb2wgKz0gY2VsbHNUb0NvcHk7XG4gICAgICBpZiAoc3JjQ29sID09PSBzcmNUcmltbWVkVGluZUxlbmd0aCkge1xuICAgICAgICBzcmNMaW5lSW5kZXgrKztcbiAgICAgICAgc3JjQ29sID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBsYXN0IGNlbGwgaXNuJ3Qgd2lkZSwgaWYgaXQgaXMgY29weSBpdCB0byB0aGUgY3VycmVudCBkZXN0XG4gICAgICBpZiAoZGVzdENvbCA9PT0gMCAmJiBkZXN0TGluZUluZGV4ICE9PSAwKSB7XG4gICAgICAgIGlmICh3cmFwcGVkTGluZXNbZGVzdExpbmVJbmRleCAtIDFdLmdldFdpZHRoKG5ld0NvbHMgLSAxKSA9PT0gMikge1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0sIG5ld0NvbHMgLSAxLCBkZXN0Q29sKyssIDEsIGZhbHNlKTtcbiAgICAgICAgICAvLyBOdWxsIG91dCB0aGUgZW5kIG9mIHRoZSBsYXN0IHJvd1xuICAgICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4IC0gMV0uc2V0Q2VsbChuZXdDb2xzIC0gMSwgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgb3V0IHJlbWFpbmluZyBjZWxscyBvciBmcmFnbWVudHMgY291bGQgcmVtYWluO1xuICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5yZXBsYWNlQ2VsbHMoZGVzdENvbCwgbmV3Q29scywgbnVsbENlbGwpO1xuXG4gICAgLy8gV29yayBiYWNrd2FyZHMgYW5kIHJlbW92ZSBhbnkgcm93cyBhdCB0aGUgZW5kIHRoYXQgb25seSBjb250YWluIG51bGwgY2VsbHNcbiAgICBsZXQgY291bnRUb1JlbW92ZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IHdyYXBwZWRMaW5lcy5sZW5ndGggLSAxOyBpID4gMDsgaS0tKSB7XG4gICAgICBpZiAoaSA+IGRlc3RMaW5lSW5kZXggfHwgd3JhcHBlZExpbmVzW2ldLmdldFRyaW1tZWRMZW5ndGgoKSA9PT0gMCkge1xuICAgICAgICBjb3VudFRvUmVtb3ZlKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY291bnRUb1JlbW92ZSA+IDApIHtcbiAgICAgIHRvUmVtb3ZlLnB1c2goeSArIHdyYXBwZWRMaW5lcy5sZW5ndGggLSBjb3VudFRvUmVtb3ZlKTsgLy8gaW5kZXhcbiAgICAgIHRvUmVtb3ZlLnB1c2goY291bnRUb1JlbW92ZSk7XG4gICAgfVxuXG4gICAgeSArPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gMTtcbiAgfVxuICByZXR1cm4gdG9SZW1vdmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJuIHRoZSBuZXcgbGF5b3V0IGZvciBsaW5lcyBnaXZlbiBhbiBhcnJheSBvZiBpbmRleGVzIHRvIGJlIHJlbW92ZWQuXG4gKiBAcGFyYW0gbGluZXMgVGhlIGJ1ZmZlciBsaW5lcy5cbiAqIEBwYXJhbSB0b1JlbW92ZSBUaGUgaW5kZXhlcyB0byByZW1vdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIHRvUmVtb3ZlOiBudW1iZXJbXSk6IElOZXdMYXlvdXRSZXN1bHQge1xuICBjb25zdCBsYXlvdXQ6IG51bWJlcltdID0gW107XG4gIC8vIEZpcnN0IGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBhbmQgZ2V0IHRoZSBhY3R1YWwgaW5kZXhlcyB0byB1c2UgZm9yIHJvd3NcbiAgbGV0IG5leHRUb1JlbW92ZUluZGV4ID0gMDtcbiAgbGV0IG5leHRUb1JlbW92ZVN0YXJ0ID0gdG9SZW1vdmVbbmV4dFRvUmVtb3ZlSW5kZXhdO1xuICBsZXQgY291bnRSZW1vdmVkU29GYXIgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKG5leHRUb1JlbW92ZVN0YXJ0ID09PSBpKSB7XG4gICAgICBjb25zdCBjb3VudFRvUmVtb3ZlID0gdG9SZW1vdmVbKytuZXh0VG9SZW1vdmVJbmRleF07XG5cbiAgICAgIC8vIFRlbGwgbWFya2VycyB0aGF0IHRoZXJlIHdhcyBhIGRlbGV0aW9uXG4gICAgICBsaW5lcy5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7XG4gICAgICAgIGluZGV4OiBpIC0gY291bnRSZW1vdmVkU29GYXIsXG4gICAgICAgIGFtb3VudDogY291bnRUb1JlbW92ZVxuICAgICAgfSk7XG5cbiAgICAgIGkgKz0gY291bnRUb1JlbW92ZSAtIDE7XG4gICAgICBjb3VudFJlbW92ZWRTb0ZhciArPSBjb3VudFRvUmVtb3ZlO1xuICAgICAgbmV4dFRvUmVtb3ZlU3RhcnQgPSB0b1JlbW92ZVsrK25leHRUb1JlbW92ZUluZGV4XTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5b3V0LnB1c2goaSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgbGF5b3V0LFxuICAgIGNvdW50UmVtb3ZlZDogY291bnRSZW1vdmVkU29GYXJcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgbmV3IGxheW91dCB0byB0aGUgYnVmZmVyLiBUaGlzIGVzc2VudGlhbGx5IGRvZXMgdGhlIHNhbWUgYXMgbWFueSBzcGxpY2UgY2FsbHMgYnV0IGl0J3NcbiAqIGRvbmUgYWxsIGF0IG9uY2UgaW4gYSBzaW5nbGUgaXRlcmF0aW9uIHRocm91Z2ggdGhlIGxpc3Qgc2luY2Ugc3BsaWNlIGlzIHZlcnkgZXhwZW5zaXZlLlxuICogQHBhcmFtIGxpbmVzIFRoZSBidWZmZXIgbGluZXMuXG4gKiBAcGFyYW0gbmV3TGF5b3V0IFRoZSBuZXcgbGF5b3V0IHRvIGFwcGx5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQobGluZXM6IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4sIG5ld0xheW91dDogbnVtYmVyW10pOiB2b2lkIHtcbiAgLy8gUmVjb3JkIG9yaWdpbmFsIGxpbmVzIHNvIHRoZXkgZG9uJ3QgZ2V0IG92ZXJyaWRkZW4gd2hlbiB3ZSByZWFycmFuZ2UgdGhlIGxpc3RcbiAgY29uc3QgbmV3TGF5b3V0TGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0xheW91dC5sZW5ndGg7IGkrKykge1xuICAgIG5ld0xheW91dExpbmVzLnB1c2gobGluZXMuZ2V0KG5ld0xheW91dFtpXSkgYXMgQnVmZmVyTGluZSk7XG4gIH1cblxuICAvLyBSZWFycmFuZ2UgdGhlIGxpc3RcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdMYXlvdXRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGxpbmVzLnNldChpLCBuZXdMYXlvdXRMaW5lc1tpXSk7XG4gIH1cbiAgbGluZXMubGVuZ3RoID0gbmV3TGF5b3V0Lmxlbmd0aDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZXcgbGluZSBsZW5ndGhzIGZvciBhIGdpdmVuIHdyYXBwZWQgbGluZS4gVGhlIHB1cnBvc2Ugb2YgdGhpcyBmdW5jdGlvbiBpdCB0byBwcmUtXG4gKiBjb21wdXRlIHRoZSB3cmFwcGluZyBwb2ludHMgc2luY2Ugd2lkZSBjaGFyYWN0ZXJzIG1heSBuZWVkIHRvIGJlIHdyYXBwZWQgb250byB0aGUgZm9sbG93aW5nIGxpbmUuXG4gKiBUaGlzIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIGFuIGFycmF5IG9mIG51bWJlcnMgb2Ygd2hlcmUgZWFjaCBsaW5lIHdyYXBzIHRvLCB0aGUgcmVzdWx0aW5nIGFycmF5XG4gKiB3aWxsIG9ubHkgY29udGFpbiB0aGUgdmFsdWVzIGBuZXdDb2xzYCAod2hlbiB0aGUgbGluZSBkb2VzIG5vdCBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSBhbmRcbiAqIGBuZXdDb2xzIC0gMWAgKHdoZW4gdGhlIGxpbmUgZG9lcyBlbmQgd2l0aCBhIHdpZGUgY2hhcmFjdGVyKSwgZXhjZXB0IGZvciB0aGUgbGFzdCB2YWx1ZSB3aGljaFxuICogd2lsbCBjb250YWluIHRoZSByZW1haW5pbmcgaXRlbXMgdG8gZmlsbCB0aGUgbGluZS5cbiAqXG4gKiBDYWxsaW5nIHRoaXMgd2l0aCBhIGBuZXdDb2xzYCB2YWx1ZSBvZiBgMWAgd2lsbCBsb2NrIHVwLlxuICpcbiAqIEBwYXJhbSB3cmFwcGVkTGluZXMgVGhlIHdyYXBwZWQgbGluZXMgdG8gZXZhbHVhdGUuXG4gKiBAcGFyYW0gb2xkQ29scyBUaGUgY29sdW1ucyBiZWZvcmUgcmVzaXplLlxuICogQHBhcmFtIG5ld0NvbHMgVGhlIGNvbHVtbnMgYWZ0ZXIgcmVzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKHdyYXBwZWRMaW5lczogQnVmZmVyTGluZVtdLCBvbGRDb2xzOiBudW1iZXIsIG5ld0NvbHM6IG51bWJlcik6IG51bWJlcltdIHtcbiAgY29uc3QgbmV3TGluZUxlbmd0aHM6IG51bWJlcltdID0gW107XG4gIGNvbnN0IGNlbGxzTmVlZGVkID0gd3JhcHBlZExpbmVzLm1hcCgobCwgaSkgPT4gZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKHdyYXBwZWRMaW5lcywgaSwgb2xkQ29scykpLnJlZHVjZSgocCwgYykgPT4gcCArIGMpO1xuXG4gIC8vIFVzZSBzcmNDb2wgYW5kIHNyY0xpbmUgdG8gZmluZCB0aGUgbmV3IHdyYXBwaW5nIHBvaW50LCB1c2UgdGhhdCB0byBnZXQgdGhlIGNlbGxzQXZhaWxhYmxlIGFuZFxuICAvLyBsaW5lc05lZWRlZFxuICBsZXQgc3JjQ29sID0gMDtcbiAgbGV0IHNyY0xpbmUgPSAwO1xuICBsZXQgY2VsbHNBdmFpbGFibGUgPSAwO1xuICB3aGlsZSAoY2VsbHNBdmFpbGFibGUgPCBjZWxsc05lZWRlZCkge1xuICAgIGlmIChjZWxsc05lZWRlZCAtIGNlbGxzQXZhaWxhYmxlIDwgbmV3Q29scykge1xuICAgICAgLy8gQWRkIHRoZSBmaW5hbCBsaW5lIGFuZCBleGl0IHRoZSBsb29wXG4gICAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGNlbGxzTmVlZGVkIC0gY2VsbHNBdmFpbGFibGUpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHNyY0NvbCArPSBuZXdDb2xzO1xuICAgIGNvbnN0IG9sZFRyaW1tZWRMZW5ndGggPSBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgod3JhcHBlZExpbmVzLCBzcmNMaW5lLCBvbGRDb2xzKTtcbiAgICBpZiAoc3JjQ29sID4gb2xkVHJpbW1lZExlbmd0aCkge1xuICAgICAgc3JjQ29sIC09IG9sZFRyaW1tZWRMZW5ndGg7XG4gICAgICBzcmNMaW5lKys7XG4gICAgfVxuICAgIGNvbnN0IGVuZHNXaXRoV2lkZSA9IHdyYXBwZWRMaW5lc1tzcmNMaW5lXS5nZXRXaWR0aChzcmNDb2wgLSAxKSA9PT0gMjtcbiAgICBpZiAoZW5kc1dpdGhXaWRlKSB7XG4gICAgICBzcmNDb2wtLTtcbiAgICB9XG4gICAgY29uc3QgbGluZUxlbmd0aCA9IGVuZHNXaXRoV2lkZSA/IG5ld0NvbHMgLSAxIDogbmV3Q29scztcbiAgICBuZXdMaW5lTGVuZ3Rocy5wdXNoKGxpbmVMZW5ndGgpO1xuICAgIGNlbGxzQXZhaWxhYmxlICs9IGxpbmVMZW5ndGg7XG4gIH1cblxuICByZXR1cm4gbmV3TGluZUxlbmd0aHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgobGluZXM6IEJ1ZmZlckxpbmVbXSwgaTogbnVtYmVyLCBjb2xzOiBudW1iZXIpOiBudW1iZXIge1xuICAvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHJvdyBpbiB0aGUgd3JhcHBlZCBsaW5lLCBnZXQgdGhlIGFjdHVhbCB0cmltbWVkIGxlbmd0aFxuICBpZiAoaSA9PT0gbGluZXMubGVuZ3RoIC0gMSkge1xuICAgIHJldHVybiBsaW5lc1tpXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gIH1cbiAgLy8gRGV0ZWN0IHdoZXRoZXIgdGhlIGZvbGxvd2luZyBsaW5lIHN0YXJ0cyB3aXRoIGEgd2lkZSBjaGFyYWN0ZXIgYW5kIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgbGluZVxuICAvLyBpcyBudWxsLCBpZiBzbyB0aGVuIHdlIGNhbiBiZSBwcmV0dHkgc3VyZSB0aGUgbnVsbCBjaGFyYWN0ZXIgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gdGhlIGxpbmVcbiAgLy8gbGVuZ3RoXVxuICBjb25zdCBlbmRzSW5OdWxsID0gIShsaW5lc1tpXS5oYXNDb250ZW50KGNvbHMgLSAxKSkgJiYgbGluZXNbaV0uZ2V0V2lkdGgoY29scyAtIDEpID09PSAxO1xuICBjb25zdCBmb2xsb3dpbmdMaW5lU3RhcnRzV2l0aFdpZGUgPSBsaW5lc1tpICsgMV0uZ2V0V2lkdGgoMCkgPT09IDI7XG4gIGlmIChlbmRzSW5OdWxsICYmIGZvbGxvd2luZ0xpbmVTdGFydHNXaXRoV2lkZSkge1xuICAgIHJldHVybiBjb2xzIC0gMTtcbiAgfVxuICByZXR1cm4gY29scztcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElEaXNwb3NhYmxlLCBJTWFya2VyIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5pbXBvcnQgeyBkaXNwb3NlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcblxuZXhwb3J0IGNsYXNzIE1hcmtlciBpbXBsZW1lbnRzIElNYXJrZXIge1xuICBwcml2YXRlIHN0YXRpYyBfbmV4dElkID0gMTtcblxuICBwdWJsaWMgaXNEaXNwb3NlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIHJlYWRvbmx5IF9kaXNwb3NhYmxlczogSURpc3Bvc2FibGVbXSA9IFtdO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX2lkOiBudW1iZXIgPSBNYXJrZXIuX25leHRJZCsrO1xuICBwdWJsaWMgZ2V0IGlkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9pZDsgfVxuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uRGlzcG9zZSA9IHRoaXMucmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRpc3Bvc2UgPSB0aGlzLl9vbkRpc3Bvc2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGxpbmU6IG51bWJlclxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLmxpbmUgPSAtMTtcbiAgICAvLyBFbWl0IGJlZm9yZSBzdXBlci5kaXNwb3NlIHN1Y2ggdGhhdCBkaXNwb3NlIGxpc3RlbmVycyBnZXQgYSBjaGFuZ2UgdG8gcmVhY3RcbiAgICB0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpO1xuICAgIGRpc3Bvc2UodGhpcy5fZGlzcG9zYWJsZXMpO1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXI8VCBleHRlbmRzIElEaXNwb3NhYmxlPihkaXNwb3NhYmxlOiBUKTogVCB7XG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChkaXNwb3NhYmxlKTtcbiAgICByZXR1cm4gZGlzcG9zYWJsZTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE2IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuXG4vKipcbiAqIFRoZSBjaGFyYWN0ZXIgc2V0cyBzdXBwb3J0ZWQgYnkgdGhlIHRlcm1pbmFsLiBUaGVzZSBlbmFibGUgc2V2ZXJhbCBsYW5ndWFnZXNcbiAqIHRvIGJlIHJlcHJlc2VudGVkIHdpdGhpbiB0aGUgdGVybWluYWwgd2l0aCBvbmx5IDgtYml0IGVuY29kaW5nLiBTZWUgSVNPIDIwMjJcbiAqIGZvciBhIGRpc2N1c3Npb24gb24gY2hhcmFjdGVyIHNldHMuIE9ubHkgVlQxMDAgY2hhcmFjdGVyIHNldHMgYXJlIHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IENIQVJTRVRTOiB7IFtrZXk6IHN0cmluZ106IElDaGFyc2V0IHwgdW5kZWZpbmVkIH0gPSB7fTtcblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjaGFyYWN0ZXIgc2V0LCBVUy5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ0hBUlNFVDogSUNoYXJzZXQgfCB1bmRlZmluZWQgPSBDSEFSU0VUU1snQiddO1xuXG4vKipcbiAqIERFQyBTcGVjaWFsIENoYXJhY3RlciBhbmQgTGluZSBEcmF3aW5nIFNldC5cbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MTAyLXVnL3RhYmxlNS0xMy5odG1sXG4gKiBBIGxvdCBvZiBjdXJzZXMgYXBwcyB1c2UgdGhpcyBpZiB0aGV5IHNlZSBURVJNPXh0ZXJtLlxuICogdGVzdGluZzogZWNobyAtZSAnXFxlKDBhXFxlKEInXG4gKiBUaGUgeHRlcm0gb3V0cHV0IHNvbWV0aW1lcyBzZWVtcyB0byBjb25mbGljdCB3aXRoIHRoZVxuICogcmVmZXJlbmNlIGFib3ZlLiB4dGVybSBzZWVtcyBpbiBsaW5lIHdpdGggdGhlIHJlZmVyZW5jZVxuICogd2hlbiBydW5uaW5nIHZ0dGVzdCBob3dldmVyLlxuICogVGhlIHRhYmxlIGJlbG93IG5vdyB1c2VzIHh0ZXJtJ3Mgb3V0cHV0IGZyb20gdnR0ZXN0LlxuICovXG5DSEFSU0VUU1snMCddID0ge1xuICAnYCc6ICdcXHUyNWM2JywgLy8gJ1x1MjVDNidcbiAgJ2EnOiAnXFx1MjU5MicsIC8vICdcdTI1OTInXG4gICdiJzogJ1xcdTI0MDknLCAvLyAnXHUyNDA5JyAoSFQpXG4gICdjJzogJ1xcdTI0MGMnLCAvLyAnXHUyNDBDJyAoRkYpXG4gICdkJzogJ1xcdTI0MGQnLCAvLyAnXHUyNDBEJyAoQ1IpXG4gICdlJzogJ1xcdTI0MGEnLCAvLyAnXHUyNDBBJyAoTEYpXG4gICdmJzogJ1xcdTAwYjAnLCAvLyAnXHUwMEIwJ1xuICAnZyc6ICdcXHUwMGIxJywgLy8gJ1x1MDBCMSdcbiAgJ2gnOiAnXFx1MjQyNCcsIC8vICdcdTI0MjQnIChOTClcbiAgJ2knOiAnXFx1MjQwYicsIC8vICdcdTI0MEInIChWVClcbiAgJ2onOiAnXFx1MjUxOCcsIC8vICdcdTI1MTgnXG4gICdrJzogJ1xcdTI1MTAnLCAvLyAnXHUyNTEwJ1xuICAnbCc6ICdcXHUyNTBjJywgLy8gJ1x1MjUwQydcbiAgJ20nOiAnXFx1MjUxNCcsIC8vICdcdTI1MTQnXG4gICduJzogJ1xcdTI1M2MnLCAvLyAnXHUyNTNDJ1xuICAnbyc6ICdcXHUyM2JhJywgLy8gJ1x1MjNCQSdcbiAgJ3AnOiAnXFx1MjNiYicsIC8vICdcdTIzQkInXG4gICdxJzogJ1xcdTI1MDAnLCAvLyAnXHUyNTAwJ1xuICAncic6ICdcXHUyM2JjJywgLy8gJ1x1MjNCQydcbiAgJ3MnOiAnXFx1MjNiZCcsIC8vICdcdTIzQkQnXG4gICd0JzogJ1xcdTI1MWMnLCAvLyAnXHUyNTFDJ1xuICAndSc6ICdcXHUyNTI0JywgLy8gJ1x1MjUyNCdcbiAgJ3YnOiAnXFx1MjUzNCcsIC8vICdcdTI1MzQnXG4gICd3JzogJ1xcdTI1MmMnLCAvLyAnXHUyNTJDJ1xuICAneCc6ICdcXHUyNTAyJywgLy8gJ1x1MjUwMidcbiAgJ3knOiAnXFx1MjI2NCcsIC8vICdcdTIyNjQnXG4gICd6JzogJ1xcdTIyNjUnLCAvLyAnXHUyMjY1J1xuICAneyc6ICdcXHUwM2MwJywgLy8gJ1x1MDNDMCdcbiAgJ3wnOiAnXFx1MjI2MCcsIC8vICdcdTIyNjAnXG4gICd9JzogJ1xcdTAwYTMnLCAvLyAnXHUwMEEzJ1xuICAnfic6ICdcXHUwMGI3JyAgLy8gJ1x1MDBCNydcbn07XG5cbi8qKlxuICogQnJpdGlzaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKEFcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi01Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0EnXSA9IHtcbiAgJyMnOiAnXHUwMEEzJ1xufTtcblxuLyoqXG4gKiBVbml0ZWQgU3RhdGVzIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoQlxuICovXG5DSEFSU0VUU1snQiddID0gdW5kZWZpbmVkO1xuXG4vKipcbiAqIER1dGNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoNFxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTYuaHRtbFxuICovXG5DSEFSU0VUU1snNCddID0ge1xuICAnIyc6ICdcdTAwQTMnLFxuICAnQCc6ICdcdTAwQkUnLFxuICAnWyc6ICdpaicsXG4gICdcXFxcJzogJ1x1MDBCRCcsXG4gICddJzogJ3wnLFxuICAneyc6ICdcdTAwQTgnLFxuICAnfCc6ICdmJyxcbiAgJ30nOiAnXHUwMEJDJyxcbiAgJ34nOiAnXHUwMEI0J1xufTtcblxuLyoqXG4gKiBGaW5uaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoQyBvciBFU0MgKDVcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi03Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0MnXSA9XG5DSEFSU0VUU1snNSddID0ge1xuICAnWyc6ICdcdTAwQzQnLFxuICAnXFxcXCc6ICdcdTAwRDYnLFxuICAnXSc6ICdcdTAwQzUnLFxuICAnXic6ICdcdTAwREMnLFxuICAnYCc6ICdcdTAwRTknLFxuICAneyc6ICdcdTAwRTQnLFxuICAnfCc6ICdcdTAwRjYnLFxuICAnfSc6ICdcdTAwRTUnLFxuICAnfic6ICdcdTAwRkMnXG59O1xuXG4vKipcbiAqIEZyZW5jaCBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKFJcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi04Lmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1InXSA9IHtcbiAgJyMnOiAnXHUwMEEzJyxcbiAgJ0AnOiAnXHUwMEUwJyxcbiAgJ1snOiAnXHUwMEIwJyxcbiAgJ1xcXFwnOiAnXHUwMEU3JyxcbiAgJ10nOiAnXHUwMEE3JyxcbiAgJ3snOiAnXHUwMEU5JyxcbiAgJ3wnOiAnXHUwMEY5JyxcbiAgJ30nOiAnXHUwMEU4JyxcbiAgJ34nOiAnXHUwMEE4J1xufTtcblxuLyoqXG4gKiBGcmVuY2ggQ2FuYWRpYW4gY2hhcmFjdGVyIHNldFxuICogRVNDIChRXG4gKiBSZWZlcmVuY2U6IGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTItOS5odG1sXG4gKi9cbkNIQVJTRVRTWydRJ10gPSB7XG4gICdAJzogJ1x1MDBFMCcsXG4gICdbJzogJ1x1MDBFMicsXG4gICdcXFxcJzogJ1x1MDBFNycsXG4gICddJzogJ1x1MDBFQScsXG4gICdeJzogJ1x1MDBFRScsXG4gICdgJzogJ1x1MDBGNCcsXG4gICd7JzogJ1x1MDBFOScsXG4gICd8JzogJ1x1MDBGOScsXG4gICd9JzogJ1x1MDBFOCcsXG4gICd+JzogJ1x1MDBGQidcbn07XG5cbi8qKlxuICogR2VybWFuIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoS1xuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEwLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ0snXSA9IHtcbiAgJ0AnOiAnXHUwMEE3JyxcbiAgJ1snOiAnXHUwMEM0JyxcbiAgJ1xcXFwnOiAnXHUwMEQ2JyxcbiAgJ10nOiAnXHUwMERDJyxcbiAgJ3snOiAnXHUwMEU0JyxcbiAgJ3wnOiAnXHUwMEY2JyxcbiAgJ30nOiAnXHUwMEZDJyxcbiAgJ34nOiAnXHUwMERGJ1xufTtcblxuLyoqXG4gKiBJdGFsaWFuIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWVxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTExLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1knXSA9IHtcbiAgJyMnOiAnXHUwMEEzJyxcbiAgJ0AnOiAnXHUwMEE3JyxcbiAgJ1snOiAnXHUwMEIwJyxcbiAgJ1xcXFwnOiAnXHUwMEU3JyxcbiAgJ10nOiAnXHUwMEU5JyxcbiAgJ2AnOiAnXHUwMEY5JyxcbiAgJ3snOiAnXHUwMEUwJyxcbiAgJ3wnOiAnXHUwMEYyJyxcbiAgJ30nOiAnXHUwMEU4JyxcbiAgJ34nOiAnXHUwMEVDJ1xufTtcblxuLyoqXG4gKiBOb3J3ZWdpYW4vRGFuaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoRSBvciBFU0MgKDZcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xMi5odG1sXG4gKi9cbkNIQVJTRVRTWydFJ10gPVxuQ0hBUlNFVFNbJzYnXSA9IHtcbiAgJ0AnOiAnXHUwMEM0JyxcbiAgJ1snOiAnXHUwMEM2JyxcbiAgJ1xcXFwnOiAnXHUwMEQ4JyxcbiAgJ10nOiAnXHUwMEM1JyxcbiAgJ14nOiAnXHUwMERDJyxcbiAgJ2AnOiAnXHUwMEU0JyxcbiAgJ3snOiAnXHUwMEU2JyxcbiAgJ3wnOiAnXHUwMEY4JyxcbiAgJ30nOiAnXHUwMEU1JyxcbiAgJ34nOiAnXHUwMEZDJ1xufTtcblxuLyoqXG4gKiBTcGFuaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoWlxuICogUmVmZXJlbmNlOiBodHRwOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vdGFibGUyLTEzLmh0bWxcbiAqL1xuQ0hBUlNFVFNbJ1onXSA9IHtcbiAgJyMnOiAnXHUwMEEzJyxcbiAgJ0AnOiAnXHUwMEE3JyxcbiAgJ1snOiAnXHUwMEExJyxcbiAgJ1xcXFwnOiAnXHUwMEQxJyxcbiAgJ10nOiAnXHUwMEJGJyxcbiAgJ3snOiAnXHUwMEIwJyxcbiAgJ3wnOiAnXHUwMEYxJyxcbiAgJ30nOiAnXHUwMEU3J1xufTtcblxuLyoqXG4gKiBTd2VkaXNoIGNoYXJhY3RlciBzZXRcbiAqIEVTQyAoSCBvciBFU0MgKDdcbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xNC5odG1sXG4gKi9cbkNIQVJTRVRTWydIJ10gPVxuQ0hBUlNFVFNbJzcnXSA9IHtcbiAgJ0AnOiAnXHUwMEM5JyxcbiAgJ1snOiAnXHUwMEM0JyxcbiAgJ1xcXFwnOiAnXHUwMEQ2JyxcbiAgJ10nOiAnXHUwMEM1JyxcbiAgJ14nOiAnXHUwMERDJyxcbiAgJ2AnOiAnXHUwMEU5JyxcbiAgJ3snOiAnXHUwMEU0JyxcbiAgJ3wnOiAnXHUwMEY2JyxcbiAgJ30nOiAnXHUwMEU1JyxcbiAgJ34nOiAnXHUwMEZDJ1xufTtcblxuLyoqXG4gKiBTd2lzcyBjaGFyYWN0ZXIgc2V0XG4gKiBFU0MgKD1cbiAqIFJlZmVyZW5jZTogaHR0cDovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL3RhYmxlMi0xNS5odG1sXG4gKi9cbkNIQVJTRVRTWyc9J10gPSB7XG4gICcjJzogJ1x1MDBGOScsXG4gICdAJzogJ1x1MDBFMCcsXG4gICdbJzogJ1x1MDBFOScsXG4gICdcXFxcJzogJ1x1MDBFNycsXG4gICddJzogJ1x1MDBFQScsXG4gICdeJzogJ1x1MDBFRScsXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbmFtaW5nLWNvbnZlbnRpb25cbiAgJ18nOiAnXHUwMEU4JyxcbiAgJ2AnOiAnXHUwMEY0JyxcbiAgJ3snOiAnXHUwMEU0JyxcbiAgJ3wnOiAnXHUwMEY2JyxcbiAgJ30nOiAnXHUwMEZDJyxcbiAgJ34nOiAnXHUwMEZCJ1xufTtcbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENpcmN1bGFyTGlzdCwgSUluc2VydEV2ZW50IH0gZnJvbSAnY29tbW9uL0NpcmN1bGFyTGlzdCc7XG5pbXBvcnQgeyBJZGxlVGFza1F1ZXVlIH0gZnJvbSAnY29tbW9uL1Rhc2tRdWV1ZSc7XG5pbXBvcnQgeyBJQXR0cmlidXRlRGF0YSwgSUJ1ZmZlckxpbmUsIElDZWxsRGF0YSwgSUNoYXJzZXQgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgRXh0ZW5kZWRBdHRycyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQXR0cmlidXRlRGF0YSc7XG5pbXBvcnQgeyBCdWZmZXJMaW5lLCBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBnZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgsIHJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0LCByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQsIHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUsIHJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3RocyB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyUmVmbG93JztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5pbXBvcnQgeyBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX0NPREUsIE5VTExfQ0VMTF9XSURUSCwgV0hJVEVTUEFDRV9DRUxMX0NIQVIsIFdISVRFU1BBQ0VfQ0VMTF9DT0RFLCBXSElURVNQQUNFX0NFTExfV0lEVEggfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBNYXJrZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL01hcmtlcic7XG5pbXBvcnQgeyBJQnVmZmVyIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICdjb21tb24vZGF0YS9DaGFyc2V0cyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcblxuZXhwb3J0IGNvbnN0IE1BWF9CVUZGRVJfU0laRSA9IDQyOTQ5NjcyOTU7IC8vIDJeMzIgLSAxXG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIGEgdGVybWluYWwgYnVmZmVyIChhbiBpbnRlcm5hbCBzdGF0ZSBvZiB0aGUgdGVybWluYWwpLCB3aGVyZSB0aGVcbiAqIGZvbGxvd2luZyBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgKGluIGhpZ2gtbGV2ZWwpOlxuICogICAtIHRleHQgY29udGVudCBvZiB0aGlzIHBhcnRpY3VsYXIgYnVmZmVyXG4gKiAgIC0gY3Vyc29yIHBvc2l0aW9uXG4gKiAgIC0gc2Nyb2xsIHBvc2l0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBCdWZmZXIgaW1wbGVtZW50cyBJQnVmZmVyIHtcbiAgcHVibGljIGxpbmVzOiBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+O1xuICBwdWJsaWMgeWRpc3A6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB5YmFzZTogbnVtYmVyID0gMDtcbiAgcHVibGljIHk6IG51bWJlciA9IDA7XG4gIHB1YmxpYyB4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgc2Nyb2xsQm90dG9tOiBudW1iZXI7XG4gIHB1YmxpYyBzY3JvbGxUb3A6IG51bWJlcjtcbiAgcHVibGljIHRhYnM6IHsgW2NvbHVtbjogbnVtYmVyXTogYm9vbGVhbiB8IHVuZGVmaW5lZCB9ID0ge307XG4gIHB1YmxpYyBzYXZlZFk6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzYXZlZFg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBzYXZlZEN1ckF0dHJEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcbiAgcHVibGljIHNhdmVkQ2hhcnNldDogSUNoYXJzZXQgfCB1bmRlZmluZWQgPSBERUZBVUxUX0NIQVJTRVQ7XG4gIHB1YmxpYyBtYXJrZXJzOiBNYXJrZXJbXSA9IFtdO1xuICBwcml2YXRlIF9udWxsQ2VsbDogSUNlbGxEYXRhID0gQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBOVUxMX0NFTExfQ0hBUiwgTlVMTF9DRUxMX1dJRFRILCBOVUxMX0NFTExfQ09ERV0pO1xuICBwcml2YXRlIF93aGl0ZXNwYWNlQ2VsbDogSUNlbGxEYXRhID0gQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLCBXSElURVNQQUNFX0NFTExfQ0hBUiwgV0hJVEVTUEFDRV9DRUxMX1dJRFRILCBXSElURVNQQUNFX0NFTExfQ09ERV0pO1xuICBwcml2YXRlIF9jb2xzOiBudW1iZXI7XG4gIHByaXZhdGUgX3Jvd3M6IG51bWJlcjtcbiAgcHJpdmF0ZSBfaXNDbGVhcmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2hhc1Njcm9sbGJhY2s6IGJvb2xlYW4sXG4gICAgcHJpdmF0ZSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLl9jb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIHRoaXMuX3Jvd3MgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7XG4gICAgdGhpcy5saW5lcyA9IG5ldyBDaXJjdWxhckxpc3Q8SUJ1ZmZlckxpbmU+KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpO1xuICAgIHRoaXMuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLnNjcm9sbEJvdHRvbSA9IHRoaXMuX3Jvd3MgLSAxO1xuICAgIHRoaXMuc2V0dXBUYWJTdG9wcygpO1xuICB9XG5cbiAgcHVibGljIGdldE51bGxDZWxsKGF0dHI/OiBJQXR0cmlidXRlRGF0YSk6IElDZWxsRGF0YSB7XG4gICAgaWYgKGF0dHIpIHtcbiAgICAgIHRoaXMuX251bGxDZWxsLmZnID0gYXR0ci5mZztcbiAgICAgIHRoaXMuX251bGxDZWxsLmJnID0gYXR0ci5iZztcbiAgICAgIHRoaXMuX251bGxDZWxsLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbnVsbENlbGwuZmcgPSAwO1xuICAgICAgdGhpcy5fbnVsbENlbGwuYmcgPSAwO1xuICAgICAgdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQgPSBuZXcgRXh0ZW5kZWRBdHRycygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbnVsbENlbGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0V2hpdGVzcGFjZUNlbGwoYXR0cj86IElBdHRyaWJ1dGVEYXRhKTogSUNlbGxEYXRhIHtcbiAgICBpZiAoYXR0cikge1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZmcgPSBhdHRyLmZnO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmcgPSBhdHRyLmJnO1xuICAgICAgdGhpcy5fd2hpdGVzcGFjZUNlbGwuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZyA9IDA7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZyA9IDA7XG4gICAgICB0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZCA9IG5ldyBFeHRlbmRlZEF0dHJzKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl93aGl0ZXNwYWNlQ2VsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRCbGFua0xpbmUoYXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZD86IGJvb2xlYW4pOiBJQnVmZmVyTGluZSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXJMaW5lKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdGhpcy5nZXROdWxsQ2VsbChhdHRyKSwgaXNXcmFwcGVkKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgaGFzU2Nyb2xsYmFjaygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiB0aGlzLmxpbmVzLm1heExlbmd0aCA+IHRoaXMuX3Jvd3M7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGlzQ3Vyc29ySW5WaWV3cG9ydCgpOiBib29sZWFuIHtcbiAgICBjb25zdCBhYnNvbHV0ZVkgPSB0aGlzLnliYXNlICsgdGhpcy55O1xuICAgIGNvbnN0IHJlbGF0aXZlWSA9IGFic29sdXRlWSAtIHRoaXMueWRpc3A7XG4gICAgcmV0dXJuIChyZWxhdGl2ZVkgPj0gMCAmJiByZWxhdGl2ZVkgPCB0aGlzLl9yb3dzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjb3JyZWN0IGJ1ZmZlciBsZW5ndGggYmFzZWQgb24gdGhlIHJvd3MgcHJvdmlkZWQsIHRoZSB0ZXJtaW5hbCdzXG4gICAqIHNjcm9sbGJhY2sgYW5kIHdoZXRoZXIgdGhpcyBidWZmZXIgaXMgZmxhZ2dlZCB0byBoYXZlIHNjcm9sbGJhY2sgb3Igbm90LlxuICAgKiBAcGFyYW0gcm93cyBUaGUgdGVybWluYWwgcm93cyB0byB1c2UgaW4gdGhlIGNhbGN1bGF0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBfZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aChyb3dzOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICghdGhpcy5faGFzU2Nyb2xsYmFjaykge1xuICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgY29uc3QgY29ycmVjdEJ1ZmZlckxlbmd0aCA9IHJvd3MgKyB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbGJhY2s7XG5cbiAgICByZXR1cm4gY29ycmVjdEJ1ZmZlckxlbmd0aCA+IE1BWF9CVUZGRVJfU0laRSA/IE1BWF9CVUZGRVJfU0laRSA6IGNvcnJlY3RCdWZmZXJMZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogRmlsbHMgdGhlIGJ1ZmZlcidzIHZpZXdwb3J0IHdpdGggYmxhbmsgbGluZXMuXG4gICAqL1xuICBwdWJsaWMgZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoZmlsbEF0dHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmaWxsQXR0ciA9IERFRkFVTFRfQVRUUl9EQVRBO1xuICAgICAgfVxuICAgICAgbGV0IGkgPSB0aGlzLl9yb3dzO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB0aGlzLmxpbmVzLnB1c2godGhpcy5nZXRCbGFua0xpbmUoZmlsbEF0dHIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIHRoZSBidWZmZXIgdG8gaXQncyBpbml0aWFsIHN0YXRlLCBkaXNjYXJkaW5nIGFsbCBwcmV2aW91cyBkYXRhLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIHRoaXMueWRpc3AgPSAwO1xuICAgIHRoaXMueWJhc2UgPSAwO1xuICAgIHRoaXMueSA9IDA7XG4gICAgdGhpcy54ID0gMDtcbiAgICB0aGlzLmxpbmVzID0gbmV3IENpcmN1bGFyTGlzdDxJQnVmZmVyTGluZT4odGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSk7XG4gICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gdGhpcy5fcm93cyAtIDE7XG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyB0aGUgYnVmZmVyLCBhZGp1c3RpbmcgaXRzIGRhdGEgYWNjb3JkaW5nbHkuXG4gICAqIEBwYXJhbSBuZXdDb2xzIFRoZSBuZXcgbnVtYmVyIG9mIGNvbHVtbnMuXG4gICAqIEBwYXJhbSBuZXdSb3dzIFRoZSBuZXcgbnVtYmVyIG9mIHJvd3MuXG4gICAqL1xuICBwdWJsaWMgcmVzaXplKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgLy8gc3RvcmUgcmVmZXJlbmNlIHRvIG51bGwgY2VsbCB3aXRoIGRlZmF1bHQgYXR0cnNcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuXG4gICAgLy8gY291bnQgYnVmZmVybGluZXMgd2l0aCBvdmVybHkgYmlnIG1lbW9yeSB0byBiZSBjbGVhbmVkIGFmdGVyd2FyZHNcbiAgICBsZXQgZGlydHlNZW1vcnlMaW5lcyA9IDA7XG5cbiAgICAvLyBJbmNyZWFzZSBtYXggbGVuZ3RoIGlmIG5lZWRlZCBiZWZvcmUgYWRqdXN0bWVudHMgdG8gYWxsb3cgc3BhY2UgdG8gZmlsbFxuICAgIC8vIGFzIHJlcXVpcmVkLlxuICAgIGNvbnN0IG5ld01heExlbmd0aCA9IHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgobmV3Um93cyk7XG4gICAgaWYgKG5ld01heExlbmd0aCA+IHRoaXMubGluZXMubWF4TGVuZ3RoKSB7XG4gICAgICB0aGlzLmxpbmVzLm1heExlbmd0aCA9IG5ld01heExlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBpZiAodGhpcy5fY29scyA+IG5ld0NvbHMpIHtcbiAgICAvLyAgIGNvbnNvbGUubG9nKCdpbmNyZWFzZSEnKTtcbiAgICAvLyB9XG5cbiAgICAvLyBUaGUgZm9sbG93aW5nIGFkanVzdG1lbnRzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiB0aGUgYnVmZmVyIGhhcyBiZWVuXG4gICAgLy8gaW5pdGlhbGl6ZWQvZmlsbGVkLlxuICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIERlYWwgd2l0aCBjb2x1bW5zIGluY3JlYXNpbmcgKHJlZHVjaW5nIG5lZWRzIHRvIGhhcHBlbiBhZnRlciByZWZsb3cpXG4gICAgICBpZiAodGhpcy5fY29scyA8IG5ld0NvbHMpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgLy8gK2Jvb2xlYW4gZm9yIGZhc3QgMCBvciAxIGNvbnZlcnNpb25cbiAgICAgICAgICBkaXJ0eU1lbW9yeUxpbmVzICs9ICt0aGlzLmxpbmVzLmdldChpKSEucmVzaXplKG5ld0NvbHMsIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXNpemUgcm93cyBpbiBib3RoIGRpcmVjdGlvbnMgYXMgbmVlZGVkXG4gICAgICBsZXQgYWRkVG9ZID0gMDtcbiAgICAgIGlmICh0aGlzLl9yb3dzIDwgbmV3Um93cykge1xuICAgICAgICBmb3IgKGxldCB5ID0gdGhpcy5fcm93czsgeSA8IG5ld1Jvd3M7IHkrKykge1xuICAgICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA8IG5ld1Jvd3MgKyB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZSB8fCB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NQdHkuYmFja2VuZCAhPT0gdW5kZWZpbmVkIHx8IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eS5idWlsZE51bWJlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIC8vIEp1c3QgYWRkIHRoZSBuZXcgbWlzc2luZyByb3dzIG9uIFdpbmRvd3MgYXMgY29ucHR5IHJlcHJpbnRzIHRoZSBzY3JlZW4gd2l0aCBpdCdzXG4gICAgICAgICAgICAgIC8vIHZpZXcgb2YgdGhlIHdvcmxkLiBPbmNlIGEgbGluZSBlbnRlcnMgc2Nyb2xsYmFjayBmb3IgY29ucHR5IGl0IHJlbWFpbnMgdGhlcmVcbiAgICAgICAgICAgICAgdGhpcy5saW5lcy5wdXNoKG5ldyBCdWZmZXJMaW5lKG5ld0NvbHMsIG51bGxDZWxsKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAodGhpcy55YmFzZSA+IDAgJiYgdGhpcy5saW5lcy5sZW5ndGggPD0gdGhpcy55YmFzZSArIHRoaXMueSArIGFkZFRvWSArIDEpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGVyZSBpcyByb29tIGFib3ZlIHRoZSBidWZmZXIgYW5kIHRoZXJlIGFyZSBubyBlbXB0eSBlbGVtZW50cyBiZWxvdyB0aGUgbGluZSxcbiAgICAgICAgICAgICAgICAvLyBzY3JvbGwgdXBcbiAgICAgICAgICAgICAgICB0aGlzLnliYXNlLS07XG4gICAgICAgICAgICAgICAgYWRkVG9ZKys7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMueWRpc3AgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAvLyBWaWV3cG9ydCBpcyBhdCB0aGUgdG9wIG9mIHRoZSBidWZmZXIsIG11c3QgaW5jcmVhc2UgZG93bndhcmRzXG4gICAgICAgICAgICAgICAgICB0aGlzLnlkaXNwLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEFkZCBhIGJsYW5rIGxpbmUgaWYgdGhlcmUgaXMgbm8gYnVmZmVyIGxlZnQgYXQgdGhlIHRvcCB0byBzY3JvbGwgdG8sIG9yIGlmIHRoZXJlXG4gICAgICAgICAgICAgICAgLy8gYXJlIGJsYW5rIGxpbmVzIGFmdGVyIHRoZSBjdXJzb3JcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVzLnB1c2gobmV3IEJ1ZmZlckxpbmUobmV3Q29scywgbnVsbENlbGwpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHsgLy8gKHRoaXMuX3Jvd3MgPj0gbmV3Um93cylcbiAgICAgICAgZm9yIChsZXQgeSA9IHRoaXMuX3Jvd3M7IHkgPiBuZXdSb3dzOyB5LS0pIHtcbiAgICAgICAgICBpZiAodGhpcy5saW5lcy5sZW5ndGggPiBuZXdSb3dzICsgdGhpcy55YmFzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubGluZXMubGVuZ3RoID4gdGhpcy55YmFzZSArIHRoaXMueSArIDEpIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgYSBibGFuayBsaW5lIGJlbG93IHRoZSBjdXJzb3IsIHJlbW92ZSBpdFxuICAgICAgICAgICAgICB0aGlzLmxpbmVzLnBvcCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gVGhlIGxpbmUgaXMgdGhlIGN1cnNvciwgc2Nyb2xsIGRvd25cbiAgICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSBtYXggbGVuZ3RoIGlmIG5lZWRlZCBhZnRlciBhZGp1c3RtZW50cywgdGhpcyBpcyBkb25lIGFmdGVyIGFzIGl0XG4gICAgICAvLyB3b3VsZCBvdGhlcndpc2UgY3V0IGRhdGEgZnJvbSB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIuXG4gICAgICBpZiAobmV3TWF4TGVuZ3RoIDwgdGhpcy5saW5lcy5tYXhMZW5ndGgpIHtcbiAgICAgICAgLy8gVHJpbSBmcm9tIHRoZSB0b3Agb2YgdGhlIGJ1ZmZlciBhbmQgYWRqdXN0IHliYXNlIGFuZCB5ZGlzcC5cbiAgICAgICAgY29uc3QgYW1vdW50VG9UcmltID0gdGhpcy5saW5lcy5sZW5ndGggLSBuZXdNYXhMZW5ndGg7XG4gICAgICAgIGlmIChhbW91bnRUb1RyaW0gPiAwKSB7XG4gICAgICAgICAgdGhpcy5saW5lcy50cmltU3RhcnQoYW1vdW50VG9UcmltKTtcbiAgICAgICAgICB0aGlzLnliYXNlID0gTWF0aC5tYXgodGhpcy55YmFzZSAtIGFtb3VudFRvVHJpbSwgMCk7XG4gICAgICAgICAgdGhpcy55ZGlzcCA9IE1hdGgubWF4KHRoaXMueWRpc3AgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICAgIHRoaXMuc2F2ZWRZID0gTWF0aC5tYXgodGhpcy5zYXZlZFkgLSBhbW91bnRUb1RyaW0sIDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGluZXMubWF4TGVuZ3RoID0gbmV3TWF4TGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgY3Vyc29yIHN0YXlzIG9uIHNjcmVlblxuICAgICAgdGhpcy54ID0gTWF0aC5taW4odGhpcy54LCBuZXdDb2xzIC0gMSk7XG4gICAgICB0aGlzLnkgPSBNYXRoLm1pbih0aGlzLnksIG5ld1Jvd3MgLSAxKTtcbiAgICAgIGlmIChhZGRUb1kpIHtcbiAgICAgICAgdGhpcy55ICs9IGFkZFRvWTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2F2ZWRYID0gTWF0aC5taW4odGhpcy5zYXZlZFgsIG5ld0NvbHMgLSAxKTtcblxuICAgICAgdGhpcy5zY3JvbGxUb3AgPSAwO1xuICAgIH1cblxuICAgIHRoaXMuc2Nyb2xsQm90dG9tID0gbmV3Um93cyAtIDE7XG5cbiAgICBpZiAodGhpcy5faXNSZWZsb3dFbmFibGVkKSB7XG4gICAgICB0aGlzLl9yZWZsb3cobmV3Q29scywgbmV3Um93cyk7XG5cbiAgICAgIC8vIFRyaW0gdGhlIGVuZCBvZiB0aGUgbGluZSBvZmYgaWYgY29scyBzaHJ1bmtcbiAgICAgIGlmICh0aGlzLl9jb2xzID4gbmV3Q29scykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAvLyArYm9vbGVhbiBmb3IgZmFzdCAwIG9yIDEgY29udmVyc2lvblxuICAgICAgICAgIGRpcnR5TWVtb3J5TGluZXMgKz0gK3RoaXMubGluZXMuZ2V0KGkpIS5yZXNpemUobmV3Q29scywgbnVsbENlbGwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fY29scyA9IG5ld0NvbHM7XG4gICAgdGhpcy5fcm93cyA9IG5ld1Jvd3M7XG5cbiAgICB0aGlzLl9tZW1vcnlDbGVhbnVwUXVldWUuY2xlYXIoKTtcbiAgICAvLyBzY2hlZHVsZSBtZW1vcnkgY2xlYW51cCBvbmx5LCBpZiBtb3JlIHRoYW4gMTAlIG9mIHRoZSBsaW5lcyBhcmUgYWZmZWN0ZWRcbiAgICBpZiAoZGlydHlNZW1vcnlMaW5lcyA+IDAuMSAqIHRoaXMubGluZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24gPSAwO1xuICAgICAgdGhpcy5fbWVtb3J5Q2xlYW51cFF1ZXVlLmVucXVldWUoKCkgPT4gdGhpcy5fYmF0Y2hlZE1lbW9yeUNsZWFudXAoKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfbWVtb3J5Q2xlYW51cFF1ZXVlID0gbmV3IElkbGVUYXNrUXVldWUoKTtcbiAgcHJpdmF0ZSBfbWVtb3J5Q2xlYW51cFBvc2l0aW9uID0gMDtcblxuICBwcml2YXRlIF9iYXRjaGVkTWVtb3J5Q2xlYW51cCgpOiBib29sZWFuIHtcbiAgICBsZXQgbm9ybWFsUnVuID0gdHJ1ZTtcbiAgICBpZiAodGhpcy5fbWVtb3J5Q2xlYW51cFBvc2l0aW9uID49IHRoaXMubGluZXMubGVuZ3RoKSB7XG4gICAgICAvLyBjbGVhbnVwIG1hZGUgaXQgb25jZSB0aHJvdWdoIGFsbCBsaW5lcywgdGh1cyByZXNjYW4gaW4gbG9vcCBiZWxvdyB0byBhbHNvIGNhdGNoIHNoaWZ0ZWRcbiAgICAgIC8vIGxpbmVzLCB3aGljaCBzaG91bGQgZmluaXNoIHJhdGhlciBxdWljayBpZiB0aGVyZSBhcmUgbm8gbW9yZSBjbGVhbnVwcyBwZW5kaW5nXG4gICAgICB0aGlzLl9tZW1vcnlDbGVhbnVwUG9zaXRpb24gPSAwO1xuICAgICAgbm9ybWFsUnVuID0gZmFsc2U7XG4gICAgfVxuICAgIGxldCBjb3VudGVkID0gMDtcbiAgICB3aGlsZSAodGhpcy5fbWVtb3J5Q2xlYW51cFBvc2l0aW9uIDwgdGhpcy5saW5lcy5sZW5ndGgpIHtcbiAgICAgIGNvdW50ZWQgKz0gdGhpcy5saW5lcy5nZXQodGhpcy5fbWVtb3J5Q2xlYW51cFBvc2l0aW9uKyspIS5jbGVhbnVwTWVtb3J5KCk7XG4gICAgICAvLyBjbGVhbnVwIG1heCAxMDAgbGluZXMgcGVyIGJhdGNoXG4gICAgICBpZiAoY291bnRlZCA+IDEwMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gbm9ybWFsIHJ1bnMgYWx3YXlzIG5lZWQgYW5vdGhlciByZXNjYW4gYWZ0ZXJ3YXJkc1xuICAgIC8vIGlmIHdlIG1hZGUgaXQgaGVyZSB3aXRoIG5vcm1hbFJ1bj1mYWxzZSwgd2UgYXJlIGluIGEgZmluYWwgcnVuXG4gICAgLy8gYW5kIGNhbiBlbmQgdGhlIGNsZWFudXAgdGFzayBmb3Igc3VyZVxuICAgIHJldHVybiBub3JtYWxSdW47XG4gIH1cblxuICBwcml2YXRlIGdldCBfaXNSZWZsb3dFbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHdpbmRvd3NQdHkgPSB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NQdHk7XG4gICAgaWYgKHdpbmRvd3NQdHkgJiYgd2luZG93c1B0eS5idWlsZE51bWJlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2sgJiYgd2luZG93c1B0eS5iYWNrZW5kID09PSAnY29ucHR5JyAmJiB3aW5kb3dzUHR5LmJ1aWxkTnVtYmVyID49IDIxMzc2O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayAmJiAhdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlZmxvdyhuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jb2xzID09PSBuZXdDb2xzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHJvd3MsIGlnbm9yZSB0aGUgbGFzdCBvbmUgYXMgaXQgY2Fubm90IGJlIHdyYXBwZWRcbiAgICBpZiAobmV3Q29scyA+IHRoaXMuX2NvbHMpIHtcbiAgICAgIHRoaXMuX3JlZmxvd0xhcmdlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVmbG93U21hbGxlcihuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXIobmV3Q29sczogbnVtYmVyLCBuZXdSb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCByZWZsb3dDdXJzb3JMaW5lID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5yZWZsb3dDdXJzb3JMaW5lO1xuICAgIGNvbnN0IHRvUmVtb3ZlOiBudW1iZXJbXSA9IHJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUodGhpcy5saW5lcywgdGhpcy5fY29scywgbmV3Q29scywgdGhpcy55YmFzZSArIHRoaXMueSwgdGhpcy5nZXROdWxsQ2VsbChERUZBVUxUX0FUVFJfREFUQSksIHJlZmxvd0N1cnNvckxpbmUpO1xuICAgIGlmICh0b1JlbW92ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBuZXdMYXlvdXRSZXN1bHQgPSByZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQodGhpcy5saW5lcywgdG9SZW1vdmUpO1xuICAgICAgcmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQodGhpcy5saW5lcywgbmV3TGF5b3V0UmVzdWx0LmxheW91dCk7XG4gICAgICB0aGlzLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChuZXdDb2xzLCBuZXdSb3dzLCBuZXdMYXlvdXRSZXN1bHQuY291bnRSZW1vdmVkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlciwgY291bnRSZW1vdmVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuICAgIC8vIEFkanVzdCB2aWV3cG9ydCBiYXNlZCBvbiBudW1iZXIgb2YgaXRlbXMgcmVtb3ZlZFxuICAgIGxldCB2aWV3cG9ydEFkanVzdG1lbnRzID0gY291bnRSZW1vdmVkO1xuICAgIHdoaWxlICh2aWV3cG9ydEFkanVzdG1lbnRzLS0gPiAwKSB7XG4gICAgICBpZiAodGhpcy55YmFzZSA9PT0gMCkge1xuICAgICAgICBpZiAodGhpcy55ID4gMCkge1xuICAgICAgICAgIHRoaXMueS0tO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxpbmVzLmxlbmd0aCA8IG5ld1Jvd3MpIHtcbiAgICAgICAgICAvLyBBZGQgYW4gZXh0cmEgcm93IGF0IHRoZSBib3R0b20gb2YgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgdGhpcy5saW5lcy5wdXNoKG5ldyBCdWZmZXJMaW5lKG5ld0NvbHMsIG51bGxDZWxsKSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLnlkaXNwID09PSB0aGlzLnliYXNlKSB7XG4gICAgICAgICAgdGhpcy55ZGlzcC0tO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueWJhc2UtLTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5zYXZlZFkgPSBNYXRoLm1heCh0aGlzLnNhdmVkWSAtIGNvdW50UmVtb3ZlZCwgMCk7XG4gIH1cblxuICBwcml2YXRlIF9yZWZsb3dTbWFsbGVyKG5ld0NvbHM6IG51bWJlciwgbmV3Um93czogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3QgcmVmbG93Q3Vyc29yTGluZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMucmVmbG93Q3Vyc29yTGluZTtcbiAgICBjb25zdCBudWxsQ2VsbCA9IHRoaXMuZ2V0TnVsbENlbGwoREVGQVVMVF9BVFRSX0RBVEEpO1xuICAgIC8vIEdhdGhlciBhbGwgQnVmZmVyTGluZXMgdGhhdCBuZWVkIHRvIGJlIGluc2VydGVkIGludG8gdGhlIEJ1ZmZlciBoZXJlIHNvIHRoYXQgdGhleSBjYW4gYmVcbiAgICAvLyBiYXRjaGVkIHVwIGFuZCBvbmx5IGNvbW1pdHRlZCBvbmNlXG4gICAgY29uc3QgdG9JbnNlcnQgPSBbXTtcbiAgICBsZXQgY291bnRUb0luc2VydCA9IDA7XG4gICAgLy8gR28gYmFja3dhcmRzIGFzIG1hbnkgbGluZXMgbWF5IGJlIHRyaW1tZWQgYW5kIHRoaXMgd2lsbCBhdm9pZCBjb25zaWRlcmluZyB0aGVtXG4gICAgZm9yIChsZXQgeSA9IHRoaXMubGluZXMubGVuZ3RoIC0gMTsgeSA+PSAwOyB5LS0pIHtcbiAgICAgIC8vIENoZWNrIHdoZXRoZXIgdGhpcyBsaW5lIGlzIGEgcHJvYmxlbVxuICAgICAgbGV0IG5leHRMaW5lID0gdGhpcy5saW5lcy5nZXQoeSkgYXMgQnVmZmVyTGluZTtcbiAgICAgIGlmICghbmV4dExpbmUgfHwgIW5leHRMaW5lLmlzV3JhcHBlZCAmJiBuZXh0TGluZS5nZXRUcmltbWVkTGVuZ3RoKCkgPD0gbmV3Q29scykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gR2F0aGVyIHdyYXBwZWQgbGluZXMgYW5kIGFkanVzdCB5IHRvIGJlIHRoZSBzdGFydGluZyBsaW5lXG4gICAgICBjb25zdCB3cmFwcGVkTGluZXM6IEJ1ZmZlckxpbmVbXSA9IFtuZXh0TGluZV07XG4gICAgICB3aGlsZSAobmV4dExpbmUuaXNXcmFwcGVkICYmIHkgPiAwKSB7XG4gICAgICAgIG5leHRMaW5lID0gdGhpcy5saW5lcy5nZXQoLS15KSBhcyBCdWZmZXJMaW5lO1xuICAgICAgICB3cmFwcGVkTGluZXMudW5zaGlmdChuZXh0TGluZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVmbG93Q3Vyc29yTGluZSkge1xuICAgICAgICAvLyBJZiB0aGVzZSBsaW5lcyBjb250YWluIHRoZSBjdXJzb3IgZG9uJ3QgdG91Y2ggdGhlbSwgdGhlIHByb2dyYW0gd2lsbCBoYW5kbGUgZml4aW5nIHVwXG4gICAgICAgIC8vIHdyYXBwZWQgbGluZXMgd2l0aCB0aGUgY3Vyc29yXG4gICAgICAgIGNvbnN0IGFic29sdXRlWSA9IHRoaXMueWJhc2UgKyB0aGlzLnk7XG4gICAgICAgIGlmIChhYnNvbHV0ZVkgPj0geSAmJiBhYnNvbHV0ZVkgPCB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxhc3RMaW5lTGVuZ3RoID0gd3JhcHBlZExpbmVzW3dyYXBwZWRMaW5lcy5sZW5ndGggLSAxXS5nZXRUcmltbWVkTGVuZ3RoKCk7XG4gICAgICBjb25zdCBkZXN0TGluZUxlbmd0aHMgPSByZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMod3JhcHBlZExpbmVzLCB0aGlzLl9jb2xzLCBuZXdDb2xzKTtcbiAgICAgIGNvbnN0IGxpbmVzVG9BZGQgPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gd3JhcHBlZExpbmVzLmxlbmd0aDtcbiAgICAgIGxldCB0cmltbWVkTGluZXM6IG51bWJlcjtcbiAgICAgIGlmICh0aGlzLnliYXNlID09PSAwICYmIHRoaXMueSAhPT0gdGhpcy5saW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIC8vIElmIHRoZSB0b3Agc2VjdGlvbiBvZiB0aGUgYnVmZmVyIGlzIG5vdCB5ZXQgZmlsbGVkXG4gICAgICAgIHRyaW1tZWRMaW5lcyA9IE1hdGgubWF4KDAsIHRoaXMueSAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmltbWVkTGluZXMgPSBNYXRoLm1heCgwLCB0aGlzLmxpbmVzLmxlbmd0aCAtIHRoaXMubGluZXMubWF4TGVuZ3RoICsgbGluZXNUb0FkZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUgbmV3IGxpbmVzXG4gICAgICBjb25zdCBuZXdMaW5lczogQnVmZmVyTGluZVtdID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzVG9BZGQ7IGkrKykge1xuICAgICAgICBjb25zdCBuZXdMaW5lID0gdGhpcy5nZXRCbGFua0xpbmUoREVGQVVMVF9BVFRSX0RBVEEsIHRydWUpIGFzIEJ1ZmZlckxpbmU7XG4gICAgICAgIG5ld0xpbmVzLnB1c2gobmV3TGluZSk7XG4gICAgICB9XG4gICAgICBpZiAobmV3TGluZXMubGVuZ3RoID4gMCkge1xuICAgICAgICB0b0luc2VydC5wdXNoKHtcbiAgICAgICAgICAvLyBjb3VudFRvSW5zZXJ0IGhlcmUgZ2V0cyB0aGUgYWN0dWFsIGluZGV4LCB0YWtpbmcgaW50byBhY2NvdW50IG90aGVyIGluc2VydGVkIGl0ZW1zLlxuICAgICAgICAgIC8vIHVzaW5nIHRoaXMgd2UgY2FuIGl0ZXJhdGUgdGhyb3VnaCB0aGUgbGlzdCBmb3J3YXJkc1xuICAgICAgICAgIHN0YXJ0OiB5ICsgd3JhcHBlZExpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQsXG4gICAgICAgICAgbmV3TGluZXNcbiAgICAgICAgfSk7XG4gICAgICAgIGNvdW50VG9JbnNlcnQgKz0gbmV3TGluZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgd3JhcHBlZExpbmVzLnB1c2goLi4ubmV3TGluZXMpO1xuXG4gICAgICAvLyBDb3B5IGJ1ZmZlciBkYXRhIHRvIG5ldyBsb2NhdGlvbnMsIHRoaXMgbmVlZHMgdG8gaGFwcGVuIGJhY2t3YXJkcyB0byBkbyBpbi1wbGFjZVxuICAgICAgbGV0IGRlc3RMaW5lSW5kZXggPSBkZXN0TGluZUxlbmd0aHMubGVuZ3RoIC0gMTsgLy8gTWF0aC5mbG9vcihjZWxsc05lZWRlZCAvIG5ld0NvbHMpO1xuICAgICAgbGV0IGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07IC8vIGNlbGxzTmVlZGVkICUgbmV3Q29scztcbiAgICAgIGlmIChkZXN0Q29sID09PSAwKSB7XG4gICAgICAgIGRlc3RMaW5lSW5kZXgtLTtcbiAgICAgICAgZGVzdENvbCA9IGRlc3RMaW5lTGVuZ3Roc1tkZXN0TGluZUluZGV4XTtcbiAgICAgIH1cbiAgICAgIGxldCBzcmNMaW5lSW5kZXggPSB3cmFwcGVkTGluZXMubGVuZ3RoIC0gbGluZXNUb0FkZCAtIDE7XG4gICAgICBsZXQgc3JjQ29sID0gbGFzdExpbmVMZW5ndGg7XG4gICAgICB3aGlsZSAoc3JjTGluZUluZGV4ID49IDApIHtcbiAgICAgICAgY29uc3QgY2VsbHNUb0NvcHkgPSBNYXRoLm1pbihzcmNDb2wsIGRlc3RDb2wpO1xuICAgICAgICBpZiAod3JhcHBlZExpbmVzW2Rlc3RMaW5lSW5kZXhdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBTYW5pdHkgY2hlY2sgdGhhdCB0aGUgbGluZSBleGlzdHMsIHRoaXMgaGFzIGJlZW4ga25vd24gdG8gZmFpbCBmb3IgYW4gdW5rbm93biByZWFzb25cbiAgICAgICAgICAvLyB3aGljaCB3b3VsZCBzdG9wIHRoZSByZWZsb3cgZnJvbSBoYXBwZW5pbmcgaWYgYW4gZXhjZXB0aW9uIHdvdWxkIHRocm93LlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHdyYXBwZWRMaW5lc1tkZXN0TGluZUluZGV4XS5jb3B5Q2VsbHNGcm9tKHdyYXBwZWRMaW5lc1tzcmNMaW5lSW5kZXhdLCBzcmNDb2wgLSBjZWxsc1RvQ29weSwgZGVzdENvbCAtIGNlbGxzVG9Db3B5LCBjZWxsc1RvQ29weSwgdHJ1ZSk7XG4gICAgICAgIGRlc3RDb2wgLT0gY2VsbHNUb0NvcHk7XG4gICAgICAgIGlmIChkZXN0Q29sID09PSAwKSB7XG4gICAgICAgICAgZGVzdExpbmVJbmRleC0tO1xuICAgICAgICAgIGRlc3RDb2wgPSBkZXN0TGluZUxlbmd0aHNbZGVzdExpbmVJbmRleF07XG4gICAgICAgIH1cbiAgICAgICAgc3JjQ29sIC09IGNlbGxzVG9Db3B5O1xuICAgICAgICBpZiAoc3JjQ29sID09PSAwKSB7XG4gICAgICAgICAgc3JjTGluZUluZGV4LS07XG4gICAgICAgICAgY29uc3Qgd3JhcHBlZExpbmVzSW5kZXggPSBNYXRoLm1heChzcmNMaW5lSW5kZXgsIDApO1xuICAgICAgICAgIHNyY0NvbCA9IGdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCh3cmFwcGVkTGluZXMsIHdyYXBwZWRMaW5lc0luZGV4LCB0aGlzLl9jb2xzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBOdWxsIG91dCB0aGUgZW5kIG9mIHRoZSBsaW5lIGVuZHMgaWYgYSB3aWRlIGNoYXJhY3RlciB3cmFwcGVkIHRvIHRoZSBmb2xsb3dpbmcgbGluZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3cmFwcGVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGRlc3RMaW5lTGVuZ3Roc1tpXSA8IG5ld0NvbHMpIHtcbiAgICAgICAgICB3cmFwcGVkTGluZXNbaV0uc2V0Q2VsbChkZXN0TGluZUxlbmd0aHNbaV0sIG51bGxDZWxsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3Qgdmlld3BvcnQgYXMgbmVlZGVkXG4gICAgICBsZXQgdmlld3BvcnRBZGp1c3RtZW50cyA9IGxpbmVzVG9BZGQgLSB0cmltbWVkTGluZXM7XG4gICAgICB3aGlsZSAodmlld3BvcnRBZGp1c3RtZW50cy0tID4gMCkge1xuICAgICAgICBpZiAodGhpcy55YmFzZSA9PT0gMCkge1xuICAgICAgICAgIGlmICh0aGlzLnkgPCBuZXdSb3dzIC0gMSkge1xuICAgICAgICAgICAgdGhpcy55Kys7XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnBvcCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnliYXNlKys7XG4gICAgICAgICAgICB0aGlzLnlkaXNwKys7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVuc3VyZSB5YmFzZSBkb2VzIG5vdCBleGNlZWQgaXRzIG1heGltdW0gdmFsdWVcbiAgICAgICAgICBpZiAodGhpcy55YmFzZSA8IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLCB0aGlzLmxpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQpIC0gbmV3Um93cykge1xuICAgICAgICAgICAgaWYgKHRoaXMueWJhc2UgPT09IHRoaXMueWRpc3ApIHtcbiAgICAgICAgICAgICAgdGhpcy55ZGlzcCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy55YmFzZSsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zYXZlZFkgPSBNYXRoLm1pbih0aGlzLnNhdmVkWSArIGxpbmVzVG9BZGQsIHRoaXMueWJhc2UgKyBuZXdSb3dzIC0gMSk7XG4gICAgfVxuXG4gICAgLy8gUmVhcnJhbmdlIGxpbmVzIGluIHRoZSBidWZmZXIgaWYgdGhlcmUgYXJlIGFueSBpbnNlcnRpb25zLCB0aGlzIGlzIGRvbmUgYXQgdGhlIGVuZCByYXRoZXJcbiAgICAvLyB0aGFuIGVhcmxpZXIgc28gdGhhdCBpdCdzIGEgc2luZ2xlIE8obikgcGFzcyB0aHJvdWdoIHRoZSBidWZmZXIsIGluc3RlYWQgb2YgTyhuXjIpIGZyb20gbWFueVxuICAgIC8vIGNvc3RseSBjYWxscyB0byBDaXJjdWxhckxpc3Quc3BsaWNlLlxuICAgIGlmICh0b0luc2VydC5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBSZWNvcmQgYnVmZmVyIGluc2VydCBldmVudHMgYW5kIHRoZW4gcGxheSB0aGVtIGJhY2sgYmFja3dhcmRzIHNvIHRoYXQgdGhlIGluZGV4ZXMgYXJlXG4gICAgICAvLyBjb3JyZWN0XG4gICAgICBjb25zdCBpbnNlcnRFdmVudHM6IElJbnNlcnRFdmVudFtdID0gW107XG5cbiAgICAgIC8vIFJlY29yZCBvcmlnaW5hbCBsaW5lcyBzbyB0aGV5IGRvbid0IGdldCBvdmVycmlkZGVuIHdoZW4gd2UgcmVhcnJhbmdlIHRoZSBsaXN0XG4gICAgICBjb25zdCBvcmlnaW5hbExpbmVzOiBCdWZmZXJMaW5lW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5saW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBvcmlnaW5hbExpbmVzLnB1c2godGhpcy5saW5lcy5nZXQoaSkgYXMgQnVmZmVyTGluZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBvcmlnaW5hbExpbmVzTGVuZ3RoID0gdGhpcy5saW5lcy5sZW5ndGg7XG5cbiAgICAgIGxldCBvcmlnaW5hbExpbmVJbmRleCA9IG9yaWdpbmFsTGluZXNMZW5ndGggLSAxO1xuICAgICAgbGV0IG5leHRUb0luc2VydEluZGV4ID0gMDtcbiAgICAgIGxldCBuZXh0VG9JbnNlcnQgPSB0b0luc2VydFtuZXh0VG9JbnNlcnRJbmRleF07XG4gICAgICB0aGlzLmxpbmVzLmxlbmd0aCA9IE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLCB0aGlzLmxpbmVzLmxlbmd0aCArIGNvdW50VG9JbnNlcnQpO1xuICAgICAgbGV0IGNvdW50SW5zZXJ0ZWRTb0ZhciA9IDA7XG4gICAgICBmb3IgKGxldCBpID0gTWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGggLSAxLCBvcmlnaW5hbExpbmVzTGVuZ3RoICsgY291bnRUb0luc2VydCAtIDEpOyBpID49IDA7IGktLSkge1xuICAgICAgICBpZiAobmV4dFRvSW5zZXJ0ICYmIG5leHRUb0luc2VydC5zdGFydCA+IG9yaWdpbmFsTGluZUluZGV4ICsgY291bnRJbnNlcnRlZFNvRmFyKSB7XG4gICAgICAgICAgLy8gSW5zZXJ0IGV4dHJhIGxpbmVzIGhlcmUsIGFkanVzdGluZyBpIGFzIG5lZWRlZFxuICAgICAgICAgIGZvciAobGV0IG5leHRJID0gbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzLmxlbmd0aCAtIDE7IG5leHRJID49IDA7IG5leHRJLS0pIHtcbiAgICAgICAgICAgIHRoaXMubGluZXMuc2V0KGktLSwgbmV4dFRvSW5zZXJ0Lm5ld0xpbmVzW25leHRJXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGkrKztcblxuICAgICAgICAgIC8vIENyZWF0ZSBpbnNlcnQgZXZlbnRzIGZvciBsYXRlclxuICAgICAgICAgIGluc2VydEV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIGluZGV4OiBvcmlnaW5hbExpbmVJbmRleCArIDEsXG4gICAgICAgICAgICBhbW91bnQ6IG5leHRUb0luc2VydC5uZXdMaW5lcy5sZW5ndGhcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvdW50SW5zZXJ0ZWRTb0ZhciArPSBuZXh0VG9JbnNlcnQubmV3TGluZXMubGVuZ3RoO1xuICAgICAgICAgIG5leHRUb0luc2VydCA9IHRvSW5zZXJ0WysrbmV4dFRvSW5zZXJ0SW5kZXhdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubGluZXMuc2V0KGksIG9yaWdpbmFsTGluZXNbb3JpZ2luYWxMaW5lSW5kZXgtLV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSBtYXJrZXJzXG4gICAgICBsZXQgaW5zZXJ0Q291bnRFbWl0dGVkID0gMDtcbiAgICAgIGZvciAobGV0IGkgPSBpbnNlcnRFdmVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaW5zZXJ0RXZlbnRzW2ldLmluZGV4ICs9IGluc2VydENvdW50RW1pdHRlZDtcbiAgICAgICAgdGhpcy5saW5lcy5vbkluc2VydEVtaXR0ZXIuZmlyZShpbnNlcnRFdmVudHNbaV0pO1xuICAgICAgICBpbnNlcnRDb3VudEVtaXR0ZWQgKz0gaW5zZXJ0RXZlbnRzW2ldLmFtb3VudDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFtb3VudFRvVHJpbSA9IE1hdGgubWF4KDAsIG9yaWdpbmFsTGluZXNMZW5ndGggKyBjb3VudFRvSW5zZXJ0IC0gdGhpcy5saW5lcy5tYXhMZW5ndGgpO1xuICAgICAgaWYgKGFtb3VudFRvVHJpbSA+IDApIHtcbiAgICAgICAgdGhpcy5saW5lcy5vblRyaW1FbWl0dGVyLmZpcmUoYW1vdW50VG9UcmltKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBhIGJ1ZmZlciBsaW5lIHRvIGEgc3RyaW5nLCB3aXRoIG9wdGlvbmFsIHN0YXJ0IGFuZCBlbmQgY29sdW1ucy5cbiAgICogV2lkZSBjaGFyYWN0ZXJzIHdpbGwgY291bnQgYXMgdHdvIGNvbHVtbnMgaW4gdGhlIHJlc3VsdGluZyBzdHJpbmcuIFRoaXNcbiAgICogZnVuY3Rpb24gaXMgdXNlZnVsIGZvciBnZXR0aW5nIHRoZSBhY3R1YWwgdGV4dCB1bmRlcm5lYXRoIHRoZSByYXcgc2VsZWN0aW9uXG4gICAqIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gbGluZUluZGV4IFRoZSBhYnNvbHV0ZSBpbmRleCBvZiB0aGUgbGluZSBiZWluZyB0cmFuc2xhdGVkLlxuICAgKiBAcGFyYW0gdHJpbVJpZ2h0IFdoZXRoZXIgdG8gdHJpbSB3aGl0ZXNwYWNlIHRvIHRoZSByaWdodC5cbiAgICogQHBhcmFtIHN0YXJ0Q29sIFRoZSBjb2x1bW4gdG8gc3RhcnQgYXQuXG4gICAqIEBwYXJhbSBlbmRDb2wgVGhlIGNvbHVtbiB0byBlbmQgYXQuXG4gICAqL1xuICBwdWJsaWMgdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGxpbmVJbmRleDogbnVtYmVyLCB0cmltUmlnaHQ6IGJvb2xlYW4sIHN0YXJ0Q29sOiBudW1iZXIgPSAwLCBlbmRDb2w/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxpbmVzLmdldChsaW5lSW5kZXgpO1xuICAgIGlmICghbGluZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gbGluZS50cmFuc2xhdGVUb1N0cmluZyh0cmltUmlnaHQsIHN0YXJ0Q29sLCBlbmRDb2wpO1xuICB9XG5cbiAgcHVibGljIGdldFdyYXBwZWRSYW5nZUZvckxpbmUoeTogbnVtYmVyKTogeyBmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXIgfSB7XG4gICAgbGV0IGZpcnN0ID0geTtcbiAgICBsZXQgbGFzdCA9IHk7XG4gICAgLy8gU2NhbiB1cHdhcmRzIGZvciB3cmFwcGVkIGxpbmVzXG4gICAgd2hpbGUgKGZpcnN0ID4gMCAmJiB0aGlzLmxpbmVzLmdldChmaXJzdCkhLmlzV3JhcHBlZCkge1xuICAgICAgZmlyc3QtLTtcbiAgICB9XG4gICAgLy8gU2NhbiBkb3dud2FyZHMgZm9yIHdyYXBwZWQgbGluZXNcbiAgICB3aGlsZSAobGFzdCArIDEgPCB0aGlzLmxpbmVzLmxlbmd0aCAmJiB0aGlzLmxpbmVzLmdldChsYXN0ICsgMSkhLmlzV3JhcHBlZCkge1xuICAgICAgbGFzdCsrO1xuICAgIH1cbiAgICByZXR1cm4geyBmaXJzdCwgbGFzdCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHRoZSB0YWIgc3RvcHMuXG4gICAqIEBwYXJhbSBpIFRoZSBpbmRleCB0byBzdGFydCBzZXR0aW5nIHVwIHRhYiBzdG9wcyBmcm9tLlxuICAgKi9cbiAgcHVibGljIHNldHVwVGFiU3RvcHMoaT86IG51bWJlcik6IHZvaWQge1xuICAgIGlmIChpICE9PSBudWxsICYmIGkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKCF0aGlzLnRhYnNbaV0pIHtcbiAgICAgICAgaSA9IHRoaXMucHJldlN0b3AoaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGFicyA9IHt9O1xuICAgICAgaSA9IDA7XG4gICAgfVxuXG4gICAgZm9yICg7IGkgPCB0aGlzLl9jb2xzOyBpICs9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMudGFiU3RvcFdpZHRoKSB7XG4gICAgICB0aGlzLnRhYnNbaV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIHByZXZpb3VzIHRhYiBzdG9wIGZyb20gdGhlIGdpdmVuIHBvc2l0aW9uIChkZWZhdWx0IGlzIGN1cnJlbnQpLlxuICAgKiBAcGFyYW0geCBUaGUgcG9zaXRpb24gdG8gbW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBwcmV2aW91cyB0YWIgc3RvcC5cbiAgICovXG4gIHB1YmxpYyBwcmV2U3RvcCh4PzogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBpZiAoeCA9PT0gbnVsbCB8fCB4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHggPSB0aGlzLng7XG4gICAgfVxuICAgIHdoaWxlICghdGhpcy50YWJzWy0teF0gJiYgeCA+IDApO1xuICAgIHJldHVybiB4ID49IHRoaXMuX2NvbHMgPyB0aGlzLl9jb2xzIC0gMSA6IHggPCAwID8gMCA6IHg7XG4gIH1cblxuICAvKipcbiAgICogTW92ZSB0aGUgY3Vyc29yIG9uZSB0YWIgc3RvcCBmb3J3YXJkIGZyb20gdGhlIGdpdmVuIHBvc2l0aW9uIChkZWZhdWx0IGlzIGN1cnJlbnQpLlxuICAgKiBAcGFyYW0geCBUaGUgcG9zaXRpb24gdG8gbW92ZSB0aGUgY3Vyc29yIG9uZSB0YWIgc3RvcCBmb3J3YXJkLlxuICAgKi9cbiAgcHVibGljIG5leHRTdG9wKHg/OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGlmICh4ID09PSBudWxsIHx8IHggPT09IHVuZGVmaW5lZCkge1xuICAgICAgeCA9IHRoaXMueDtcbiAgICB9XG4gICAgd2hpbGUgKCF0aGlzLnRhYnNbKyt4XSAmJiB4IDwgdGhpcy5fY29scyk7XG4gICAgcmV0dXJuIHggPj0gdGhpcy5fY29scyA/IHRoaXMuX2NvbHMgLSAxIDogeCA8IDAgPyAwIDogeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhcnMgbWFya2VycyBvbiBzaW5nbGUgbGluZS5cbiAgICogQHBhcmFtIHkgVGhlIGxpbmUgdG8gY2xlYXIuXG4gICAqL1xuICBwdWJsaWMgY2xlYXJNYXJrZXJzKHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2lzQ2xlYXJpbmcgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5tYXJrZXJzW2ldLmxpbmUgPT09IHkpIHtcbiAgICAgICAgdGhpcy5tYXJrZXJzW2ldLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5tYXJrZXJzLnNwbGljZShpLS0sIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9pc0NsZWFyaW5nID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIG1hcmtlcnMgb24gYWxsIGxpbmVzXG4gICAqL1xuICBwdWJsaWMgY2xlYXJBbGxNYXJrZXJzKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzQ2xlYXJpbmcgPSB0cnVlO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLm1hcmtlcnNbaV0uZGlzcG9zZSgpO1xuICAgIH1cbiAgICB0aGlzLm1hcmtlcnMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9pc0NsZWFyaW5nID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgYWRkTWFya2VyKHk6IG51bWJlcik6IE1hcmtlciB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IE1hcmtlcih5KTtcbiAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIG1hcmtlci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uVHJpbShhbW91bnQgPT4ge1xuICAgICAgbWFya2VyLmxpbmUgLT0gYW1vdW50O1xuICAgICAgLy8gVGhlIG1hcmtlciBzaG91bGQgYmUgZGlzcG9zZWQgd2hlbiB0aGUgbGluZSBpcyB0cmltbWVkIGZyb20gdGhlIGJ1ZmZlclxuICAgICAgaWYgKG1hcmtlci5saW5lIDwgMCkge1xuICAgICAgICBtYXJrZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkluc2VydChldmVudCA9PiB7XG4gICAgICBpZiAobWFya2VyLmxpbmUgPj0gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgKz0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkRlbGV0ZShldmVudCA9PiB7XG4gICAgICAvLyBEZWxldGUgdGhlIG1hcmtlciBpZiBpdCdzIHdpdGhpbiB0aGUgcmFuZ2VcbiAgICAgIGlmIChtYXJrZXIubGluZSA+PSBldmVudC5pbmRleCAmJiBtYXJrZXIubGluZSA8IGV2ZW50LmluZGV4ICsgZXZlbnQuYW1vdW50KSB7XG4gICAgICAgIG1hcmtlci5kaXNwb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNoaWZ0IHRoZSBtYXJrZXIgaWYgaXQncyBhZnRlciB0aGUgZGVsZXRlZCByYW5nZVxuICAgICAgaWYgKG1hcmtlci5saW5lID4gZXZlbnQuaW5kZXgpIHtcbiAgICAgICAgbWFya2VyLmxpbmUgLT0gZXZlbnQuYW1vdW50O1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBtYXJrZXIucmVnaXN0ZXIobWFya2VyLm9uRGlzcG9zZSgoKSA9PiB0aGlzLl9yZW1vdmVNYXJrZXIobWFya2VyKSkpO1xuICAgIHJldHVybiBtYXJrZXI7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNYXJrZXIobWFya2VyOiBNYXJrZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzQ2xlYXJpbmcpIHtcbiAgICAgIHRoaXMubWFya2Vycy5zcGxpY2UodGhpcy5tYXJrZXJzLmluZGV4T2YobWFya2VyKSwgMSk7XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IElBdHRyaWJ1dGVEYXRhIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyJztcbmltcG9ydCB7IElCdWZmZXIsIElCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuLyoqXG4gKiBUaGUgQnVmZmVyU2V0IHJlcHJlc2VudHMgdGhlIHNldCBvZiB0d28gYnVmZmVycyB1c2VkIGJ5IHh0ZXJtIHRlcm1pbmFscyAobm9ybWFsIGFuZCBhbHQpIGFuZFxuICogcHJvdmlkZXMgYWxzbyB1dGlsaXRpZXMgZm9yIHdvcmtpbmcgd2l0aCB0aGVtLlxuICovXG5leHBvcnQgY2xhc3MgQnVmZmVyU2V0IGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElCdWZmZXJTZXQge1xuICBwcml2YXRlIF9ub3JtYWwhOiBCdWZmZXI7XG4gIHByaXZhdGUgX2FsdCE6IEJ1ZmZlcjtcbiAgcHJpdmF0ZSBfYWN0aXZlQnVmZmVyITogQnVmZmVyO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQnVmZmVyQWN0aXZhdGUgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx7IGFjdGl2ZUJ1ZmZlcjogSUJ1ZmZlciwgaW5hY3RpdmVCdWZmZXI6IElCdWZmZXIgfT4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJ1ZmZlckFjdGl2YXRlID0gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudDtcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IEJ1ZmZlclNldCBmb3IgdGhlIGdpdmVuIHRlcm1pbmFsLlxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdzY3JvbGxiYWNrJywgKCkgPT4gdGhpcy5yZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25TcGVjaWZpY09wdGlvbkNoYW5nZSgndGFiU3RvcFdpZHRoJywgKCkgPT4gdGhpcy5zZXR1cFRhYlN0b3BzKCkpKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3JtYWwgPSBuZXcgQnVmZmVyKHRydWUsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9ub3JtYWwuZmlsbFZpZXdwb3J0Um93cygpO1xuXG4gICAgLy8gVGhlIGFsdCBidWZmZXIgc2hvdWxkIG5ldmVyIGhhdmUgc2Nyb2xsYmFjay5cbiAgICAvLyBTZWUgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sI2gyLVRoZS1BbHRlcm5hdGUtU2NyZWVuLUJ1ZmZlclxuICAgIHRoaXMuX2FsdCA9IG5ldyBCdWZmZXIoZmFsc2UsIHRoaXMuX29wdGlvbnNTZXJ2aWNlLCB0aGlzLl9idWZmZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsLFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX2FsdFxuICAgIH0pO1xuXG4gICAgdGhpcy5zZXR1cFRhYlN0b3BzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYWx0IEJ1ZmZlciBvZiB0aGUgQnVmZmVyU2V0XG4gICAqL1xuICBwdWJsaWMgZ2V0IGFsdCgpOiBCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLl9hbHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudGx5IGFjdGl2ZSBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBhY3RpdmUoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5vcm1hbCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldFxuICAgKi9cbiAgcHVibGljIGdldCBub3JtYWwoKTogQnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbm9ybWFsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG5vcm1hbCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldCBhcyBpdHMgY3VycmVudGx5IGFjdGl2ZSBCdWZmZXJcbiAgICovXG4gIHB1YmxpYyBhY3RpdmF0ZU5vcm1hbEJ1ZmZlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyID09PSB0aGlzLl9ub3JtYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbm9ybWFsLnggPSB0aGlzLl9hbHQueDtcbiAgICB0aGlzLl9ub3JtYWwueSA9IHRoaXMuX2FsdC55O1xuICAgIC8vIFRoZSBhbHQgYnVmZmVyIHNob3VsZCBhbHdheXMgYmUgY2xlYXJlZCB3aGVuIHdlIHN3aXRjaCB0byB0aGUgbm9ybWFsXG4gICAgLy8gYnVmZmVyLiBUaGlzIGZyZWVzIHVwIG1lbW9yeSBzaW5jZSB0aGUgYWx0IGJ1ZmZlciBzaG91bGQgYWx3YXlzIGJlIG5ld1xuICAgIC8vIHdoZW4gYWN0aXZhdGVkLlxuICAgIHRoaXMuX2FsdC5jbGVhckFsbE1hcmtlcnMoKTtcbiAgICB0aGlzLl9hbHQuY2xlYXIoKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIgPSB0aGlzLl9ub3JtYWw7XG4gICAgdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHtcbiAgICAgIGFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsLFxuICAgICAgaW5hY3RpdmVCdWZmZXI6IHRoaXMuX2FsdFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFsdCBCdWZmZXIgb2YgdGhlIEJ1ZmZlclNldCBhcyBpdHMgY3VycmVudGx5IGFjdGl2ZSBCdWZmZXJcbiAgICovXG4gIHB1YmxpYyBhY3RpdmF0ZUFsdEJ1ZmZlcihmaWxsQXR0cj86IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlciA9PT0gdGhpcy5fYWx0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFNpbmNlIHRoZSBhbHQgYnVmZmVyIGlzIGFsd2F5cyBjbGVhcmVkIHdoZW4gdGhlIG5vcm1hbCBidWZmZXIgaXNcbiAgICAvLyBhY3RpdmF0ZWQsIHdlIHdhbnQgdG8gZmlsbCBpdCB3aGVuIHN3aXRjaGluZyB0byBpdC5cbiAgICB0aGlzLl9hbHQuZmlsbFZpZXdwb3J0Um93cyhmaWxsQXR0cik7XG4gICAgdGhpcy5fYWx0LnggPSB0aGlzLl9ub3JtYWwueDtcbiAgICB0aGlzLl9hbHQueSA9IHRoaXMuX25vcm1hbC55O1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX2FsdDtcbiAgICB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe1xuICAgICAgYWN0aXZlQnVmZmVyOiB0aGlzLl9hbHQsXG4gICAgICBpbmFjdGl2ZUJ1ZmZlcjogdGhpcy5fbm9ybWFsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzaXplcyBib3RoIG5vcm1hbCBhbmQgYWx0IGJ1ZmZlcnMsIGFkanVzdGluZyB0aGVpciBkYXRhIGFjY29yZGluZ2x5LlxuICAgKiBAcGFyYW0gbmV3Q29scyBUaGUgbmV3IG51bWJlciBvZiBjb2x1bW5zLlxuICAgKiBAcGFyYW0gbmV3Um93cyBUaGUgbmV3IG51bWJlciBvZiByb3dzLlxuICAgKi9cbiAgcHVibGljIHJlc2l6ZShuZXdDb2xzOiBudW1iZXIsIG5ld1Jvd3M6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX25vcm1hbC5yZXNpemUobmV3Q29scywgbmV3Um93cyk7XG4gICAgdGhpcy5fYWx0LnJlc2l6ZShuZXdDb2xzLCBuZXdSb3dzKTtcbiAgICB0aGlzLnNldHVwVGFiU3RvcHMobmV3Q29scyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgdGhlIHRhYiBzdG9wcy5cbiAgICogQHBhcmFtIGkgVGhlIGluZGV4IHRvIHN0YXJ0IHNldHRpbmcgdXAgdGFiIHN0b3BzIGZyb20uXG4gICAqL1xuICBwdWJsaWMgc2V0dXBUYWJTdG9wcyhpPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbm9ybWFsLnNldHVwVGFiU3RvcHMoaSk7XG4gICAgdGhpcy5fYWx0LnNldHVwVGFiU3RvcHMoaSk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSUF0dHJpYnV0ZURhdGEsIElCdWZmZXJMaW5lIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEJ1ZmZlclNldCB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyU2V0JztcbmltcG9ydCB7IElCdWZmZXIsIElCdWZmZXJTZXQgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIHR5cGUgSUJ1ZmZlclJlc2l6ZUV2ZW50IH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5cbmV4cG9ydCBjb25zdCBNSU5JTVVNX0NPTFMgPSAyOyAvLyBMZXNzIHRoYW4gMiBjYW4gbWVzcyB3aXRoIHdpZGUgY2hhcnNcbmV4cG9ydCBjb25zdCBNSU5JTVVNX1JPV1MgPSAxO1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQnVmZmVyU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgY29sczogbnVtYmVyO1xuICBwdWJsaWMgcm93czogbnVtYmVyO1xuICBwdWJsaWMgYnVmZmVyczogSUJ1ZmZlclNldDtcbiAgLyoqIFdoZXRoZXIgdGhlIHVzZXIgaXMgc2Nyb2xsaW5nIChsb2NrcyB0aGUgc2Nyb2xsIHBvc2l0aW9uKSAqL1xuICBwdWJsaWMgaXNVc2VyU2Nyb2xsaW5nOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXNpemUgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxJQnVmZmVyUmVzaXplRXZlbnQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXNpemUgPSB0aGlzLl9vblJlc2l6ZS5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25TY3JvbGwgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxudW1iZXI+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25TY3JvbGwgPSB0aGlzLl9vblNjcm9sbC5ldmVudDtcblxuICBwdWJsaWMgZ2V0IGJ1ZmZlcigpOiBJQnVmZmVyIHsgcmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmU7IH1cblxuICAvKiogQW4gSUJ1ZmZlcmxpbmUgdG8gY2xvbmUvY29weSBmcm9tIGZvciBuZXcgYmxhbmsgbGluZXMgKi9cbiAgcHJpdmF0ZSBfY2FjaGVkQmxhbmtMaW5lOiBJQnVmZmVyTGluZSB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihASU9wdGlvbnNTZXJ2aWNlIG9wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2UpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29scyA9IE1hdGgubWF4KG9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY29scyB8fCAwLCBNSU5JTVVNX0NPTFMpO1xuICAgIHRoaXMucm93cyA9IE1hdGgubWF4KG9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMucm93cyB8fCAwLCBNSU5JTVVNX1JPV1MpO1xuICAgIHRoaXMuYnVmZmVycyA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBCdWZmZXJTZXQob3B0aW9uc1NlcnZpY2UsIHRoaXMpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZShlID0+IHtcbiAgICAgIHRoaXMuX29uU2Nyb2xsLmZpcmUoZS5hY3RpdmVCdWZmZXIueWRpc3ApO1xuICAgIH0pKTtcbiAgfVxuXG4gIHB1YmxpYyByZXNpemUoY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBjb2xzQ2hhbmdlZCA9IHRoaXMuY29scyAhPT0gY29scztcbiAgICBjb25zdCByb3dzQ2hhbmdlZCA9IHRoaXMucm93cyAhPT0gcm93cztcbiAgICB0aGlzLmNvbHMgPSBjb2xzO1xuICAgIHRoaXMucm93cyA9IHJvd3M7XG4gICAgdGhpcy5idWZmZXJzLnJlc2l6ZShjb2xzLCByb3dzKTtcbiAgICB0aGlzLl9vblJlc2l6ZS5maXJlKHsgY29scywgcm93cywgY29sc0NoYW5nZWQsIHJvd3NDaGFuZ2VkIH0pO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVycy5yZXNldCgpO1xuICAgIHRoaXMuaXNVc2VyU2Nyb2xsaW5nID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSB0ZXJtaW5hbCBkb3duIDEgcm93LCBjcmVhdGluZyBhIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBlcmFzZUF0dHIgVGhlIGF0dHJpYnV0ZSBkYXRhIHRvIHVzZSB0aGUgZm9yIGJsYW5rIGxpbmUuXG4gICAqIEBwYXJhbSBpc1dyYXBwZWQgV2hldGhlciB0aGUgbmV3IGxpbmUgaXMgd3JhcHBlZCBmcm9tIHRoZSBwcmV2aW91cyBsaW5lLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbChlcmFzZUF0dHI6IElBdHRyaWJ1dGVEYXRhLCBpc1dyYXBwZWQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuYnVmZmVyO1xuXG4gICAgbGV0IG5ld0xpbmU6IElCdWZmZXJMaW5lIHwgdW5kZWZpbmVkO1xuICAgIG5ld0xpbmUgPSB0aGlzLl9jYWNoZWRCbGFua0xpbmU7XG4gICAgaWYgKCFuZXdMaW5lIHx8IG5ld0xpbmUubGVuZ3RoICE9PSB0aGlzLmNvbHMgfHwgbmV3TGluZS5nZXRGZygwKSAhPT0gZXJhc2VBdHRyLmZnIHx8IG5ld0xpbmUuZ2V0QmcoMCkgIT09IGVyYXNlQXR0ci5iZykge1xuICAgICAgbmV3TGluZSA9IGJ1ZmZlci5nZXRCbGFua0xpbmUoZXJhc2VBdHRyLCBpc1dyYXBwZWQpO1xuICAgICAgdGhpcy5fY2FjaGVkQmxhbmtMaW5lID0gbmV3TGluZTtcbiAgICB9XG4gICAgbmV3TGluZS5pc1dyYXBwZWQgPSBpc1dyYXBwZWQ7XG5cbiAgICBjb25zdCB0b3BSb3cgPSBidWZmZXIueWJhc2UgKyBidWZmZXIuc2Nyb2xsVG9wO1xuICAgIGNvbnN0IGJvdHRvbVJvdyA9IGJ1ZmZlci55YmFzZSArIGJ1ZmZlci5zY3JvbGxCb3R0b207XG5cbiAgICBpZiAoYnVmZmVyLnNjcm9sbFRvcCA9PT0gMCkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJ1ZmZlciBpcyBnb2luZyB0byBiZSB0cmltbWVkIGFmdGVyIGluc2VydGlvbi5cbiAgICAgIGNvbnN0IHdpbGxCdWZmZXJCZVRyaW1tZWQgPSBidWZmZXIubGluZXMuaXNGdWxsO1xuXG4gICAgICAvLyBJbnNlcnQgdGhlIGxpbmUgdXNpbmcgdGhlIGZhc3Rlc3QgbWV0aG9kXG4gICAgICBpZiAoYm90dG9tUm93ID09PSBidWZmZXIubGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBpZiAod2lsbEJ1ZmZlckJlVHJpbW1lZCkge1xuICAgICAgICAgIGJ1ZmZlci5saW5lcy5yZWN5Y2xlKCkuY29weUZyb20obmV3TGluZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnVmZmVyLmxpbmVzLnB1c2gobmV3TGluZS5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyLmxpbmVzLnNwbGljZShib3R0b21Sb3cgKyAxLCAwLCBuZXdMaW5lLmNsb25lKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGFkanVzdCB5YmFzZSBhbmQgeWRpc3Agd2hlbiB0aGUgYnVmZmVyIGlzIG5vdCB0cmltbWVkXG4gICAgICBpZiAoIXdpbGxCdWZmZXJCZVRyaW1tZWQpIHtcbiAgICAgICAgYnVmZmVyLnliYXNlKys7XG4gICAgICAgIC8vIE9ubHkgc2Nyb2xsIHRoZSB5ZGlzcCB3aXRoIHliYXNlIGlmIHRoZSB1c2VyIGhhcyBub3Qgc2Nyb2xsZWQgdXBcbiAgICAgICAgaWYgKCF0aGlzLmlzVXNlclNjcm9sbGluZykge1xuICAgICAgICAgIGJ1ZmZlci55ZGlzcCsrO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIHRoZSBidWZmZXIgaXMgZnVsbCBhbmQgdGhlIHVzZXIgaGFzIHNjcm9sbGVkIHVwLCBrZWVwIHRoZSB0ZXh0XG4gICAgICAgIC8vIHN0YWJsZSB1bmxlc3MgeWRpc3AgaXMgcmlnaHQgYXQgdGhlIHRvcFxuICAgICAgICBpZiAodGhpcy5pc1VzZXJTY3JvbGxpbmcpIHtcbiAgICAgICAgICBidWZmZXIueWRpc3AgPSBNYXRoLm1heChidWZmZXIueWRpc3AgLSAxLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzY3JvbGxUb3AgaXMgbm9uLXplcm8gd2hpY2ggbWVhbnMgbm8gbGluZSB3aWxsIGJlIGdvaW5nIHRvIHRoZVxuICAgICAgLy8gc2Nyb2xsYmFjaywgaW5zdGVhZCB3ZSBjYW4ganVzdCBzaGlmdCB0aGVtIGluLXBsYWNlLlxuICAgICAgY29uc3Qgc2Nyb2xsUmVnaW9uSGVpZ2h0ID0gYm90dG9tUm93IC0gdG9wUm93ICsgMSAvKiBhcyBpdCdzIHplcm8tYmFzZWQgKi87XG4gICAgICBidWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0b3BSb3cgKyAxLCBzY3JvbGxSZWdpb25IZWlnaHQgLSAxLCAtMSk7XG4gICAgICBidWZmZXIubGluZXMuc2V0KGJvdHRvbVJvdywgbmV3TGluZS5jbG9uZSgpKTtcbiAgICB9XG5cbiAgICAvLyBNb3ZlIHRoZSB2aWV3cG9ydCB0byB0aGUgYm90dG9tIG9mIHRoZSBidWZmZXIgdW5sZXNzIHRoZSB1c2VyIGlzXG4gICAgLy8gc2Nyb2xsaW5nLlxuICAgIGlmICghdGhpcy5pc1VzZXJTY3JvbGxpbmcpIHtcbiAgICAgIGJ1ZmZlci55ZGlzcCA9IGJ1ZmZlci55YmFzZTtcbiAgICB9XG5cbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKGJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRoZSBkaXNwbGF5IG9mIHRoZSB0ZXJtaW5hbFxuICAgKiBAcGFyYW0gZGlzcCBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIHNjcm9sbCBkb3duIChuZWdhdGl2ZSBzY3JvbGwgdXApLlxuICAgKiBAcGFyYW0gc3VwcHJlc3NTY3JvbGxFdmVudCBEb24ndCBlbWl0IHRoZSBzY3JvbGwgZXZlbnQgYXMgc2Nyb2xsTGluZXMuIFRoaXMgaXMgdXNlZFxuICAgKiB0byBhdm9pZCB1bndhbnRlZCBldmVudHMgYmVpbmcgaGFuZGxlZCBieSB0aGUgdmlld3BvcnQgd2hlbiB0aGUgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIHRoZVxuICAgKiB2aWV3cG9ydCBvcmlnaW5hbGx5LlxuICAgKi9cbiAgcHVibGljIHNjcm9sbExpbmVzKGRpc3A6IG51bWJlciwgc3VwcHJlc3NTY3JvbGxFdmVudD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICBpZiAoZGlzcCA8IDApIHtcbiAgICAgIGlmIChidWZmZXIueWRpc3AgPT09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5pc1VzZXJTY3JvbGxpbmcgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoZGlzcCArIGJ1ZmZlci55ZGlzcCA+PSBidWZmZXIueWJhc2UpIHtcbiAgICAgIHRoaXMuaXNVc2VyU2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkWWRpc3AgPSBidWZmZXIueWRpc3A7XG4gICAgYnVmZmVyLnlkaXNwID0gTWF0aC5tYXgoTWF0aC5taW4oYnVmZmVyLnlkaXNwICsgZGlzcCwgYnVmZmVyLnliYXNlKSwgMCk7XG5cbiAgICAvLyBObyBjaGFuZ2Ugb2NjdXJyZWQsIGRvbid0IHRyaWdnZXIgc2Nyb2xsL3JlZnJlc2hcbiAgICBpZiAob2xkWWRpc3AgPT09IGJ1ZmZlci55ZGlzcCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghc3VwcHJlc3NTY3JvbGxFdmVudCkge1xuICAgICAgdGhpcy5fb25TY3JvbGwuZmlyZShidWZmZXIueWRpc3ApO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgRGlzcG9zYWJsZSwgdG9EaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IGlzTWFjIH0gZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IEN1cnNvclN0eWxlLCBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBGb250V2VpZ2h0LCBJT3B0aW9uc1NlcnZpY2UsIElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfT1BUSU9OUzogUmVhZG9ubHk8UmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz4+ID0ge1xuICBjb2xzOiA4MCxcbiAgcm93czogMjQsXG4gIGN1cnNvckJsaW5rOiBmYWxzZSxcbiAgY3Vyc29yU3R5bGU6ICdibG9jaycsXG4gIGN1cnNvcldpZHRoOiAxLFxuICBjdXJzb3JJbmFjdGl2ZVN0eWxlOiAnb3V0bGluZScsXG4gIGN1c3RvbUdseXBoczogdHJ1ZSxcbiAgZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6IHRydWUsXG4gIGRvY3VtZW50T3ZlcnJpZGU6IG51bGwsXG4gIGZhc3RTY3JvbGxNb2RpZmllcjogJ2FsdCcsXG4gIGZhc3RTY3JvbGxTZW5zaXRpdml0eTogNSxcbiAgZm9udEZhbWlseTogJ21vbm9zcGFjZScsXG4gIGZvbnRTaXplOiAxNSxcbiAgZm9udFdlaWdodDogJ25vcm1hbCcsXG4gIGZvbnRXZWlnaHRCb2xkOiAnYm9sZCcsXG4gIGlnbm9yZUJyYWNrZXRlZFBhc3RlTW9kZTogZmFsc2UsXG4gIGxpbmVIZWlnaHQ6IDEuMCxcbiAgbGV0dGVyU3BhY2luZzogMCxcbiAgbGlua0hhbmRsZXI6IG51bGwsXG4gIGxvZ0xldmVsOiAnaW5mbycsXG4gIGxvZ2dlcjogbnVsbCxcbiAgc2Nyb2xsYmFjazogMTAwMCxcbiAgc2Nyb2xsT25FcmFzZUluRGlzcGxheTogZmFsc2UsXG4gIHNjcm9sbE9uVXNlcklucHV0OiB0cnVlLFxuICBzY3JvbGxTZW5zaXRpdml0eTogMSxcbiAgc2NyZWVuUmVhZGVyTW9kZTogZmFsc2UsXG4gIHNtb290aFNjcm9sbER1cmF0aW9uOiAwLFxuICBtYWNPcHRpb25Jc01ldGE6IGZhbHNlLFxuICBtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjogZmFsc2UsXG4gIG1pbmltdW1Db250cmFzdFJhdGlvOiAxLFxuICBkaXNhYmxlU3RkaW46IGZhbHNlLFxuICBhbGxvd1Byb3Bvc2VkQXBpOiBmYWxzZSxcbiAgYWxsb3dUcmFuc3BhcmVuY3k6IGZhbHNlLFxuICB0YWJTdG9wV2lkdGg6IDgsXG4gIHRoZW1lOiB7fSxcbiAgcmVmbG93Q3Vyc29yTGluZTogZmFsc2UsXG4gIHJlc2NhbGVPdmVybGFwcGluZ0dseXBoczogZmFsc2UsXG4gIHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDogaXNNYWMsXG4gIHdpbmRvd09wdGlvbnM6IHt9LFxuICB3aW5kb3dzTW9kZTogZmFsc2UsXG4gIHdpbmRvd3NQdHk6IHt9LFxuICB3b3JkU2VwYXJhdG9yOiAnICgpW117fVxcJyxcImAnLFxuICBhbHRDbGlja01vdmVzQ3Vyc29yOiB0cnVlLFxuICBjb252ZXJ0RW9sOiBmYWxzZSxcbiAgdGVybU5hbWU6ICd4dGVybScsXG4gIGNhbmNlbEV2ZW50czogZmFsc2UsXG4gIG92ZXJ2aWV3UnVsZXI6IHt9XG59O1xuXG5jb25zdCBGT05UX1dFSUdIVF9PUFRJT05TOiBFeHRyYWN0PEZvbnRXZWlnaHQsIHN0cmluZz5bXSA9IFsnbm9ybWFsJywgJ2JvbGQnLCAnMTAwJywgJzIwMCcsICczMDAnLCAnNDAwJywgJzUwMCcsICc2MDAnLCAnNzAwJywgJzgwMCcsICc5MDAnXTtcblxuZXhwb3J0IGNsYXNzIE9wdGlvbnNTZXJ2aWNlIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElPcHRpb25zU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgcmVhZG9ubHkgcmF3T3B0aW9uczogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz47XG4gIHB1YmxpYyBvcHRpb25zOiBSZXF1aXJlZDxJVGVybWluYWxPcHRpb25zPjtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbk9wdGlvbkNoYW5nZSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPGtleW9mIElUZXJtaW5hbE9wdGlvbnM+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25PcHRpb25DaGFuZ2UgPSB0aGlzLl9vbk9wdGlvbkNoYW5nZS5ldmVudDtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBQYXJ0aWFsPElUZXJtaW5hbE9wdGlvbnM+KSB7XG4gICAgc3VwZXIoKTtcbiAgICAvLyBzZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgZWFjaCBvcHRpb25cbiAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHsgLi4uREVGQVVMVF9PUFRJT05TIH07XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgaWYgKGtleSBpbiBkZWZhdWx0T3B0aW9ucykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gb3B0aW9uc1trZXldO1xuICAgICAgICAgIGRlZmF1bHRPcHRpb25zW2tleV0gPSB0aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKGtleSwgbmV3VmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHNldCB1cCBnZXR0ZXJzIGFuZCBzZXR0ZXJzIGZvciBlYWNoIG9wdGlvblxuICAgIHRoaXMucmF3T3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xuICAgIHRoaXMub3B0aW9ucyA9IHsgLi4uIGRlZmF1bHRPcHRpb25zIH07XG4gICAgdGhpcy5fc2V0dXBPcHRpb25zKCk7XG5cbiAgICAvLyBDbGVhciBvdXQgb3B0aW9ucyB0aGF0IGNvdWxkIGxpbmsgb3V0c2lkZSB4dGVybS5qcyBhcyB0aGV5IGNvdWxkIGVhc2lseSBjYXVzZSBhbiBlbWJlZGRlclxuICAgIC8vIG1lbW9yeSBsZWFrXG4gICAgdGhpcy5fcmVnaXN0ZXIodG9EaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgIHRoaXMucmF3T3B0aW9ucy5saW5rSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLnJhd09wdGlvbnMuZG9jdW1lbnRPdmVycmlkZSA9IG51bGw7XG4gICAgfSkpO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICBwdWJsaWMgb25TcGVjaWZpY09wdGlvbkNoYW5nZTxUIGV4dGVuZHMga2V5b2YgSVRlcm1pbmFsT3B0aW9ucz4oa2V5OiBULCBsaXN0ZW5lcjogKHZhbHVlOiBJVGVybWluYWxPcHRpb25zW1RdKSA9PiBhbnkpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMub25PcHRpb25DaGFuZ2UoZXZlbnRLZXkgPT4ge1xuICAgICAgaWYgKGV2ZW50S2V5ID09PSBrZXkpIHtcbiAgICAgICAgbGlzdGVuZXIodGhpcy5yYXdPcHRpb25zW2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uYW1pbmctY29udmVudGlvblxuICBwdWJsaWMgb25NdWx0aXBsZU9wdGlvbkNoYW5nZShrZXlzOiAoa2V5b2YgSVRlcm1pbmFsT3B0aW9ucylbXSwgbGlzdGVuZXI6ICgpID0+IGFueSk6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5vbk9wdGlvbkNoYW5nZShldmVudEtleSA9PiB7XG4gICAgICBpZiAoa2V5cy5pbmRleE9mKGV2ZW50S2V5KSAhPT0gLTEpIHtcbiAgICAgICAgbGlzdGVuZXIoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldHVwT3B0aW9ucygpOiB2b2lkIHtcbiAgICBjb25zdCBnZXR0ZXIgPSAocHJvcE5hbWU6IHN0cmluZyk6IGFueSA9PiB7XG4gICAgICBpZiAoIShwcm9wTmFtZSBpbiBERUZBVUxUX09QVElPTlMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gb3B0aW9uIHdpdGgga2V5IFwiJHtwcm9wTmFtZX1cImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmF3T3B0aW9uc1twcm9wTmFtZV07XG4gICAgfTtcblxuICAgIGNvbnN0IHNldHRlciA9IChwcm9wTmFtZTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCA9PiB7XG4gICAgICBpZiAoIShwcm9wTmFtZSBpbiBERUZBVUxUX09QVElPTlMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gb3B0aW9uIHdpdGgga2V5IFwiJHtwcm9wTmFtZX1cImApO1xuICAgICAgfVxuXG4gICAgICB2YWx1ZSA9IHRoaXMuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24ocHJvcE5hbWUsIHZhbHVlKTtcbiAgICAgIC8vIERvbid0IGZpcmUgYW4gb3B0aW9uIGNoYW5nZSBldmVudCBpZiB0aGV5IGRpZG4ndCBjaGFuZ2VcbiAgICAgIGlmICh0aGlzLnJhd09wdGlvbnNbcHJvcE5hbWVdICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLnJhd09wdGlvbnNbcHJvcE5hbWVdID0gdmFsdWU7XG4gICAgICAgIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmZpcmUocHJvcE5hbWUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIHRoaXMucmF3T3B0aW9ucykge1xuICAgICAgY29uc3QgZGVzYyA9IHtcbiAgICAgICAgZ2V0OiBnZXR0ZXIuYmluZCh0aGlzLCBwcm9wTmFtZSksXG4gICAgICAgIHNldDogc2V0dGVyLmJpbmQodGhpcywgcHJvcE5hbWUpXG4gICAgICB9O1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub3B0aW9ucywgcHJvcE5hbWUsIGRlc2MpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24oa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBhbnkge1xuICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlICdjdXJzb3JTdHlsZSc6XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IERFRkFVTFRfT1BUSU9OU1trZXldO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNDdXJzb3JTdHlsZSh2YWx1ZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiJHt2YWx1ZX1cIiBpcyBub3QgYSB2YWxpZCB2YWx1ZSBmb3IgJHtrZXl9YCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd3b3JkU2VwYXJhdG9yJzpcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICAgIHZhbHVlID0gREVGQVVMVF9PUFRJT05TW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdmb250V2VpZ2h0JzpcbiAgICAgIGNhc2UgJ2ZvbnRXZWlnaHRCb2xkJzpcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgMSA8PSB2YWx1ZSAmJiB2YWx1ZSA8PSAxMDAwKSB7XG4gICAgICAgICAgLy8gYWxyZWFkeSB2YWxpZCBudW1lcmljIHZhbHVlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSBGT05UX1dFSUdIVF9PUFRJT05TLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogREVGQVVMVF9PUFRJT05TW2tleV07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnY3Vyc29yV2lkdGgnOlxuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgICAgICAvLyBGYWxsIHRocm91Z2ggZm9yIGJvdW5kcyBjaGVja1xuICAgICAgY2FzZSAnbGluZUhlaWdodCc6XG4gICAgICBjYXNlICd0YWJTdG9wV2lkdGgnOlxuICAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21pbmltdW1Db250cmFzdFJhdGlvJzpcbiAgICAgICAgdmFsdWUgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigyMSwgTWF0aC5yb3VuZCh2YWx1ZSAqIDEwKSAvIDEwKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2Nyb2xsYmFjayc6XG4gICAgICAgIHZhbHVlID0gTWF0aC5taW4odmFsdWUsIDQyOTQ5NjcyOTUpO1xuICAgICAgICBpZiAodmFsdWUgPCAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2Zhc3RTY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICBjYXNlICdzY3JvbGxTZW5zaXRpdml0eSc6XG4gICAgICAgIGlmICh2YWx1ZSA8PSAwKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2tleX0gY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAwLCB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Jvd3MnOlxuICAgICAgY2FzZSAnY29scyc6XG4gICAgICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7a2V5fSBtdXN0IGJlIG51bWVyaWMsIHZhbHVlOiAke3ZhbHVlfWApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnd2luZG93c1B0eSc6XG4gICAgICAgIHZhbHVlID0gdmFsdWUgPz8ge307XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNDdXJzb3JTdHlsZSh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEN1cnNvclN0eWxlIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnYmxvY2snIHx8IHZhbHVlID09PSAndW5kZXJsaW5lJyB8fCB2YWx1ZSA9PT0gJ2Jhcic7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTYgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG4vKlxuICogQSBzaW1wbGUgdXRpbGl0eSBmb3IgY2xvbmluZyB2YWx1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lPFQ+KHZhbDogVCwgZGVwdGg6IG51bWJlciA9IDUpOiBUIHtcbiAgaWYgKHR5cGVvZiB2YWwgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuXG4gIC8vIElmIHdlJ3JlIGNsb25pbmcgYW4gYXJyYXksIHVzZSBhbiBhcnJheSBhcyB0aGUgYmFzZSwgb3RoZXJ3aXNlIHVzZSBhbiBvYmplY3RcbiAgY29uc3QgY2xvbmVkT2JqZWN0OiBhbnkgPSBBcnJheS5pc0FycmF5KHZhbCkgPyBbXSA6IHt9O1xuXG4gIGZvciAoY29uc3Qga2V5IGluIHZhbCkge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IGNsb25lIGVhY2sgaXRlbSB1bmxlc3Mgd2UncmUgYXQgdGhlIG1heGltdW0gZGVwdGhcbiAgICBjbG9uZWRPYmplY3Rba2V5XSA9IGRlcHRoIDw9IDEgPyB2YWxba2V5XSA6ICh2YWxba2V5XSAmJiBjbG9uZSh2YWxba2V5XSwgZGVwdGggLSAxKSk7XG4gIH1cblxuICByZXR1cm4gY2xvbmVkT2JqZWN0IGFzIFQ7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBjbG9uZSB9IGZyb20gJ2NvbW1vbi9DbG9uZSc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IElEZWNQcml2YXRlTW9kZXMsIElNb2RlcyB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSUNvcmVTZXJ2aWNlLCBJTG9nU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5cbmNvbnN0IERFRkFVTFRfTU9ERVM6IElNb2RlcyA9IE9iamVjdC5mcmVlemUoe1xuICBpbnNlcnRNb2RlOiBmYWxzZVxufSk7XG5cbmNvbnN0IERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVM6IElEZWNQcml2YXRlTW9kZXMgPSBPYmplY3QuZnJlZXplKHtcbiAgYXBwbGljYXRpb25DdXJzb3JLZXlzOiBmYWxzZSxcbiAgYXBwbGljYXRpb25LZXlwYWQ6IGZhbHNlLFxuICBicmFja2V0ZWRQYXN0ZU1vZGU6IGZhbHNlLFxuICBjdXJzb3JCbGluazogdW5kZWZpbmVkLFxuICBjdXJzb3JTdHlsZTogdW5kZWZpbmVkLFxuICBvcmlnaW46IGZhbHNlLFxuICByZXZlcnNlV3JhcGFyb3VuZDogZmFsc2UsXG4gIHNlbmRGb2N1czogZmFsc2UsXG4gIHN5bmNocm9uaXplZE91dHB1dDogZmFsc2UsXG4gIHdyYXBhcm91bmQ6IHRydWUgLy8gZGVmYXVsdHM6IHh0ZXJtIC0gdHJ1ZSwgdnQxMDAgLSBmYWxzZVxufSk7XG5cbmV4cG9ydCBjbGFzcyBDb3JlU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQ29yZVNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHVibGljIGlzQ3Vyc29ySW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzQ3Vyc29ySGlkZGVuOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBtb2RlczogSU1vZGVzO1xuICBwdWJsaWMgZGVjUHJpdmF0ZU1vZGVzOiBJRGVjUHJpdmF0ZU1vZGVzO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uRGF0YSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRhdGEgPSB0aGlzLl9vbkRhdGEuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uVXNlcklucHV0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblVzZXJJbnB1dCA9IHRoaXMuX29uVXNlcklucHV0LmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkJpbmFyeSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkJpbmFyeSA9IHRoaXMuX29uQmluYXJ5LmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlcXVlc3RTY3JvbGxUb0JvdHRvbSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b20gPSB0aGlzLl9vblJlcXVlc3RTY3JvbGxUb0JvdHRvbS5ldmVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASUJ1ZmZlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2UsXG4gICAgQElMb2dTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuICAgIEBJT3B0aW9uc1NlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubW9kZXMgPSBjbG9uZShERUZBVUxUX01PREVTKTtcbiAgICB0aGlzLmRlY1ByaXZhdGVNb2RlcyA9IGNsb25lKERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVMpO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubW9kZXMgPSBjbG9uZShERUZBVUxUX01PREVTKTtcbiAgICB0aGlzLmRlY1ByaXZhdGVNb2RlcyA9IGNsb25lKERFRkFVTFRfREVDX1BSSVZBVEVfTU9ERVMpO1xuICB9XG5cbiAgcHVibGljIHRyaWdnZXJEYXRhRXZlbnQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIC8vIFByZXZlbnRzIGFsbCBldmVudHMgdG8gcHR5IHByb2Nlc3MgaWYgc3RkaW4gaXMgZGlzYWJsZWRcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnB1dCBpcyBiZWluZyBzZW50IHRvIHRoZSB0ZXJtaW5hbCwgdGhlIHRlcm1pbmFsIHNob3VsZCBmb2N1cyB0aGUgcHJvbXB0LlxuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIGlmICh3YXNVc2VySW5wdXQgJiYgdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxPblVzZXJJbnB1dCAmJiBidWZmZXIueWJhc2UgIT09IGJ1ZmZlci55ZGlzcCkge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0U2Nyb2xsVG9Cb3R0b20uZmlyZSgpO1xuICAgIH1cblxuICAgIC8vIEZpcmUgb25Vc2VySW5wdXQgc28gbGlzdGVuZXJzIGNhbiByZWFjdCBhcyB3ZWxsIChlZy4gY2xlYXIgc2VsZWN0aW9uKVxuICAgIGlmICh3YXNVc2VySW5wdXQpIHtcbiAgICAgIHRoaXMuX29uVXNlcklucHV0LmZpcmUoKTtcbiAgICB9XG5cbiAgICAvLyBGaXJlIG9uRGF0YSBBUElcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKGBzZW5kaW5nIGRhdGEgXCIke2RhdGF9XCJgKTtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLnRyYWNlKGBzZW5kaW5nIGRhdGEgKGNvZGVzKWAsICgpID0+IGRhdGEuc3BsaXQoJycpLm1hcChlID0+IGUuY2hhckNvZGVBdCgwKSkpO1xuICAgIHRoaXMuX29uRGF0YS5maXJlKGRhdGEpO1xuICB9XG5cbiAgcHVibGljIHRyaWdnZXJCaW5hcnlFdmVudChkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1Zyhgc2VuZGluZyBiaW5hcnkgXCIke2RhdGF9XCJgKTtcbiAgICB0aGlzLl9sb2dTZXJ2aWNlLnRyYWNlKGBzZW5kaW5nIGJpbmFyeSAoY29kZXMpYCwgKCkgPT4gZGF0YS5zcGxpdCgnJykubWFwKGUgPT4gZS5jaGFyQ29kZUF0KDApKSk7XG4gICAgdGhpcy5fb25CaW5hcnkuZmlyZShkYXRhKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmltcG9ydCB7IElCdWZmZXJTZXJ2aWNlLCBJQ29yZVNlcnZpY2UsIElDb3JlTW91c2VTZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUNvcmVNb3VzZVByb3RvY29sLCBJQ29yZU1vdXNlRXZlbnQsIENvcmVNb3VzZUVuY29kaW5nLCBDb3JlTW91c2VFdmVudFR5cGUsIENvcmVNb3VzZUJ1dHRvbiwgQ29yZU1vdXNlQWN0aW9uIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuLyoqXG4gKiBTdXBwb3J0ZWQgZGVmYXVsdCBwcm90b2NvbHMuXG4gKi9cbmNvbnN0IERFRkFVTFRfUFJPVE9DT0xTOiB7IFtrZXk6IHN0cmluZ106IElDb3JlTW91c2VQcm90b2NvbCB9ID0ge1xuICAvKipcbiAgICogTk9ORVxuICAgKiBFdmVudHM6IG5vbmVcbiAgICogTW9kaWZpZXJzOiBub25lXG4gICAqL1xuICBOT05FOiB7XG4gICAgZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUuTk9ORSxcbiAgICByZXN0cmljdDogKCkgPT4gZmFsc2VcbiAgfSxcbiAgLyoqXG4gICAqIFgxMFxuICAgKiBFdmVudHM6IG1vdXNlZG93blxuICAgKiBNb2RpZmllcnM6IG5vbmVcbiAgICovXG4gIFgxMDoge1xuICAgIGV2ZW50czogQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04sXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICAgIC8vIG5vIHdoZWVsLCBubyBtb3ZlLCBubyB1cFxuICAgICAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uV0hFRUwgfHwgZS5hY3Rpb24gIT09IENvcmVNb3VzZUFjdGlvbi5ET1dOKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIG5vIG1vZGlmaWVyc1xuICAgICAgZS5jdHJsID0gZmFsc2U7XG4gICAgICBlLmFsdCA9IGZhbHNlO1xuICAgICAgZS5zaGlmdCA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICogVlQyMDBcbiAgICogRXZlbnRzOiBtb3VzZWRvd24gLyBtb3VzZXVwIC8gd2hlZWxcbiAgICogTW9kaWZpZXJzOiBhbGxcbiAgICovXG4gIFZUMjAwOiB7XG4gICAgZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUuRE9XTiB8IENvcmVNb3VzZUV2ZW50VHlwZS5VUCB8IENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTCxcbiAgICByZXN0cmljdDogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gbm8gbW92ZVxuICAgICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBEUkFHXG4gICAqIEV2ZW50czogbW91c2Vkb3duIC8gbW91c2V1cCAvIHdoZWVsIC8gbW91c2VkcmFnXG4gICAqIE1vZGlmaWVyczogYWxsXG4gICAqL1xuICBEUkFHOiB7XG4gICAgZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUuRE9XTiB8IENvcmVNb3VzZUV2ZW50VHlwZS5VUCB8IENvcmVNb3VzZUV2ZW50VHlwZS5XSEVFTCB8IENvcmVNb3VzZUV2ZW50VHlwZS5EUkFHLFxuICAgIHJlc3RyaWN0OiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAvLyBubyBtb3ZlIHdpdGhvdXQgYnV0dG9uXG4gICAgICBpZiAoZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFICYmIGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uTk9ORSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBBTllcbiAgICogRXZlbnRzOiBhbGwgbW91c2UgcmVsYXRlZCBldmVudHNcbiAgICogTW9kaWZpZXJzOiBhbGxcbiAgICovXG4gIEFOWToge1xuICAgIGV2ZW50czpcbiAgICAgIENvcmVNb3VzZUV2ZW50VHlwZS5ET1dOIHwgQ29yZU1vdXNlRXZlbnRUeXBlLlVQIHwgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMXG4gICAgICB8IENvcmVNb3VzZUV2ZW50VHlwZS5EUkFHIHwgQ29yZU1vdXNlRXZlbnRUeXBlLk1PVkUsXG4gICAgcmVzdHJpY3Q6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHRydWVcbiAgfVxufTtcblxuY29uc3QgZW51bSBNb2RpZmllcnMge1xuICBTSElGVCA9IDQsXG4gIEFMVCA9IDgsXG4gIENUUkwgPSAxNlxufVxuXG4vLyBoZWxwZXIgZm9yIGRlZmF1bHQgZW5jb2RlcnMgdG8gZ2VuZXJhdGUgdGhlIGV2ZW50IGNvZGUuXG5mdW5jdGlvbiBldmVudENvZGUoZTogSUNvcmVNb3VzZUV2ZW50LCBpc1NHUjogYm9vbGVhbik6IG51bWJlciB7XG4gIGxldCBjb2RlID0gKGUuY3RybCA/IE1vZGlmaWVycy5DVFJMIDogMCkgfCAoZS5zaGlmdCA/IE1vZGlmaWVycy5TSElGVCA6IDApIHwgKGUuYWx0ID8gTW9kaWZpZXJzLkFMVCA6IDApO1xuICBpZiAoZS5idXR0b24gPT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkge1xuICAgIGNvZGUgfD0gNjQ7XG4gICAgY29kZSB8PSBlLmFjdGlvbjtcbiAgfSBlbHNlIHtcbiAgICBjb2RlIHw9IGUuYnV0dG9uICYgMztcbiAgICBpZiAoZS5idXR0b24gJiA0KSB7XG4gICAgICBjb2RlIHw9IDY0O1xuICAgIH1cbiAgICBpZiAoZS5idXR0b24gJiA4KSB7XG4gICAgICBjb2RlIHw9IDEyODtcbiAgICB9XG4gICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRSkge1xuICAgICAgY29kZSB8PSBDb3JlTW91c2VBY3Rpb24uTU9WRTtcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uVVAgJiYgIWlzU0dSKSB7XG4gICAgICAvLyBzcGVjaWFsIGNhc2UgLSBvbmx5IFNHUiBjYW4gcmVwb3J0IGJ1dHRvbiBvbiByZWxlYXNlXG4gICAgICAvLyBhbGwgb3RoZXJzIGhhdmUgdG8gZ28gd2l0aCBOT05FXG4gICAgICBjb2RlIHw9IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY29kZTtcbn1cblxuY29uc3QgUyA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG5cbi8qKlxuICogU3VwcG9ydGVkIGRlZmF1bHQgZW5jb2RpbmdzLlxuICovXG5jb25zdCBERUZBVUxUX0VOQ09ESU5HUzogeyBba2V5OiBzdHJpbmddOiBDb3JlTW91c2VFbmNvZGluZyB9ID0ge1xuICAvKipcbiAgICogREVGQVVMVCAtIENTSSBNIFBiIFB4IFB5XG4gICAqIFNpbmdsZSBieXRlIGVuY29kaW5nIGZvciBjb29yZHMgYW5kIGV2ZW50IGNvZGUuXG4gICAqIENhbiBlbmNvZGUgdmFsdWVzIHVwIHRvIDIyMyAoMS1iYXNlZCkuXG4gICAqL1xuICBERUZBVUxUOiAoZTogSUNvcmVNb3VzZUV2ZW50KSA9PiB7XG4gICAgY29uc3QgcGFyYW1zID0gW2V2ZW50Q29kZShlLCBmYWxzZSkgKyAzMiwgZS5jb2wgKyAzMiwgZS5yb3cgKyAzMl07XG4gICAgLy8gc3VwcmVzcyBtb3VzZSByZXBvcnQgaWYgd2UgZXhjZWVkIGFkZHJlc3NpYmxlIHJhbmdlXG4gICAgLy8gTm90ZSB0aGlzIGlzIGhhbmRsZWQgZGlmZmVyZW50bHkgYnkgZW11bGF0b3JzXG4gICAgLy8gLSB4dGVybTogICAgICAgICBzZW5kcyAwOzAgY29vcmRzIGluc3RlYWRcbiAgICAvLyAtIHZ0ZSwga29uc29sZTogIG5vIHJlcG9ydFxuICAgIGlmIChwYXJhbXNbMF0gPiAyNTUgfHwgcGFyYW1zWzFdID4gMjU1IHx8IHBhcmFtc1syXSA+IDI1NSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gYFxceDFiW00ke1MocGFyYW1zWzBdKX0ke1MocGFyYW1zWzFdKX0ke1MocGFyYW1zWzJdKX1gO1xuICB9LFxuICAvKipcbiAgICogU0dSIC0gQ1NJIDwgUGIgOyBQeCA7IFB5IE18bVxuICAgKiBObyBlbmNvZGluZyBsaW1pdGF0aW9uLlxuICAgKiBDYW4gcmVwb3J0IGJ1dHRvbiBvbiByZWxlYXNlIGFuZCB3b3JrcyB3aXRoIGEgd2VsbCBmb3JtZWQgc2VxdWVuY2UuXG4gICAqL1xuICBTR1I6IChlOiBJQ29yZU1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCBmaW5hbCA9IChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLlVQICYmIGUuYnV0dG9uICE9PSBDb3JlTW91c2VCdXR0b24uV0hFRUwpID8gJ20nIDogJ00nO1xuICAgIHJldHVybiBgXFx4MWJbPCR7ZXZlbnRDb2RlKGUsIHRydWUpfTske2UuY29sfTske2Uucm93fSR7ZmluYWx9YDtcbiAgfSxcbiAgU0dSX1BJWEVMUzogKGU6IElDb3JlTW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IGZpbmFsID0gKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uVVAgJiYgZS5idXR0b24gIT09IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkgPyAnbScgOiAnTSc7XG4gICAgcmV0dXJuIGBcXHgxYls8JHtldmVudENvZGUoZSwgdHJ1ZSl9OyR7ZS54fTske2UueX0ke2ZpbmFsfWA7XG4gIH1cbn07XG5cbi8qKlxuICogQ29yZU1vdXNlU2VydmljZVxuICpcbiAqIFByb3ZpZGVzIG1vdXNlIHRyYWNraW5nIHJlcG9ydHMgd2l0aCBkaWZmZXJlbnQgcHJvdG9jb2xzIGFuZCBlbmNvZGluZ3MuXG4gKiAgLSBwcm90b2NvbHM6IE5PTkUgKGRlZmF1bHQpLCBYMTAsIFZUMjAwLCBEUkFHLCBBTllcbiAqICAtIGVuY29kaW5nczogREVGQVVMVCwgU0dSIChVVEY4LCBVUlhWVCByZW1vdmVkIGluICMyNTA3KVxuICpcbiAqIEN1c3RvbSBwcm90b2NvbHMvZW5jb2RpbmdzIGNhbiBiZSBhZGRlZCBieSBgYWRkUHJvdG9jb2xgIC8gYGFkZEVuY29kaW5nYC5cbiAqIFRvIGFjdGl2YXRlIGEgcHJvdG9jb2wvZW5jb2RpbmcsIHNldCBgYWN0aXZlUHJvdG9jb2xgIC8gYGFjdGl2ZUVuY29kaW5nYC5cbiAqIFN3aXRjaGluZyBhIHByb3RvY29sIHdpbGwgc2VuZCBhIG5vdGlmaWNhdGlvbiBldmVudCBgb25Qcm90b2NvbENoYW5nZWBcbiAqIHdpdGggYSBsaXN0IG9mIG5lZWRlZCBldmVudHMgdG8gdHJhY2suXG4gKlxuICogVGhlIHNlcnZpY2UgaGFuZGxlcyB0aGUgbW91c2UgdHJhY2tpbmcgc3RhdGUgYW5kIGRlY2lkZXMgd2hldGhlciB0byBzZW5kXG4gKiBhIHRyYWNraW5nIHJlcG9ydCB0byB0aGUgYmFja2VuZCBiYXNlZCBvbiBwcm90b2NvbCBhbmQgZW5jb2RpbmcgbGltaXRhdGlvbnMuXG4gKiBUbyBzZW5kIGEgbW91c2UgZXZlbnQgY2FsbCBgdHJpZ2dlck1vdXNlRXZlbnRgLlxuICovXG5leHBvcnQgY2xhc3MgQ29yZU1vdXNlU2VydmljZSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQ29yZU1vdXNlU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcml2YXRlIF9wcm90b2NvbHM6IHsgW25hbWU6IHN0cmluZ106IElDb3JlTW91c2VQcm90b2NvbCB9ID0ge307XG4gIHByaXZhdGUgX2VuY29kaW5nczogeyBbbmFtZTogc3RyaW5nXTogQ29yZU1vdXNlRW5jb2RpbmcgfSA9IHt9O1xuICBwcml2YXRlIF9hY3RpdmVQcm90b2NvbDogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgX2FjdGl2ZUVuY29kaW5nOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBfbGFzdEV2ZW50OiBJQ29yZU1vdXNlRXZlbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfd2hlZWxQYXJ0aWFsU2Nyb2xsOiBudW1iZXIgPSAwO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUHJvdG9jb2xDaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxDb3JlTW91c2VFdmVudFR5cGU+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Qcm90b2NvbENoYW5nZSA9IHRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJQ29yZVNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfY29yZVNlcnZpY2U6IElDb3JlU2VydmljZSxcbiAgICBASU9wdGlvbnNTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX29wdGlvbnNTZXJ2aWNlOiBJT3B0aW9uc1NlcnZpY2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvLyByZWdpc3RlciBkZWZhdWx0IHByb3RvY29scyBhbmQgZW5jb2RpbmdzXG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKERFRkFVTFRfUFJPVE9DT0xTKSkgdGhpcy5hZGRQcm90b2NvbChuYW1lLCBERUZBVUxUX1BST1RPQ09MU1tuYW1lXSk7XG4gICAgZm9yIChjb25zdCBuYW1lIG9mIE9iamVjdC5rZXlzKERFRkFVTFRfRU5DT0RJTkdTKSkgdGhpcy5hZGRFbmNvZGluZyhuYW1lLCBERUZBVUxUX0VOQ09ESU5HU1tuYW1lXSk7XG4gICAgLy8gY2FsbCByZXNldCB0byBzZXQgZGVmYXVsdHNcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgYWRkUHJvdG9jb2wobmFtZTogc3RyaW5nLCBwcm90b2NvbDogSUNvcmVNb3VzZVByb3RvY29sKTogdm9pZCB7XG4gICAgdGhpcy5fcHJvdG9jb2xzW25hbWVdID0gcHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgYWRkRW5jb2RpbmcobmFtZTogc3RyaW5nLCBlbmNvZGluZzogQ29yZU1vdXNlRW5jb2RpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9lbmNvZGluZ3NbbmFtZV0gPSBlbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlUHJvdG9jb2woKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvdG9jb2w7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGFyZU1vdXNlRXZlbnRzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLmV2ZW50cyAhPT0gMDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlUHJvdG9jb2wobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm90b2NvbHNbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBwcm90b2NvbCBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVQcm90b2NvbCA9IG5hbWU7XG4gICAgdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tuYW1lXS5ldmVudHMpO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVFbmNvZGluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVFbmNvZGluZztcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlRW5jb2RpbmcobmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9lbmNvZGluZ3NbbmFtZV0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBlbmNvZGluZyBcIiR7bmFtZX1cImApO1xuICAgIH1cbiAgICB0aGlzLl9hY3RpdmVFbmNvZGluZyA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5hY3RpdmVQcm90b2NvbCA9ICdOT05FJztcbiAgICB0aGlzLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgIHRoaXMuX2xhc3RFdmVudCA9IG51bGw7XG4gICAgdGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgYSB3aGVlbCBldmVudCwgYWNjb3VudGluZyBmb3IgcGFydGlhbCBzY3JvbGxzIGZvciB0cmFja3BhZCwgbW91c2Ugc2Nyb2xscy5cbiAgICogVGhpcyBwcmV2ZW50cyBoeXBlci1zZW5zaXRpdmUgc2Nyb2xsaW5nIGluIGFsdCBidWZmZXIuXG4gICAqL1xuICBwdWJsaWMgY29uc3VtZVdoZWVsRXZlbnQoZXY6IFdoZWVsRXZlbnQsIGNlbGxIZWlnaHQ/OiBudW1iZXIsIGRwcj86IG51bWJlcik6IG51bWJlciB7XG4gICAgLy8gRG8gbm90aGluZyBpZiBpdCdzIG5vdCBhIHZlcnRpY2FsIHNjcm9sbCBldmVudFxuICAgIGlmIChldi5kZWx0YVkgPT09IDAgfHwgZXYuc2hpZnRLZXkpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGlmIChjZWxsSGVpZ2h0ID09PSB1bmRlZmluZWQgfHwgZHByID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGNvbnN0IHRhcmdldFdoZWVsRXZlbnRQaXhlbHMgPSBjZWxsSGVpZ2h0IC8gZHByO1xuICAgIGxldCBhbW91bnQgPSB0aGlzLl9hcHBseVNjcm9sbE1vZGlmaWVyKGV2LmRlbHRhWSwgZXYpO1xuXG4gICAgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgIGFtb3VudCAvPSAodGFyZ2V0V2hlZWxFdmVudFBpeGVscyArIDAuMCk7IC8vIFByZXZlbnQgaW50ZWdlciBkaXZpc2lvblxuXG4gICAgICBjb25zdCBpc0xpa2VseVRyYWNrcGFkID0gTWF0aC5hYnMoZXYuZGVsdGFZKSA8IDUwO1xuICAgICAgaWYgKGlzTGlrZWx5VHJhY2twYWQpIHtcbiAgICAgICAgYW1vdW50ICo9IDAuMztcbiAgICAgIH1cblxuICAgICAgdGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsICs9IGFtb3VudDtcbiAgICAgIGFtb3VudCA9IE1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsKSkgKiAodGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsID4gMCA/IDEgOiAtMSk7XG4gICAgICB0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwgJT0gMTtcbiAgICB9IGVsc2UgaWYgKGV2LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSkge1xuICAgICAgYW1vdW50ICo9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB9XG4gICAgcmV0dXJuIGFtb3VudDtcbiAgfVxuXG4gIHByaXZhdGUgX2FwcGx5U2Nyb2xsTW9kaWZpZXIoYW1vdW50OiBudW1iZXIsIGV2OiBXaGVlbEV2ZW50KTogbnVtYmVyIHtcbiAgICAvLyBNdWx0aXBseSB0aGUgc2Nyb2xsIHNwZWVkIHdoZW4gdGhlIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkXG4gICAgaWYgKGV2LmFsdEtleSB8fCBldi5jdHJsS2V5IHx8IGV2LnNoaWZ0S2V5KSB7XG4gICAgICByZXR1cm4gYW1vdW50ICogdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHkgKiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5O1xuICAgIH1cbiAgICByZXR1cm4gYW1vdW50ICogdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxTZW5zaXRpdml0eTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBhIG1vdXNlIGV2ZW50IHRvIGJlIHNlbnQuXG4gICAqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZXZlbnQgcGFzc2VkIGFsbCBwcm90b2NvbCByZXN0cmljdGlvbnMgYW5kIGEgcmVwb3J0XG4gICAqIHdhcyBzZW50LCBvdGhlcndpc2UgZmFsc2UuIFRoZSByZXR1cm4gdmFsdWUgbWF5IGJlIHVzZWQgdG8gZGVjaWRlIHdoZXRoZXJcbiAgICogdGhlIGRlZmF1bHQgZXZlbnQgYWN0aW9uIGluIHRoZSBib3dzZXIgY29tcG9uZW50IHNob3VsZCBiZSBvbWl0dGVkLlxuICAgKlxuICAgKiBOb3RlOiBUaGUgbWV0aG9kIHdpbGwgY2hhbmdlIHZhbHVlcyBvZiB0aGUgZ2l2ZW4gZXZlbnQgb2JqZWN0XG4gICAqIHRvIGZ1bGxmaWxsIHByb3RvY29sIGFuZCBlbmNvZGluZyByZXN0cmljdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgdHJpZ2dlck1vdXNlRXZlbnQoZTogSUNvcmVNb3VzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgLy8gcmFuZ2UgY2hlY2sgZm9yIGNvbC9yb3dcbiAgICBpZiAoZS5jb2wgPCAwIHx8IGUuY29sID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sc1xuICAgICAgfHwgZS5yb3cgPCAwIHx8IGUucm93ID49IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIGZpbHRlciBub25zZW5zZSBjb21iaW5hdGlvbnMgb2YgYnV0dG9uICsgYWN0aW9uXG4gICAgaWYgKGUuYnV0dG9uID09PSBDb3JlTW91c2VCdXR0b24uV0hFRUwgJiYgZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiA9PT0gQ29yZU1vdXNlQnV0dG9uLk5PTkUgJiYgZS5hY3Rpb24gIT09IENvcmVNb3VzZUFjdGlvbi5NT1ZFKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlLmJ1dHRvbiAhPT0gQ29yZU1vdXNlQnV0dG9uLldIRUVMICYmIChlLmFjdGlvbiA9PT0gQ29yZU1vdXNlQWN0aW9uLkxFRlQgfHwgZS5hY3Rpb24gPT09IENvcmVNb3VzZUFjdGlvbi5SSUdIVCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyByZXBvcnQgMS1iYXNlZCBjb29yZHNcbiAgICBlLmNvbCsrO1xuICAgIGUucm93Kys7XG5cbiAgICAvLyBkZWJvdW5jZSBtb3ZlIGV2ZW50cyBhdCBncmlkIG9yIHBpeGVsIGxldmVsXG4gICAgaWYgKGUuYWN0aW9uID09PSBDb3JlTW91c2VBY3Rpb24uTU9WRVxuICAgICAgJiYgdGhpcy5fbGFzdEV2ZW50XG4gICAgICAmJiB0aGlzLl9lcXVhbEV2ZW50cyh0aGlzLl9sYXN0RXZlbnQsIGUsIHRoaXMuX2FjdGl2ZUVuY29kaW5nID09PSAnU0dSX1BJWEVMUycpXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgcHJvdG9jb2wgcmVzdHJpY3Rpb25zXG4gICAgaWYgKCF0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLnJlc3RyaWN0KGUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gZW5jb2RlIHJlcG9ydCBhbmQgc2VuZFxuICAgIGNvbnN0IHJlcG9ydCA9IHRoaXMuX2VuY29kaW5nc1t0aGlzLl9hY3RpdmVFbmNvZGluZ10oZSk7XG4gICAgaWYgKHJlcG9ydCkge1xuICAgICAgLy8gYWx3YXlzIHNlbmQgREVGQVVMVCBhcyBiaW5hcnkgZGF0YVxuICAgICAgaWYgKHRoaXMuX2FjdGl2ZUVuY29kaW5nID09PSAnREVGQVVMVCcpIHtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckJpbmFyeUV2ZW50KHJlcG9ydCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHJlcG9ydCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbGFzdEV2ZW50ID0gZTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIGV4cGxhaW5FdmVudHMoZXZlbnRzOiBDb3JlTW91c2VFdmVudFR5cGUpOiB7IFtldmVudDogc3RyaW5nXTogYm9vbGVhbiB9IHtcbiAgICByZXR1cm4ge1xuICAgICAgZG93bjogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLkRPV04pLFxuICAgICAgdXA6ICEhKGV2ZW50cyAmIENvcmVNb3VzZUV2ZW50VHlwZS5VUCksXG4gICAgICBkcmFnOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuRFJBRyksXG4gICAgICBtb3ZlOiAhIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSksXG4gICAgICB3aGVlbDogISEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIF9lcXVhbEV2ZW50cyhlMTogSUNvcmVNb3VzZUV2ZW50LCBlMjogSUNvcmVNb3VzZUV2ZW50LCBwaXhlbHM6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAocGl4ZWxzKSB7XG4gICAgICBpZiAoZTEueCAhPT0gZTIueCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKGUxLnkgIT09IGUyLnkpIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGUxLmNvbCAhPT0gZTIuY29sKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoZTEucm93ICE9PSBlMi5yb3cpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGUxLmJ1dHRvbiAhPT0gZTIuYnV0dG9uKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmFjdGlvbiAhPT0gZTIuYWN0aW9uKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGUxLmN0cmwgIT09IGUyLmN0cmwpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuYWx0ICE9PSBlMi5hbHQpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoZTEuc2hpZnQgIT09IGUyLnNoaWZ0KSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJVW5pY29kZVZlcnNpb25Qcm92aWRlciwgVW5pY29kZUNoYXJQcm9wZXJ0aWVzLCBVbmljb2RlQ2hhcldpZHRoIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IFVuaWNvZGVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1VuaWNvZGVTZXJ2aWNlJztcblxuY29uc3QgQk1QX0NPTUJJTklORyA9IFtcbiAgWzB4MDMwMCwgMHgwMzZGXSwgWzB4MDQ4MywgMHgwNDg2XSwgWzB4MDQ4OCwgMHgwNDg5XSxcbiAgWzB4MDU5MSwgMHgwNUJEXSwgWzB4MDVCRiwgMHgwNUJGXSwgWzB4MDVDMSwgMHgwNUMyXSxcbiAgWzB4MDVDNCwgMHgwNUM1XSwgWzB4MDVDNywgMHgwNUM3XSwgWzB4MDYwMCwgMHgwNjAzXSxcbiAgWzB4MDYxMCwgMHgwNjE1XSwgWzB4MDY0QiwgMHgwNjVFXSwgWzB4MDY3MCwgMHgwNjcwXSxcbiAgWzB4MDZENiwgMHgwNkU0XSwgWzB4MDZFNywgMHgwNkU4XSwgWzB4MDZFQSwgMHgwNkVEXSxcbiAgWzB4MDcwRiwgMHgwNzBGXSwgWzB4MDcxMSwgMHgwNzExXSwgWzB4MDczMCwgMHgwNzRBXSxcbiAgWzB4MDdBNiwgMHgwN0IwXSwgWzB4MDdFQiwgMHgwN0YzXSwgWzB4MDkwMSwgMHgwOTAyXSxcbiAgWzB4MDkzQywgMHgwOTNDXSwgWzB4MDk0MSwgMHgwOTQ4XSwgWzB4MDk0RCwgMHgwOTREXSxcbiAgWzB4MDk1MSwgMHgwOTU0XSwgWzB4MDk2MiwgMHgwOTYzXSwgWzB4MDk4MSwgMHgwOTgxXSxcbiAgWzB4MDlCQywgMHgwOUJDXSwgWzB4MDlDMSwgMHgwOUM0XSwgWzB4MDlDRCwgMHgwOUNEXSxcbiAgWzB4MDlFMiwgMHgwOUUzXSwgWzB4MEEwMSwgMHgwQTAyXSwgWzB4MEEzQywgMHgwQTNDXSxcbiAgWzB4MEE0MSwgMHgwQTQyXSwgWzB4MEE0NywgMHgwQTQ4XSwgWzB4MEE0QiwgMHgwQTREXSxcbiAgWzB4MEE3MCwgMHgwQTcxXSwgWzB4MEE4MSwgMHgwQTgyXSwgWzB4MEFCQywgMHgwQUJDXSxcbiAgWzB4MEFDMSwgMHgwQUM1XSwgWzB4MEFDNywgMHgwQUM4XSwgWzB4MEFDRCwgMHgwQUNEXSxcbiAgWzB4MEFFMiwgMHgwQUUzXSwgWzB4MEIwMSwgMHgwQjAxXSwgWzB4MEIzQywgMHgwQjNDXSxcbiAgWzB4MEIzRiwgMHgwQjNGXSwgWzB4MEI0MSwgMHgwQjQzXSwgWzB4MEI0RCwgMHgwQjREXSxcbiAgWzB4MEI1NiwgMHgwQjU2XSwgWzB4MEI4MiwgMHgwQjgyXSwgWzB4MEJDMCwgMHgwQkMwXSxcbiAgWzB4MEJDRCwgMHgwQkNEXSwgWzB4MEMzRSwgMHgwQzQwXSwgWzB4MEM0NiwgMHgwQzQ4XSxcbiAgWzB4MEM0QSwgMHgwQzREXSwgWzB4MEM1NSwgMHgwQzU2XSwgWzB4MENCQywgMHgwQ0JDXSxcbiAgWzB4MENCRiwgMHgwQ0JGXSwgWzB4MENDNiwgMHgwQ0M2XSwgWzB4MENDQywgMHgwQ0NEXSxcbiAgWzB4MENFMiwgMHgwQ0UzXSwgWzB4MEQ0MSwgMHgwRDQzXSwgWzB4MEQ0RCwgMHgwRDREXSxcbiAgWzB4MERDQSwgMHgwRENBXSwgWzB4MEREMiwgMHgwREQ0XSwgWzB4MERENiwgMHgwREQ2XSxcbiAgWzB4MEUzMSwgMHgwRTMxXSwgWzB4MEUzNCwgMHgwRTNBXSwgWzB4MEU0NywgMHgwRTRFXSxcbiAgWzB4MEVCMSwgMHgwRUIxXSwgWzB4MEVCNCwgMHgwRUI5XSwgWzB4MEVCQiwgMHgwRUJDXSxcbiAgWzB4MEVDOCwgMHgwRUNEXSwgWzB4MEYxOCwgMHgwRjE5XSwgWzB4MEYzNSwgMHgwRjM1XSxcbiAgWzB4MEYzNywgMHgwRjM3XSwgWzB4MEYzOSwgMHgwRjM5XSwgWzB4MEY3MSwgMHgwRjdFXSxcbiAgWzB4MEY4MCwgMHgwRjg0XSwgWzB4MEY4NiwgMHgwRjg3XSwgWzB4MEY5MCwgMHgwRjk3XSxcbiAgWzB4MEY5OSwgMHgwRkJDXSwgWzB4MEZDNiwgMHgwRkM2XSwgWzB4MTAyRCwgMHgxMDMwXSxcbiAgWzB4MTAzMiwgMHgxMDMyXSwgWzB4MTAzNiwgMHgxMDM3XSwgWzB4MTAzOSwgMHgxMDM5XSxcbiAgWzB4MTA1OCwgMHgxMDU5XSwgWzB4MTE2MCwgMHgxMUZGXSwgWzB4MTM1RiwgMHgxMzVGXSxcbiAgWzB4MTcxMiwgMHgxNzE0XSwgWzB4MTczMiwgMHgxNzM0XSwgWzB4MTc1MiwgMHgxNzUzXSxcbiAgWzB4MTc3MiwgMHgxNzczXSwgWzB4MTdCNCwgMHgxN0I1XSwgWzB4MTdCNywgMHgxN0JEXSxcbiAgWzB4MTdDNiwgMHgxN0M2XSwgWzB4MTdDOSwgMHgxN0QzXSwgWzB4MTdERCwgMHgxN0REXSxcbiAgWzB4MTgwQiwgMHgxODBEXSwgWzB4MThBOSwgMHgxOEE5XSwgWzB4MTkyMCwgMHgxOTIyXSxcbiAgWzB4MTkyNywgMHgxOTI4XSwgWzB4MTkzMiwgMHgxOTMyXSwgWzB4MTkzOSwgMHgxOTNCXSxcbiAgWzB4MUExNywgMHgxQTE4XSwgWzB4MUIwMCwgMHgxQjAzXSwgWzB4MUIzNCwgMHgxQjM0XSxcbiAgWzB4MUIzNiwgMHgxQjNBXSwgWzB4MUIzQywgMHgxQjNDXSwgWzB4MUI0MiwgMHgxQjQyXSxcbiAgWzB4MUI2QiwgMHgxQjczXSwgWzB4MURDMCwgMHgxRENBXSwgWzB4MURGRSwgMHgxREZGXSxcbiAgWzB4MjAwQiwgMHgyMDBGXSwgWzB4MjAyQSwgMHgyMDJFXSwgWzB4MjA2MCwgMHgyMDYzXSxcbiAgWzB4MjA2QSwgMHgyMDZGXSwgWzB4MjBEMCwgMHgyMEVGXSwgWzB4MzAyQSwgMHgzMDJGXSxcbiAgWzB4MzA5OSwgMHgzMDlBXSwgWzB4QTgwNiwgMHhBODA2XSwgWzB4QTgwQiwgMHhBODBCXSxcbiAgWzB4QTgyNSwgMHhBODI2XSwgWzB4RkIxRSwgMHhGQjFFXSwgWzB4RkUwMCwgMHhGRTBGXSxcbiAgWzB4RkUyMCwgMHhGRTIzXSwgWzB4RkVGRiwgMHhGRUZGXSwgWzB4RkZGOSwgMHhGRkZCXVxuXTtcbmNvbnN0IEhJR0hfQ09NQklOSU5HID0gW1xuICBbMHgxMEEwMSwgMHgxMEEwM10sIFsweDEwQTA1LCAweDEwQTA2XSwgWzB4MTBBMEMsIDB4MTBBMEZdLFxuICBbMHgxMEEzOCwgMHgxMEEzQV0sIFsweDEwQTNGLCAweDEwQTNGXSwgWzB4MUQxNjcsIDB4MUQxNjldLFxuICBbMHgxRDE3MywgMHgxRDE4Ml0sIFsweDFEMTg1LCAweDFEMThCXSwgWzB4MUQxQUEsIDB4MUQxQURdLFxuICBbMHgxRDI0MiwgMHgxRDI0NF0sIFsweEUwMDAxLCAweEUwMDAxXSwgWzB4RTAwMjAsIDB4RTAwN0ZdLFxuICBbMHhFMDEwMCwgMHhFMDFFRl1cbl07XG5cbi8vIEJNUCBsb29rdXAgdGFibGUsIGxhenkgaW5pdGlhbGl6ZWQgZHVyaW5nIGZpcnN0IGFkZG9uIGxvYWRpbmdcbmxldCB0YWJsZTogVWludDhBcnJheTtcblxuZnVuY3Rpb24gYmlzZWFyY2godWNzOiBudW1iZXIsIGRhdGE6IG51bWJlcltdW10pOiBib29sZWFuIHtcbiAgbGV0IG1pbiA9IDA7XG4gIGxldCBtYXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGxldCBtaWQ7XG4gIGlmICh1Y3MgPCBkYXRhWzBdWzBdIHx8IHVjcyA+IGRhdGFbbWF4XVsxXSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB3aGlsZSAobWF4ID49IG1pbikge1xuICAgIG1pZCA9IChtaW4gKyBtYXgpID4+IDE7XG4gICAgaWYgKHVjcyA+IGRhdGFbbWlkXVsxXSkge1xuICAgICAgbWluID0gbWlkICsgMTtcbiAgICB9IGVsc2UgaWYgKHVjcyA8IGRhdGFbbWlkXVswXSkge1xuICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGNsYXNzIFVuaWNvZGVWNiBpbXBsZW1lbnRzIElVbmljb2RlVmVyc2lvblByb3ZpZGVyIHtcbiAgcHVibGljIHJlYWRvbmx5IHZlcnNpb24gPSAnNic7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gaW5pdCBsb29rdXAgdGFibGUgb25jZVxuICAgIGlmICghdGFibGUpIHtcbiAgICAgIHRhYmxlID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzYpO1xuICAgICAgdGFibGUuZmlsbCgxKTtcbiAgICAgIHRhYmxlWzBdID0gMDtcbiAgICAgIC8vIGNvbnRyb2wgY2hhcnNcbiAgICAgIHRhYmxlLmZpbGwoMCwgMSwgMzIpO1xuICAgICAgdGFibGUuZmlsbCgwLCAweDdmLCAweGEwKTtcblxuICAgICAgLy8gYXBwbHkgd2lkZSBjaGFyIHJ1bGVzIGZpcnN0XG4gICAgICAvLyB3aWRlIGNoYXJzXG4gICAgICB0YWJsZS5maWxsKDIsIDB4MTEwMCwgMHgxMTYwKTtcbiAgICAgIHRhYmxlWzB4MjMyOV0gPSAyO1xuICAgICAgdGFibGVbMHgyMzJhXSA9IDI7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4MmU4MCwgMHhhNGQwKTtcbiAgICAgIHRhYmxlWzB4MzAzZl0gPSAxOyAgLy8gd3JvbmdseSBpbiBsYXN0IGxpbmVcblxuICAgICAgdGFibGUuZmlsbCgyLCAweGFjMDAsIDB4ZDdhNCk7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4ZjkwMCwgMHhmYjAwKTtcbiAgICAgIHRhYmxlLmZpbGwoMiwgMHhmZTEwLCAweGZlMWEpO1xuICAgICAgdGFibGUuZmlsbCgyLCAweGZlMzAsIDB4ZmU3MCk7XG4gICAgICB0YWJsZS5maWxsKDIsIDB4ZmYwMCwgMHhmZjYxKTtcbiAgICAgIHRhYmxlLmZpbGwoMiwgMHhmZmUwLCAweGZmZTcpO1xuXG4gICAgICAvLyBhcHBseSBjb21iaW5pbmcgbGFzdCB0byBlbnN1cmUgd2Ugb3ZlcndyaXRlXG4gICAgICAvLyB3cm9uZ2x5IHdpZGUgc2V0IGNoYXJzOlxuICAgICAgLy8gICAgdGhlIG9yaWdpbmFsIGFsZ28gZXZhbHMgY29tYmluaW5nIGZpcnN0IGFuZCBmYWxsc1xuICAgICAgLy8gICAgdGhyb3VnaCB0byB3aWRlIGNoZWNrIHNvIHdlIHNpbXBseSBkbyBoZXJlIHRoZSBvcHBvc2l0ZVxuICAgICAgLy8gY29tYmluaW5nIDBcbiAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgQk1QX0NPTUJJTklORy5sZW5ndGg7ICsrcikge1xuICAgICAgICB0YWJsZS5maWxsKDAsIEJNUF9DT01CSU5JTkdbcl1bMF0sIEJNUF9DT01CSU5JTkdbcl1bMV0gKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd2N3aWR0aChudW06IG51bWJlcik6IFVuaWNvZGVDaGFyV2lkdGgge1xuICAgIGlmIChudW0gPCAzMikgcmV0dXJuIDA7XG4gICAgaWYgKG51bSA8IDEyNykgcmV0dXJuIDE7XG4gICAgaWYgKG51bSA8IDY1NTM2KSByZXR1cm4gdGFibGVbbnVtXSBhcyBVbmljb2RlQ2hhcldpZHRoO1xuICAgIGlmIChiaXNlYXJjaChudW0sIEhJR0hfQ09NQklOSU5HKSkgcmV0dXJuIDA7XG4gICAgaWYgKChudW0gPj0gMHgyMDAwMCAmJiBudW0gPD0gMHgyZmZmZCkgfHwgKG51bSA+PSAweDMwMDAwICYmIG51bSA8PSAweDNmZmZkKSkgcmV0dXJuIDI7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICBwdWJsaWMgY2hhclByb3BlcnRpZXMoY29kZXBvaW50OiBudW1iZXIsIHByZWNlZGluZzogVW5pY29kZUNoYXJQcm9wZXJ0aWVzKTogVW5pY29kZUNoYXJQcm9wZXJ0aWVzIHtcbiAgICBsZXQgd2lkdGggPSB0aGlzLndjd2lkdGgoY29kZXBvaW50KTtcbiAgICBsZXQgc2hvdWxkSm9pbiA9IHdpZHRoID09PSAwICYmIHByZWNlZGluZyAhPT0gMDtcbiAgICBpZiAoc2hvdWxkSm9pbikge1xuICAgICAgY29uc3Qgb2xkV2lkdGggPSBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgocHJlY2VkaW5nKTtcbiAgICAgIGlmIChvbGRXaWR0aCA9PT0gMCkge1xuICAgICAgICBzaG91bGRKb2luID0gZmFsc2U7XG4gICAgICB9IGVsc2UgaWYgKG9sZFdpZHRoID4gd2lkdGgpIHtcbiAgICAgICAgd2lkdGggPSBvbGRXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFVuaWNvZGVTZXJ2aWNlLmNyZWF0ZVByb3BlcnR5VmFsdWUoMCwgd2lkdGgsIHNob3VsZEpvaW4pO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBVbmljb2RlVjYgfSBmcm9tICdjb21tb24vaW5wdXQvVW5pY29kZVY2JztcbmltcG9ydCB7IElVbmljb2RlU2VydmljZSwgSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIsIFVuaWNvZGVDaGFyUHJvcGVydGllcywgVW5pY29kZUNoYXJXaWR0aCB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuXG5leHBvcnQgY2xhc3MgVW5pY29kZVNlcnZpY2UgaW1wbGVtZW50cyBJVW5pY29kZVNlcnZpY2Uge1xuICBwdWJsaWMgc2VydmljZUJyYW5kOiBhbnk7XG5cbiAgcHJpdmF0ZSBfcHJvdmlkZXJzOiB7W2tleTogc3RyaW5nXTogSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXJ9ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcHJpdmF0ZSBfYWN0aXZlOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBfYWN0aXZlUHJvdmlkZXI6IElVbmljb2RlVmVyc2lvblByb3ZpZGVyO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX29uQ2hhbmdlID0gbmV3IEVtaXR0ZXI8c3RyaW5nPigpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25DaGFuZ2UgPSB0aGlzLl9vbkNoYW5nZS5ldmVudDtcblxuICBwdWJsaWMgc3RhdGljIGV4dHJhY3RTaG91bGRKb2luKHZhbHVlOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHZhbHVlICYgMSkgIT09IDA7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBleHRyYWN0V2lkdGgodmFsdWU6IFVuaWNvZGVDaGFyUHJvcGVydGllcyk6IFVuaWNvZGVDaGFyV2lkdGgge1xuICAgIHJldHVybiAoKHZhbHVlID4+IDEpICYgMHgzKSBhcyBVbmljb2RlQ2hhcldpZHRoO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZXh0cmFjdENoYXJLaW5kKHZhbHVlOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBudW1iZXIge1xuICAgIHJldHVybiB2YWx1ZSA+PiAzO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlUHJvcGVydHlWYWx1ZShzdGF0ZTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBzaG91bGRKb2luOiBib29sZWFuID0gZmFsc2UpOiBVbmljb2RlQ2hhclByb3BlcnRpZXMge1xuICAgIHJldHVybiAoKHN0YXRlICYgMHhmZmZmZmYpIDw8IDMpIHwgKCh3aWR0aCAmIDMpIDw8IDEpIHwgKHNob3VsZEpvaW4/MTowKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGRlZmF1bHRQcm92aWRlciA9IG5ldyBVbmljb2RlVjYoKTtcbiAgICB0aGlzLnJlZ2lzdGVyKGRlZmF1bHRQcm92aWRlcik7XG4gICAgdGhpcy5fYWN0aXZlID0gZGVmYXVsdFByb3ZpZGVyLnZlcnNpb247XG4gICAgdGhpcy5fYWN0aXZlUHJvdmlkZXIgPSBkZWZhdWx0UHJvdmlkZXI7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9vbkNoYW5nZS5kaXNwb3NlKCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHZlcnNpb25zKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcHJvdmlkZXJzKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgYWN0aXZlVmVyc2lvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XG4gIH1cblxuICBwdWJsaWMgc2V0IGFjdGl2ZVZlcnNpb24odmVyc2lvbjogc3RyaW5nKSB7XG4gICAgaWYgKCF0aGlzLl9wcm92aWRlcnNbdmVyc2lvbl0pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgdW5rbm93biBVbmljb2RlIHZlcnNpb24gXCIke3ZlcnNpb259XCJgKTtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZlID0gdmVyc2lvbjtcbiAgICB0aGlzLl9hY3RpdmVQcm92aWRlciA9IHRoaXMuX3Byb3ZpZGVyc1t2ZXJzaW9uXTtcbiAgICB0aGlzLl9vbkNoYW5nZS5maXJlKHZlcnNpb24pO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyKHByb3ZpZGVyOiBJVW5pY29kZVZlcnNpb25Qcm92aWRlcik6IHZvaWQge1xuICAgIHRoaXMuX3Byb3ZpZGVyc1twcm92aWRlci52ZXJzaW9uXSA9IHByb3ZpZGVyO1xuICB9XG5cbiAgLyoqXG4gICAqIFVuaWNvZGUgdmVyc2lvbiBkZXBlbmRlbnQgaW50ZXJmYWNlLlxuICAgKi9cbiAgcHVibGljIHdjd2lkdGgobnVtOiBudW1iZXIpOiBVbmljb2RlQ2hhcldpZHRoIHtcbiAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvdmlkZXIud2N3aWR0aChudW0pO1xuICB9XG5cbiAgcHVibGljIGdldFN0cmluZ0NlbGxXaWR0aChzOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCByZXN1bHQgPSAwO1xuICAgIGxldCBwcmVjZWRpbmdJbmZvID0gMDtcbiAgICBjb25zdCBsZW5ndGggPSBzLmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBsZXQgY29kZSA9IHMuY2hhckNvZGVBdChpKTtcbiAgICAgIC8vIHN1cnJvZ2F0ZSBwYWlyIGZpcnN0XG4gICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERCRkYpIHtcbiAgICAgICAgaWYgKCsraSA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB0aGlzIHNob3VsZCBub3QgaGFwcGVuIHdpdGggc3RyaW5ncyByZXRyaWV2ZWQgZnJvbVxuICAgICAgICAgIC8vIEJ1ZmZlci50cmFuc2xhdGVUb1N0cmluZyBhcyBpdCBjb252ZXJ0cyBmcm9tIFVURi0zMlxuICAgICAgICAgIC8vIGFuZCB0aGVyZWZvcmUgYWx3YXlzIHNob3VsZCBjb250YWluIHRoZSBzZWNvbmQgcGFydFxuICAgICAgICAgIC8vIGZvciBhbnkgb3RoZXIgc3RyaW5nIHdlIHN0aWxsIGhhdmUgdG8gaGFuZGxlIGl0IHNvbWVob3c6XG4gICAgICAgICAgLy8gc2ltcGx5IHRyZWF0IHRoZSBsb25lbHkgc3Vycm9nYXRlIGZpcnN0IGFzIGEgc2luZ2xlIGNoYXIgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgICAgIHJldHVybiByZXN1bHQgKyB0aGlzLndjd2lkdGgoY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vjb25kID0gcy5jaGFyQ29kZUF0KGkpO1xuICAgICAgICAvLyBjb252ZXJ0IHN1cnJvZ2F0ZSBwYWlyIHRvIGhpZ2ggY29kZXBvaW50IG9ubHkgZm9yIHZhbGlkIHNlY29uZCBwYXJ0IChVVEYtMTYpXG4gICAgICAgIC8vIG90aGVyd2lzZSB0cmVhdCB0aGVtIGluZGVwZW5kZW50bHkgKFVDUy0yIGJlaGF2aW9yKVxuICAgICAgICBpZiAoMHhEQzAwIDw9IHNlY29uZCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAgICAgY29kZSA9IChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgc2Vjb25kIC0gMHhEQzAwICsgMHgxMDAwMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgKz0gdGhpcy53Y3dpZHRoKHNlY29uZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGN1cnJlbnRJbmZvID0gdGhpcy5jaGFyUHJvcGVydGllcyhjb2RlLCBwcmVjZWRpbmdJbmZvKTtcbiAgICAgIGxldCBjaFdpZHRoID0gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKGN1cnJlbnRJbmZvKTtcbiAgICAgIGlmIChVbmljb2RlU2VydmljZS5leHRyYWN0U2hvdWxkSm9pbihjdXJyZW50SW5mbykpIHtcbiAgICAgICAgY2hXaWR0aCAtPSBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgocHJlY2VkaW5nSW5mbyk7XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gY2hXaWR0aDtcbiAgICAgIHByZWNlZGluZ0luZm8gPSBjdXJyZW50SW5mbztcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBjaGFyUHJvcGVydGllcyhjb2RlcG9pbnQ6IG51bWJlciwgcHJlY2VkaW5nOiBVbmljb2RlQ2hhclByb3BlcnRpZXMpOiBVbmljb2RlQ2hhclByb3BlcnRpZXMge1xuICAgIHJldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci5jaGFyUHJvcGVydGllcyhjb2RlcG9pbnQsIHByZWNlZGluZyk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBJQ2hhcnNldCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBDaGFyc2V0U2VydmljZSBpbXBsZW1lbnRzIElDaGFyc2V0U2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwdWJsaWMgY2hhcnNldDogSUNoYXJzZXQgfCB1bmRlZmluZWQ7XG4gIHB1YmxpYyBnbGV2ZWw6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfY2hhcnNldHM6IChJQ2hhcnNldCB8IHVuZGVmaW5lZClbXSA9IFtdO1xuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLmNoYXJzZXQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fY2hhcnNldHMgPSBbXTtcbiAgICB0aGlzLmdsZXZlbCA9IDA7XG4gIH1cblxuICBwdWJsaWMgc2V0Z0xldmVsKGc6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZ2xldmVsID0gZztcbiAgICB0aGlzLmNoYXJzZXQgPSB0aGlzLl9jaGFyc2V0c1tnXTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRnQ2hhcnNldChnOiBudW1iZXIsIGNoYXJzZXQ6IElDaGFyc2V0IHwgdW5kZWZpbmVkKTogdm9pZCB7XG4gICAgdGhpcy5fY2hhcnNldHNbZ10gPSBjaGFyc2V0O1xuICAgIGlmICh0aGlzLmdsZXZlbCA9PT0gZykge1xuICAgICAgdGhpcy5jaGFyc2V0ID0gY2hhcnNldDtcbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IENIQVJfREFUQV9DT0RFX0lOREVYLCBOVUxMX0NFTExfQ09ERSwgV0hJVEVTUEFDRV9DRUxMX0NPREUgfSBmcm9tICdjb21tb24vYnVmZmVyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZShidWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSk6IHZvaWQge1xuICAvLyBXaW5wdHkgZG9lcyBub3Qgc3VwcG9ydCB3cmFwYXJvdW5kIG1vZGUgd2hpY2ggbWVhbnMgdGhhdCBsaW5lcyB3aWxsIG5ldmVyXG4gIC8vIGJlIG1hcmtlZCBhcyB3cmFwcGVkLiBUaGlzIGNhdXNlcyBpc3N1ZXMgZm9yIHRoaW5ncyBsaWtlIGNvcHlpbmcgYSBsaW5lXG4gIC8vIHJldGFpbmluZyB0aGUgd3JhcHBlZCBuZXcgbGluZSBjaGFyYWN0ZXJzIG9yIGlmIGNvbnN1bWVycyBhcmUgbGlzdGVuaW5nXG4gIC8vIGluIG9uIHRoZSBkYXRhIHN0cmVhbS5cbiAgLy9cbiAgLy8gVGhlIHdvcmthcm91bmQgZm9yIHRoaXMgaXMgdG8gbGlzdGVuIHRvIGV2ZXJ5IGluY29taW5nIGxpbmUgZmVlZCBhbmQgbWFya1xuICAvLyB0aGUgbGluZSBhcyB3cmFwcGVkIGlmIHRoZSBsYXN0IGNoYXJhY3RlciBpbiB0aGUgcHJldmlvdXMgbGluZSBpcyBub3QgYVxuICAvLyBzcGFjZS4gVGhpcyBpcyBjZXJ0YWlubHkgbm90IHdpdGhvdXQgaXRzIHByb2JsZW1zLCBidXQgZ2VuZXJhbGx5IG9uXG4gIC8vIFdpbmRvd3Mgd2hlbiB0ZXh0IHJlYWNoZXMgdGhlIGVuZCBvZiB0aGUgdGVybWluYWwgaXQncyBsaWtlbHkgZ29pbmcgdG8gYmVcbiAgLy8gd3JhcHBlZC5cbiAgY29uc3QgbGluZSA9IGJ1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChidWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSArIGJ1ZmZlclNlcnZpY2UuYnVmZmVyLnkgLSAxKTtcbiAgY29uc3QgbGFzdENoYXIgPSBsaW5lPy5nZXQoYnVmZmVyU2VydmljZS5jb2xzIC0gMSk7XG5cbiAgY29uc3QgbmV4dExpbmUgPSBidWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgKyBidWZmZXJTZXJ2aWNlLmJ1ZmZlci55KTtcbiAgaWYgKG5leHRMaW5lICYmIGxhc3RDaGFyKSB7XG4gICAgbmV4dExpbmUuaXNXcmFwcGVkID0gKGxhc3RDaGFyW0NIQVJfREFUQV9DT0RFX0lOREVYXSAhPT0gTlVMTF9DRUxMX0NPREUgJiYgbGFzdENoYXJbQ0hBUl9EQVRBX0NPREVfSU5ERVhdICE9PSBXSElURVNQQUNFX0NFTExfQ09ERSk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJUGFyYW1zLCBQYXJhbXNBcnJheSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuXG4vLyBtYXggdmFsdWUgc3VwcG9ydGVkIGZvciBhIHNpbmdsZSBwYXJhbS9zdWJwYXJhbSAoY2xhbXBlZCB0byBwb3NpdGl2ZSBpbnQzMiByYW5nZSlcbmNvbnN0IE1BWF9WQUxVRSA9IDB4N0ZGRkZGRkY7XG4vLyBtYXggYWxsb3dlZCBzdWJwYXJhbXMgZm9yIGEgc2luZ2xlIHNlcXVlbmNlIChoYXJkY29kZWQgbGltaXRhdGlvbilcbmNvbnN0IE1BWF9TVUJQQVJBTVMgPSAyNTY7XG5cbi8qKlxuICogUGFyYW1zIHN0b3JhZ2UgY2xhc3MuXG4gKiBUaGlzIHR5cGUgaXMgdXNlZCBieSB0aGUgcGFyc2VyIHRvIGFjY3VtdWxhdGUgc2VxdWVuY2UgcGFyYW1ldGVycyBhbmQgc3ViIHBhcmFtZXRlcnNcbiAqIGFuZCB0cmFuc21pdCB0aGVtIHRvIHRoZSBpbnB1dCBoYW5kbGVyIGFjdGlvbnMuXG4gKlxuICogTk9URVM6XG4gKiAgLSBwYXJhbXMgb2JqZWN0IGZvciBhY3Rpb24gaGFuZGxlcnMgaXMgYm9ycm93ZWQsIHVzZSBgLnRvQXJyYXlgIG9yIGAuY2xvbmVgIHRvIGdldCBhIGNvcHlcbiAqICAtIG5ldmVyIHJlYWQgYmV5b25kIGBwYXJhbXMubGVuZ3RoIC0gMWAgKGxpa2VseSB0byBjb250YWluIGFyYml0cmFyeSBkYXRhKVxuICogIC0gYC5nZXRTdWJQYXJhbXNgIHJldHVybnMgYSBib3Jyb3dlZCB0eXBlZCBhcnJheSwgdXNlIGAuZ2V0U3ViUGFyYW1zQWxsYCBmb3IgY2xvbmVkIHN1YiBwYXJhbXNcbiAqICAtIGhhcmRjb2RlZCBsaW1pdGF0aW9uczpcbiAqICAgIC0gbWF4LiB2YWx1ZSBmb3IgYSBzaW5nbGUgKHN1YikgcGFyYW0gaXMgMl4zMSAtIDEgKGdyZWF0ZXIgdmFsdWVzIGFyZSBjbGFtcGVkIHRvIHRoYXQpXG4gKiAgICAtIG1heC4gMjU2IHN1YiBwYXJhbXMgcG9zc2libGVcbiAqICAgIC0gbmVnYXRpdmUgdmFsdWVzIGFyZSBub3QgYWxsb3dlZCBiZXNpZGUgLTEgKHBsYWNlaG9sZGVyIGZvciBkZWZhdWx0IHZhbHVlKVxuICpcbiAqIEFib3V0IFpETSAoWmVybyBEZWZhdWx0IE1vZGUpOlxuICogWkRNIGlzIG5vdCBvcmNoZXN0cmF0ZWQgYnkgdGhpcyBjbGFzcy4gSWYgdGhlIHBhcnNlciBpcyBpbiBaRE0sXG4gKiBpdCBzaG91bGQgYWRkIDAgZm9yIGVtcHR5IHBhcmFtcywgb3RoZXJ3aXNlIC0xLiBUaGlzIGRvZXMgbm90IGFwcGx5XG4gKiB0byBzdWJwYXJhbXMsIGVtcHR5IHN1YnBhcmFtcyBzaG91bGQgYWx3YXlzIGJlIGFkZGVkIHdpdGggLTEuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXJhbXMgaW1wbGVtZW50cyBJUGFyYW1zIHtcbiAgLy8gcGFyYW1zIHN0b3JlIGFuZCBsZW5ndGhcbiAgcHVibGljIHBhcmFtczogSW50MzJBcnJheTtcbiAgcHVibGljIGxlbmd0aDogbnVtYmVyO1xuXG4gIC8vIHN1YiBwYXJhbXMgc3RvcmUgYW5kIGxlbmd0aFxuICBwcm90ZWN0ZWQgX3N1YlBhcmFtczogSW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9zdWJQYXJhbXNMZW5ndGg6IG51bWJlcjtcblxuICAvLyBzdWIgcGFyYW1zIG9mZnNldHMgZnJvbSBwYXJhbTogcGFyYW0gaWR4IC0tPiBbc3RhcnQsIGVuZF0gb2Zmc2V0XG4gIHByaXZhdGUgX3N1YlBhcmFtc0lkeDogVWludDE2QXJyYXk7XG4gIHByaXZhdGUgX3JlamVjdERpZ2l0czogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcmVqZWN0U3ViRGlnaXRzOiBib29sZWFuO1xuICBwcml2YXRlIF9kaWdpdElzU3ViOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBgUGFyYW1zYCB0eXBlIGZyb20gSlMgYXJyYXkgcmVwcmVzZW50YXRpb24uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21BcnJheSh2YWx1ZXM6IFBhcmFtc0FycmF5KTogUGFyYW1zIHtcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgUGFyYW1zKCk7XG4gICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcGFyYW1zO1xuICAgIH1cbiAgICAvLyBza2lwIGxlYWRpbmcgc3ViIHBhcmFtc1xuICAgIGZvciAobGV0IGkgPSAoQXJyYXkuaXNBcnJheSh2YWx1ZXNbMF0pKSA/IDEgOiAwOyBpIDwgdmFsdWVzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHZhbHVlLmxlbmd0aDsgKytrKSB7XG4gICAgICAgICAgcGFyYW1zLmFkZFN1YlBhcmFtKHZhbHVlW2tdKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zLmFkZFBhcmFtKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gbWF4TGVuZ3RoIG1heCBsZW5ndGggb2Ygc3RvcmFibGUgcGFyYW1ldGVyc1xuICAgKiBAcGFyYW0gbWF4U3ViUGFyYW1zTGVuZ3RoIG1heCBsZW5ndGggb2Ygc3RvcmFibGUgc3ViIHBhcmFtZXRlcnNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtYXhMZW5ndGg6IG51bWJlciA9IDMyLCBwdWJsaWMgbWF4U3ViUGFyYW1zTGVuZ3RoOiBudW1iZXIgPSAzMikge1xuICAgIGlmIChtYXhTdWJQYXJhbXNMZW5ndGggPiBNQVhfU1VCUEFSQU1TKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ21heFN1YlBhcmFtc0xlbmd0aCBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMjU2Jyk7XG4gICAgfVxuICAgIHRoaXMucGFyYW1zID0gbmV3IEludDMyQXJyYXkobWF4TGVuZ3RoKTtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fc3ViUGFyYW1zID0gbmV3IEludDMyQXJyYXkobWF4U3ViUGFyYW1zTGVuZ3RoKTtcbiAgICB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPSAwO1xuICAgIHRoaXMuX3N1YlBhcmFtc0lkeCA9IG5ldyBVaW50MTZBcnJheShtYXhMZW5ndGgpO1xuICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9uZSBvYmplY3QuXG4gICAqL1xuICBwdWJsaWMgY2xvbmUoKTogUGFyYW1zIHtcbiAgICBjb25zdCBuZXdQYXJhbXMgPSBuZXcgUGFyYW1zKHRoaXMubWF4TGVuZ3RoLCB0aGlzLm1heFN1YlBhcmFtc0xlbmd0aCk7XG4gICAgbmV3UGFyYW1zLnBhcmFtcy5zZXQodGhpcy5wYXJhbXMpO1xuICAgIG5ld1BhcmFtcy5sZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtcy5zZXQodGhpcy5fc3ViUGFyYW1zKTtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtc0xlbmd0aCA9IHRoaXMuX3N1YlBhcmFtc0xlbmd0aDtcbiAgICBuZXdQYXJhbXMuX3N1YlBhcmFtc0lkeC5zZXQodGhpcy5fc3ViUGFyYW1zSWR4KTtcbiAgICBuZXdQYXJhbXMuX3JlamVjdERpZ2l0cyA9IHRoaXMuX3JlamVjdERpZ2l0cztcbiAgICBuZXdQYXJhbXMuX3JlamVjdFN1YkRpZ2l0cyA9IHRoaXMuX3JlamVjdFN1YkRpZ2l0cztcbiAgICBuZXdQYXJhbXMuX2RpZ2l0SXNTdWIgPSB0aGlzLl9kaWdpdElzU3ViO1xuICAgIHJldHVybiBuZXdQYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgSlMgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgcGFyYW1ldGVycyBhbmQgc3ViIHBhcmFtZXRlcnMuXG4gICAqIFRoZSBhcnJheSBpcyBzdHJ1Y3R1cmVkIGFzIGZvbGxvd3M6XG4gICAqICAgIHNlcXVlbmNlOiBcIjE7MjozOjQ7NTo6NlwiXG4gICAqICAgIGFycmF5ICAgOiBbMSwgMiwgWzMsIDRdLCA1LCBbLTEsIDZdXVxuICAgKi9cbiAgcHVibGljIHRvQXJyYXkoKTogUGFyYW1zQXJyYXkge1xuICAgIGNvbnN0IHJlczogUGFyYW1zQXJyYXkgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHJlcy5wdXNoKHRoaXMucGFyYW1zW2ldKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldID4+IDg7XG4gICAgICBjb25zdCBlbmQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaV0gJiAweEZGO1xuICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gMCkge1xuICAgICAgICByZXMucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9zdWJQYXJhbXMsIHN0YXJ0LCBlbmQpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0byBpbml0aWFsIGVtcHR5IHN0YXRlLlxuICAgKi9cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9zdWJQYXJhbXNMZW5ndGggPSAwO1xuICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX3JlamVjdFN1YkRpZ2l0cyA9IGZhbHNlO1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIGBQYXJhbXNgIG9ubHkgc3RvcmVzIHVwIHRvIGBtYXhMZW5ndGhgIHBhcmFtZXRlcnMsIGFueSBsYXRlclxuICAgKiBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLlxuICAgKiBOb3RlOiBWVCBkZXZpY2VzIG9ubHkgc3RvcmVkIHVwIHRvIDE2IHZhbHVlcywgeHRlcm0gc2VlbXMgdG9cbiAgICogc3RvcmUgdXAgdG8gMzAuXG4gICAqL1xuICBwdWJsaWMgYWRkUGFyYW0odmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpZ2l0SXNTdWIgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5sZW5ndGggPj0gdGhpcy5tYXhMZW5ndGgpIHtcbiAgICAgIHRoaXMuX3JlamVjdERpZ2l0cyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA8IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3ZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQnKTtcbiAgICB9XG4gICAgdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoXSA9IHRoaXMuX3N1YlBhcmFtc0xlbmd0aCA8PCA4IHwgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoO1xuICAgIHRoaXMucGFyYW1zW3RoaXMubGVuZ3RoKytdID0gdmFsdWUgPiBNQVhfVkFMVUUgPyBNQVhfVkFMVUUgOiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBzdWIgcGFyYW1ldGVyIHZhbHVlLlxuICAgKiBUaGUgc3ViIHBhcmFtZXRlciBpcyBhdXRvbWF0aWNhbGx5IGFzc29jaWF0ZWQgd2l0aCB0aGUgbGFzdCBwYXJhbWV0ZXIgdmFsdWUuXG4gICAqIFRodXMgaXQgaXMgbm90IHBvc3NpYmxlIHRvIGFkZCBhIHN1YnBhcmFtZXRlciB3aXRob3V0IGFueSBwYXJhbWV0ZXIgYWRkZWQgeWV0LlxuICAgKiBgUGFyYW1zYCBvbmx5IHN0b3JlcyB1cCB0byBgc3ViUGFyYW1zTGVuZ3RoYCBzdWIgcGFyYW1ldGVycywgYW55IGxhdGVyXG4gICAqIHN1YiBwYXJhbWV0ZXIgd2lsbCBiZSBpZ25vcmVkLlxuICAgKi9cbiAgcHVibGljIGFkZFN1YlBhcmFtKHZhbHVlOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kaWdpdElzU3ViID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9yZWplY3REaWdpdHMgfHwgdGhpcy5fc3ViUGFyYW1zTGVuZ3RoID49IHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKSB7XG4gICAgICB0aGlzLl9yZWplY3RTdWJEaWdpdHMgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodmFsdWUgPCAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd2YWx1ZXMgbGVzc2VyIHRoYW4gLTEgYXJlIG5vdCBhbGxvd2VkJyk7XG4gICAgfVxuICAgIHRoaXMuX3N1YlBhcmFtc1t0aGlzLl9zdWJQYXJhbXNMZW5ndGgrK10gPSB2YWx1ZSA+IE1BWF9WQUxVRSA/IE1BWF9WQUxVRSA6IHZhbHVlO1xuICAgIHRoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aCAtIDFdKys7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciBwYXJhbWV0ZXIgYXQgaW5kZXggYGlkeGAgaGFzIHN1YiBwYXJhbWV0ZXJzLlxuICAgKi9cbiAgcHVibGljIGhhc1N1YlBhcmFtcyhpZHg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoKHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdICYgMHhGRikgLSAodGhpcy5fc3ViUGFyYW1zSWR4W2lkeF0gPj4gOCkgPiAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gc3ViIHBhcmFtZXRlcnMgZm9yIHBhcmFtZXRlciBhdCBpbmRleCBgaWR4YC5cbiAgICogTm90ZTogVGhlIHZhbHVlcyBhcmUgYm9ycm93ZWQsIHRodXMgeW91IG5lZWQgdG8gY29weVxuICAgKiB0aGUgdmFsdWVzIGlmIHlvdSBuZWVkIHRvIGhvbGQgdGhlbSBpbiBub25sb2NhbCBzY29wZS5cbiAgICovXG4gIHB1YmxpYyBnZXRTdWJQYXJhbXMoaWR4OiBudW1iZXIpOiBJbnQzMkFycmF5IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLl9zdWJQYXJhbXNJZHhbaWR4XSA+PiA4O1xuICAgIGNvbnN0IGVuZCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpZHhdICYgMHhGRjtcbiAgICBpZiAoZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3ViUGFyYW1zLnN1YmFycmF5KHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHN1YiBwYXJhbWV0ZXJzIGFzIHtpZHg6IHN1YnBhcmFtc30gbWFwcGluZy5cbiAgICogTm90ZTogVGhlIHZhbHVlcyBhcmUgbm90IGJvcnJvd2VkLlxuICAgKi9cbiAgcHVibGljIGdldFN1YlBhcmFtc0FsbCgpOiB7W2lkeDogbnVtYmVyXTogSW50MzJBcnJheX0ge1xuICAgIGNvbnN0IHJlc3VsdDoge1tpZHg6IG51bWJlcl06IEludDMyQXJyYXl9ID0ge307XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgKytpKSB7XG4gICAgICBjb25zdCBzdGFydCA9IHRoaXMuX3N1YlBhcmFtc0lkeFtpXSA+PiA4O1xuICAgICAgY29uc3QgZW5kID0gdGhpcy5fc3ViUGFyYW1zSWR4W2ldICYgMHhGRjtcbiAgICAgIGlmIChlbmQgLSBzdGFydCA+IDApIHtcbiAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5fc3ViUGFyYW1zLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHNpbmdsZSBkaWdpdCB2YWx1ZSB0byBjdXJyZW50IHBhcmFtZXRlci5cbiAgICogVGhpcyBpcyB1c2VkIGJ5IHRoZSBwYXJzZXIgdG8gYWNjb3VudCBkaWdpdHMgb24gYSBjaGFyIGJ5IGNoYXIgYmFzaXMuXG4gICAqL1xuICBwdWJsaWMgYWRkRGlnaXQodmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIGxldCBsZW5ndGg7XG4gICAgaWYgKHRoaXMuX3JlamVjdERpZ2l0c1xuICAgICAgfHwgIShsZW5ndGggPSB0aGlzLl9kaWdpdElzU3ViID8gdGhpcy5fc3ViUGFyYW1zTGVuZ3RoIDogdGhpcy5sZW5ndGgpXG4gICAgICB8fCAodGhpcy5fZGlnaXRJc1N1YiAmJiB0aGlzLl9yZWplY3RTdWJEaWdpdHMpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmUgPSB0aGlzLl9kaWdpdElzU3ViID8gdGhpcy5fc3ViUGFyYW1zIDogdGhpcy5wYXJhbXM7XG4gICAgY29uc3QgY3VyID0gc3RvcmVbbGVuZ3RoIC0gMV07XG4gICAgc3RvcmVbbGVuZ3RoIC0gMV0gPSB+Y3VyID8gTWF0aC5taW4oY3VyICogMTAgKyB2YWx1ZSwgTUFYX1ZBTFVFKSA6IHZhbHVlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJT3NjSGFuZGxlciwgSUhhbmRsZXJDb2xsZWN0aW9uLCBPc2NGYWxsYmFja0hhbmRsZXJUeXBlLCBJT3NjUGFyc2VyLCBJU3ViUGFyc2VyU3RhY2tTdGF0ZSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgT3NjU3RhdGUsIFBBWUxPQURfTElNSVQgfSBmcm9tICdjb21tb24vcGFyc2VyL0NvbnN0YW50cyc7XG5pbXBvcnQgeyB1dGYzMlRvU3RyaW5nIH0gZnJvbSAnY29tbW9uL2lucHV0L1RleHREZWNvZGVyJztcbmltcG9ydCB7IElEaXNwb3NhYmxlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuY29uc3QgRU1QVFlfSEFORExFUlM6IElPc2NIYW5kbGVyW10gPSBbXTtcblxuZXhwb3J0IGNsYXNzIE9zY1BhcnNlciBpbXBsZW1lbnRzIElPc2NQYXJzZXIge1xuICBwcml2YXRlIF9zdGF0ZSA9IE9zY1N0YXRlLlNUQVJUO1xuICBwcml2YXRlIF9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgcHJpdmF0ZSBfaWQgPSAtMTtcbiAgcHJpdmF0ZSBfaGFuZGxlcnM6IElIYW5kbGVyQ29sbGVjdGlvbjxJT3NjSGFuZGxlcj4gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBwcml2YXRlIF9oYW5kbGVyRmI6IE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUgPSAoKSA9PiB7IH07XG4gIHByaXZhdGUgX3N0YWNrOiBJU3ViUGFyc2VyU3RhY2tTdGF0ZSA9IHtcbiAgICBwYXVzZWQ6IGZhbHNlLFxuICAgIGxvb3BQb3NpdGlvbjogMCxcbiAgICBmYWxsVGhyb3VnaDogZmFsc2VcbiAgfTtcblxuICBwdWJsaWMgcmVnaXN0ZXJIYW5kbGVyKGlkZW50OiBudW1iZXIsIGhhbmRsZXI6IElPc2NIYW5kbGVyKTogSURpc3Bvc2FibGUge1xuICAgIGlmICh0aGlzLl9oYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5faGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIGNsZWFySGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSkgZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgfVxuICBwdWJsaWMgc2V0SGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVyRmIgPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5faGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9ICgpID0+IHsgfTtcbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgfVxuXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvLyBmb3JjZSBjbGVhbnVwIGhhbmRsZXJzIGlmIHBheWxvYWQgd2FzIGFscmVhZHkgc2VudFxuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuUEFZTE9BRCkge1xuICAgICAgZm9yIChsZXQgaiA9IHRoaXMuX3N0YWNrLnBhdXNlZCA/IHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiAtIDEgOiB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLmVuZChmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IGZhbHNlO1xuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICAgIHRoaXMuX2lkID0gLTE7XG4gICAgdGhpcy5fc3RhdGUgPSBPc2NTdGF0ZS5TVEFSVDtcbiAgfVxuXG4gIHByaXZhdGUgX3N0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuX2FjdGl2ZSA9IHRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXSB8fCBFTVBUWV9IQU5ETEVSUztcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZS5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwgJ1NUQVJUJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnN0YXJ0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnB1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuSUQ7XG4gIH1cblxuICAvKipcbiAgICogUHV0IGRhdGEgdG8gY3VycmVudCBPU0MgY29tbWFuZC5cbiAgICogRXhwZWN0cyB0aGUgaWRlbnRpZmllciBvZiB0aGUgT1NDIGNvbW1hbmQgaW4gdGhlIGZvcm1cbiAgICogT1NDIGlkIDsgcGF5bG9hZCBTVC9CRUxcbiAgICogUGF5bG9hZCBjaHVua3MgYXJlIG5vdCBmdXJ0aGVyIHByb2Nlc3NlZCBhbmQgZ2V0XG4gICAqIGRpcmVjdGx5IHBhc3NlZCB0byB0aGUgaGFuZGxlcnMuXG4gICAqL1xuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zdGF0ZSA9PT0gT3NjU3RhdGUuQUJPUlQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBPc2NTdGF0ZS5JRCkge1xuICAgICAgd2hpbGUgKHN0YXJ0IDwgZW5kKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBkYXRhW3N0YXJ0KytdO1xuICAgICAgICBpZiAoY29kZSA9PT0gMHgzYikge1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuUEFZTE9BRDtcbiAgICAgICAgICB0aGlzLl9zdGFydCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb2RlIDwgMHgzMCB8fCAweDM5IDwgY29kZSkge1xuICAgICAgICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuQUJPUlQ7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pZCA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl9pZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faWQgPSB0aGlzLl9pZCAqIDEwICsgY29kZSAtIDQ4O1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlBBWUxPQUQgJiYgZW5kIC0gc3RhcnQgPiAwKSB7XG4gICAgICB0aGlzLl9wdXQoZGF0YSwgc3RhcnQsIGVuZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBlbmQgb2YgYW4gT1NDIGNvbW1hbmQuXG4gICAqIFdoZXRoZXIgdGhlIE9TQyBnb3QgYWJvcnRlZCBvciBmaW5pc2hlZCBub3JtYWxseVxuICAgKiBpcyBpbmRpY2F0ZWQgYnkgYHN1Y2Nlc3NgLlxuICAgKi9cbiAgcHVibGljIGVuZChzdWNjZXNzOiBib29sZWFuLCBwcm9taXNlUmVzdWx0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLlNUQVJUKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGRvIG5vdGhpbmcgaWYgY29tbWFuZCB3YXMgZmF1bHR5XG4gICAgaWYgKHRoaXMuX3N0YXRlICE9PSBPc2NTdGF0ZS5BQk9SVCkge1xuICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIGluIElEIHN0YXRlIGFuZCBnZXQgYW4gZWFybHkgZW5kXG4gICAgICAvLyBtZWFucyB0aGF0IHRoZSBjb21tYW5kIGhhcyBubyBwYXlsb2FkIHRodXMgd2Ugc3RpbGwgaGF2ZVxuICAgICAgLy8gdG8gYW5ub3VuY2UgU1RBUlQgYW5kIHNlbmQgRU5EIHJpZ2h0IGFmdGVyXG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IE9zY1N0YXRlLklEKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsICdFTkQnLCBzdWNjZXNzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBoYW5kbGVyUmVzdWx0OiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiA9IGZhbHNlO1xuICAgICAgICBsZXQgaiA9IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxO1xuICAgICAgICBsZXQgZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuX3N0YWNrLnBhdXNlZCkge1xuICAgICAgICAgIGogPSB0aGlzLl9zdGFjay5sb29wUG9zaXRpb24gLSAxO1xuICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSBwcm9taXNlUmVzdWx0O1xuICAgICAgICAgIGZhbGxUaHJvdWdoID0gdGhpcy5fc3RhY2suZmFsbFRocm91Z2g7XG4gICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFmYWxsVGhyb3VnaCAmJiBoYW5kbGVyUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS5lbmQoc3VjY2Vzcyk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uID0gajtcbiAgICAgICAgICAgICAgdGhpcy5fc3RhY2suZmFsbFRocm91Z2ggPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGotLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhbnVwIGxlZnQgb3ZlciBoYW5kbGVyc1xuICAgICAgICAvLyB3ZSBhbHdheXMgaGF2ZSB0byBjYWxsIC5lbmQgZm9yIHByb3BlciBjbGVhbnVwLFxuICAgICAgICAvLyBoZXJlIHdlIHVzZSBgc3VjY2Vzc2AgdG8gaW5kaWNhdGUgd2hldGhlciBhIGhhbmRsZXIgc2hvdWxkIGV4ZWN1dGVcbiAgICAgICAgZm9yICg7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS5lbmQoZmFsc2UpO1xuICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiA9IGo7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaCA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH1cbiAgICB0aGlzLl9hY3RpdmUgPSBFTVBUWV9IQU5ETEVSUztcbiAgICB0aGlzLl9pZCA9IC0xO1xuICAgIHRoaXMuX3N0YXRlID0gT3NjU3RhdGUuU1RBUlQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb252ZW5pZW50IGNsYXNzIHRvIGFsbG93IGF0dGFjaGluZyBzdHJpbmcgYmFzZWQgaGFuZGxlciBmdW5jdGlvbnNcbiAqIGFzIE9TQyBoYW5kbGVycy5cbiAqL1xuZXhwb3J0IGNsYXNzIE9zY0hhbmRsZXIgaW1wbGVtZW50cyBJT3NjSGFuZGxlciB7XG4gIHByaXZhdGUgX2RhdGEgPSAnJztcbiAgcHJpdmF0ZSBfaGl0TGltaXQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9oYW5kbGVyOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPikgeyB9XG5cbiAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xuICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHB1dChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGF0YSArPSB1dGYzMlRvU3RyaW5nKGRhdGEsIHN0YXJ0LCBlbmQpO1xuICAgIGlmICh0aGlzLl9kYXRhLmxlbmd0aCA+IFBBWUxPQURfTElNSVQpIHtcbiAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgIHRoaXMuX2hpdExpbWl0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZW5kKHN1Y2Nlc3M6IGJvb2xlYW4pOiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiB7XG4gICAgbGV0IHJldDogYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4gPSBmYWxzZTtcbiAgICBpZiAodGhpcy5faGl0TGltaXQpIHtcbiAgICAgIHJldCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc3VjY2Vzcykge1xuICAgICAgcmV0ID0gdGhpcy5faGFuZGxlcih0aGlzLl9kYXRhKTtcbiAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIC8vIG5lZWQgdG8gaG9sZCBkYXRhIHVudGlsIGByZXRgIGdvdCByZXNvbHZlZFxuICAgICAgICAvLyBkb250IGNhcmUgZm9yIGVycm9ycywgZGF0YSB3aWxsIGJlIGZyZWVkIGFueXdheSBvbiBuZXh0IHN0YXJ0XG4gICAgICAgIHJldHVybiByZXQudGhlbihyZXMgPT4ge1xuICAgICAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgICAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgdGhpcy5faGl0TGltaXQgPSBmYWxzZTtcbiAgICByZXR1cm4gcmV0O1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTkgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJRGNzSGFuZGxlciwgSVBhcmFtcywgSUhhbmRsZXJDb2xsZWN0aW9uLCBJRGNzUGFyc2VyLCBEY3NGYWxsYmFja0hhbmRsZXJUeXBlLCBJU3ViUGFyc2VyU3RhY2tTdGF0ZSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgdXRmMzJUb1N0cmluZyB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1BhcmFtcyc7XG5pbXBvcnQgeyBQQVlMT0FEX0xJTUlUIH0gZnJvbSAnY29tbW9uL3BhcnNlci9Db25zdGFudHMnO1xuXG5jb25zdCBFTVBUWV9IQU5ETEVSUzogSURjc0hhbmRsZXJbXSA9IFtdO1xuXG5leHBvcnQgY2xhc3MgRGNzUGFyc2VyIGltcGxlbWVudHMgSURjc1BhcnNlciB7XG4gIHByaXZhdGUgX2hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248SURjc0hhbmRsZXI+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcHJpdmF0ZSBfYWN0aXZlOiBJRGNzSGFuZGxlcltdID0gRU1QVFlfSEFORExFUlM7XG4gIHByaXZhdGUgX2lkZW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9oYW5kbGVyRmI6IERjc0ZhbGxiYWNrSGFuZGxlclR5cGUgPSAoKSA9PiB7IH07XG4gIHByaXZhdGUgX3N0YWNrOiBJU3ViUGFyc2VyU3RhY2tTdGF0ZSA9IHtcbiAgICBwYXVzZWQ6IGZhbHNlLFxuICAgIGxvb3BQb3NpdGlvbjogMCxcbiAgICBmYWxsVGhyb3VnaDogZmFsc2VcbiAgfTtcblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5faGFuZGxlckZiID0gKCkgPT4geyB9O1xuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVySGFuZGxlcihpZGVudDogbnVtYmVyLCBoYW5kbGVyOiBJRGNzSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAodGhpcy5faGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2hhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmRleCA9IGhhbmRsZXJMaXN0LmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChoYW5kbGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaGFuZGxlckxpc3Quc3BsaWNlKGhhbmRsZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGNsZWFySGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hhbmRsZXJzW2lkZW50XSkgZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2lkZW50XTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRIYW5kbGVyRmFsbGJhY2soaGFuZGxlcjogRGNzRmFsbGJhY2tIYW5kbGVyVHlwZSk6IHZvaWQge1xuICAgIHRoaXMuX2hhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgLy8gZm9yY2UgY2xlYW51cCBsZWZ0b3ZlciBoYW5kbGVyc1xuICAgIGlmICh0aGlzLl9hY3RpdmUubGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBqID0gdGhpcy5fc3RhY2sucGF1c2VkID8gdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uIC0gMSA6IHRoaXMuX2FjdGl2ZS5sZW5ndGggLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICB0aGlzLl9hY3RpdmVbal0udW5ob29rKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fc3RhY2sucGF1c2VkID0gZmFsc2U7XG4gICAgdGhpcy5fYWN0aXZlID0gRU1QVFlfSEFORExFUlM7XG4gICAgdGhpcy5faWRlbnQgPSAwO1xuICB9XG5cbiAgcHVibGljIGhvb2soaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gYWx3YXlzIHJlc2V0IGxlZnRvdmVyIGhhbmRsZXJzXG4gICAgdGhpcy5yZXNldCgpO1xuICAgIHRoaXMuX2lkZW50ID0gaWRlbnQ7XG4gICAgdGhpcy5fYWN0aXZlID0gdGhpcy5faGFuZGxlcnNbaWRlbnRdIHx8IEVNUFRZX0hBTkRMRVJTO1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnSE9PSycsIHBhcmFtcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLmhvb2socGFyYW1zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcHV0KGRhdGE6IFVpbnQzMkFycmF5LCBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnUFVUJywgdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlW2pdLnB1dChkYXRhLCBzdGFydCwgZW5kKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgdW5ob29rKHN1Y2Nlc3M6IGJvb2xlYW4sIHByb21pc2VSZXN1bHQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICghdGhpcy5fYWN0aXZlLmxlbmd0aCkge1xuICAgICAgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCAnVU5IT09LJywgc3VjY2Vzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBoYW5kbGVyUmVzdWx0OiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPiA9IGZhbHNlO1xuICAgICAgbGV0IGogPSB0aGlzLl9hY3RpdmUubGVuZ3RoIC0gMTtcbiAgICAgIGxldCBmYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX3N0YWNrLnBhdXNlZCkge1xuICAgICAgICBqID0gdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uIC0gMTtcbiAgICAgICAgaGFuZGxlclJlc3VsdCA9IHByb21pc2VSZXN1bHQ7XG4gICAgICAgIGZhbGxUaHJvdWdoID0gdGhpcy5fc3RhY2suZmFsbFRocm91Z2g7XG4gICAgICAgIHRoaXMuX3N0YWNrLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCFmYWxsVGhyb3VnaCAmJiBoYW5kbGVyUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fYWN0aXZlW2pdLnVuaG9vayhzdWNjZXNzKTtcbiAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhY2sucGF1c2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiA9IGo7XG4gICAgICAgICAgICB0aGlzLl9zdGFjay5mYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGotLTtcbiAgICAgIH1cbiAgICAgIC8vIGNsZWFudXAgbGVmdCBvdmVyIGhhbmRsZXJzIChmYWxsVGhyb3VnaCBmb3IgYXN5bmMpXG4gICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgaGFuZGxlclJlc3VsdCA9IHRoaXMuX2FjdGl2ZVtqXS51bmhvb2soZmFsc2UpO1xuICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICB0aGlzLl9zdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbiA9IGo7XG4gICAgICAgICAgdGhpcy5fc3RhY2suZmFsbFRocm91Z2ggPSB0cnVlO1xuICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZSA9IEVNUFRZX0hBTkRMRVJTO1xuICAgIHRoaXMuX2lkZW50ID0gMDtcbiAgfVxufVxuXG4vLyBwcmVkZWZpbmUgZW1wdHkgcGFyYW1zIGFzIFswXSAoWkRNKVxuY29uc3QgRU1QVFlfUEFSQU1TID0gbmV3IFBhcmFtcygpO1xuRU1QVFlfUEFSQU1TLmFkZFBhcmFtKDApO1xuXG4vKipcbiAqIENvbnZlbmllbnQgY2xhc3MgdG8gY3JlYXRlIGEgRENTIGhhbmRsZXIgZnJvbSBhIHNpbmdsZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIE5vdGU6IFRoZSBwYXlsb2FkIGlzIGN1cnJlbnRseSBsaW1pdGVkIHRvIDUwIE1CIChoYXJkY29kZWQpLlxuICovXG5leHBvcnQgY2xhc3MgRGNzSGFuZGxlciBpbXBsZW1lbnRzIElEY3NIYW5kbGVyIHtcbiAgcHJpdmF0ZSBfZGF0YSA9ICcnO1xuICBwcml2YXRlIF9wYXJhbXM6IElQYXJhbXMgPSBFTVBUWV9QQVJBTVM7XG4gIHByaXZhdGUgX2hpdExpbWl0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfaGFuZGxlcjogKGRhdGE6IHN0cmluZywgcGFyYW1zOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPikgeyB9XG5cbiAgcHVibGljIGhvb2socGFyYW1zOiBJUGFyYW1zKTogdm9pZCB7XG4gICAgLy8gc2luY2Ugd2UgbmVlZCB0byBwcmVzZXJ2ZSBwYXJhbXMgdW50aWwgYHVuaG9va2AsIHdlIGhhdmUgdG8gY2xvbmUgaXRcbiAgICAvLyAob25seSBib3Jyb3dlZCBmcm9tIHBhcnNlciBhbmQgc3BhbnMgbXVsdGlwbGUgcGFyc2VyIHN0YXRlcylcbiAgICAvLyBwZXJmIG9wdGltaXphdGlvbjpcbiAgICAvLyBjbG9uZSBvbmx5LCBpZiB3ZSBoYXZlIG5vbiBlbXB0eSBwYXJhbXMsIG90aGVyd2lzZSBzdGljayB3aXRoIGRlZmF1bHRcbiAgICB0aGlzLl9wYXJhbXMgPSAocGFyYW1zLmxlbmd0aCA+IDEgfHwgcGFyYW1zLnBhcmFtc1swXSkgPyBwYXJhbXMuY2xvbmUoKSA6IEVNUFRZX1BBUkFNUztcbiAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgdGhpcy5faGl0TGltaXQgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBwdXQoZGF0YTogVWludDMyQXJyYXksIHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2hpdExpbWl0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2RhdGEgKz0gdXRmMzJUb1N0cmluZyhkYXRhLCBzdGFydCwgZW5kKTtcbiAgICBpZiAodGhpcy5fZGF0YS5sZW5ndGggPiBQQVlMT0FEX0xJTUlUKSB7XG4gICAgICB0aGlzLl9kYXRhID0gJyc7XG4gICAgICB0aGlzLl9oaXRMaW1pdCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHVuaG9vayhzdWNjZXNzOiBib29sZWFuKTogYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGxldCByZXQ6IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuX2hpdExpbWl0KSB7XG4gICAgICByZXQgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHJldCA9IHRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSwgdGhpcy5fcGFyYW1zKTtcbiAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIC8vIG5lZWQgdG8gaG9sZCBkYXRhIGFuZCBwYXJhbXMgdW50aWwgYHJldGAgZ290IHJlc29sdmVkXG4gICAgICAgIC8vIGRvbnQgY2FyZSBmb3IgZXJyb3JzLCBkYXRhIHdpbGwgYmUgZnJlZWQgYW55d2F5IG9uIG5leHQgc3RhcnRcbiAgICAgICAgcmV0dXJuIHJldC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zID0gRU1QVFlfUEFSQU1TO1xuICAgICAgICAgIHRoaXMuX2RhdGEgPSAnJztcbiAgICAgICAgICB0aGlzLl9oaXRMaW1pdCA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9wYXJhbXMgPSBFTVBUWV9QQVJBTVM7XG4gICAgdGhpcy5fZGF0YSA9ICcnO1xuICAgIHRoaXMuX2hpdExpbWl0ID0gZmFsc2U7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSVBhcnNpbmdTdGF0ZSwgSURjc0hhbmRsZXIsIElFc2NhcGVTZXF1ZW5jZVBhcnNlciwgSVBhcmFtcywgSU9zY0hhbmRsZXIsIElIYW5kbGVyQ29sbGVjdGlvbiwgQ3NpSGFuZGxlclR5cGUsIE9zY0ZhbGxiYWNrSGFuZGxlclR5cGUsIElPc2NQYXJzZXIsIEVzY0hhbmRsZXJUeXBlLCBJRGNzUGFyc2VyLCBEY3NGYWxsYmFja0hhbmRsZXJUeXBlLCBJRnVuY3Rpb25JZGVudGlmaWVyLCBFeGVjdXRlRmFsbGJhY2tIYW5kbGVyVHlwZSwgQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZSwgRXNjRmFsbGJhY2tIYW5kbGVyVHlwZSwgUHJpbnRIYW5kbGVyVHlwZSwgUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlLCBFeGVjdXRlSGFuZGxlclR5cGUsIElQYXJzZXJTdGFja1N0YXRlLCBQYXJzZXJTdGFja1R5cGUsIFJlc3VtYWJsZUhhbmRsZXJzVHlwZSB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvVHlwZXMnO1xuaW1wb3J0IHsgUGFyc2VyU3RhdGUsIFBhcnNlckFjdGlvbiB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvQ29uc3RhbnRzJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBQYXJhbXMgfSBmcm9tICdjb21tb24vcGFyc2VyL1BhcmFtcyc7XG5pbXBvcnQgeyBPc2NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL09zY1BhcnNlcic7XG5pbXBvcnQgeyBEY3NQYXJzZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL0Rjc1BhcnNlcic7XG5cbi8qKlxuICogVGFibGUgdmFsdWVzIGFyZSBnZW5lcmF0ZWQgbGlrZSB0aGlzOlxuICogICAgaW5kZXg6ICBjdXJyZW50U3RhdGUgPDwgVGFibGVWYWx1ZS5JTkRFWF9TVEFURV9TSElGVCB8IGNoYXJDb2RlXG4gKiAgICB2YWx1ZTogIGFjdGlvbiA8PCBUYWJsZVZhbHVlLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dFN0YXRlXG4gKi9cbmNvbnN0IGVudW0gVGFibGVBY2Nlc3Mge1xuICBUUkFOU0lUSU9OX0FDVElPTl9TSElGVCA9IDQsXG4gIFRSQU5TSVRJT05fU1RBVEVfTUFTSyA9IDE1LFxuICBJTkRFWF9TVEFURV9TSElGVCA9IDhcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHRhYmxlIGZvciBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqL1xuZXhwb3J0IGNsYXNzIFRyYW5zaXRpb25UYWJsZSB7XG4gIHB1YmxpYyB0YWJsZTogVWludDhBcnJheTtcblxuICBjb25zdHJ1Y3RvcihsZW5ndGg6IG51bWJlcikge1xuICAgIHRoaXMudGFibGUgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBkZWZhdWx0IHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSBhY3Rpb24gZGVmYXVsdCBhY3Rpb25cbiAgICogQHBhcmFtIG5leHQgZGVmYXVsdCBuZXh0IHN0YXRlXG4gICAqL1xuICBwdWJsaWMgc2V0RGVmYXVsdChhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnRhYmxlLmZpbGwoYWN0aW9uIDw8IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUIHwgbmV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgdHJhbnNpdGlvbiB0byB0aGUgdHJhbnNpdGlvbiB0YWJsZS5cbiAgICogQHBhcmFtIGNvZGUgaW5wdXQgY2hhcmFjdGVyIGNvZGVcbiAgICogQHBhcmFtIHN0YXRlIGN1cnJlbnQgcGFyc2VyIHN0YXRlXG4gICAqIEBwYXJhbSBhY3Rpb24gcGFyc2VyIGFjdGlvbiB0byBiZSBkb25lXG4gICAqIEBwYXJhbSBuZXh0IG5leHQgcGFyc2VyIHN0YXRlXG4gICAqL1xuICBwdWJsaWMgYWRkKGNvZGU6IG51bWJlciwgc3RhdGU6IFBhcnNlclN0YXRlLCBhY3Rpb246IFBhcnNlckFjdGlvbiwgbmV4dDogUGFyc2VyU3RhdGUpOiB2b2lkIHtcbiAgICB0aGlzLnRhYmxlW3N0YXRlIDw8IFRhYmxlQWNjZXNzLklOREVYX1NUQVRFX1NISUZUIHwgY29kZV0gPSBhY3Rpb24gPDwgVGFibGVBY2Nlc3MuVFJBTlNJVElPTl9BQ1RJT05fU0hJRlQgfCBuZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0cmFuc2l0aW9ucyBmb3IgbXVsdGlwbGUgaW5wdXQgY2hhcmFjdGVyIGNvZGVzLlxuICAgKiBAcGFyYW0gY29kZXMgaW5wdXQgY2hhcmFjdGVyIGNvZGUgYXJyYXlcbiAgICogQHBhcmFtIHN0YXRlIGN1cnJlbnQgcGFyc2VyIHN0YXRlXG4gICAqIEBwYXJhbSBhY3Rpb24gcGFyc2VyIGFjdGlvbiB0byBiZSBkb25lXG4gICAqIEBwYXJhbSBuZXh0IG5leHQgcGFyc2VyIHN0YXRlXG4gICAqL1xuICBwdWJsaWMgYWRkTWFueShjb2RlczogbnVtYmVyW10sIHN0YXRlOiBQYXJzZXJTdGF0ZSwgYWN0aW9uOiBQYXJzZXJBY3Rpb24sIG5leHQ6IFBhcnNlclN0YXRlKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy50YWJsZVtzdGF0ZSA8PCBUYWJsZUFjY2Vzcy5JTkRFWF9TVEFURV9TSElGVCB8IGNvZGVzW2ldXSA9IGFjdGlvbiA8PCBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX0FDVElPTl9TSElGVCB8IG5leHQ7XG4gICAgfVxuICB9XG59XG5cblxuLy8gUHNldWRvLWNoYXJhY3RlciBwbGFjZWhvbGRlciBmb3IgcHJpbnRhYmxlIG5vbi1hc2NpaSBjaGFyYWN0ZXJzICh1bmljb2RlKS5cbmNvbnN0IE5PTl9BU0NJSV9QUklOVEFCTEUgPSAweEEwO1xuXG5cbi8qKlxuICogVlQ1MDAgY29tcGF0aWJsZSB0cmFuc2l0aW9uIHRhYmxlLlxuICogVGFrZW4gZnJvbSBodHRwczovL3Z0MTAwLm5ldC9lbXUvZGVjX2Fuc2lfcGFyc2VyLlxuICovXG5leHBvcnQgY29uc3QgVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSA9IChmdW5jdGlvbiAoKTogVHJhbnNpdGlvblRhYmxlIHtcbiAgY29uc3QgdGFibGU6IFRyYW5zaXRpb25UYWJsZSA9IG5ldyBUcmFuc2l0aW9uVGFibGUoNDA5NSk7XG5cbiAgLy8gcmFuZ2UgbWFjcm8gZm9yIGJ5dGVcbiAgY29uc3QgQllURV9WQUxVRVMgPSAyNTY7XG4gIGNvbnN0IGJsdWVwcmludCA9IEFycmF5LmFwcGx5KG51bGwsIEFycmF5KEJZVEVfVkFMVUVTKSkubWFwKCh1bnVzZWQ6IGFueSwgaTogbnVtYmVyKSA9PiBpKTtcbiAgY29uc3QgciA9IChzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IG51bWJlcltdID0+IGJsdWVwcmludC5zbGljZShzdGFydCwgZW5kKTtcblxuICAvLyBEZWZhdWx0IGRlZmluaXRpb25zLlxuICBjb25zdCBQUklOVEFCTEVTID0gcigweDIwLCAweDdmKTsgLy8gMHgyMCAoU1ApIGluY2x1ZGVkLCAweDdGIChERUwpIGV4Y2x1ZGVkXG4gIGNvbnN0IEVYRUNVVEFCTEVTID0gcigweDAwLCAweDE4KTtcbiAgRVhFQ1VUQUJMRVMucHVzaCgweDE5KTtcbiAgRVhFQ1VUQUJMRVMucHVzaC5hcHBseShFWEVDVVRBQkxFUywgcigweDFjLCAweDIwKSk7XG5cbiAgY29uc3Qgc3RhdGVzOiBudW1iZXJbXSA9IHIoUGFyc2VyU3RhdGUuR1JPVU5ELCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0ggKyAxKTtcbiAgbGV0IHN0YXRlOiBhbnk7XG5cbiAgLy8gc2V0IGRlZmF1bHQgdHJhbnNpdGlvblxuICB0YWJsZS5zZXREZWZhdWx0KFBhcnNlckFjdGlvbi5FUlJPUiwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gcHJpbnRhYmxlc1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBnbG9iYWwgYW55d2hlcmUgcnVsZXNcbiAgZm9yIChzdGF0ZSBpbiBzdGF0ZXMpIHtcbiAgICB0YWJsZS5hZGRNYW55KFsweDE4LCAweDFhLCAweDk5LCAweDlhXSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDgwLCAweDkwKSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZE1hbnkocigweDkwLCAweDk4KSwgc3RhdGUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAgIHRhYmxlLmFkZCgweDljLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuR1JPVU5EKTsgLy8gU1QgYXMgdGVybWluYXRvclxuICAgIHRhYmxlLmFkZCgweDFiLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5FU0NBUEUpOyAgLy8gRVNDXG4gICAgdGFibGUuYWRkKDB4OWQsIHN0YXRlLCBQYXJzZXJBY3Rpb24uT1NDX1NUQVJULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTsgIC8vIE9TQ1xuICAgIHRhYmxlLmFkZE1hbnkoWzB4OTgsIDB4OWUsIDB4OWZdLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcpO1xuICAgIHRhYmxlLmFkZCgweDliLCBzdGF0ZSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpOyAgLy8gQ1NJXG4gICAgdGFibGUuYWRkKDB4OTAsIHN0YXRlLCBQYXJzZXJBY3Rpb24uQ0xFQVIsIFBhcnNlclN0YXRlLkRDU19FTlRSWSk7ICAvLyBEQ1NcbiAgfVxuICAvLyBydWxlcyBmb3IgZXhlY3V0YWJsZXMgYW5kIDdmXG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVYRUNVVEUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkVTQ0FQRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0sIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5FWEVDVVRFLCBQYXJzZXJTdGF0ZS5DU0lfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uRVhFQ1VURSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgLy8gb3NjXG4gIHRhYmxlLmFkZCgweDVkLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5PU0NfU1RBUlQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfUFVULCBQYXJzZXJTdGF0ZS5PU0NfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShbMHg5YywgMHgxYiwgMHgxOCwgMHgxYSwgMHgwN10sIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5PU0NfRU5ELCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICAvLyBzb3MvcG0vYXBjIGRvZXMgbm90aGluZ1xuICB0YWJsZS5hZGRNYW55KFsweDU4LCAweDVlLCAweDVmXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5TT1NfUE1fQVBDX1NUUklORyk7XG4gIHRhYmxlLmFkZE1hbnkoUFJJTlRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgdGFibGUuYWRkKDB4OWMsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuU09TX1BNX0FQQ19TVFJJTkcsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLlNPU19QTV9BUENfU1RSSU5HKTtcbiAgLy8gY3NpIGVudHJpZXNcbiAgdGFibGUuYWRkKDB4NWIsIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkNMRUFSLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNTSV9ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5DU0lfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkNTSV9FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDNjKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uUEFSQU0sIFBhcnNlclN0YXRlLkNTSV9QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ1NJX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4NDApLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5DU0lfSUdOT1JFKTtcbiAgdGFibGUuYWRkKDB4N2YsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0VOVFJZLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHg0MCksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkNTSV9JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkNTSV9JTlRFUk1FRElBVEUsIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDIwLCAweDMwKSwgUGFyc2VyU3RhdGUuQ1NJX1BBUkFNLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuQ1NJX0lOVEVSTUVESUFURSk7XG4gIC8vIGVzY19pbnRlcm1lZGlhdGVcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5FU0NBUEVfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDdmKSwgUGFyc2VyU3RhdGUuRVNDQVBFX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4NTApLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5FU0NfRElTUEFUQ0gsIFBhcnNlclN0YXRlLkdST1VORCk7XG4gIHRhYmxlLmFkZE1hbnkocigweDUxLCAweDU4KSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KFsweDU5LCAweDVhLCAweDVjXSwgUGFyc2VyU3RhdGUuRVNDQVBFLCBQYXJzZXJBY3Rpb24uRVNDX0RJU1BBVENILCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg2MCwgMHg3ZiksIFBhcnNlclN0YXRlLkVTQ0FQRSwgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSCwgUGFyc2VyU3RhdGUuR1JPVU5EKTtcbiAgLy8gZGNzIGVudHJ5XG4gIHRhYmxlLmFkZCgweDUwLCBQYXJzZXJTdGF0ZS5FU0NBUEUsIFBhcnNlckFjdGlvbi5DTEVBUiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGQoMHg3ZiwgUGFyc2VyU3RhdGUuRENTX0VOVFJZLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlkpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0VOVFJZKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MzAsIDB4M2MpLCBQYXJzZXJTdGF0ZS5EQ1NfRU5UUlksIFBhcnNlckFjdGlvbi5QQVJBTSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNKTtcbiAgdGFibGUuYWRkTWFueShbMHgzYywgMHgzZCwgMHgzZSwgMHgzZl0sIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkNPTExFQ1QsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkoRVhFQ1VUQUJMRVMsIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgyMCwgMHg4MCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KHIoMHgxYywgMHgyMCksIFBhcnNlclN0YXRlLkRDU19JR05PUkUsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19JR05PUkUpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVJBTSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDFjLCAweDIwKSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KHIoMHgzMCwgMHgzYyksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLlBBUkFNLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0pO1xuICB0YWJsZS5hZGRNYW55KFsweDNjLCAweDNkLCAweDNlLCAweDNmXSwgUGFyc2VyU3RhdGUuRENTX1BBUkFNLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfUEFSQU0sIFBhcnNlckFjdGlvbi5DT0xMRUNULCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShFWEVDVVRBQkxFUywgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MWMsIDB4MjApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFKTtcbiAgdGFibGUuYWRkTWFueShyKDB4MjAsIDB4MzApLCBQYXJzZXJTdGF0ZS5EQ1NfSU5URVJNRURJQVRFLCBQYXJzZXJBY3Rpb24uQ09MTEVDVCwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDMwLCAweDQwKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuRENTX0lHTk9SRSk7XG4gIHRhYmxlLmFkZE1hbnkocigweDQwLCAweDdmKSwgUGFyc2VyU3RhdGUuRENTX0lOVEVSTUVESUFURSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19QQVJBTSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KHIoMHg0MCwgMHg3ZiksIFBhcnNlclN0YXRlLkRDU19FTlRSWSwgUGFyc2VyQWN0aW9uLkRDU19IT09LLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KEVYRUNVVEFCTEVTLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfUFVULCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gpO1xuICB0YWJsZS5hZGRNYW55KFBSSU5UQUJMRVMsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZCgweDdmLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5JR05PUkUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHRhYmxlLmFkZE1hbnkoWzB4MWIsIDB4OWMsIDB4MTgsIDB4MWFdLCBQYXJzZXJTdGF0ZS5EQ1NfUEFTU1RIUk9VR0gsIFBhcnNlckFjdGlvbi5EQ1NfVU5IT09LLCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICAvLyBzcGVjaWFsIGhhbmRsaW5nIG9mIHVuaWNvZGUgY2hhcnNcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkdST1VORCwgUGFyc2VyQWN0aW9uLlBSSU5ULCBQYXJzZXJTdGF0ZS5HUk9VTkQpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuT1NDX1NUUklORywgUGFyc2VyQWN0aW9uLk9TQ19QVVQsIFBhcnNlclN0YXRlLk9TQ19TVFJJTkcpO1xuICB0YWJsZS5hZGQoTk9OX0FTQ0lJX1BSSU5UQUJMRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSwgUGFyc2VyQWN0aW9uLklHTk9SRSwgUGFyc2VyU3RhdGUuQ1NJX0lHTk9SRSk7XG4gIHRhYmxlLmFkZChOT05fQVNDSUlfUFJJTlRBQkxFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFLCBQYXJzZXJBY3Rpb24uSUdOT1JFLCBQYXJzZXJTdGF0ZS5EQ1NfSUdOT1JFKTtcbiAgdGFibGUuYWRkKE5PTl9BU0NJSV9QUklOVEFCTEUsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCwgUGFyc2VyQWN0aW9uLkRDU19QVVQsIFBhcnNlclN0YXRlLkRDU19QQVNTVEhST1VHSCk7XG4gIHJldHVybiB0YWJsZTtcbn0pKCk7XG5cblxuLyoqXG4gKiBFc2NhcGVTZXF1ZW5jZVBhcnNlci5cbiAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgQU5TSS9ERUMgY29tcGF0aWJsZSBwYXJzZXIgZGVzY3JpYmVkIGJ5XG4gKiBQYXVsIFdpbGxpYW1zIChodHRwczovL3Z0MTAwLm5ldC9lbXUvZGVjX2Fuc2lfcGFyc2VyKS5cbiAqXG4gKiBUbyBpbXBsZW1lbnQgY3VzdG9tIEFOU0kgY29tcGxpYW50IGVzY2FwZSBzZXF1ZW5jZXMgaXQgaXMgbm90IG5lZWRlZCB0b1xuICogYWx0ZXIgdGhpcyBwYXJzZXIsIGluc3RlYWQgY29uc2lkZXIgcmVnaXN0ZXJpbmcgYSBjdXN0b20gaGFuZGxlci5cbiAqIEZvciBub24gQU5TSSBjb21wbGlhbnQgc2VxdWVuY2VzIGNoYW5nZSB0aGUgdHJhbnNpdGlvbiB0YWJsZSB3aXRoXG4gKiB0aGUgb3B0aW9uYWwgYHRyYW5zaXRpb25zYCBjb25zdHJ1Y3RvciBhcmd1bWVudCBhbmRcbiAqIHJlaW1wbGVtZW50IHRoZSBgcGFyc2VgIG1ldGhvZC5cbiAqXG4gKiBUaGlzIHBhcnNlciBpcyBjdXJyZW50bHkgaGFyZGNvZGVkIHRvIG9wZXJhdGUgaW4gWkRNIChaZXJvIERlZmF1bHQgTW9kZSlcbiAqIGFzIHN1Z2dlc3RlZCBieSB0aGUgb3JpZ2luYWwgcGFyc2VyLCB0aHVzIGVtcHR5IHBhcmFtZXRlcnMgYXJlIHNldCB0byAwLlxuICogVGhpcyB0aGlzIGlzIG5vdCBpbiBsaW5lIHdpdGggdGhlIGxhdGVzdCBFQ01BLTQ4IHNwZWNpZmljYXRpb25cbiAqIChaRE0gd2FzIHBhcnQgb2YgdGhlIGVhcmx5IHNwZWNzIGFuZCBnb3QgY29tcGxldGVseSByZW1vdmVkIGxhdGVyIG9uKS5cbiAqXG4gKiBPdGhlciB0aGFuIHRoZSBvcmlnaW5hbCBwYXJzZXIgZnJvbSB2dDEwMC5uZXQgdGhpcyBwYXJzZXIgc3VwcG9ydHNcbiAqIHN1YiBwYXJhbWV0ZXJzIGluIGRpZ2l0YWwgcGFyYW1ldGVycyBzZXBhcmF0ZWQgYnkgY29sb25zLiBFbXB0eSBzdWIgcGFyYW1ldGVyc1xuICogYXJlIHNldCB0byAtMSAobm8gWkRNIGZvciBzdWIgcGFyYW1ldGVycykuXG4gKlxuICogQWJvdXQgcHJlZml4IGFuZCBpbnRlcm1lZGlhdGUgYnl0ZXM6XG4gKiBUaGlzIHBhcnNlciBmb2xsb3dzIHRoZSBhc3N1bXB0aW9ucyBvZiB0aGUgdnQxMDAubmV0IHBhcnNlciB3aXRoIHRoZXNlIHJlc3RyaWN0aW9uczpcbiAqIC0gb25seSBvbmUgcHJlZml4IGJ5dGUgaXMgYWxsb3dlZCBhcyBmaXJzdCBwYXJhbWV0ZXIgYnl0ZSwgYnl0ZSByYW5nZSAweDNjIC4uIDB4M2ZcbiAqIC0gbWF4LiB0d28gaW50ZXJtZWRpYXRlcyBhcmUgcmVzcGVjdGVkLCBieXRlIHJhbmdlIDB4MjAgLi4gMHgyZlxuICogTm90ZSB0aGF0IHRoaXMgaXMgbm90IGluIGxpbmUgd2l0aCBFQ01BLTQ4IHdoaWNoIGRvZXMgbm90IGxpbWl0IGVpdGhlciBvZiB0aG9zZS5cbiAqIEZ1cnRoZXJtb3JlIEVDTUEtNDggYWxsb3dzIHRoZSBwcmVmaXggYnl0ZSByYW5nZSBhdCBhbnkgcGFyYW0gYnl0ZSBwb3NpdGlvbi4gQ3VycmVudGx5XG4gKiB0aGVyZSBhcmUgbm8ga25vd24gc2VxdWVuY2VzIHRoYXQgZm9sbG93IHRoZSBicm9hZGVyIGRlZmluaXRpb24gb2YgdGhlIHNwZWNpZmljYXRpb24uXG4gKlxuICogVE9ETzogaW1wbGVtZW50IGVycm9yIHJlY292ZXJ5IGhvb2sgdmlhIGVycm9yIGhhbmRsZXIgcmV0dXJuIHZhbHVlc1xuICovXG5leHBvcnQgY2xhc3MgRXNjYXBlU2VxdWVuY2VQYXJzZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUVzY2FwZVNlcXVlbmNlUGFyc2VyIHtcbiAgcHVibGljIGluaXRpYWxTdGF0ZTogbnVtYmVyO1xuICBwdWJsaWMgY3VycmVudFN0YXRlOiBudW1iZXI7XG4gIHB1YmxpYyBwcmVjZWRpbmdKb2luU3RhdGU6IG51bWJlcjsgLy8gVW5pY29kZUpvaW5Qcm9wZXJ0aWVzXG5cbiAgLy8gYnVmZmVycyBvdmVyIHNldmVyYWwgcGFyc2UgY2FsbHNcbiAgcHJvdGVjdGVkIF9wYXJhbXM6IFBhcmFtcztcbiAgcHJvdGVjdGVkIF9jb2xsZWN0OiBudW1iZXI7XG5cbiAgLy8gaGFuZGxlciBsb29rdXAgY29udGFpbmVyc1xuICBwcm90ZWN0ZWQgX3ByaW50SGFuZGxlcjogUHJpbnRIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9leGVjdXRlSGFuZGxlcnM6IHsgW2ZsYWc6IG51bWJlcl06IEV4ZWN1dGVIYW5kbGVyVHlwZSB9O1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248Q3NpSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgX2VzY0hhbmRsZXJzOiBJSGFuZGxlckNvbGxlY3Rpb248RXNjSGFuZGxlclR5cGU+O1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX29zY1BhcnNlcjogSU9zY1BhcnNlcjtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9kY3NQYXJzZXI6IElEY3NQYXJzZXI7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyOiAoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IElQYXJzaW5nU3RhdGU7XG5cbiAgLy8gZmFsbGJhY2sgaGFuZGxlcnNcbiAgcHJvdGVjdGVkIF9wcmludEhhbmRsZXJGYjogUHJpbnRGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2V4ZWN1dGVIYW5kbGVyRmI6IEV4ZWN1dGVGYWxsYmFja0hhbmRsZXJUeXBlO1xuICBwcm90ZWN0ZWQgX2NzaUhhbmRsZXJGYjogQ3NpRmFsbGJhY2tIYW5kbGVyVHlwZTtcbiAgcHJvdGVjdGVkIF9lc2NIYW5kbGVyRmI6IEVzY0ZhbGxiYWNrSGFuZGxlclR5cGU7XG4gIHByb3RlY3RlZCBfZXJyb3JIYW5kbGVyRmI6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZTtcblxuICAvLyBwYXJzZXIgc3RhY2sgc2F2ZSBmb3IgYXN5bmMgaGFuZGxlciBzdXBwb3J0XG4gIHByb3RlY3RlZCBfcGFyc2VTdGFjazogSVBhcnNlclN0YWNrU3RhdGUgPSB7XG4gICAgc3RhdGU6IFBhcnNlclN0YWNrVHlwZS5OT05FLFxuICAgIGhhbmRsZXJzOiBbXSxcbiAgICBoYW5kbGVyUG9zOiAwLFxuICAgIHRyYW5zaXRpb246IDAsXG4gICAgY2h1bmtQb3M6IDBcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgX3RyYW5zaXRpb25zOiBUcmFuc2l0aW9uVGFibGUgPSBWVDUwMF9UUkFOU0lUSU9OX1RBQkxFXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmluaXRpYWxTdGF0ZSA9IFBhcnNlclN0YXRlLkdST1VORDtcbiAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xuICAgIHRoaXMuX3BhcmFtcyA9IG5ldyBQYXJhbXMoKTsgLy8gZGVmYXVsdHMgdG8gMzIgc3RvcmFibGUgcGFyYW1zL3N1YnBhcmFtc1xuICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgICAgLy8gWkRNXG4gICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgdGhpcy5wcmVjZWRpbmdKb2luU3RhdGUgPSAwO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgZmFsbGJhY2sgaGFuZGxlcnMgYW5kIGhhbmRsZXIgbG9va3VwIGNvbnRhaW5lcnNcbiAgICB0aGlzLl9wcmludEhhbmRsZXJGYiA9IChkYXRhLCBzdGFydCwgZW5kKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYiA9IChjb2RlOiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9jc2lIYW5kbGVyRmIgPSAoaWRlbnQ6IG51bWJlciwgcGFyYW1zOiBJUGFyYW1zKTogdm9pZCA9PiB7IH07XG4gICAgdGhpcy5fZXNjSGFuZGxlckZiID0gKGlkZW50OiBudW1iZXIpOiB2b2lkID0+IHsgfTtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXJGYiA9IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSk6IElQYXJzaW5nU3RhdGUgPT4gc3RhdGU7XG4gICAgdGhpcy5fcHJpbnRIYW5kbGVyID0gdGhpcy5fcHJpbnRIYW5kbGVyRmI7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICB0aGlzLl9jc2lIYW5kbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB0aGlzLl9leGVjdXRlSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgdGhpcy5fZXNjSGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH0pKTtcbiAgICB0aGlzLl9vc2NQYXJzZXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgT3NjUGFyc2VyKCkpO1xuICAgIHRoaXMuX2Rjc1BhcnNlciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBEY3NQYXJzZXIoKSk7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gdGhpcy5fZXJyb3JIYW5kbGVyRmI7XG5cbiAgICAvLyBzd2FsbG93IDdiaXQgU1QgKEVTQytcXClcbiAgICB0aGlzLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnXFxcXCcgfSwgKCkgPT4gdHJ1ZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2lkZW50aWZpZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGZpbmFsUmFuZ2U6IG51bWJlcltdID0gWzB4NDAsIDB4N2VdKTogbnVtYmVyIHtcbiAgICBsZXQgcmVzID0gMDtcbiAgICBpZiAoaWQucHJlZml4KSB7XG4gICAgICBpZiAoaWQucHJlZml4Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIHJlcyA9IGlkLnByZWZpeC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKHJlcyAmJiAweDNjID4gcmVzIHx8IHJlcyA+IDB4M2YpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmVmaXggbXVzdCBiZSBpbiByYW5nZSAweDNjIC4uIDB4M2YnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmludGVybWVkaWF0ZXMpIHtcbiAgICAgIGlmIChpZC5pbnRlcm1lZGlhdGVzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQnKTtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWQuaW50ZXJtZWRpYXRlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGUgPSBpZC5pbnRlcm1lZGlhdGVzLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmICgweDIwID4gaW50ZXJtZWRpYXRlIHx8IGludGVybWVkaWF0ZSA+IDB4MmYpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludGVybWVkaWF0ZSBtdXN0IGJlIGluIHJhbmdlIDB4MjAgLi4gMHgyZicpO1xuICAgICAgICB9XG4gICAgICAgIHJlcyA8PD0gODtcbiAgICAgICAgcmVzIHw9IGludGVybWVkaWF0ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlkLmZpbmFsLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGUnKTtcbiAgICB9XG4gICAgY29uc3QgZmluYWxDb2RlID0gaWQuZmluYWwuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoZmluYWxSYW5nZVswXSA+IGZpbmFsQ29kZSB8fCBmaW5hbENvZGUgPiBmaW5hbFJhbmdlWzFdKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYGZpbmFsIG11c3QgYmUgaW4gcmFuZ2UgJHtmaW5hbFJhbmdlWzBdfSAuLiAke2ZpbmFsUmFuZ2VbMV19YCk7XG4gICAgfVxuICAgIHJlcyA8PD0gODtcbiAgICByZXMgfD0gZmluYWxDb2RlO1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHB1YmxpYyBpZGVudFRvU3RyaW5nKGlkZW50OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJlczogc3RyaW5nW10gPSBbXTtcbiAgICB3aGlsZSAoaWRlbnQpIHtcbiAgICAgIHJlcy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoaWRlbnQgJiAweEZGKSk7XG4gICAgICBpZGVudCA+Pj0gODtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5yZXZlcnNlKCkuam9pbignJyk7XG4gIH1cblxuICBwdWJsaWMgc2V0UHJpbnRIYW5kbGVyKGhhbmRsZXI6IFByaW50SGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSBoYW5kbGVyO1xuICB9XG4gIHB1YmxpYyBjbGVhclByaW50SGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLl9wcmludEhhbmRsZXIgPSB0aGlzLl9wcmludEhhbmRsZXJGYjtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGhhbmRsZXI6IEVzY0hhbmRsZXJUeXBlKTogSURpc3Bvc2FibGUge1xuICAgIGNvbnN0IGlkZW50ID0gdGhpcy5faWRlbnRpZmllcihpZCwgWzB4MzAsIDB4N2VdKTtcbiAgICBpZiAodGhpcy5fZXNjSGFuZGxlcnNbaWRlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2VzY0hhbmRsZXJzW2lkZW50XSA9IFtdO1xuICAgIH1cbiAgICBjb25zdCBoYW5kbGVyTGlzdCA9IHRoaXMuX2VzY0hhbmRsZXJzW2lkZW50XTtcbiAgICBoYW5kbGVyTGlzdC5wdXNoKGhhbmRsZXIpO1xuICAgIHJldHVybiB7XG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJJbmRleCA9IGhhbmRsZXJMaXN0LmluZGV4T2YoaGFuZGxlcik7XG4gICAgICAgIGlmIChoYW5kbGVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgaGFuZGxlckxpc3Quc3BsaWNlKGhhbmRsZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHB1YmxpYyBjbGVhckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihpZCwgWzB4MzAsIDB4N2VdKV0pIGRlbGV0ZSB0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkLCBbMHgzMCwgMHg3ZV0pXTtcbiAgfVxuICBwdWJsaWMgc2V0RXNjSGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IEVzY0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9lc2NIYW5kbGVyRmIgPSBoYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIHNldEV4ZWN1dGVIYW5kbGVyKGZsYWc6IHN0cmluZywgaGFuZGxlcjogRXhlY3V0ZUhhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2ZsYWcuY2hhckNvZGVBdCgwKV0gPSBoYW5kbGVyO1xuICB9XG4gIHB1YmxpYyBjbGVhckV4ZWN1dGVIYW5kbGVyKGZsYWc6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9leGVjdXRlSGFuZGxlcnNbZmxhZy5jaGFyQ29kZUF0KDApXSkgZGVsZXRlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tmbGFnLmNoYXJDb2RlQXQoMCldO1xuICB9XG4gIHB1YmxpYyBzZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IEV4ZWN1dGVGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fZXhlY3V0ZUhhbmRsZXJGYiA9IGhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiBDc2lIYW5kbGVyVHlwZSk6IElEaXNwb3NhYmxlIHtcbiAgICBjb25zdCBpZGVudCA9IHRoaXMuX2lkZW50aWZpZXIoaWQpO1xuICAgIGlmICh0aGlzLl9jc2lIYW5kbGVyc1tpZGVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdID0gW107XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJMaXN0ID0gdGhpcy5fY3NpSGFuZGxlcnNbaWRlbnRdO1xuICAgIGhhbmRsZXJMaXN0LnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgY29uc3QgaGFuZGxlckluZGV4ID0gaGFuZGxlckxpc3QuaW5kZXhPZihoYW5kbGVyKTtcbiAgICAgICAgaWYgKGhhbmRsZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBoYW5kbGVyTGlzdC5zcGxpY2UoaGFuZGxlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgcHVibGljIGNsZWFyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkKV0pIGRlbGV0ZSB0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGlkKV07XG4gIH1cbiAgcHVibGljIHNldENzaUhhbmRsZXJGYWxsYmFjayhjYWxsYmFjazogKGlkZW50OiBudW1iZXIsIHBhcmFtczogSVBhcmFtcykgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NzaUhhbmRsZXJGYiA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgaGFuZGxlcjogSURjc0hhbmRsZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX2Rjc1BhcnNlci5yZWdpc3RlckhhbmRsZXIodGhpcy5faWRlbnRpZmllcihpZCksIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBjbGVhckRjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9kY3NQYXJzZXIuY2xlYXJIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoaWQpKTtcbiAgfVxuICBwdWJsaWMgc2V0RGNzSGFuZGxlckZhbGxiYWNrKGhhbmRsZXI6IERjc0ZhbGxiYWNrSGFuZGxlclR5cGUpOiB2b2lkIHtcbiAgICB0aGlzLl9kY3NQYXJzZXIuc2V0SGFuZGxlckZhbGxiYWNrKGhhbmRsZXIpO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBoYW5kbGVyOiBJT3NjSGFuZGxlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fb3NjUGFyc2VyLnJlZ2lzdGVySGFuZGxlcihpZGVudCwgaGFuZGxlcik7XG4gIH1cbiAgcHVibGljIGNsZWFyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLmNsZWFySGFuZGxlcihpZGVudCk7XG4gIH1cbiAgcHVibGljIHNldE9zY0hhbmRsZXJGYWxsYmFjayhoYW5kbGVyOiBPc2NGYWxsYmFja0hhbmRsZXJUeXBlKTogdm9pZCB7XG4gICAgdGhpcy5fb3NjUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhoYW5kbGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRFcnJvckhhbmRsZXIoY2FsbGJhY2s6IChzdGF0ZTogSVBhcnNpbmdTdGF0ZSkgPT4gSVBhcnNpbmdTdGF0ZSk6IHZvaWQge1xuICAgIHRoaXMuX2Vycm9ySGFuZGxlciA9IGNhbGxiYWNrO1xuICB9XG4gIHB1YmxpYyBjbGVhckVycm9ySGFuZGxlcigpOiB2b2lkIHtcbiAgICB0aGlzLl9lcnJvckhhbmRsZXIgPSB0aGlzLl9lcnJvckhhbmRsZXJGYjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBwYXJzZXIgdG8gaW5pdGlhbCB2YWx1ZXMuXG4gICAqXG4gICAqIFRoaXMgY2FuIGFsc28gYmUgdXNlZCB0byBsaWZ0IHRoZSBpbXByb3BlciBjb250aW51YXRpb24gZXJyb3IgY29uZGl0aW9uXG4gICAqIHdoZW4gZGVhbGluZyB3aXRoIGFzeW5jIGhhbmRsZXJzLiBVc2UgdGhpcyBvbmx5IGFzIGEgbGFzdCByZXNvcnQgdG8gc2lsZW5jZVxuICAgKiB0aGF0IGVycm9yIHdoZW4gdGhlIHRlcm1pbmFsIGhhcyBubyBwZW5kaW5nIGRhdGEgdG8gYmUgcHJvY2Vzc2VkLiBOb3RlIHRoYXRcbiAgICogdGhlIGludGVycnVwdGVkIGFzeW5jIGhhbmRsZXIgbWlnaHQgY29udGludWUgaXRzIHdvcmsgaW4gdGhlIGZ1dHVyZSBtZXNzaW5nXG4gICAqIHVwIHRoZSB0ZXJtaW5hbCBzdGF0ZSBldmVuIGZ1cnRoZXIuXG4gICAqL1xuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJyZW50U3RhdGUgPSB0aGlzLmluaXRpYWxTdGF0ZTtcbiAgICB0aGlzLl9vc2NQYXJzZXIucmVzZXQoKTtcbiAgICB0aGlzLl9kY3NQYXJzZXIucmVzZXQoKTtcbiAgICB0aGlzLl9wYXJhbXMucmVzZXQoKTtcbiAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgIHRoaXMuX2NvbGxlY3QgPSAwO1xuICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAvLyBhYm9ydCBwZW5kaW5nIGNvbnRpbnVhdGlvbiBmcm9tIGFzeW5jIGhhbmRsZXJcbiAgICAvLyBIZXJlIHRoZSBSRVNFVCB0eXBlIGluZGljYXRlcywgdGhhdCB0aGUgbmV4dCBwYXJzZSBjYWxsIHdpbGxcbiAgICAvLyBpZ25vcmUgYW55IHNhdmVkIHN0YWNrLCBpbnN0ZWFkIGNvbnRpbnVlcyBzeW5jIHdpdGggbmV4dCBjb2RlcG9pbnQgZnJvbSBHUk9VTkRcbiAgICBpZiAodGhpcy5fcGFyc2VTdGFjay5zdGF0ZSAhPT0gUGFyc2VyU3RhY2tUeXBlLk5PTkUpIHtcbiAgICAgIHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPSBQYXJzZXJTdGFja1R5cGUuUkVTRVQ7XG4gICAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzID0gW107IC8vIGFsc28gcmVsZWFzZSBoYW5kbGVycyByZWZcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXN5bmMgcGFyc2Ugc3VwcG9ydC5cbiAgICovXG4gIHByb3RlY3RlZCBfcHJlc2VydmVTdGFjayhcbiAgICBzdGF0ZTogUGFyc2VyU3RhY2tUeXBlLFxuICAgIGhhbmRsZXJzOiBSZXN1bWFibGVIYW5kbGVyc1R5cGUsXG4gICAgaGFuZGxlclBvczogbnVtYmVyLFxuICAgIHRyYW5zaXRpb246IG51bWJlcixcbiAgICBjaHVua1BvczogbnVtYmVyXG4gICk6IHZvaWQge1xuICAgIHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPSBzdGF0ZTtcbiAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zID0gaGFuZGxlclBvcztcbiAgICB0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MgPSBjaHVua1BvcztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBVVEYzMiBjb2RlcG9pbnRzIGluIGBkYXRhYCB1cCB0byBgbGVuZ3RoYC5cbiAgICpcbiAgICogTm90ZTogRm9yIHNldmVyYWwgYWN0aW9ucyB3aXRoIGhpZ2ggZGF0YSBsb2FkIHRoZSBwYXJzaW5nIGlzIG9wdGltaXplZFxuICAgKiBieSB1c2luZyBsb2NhbCByZWFkIGFoZWFkIGxvb3BzIHdpdGggaGFyZGNvZGVkIGNvbmRpdGlvbnMgdG9cbiAgICogYXZvaWQgY29zdGx5IHRhYmxlIGxvb2t1cHMuIE1ha2Ugc3VyZSB0aGF0IGFueSBjaGFuZ2Ugb2YgdGFibGUgdmFsdWVzXG4gICAqIHdpbGwgYmUgcmVmbGVjdGVkIGluIHRoZSBsb29wIGNvbmRpdGlvbnMgYXMgd2VsbCBhbmQgdmljZSB2ZXJzYS5cbiAgICogQWZmZWN0ZWQgc3RhdGVzL2FjdGlvbnM6XG4gICAqIC0gR1JPVU5EOlBSSU5UXG4gICAqIC0gQ1NJX1BBUkFNOlBBUkFNXG4gICAqIC0gRENTX1BBUkFNOlBBUkFNXG4gICAqIC0gT1NDX1NUUklORzpPU0NfUFVUXG4gICAqIC0gRENTX1BBU1NUSFJPVUdIOkRDU19QVVRcbiAgICpcbiAgICogTm90ZSBvbiBhc3luY2hyb25vdXMgaGFuZGxlciBzdXBwb3J0OlxuICAgKiBBbnkgaGFuZGxlciByZXR1cm5pbmcgYSBwcm9taXNlIHdpbGwgYmUgdHJlYXRlZCBhcyBhc3luY2hyb25vdXMuXG4gICAqIFRvIGtlZXAgdGhlIGluLWJhbmQgYmxvY2tpbmcgd29ya2luZyBmb3IgYXN5bmMgaGFuZGxlcnMsIGBwYXJzZWAgcGF1c2VzIGV4ZWN1dGlvbixcbiAgICogY3JlYXRlcyBhIHN0YWNrIHNhdmUgYW5kIHJldHVybnMgdGhlIHByb21pc2UgdG8gdGhlIGNhbGxlci5cbiAgICogRm9yIHByb3BlciBjb250aW51YXRpb24gb2YgdGhlIHBhdXNlZCBzdGF0ZSBpdCBpcyBpbXBvcnRhbnRcbiAgICogdG8gYXdhaXQgdGhlIHByb21pc2UgcmVzb2x2aW5nLiBPbiByZXNvbHZlIHRoZSBwYXJzZSBtdXN0IGJlIHJlcGVhdGVkXG4gICAqIHdpdGggdGhlIHNhbWUgY2h1bmsgb2YgZGF0YSBhbmQgdGhlIHJlc29sdmVkIHZhbHVlIGluIGBwcm9taXNlUmVzdWx0YFxuICAgKiB1bnRpbCBubyBwcm9taXNlIGlzIHJldHVybmVkLlxuICAgKlxuICAgKiBJbXBvcnRhbnQ6IFdpdGggb25seSBzeW5jIGhhbmRsZXJzIGRlZmluZWQsIHBhcnNpbmcgaXMgY29tcGxldGVseSBzeW5jaHJvbm91cyBhcyB3ZWxsLlxuICAgKiBBcyBzb29uIGFzIGFuIGFzeW5jIGhhbmRsZXIgaXMgaW52b2x2ZWQsIHN5bmNocm9ub3VzIHBhcnNpbmcgaXMgbm90IHBvc3NpYmxlIGFueW1vcmUuXG4gICAqXG4gICAqIEJvaWxlcnBsYXRlIGZvciBwcm9wZXIgcGFyc2luZyBvZiBtdWx0aXBsZSBjaHVua3Mgd2l0aCBhc3luYyBoYW5kbGVyczpcbiAgICpcbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiBhc3luYyBmdW5jdGlvbiBwYXJzZU11bHRpcGxlQ2h1bmtzKGNodW5rczogVWludDMyQXJyYXlbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgKiAgIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAqICAgICBsZXQgcmVzdWx0OiB2b2lkIHwgUHJvbWlzZTxib29sZWFuPjtcbiAgICogICAgIGxldCBwcmV2OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICAgKiAgICAgd2hpbGUgKHJlc3VsdCA9IHBhcnNlci5wYXJzZShjaHVuaywgY2h1bmsubGVuZ3RoLCBwcmV2KSkge1xuICAgKiAgICAgICBwcmV2ID0gYXdhaXQgcmVzdWx0O1xuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogICAvLyBmaW5pc2hlZCBwYXJzaW5nIGFsbCBjaHVua3MuLi5cbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIHB1YmxpYyBwYXJzZShkYXRhOiBVaW50MzJBcnJheSwgbGVuZ3RoOiBudW1iZXIsIHByb21pc2VSZXN1bHQ/OiBib29sZWFuKTogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGxldCBjb2RlID0gMDtcbiAgICBsZXQgdHJhbnNpdGlvbiA9IDA7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBsZXQgaGFuZGxlclJlc3VsdDogdm9pZCB8IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+O1xuXG4gICAgLy8gcmVzdW1lIGZyb20gYXN5bmMgaGFuZGxlclxuICAgIGlmICh0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKSB7XG4gICAgICAvLyBhbGxvdyBzeW5jIHBhcnNlciByZXNldCBldmVuIGluIGNvbnRpbnVhdGlvbiBtb2RlXG4gICAgICAvLyBOb3RlOiBjYW4gYmUgdXNlZCB0byByZWNvdmVyIHBhcnNlciBmcm9tIGltcHJvcGVyIGNvbnRpbnVhdGlvbiBlcnJvciBiZWxvd1xuICAgICAgaWYgKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPT09IFBhcnNlclN0YWNrVHlwZS5SRVNFVCkge1xuICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlID0gUGFyc2VyU3RhY2tUeXBlLk5PTkU7XG4gICAgICAgIHN0YXJ0ID0gdGhpcy5fcGFyc2VTdGFjay5jaHVua1BvcyArIDE7IC8vIGNvbnRpbnVlIHdpdGggbmV4dCBjb2RlcG9pbnQgaW4gR1JPVU5EXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvbWlzZVJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPT09IFBhcnNlclN0YWNrVHlwZS5GQUlMKSB7XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogUmVqZWN0IGZ1cnRoZXIgcGFyc2luZyBvbiBpbXByb3BlciBjb250aW51YXRpb24gYWZ0ZXIgcGF1c2luZy4gVGhpcyBpcyBhIHJlYWxseSBiYWRcbiAgICAgICAgICAgKiBjb25kaXRpb24gd2l0aCBzY3Jld2VkIHVwIGV4ZWN1dGlvbiBvcmRlciBhbmQgcHJvbGx5IG1lc3NlZCB1cCB0ZXJtaW5hbCBzdGF0ZSxcbiAgICAgICAgICAgKiB0aGVyZWZvcmUgd2UgZXhpdCBoYXJkIHdpdGggYW4gZXhjZXB0aW9uIGFuZCByZWplY3QgYW55IGZ1cnRoZXIgcGFyc2luZy5cbiAgICAgICAgICAgKlxuICAgICAgICAgICAqIE5vdGU6IFdpdGggYFRlcm1pbmFsLndyaXRlYCB1c2FnZSB0aGlzIGV4Y2VwdGlvbiBzaG91bGQgbmV2ZXIgb2NjdXIsIGFzIHRoZSB0b3AgbGV2ZWxcbiAgICAgICAgICAgKiBjYWxscyBhcmUgZ3VhcmFudGVlZCB0byBoYW5kbGUgYXN5bmMgY29uZGl0aW9ucyBwcm9wZXJseS4gSWYgeW91IGV2ZXIgZW5jb3VudGVyIHRoaXNcbiAgICAgICAgICAgKiBleGNlcHRpb24gaW4geW91ciB0ZXJtaW5hbCBpbnRlZ3JhdGlvbiBpdCBpbmRpY2F0ZXMsIHRoYXQgeW91IGluamVjdGVkIGRhdGEgY2h1bmtzIHRvXG4gICAgICAgICAgICogYElucHV0SGFuZGxlci5wYXJzZWAgb3IgYEVzY2FwZVNlcXVlbmNlUGFyc2VyLnBhcnNlYCBzeW5jaHJvbm91c2x5IHdpdGhvdXQgd2FpdGluZyBmb3JcbiAgICAgICAgICAgKiBjb250aW51YXRpb24gb2YgYSBydW5uaW5nIGFzeW5jIGhhbmRsZXIuXG4gICAgICAgICAgICpcbiAgICAgICAgICAgKiBJdCBpcyBwb3NzaWJsZSB0byBnZXQgcmlkIG9mIHRoaXMgZXJyb3IgYnkgY2FsbGluZyBgcmVzZXRgLiBCdXQgZG9udCByZWx5IG9uIHRoYXQsIGFzXG4gICAgICAgICAgICogdGhlIHBlbmRpbmcgYXN5bmMgaGFuZGxlciBzdGlsbCBtaWdodCBtZXNzIHVwIHRoZSB0ZXJtaW5hbCBsYXRlci4gSW5zdGVhZCBmaXggdGhlXG4gICAgICAgICAgICogZmF1bHR5IGFzeW5jIGhhbmRsaW5nLCBzbyB0aGlzIGVycm9yIHdpbGwgbm90IGJlIHRocm93biBhbnltb3JlLlxuICAgICAgICAgICAqL1xuICAgICAgICAgIHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPSBQYXJzZXJTdGFja1R5cGUuRkFJTDtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ltcHJvcGVyIGNvbnRpbnVhdGlvbiBkdWUgdG8gcHJldmlvdXMgYXN5bmMgaGFuZGxlciwgZ2l2aW5nIHVwIHBhcnNpbmcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHdlIGhhdmUgdG8gcmVzdW1lIHRoZSBvbGQgaGFuZGxlciBsb29wIGlmOlxuICAgICAgICAvLyAtIHJldHVybiB2YWx1ZSBvZiB0aGUgcHJvbWlzZSB3YXMgYGZhbHNlYFxuICAgICAgICAvLyAtIGhhbmRsZXJzIGFyZSBub3QgZXhoYXVzdGVkIHlldFxuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM7XG4gICAgICAgIGxldCBoYW5kbGVyUG9zID0gdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zIC0gMTtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKSB7XG4gICAgICAgICAgY2FzZSBQYXJzZXJTdGFja1R5cGUuQ1NJOlxuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQgPT09IGZhbHNlICYmIGhhbmRsZXJQb3MgPiAtMSkge1xuICAgICAgICAgICAgICBmb3IgKDsgaGFuZGxlclBvcyA+PSAwOyBoYW5kbGVyUG9zLS0pIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gKGhhbmRsZXJzIGFzIENzaUhhbmRsZXJUeXBlW10pW2hhbmRsZXJQb3NdKHRoaXMuX3BhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXJSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcyA9IGhhbmRsZXJQb3M7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgUGFyc2VyU3RhY2tUeXBlLkVTQzpcbiAgICAgICAgICAgIGlmIChwcm9taXNlUmVzdWx0ID09PSBmYWxzZSAmJiBoYW5kbGVyUG9zID4gLTEpIHtcbiAgICAgICAgICAgICAgZm9yICg7IGhhbmRsZXJQb3MgPj0gMDsgaGFuZGxlclBvcy0tKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IChoYW5kbGVycyBhcyBFc2NIYW5kbGVyVHlwZVtdKVtoYW5kbGVyUG9zXSgpO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhhbmRsZXJSZXN1bHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MgPSBoYW5kbGVyUG9zO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXJSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzID0gW107XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFBhcnNlclN0YWNrVHlwZS5EQ1M6XG4gICAgICAgICAgICBjb2RlID0gZGF0YVt0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zXTtcbiAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9kY3NQYXJzZXIudW5ob29rKGNvZGUgIT09IDB4MTggJiYgY29kZSAhPT0gMHgxYSwgcHJvbWlzZVJlc3VsdCk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCkge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuRVNDQVBFO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFBhcnNlclN0YWNrVHlwZS5PU0M6XG4gICAgICAgICAgICBjb2RlID0gZGF0YVt0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zXTtcbiAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSB0aGlzLl9vc2NQYXJzZXIuZW5kKGNvZGUgIT09IDB4MTggJiYgY29kZSAhPT0gMHgxYSwgcHJvbWlzZVJlc3VsdCk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCkge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlclJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb2RlID09PSAweDFiKSB0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb24gfD0gUGFyc2VyU3RhdGUuRVNDQVBFO1xuICAgICAgICAgICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgICB0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7IC8vIFpETVxuICAgICAgICAgICAgdGhpcy5fY29sbGVjdCA9IDA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBjbGVhbnVwIGJlZm9yZSBjb250aW51aW5nIHdpdGggdGhlIG1haW4gc3luYyBsb29wXG4gICAgICAgIHRoaXMuX3BhcnNlU3RhY2suc3RhdGUgPSBQYXJzZXJTdGFja1R5cGUuTk9ORTtcbiAgICAgICAgc3RhcnQgPSB0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zICsgMTtcbiAgICAgICAgdGhpcy5wcmVjZWRpbmdKb2luU3RhdGUgPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbiAmIFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fU1RBVEVfTUFTSztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb250aW51ZSB3aXRoIG1haW4gc3luYyBsb29wXG5cbiAgICAvLyBwcm9jZXNzIGlucHV0IHN0cmluZ1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgICBjb2RlID0gZGF0YVtpXTtcblxuICAgICAgLy8gbm9ybWFsIHRyYW5zaXRpb24gJiBhY3Rpb24gbG9va3VwXG4gICAgICB0cmFuc2l0aW9uID0gdGhpcy5fdHJhbnNpdGlvbnMudGFibGVbdGhpcy5jdXJyZW50U3RhdGUgPDwgVGFibGVBY2Nlc3MuSU5ERVhfU1RBVEVfU0hJRlQgfCAoY29kZSA8IDB4YTAgPyBjb2RlIDogTk9OX0FTQ0lJX1BSSU5UQUJMRSldO1xuICAgICAgc3dpdGNoICh0cmFuc2l0aW9uID4+IFRhYmxlQWNjZXNzLlRSQU5TSVRJT05fQUNUSU9OX1NISUZUKSB7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLlBSSU5UOlxuICAgICAgICAgIC8vIHJlYWQgYWhlYWQgd2l0aCBsb29wIHVucm9sbGluZ1xuICAgICAgICAgIC8vIE5vdGU6IDB4MjAgKFNQKSBpcyBpbmNsdWRlZCwgMHg3RiAoREVMKSBpcyBleGNsdWRlZFxuICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgOyArK2opIHtcbiAgICAgICAgICAgIGlmIChqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgrK2ogPj0gbGVuZ3RoIHx8IChjb2RlID0gZGF0YVtqXSkgPCAweDIwIHx8IChjb2RlID4gMHg3ZSAmJiBjb2RlIDwgTk9OX0FTQ0lJX1BSSU5UQUJMRSkpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJpbnRIYW5kbGVyKGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCsraiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdlICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmludEhhbmRsZXIoZGF0YSwgaSwgaik7XG4gICAgICAgICAgICAgIGkgPSBqIC0gMTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKytqID49IGxlbmd0aCB8fCAoY29kZSA9IGRhdGFbal0pIDwgMHgyMCB8fCAoY29kZSA+IDB4N2UgJiYgY29kZSA8IE5PTl9BU0NJSV9QUklOVEFCTEUpKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ByaW50SGFuZGxlcihkYXRhLCBpLCBqKTtcbiAgICAgICAgICAgICAgaSA9IGogLSAxO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkVYRUNVVEU6XG4gICAgICAgICAgaWYgKHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tjb2RlXSkgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2NvZGVdKCk7XG4gICAgICAgICAgZWxzZSB0aGlzLl9leGVjdXRlSGFuZGxlckZiKGNvZGUpO1xuICAgICAgICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uSUdOT1JFOlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5FUlJPUjpcbiAgICAgICAgICBjb25zdCBpbmplY3Q6IElQYXJzaW5nU3RhdGUgPSB0aGlzLl9lcnJvckhhbmRsZXIoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBpLFxuICAgICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgICBjdXJyZW50U3RhdGU6IHRoaXMuY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICBjb2xsZWN0OiB0aGlzLl9jb2xsZWN0LFxuICAgICAgICAgICAgICBwYXJhbXM6IHRoaXMuX3BhcmFtcyxcbiAgICAgICAgICAgICAgYWJvcnQ6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoaW5qZWN0LmFib3J0KSByZXR1cm47XG4gICAgICAgICAgLy8gaW5qZWN0IHZhbHVlczogY3VycmVudGx5IG5vdCBpbXBsZW1lbnRlZFxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFBhcnNlckFjdGlvbi5DU0lfRElTUEFUQ0g6XG4gICAgICAgICAgLy8gVHJpZ2dlciBDU0kgSGFuZGxlclxuICAgICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5fY29sbGVjdCA8PCA4IHwgY29kZV07XG4gICAgICAgICAgbGV0IGogPSBoYW5kbGVycyA/IGhhbmRsZXJzLmxlbmd0aCAtIDEgOiAtMTtcbiAgICAgICAgICBmb3IgKDsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgIC8vIHRydWUgbWVhbnMgc3VjY2VzcyBhbmQgdG8gc3RvcCBidWJibGluZ1xuICAgICAgICAgICAgLy8gYSBwcm9taXNlIGluZGljYXRlcyBhbiBhc3luYyBoYW5kbGVyIHRoYXQgbmVlZHMgdG8gZmluaXNoIGJlZm9yZSBwcm9ncmVzc2luZ1xuICAgICAgICAgICAgaGFuZGxlclJlc3VsdCA9IGhhbmRsZXJzW2pdKHRoaXMuX3BhcmFtcyk7XG4gICAgICAgICAgICBpZiAoaGFuZGxlclJlc3VsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFuZGxlclJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhQYXJzZXJTdGFja1R5cGUuQ1NJLCBoYW5kbGVycywgaiwgdHJhbnNpdGlvbiwgaSk7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2NzaUhhbmRsZXJGYih0aGlzLl9jb2xsZWN0IDw8IDggfCBjb2RlLCB0aGlzLl9wYXJhbXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZSA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLlBBUkFNOlxuICAgICAgICAgIC8vIGlubmVyIGxvb3A6IGRpZ2l0cyAoMHgzMCAtIDB4MzkpIGFuZCA7ICgweDNiKSBhbmQgOiAoMHgzYSlcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAweDNiOlxuICAgICAgICAgICAgICAgIHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTsgIC8vIFpETVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIDB4M2E6XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFN1YlBhcmFtKC0xKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgZGVmYXVsdDogIC8vIDB4MzAgLSAweDM5XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZERpZ2l0KGNvZGUgLSA0OCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSB3aGlsZSAoKytpIDwgbGVuZ3RoICYmIChjb2RlID0gZGF0YVtpXSkgPiAweDJmICYmIGNvZGUgPCAweDNjKTtcbiAgICAgICAgICBpLS07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkNPTExFQ1Q6XG4gICAgICAgICAgdGhpcy5fY29sbGVjdCA8PD0gODtcbiAgICAgICAgICB0aGlzLl9jb2xsZWN0IHw9IGNvZGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLkVTQ19ESVNQQVRDSDpcbiAgICAgICAgICBjb25zdCBoYW5kbGVyc0VzYyA9IHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2NvbGxlY3QgPDwgOCB8IGNvZGVdO1xuICAgICAgICAgIGxldCBqaiA9IGhhbmRsZXJzRXNjID8gaGFuZGxlcnNFc2MubGVuZ3RoIC0gMSA6IC0xO1xuICAgICAgICAgIGZvciAoOyBqaiA+PSAwOyBqai0tKSB7XG4gICAgICAgICAgICAvLyB0cnVlIG1lYW5zIHN1Y2Nlc3MgYW5kIHRvIHN0b3AgYnViYmxpbmdcbiAgICAgICAgICAgIC8vIGEgcHJvbWlzZSBpbmRpY2F0ZXMgYW4gYXN5bmMgaGFuZGxlciB0aGF0IG5lZWRzIHRvIGZpbmlzaCBiZWZvcmUgcHJvZ3Jlc3NpbmdcbiAgICAgICAgICAgIGhhbmRsZXJSZXN1bHQgPSBoYW5kbGVyc0VzY1tqal0oKTtcbiAgICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChoYW5kbGVyUmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKFBhcnNlclN0YWNrVHlwZS5FU0MsIGhhbmRsZXJzRXNjLCBqaiwgdHJhbnNpdGlvbiwgaSk7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoamogPCAwKSB7XG4gICAgICAgICAgICB0aGlzLl9lc2NIYW5kbGVyRmIodGhpcy5fY29sbGVjdCA8PCA4IHwgY29kZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHJlY2VkaW5nSm9pblN0YXRlID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uQ0xFQVI6XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRENTX0hPT0s6XG4gICAgICAgICAgdGhpcy5fZGNzUGFyc2VyLmhvb2sodGhpcy5fY29sbGVjdCA8PCA4IHwgY29kZSwgdGhpcy5fcGFyYW1zKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRENTX1BVVDpcbiAgICAgICAgICAvLyBpbm5lciBsb29wIC0gZXhpdCBEQ1NfUFVUOiAweDE4LCAweDFhLCAweDFiLCAweDdmLCAweDgwIC0gMHg5ZlxuICAgICAgICAgIC8vIHVuaG9vayB0cmlnZ2VyZWQgYnk6IDB4MWIsIDB4OWMgKHN1Y2Nlc3MpIGFuZCAweDE4LCAweDFhIChhYm9ydClcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgKytqKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA9PT0gMHgxOCB8fCBjb2RlID09PSAweDFhIHx8IGNvZGUgPT09IDB4MWIgfHwgKGNvZGUgPiAweDdmICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9kY3NQYXJzZXIucHV0KGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uRENTX1VOSE9PSzpcbiAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fZGNzUGFyc2VyLnVuaG9vayhjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEpO1xuICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKFBhcnNlclN0YWNrVHlwZS5EQ1MsIFtdLCAwLCB0cmFuc2l0aW9uLCBpKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZSA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUGFyc2VyQWN0aW9uLk9TQ19TVEFSVDpcbiAgICAgICAgICB0aGlzLl9vc2NQYXJzZXIuc3RhcnQoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uT1NDX1BVVDpcbiAgICAgICAgICAvLyBpbm5lciBsb29wOiAweDIwIChTUCkgaW5jbHVkZWQsIDB4N0YgKERFTCkgaW5jbHVkZWRcbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IDsgaisrKSB7XG4gICAgICAgICAgICBpZiAoaiA+PSBsZW5ndGggfHwgKGNvZGUgPSBkYXRhW2pdKSA8IDB4MjAgfHwgKGNvZGUgPiAweDdmICYmIGNvZGUgPCBOT05fQVNDSUlfUFJJTlRBQkxFKSkge1xuICAgICAgICAgICAgICB0aGlzLl9vc2NQYXJzZXIucHV0KGRhdGEsIGksIGopO1xuICAgICAgICAgICAgICBpID0gaiAtIDE7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBQYXJzZXJBY3Rpb24uT1NDX0VORDpcbiAgICAgICAgICBoYW5kbGVyUmVzdWx0ID0gdGhpcy5fb3NjUGFyc2VyLmVuZChjb2RlICE9PSAweDE4ICYmIGNvZGUgIT09IDB4MWEpO1xuICAgICAgICAgIGlmIChoYW5kbGVyUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKFBhcnNlclN0YWNrVHlwZS5PU0MsIFtdLCAwLCB0cmFuc2l0aW9uLCBpKTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29kZSA9PT0gMHgxYikgdHJhbnNpdGlvbiB8PSBQYXJzZXJTdGF0ZS5FU0NBUEU7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnJlc2V0KCk7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApOyAvLyBaRE1cbiAgICAgICAgICB0aGlzLl9jb2xsZWN0ID0gMDtcbiAgICAgICAgICB0aGlzLnByZWNlZGluZ0pvaW5TdGF0ZSA9IDA7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRyYW5zaXRpb24gJiBUYWJsZUFjY2Vzcy5UUkFOU0lUSU9OX1NUQVRFX01BU0s7XG4gICAgfVxuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5cbi8vICdyZ2I6JyBydWxlIC0gbWF0Y2hpbmc6IHIvZy9iIHwgcnIvZ2cvYmIgfCBycnIvZ2dnL2JiYiB8IHJycnIvZ2dnZy9iYmJiIChoZXggZGlnaXRzKVxuY29uc3QgUkdCX1JFWCA9IC9eKFtcXGRhLWZdKVxcLyhbXFxkYS1mXSlcXC8oW1xcZGEtZl0pJHxeKFtcXGRhLWZdezJ9KVxcLyhbXFxkYS1mXXsyfSlcXC8oW1xcZGEtZl17Mn0pJHxeKFtcXGRhLWZdezN9KVxcLyhbXFxkYS1mXXszfSlcXC8oW1xcZGEtZl17M30pJHxeKFtcXGRhLWZdezR9KVxcLyhbXFxkYS1mXXs0fSlcXC8oW1xcZGEtZl17NH0pJC87XG4vLyAnIy4uLicgcnVsZSAtIG1hdGNoaW5nIGFueSBoZXggZGlnaXRzXG5jb25zdCBIQVNIX1JFWCA9IC9eW1xcZGEtZl0rJC87XG5cbi8qKlxuICogUGFyc2UgY29sb3Igc3BlYyB0byBSR0IgdmFsdWVzICg4IGJpdCBwZXIgY2hhbm5lbCkuXG4gKiBTZWUgYG1hbiB4cGFyc2Vjb2xvcmAgZm9yIGRldGFpbHMgYWJvdXQgY2VydGFpbiBmb3JtYXQgc3BlY2lmaWNhdGlvbnMuXG4gKlxuICogU3VwcG9ydGVkIGZvcm1hdHM6XG4gKiAtIHJnYjo8cmVkPi88Z3JlZW4+LzxibHVlPiB3aXRoIDxyZWQ+LCA8Z3JlZW4+LCA8Ymx1ZT4gaW4gaCB8IGhoIHwgaGhoIHwgaGhoaFxuICogLSAjUkdCLCAjUlJHR0JCLCAjUlJSR0dHQkJCLCAjUlJSUkdHR0dCQkJCXG4gKlxuICogQWxsIG90aGVyIGZvcm1hdHMgbGlrZSByZ2JpOiBvciBkZXZpY2UtaW5kZXBlbmRlbnQgc3RyaW5nIHNwZWNpZmljYXRpb25zXG4gKiB3aXRoIGZsb2F0IG51bWJlcmluZyBhcmUgbm90IHN1cHBvcnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ29sb3IoZGF0YTogc3RyaW5nKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHwgdW5kZWZpbmVkIHtcbiAgaWYgKCFkYXRhKSByZXR1cm47XG4gIC8vIGFsc28gaGFuZGxlIHVwcGVyY2FzZXNcbiAgbGV0IGxvdyA9IGRhdGEudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGxvdy5pbmRleE9mKCdyZ2I6JykgPT09IDApIHtcbiAgICAvLyAncmdiOicgc3BlY2lmaWVyXG4gICAgbG93ID0gbG93LnNsaWNlKDQpO1xuICAgIGNvbnN0IG0gPSBSR0JfUkVYLmV4ZWMobG93KTtcbiAgICBpZiAobSkge1xuICAgICAgY29uc3QgYmFzZSA9IG1bMV0gPyAxNSA6IG1bNF0gPyAyNTUgOiBtWzddID8gNDA5NSA6IDY1NTM1O1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgTWF0aC5yb3VuZChwYXJzZUludChtWzFdIHx8IG1bNF0gfHwgbVs3XSB8fCBtWzEwXSwgMTYpIC8gYmFzZSAqIDI1NSksXG4gICAgICAgIE1hdGgucm91bmQocGFyc2VJbnQobVsyXSB8fCBtWzVdIHx8IG1bOF0gfHwgbVsxMV0sIDE2KSAvIGJhc2UgKiAyNTUpLFxuICAgICAgICBNYXRoLnJvdW5kKHBhcnNlSW50KG1bM10gfHwgbVs2XSB8fCBtWzldIHx8IG1bMTJdLCAxNikgLyBiYXNlICogMjU1KVxuICAgICAgXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAobG93LmluZGV4T2YoJyMnKSA9PT0gMCkge1xuICAgIC8vICcjJyBzcGVjaWZpZXJcbiAgICBsb3cgPSBsb3cuc2xpY2UoMSk7XG4gICAgaWYgKEhBU0hfUkVYLmV4ZWMobG93KSAmJiBbMywgNiwgOSwgMTJdLmluY2x1ZGVzKGxvdy5sZW5ndGgpKSB7XG4gICAgICBjb25zdCBhZHYgPSBsb3cubGVuZ3RoIC8gMztcbiAgICAgIGNvbnN0IHJlc3VsdDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzAsIDAsIDBdO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyArK2kpIHtcbiAgICAgICAgY29uc3QgYyA9IHBhcnNlSW50KGxvdy5zbGljZShhZHYgKiBpLCBhZHYgKiBpICsgYWR2KSwgMTYpO1xuICAgICAgICByZXN1bHRbaV0gPSBhZHYgPT09IDEgPyBjIDw8IDQgOiBhZHYgPT09IDIgPyBjIDogYWR2ID09PSAzID8gYyA+PiA0IDogYyA+PiA4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICAvLyBOYW1lZCBjb2xvcnMgYXJlIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIGR1ZSB0byB0aGUgbGFyZ2UgYWRkaXRpb24gdG8gdGhlIHh0ZXJtLmpzIGJ1bmRsZSBzaXplXG4gIC8vIHRoZXkgd291bGQgYWRkLiBJbiBvcmRlciB0byBzdXBwb3J0IG5hbWVkIGNvbG9ycywgd2Ugd291bGQgbmVlZCBzb21lIHdheSBvZiBvcHRpb25hbGx5IGxvYWRpbmdcbiAgLy8gYWRkaXRpb25hbCBwYXlsb2FkcyBzbyBzdGFydHVwL2Rvd25sb2FkIHRpbWUgaXMgbm90IGJsb2F0ZWQgKHNlZSAjMzUzMCkuXG59XG5cbi8vIHBhZCBoZXggb3V0cHV0IHRvIHJlcXVlc3RlZCBiaXQgd2lkdGhcbmZ1bmN0aW9uIHBhZChuOiBudW1iZXIsIGJpdHM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHMgPSBuLnRvU3RyaW5nKDE2KTtcbiAgY29uc3QgczIgPSBzLmxlbmd0aCA8IDIgPyAnMCcgKyBzIDogcztcbiAgc3dpdGNoIChiaXRzKSB7XG4gICAgY2FzZSA0OlxuICAgICAgcmV0dXJuIHNbMF07XG4gICAgY2FzZSA4OlxuICAgICAgcmV0dXJuIHMyO1xuICAgIGNhc2UgMTI6XG4gICAgICByZXR1cm4gKHMyICsgczIpLnNsaWNlKDAsIDMpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gczIgKyBzMjtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgYSBnaXZlbiBjb2xvciB0byByZ2I6Li4vLi4vLi4gc3RyaW5nIG9mIGBiaXRzYCBkZXB0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmdiU3RyaW5nKGNvbG9yOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGJpdHM6IG51bWJlciA9IDE2KTogc3RyaW5nIHtcbiAgY29uc3QgW3IsIGcsIGJdID0gY29sb3I7XG4gIHJldHVybiBgcmdiOiR7cGFkKHIsIGJpdHMpfS8ke3BhZChnLCBiaXRzKX0vJHtwYWQoYiwgYml0cyl9YDtcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSlcbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElJbnB1dEhhbmRsZXIsIElBdHRyaWJ1dGVEYXRhLCBJRGlzcG9zYWJsZSwgSVdpbmRvd09wdGlvbnMsIElDb2xvckV2ZW50LCBJUGFyc2VTdGFjaywgQ29sb3JJbmRleCwgQ29sb3JSZXF1ZXN0VHlwZSwgU3BlY2lhbENvbG9ySW5kZXggfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQzAsIEMxIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IENIQVJTRVRTLCBERUZBVUxUX0NIQVJTRVQgfSBmcm9tICdjb21tb24vZGF0YS9DaGFyc2V0cyc7XG5pbXBvcnQgeyBFc2NhcGVTZXF1ZW5jZVBhcnNlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRXNjYXBlU2VxdWVuY2VQYXJzZXInO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBTdHJpbmdUb1V0ZjMyLCBzdHJpbmdGcm9tQ29kZVBvaW50LCBVdGY4VG9VdGYzMiB9IGZyb20gJ2NvbW1vbi9pbnB1dC9UZXh0RGVjb2Rlcic7XG5pbXBvcnQgeyBCdWZmZXJMaW5lLCBERUZBVUxUX0FUVFJfREFUQSB9IGZyb20gJ2NvbW1vbi9idWZmZXIvQnVmZmVyTGluZSc7XG5pbXBvcnQgeyBJUGFyc2luZ1N0YXRlLCBJRXNjYXBlU2VxdWVuY2VQYXJzZXIsIElQYXJhbXMsIElGdW5jdGlvbklkZW50aWZpZXIgfSBmcm9tICdjb21tb24vcGFyc2VyL1R5cGVzJztcbmltcG9ydCB7IE5VTExfQ0VMTF9DT0RFLCBOVUxMX0NFTExfV0lEVEgsIEF0dHJpYnV0ZXMsIEZnRmxhZ3MsIEJnRmxhZ3MsIENvbnRlbnQsIFVuZGVybGluZVN0eWxlIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9Db25zdGFudHMnO1xuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IEF0dHJpYnV0ZURhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0F0dHJpYnV0ZURhdGEnO1xuaW1wb3J0IHsgSUNvcmVTZXJ2aWNlLCBJQnVmZmVyU2VydmljZSwgSU9wdGlvbnNTZXJ2aWNlLCBJTG9nU2VydmljZSwgSUNvcmVNb3VzZVNlcnZpY2UsIElDaGFyc2V0U2VydmljZSwgSVVuaWNvZGVTZXJ2aWNlLCBMb2dMZXZlbEVudW0sIElPc2NMaW5rU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBVbmljb2RlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Vbmljb2RlU2VydmljZSc7XG5pbXBvcnQgeyBPc2NIYW5kbGVyIH0gZnJvbSAnY29tbW9uL3BhcnNlci9Pc2NQYXJzZXInO1xuaW1wb3J0IHsgRGNzSGFuZGxlciB9IGZyb20gJ2NvbW1vbi9wYXJzZXIvRGNzUGFyc2VyJztcbmltcG9ydCB7IElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IHBhcnNlQ29sb3IgfSBmcm9tICdjb21tb24vaW5wdXQvWFBhcnNlQ29sb3InO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuLyoqXG4gKiBNYXAgY29sbGVjdCB0byBnbGV2ZWwuIFVzZWQgaW4gYHNlbGVjdENoYXJzZXRgLlxuICovXG5jb25zdCBHTEVWRUw6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7ICcoJzogMCwgJyknOiAxLCAnKic6IDIsICcrJzogMywgJy0nOiAxLCAnLic6IDIgfTtcblxuLyoqXG4gKiBWVCBjb21tYW5kcyBkb25lIGJ5IHRoZSBwYXJzZXIgLSBGSVhNRTogbW92ZSB0aGlzIHRvIHRoZSBwYXJzZXI/XG4gKi9cbi8vIEB2dDogI1kgICBFU0MgICBDU0kgICBcIkNvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlclwiICAgXCJFU0MgW1wiICAgXCJTdGFydCBvZiBhIENTSSBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIE9TQyAgIFwiT3BlcmF0aW5nIFN5c3RlbSBDb21tYW5kXCIgICAgICBcIkVTQyBdXCIgICBcIlN0YXJ0IG9mIGFuIE9TQyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEVTQyAgIERDUyAgIFwiRGV2aWNlIENvbnRyb2wgU3RyaW5nXCIgICAgICAgICBcIkVTQyBQXCIgICBcIlN0YXJ0IG9mIGEgRENTIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgRVNDICAgU1QgICAgXCJTdHJpbmcgVGVybWluYXRvclwiICAgICAgICAgICAgIFwiRVNDIFxcXCIgICBcIlRlcm1pbmF0b3IgdXNlZCBmb3Igc3RyaW5nIHR5cGUgc2VxdWVuY2VzLlwiXG4vLyBAdnQ6ICNZICAgRVNDICAgUE0gICAgXCJQcml2YWN5IE1lc3NhZ2VcIiAgICAgICAgICAgICAgIFwiRVNDIF5cIiAgIFwiU3RhcnQgb2YgYSBwcml2YWN5IG1lc3NhZ2UuXCJcbi8vIEB2dDogI1kgICBFU0MgICBBUEMgICBcIkFwcGxpY2F0aW9uIFByb2dyYW0gQ29tbWFuZFwiICAgXCJFU0MgX1wiICAgXCJTdGFydCBvZiBhbiBBUEMgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBDMSAgICBDU0kgICBcIkNvbnRyb2wgU2VxdWVuY2UgSW50cm9kdWNlclwiICAgXCJcXHg5QlwiICAgIFwiU3RhcnQgb2YgYSBDU0kgc2VxdWVuY2UuXCJcbi8vIEB2dDogI1kgICBDMSAgICBPU0MgICBcIk9wZXJhdGluZyBTeXN0ZW0gQ29tbWFuZFwiICAgICAgXCJcXHg5RFwiICAgIFwiU3RhcnQgb2YgYW4gT1NDIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgRENTICAgXCJEZXZpY2UgQ29udHJvbCBTdHJpbmdcIiAgICAgICAgIFwiXFx4OTBcIiAgICBcIlN0YXJ0IG9mIGEgRENTIHNlcXVlbmNlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgU1QgICAgXCJTdHJpbmcgVGVybWluYXRvclwiICAgICAgICAgICAgIFwiXFx4OUNcIiAgICBcIlRlcm1pbmF0b3IgdXNlZCBmb3Igc3RyaW5nIHR5cGUgc2VxdWVuY2VzLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgUE0gICAgXCJQcml2YWN5IE1lc3NhZ2VcIiAgICAgICAgICAgICAgIFwiXFx4OUVcIiAgICBcIlN0YXJ0IG9mIGEgcHJpdmFjeSBtZXNzYWdlLlwiXG4vLyBAdnQ6ICNZICAgQzEgICAgQVBDICAgXCJBcHBsaWNhdGlvbiBQcm9ncmFtIENvbW1hbmRcIiAgIFwiXFx4OUZcIiAgICBcIlN0YXJ0IG9mIGFuIEFQQyBzZXF1ZW5jZS5cIlxuLy8gQHZ0OiAjWSAgIEMwICAgIE5VTCAgIFwiTnVsbFwiICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxcMCwgXFx4MDBcIiAgXCJOVUwgaXMgaWdub3JlZC5cIlxuLy8gQHZ0OiAjWSAgIEMwICAgIEVTQyAgIFwiRXNjYXBlXCIgICAgICAgICAgICAgICAgICAgICAgICBcIlxcZSwgXFx4MUJcIiAgXCJTdGFydCBvZiBhIHNlcXVlbmNlLiBDYW5jZWxzIGFueSBvdGhlciBzZXF1ZW5jZS5cIlxuXG4vKipcbiAqIERvY3VtZW50IHh0ZXJtIFZUIGZlYXR1cmVzIGhlcmUgdGhhdCBhcmUgY3VycmVudGx5IHVuc3VwcG9ydGVkXG4gKi9cbi8vIEB2dDogI0VbU3VwcG9ydGVkIHZpYSBAeHRlcm0vYWRkb24taW1hZ2UuXSAgRENTICAgU0lYRUwgICAgICAgXCJTSVhFTCBHcmFwaGljc1wiICAgICAgICAgIFwiRENTIFBzIDsgUHMgOyBQcyA7IHEgXHRQdCBTVFwiICBcIkRyYXcgU0lYRUwgaW1hZ2UuXCJcbi8vIEB2dDogI04gIERDUyAgIERFQ1VESyAgICAgIFwiVXNlciBEZWZpbmVkIEtleXNcIiAgICAgICBcIkRDUyBQcyA7IFBzIFxcfCBQdCBTVFwiICAgICAgICAgICBcIkRlZmluaXRpb25zIGZvciB1c2VyLWRlZmluZWQga2V5cy5cIlxuLy8gQHZ0OiAjTiAgRENTICAgWFRHRVRUQ0FQICAgXCJSZXF1ZXN0IFRlcm1pbmZvIFN0cmluZ1wiIFwiRENTICsgcSBQdCBTVFwiICAgICAgICAgICAgICAgICBcIlJlcXVlc3QgVGVybWluZm8gU3RyaW5nLlwiXG4vLyBAdnQ6ICNOICBEQ1MgICBYVFNFVFRDQVAgICBcIlNldCBUZXJtaW5mbyBEYXRhXCIgICAgICAgXCJEQ1MgKyBwIFB0IFNUXCIgICAgICAgICAgICAgICAgIFwiU2V0IFRlcm1pbmZvIERhdGEuXCJcbi8vIEB2dDogI04gIE9TQyAgIDEgICAgICAgICAgIFwiU2V0IEljb24gTmFtZVwiICAgICAgICAgICBcIk9TQyAxIDsgUHQgQkVMXCIgICAgICAgICAgICAgICAgXCJTZXQgaWNvbiBuYW1lLlwiXG5cbi8qKlxuICogTWF4IGxlbmd0aCBvZiB0aGUgVVRGMzIgaW5wdXQgYnVmZmVyLiBSZWFsIG1lbW9yeSBjb25zdW1wdGlvbiBpcyA0IHRpbWVzIGhpZ2hlci5cbiAqL1xuY29uc3QgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCA9IDEzMTA3MjtcblxuLyoqXG4gKiBMaW1pdCBsZW5ndGggb2YgdGl0bGUgYW5kIGljb24gbmFtZSBzdGFja3MuXG4gKi9cbmNvbnN0IFNUQUNLX0xJTUlUID0gMTA7XG5cbi8vIG1hcCBwYXJhbXMgdG8gd2luZG93IG9wdGlvblxuZnVuY3Rpb24gcGFyYW1Ub1dpbmRvd09wdGlvbihuOiBudW1iZXIsIG9wdHM6IElXaW5kb3dPcHRpb25zKTogYm9vbGVhbiB7XG4gIGlmIChuID4gMjQpIHtcbiAgICByZXR1cm4gb3B0cy5zZXRXaW5MaW5lcyB8fCBmYWxzZTtcbiAgfVxuICBzd2l0Y2ggKG4pIHtcbiAgICBjYXNlIDE6IHJldHVybiAhIW9wdHMucmVzdG9yZVdpbjtcbiAgICBjYXNlIDI6IHJldHVybiAhIW9wdHMubWluaW1pemVXaW47XG4gICAgY2FzZSAzOiByZXR1cm4gISFvcHRzLnNldFdpblBvc2l0aW9uO1xuICAgIGNhc2UgNDogcmV0dXJuICEhb3B0cy5zZXRXaW5TaXplUGl4ZWxzO1xuICAgIGNhc2UgNTogcmV0dXJuICEhb3B0cy5yYWlzZVdpbjtcbiAgICBjYXNlIDY6IHJldHVybiAhIW9wdHMubG93ZXJXaW47XG4gICAgY2FzZSA3OiByZXR1cm4gISFvcHRzLnJlZnJlc2hXaW47XG4gICAgY2FzZSA4OiByZXR1cm4gISFvcHRzLnNldFdpblNpemVDaGFycztcbiAgICBjYXNlIDk6IHJldHVybiAhIW9wdHMubWF4aW1pemVXaW47XG4gICAgY2FzZSAxMDogcmV0dXJuICEhb3B0cy5mdWxsc2NyZWVuV2luO1xuICAgIGNhc2UgMTE6IHJldHVybiAhIW9wdHMuZ2V0V2luU3RhdGU7XG4gICAgY2FzZSAxMzogcmV0dXJuICEhb3B0cy5nZXRXaW5Qb3NpdGlvbjtcbiAgICBjYXNlIDE0OiByZXR1cm4gISFvcHRzLmdldFdpblNpemVQaXhlbHM7XG4gICAgY2FzZSAxNTogcmV0dXJuICEhb3B0cy5nZXRTY3JlZW5TaXplUGl4ZWxzO1xuICAgIGNhc2UgMTY6IHJldHVybiAhIW9wdHMuZ2V0Q2VsbFNpemVQaXhlbHM7XG4gICAgY2FzZSAxODogcmV0dXJuICEhb3B0cy5nZXRXaW5TaXplQ2hhcnM7XG4gICAgY2FzZSAxOTogcmV0dXJuICEhb3B0cy5nZXRTY3JlZW5TaXplQ2hhcnM7XG4gICAgY2FzZSAyMDogcmV0dXJuICEhb3B0cy5nZXRJY29uVGl0bGU7XG4gICAgY2FzZSAyMTogcmV0dXJuICEhb3B0cy5nZXRXaW5UaXRsZTtcbiAgICBjYXNlIDIyOiByZXR1cm4gISFvcHRzLnB1c2hUaXRsZTtcbiAgICBjYXNlIDIzOiByZXR1cm4gISFvcHRzLnBvcFRpdGxlO1xuICAgIGNhc2UgMjQ6IHJldHVybiAhIW9wdHMuc2V0V2luTGluZXM7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZW51bSBXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUge1xuICBHRVRfV0lOX1NJWkVfUElYRUxTID0gMCxcbiAgR0VUX0NFTExfU0laRV9QSVhFTFMgPSAxXG59XG5cbi8vIGNyZWF0ZSBhIHdhcm5pbmcgbG9nIGlmIGFuIGFzeW5jIGhhbmRsZXIgdGFrZXMgbG9uZ2VyIHRoYW4gdGhlIGxpbWl0IChpbiBtcylcbmNvbnN0IFNMT1dfQVNZTkNfTElNSVQgPSA1MDAwO1xuXG4vLyBXb3JrIHZhcmlhYmxlcyB0byBhdm9pZCBnYXJiYWdlIGNvbGxlY3Rpb25cbmxldCAkdGVtcCA9IDA7XG5cbi8qKlxuICogVGhlIHRlcm1pbmFsJ3Mgc3RhbmRhcmQgaW1wbGVtZW50YXRpb24gb2YgSUlucHV0SGFuZGxlciwgdGhpcyBoYW5kbGVzIGFsbFxuICogaW5wdXQgZnJvbSB0aGUgUGFyc2VyLlxuICpcbiAqIFJlZmVyIHRvIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbCB0byB1bmRlcnN0YW5kXG4gKiBlYWNoIGZ1bmN0aW9uJ3MgaGVhZGVyIGNvbW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnB1dEhhbmRsZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUlucHV0SGFuZGxlciB7XG4gIHByaXZhdGUgX3BhcnNlQnVmZmVyOiBVaW50MzJBcnJheSA9IG5ldyBVaW50MzJBcnJheSg0MDk2KTtcbiAgcHJpdmF0ZSBfc3RyaW5nRGVjb2RlcjogU3RyaW5nVG9VdGYzMiA9IG5ldyBTdHJpbmdUb1V0ZjMyKCk7XG4gIHByaXZhdGUgX3V0ZjhEZWNvZGVyOiBVdGY4VG9VdGYzMiA9IG5ldyBVdGY4VG9VdGYzMigpO1xuICBwcml2YXRlIF93aW5kb3dUaXRsZSA9ICcnO1xuICBwcml2YXRlIF9pY29uTmFtZSA9ICcnO1xuICBwcml2YXRlIF9kaXJ0eVJvd1RyYWNrZXI6IElEaXJ0eVJvd1RyYWNrZXI7XG4gIHByb3RlY3RlZCBfd2luZG93VGl0bGVTdGFjazogc3RyaW5nW10gPSBbXTtcbiAgcHJvdGVjdGVkIF9pY29uTmFtZVN0YWNrOiBzdHJpbmdbXSA9IFtdO1xuXG4gIHByaXZhdGUgX2N1ckF0dHJEYXRhOiBJQXR0cmlidXRlRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gIHB1YmxpYyBnZXRBdHRyRGF0YSgpOiBJQXR0cmlidXRlRGF0YSB7IHJldHVybiB0aGlzLl9jdXJBdHRyRGF0YTsgfVxuICBwcml2YXRlIF9lcmFzZUF0dHJEYXRhSW50ZXJuYWw6IElBdHRyaWJ1dGVEYXRhID0gREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKTtcblxuICBwcml2YXRlIF9hY3RpdmVCdWZmZXI6IElCdWZmZXI7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXF1ZXN0QmVsbCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0QmVsbCA9IHRoaXMuX29uUmVxdWVzdEJlbGwuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFJlZnJlc2hSb3dzID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9IHwgdW5kZWZpbmVkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFJlZnJlc2hSb3dzID0gdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFJlc2V0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblJlcXVlc3RSZXNldCA9IHRoaXMuX29uUmVxdWVzdFJlc2V0LmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblJlcXVlc3RTZW5kRm9jdXMgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFNlbmRGb2N1cyA9IHRoaXMuX29uUmVxdWVzdFNlbmRGb2N1cy5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXF1ZXN0U3luY1Njcm9sbEJhciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXF1ZXN0U3luY1Njcm9sbEJhciA9IHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8V2luZG93c09wdGlvbnNSZXBvcnRUeXBlPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0ID0gdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZXZlbnQ7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25BMTF5Q2hhciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHN0cmluZz4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkExMXlDaGFyID0gdGhpcy5fb25BMTF5Q2hhci5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25BMTF5VGFiID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQTExeVRhYiA9IHRoaXMuX29uQTExeVRhYi5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25DdXJzb3JNb3ZlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkN1cnNvck1vdmUgPSB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uTGluZUZlZWQgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uTGluZUZlZWQgPSB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblNjcm9sbCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPG51bWJlcj4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblNjcm9sbCA9IHRoaXMuX29uU2Nyb2xsLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblRpdGxlQ2hhbmdlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uVGl0bGVDaGFuZ2UgPSB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkNvbG9yID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SUNvbG9yRXZlbnQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Db2xvciA9IHRoaXMuX29uQ29sb3IuZXZlbnQ7XG5cbiAgcHJpdmF0ZSBfcGFyc2VTdGFjazogSVBhcnNlU3RhY2sgPSB7XG4gICAgcGF1c2VkOiBmYWxzZSxcbiAgICBjdXJzb3JTdGFydFg6IDAsXG4gICAgY3Vyc29yU3RhcnRZOiAwLFxuICAgIGRlY29kZWRMZW5ndGg6IDAsXG4gICAgcG9zaXRpb246IDBcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jaGFyc2V0U2VydmljZTogSUNoYXJzZXRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfbG9nU2VydmljZTogSUxvZ1NlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9vc2NMaW5rU2VydmljZTogSU9zY0xpbmtTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NvcmVNb3VzZVNlcnZpY2U6IElDb3JlTW91c2VTZXJ2aWNlLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3VuaWNvZGVTZXJ2aWNlOiBJVW5pY29kZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfcGFyc2VyOiBJRXNjYXBlU2VxdWVuY2VQYXJzZXIgPSBuZXcgRXNjYXBlU2VxdWVuY2VQYXJzZXIoKVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3BhcnNlcik7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyID0gbmV3IERpcnR5Um93VHJhY2tlcih0aGlzLl9idWZmZXJTZXJ2aWNlKTtcblxuICAgIC8vIFRyYWNrIHByb3BlcnRpZXMgdXNlZCBpbiBwZXJmb3JtYW5jZSBjcml0aWNhbCBjb2RlIG1hbnVhbGx5IHRvIGF2b2lkIHVzaW5nIHNsb3cgZ2V0dGVyc1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKGUgPT4gdGhpcy5fYWN0aXZlQnVmZmVyID0gZS5hY3RpdmVCdWZmZXIpKTtcblxuICAgIC8qKlxuICAgICAqIGN1c3RvbSBmYWxsYmFjayBoYW5kbGVyc1xuICAgICAqL1xuICAgIHRoaXMuX3BhcnNlci5zZXRDc2lIYW5kbGVyRmFsbGJhY2soKGlkZW50LCBwYXJhbXMpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gQ1NJIGNvZGU6ICcsIHsgaWRlbnRpZmllcjogdGhpcy5fcGFyc2VyLmlkZW50VG9TdHJpbmcoaWRlbnQpLCBwYXJhbXM6IHBhcmFtcy50b0FycmF5KCkgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEVzY0hhbmRsZXJGYWxsYmFjayhpZGVudCA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIEVTQyBjb2RlOiAnLCB7IGlkZW50aWZpZXI6IHRoaXMuX3BhcnNlci5pZGVudFRvU3RyaW5nKGlkZW50KSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjayhjb2RlID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ1Vua25vd24gRVhFQ1VURSBjb2RlOiAnLCB7IGNvZGUgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldE9zY0hhbmRsZXJGYWxsYmFjaygoaWRlbnRpZmllciwgYWN0aW9uLCBkYXRhKSA9PiB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmtub3duIE9TQyBjb2RlOiAnLCB7IGlkZW50aWZpZXIsIGFjdGlvbiwgZGF0YSB9KTtcbiAgICB9KTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RGNzSGFuZGxlckZhbGxiYWNrKChpZGVudCwgYWN0aW9uLCBwYXlsb2FkKSA9PiB7XG4gICAgICBpZiAoYWN0aW9uID09PSAnSE9PSycpIHtcbiAgICAgICAgcGF5bG9hZCA9IHBheWxvYWQudG9BcnJheSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBEQ1MgY29kZTogJywgeyBpZGVudGlmaWVyOiB0aGlzLl9wYXJzZXIuaWRlbnRUb1N0cmluZyhpZGVudCksIGFjdGlvbiwgcGF5bG9hZCB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIHByaW50IGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0UHJpbnRIYW5kbGVyKChkYXRhLCBzdGFydCwgZW5kKSA9PiB0aGlzLnByaW50KGRhdGEsIHN0YXJ0LCBlbmQpKTtcblxuICAgIC8qKlxuICAgICAqIENTSSBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnQCcgfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0Q2hhcnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcgJywgZmluYWw6ICdAJyB9LCBwYXJhbXMgPT4gdGhpcy5zY3JvbGxMZWZ0KHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0EnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnICcsIGZpbmFsOiAnQScgfSwgcGFyYW1zID0+IHRoaXMuc2Nyb2xsUmlnaHQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnQicgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yRG93bihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdDJyB9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JGb3J3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0QnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckJhY2t3YXJkKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0UnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvck5leHRMaW5lKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0YnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnRycgfSwgcGFyYW1zID0+IHRoaXMuY3Vyc29yQ2hhckFic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0gnIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvclBvc2l0aW9uKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0knIH0sIHBhcmFtcyA9PiB0aGlzLmN1cnNvckZvcndhcmRUYWIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnSicgfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VJbkRpc3BsYXkocGFyYW1zLCBmYWxzZSkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgZmluYWw6ICdKJyB9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluRGlzcGxheShwYXJhbXMsIHRydWUpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdLJyB9LCBwYXJhbXMgPT4gdGhpcy5lcmFzZUluTGluZShwYXJhbXMsIGZhbHNlKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IHByZWZpeDogJz8nLCBmaW5hbDogJ0snIH0sIHBhcmFtcyA9PiB0aGlzLmVyYXNlSW5MaW5lKHBhcmFtcywgdHJ1ZSkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ0wnIH0sIHBhcmFtcyA9PiB0aGlzLmluc2VydExpbmVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ00nIH0sIHBhcmFtcyA9PiB0aGlzLmRlbGV0ZUxpbmVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ1AnIH0sIHBhcmFtcyA9PiB0aGlzLmRlbGV0ZUNoYXJzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ1MnIH0sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbFVwKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ1QnIH0sIHBhcmFtcyA9PiB0aGlzLnNjcm9sbERvd24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnWCcgfSwgcGFyYW1zID0+IHRoaXMuZXJhc2VDaGFycyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdaJyB9LCBwYXJhbXMgPT4gdGhpcy5jdXJzb3JCYWNrd2FyZFRhYihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdgJyB9LCBwYXJhbXMgPT4gdGhpcy5jaGFyUG9zQWJzb2x1dGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnYScgfSwgcGFyYW1zID0+IHRoaXMuaFBvc2l0aW9uUmVsYXRpdmUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnYicgfSwgcGFyYW1zID0+IHRoaXMucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2MnIH0sIHBhcmFtcyA9PiB0aGlzLnNlbmREZXZpY2VBdHRyaWJ1dGVzUHJpbWFyeShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPicsIGZpbmFsOiAnYycgfSwgcGFyYW1zID0+IHRoaXMuc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnZCcgfSwgcGFyYW1zID0+IHRoaXMubGluZVBvc0Fic29sdXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2UnIH0sIHBhcmFtcyA9PiB0aGlzLnZQb3NpdGlvblJlbGF0aXZlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ2YnIH0sIHBhcmFtcyA9PiB0aGlzLmhWUG9zaXRpb24ocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnZycgfSwgcGFyYW1zID0+IHRoaXMudGFiQ2xlYXIocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnaCcgfSwgcGFyYW1zID0+IHRoaXMuc2V0TW9kZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPycsIGZpbmFsOiAnaCcgfSwgcGFyYW1zID0+IHRoaXMuc2V0TW9kZVByaXZhdGUocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAnbCcgfSwgcGFyYW1zID0+IHRoaXMucmVzZXRNb2RlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBwcmVmaXg6ICc/JywgZmluYWw6ICdsJyB9LCBwYXJhbXMgPT4gdGhpcy5yZXNldE1vZGVQcml2YXRlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ20nIH0sIHBhcmFtcyA9PiB0aGlzLmNoYXJBdHRyaWJ1dGVzKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ24nIH0sIHBhcmFtcyA9PiB0aGlzLmRldmljZVN0YXR1cyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPycsIGZpbmFsOiAnbicgfSwgcGFyYW1zID0+IHRoaXMuZGV2aWNlU3RhdHVzUHJpdmF0ZShwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyEnLCBmaW5hbDogJ3AnIH0sIHBhcmFtcyA9PiB0aGlzLnNvZnRSZXNldChwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyAnLCBmaW5hbDogJ3EnIH0sIHBhcmFtcyA9PiB0aGlzLnNldEN1cnNvclN0eWxlKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ3InIH0sIHBhcmFtcyA9PiB0aGlzLnNldFNjcm9sbFJlZ2lvbihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdzJyB9LCBwYXJhbXMgPT4gdGhpcy5zYXZlQ3Vyc29yKHBhcmFtcykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoeyBmaW5hbDogJ3QnIH0sIHBhcmFtcyA9PiB0aGlzLndpbmRvd09wdGlvbnMocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGZpbmFsOiAndScgfSwgcGFyYW1zID0+IHRoaXMucmVzdG9yZUN1cnNvcihwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJ1xcJycsIGZpbmFsOiAnfScgfSwgcGFyYW1zID0+IHRoaXMuaW5zZXJ0Q29sdW1ucyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJ1xcJycsIGZpbmFsOiAnficgfSwgcGFyYW1zID0+IHRoaXMuZGVsZXRlQ29sdW1ucyhwYXJhbXMpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJ1wiJywgZmluYWw6ICdxJyB9LCBwYXJhbXMgPT4gdGhpcy5zZWxlY3RQcm90ZWN0ZWQocGFyYW1zKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICckJywgZmluYWw6ICdwJyB9LCBwYXJhbXMgPT4gdGhpcy5yZXF1ZXN0TW9kZShwYXJhbXMsIHRydWUpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHsgcHJlZml4OiAnPycsIGludGVybWVkaWF0ZXM6ICckJywgZmluYWw6ICdwJyB9LCBwYXJhbXMgPT4gdGhpcy5yZXF1ZXN0TW9kZShwYXJhbXMsIGZhbHNlKSk7XG5cbiAgICAvKipcbiAgICAgKiBleGVjdXRlIGhhbmRsZXJcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuQkVMLCAoKSA9PiB0aGlzLmJlbGwoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkxGLCAoKSA9PiB0aGlzLmxpbmVGZWVkKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5WVCwgKCkgPT4gdGhpcy5saW5lRmVlZCgpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuRkYsICgpID0+IHRoaXMubGluZUZlZWQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkNSLCAoKSA9PiB0aGlzLmNhcnJpYWdlUmV0dXJuKCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMC5CUywgKCkgPT4gdGhpcy5iYWNrc3BhY2UoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLkhULCAoKSA9PiB0aGlzLnRhYigpKTtcbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzAuU08sICgpID0+IHRoaXMuc2hpZnRPdXQoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMwLlNJLCAoKSA9PiB0aGlzLnNoaWZ0SW4oKSk7XG4gICAgLy8gRklYTUU6ICAgV2hhdCBkbyB0byB3aXRoIG1pc3Npbmc/IE9sZCBjb2RlIGp1c3QgYWRkZWQgdGhvc2UgdG8gcHJpbnQuXG5cbiAgICB0aGlzLl9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIoQzEuSU5ELCAoKSA9PiB0aGlzLmluZGV4KCkpO1xuICAgIHRoaXMuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihDMS5ORUwsICgpID0+IHRoaXMubmV4dExpbmUoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKEMxLkhUUywgKCkgPT4gdGhpcy50YWJTZXQoKSk7XG5cbiAgICAvKipcbiAgICAgKiBPU0MgaGFuZGxlclxuICAgICAqL1xuICAgIC8vICAgMCAtIGljb24gbmFtZSArIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigwLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHsgdGhpcy5zZXRUaXRsZShkYXRhKTsgdGhpcy5zZXRJY29uTmFtZShkYXRhKTsgcmV0dXJuIHRydWU7IH0pKTtcbiAgICAvLyAgIDEgLSBpY29uIG5hbWVcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRJY29uTmFtZShkYXRhKSkpO1xuICAgIC8vICAgMiAtIHRpdGxlXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigyLCBuZXcgT3NjSGFuZGxlcihkYXRhID0+IHRoaXMuc2V0VGl0bGUoZGF0YSkpKTtcbiAgICAvLyAgIDMgLSBzZXQgcHJvcGVydHkgWCBpbiB0aGUgZm9ybSBcInByb3A9dmFsdWVcIlxuICAgIC8vICAgNCAtIENoYW5nZSBDb2xvciBOdW1iZXJcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDQsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRPclJlcG9ydEluZGV4ZWRDb2xvcihkYXRhKSkpO1xuICAgIC8vICAgNSAtIENoYW5nZSBTcGVjaWFsIENvbG9yIE51bWJlclxuICAgIC8vICAgNiAtIEVuYWJsZS9kaXNhYmxlIFNwZWNpYWwgQ29sb3IgTnVtYmVyIGNcbiAgICAvLyAgIDcgLSBjdXJyZW50IGRpcmVjdG9yeT8gKG5vdCBpbiB4dGVybSBzcGVjLCBzZWUgaHR0cHM6Ly9naXRsYWIuY29tL2duYWNobWFuL2l0ZXJtMi9pc3N1ZXMvMzkzOSlcbiAgICAvLyAgIDggLSBjcmVhdGUgaHlwZXJsaW5rIChub3QgaW4geHRlcm0gc3BlYywgc2VlIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2VnbW9udGtvYi9lYjExNDI5NGVmYmNkNWFkYjE5NDRjOWYzY2I1ZmVkYSlcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDgsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRIeXBlcmxpbmsoZGF0YSkpKTtcbiAgICAvLyAgMTAgLSBDaGFuZ2UgVlQxMDAgdGV4dCBmb3JlZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTAsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRPclJlcG9ydEZnQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAgMTEgLSBDaGFuZ2UgVlQxMDAgdGV4dCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5zZXRPclJlcG9ydEJnQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAgMTIgLSBDaGFuZ2UgdGV4dCBjdXJzb3IgY29sb3IgdG8gUHQuXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMiwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnNldE9yUmVwb3J0Q3Vyc29yQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAgMTMgLSBDaGFuZ2UgbW91c2UgZm9yZWdyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTQgLSBDaGFuZ2UgbW91c2UgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTUgLSBDaGFuZ2UgVGVrdHJvbml4IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDE2IC0gQ2hhbmdlIFRla3Ryb25peCBiYWNrZ3JvdW5kIGNvbG9yIHRvIFB0LlxuICAgIC8vICAxNyAtIENoYW5nZSBoaWdobGlnaHQgYmFja2dyb3VuZCBjb2xvciB0byBQdC5cbiAgICAvLyAgMTggLSBDaGFuZ2UgVGVrdHJvbml4IGN1cnNvciBjb2xvciB0byBQdC5cbiAgICAvLyAgMTkgLSBDaGFuZ2UgaGlnaGxpZ2h0IGZvcmVncm91bmQgY29sb3IgdG8gUHQuXG4gICAgLy8gIDQ2IC0gQ2hhbmdlIExvZyBGaWxlIHRvIFB0LlxuICAgIC8vICA1MCAtIFNldCBGb250IHRvIFB0LlxuICAgIC8vICA1MSAtIHJlc2VydmVkIGZvciBFbWFjcyBzaGVsbC5cbiAgICAvLyAgNTIgLSBNYW5pcHVsYXRlIFNlbGVjdGlvbiBEYXRhLlxuICAgIC8vIDEwNCA7IGMgLSBSZXNldCBDb2xvciBOdW1iZXIgYy5cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEwNCwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnJlc3RvcmVJbmRleGVkQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAxMDUgOyBjIC0gUmVzZXQgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMDYgOyBjOyBmIC0gRW5hYmxlL2Rpc2FibGUgU3BlY2lhbCBDb2xvciBOdW1iZXIgYy5cbiAgICAvLyAxMTAgLSBSZXNldCBWVDEwMCB0ZXh0IGZvcmVncm91bmQgY29sb3IuXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTAsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5yZXN0b3JlRmdDb2xvcihkYXRhKSkpO1xuICAgIC8vIDExMSAtIFJlc2V0IFZUMTAwIHRleHQgYmFja2dyb3VuZCBjb2xvci5cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMSwgbmV3IE9zY0hhbmRsZXIoZGF0YSA9PiB0aGlzLnJlc3RvcmVCZ0NvbG9yKGRhdGEpKSk7XG4gICAgLy8gMTEyIC0gUmVzZXQgdGV4dCBjdXJzb3IgY29sb3IuXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTIsIG5ldyBPc2NIYW5kbGVyKGRhdGEgPT4gdGhpcy5yZXN0b3JlQ3Vyc29yQ29sb3IoZGF0YSkpKTtcbiAgICAvLyAxMTMgLSBSZXNldCBtb3VzZSBmb3JlZ3JvdW5kIGNvbG9yLlxuICAgIC8vIDExNCAtIFJlc2V0IG1vdXNlIGJhY2tncm91bmQgY29sb3IuXG4gICAgLy8gMTE1IC0gUmVzZXQgVGVrdHJvbml4IGZvcmVncm91bmQgY29sb3IuXG4gICAgLy8gMTE2IC0gUmVzZXQgVGVrdHJvbml4IGJhY2tncm91bmQgY29sb3IuXG4gICAgLy8gMTE3IC0gUmVzZXQgaGlnaGxpZ2h0IGNvbG9yLlxuICAgIC8vIDExOCAtIFJlc2V0IFRla3Ryb25peCBjdXJzb3IgY29sb3IuXG4gICAgLy8gMTE5IC0gUmVzZXQgaGlnaGxpZ2h0IGZvcmVncm91bmQgY29sb3IuXG5cbiAgICAvKipcbiAgICAgKiBFU0MgaGFuZGxlcnNcbiAgICAgKi9cbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICc3JyB9LCAoKSA9PiB0aGlzLnNhdmVDdXJzb3IoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnOCcgfSwgKCkgPT4gdGhpcy5yZXN0b3JlQ3Vyc29yKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ0QnIH0sICgpID0+IHRoaXMuaW5kZXgoKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnRScgfSwgKCkgPT4gdGhpcy5uZXh0TGluZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdIJyB9LCAoKSA9PiB0aGlzLnRhYlNldCgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdNJyB9LCAoKSA9PiB0aGlzLnJldmVyc2VJbmRleCgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICc9JyB9LCAoKSA9PiB0aGlzLmtleXBhZEFwcGxpY2F0aW9uTW9kZSgpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICc+JyB9LCAoKSA9PiB0aGlzLmtleXBhZE51bWVyaWNNb2RlKCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ2MnIH0sICgpID0+IHRoaXMuZnVsbFJlc2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ24nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDIpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICdvJyB9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgzKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGZpbmFsOiAnfCcgfSwgKCkgPT4gdGhpcy5zZXRnTGV2ZWwoMykpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBmaW5hbDogJ30nIH0sICgpID0+IHRoaXMuc2V0Z0xldmVsKDIpKTtcbiAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgZmluYWw6ICd+JyB9LCAoKSA9PiB0aGlzLnNldGdMZXZlbCgxKSk7XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICclJywgZmluYWw6ICdAJyB9LCAoKSA9PiB0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCkpO1xuICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnJScsIGZpbmFsOiAnRycgfSwgKCkgPT4gdGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpKTtcbiAgICBmb3IgKGNvbnN0IGZsYWcgaW4gQ0hBUlNFVFMpIHtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnKCcsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKCcgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJyknLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJyknICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcqJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcqJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnKycsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnKycgKyBmbGFnKSk7XG4gICAgICB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHsgaW50ZXJtZWRpYXRlczogJy0nLCBmaW5hbDogZmxhZyB9LCAoKSA9PiB0aGlzLnNlbGVjdENoYXJzZXQoJy0nICsgZmxhZykpO1xuICAgICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcuJywgZmluYWw6IGZsYWcgfSwgKCkgPT4gdGhpcy5zZWxlY3RDaGFyc2V0KCcuJyArIGZsYWcpKTtcbiAgICAgIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoeyBpbnRlcm1lZGlhdGVzOiAnLycsIGZpbmFsOiBmbGFnIH0sICgpID0+IHRoaXMuc2VsZWN0Q2hhcnNldCgnLycgKyBmbGFnKSk7IC8vIFRPRE86IHN1cHBvcnRlZD9cbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICcjJywgZmluYWw6ICc4JyB9LCAoKSA9PiB0aGlzLnNjcmVlbkFsaWdubWVudFBhdHRlcm4oKSk7XG5cbiAgICAvKipcbiAgICAgKiBlcnJvciBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnNldEVycm9ySGFuZGxlcigoc3RhdGU6IElQYXJzaW5nU3RhdGUpID0+IHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZXJyb3IoJ1BhcnNpbmcgZXJyb3I6ICcsIHN0YXRlKTtcbiAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERDUyBoYW5kbGVyXG4gICAgICovXG4gICAgdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcih7IGludGVybWVkaWF0ZXM6ICckJywgZmluYWw6ICdxJyB9LCBuZXcgRGNzSGFuZGxlcigoZGF0YSwgcGFyYW1zKSA9PiB0aGlzLnJlcXVlc3RTdGF0dXNTdHJpbmcoZGF0YSwgcGFyYW1zKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jIHBhcnNlIHN1cHBvcnQuXG4gICAqL1xuICBwcml2YXRlIF9wcmVzZXJ2ZVN0YWNrKGN1cnNvclN0YXJ0WDogbnVtYmVyLCBjdXJzb3JTdGFydFk6IG51bWJlciwgZGVjb2RlZExlbmd0aDogbnVtYmVyLCBwb3NpdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQgPSB0cnVlO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYID0gY3Vyc29yU3RhcnRYO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZID0gY3Vyc29yU3RhcnRZO1xuICAgIHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aCA9IGRlY29kZWRMZW5ndGg7XG4gICAgdGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICB9XG5cbiAgcHJpdmF0ZSBfbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHA6IFByb21pc2U8Ym9vbGVhbj4pOiB2b2lkIHtcbiAgICAvLyBsb2cgYSBsaW1pdGVkIHdhcm5pbmcgYWJvdXQgYW4gYXN5bmMgaGFuZGxlciB0YWtpbmcgdG9vIGxvbmdcbiAgICBpZiAodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbCA8PSBMb2dMZXZlbEVudW0uV0FSTikge1xuICAgICAgUHJvbWlzZS5yYWNlKFtwLCBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHNldFRpbWVvdXQoKCkgPT4gcmVqKCcjU0xPV19USU1FT1VUJyksIFNMT1dfQVNZTkNfTElNSVQpKV0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIGlmIChlcnIgIT09ICcjU0xPV19USU1FT1VUJykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLndhcm4oYGFzeW5jIHBhcnNlciBoYW5kbGVyIHRha2luZyBsb25nZXIgdGhhbiAke1NMT1dfQVNZTkNfTElNSVR9IG1zYCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2dldEN1cnJlbnRMaW5rSWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQudXJsSWQ7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgY2FsbCB3aXRoIGFzeW5jIGhhbmRsZXIgc3VwcG9ydC5cbiAgICpcbiAgICogV2hldGhlciB0aGUgc3RhY2sgc3RhdGUgZ290IHByZXNlcnZlZCBmb3IgdGhlIG5leHQgY2FsbCwgaXMgaW5kaWNhdGVkIGJ5IHRoZSByZXR1cm4gdmFsdWU6XG4gICAqIC0gdW5kZWZpbmVkICh2b2lkKTpcbiAgICogICBhbGwgaGFuZGxlcnMgd2VyZSBzeW5jLCBubyBzdGFjayBzYXZlLCBjb250aW51ZSBub3JtYWxseSB3aXRoIG5leHQgY2h1bmtcbiAgICogLSBQcm9taXNlXFw8Ym9vbGVhblxcPjpcbiAgICogICBleGVjdXRpb24gc3RvcHBlZCBhdCBhc3luYyBoYW5kbGVyLCBzdGFjayBzYXZlZCwgY29udGludWUgd2l0aCBzYW1lIGNodW5rIGFuZCB0aGUgcHJvbWlzZVxuICAgKiAgIHJlc29sdmUgdmFsdWUgYXMgYHByb21pc2VSZXN1bHRgIHVudGlsIHRoZSBtZXRob2QgcmV0dXJucyBgdW5kZWZpbmVkYFxuICAgKlxuICAgKiBOb3RlOiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgYnkgYFRlcm1pbmFsLndyaXRlYCB0byBlbnN1cmUgY29ycmVjdCBleGVjdXRpb24gb3JkZXJcbiAgICogYW5kIHByb3BlciBjb250aW51YXRpb24gb2YgYXN5bmMgcGFyc2VyIGhhbmRsZXJzLlxuICAgKi9cbiAgcHVibGljIHBhcnNlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIHByb21pc2VSZXN1bHQ/OiBib29sZWFuKTogdm9pZCB8IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGxldCByZXN1bHQ6IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+O1xuICAgIGxldCBjdXJzb3JTdGFydFggPSB0aGlzLl9hY3RpdmVCdWZmZXIueDtcbiAgICBsZXQgY3Vyc29yU3RhcnRZID0gdGhpcy5fYWN0aXZlQnVmZmVyLnk7XG4gICAgbGV0IHN0YXJ0ID0gMDtcbiAgICBjb25zdCB3YXNQYXVzZWQgPSB0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZDtcblxuICAgIGlmICh3YXNQYXVzZWQpIHtcbiAgICAgIC8vIGFzc3VtcHRpb246IF9wYXJzZUJ1ZmZlciBuZXZlciBtdXRhdGVzIGJldHdlZW4gYXN5bmMgY2FsbHNcbiAgICAgIGlmIChyZXN1bHQgPSB0aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsIHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aCwgcHJvbWlzZVJlc3VsdCkpIHtcbiAgICAgICAgdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgICBjdXJzb3JTdGFydFggPSB0aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WDtcbiAgICAgIGN1cnNvclN0YXJ0WSA9IHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZO1xuICAgICAgdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQgPSBmYWxzZTtcbiAgICAgIGlmIChkYXRhLmxlbmd0aCA+IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgICAgc3RhcnQgPSB0aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uICsgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMb2cgZGVidWcgZGF0YSwgdGhlIGxvZyBsZXZlbCBnYXRlIGlzIHRvIHByZXZlbnQgZXh0cmEgd29yayBpbiB0aGlzIGhvdCBwYXRoXG4gICAgaWYgKHRoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWwgPD0gTG9nTGV2ZWxFbnVtLkRFQlVHKSB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKGBwYXJzaW5nIGRhdGEgJHt0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyBgIFwiJHtkYXRhfVwiYCA6IGAgXCIke0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbChkYXRhLCBlID0+IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkpLmpvaW4oJycpfVwiYH1gKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWwgPT09IExvZ0xldmVsRW51bS5UUkFDRSkge1xuICAgICAgdGhpcy5fbG9nU2VydmljZS50cmFjZShgcGFyc2luZyBkYXRhIChjb2RlcylgLCB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBkYXRhLnNwbGl0KCcnKS5tYXAoZSA9PiBlLmNoYXJDb2RlQXQoMCkpXG4gICAgICAgIDogZGF0YVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyByZXNpemUgaW5wdXQgYnVmZmVyIGlmIG5lZWRlZFxuICAgIGlmICh0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGggPCBkYXRhLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aCA8IE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VCdWZmZXIgPSBuZXcgVWludDMyQXJyYXkoTWF0aC5taW4oZGF0YS5sZW5ndGgsIE1BWF9QQVJTRUJVRkZFUl9MRU5HVEgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhciB0aGUgZGlydHkgcm93IHNlcnZpY2Ugc28gd2Uga25vdyB3aGljaCBsaW5lcyBjaGFuZ2VkIGFzIGEgcmVzdWx0IG9mIHBhcnNpbmdcbiAgICAvLyBJbXBvcnRhbnQ6IGRvIG5vdCBjbGVhciBiZXR3ZWVuIGFzeW5jIGNhbGxzLCBvdGhlcndpc2Ugd2UgbG9zdCBwZW5kaW5nIHVwZGF0ZSBpbmZvcm1hdGlvbi5cbiAgICBpZiAoIXdhc1BhdXNlZCkge1xuICAgICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLmNsZWFyUmFuZ2UoKTtcbiAgICB9XG5cbiAgICAvLyBwcm9jZXNzIGJpZyBkYXRhIGluIHNtYWxsZXIgY2h1bmtzXG4gICAgaWYgKGRhdGEubGVuZ3RoID4gTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCkge1xuICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCkge1xuICAgICAgICBjb25zdCBlbmQgPSBpICsgTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCA8IGRhdGEubGVuZ3RoID8gaSArIE1BWF9QQVJTRUJVRkZFUl9MRU5HVEggOiBkYXRhLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbGVuID0gKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJylcbiAgICAgICAgICA/IHRoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGRhdGEuc3Vic3RyaW5nKGksIGVuZCksIHRoaXMuX3BhcnNlQnVmZmVyKVxuICAgICAgICAgIDogdGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKGRhdGEuc3ViYXJyYXkoaSwgZW5kKSwgdGhpcy5fcGFyc2VCdWZmZXIpO1xuICAgICAgICBpZiAocmVzdWx0ID0gdGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLCBsZW4pKSB7XG4gICAgICAgICAgdGhpcy5fcHJlc2VydmVTdGFjayhjdXJzb3JTdGFydFgsIGN1cnNvclN0YXJ0WSwgbGVuLCBpKTtcbiAgICAgICAgICB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocmVzdWx0KTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghd2FzUGF1c2VkKSB7XG4gICAgICAgIGNvbnN0IGxlbiA9ICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgPyB0aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShkYXRhLCB0aGlzLl9wYXJzZUJ1ZmZlcilcbiAgICAgICAgICA6IHRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShkYXRhLCB0aGlzLl9wYXJzZUJ1ZmZlcik7XG4gICAgICAgIGlmIChyZXN1bHQgPSB0aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsIGxlbikpIHtcbiAgICAgICAgICB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGN1cnNvclN0YXJ0WCwgY3Vyc29yU3RhcnRZLCBsZW4sIDApO1xuICAgICAgICAgIHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyZXN1bHQpO1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggIT09IGN1cnNvclN0YXJ0WCB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSAhPT0gY3Vyc29yU3RhcnRZKSB7XG4gICAgICB0aGlzLl9vbkN1cnNvck1vdmUuZmlyZSgpO1xuICAgIH1cblxuICAgIC8vIFJlZnJlc2ggYW55IGRpcnR5IHJvd3MgYWNjdW11bGF0ZWQgYXMgcGFydCBvZiBwYXJzaW5nLCBmaXJlIG9ubHkgZm9yIHJvd3Mgd2l0aGluIHRoZVxuICAgIC8vIF92aWV3cG9ydF8gd2hpY2ggaXMgcmVsYXRpdmUgdG8geWRpc3AsIG5vdCByZWxhdGl2ZSB0byB5YmFzZS5cbiAgICBjb25zdCB2aWV3cG9ydEVuZCA9IHRoaXMuX2RpcnR5Um93VHJhY2tlci5lbmQgKyAodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7XG4gICAgY29uc3Qgdmlld3BvcnRTdGFydCA9IHRoaXMuX2RpcnR5Um93VHJhY2tlci5zdGFydCArICh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSAtIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKTtcbiAgICBpZiAodmlld3BvcnRTdGFydCA8IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykge1xuICAgICAgdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSh7XG4gICAgICAgIHN0YXJ0OiBNYXRoLm1pbih2aWV3cG9ydFN0YXJ0LCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxKSxcbiAgICAgICAgZW5kOiBNYXRoLm1pbih2aWV3cG9ydEVuZCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSlcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBwcmludChkYXRhOiBVaW50MzJBcnJheSwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBsZXQgY29kZTogbnVtYmVyO1xuICAgIGxldCBjaFdpZHRoOiBudW1iZXI7XG4gICAgY29uc3QgY2hhcnNldCA9IHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ7XG4gICAgY29uc3Qgc2NyZWVuUmVhZGVyTW9kZSA9IHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZTtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO1xuICAgIGNvbnN0IHdyYXBhcm91bmRNb2RlID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ7XG4gICAgY29uc3QgaW5zZXJ0TW9kZSA9IHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGU7XG4gICAgY29uc3QgY3VyQXR0ciA9IHRoaXMuX2N1ckF0dHJEYXRhO1xuICAgIGxldCBidWZmZXJSb3cgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSE7XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcblxuICAgIC8vIGhhbmRsZSB3aWRlIGNoYXJzOiByZXNldCBzdGFydF9jZWxsLTEgaWYgd2Ugd291bGQgb3ZlcndyaXRlIHRoZSBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueCAmJiBlbmQgLSBzdGFydCA+IDAgJiYgYnVmZmVyUm93LmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gMSkgPT09IDIpIHtcbiAgICAgIGJ1ZmZlclJvdy5zZXRDZWxsRnJvbUNvZGVwb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCAtIDEsIDAsIDEsIGN1ckF0dHIpO1xuICAgIH1cblxuICAgIGxldCBwcmVjZWRpbmdKb2luU3RhdGUgPSB0aGlzLl9wYXJzZXIucHJlY2VkaW5nSm9pblN0YXRlO1xuICAgIGZvciAobGV0IHBvcyA9IHN0YXJ0OyBwb3MgPCBlbmQ7ICsrcG9zKSB7XG4gICAgICBjb2RlID0gZGF0YVtwb3NdO1xuXG4gICAgICAvLyBnZXQgY2hhcnNldCByZXBsYWNlbWVudCBjaGFyYWN0ZXJcbiAgICAgIC8vIGNoYXJzZXQgaXMgb25seSBkZWZpbmVkIGZvciBBU0NJSSwgdGhlcmVmb3JlIHdlIG9ubHlcbiAgICAgIC8vIHNlYXJjaCBmb3IgYW4gcmVwbGFjZW1lbnQgY2hhciBpZiBjb2RlIDwgMTI3XG4gICAgICBpZiAoY29kZSA8IDEyNyAmJiBjaGFyc2V0KSB7XG4gICAgICAgIGNvbnN0IGNoID0gY2hhcnNldFtTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpXTtcbiAgICAgICAgaWYgKGNoKSB7XG4gICAgICAgICAgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgY3VycmVudEluZm8gPSB0aGlzLl91bmljb2RlU2VydmljZS5jaGFyUHJvcGVydGllcyhjb2RlLCBwcmVjZWRpbmdKb2luU3RhdGUpO1xuICAgICAgY2hXaWR0aCA9IFVuaWNvZGVTZXJ2aWNlLmV4dHJhY3RXaWR0aChjdXJyZW50SW5mbyk7XG4gICAgICBjb25zdCBzaG91bGRKb2luID0gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFNob3VsZEpvaW4oY3VycmVudEluZm8pO1xuICAgICAgY29uc3Qgb2xkV2lkdGggPSBzaG91bGRKb2luID8gVW5pY29kZVNlcnZpY2UuZXh0cmFjdFdpZHRoKHByZWNlZGluZ0pvaW5TdGF0ZSkgOiAwO1xuICAgICAgcHJlY2VkaW5nSm9pblN0YXRlID0gY3VycmVudEluZm87XG5cbiAgICAgIGlmIChzY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICAgIHRoaXMuX29uQTExeUNoYXIuZmlyZShzdHJpbmdGcm9tQ29kZVBvaW50KGNvZGUpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9nZXRDdXJyZW50TGlua0lkKCkpIHtcbiAgICAgICAgdGhpcy5fb3NjTGlua1NlcnZpY2UuYWRkTGluZVRvTGluayh0aGlzLl9nZXRDdXJyZW50TGlua0lkKCksIHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICAgIH1cblxuICAgICAgLy8gZ290byBuZXh0IGxpbmUgaWYgY2ggd291bGQgb3ZlcmZsb3dcbiAgICAgIC8vIE5PVEU6IFRvIGF2b2lkIGNvc3RseSB3aWR0aCBjaGVja3MgaGVyZSxcbiAgICAgIC8vIHRoZSB0ZXJtaW5hbCBkb2VzIG5vdCBhbGxvdyBhIGNvbHMgPCAyLlxuICAgICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgY2hXaWR0aCAtIG9sZFdpZHRoID4gY29scykge1xuICAgICAgICAvLyBhdXRvd3JhcCAtIERFQ0FXTVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHdyYXBzIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHQgbGluZVxuICAgICAgICBpZiAod3JhcGFyb3VuZE1vZGUpIHtcbiAgICAgICAgICBjb25zdCBvbGRSb3cgPSBidWZmZXJSb3c7XG4gICAgICAgICAgbGV0IG9sZENvbCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54IC0gb2xkV2lkdGg7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSBvbGRXaWR0aDtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSsrO1xuICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA9PT0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS07XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCksIHRydWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoZSBsaW5lIGFscmVhZHkgZXhpc3RzIChlZy4gdGhlIGluaXRpYWwgdmlld3BvcnQpLCBtYXJrIGl0IGFzIGFcbiAgICAgICAgICAgIC8vIHdyYXBwZWQgbGluZVxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSkhLmlzV3JhcHBlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJvdyBjaGFuZ2VkLCBnZXQgaXQgYWdhaW5cbiAgICAgICAgICBidWZmZXJSb3cgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSE7XG4gICAgICAgICAgaWYgKG9sZFdpZHRoID4gMCAmJiBidWZmZXJSb3cgaW5zdGFuY2VvZiBCdWZmZXJMaW5lKSB7XG4gICAgICAgICAgICAvLyBDb21iaW5pbmcgY2hhcmFjdGVyIHdpZGVucyAxIGNvbHVtbiB0byAyLlxuICAgICAgICAgICAgLy8gTW92ZSBvbGQgY2hhcmFjdGVyIHRvIG5leHQgbGluZS5cbiAgICAgICAgICAgIGJ1ZmZlclJvdy5jb3B5Q2VsbHNGcm9tKG9sZFJvdyBhcyBCdWZmZXJMaW5lLFxuICAgICAgICAgICAgICBvbGRDb2wsIDAsIG9sZFdpZHRoLCBmYWxzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGNsZWFyIGxlZnQgb3ZlciBjZWxscyB0byB0aGUgcmlnaHRcbiAgICAgICAgICB3aGlsZSAob2xkQ29sIDwgY29scykge1xuICAgICAgICAgICAgb2xkUm93LnNldENlbGxGcm9tQ29kZXBvaW50KG9sZENvbCsrLCAwLCAxLCBjdXJBdHRyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSBjb2xzIC0gMTtcbiAgICAgICAgICBpZiAoY2hXaWR0aCA9PT0gMikge1xuICAgICAgICAgICAgLy8gRklYTUU6IGNoZWNrIGZvciB4dGVybSBiZWhhdmlvclxuICAgICAgICAgICAgLy8gV2hhdCB0byBkbyBoZXJlPyBXZSBnb3QgYSB3aWRlIGNoYXIgdGhhdCBkb2VzIG5vdCBmaXQgaW50byBsYXN0IGNlbGxcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBpbnNlcnQgY29tYmluaW5nIGNoYXIgYXQgbGFzdCBjdXJzb3IgcG9zaXRpb25cbiAgICAgIC8vIHRoaXMuX2FjdGl2ZUJ1ZmZlci54IHNob3VsZCBuZXZlciBiZSAwIGZvciBhIGNvbWJpbmluZyBjaGFyXG4gICAgICAvLyBzaW5jZSB0aGV5IGFsd2F5cyBmb2xsb3cgYSBjZWxsIGNvbnN1bWluZyBjaGFyXG4gICAgICAvLyB0aGVyZWZvcmUgd2UgY2FuIHRlc3QgZm9yIHRoaXMuX2FjdGl2ZUJ1ZmZlci54IHRvIGF2b2lkIG92ZXJmbG93IGxlZnRcbiAgICAgIGlmIChzaG91bGRKb2luICYmIHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGJ1ZmZlclJvdy5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCAtIDEpID8gMSA6IDI7XG4gICAgICAgIC8vIGlmIGVtcHR5IGNlbGwgYWZ0ZXIgZnVsbHdpZHRoLCBuZWVkIHRvIGdvIDIgY2VsbHMgYmFja1xuICAgICAgICAvLyBpdCBpcyBzYXZlIHRvIHN0ZXAgMiBjZWxscyBiYWNrIGhlcmVcbiAgICAgICAgLy8gc2luY2UgYW4gZW1wdHkgY2VsbCBpcyBvbmx5IHNldCBieSBmdWxsd2lkdGggY2hhcnNcbiAgICAgICAgYnVmZmVyUm93LmFkZENvZGVwb2ludFRvQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueCAtIG9mZnNldCxcbiAgICAgICAgICBjb2RlLCBjaFdpZHRoKTtcbiAgICAgICAgZm9yIChsZXQgZGVsdGEgPSBjaFdpZHRoIC0gb2xkV2lkdGg7IC0tZGVsdGEgPj0gMDspIHtcbiAgICAgICAgICBidWZmZXJSb3cuc2V0Q2VsbEZyb21Db2RlcG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywgMCwgMCwgY3VyQXR0cik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGluc2VydCBtb2RlOiBtb3ZlIGNoYXJhY3RlcnMgdG8gcmlnaHRcbiAgICAgIGlmIChpbnNlcnRNb2RlKSB7XG4gICAgICAgIC8vIHJpZ2h0IHNoaWZ0IGNlbGxzIGFjY29yZGluZyB0byB0aGUgd2lkdGhcbiAgICAgICAgYnVmZmVyUm93Lmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCBjaFdpZHRoIC0gb2xkV2lkdGgsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbChjdXJBdHRyKSk7XG4gICAgICAgIC8vIHRlc3QgbGFzdCBjZWxsIC0gc2luY2UgdGhlIGxhc3QgY2VsbCBoYXMgb25seSByb29tIGZvclxuICAgICAgICAvLyBhIGhhbGZ3aWR0aCBjaGFyIGFueSBmdWxsd2lkdGggc2hpZnRlZCB0aGVyZSBpcyBsb3N0XG4gICAgICAgIC8vIGFuZCB3aWxsIGJlIHNldCB0byBlbXB0eSBjZWxsXG4gICAgICAgIGlmIChidWZmZXJSb3cuZ2V0V2lkdGgoY29scyAtIDEpID09PSAyKSB7XG4gICAgICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KGNvbHMgLSAxLCBOVUxMX0NFTExfQ09ERSwgTlVMTF9DRUxMX1dJRFRILCBjdXJBdHRyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyB3cml0ZSBjdXJyZW50IGNoYXIgdG8gYnVmZmVyIGFuZCBhZHZhbmNlIGN1cnNvclxuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssIGNvZGUsIGNoV2lkdGgsIGN1ckF0dHIpO1xuXG4gICAgICAvLyBmdWxsd2lkdGggY2hhciAtIGFsc28gc2V0IG5leHQgY2VsbCB0byBwbGFjZWhvbGRlciBzdHViIGFuZCBhZHZhbmNlIGN1cnNvclxuICAgICAgLy8gZm9yIGdyYXBoZW1lcyBiaWdnZXIgdGhhbiBmdWxsd2lkdGggd2UgY2FuIHNpbXBseSBsb29wIHRvIHplcm9cbiAgICAgIC8vIHdlIGFscmVhZHkgbWFkZSBzdXJlIGFib3ZlLCB0aGF0IHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgY2hXaWR0aCB3aWxsIG5vdCBvdmVyZmxvdyByaWdodFxuICAgICAgaWYgKGNoV2lkdGggPiAwKSB7XG4gICAgICAgIHdoaWxlICgtLWNoV2lkdGgpIHtcbiAgICAgICAgICAvLyBvdGhlciB0aGFuIGEgcmVndWxhciBlbXB0eSBjZWxsIGEgY2VsbCBmb2xsb3dpbmcgYSB3aWRlIGNoYXIgaGFzIG5vIHdpZHRoXG4gICAgICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssIDAsIDAsIGN1ckF0dHIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2VyLnByZWNlZGluZ0pvaW5TdGF0ZSA9IHByZWNlZGluZ0pvaW5TdGF0ZTtcblxuICAgIC8vIGhhbmRsZSB3aWRlIGNoYXJzOiByZXNldCBjZWxsIHRvIHRoZSByaWdodCBpZiBpdCBpcyBzZWNvbmQgY2VsbCBvZiBhIHdpZGUgY2hhclxuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueCA8IGNvbHMgJiYgZW5kIC0gc3RhcnQgPiAwICYmIGJ1ZmZlclJvdy5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkgPT09IDAgJiYgIWJ1ZmZlclJvdy5oYXNDb250ZW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSkge1xuICAgICAgYnVmZmVyUm93LnNldENlbGxGcm9tQ29kZXBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCAwLCAxLCBjdXJBdHRyKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyQ3NpSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckNzaUhhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAocGFyYW1zOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICBpZiAoaWQuZmluYWwgPT09ICd0JyAmJiAhaWQucHJlZml4ICYmICFpZC5pbnRlcm1lZGlhdGVzKSB7XG4gICAgICAvLyBzZWN1cml0eTogYWx3YXlzIGNoZWNrIHdoZXRoZXIgd2luZG93IG9wdGlvbiBpcyBhbGxvd2VkXG4gICAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgcGFyYW1zID0+IHtcbiAgICAgICAgaWYgKCFwYXJhbVRvV2luZG93T3B0aW9uKHBhcmFtcy5wYXJhbXNbMF0sIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2socGFyYW1zKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgcmVnaXN0ZXJEY3NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgbmV3IERjc0hhbmRsZXIoY2FsbGJhY2spKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkIHJlZ2lzdGVyRXNjSGFuZGxlciBmcm9tIHBhcnNlci5cbiAgICovXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcndhcmQgcmVnaXN0ZXJPc2NIYW5kbGVyIGZyb20gcGFyc2VyLlxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudDogbnVtYmVyLCBjYWxsYmFjazogKGRhdGE6IHN0cmluZykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQsIG5ldyBPc2NIYW5kbGVyKGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogQkVMXG4gICAqIEJlbGwgKEN0cmwtRykuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBCRUwgICBcIkJlbGxcIiAgXCJcXGEsIFxceDA3XCIgIFwiUmluZyB0aGUgYmVsbC5cIlxuICAgKiBUaGUgYmVoYXZpb3Igb2YgdGhlIGJlbGwgaXMgZnVydGhlciBjdXN0b21pemFibGUgd2l0aCBgSVRlcm1pbmFsT3B0aW9ucy5iZWxsU3R5bGVgXG4gICAqIGFuZCBgSVRlcm1pbmFsT3B0aW9ucy5iZWxsU291bmRgLlxuICAgKi9cbiAgcHVibGljIGJlbGwoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fb25SZXF1ZXN0QmVsbC5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogTEZcbiAgICogTGluZSBGZWVkIG9yIE5ldyBMaW5lIChOTCkuICAoTEYgIGlzIEN0cmwtSikuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBMRiAgIFwiTGluZSBGZWVkXCIgICAgICAgICAgICBcIlxcbiwgXFx4MEFcIiAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIHJvdyBkb3duLCBzY3JvbGxpbmcgaWYgbmVlZGVkLlwiXG4gICAqIFNjcm9sbGluZyBpcyByZXN0cmljdGVkIHRvIHNjcm9sbCBtYXJnaW5zIGFuZCB3aWxsIG9ubHkgaGFwcGVuIG9uIHRoZSBib3R0b20gbGluZS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIFZUICAgXCJWZXJ0aWNhbCBUYWJ1bGF0aW9uXCIgIFwiXFx2LCBcXHgwQlwiICBcIlRyZWF0ZWQgYXMgTEYuXCJcbiAgICogQHZ0OiAjWSAgIEMwICAgIEZGICAgXCJGb3JtIEZlZWRcIiAgICAgICAgICAgIFwiXFxmLCBcXHgwQ1wiICBcIlRyZWF0ZWQgYXMgTEYuXCJcbiAgICovXG4gIHB1YmxpYyBsaW5lRmVlZCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jb252ZXJ0RW9sKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IDA7XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55Kys7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID09PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tICsgMSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnktLTtcbiAgICAgIHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA+PSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhlcmUgd2FzIGFuIGV4cGxpY2l0IGxpbmUgZmVlZCAobm90IGp1c3QgYSBjYXJyaWFnZSByZXR1cm4pLCBzbyBjbGVhciB0aGUgd3JhcHBlZCBzdGF0ZSBvZlxuICAgICAgLy8gdGhlIGxpbmUuIFRoaXMgaXMgcGFydGljdWxhcmx5IGltcG9ydGFudCBvbiBjb25wdHkvV2luZG93cyB3aGVyZSByZXZpc2l0aW5nIGxpbmVzIHRvXG4gICAgICAvLyByZXByaW50IGlzIGNvbW1vbiwgZXNwZWNpYWxseSBvbiByZXNpemUuIE5vdGUgdGhhdCB0aGUgd2luZG93c01vZGUgd3JhcHBlZCBsaW5lIGhldXJpc3RpY3NcbiAgICAgIC8vIGNhbiBtZXNzIHdpdGggdGhpcyBzbyB3aW5kb3dzTW9kZSBzaG91bGQgYmUgZGlzYWJsZWQsIHdoaWNoIGlzIHJlY29tbWVuZGVkIG9uIFdpbmRvd3MgYnVpbGRcbiAgICAgIC8vIDIxMzc2IGFuZCBhYm92ZS5cbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpIS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gSWYgdGhlIGVuZCBvZiB0aGUgbGluZSBpcyBoaXQsIHByZXZlbnQgdGhpcyBhY3Rpb24gZnJvbSB3cmFwcGluZyBhcm91bmQgdG8gdGhlIG5leHQgbGluZS5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueC0tO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcblxuICAgIHRoaXMuX29uTGluZUZlZWQuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENSXG4gICAqIENhcnJpYWdlIFJldHVybiAoQ3RybC1NKS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIENSICAgXCJDYXJyaWFnZSBSZXR1cm5cIiAgXCJcXHIsIFxceDBEXCIgIFwiTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHJvdy5cIlxuICAgKi9cbiAgcHVibGljIGNhcnJpYWdlUmV0dXJuKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCU1xuICAgKiBCYWNrc3BhY2UgKEN0cmwtSCkuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMCAgICBCUyAgIFwiQmFja3NwYWNlXCIgIFwiXFxiLCBcXHgwOFwiICBcIk1vdmUgdGhlIGN1cnNvciBvbmUgcG9zaXRpb24gdG8gdGhlIGxlZnQuXCJcbiAgICogQnkgZGVmYXVsdCBpdCBpcyBub3QgcG9zc2libGUgdG8gbW92ZSB0aGUgY3Vyc29yIHBhc3QgdGhlIGxlZnRtb3N0IHBvc2l0aW9uLlxuICAgKiBJZiBgcmV2ZXJzZSB3cmFwLWFyb3VuZGAgKGBDU0kgPyA0NSBoYCkgaXMgc2V0LCBhIHByZXZpb3VzIHNvZnQgbGluZSB3cmFwIChERUNBV00pXG4gICAqIGNhbiBiZSB1bmRvbmUgd2l0aCBCUyB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zLiBJbiB0aGF0IGNhc2UgdGhlIGN1cnNvciB3aWxsIHdyYXAgYmFja1xuICAgKiB0byB0aGUgZW5kIG9mIHRoZSBwcmV2aW91cyByb3cuIE5vdGUgdGhhdCBpdCBpcyBub3QgcG9zc2libGUgdG8gcGVlayBiYWNrIGludG8gdGhlIHNjcm9sbGJ1ZmZlclxuICAgKiB3aXRoIHRoZSBjdXJzb3IsIHRodXMgYXQgdGhlIGhvbWUgcG9zaXRpb24gKHRvcC1sZWZ0bW9zdCBjZWxsKSB0aGlzIGhhcyBubyBlZmZlY3QuXG4gICAqL1xuICBwdWJsaWMgYmFja3NwYWNlKCk6IGJvb2xlYW4ge1xuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZGlzYWJsZWRcbiAgICBpZiAoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZCkge1xuICAgICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueCA+IDApIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngtLTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIHJldmVyc2Ugd3JhcC1hcm91bmQgaXMgZW5hYmxlZFxuICAgIC8vIG90aGVyIHRoYW4gZm9yIG5vcm1hbCBvcGVyYXRpb24gbW9kZSwgcmV2ZXJzZSB3cmFwLWFyb3VuZCBhbGxvd3MgdGhlIGN1cnNvclxuICAgIC8vIHRvIGJlIGF0IHg9Y29scyB0byBiZSBhYmxlIHRvIGFkZHJlc3MgdGhlIGxhc3QgY2VsbCBvZiBhIHJvdyBieSBCU1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPiAwKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueC0tO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIHJldmVyc2Ugd3JhcC1hcm91bmQgaGFuZGxpbmc6XG4gICAgICAgKiBPdXIgaW1wbGVtZW50YXRpb24gZGV2aWF0ZXMgZnJvbSB4dGVybSBvbiBwdXJwb3NlLiBEZXRhaWxzOlxuICAgICAgICogLSBvbmx5IHByZXZpb3VzIHNvZnQgTkxzIGNhbiBiZSByZXZlcnNlZCAoaXNXcmFwcGVkPXRydWUpXG4gICAgICAgKiAtIG9ubHkgd29ya3Mgd2l0aGluIHNjcm9sbGJvcmRlcnMgKHRvcC9ib3R0b20sIGxlZnQvcmlnaHQgbm90IHlldCBzdXBwb3J0ZWQpXG4gICAgICAgKiAtIGNhbm5vdCBwZWVrIGludG8gc2Nyb2xsYnVmZmVyXG4gICAgICAgKiAtIGFueSBjdXJzb3IgbW92ZW1lbnQgc2VxdWVuY2Uga2VlcHMgd29ya2luZyBhcyBleHBlY3RlZFxuICAgICAgICovXG4gICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPT09IDBcbiAgICAgICAgJiYgdGhpcy5fYWN0aXZlQnVmZmVyLnkgPiB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wXG4gICAgICAgICYmIHRoaXMuX2FjdGl2ZUJ1ZmZlci55IDw9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b21cbiAgICAgICAgJiYgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSk/LmlzV3JhcHBlZCkge1xuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSEuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS07XG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMTtcbiAgICAgICAgLy8gZmluZCBsYXN0IHRha2VuIGNlbGwgLSBsYXN0IGNlbGwgY2FuIGhhdmUgMyBkaWZmZXJlbnQgc3RhdGVzOlxuICAgICAgICAvLyAtIGhhc0NvbnRlbnQodHJ1ZSkgKyBoYXNXaWR0aCgxKTogbmFycm93IGNoYXIgLSB3ZSBhcmUgZG9uZVxuICAgICAgICAvLyAtIGhhc1dpZHRoKDApOiBzZWNvbmQgcGFydCBvZiB3aWRlIGNoYXIgLSB3ZSBhcmUgZG9uZVxuICAgICAgICAvLyAtIGhhc0NvbnRlbnQoZmFsc2UpICsgaGFzV2lkdGgoMSk6IGVtcHR5IGNlbGwgZHVlIHRvIGVhcmx5IHdyYXBwaW5nIHdpZGUgY2hhciwgZ28gb25lXG4gICAgICAgIC8vICAgY2VsbCBmdXJ0aGVyIGJhY2tcbiAgICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpITtcbiAgICAgICAgaWYgKGxpbmUuaGFzV2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngpICYmICFsaW5lLmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpKSB7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLngtLTtcbiAgICAgICAgICAvLyBXZSBkbyB0aGlzIG9ubHkgb25jZSwgc2luY2Ugd2lkdGg9MSArIGhhc0NvbnRlbnQ9ZmFsc2UgY3VycmVudGx5IGhhcHBlbnMgb25seSBvbmNlXG4gICAgICAgICAgLy8gYmVmb3JlIGVhcmx5IHdyYXBwaW5nIG9mIGEgd2lkZSBjaGFyLlxuICAgICAgICAgIC8vIFRoaXMgbmVlZHMgdG8gYmUgZml4ZWQgb25jZSB3ZSBzdXBwb3J0IGdyYXBoZW1lcyB0YWtpbmcgbW9yZSB0aGFuIDIgY2VsbHMuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUQUJcbiAgICogSG9yaXpvbnRhbCBUYWIgKEhUKSAoQ3RybC1JKS5cbiAgICpcbiAgICogQHZ0OiAjWSAgIEMwICAgIEhUICAgXCJIb3Jpem9udGFsIFRhYnVsYXRpb25cIiAgXCJcXHQsIFxceDA5XCIgIFwiTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBuZXh0IGNoYXJhY3RlciB0YWIgc3RvcC5cIlxuICAgKi9cbiAgcHVibGljIHRhYigpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luYWxYID0gdGhpcy5fYWN0aXZlQnVmZmVyLng7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSB0aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtcbiAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICB0aGlzLl9vbkExMXlUYWIuZmlyZSh0aGlzLl9hY3RpdmVCdWZmZXIueCAtIG9yaWdpbmFsWCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNPXG4gICAqIFNoaWZ0IE91dCAoQ3RybC1OKSAtPiBTd2l0Y2ggdG8gQWx0ZXJuYXRlIENoYXJhY3RlciBTZXQuICBUaGlzIGludm9rZXMgdGhlXG4gICAqIEcxIGNoYXJhY3RlciBzZXQuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBsaW1pdGVkIElTTy0yMDIyIGNoYXJzZXQgc3VwcG9ydC5dICBDMCAgICBTTyAgIFwiU2hpZnQgT3V0XCIgIFwiXFx4MEVcIiAgXCJTd2l0Y2ggdG8gYW4gYWx0ZXJuYXRpdmUgY2hhcmFjdGVyIHNldC5cIlxuICAgKi9cbiAgcHVibGljIHNoaWZ0T3V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTSVxuICAgKiBTaGlmdCBJbiAoQ3RybC1PKSAtPiBTd2l0Y2ggdG8gU3RhbmRhcmQgQ2hhcmFjdGVyIFNldC4gIFRoaXMgaW52b2tlcyB0aGUgRzBcbiAgICogY2hhcmFjdGVyIHNldCAodGhlIGRlZmF1bHQpLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzAgICAgU0kgICBcIlNoaWZ0IEluXCIgICBcIlxceDBGXCIgIFwiUmV0dXJuIHRvIHJlZ3VsYXIgY2hhcmFjdGVyIHNldCBhZnRlciBTaGlmdCBPdXQuXCJcbiAgICovXG4gIHB1YmxpYyBzaGlmdEluKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0cmljdCBjdXJzb3IgdG8gdmlld3BvcnQgc2l6ZSAvIHNjcm9sbCBtYXJnaW4gKG9yaWdpbiBtb2RlKS5cbiAgICovXG4gIHByaXZhdGUgX3Jlc3RyaWN0Q3Vyc29yKG1heENvbDogbnVtYmVyID0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIC0gMSk6IHZvaWQge1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gTWF0aC5taW4obWF4Q29sLCBNYXRoLm1heCgwLCB0aGlzLl9hY3RpdmVCdWZmZXIueCkpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID0gdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpblxuICAgICAgPyBNYXRoLm1pbih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLCBNYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIueSkpXG4gICAgICA6IE1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEsIE1hdGgubWF4KDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSk7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFic29sdXRlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX3NldEN1cnNvcih4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIGlmICh0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AgKyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHg7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IHk7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHJlbGF0aXZlIGN1cnNvciBwb3NpdGlvbi5cbiAgICovXG4gIHByaXZhdGUgX21vdmVDdXJzb3IoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBmb3IgcmVsYXRpdmUgY2hhbmdlcyB3ZSBoYXZlIHRvIG1ha2Ugc3VyZSB3ZSBhcmUgd2l0aGluIDAgLi4gY29scy9yb3dzIC0gMVxuICAgIC8vIGJlZm9yZSBjYWxjdWxhdGluZyB0aGUgbmV3IHBvc2l0aW9uXG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLnggKyB4LCB0aGlzLl9hY3RpdmVCdWZmZXIueSArIHkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBBXG4gICAqIEN1cnNvciBVcCBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVVUpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDVVUgICBcIkN1cnNvciBVcFwiICAgXCJDU0kgUHMgQVwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgdXAgKGRlZmF1bHQ9MSkuXCJcbiAgICogSWYgdGhlIGN1cnNvciB3b3VsZCBwYXNzIHRoZSB0b3Agc2Nyb2xsIG1hcmdpbiwgaXQgd2lsbCBzdG9wIHRoZXJlLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclVwKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsVG9wXG4gICAgY29uc3QgZGlmZlRvVG9wID0gdGhpcy5fYWN0aXZlQnVmZmVyLnkgLSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO1xuICAgIGlmIChkaWZmVG9Ub3AgPj0gMCkge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCAtTWF0aC5taW4oZGlmZlRvVG9wLCBwYXJhbXMucGFyYW1zWzBdIHx8IDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCAtKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgQlxuICAgKiBDdXJzb3IgRG93biBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDVUQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDVUQgICBcIkN1cnNvciBEb3duXCIgICBcIkNTSSBQcyBCXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBkb3duIChkZWZhdWx0PTEpLlwiXG4gICAqIElmIHRoZSBjdXJzb3Igd291bGQgcGFzcyB0aGUgYm90dG9tIHNjcm9sbCBtYXJnaW4sIGl0IHdpbGwgc3RvcCB0aGVyZS5cbiAgICovXG4gIHB1YmxpYyBjdXJzb3JEb3duKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIHN0b3AgYXQgc2Nyb2xsQm90dG9tXG4gICAgY29uc3QgZGlmZlRvQm90dG9tID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSAtIHRoaXMuX2FjdGl2ZUJ1ZmZlci55O1xuICAgIGlmIChkaWZmVG9Cb3R0b20gPj0gMCkge1xuICAgICAgdGhpcy5fbW92ZUN1cnNvcigwLCBNYXRoLm1pbihkaWZmVG9Cb3R0b20sIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9tb3ZlQ3Vyc29yKDAsIHBhcmFtcy5wYXJhbXNbMF0gfHwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBDXG4gICAqIEN1cnNvciBGb3J3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVRikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVRiAgIFwiQ3Vyc29yIEZvcndhcmRcIiAgICBcIkNTSSBQcyBDXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBmb3J3YXJkIChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yRm9yd2FyZChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIERcbiAgICogQ3Vyc29yIEJhY2t3YXJkIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENVQikuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIENVQiAgIFwiQ3Vyc29yIEJhY2t3YXJkXCIgICBcIkNTSSBQcyBEXCIgIFwiTW92ZSBjdXJzb3IgYFBzYCB0aW1lcyBiYWNrd2FyZCAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIGN1cnNvckJhY2t3YXJkKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoLShwYXJhbXMucGFyYW1zWzBdIHx8IDEpLCAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRVxuICAgKiBDdXJzb3IgTmV4dCBMaW5lIFBzIFRpbWVzIChkZWZhdWx0ID0gMSkgKENOTCkuXG4gICAqIE90aGVyIHRoYW4gY3Vyc29yRG93biAoQ1VEKSBhbHNvIHNldCB0aGUgY3Vyc29yIHRvIGZpcnN0IGNvbHVtbi5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ05MICAgXCJDdXJzb3IgTmV4dCBMaW5lXCIgIFwiQ1NJIFBzIEVcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIGRvd24gKGRlZmF1bHQ9MSkgYW5kIHRvIHRoZSBmaXJzdCBjb2x1bW4uXCJcbiAgICogU2FtZSBhcyBDVUQsIGFkZGl0aW9uYWxseSBwbGFjZXMgdGhlIGN1cnNvciBhdCB0aGUgZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvck5leHRMaW5lKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuY3Vyc29yRG93bihwYXJhbXMpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgRlxuICAgKiBDdXJzb3IgUHJldmlvdXMgTGluZSBQcyBUaW1lcyAoZGVmYXVsdCA9IDEpIChDUEwpLlxuICAgKiBPdGhlciB0aGFuIGN1cnNvclVwIChDVVUpIGFsc28gc2V0IHRoZSBjdXJzb3IgdG8gZmlyc3QgY29sdW1uLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDUEwgICBcIkN1cnNvciBCYWNrd2FyZFwiICAgXCJDU0kgUHMgRlwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgdXAgKGRlZmF1bHQ9MSkgYW5kIHRvIHRoZSBmaXJzdCBjb2x1bW4uXCJcbiAgICogU2FtZSBhcyBDVVUsIGFkZGl0aW9uYWxseSBwbGFjZXMgdGhlIGN1cnNvciBhdCB0aGUgZmlyc3QgY29sdW1uLlxuICAgKi9cbiAgcHVibGljIGN1cnNvclByZWNlZGluZ0xpbmUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5jdXJzb3JVcChwYXJhbXMpO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgR1xuICAgKiBDdXJzb3IgQ2hhcmFjdGVyIEFic29sdXRlICBbY29sdW1uXSAoZGVmYXVsdCA9IFtyb3csMV0pIChDSEEpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDSEEgICBcIkN1cnNvciBIb3Jpem9udGFsIEFic29sdXRlXCIgXCJDU0kgUHMgR1wiIFwiTW92ZSBjdXJzb3IgdG8gYFBzYC10aCBjb2x1bW4gb2YgdGhlIGFjdGl2ZSByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBjdXJzb3JDaGFyQWJzb2x1dGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMSwgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyA7IFBzIEhcbiAgICogQ3Vyc29yIFBvc2l0aW9uIFtyb3c7Y29sdW1uXSAoZGVmYXVsdCA9IFsxLDFdKSAoQ1VQKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgQ1VQICAgXCJDdXJzb3IgUG9zaXRpb25cIiAgIFwiQ1NJIFBzIDsgUHMgSFwiICBcIlNldCBjdXJzb3IgdG8gcG9zaXRpb24gW2BQc2AsIGBQc2BdIChkZWZhdWx0ID0gWzEsIDFdKS5cIlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBzZXQsIHBsYWNlcyB0aGUgY3Vyc29yIHRvIHRoZSBhYnNvbHV0ZSBwb3NpdGlvbiB3aXRoaW4gdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKiBJZiBPUklHSU4gbW9kZSBpcyBub3Qgc2V0LCBwbGFjZXMgdGhlIGN1cnNvciB0byB0aGUgYWJzb2x1dGUgcG9zaXRpb24gd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAgICogTm90ZSB0aGF0IHRoZSBjb29yZGluYXRlcyBhcmUgMS1iYXNlZCwgdGh1cyB0aGUgdG9wIGxlZnQgcG9zaXRpb24gc3RhcnRzIGF0IGAxIDsgMWAuXG4gICAqL1xuICBwdWJsaWMgY3Vyc29yUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fc2V0Q3Vyc29yKFxuICAgICAgLy8gY29sXG4gICAgICAocGFyYW1zLmxlbmd0aCA+PSAyKSA/IChwYXJhbXMucGFyYW1zWzFdIHx8IDEpIC0gMSA6IDAsXG4gICAgICAvLyByb3dcbiAgICAgIChwYXJhbXMucGFyYW1zWzBdIHx8IDEpIC0gMVxuICAgICk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGAgIENoYXJhY3RlciBQb3NpdGlvbiBBYnNvbHV0ZVxuICAgKiAgIFtjb2x1bW5dIChkZWZhdWx0ID0gW3JvdywxXSkgKEhQQSkuXG4gICAqIEN1cnJlbnRseSBzYW1lIGZ1bmN0aW9uYWxpdHkgYXMgQ0hBLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBIUEEgICBcIkhvcml6b250YWwgUG9zaXRpb24gQWJzb2x1dGVcIiAgXCJDU0kgUHMgYCBcIiBcIlNhbWUgYXMgQ0hBLlwiXG4gICAqL1xuICBwdWJsaWMgY2hhclBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcigocGFyYW1zLnBhcmFtc1swXSB8fCAxKSAtIDEsIHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gYSAgQ2hhcmFjdGVyIFBvc2l0aW9uIFJlbGF0aXZlXG4gICAqICAgW2NvbHVtbnNdIChkZWZhdWx0ID0gW3Jvdyxjb2wrMV0pIChIUFIpXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEhQUiAgIFwiSG9yaXpvbnRhbCBQb3NpdGlvbiBSZWxhdGl2ZVwiICBcIkNTSSBQcyBhXCIgIFwiU2FtZSBhcyBDVUYuXCJcbiAgICovXG4gIHB1YmxpYyBoUG9zaXRpb25SZWxhdGl2ZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9tb3ZlQ3Vyc29yKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSwgMCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIGQgIFZlcnRpY2FsIFBvc2l0aW9uIEFic29sdXRlIChWUEEpXG4gICAqICAgW3Jvd10gKGRlZmF1bHQgPSBbMSxjb2x1bW5dKVxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBWUEEgICBcIlZlcnRpY2FsIFBvc2l0aW9uIEFic29sdXRlXCIgICAgXCJDU0kgUHMgZFwiICBcIk1vdmUgY3Vyc29yIHRvIGBQc2AtdGggcm93IChkZWZhdWx0PTEpLlwiXG4gICAqL1xuICBwdWJsaWMgbGluZVBvc0Fic29sdXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3NldEN1cnNvcih0aGlzLl9hY3RpdmVCdWZmZXIueCwgKHBhcmFtcy5wYXJhbXNbMF0gfHwgMSkgLSAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gZSAgVmVydGljYWwgUG9zaXRpb24gUmVsYXRpdmUgKFZQUilcbiAgICogICBbcm93c10gKGRlZmF1bHQgPSBbcm93KzEsY29sdW1uXSlcbiAgICogcmV1c2UgQ1NJIFBzIEIgP1xuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBWUFIgICBcIlZlcnRpY2FsIFBvc2l0aW9uIFJlbGF0aXZlXCIgICAgXCJDU0kgUHMgZVwiICBcIk1vdmUgY3Vyc29yIGBQc2AgdGltZXMgZG93biAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIHZQb3NpdGlvblJlbGF0aXZlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX21vdmVDdXJzb3IoMCwgcGFyYW1zLnBhcmFtc1swXSB8fCAxKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyBmXG4gICAqICAgSG9yaXpvbnRhbCBhbmQgVmVydGljYWwgUG9zaXRpb24gW3Jvdztjb2x1bW5dIChkZWZhdWx0ID1cbiAgICogICBbMSwxXSkgKEhWUCkuXG4gICAqICAgU2FtZSBhcyBDVVAuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEhWUCAgIFwiSG9yaXpvbnRhbCBhbmQgVmVydGljYWwgUG9zaXRpb25cIiBcIkNTSSBQcyA7IFBzIGZcIiAgXCJTYW1lIGFzIENVUC5cIlxuICAgKi9cbiAgcHVibGljIGhWUG9zaXRpb24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5jdXJzb3JQb3NpdGlvbihwYXJhbXMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBnICBUYWIgQ2xlYXIgKFRCQykuXG4gICAqICAgICBQcyA9IDAgIC0+IENsZWFyIEN1cnJlbnQgQ29sdW1uIChkZWZhdWx0KS5cbiAgICogICAgIFBzID0gMyAgLT4gQ2xlYXIgQWxsLlxuICAgKiBQb3RlbnRpYWxseTpcbiAgICogICBQcyA9IDIgIC0+IENsZWFyIFN0b3BzIG9uIExpbmUuXG4gICAqICAgaHR0cDovL3Z0MTAwLm5ldC9hbm5hcmJvci9hYWEtdWcvc2VjdGlvbjYuaHRtbFxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBUQkMgICBcIlRhYiBDbGVhclwiIFwiQ1NJIFBzIGdcIiAgXCJDbGVhciB0YWIgc3RvcHMgYXQgY3VycmVudCBwb3NpdGlvbiAoMCkgb3IgYWxsICgzKSAoZGVmYXVsdD0wKS5cIlxuICAgKiBDbGVhcmluZyB0YWJzdG9wcyBvZmYgdGhlIGFjdGl2ZSByb3cgKFBzID0gMiwgVlQxMDApIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLlxuICAgKi9cbiAgcHVibGljIHRhYkNsZWFyKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXTtcbiAgICBpZiAocGFyYW0gPT09IDApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF07XG4gICAgfSBlbHNlIGlmIChwYXJhbSA9PT0gMykge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnRhYnMgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIElcbiAgICogICBDdXJzb3IgRm9yd2FyZCBUYWJ1bGF0aW9uIFBzIHRhYiBzdG9wcyAoZGVmYXVsdCA9IDEpIChDSFQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDSFQgICBcIkN1cnNvciBIb3Jpem9udGFsIFRhYnVsYXRpb25cIiBcIkNTSSBQcyBJXCIgXCJNb3ZlIGN1cnNvciBgUHNgIHRpbWVzIHRhYnMgZm9yd2FyZCAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIGN1cnNvckZvcndhcmRUYWIocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggPSB0aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFogIEN1cnNvciBCYWNrd2FyZCBUYWJ1bGF0aW9uIFBzIHRhYiBzdG9wcyAoZGVmYXVsdCA9IDEpIChDQlQpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBDQlQgICBcIkN1cnNvciBCYWNrd2FyZCBUYWJ1bGF0aW9uXCIgIFwiQ1NJIFBzIFpcIiAgXCJNb3ZlIGN1cnNvciBgUHNgIHRhYnMgYmFja3dhcmQgKGRlZmF1bHQ9MSkuXCJcbiAgICovXG4gIHB1YmxpYyBjdXJzb3JCYWNrd2FyZFRhYihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggPj0gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnByZXZTdG9wKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBcIiBxICBTZWxlY3QgQ2hhcmFjdGVyIFByb3RlY3Rpb24gQXR0cmlidXRlIChERUNTQ0EpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNTQ0EgICBcIlNlbGVjdCBDaGFyYWN0ZXIgUHJvdGVjdGlvbiBBdHRyaWJ1dGVcIiAgXCJDU0kgUHMgXCIgcVwiICBcIldoZXRoZXIgREVDU0VEIGFuZCBERUNTRUwgY2FuIGVyYXNlICgwPWRlZmF1bHQsIDIpIG9yIG5vdCAoMSkuXCJcbiAgICovXG4gIHB1YmxpYyBzZWxlY3RQcm90ZWN0ZWQocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgY29uc3QgcCA9IHBhcmFtcy5wYXJhbXNbMF07XG4gICAgaWYgKHAgPT09IDEpIHRoaXMuX2N1ckF0dHJEYXRhLmJnIHw9IEJnRmxhZ3MuUFJPVEVDVEVEO1xuICAgIGlmIChwID09PSAyIHx8IHAgPT09IDApIHRoaXMuX2N1ckF0dHJEYXRhLmJnICY9IH5CZ0ZsYWdzLlBST1RFQ1RFRDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhlbHBlciBtZXRob2QgdG8gZXJhc2UgY2VsbHMgaW4gYSB0ZXJtaW5hbCByb3cuXG4gICAqIFRoZSBjZWxsIGdldHMgcmVwbGFjZWQgd2l0aCB0aGUgZXJhc2VDaGFyIG9mIHRoZSB0ZXJtaW5hbC5cbiAgICogQHBhcmFtIHkgVGhlIHJvdyBpbmRleCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgc3RhcnQgeCBpbmRleCBvZiB0aGUgcmFuZ2UgdG8gYmUgZXJhc2VkLlxuICAgKiBAcGFyYW0gZW5kIFRoZSBlbmQgeCBpbmRleCBvZiB0aGUgcmFuZ2UgdG8gYmUgZXJhc2VkIChleGNsdXNpdmUpLlxuICAgKiBAcGFyYW0gY2xlYXJXcmFwIGNsZWFyIHRoZSBpc1dyYXBwZWQgZmxhZ1xuICAgKiBAcGFyYW0gcmVzcGVjdFByb3RlY3QgV2hldGhlciB0byByZXNwZWN0IHRoZSBwcm90ZWN0aW9uIGF0dHJpYnV0ZSAoREVDU0NBKS5cbiAgICovXG4gIHByaXZhdGUgX2VyYXNlSW5CdWZmZXJMaW5lKHk6IG51bWJlciwgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGNsZWFyV3JhcDogYm9vbGVhbiA9IGZhbHNlLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgeSkhO1xuICAgIGxpbmUucmVwbGFjZUNlbGxzKFxuICAgICAgc3RhcnQsXG4gICAgICBlbmQsXG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxcbiAgICAgIHJlc3BlY3RQcm90ZWN0XG4gICAgKTtcbiAgICBpZiAoY2xlYXJXcmFwKSB7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgbWV0aG9kIHRvIHJlc2V0IGNlbGxzIGluIGEgdGVybWluYWwgcm93LiBUaGUgY2VsbCBnZXRzIHJlcGxhY2VkIHdpdGggdGhlIGVyYXNlQ2hhciBvZlxuICAgKiB0aGUgdGVybWluYWwgYW5kIHRoZSBpc1dyYXBwZWQgcHJvcGVydHkgaXMgc2V0IHRvIGZhbHNlLlxuICAgKiBAcGFyYW0geSByb3cgaW5kZXhcbiAgICovXG4gIHByaXZhdGUgX3Jlc2V0QnVmZmVyTGluZSh5OiBudW1iZXIsIHJlc3BlY3RQcm90ZWN0OiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB5KTtcbiAgICBpZiAobGluZSkge1xuICAgICAgbGluZS5maWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5jbGVhck1hcmtlcnModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgeSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgSiAgRXJhc2UgaW4gRGlzcGxheSAoRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBFcmFzZSBCZWxvdyAoZGVmYXVsdCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEVyYXNlIEFib3ZlLlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqICAgICBQcyA9IDMgIC0+IEVyYXNlIFNhdmVkIExpbmVzICh4dGVybSkuXG4gICAqIENTSSA/IFBzIEpcbiAgICogICBFcmFzZSBpbiBEaXNwbGF5IChERUNTRUQpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgQmVsb3cgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgQWJvdmUuXG4gICAqICAgICBQcyA9IDIgIC0+IFNlbGVjdGl2ZSBFcmFzZSBBbGwuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIEVEICBcIkVyYXNlIEluIERpc3BsYXlcIiAgXCJDU0kgUHMgSlwiICBcIkVyYXNlIHZhcmlvdXMgcGFydHMgb2YgdGhlIHZpZXdwb3J0LlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXM6XG4gICAqXG4gICAqIHwgUHMgfCBFZmZlY3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgKiB8IC0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAgICogfCAwICB8IEVyYXNlIGZyb20gdGhlIGN1cnNvciB0aHJvdWdoIHRoZSBlbmQgb2YgdGhlIHZpZXdwb3J0LiAgICAgICB8XG4gICAqIHwgMSAgfCBFcmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHZpZXdwb3J0IHRocm91Z2ggdGhlIGN1cnNvci4gfFxuICAgKiB8IDIgIHwgRXJhc2UgY29tcGxldGUgdmlld3BvcnQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCAzICB8IEVyYXNlIHNjcm9sbGJhY2suICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NFRCAgIFwiU2VsZWN0aXZlIEVyYXNlIEluIERpc3BsYXlcIiAgXCJDU0kgPyBQcyBKXCIgIFwiU2FtZSBhcyBFRCB3aXRoIHJlc3BlY3RpbmcgcHJvdGVjdGlvbiBmbGFnLlwiXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkRpc3BsYXkocGFyYW1zOiBJUGFyYW1zLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBsZXQgajtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgaiA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci55O1xuICAgICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGopO1xuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZShqKyssIHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID09PSAwLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICAgIGZvciAoOyBqIDwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyBqKyspIHtcbiAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaiwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICBqID0gdGhpcy5fYWN0aXZlQnVmZmVyLnk7XG4gICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkoaik7XG4gICAgICAgIC8vIERlbGV0ZWQgZnJvbnQgcGFydCBvZiBsaW5lIGFuZCBldmVyeXRoaW5nIGJlZm9yZS4gVGhpcyBsaW5lIHdpbGwgbm8gbG9uZ2VyIGJlIHdyYXBwZWQuXG4gICAgICAgIHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKGosIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgMSwgdHJ1ZSwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnggKyAxID49IHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykge1xuICAgICAgICAgIC8vIERlbGV0ZWQgZW50aXJlIHByZXZpb3VzIGxpbmUuIFRoaXMgbmV4dCBsaW5lIGNhbiBubyBsb25nZXIgYmUgd3JhcHBlZC5cbiAgICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KGogKyAxKSEuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QnVmZmVyTGluZShqLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbE9uRXJhc2VJbkRpc3BsYXkpIHtcbiAgICAgICAgICBqID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgICAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSgwLCBqIC0gMSk7XG4gICAgICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudExpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIGopO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRMaW5lPy5nZXRUcmltbWVkTGVuZ3RoKCkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICAgICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KGogLSAxKTtcbiAgICAgICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNldEJ1ZmZlckxpbmUoaiwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KDApO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICAvLyBDbGVhciBzY3JvbGxiYWNrIChldmVyeXRoaW5nIG5vdCBpbiB2aWV3cG9ydClcbiAgICAgICAgY29uc3Qgc2Nyb2xsQmFja1NpemUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMubGVuZ3RoIC0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO1xuICAgICAgICBpZiAoc2Nyb2xsQmFja1NpemUgPiAwKSB7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnRyaW1TdGFydChzY3JvbGxCYWNrU2l6ZSk7XG4gICAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlID0gTWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlIC0gc2Nyb2xsQmFja1NpemUsIDApO1xuICAgICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcCA9IE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcCAtIHNjcm9sbEJhY2tTaXplLCAwKTtcbiAgICAgICAgICAvLyBGb3JjZSBhIHNjcm9sbCBldmVudCB0byByZWZyZXNoIHZpZXdwb3J0XG4gICAgICAgICAgdGhpcy5fb25TY3JvbGwuZmlyZSgwKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIEsgIEVyYXNlIGluIExpbmUgKEVMKS5cbiAgICogICAgIFBzID0gMCAgLT4gRXJhc2UgdG8gUmlnaHQgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBFcmFzZSB0byBMZWZ0LlxuICAgKiAgICAgUHMgPSAyICAtPiBFcmFzZSBBbGwuXG4gICAqIENTSSA/IFBzIEtcbiAgICogICBFcmFzZSBpbiBMaW5lIChERUNTRUwpLlxuICAgKiAgICAgUHMgPSAwICAtPiBTZWxlY3RpdmUgRXJhc2UgdG8gUmlnaHQgKGRlZmF1bHQpLlxuICAgKiAgICAgUHMgPSAxICAtPiBTZWxlY3RpdmUgRXJhc2UgdG8gTGVmdC5cbiAgICogICAgIFBzID0gMiAgLT4gU2VsZWN0aXZlIEVyYXNlIEFsbC5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgRUwgICAgXCJFcmFzZSBJbiBMaW5lXCIgIFwiQ1NJIFBzIEtcIiAgXCJFcmFzZSB2YXJpb3VzIHBhcnRzIG9mIHRoZSBhY3RpdmUgcm93LlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXM6XG4gICAqXG4gICAqIHwgUHMgfCBFZmZlY3QgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqIHwgLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8XG4gICAqIHwgMCAgfCBFcmFzZSBmcm9tIHRoZSBjdXJzb3IgdGhyb3VnaCB0aGUgZW5kIG9mIHRoZSByb3cuICAgICAgICB8XG4gICAqIHwgMSAgfCBFcmFzZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGxpbmUgdGhyb3VnaCB0aGUgY3Vyc29yLiB8XG4gICAqIHwgMiAgfCBFcmFzZSBjb21wbGV0ZSBsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NFTCAgIFwiU2VsZWN0aXZlIEVyYXNlIEluIExpbmVcIiAgXCJDU0kgPyBQcyBLXCIgIFwiU2FtZSBhcyBFTCB3aXRoIHJlc3BlY3RpbmcgcHJvdGVjdGluZyBmbGFnLlwiXG4gICAqL1xuICBwdWJsaWMgZXJhc2VJbkxpbmUocGFyYW1zOiBJUGFyYW1zLCByZXNwZWN0UHJvdGVjdDogYm9vbGVhbiA9IGZhbHNlKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTtcbiAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbMF0pIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksIHRoaXMuX2FjdGl2ZUJ1ZmZlci54LCB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID09PSAwLCByZXNwZWN0UHJvdGVjdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOlxuICAgICAgICB0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSwgMCwgdGhpcy5fYWN0aXZlQnVmZmVyLnggKyAxLCBmYWxzZSwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksIDAsIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywgdHJ1ZSwgcmVzcGVjdFByb3RlY3QpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIExcbiAgICogSW5zZXJ0IFBzIExpbmUocykgKGRlZmF1bHQgPSAxKSAoSUwpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBJTCAgXCJJbnNlcnQgTGluZVwiICAgXCJDU0kgUHMgTFwiICBcIkluc2VydCBgUHNgIGJsYW5rIGxpbmVzIGF0IGFjdGl2ZSByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICogRm9yIGV2ZXJ5IGluc2VydGVkIGxpbmUgYXQgdGhlIHNjcm9sbCB0b3Agb25lIGxpbmUgYXQgdGhlIHNjcm9sbCBib3R0b20gZ2V0cyByZW1vdmVkLlxuICAgKiBUaGUgY3Vyc29yIGlzIHNldCB0byB0aGUgZmlyc3QgY29sdW1uLlxuICAgKiBJTCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBjdXJzb3IgaXMgb3V0c2lkZSB0aGUgc2Nyb2xsIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgaW5zZXJ0TGluZXMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPiB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tIHx8IHRoaXMuX2FjdGl2ZUJ1ZmZlci55IDwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgcm93OiBudW1iZXIgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueTtcblxuICAgIGNvbnN0IHNjcm9sbEJvdHRvbVJvd3NPZmZzZXQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxIC0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTtcbiAgICBjb25zdCBzY3JvbGxCb3R0b21BYnNvbHV0ZSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgKyB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgLSBzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0ICsgMTtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTFxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHNjcm9sbEJvdHRvbUFic29sdXRlIC0gMSwgMSk7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHJvdywgMCwgdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54ID0gMDsgLy8gc2VlIGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQyMjAtcm0vY2hhcHRlcjQuaHRtbCAtIHZ0MjIwIG9ubHk/XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIE1cbiAgICogRGVsZXRlIFBzIExpbmUocykgKGRlZmF1bHQgPSAxKSAoREwpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBETCAgXCJEZWxldGUgTGluZVwiICAgXCJDU0kgUHMgTVwiICBcIkRlbGV0ZSBgUHNgIGxpbmVzIGF0IGFjdGl2ZSByb3cgKGRlZmF1bHQ9MSkuXCJcbiAgICogRm9yIGV2ZXJ5IGRlbGV0ZWQgbGluZSBhdCB0aGUgc2Nyb2xsIHRvcCBvbmUgYmxhbmsgbGluZSBhdCB0aGUgc2Nyb2xsIGJvdHRvbSBnZXRzIGFwcGVuZGVkLlxuICAgKiBUaGUgY3Vyc29yIGlzIHNldCB0byB0aGUgZmlyc3QgY29sdW1uLlxuICAgKiBETCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBjdXJzb3IgaXMgb3V0c2lkZSB0aGUgc2Nyb2xsIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlTGluZXMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPiB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tIHx8IHRoaXMuX2FjdGl2ZUJ1ZmZlci55IDwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgcm93OiBudW1iZXIgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueTtcblxuICAgIGxldCBqOiBudW1iZXI7XG4gICAgaiA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDEgLSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tO1xuICAgIGogPSB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MgLSAxICsgdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlIC0gajtcbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgLy8gdGVzdDogZWNobyAtZSAnXFxlWzQ0bVxcZVsxTVxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSAtIHh0ZXJtL2xpbnV4IGJlaGF2aW9yXG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHJvdywgMSk7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKGosIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IDA7IC8vIHNlZSBodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL2NoYXB0ZXI0Lmh0bWwgLSB2dDIyMCBvbmx5P1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBAXG4gICAqIEluc2VydCBQcyAoQmxhbmspIENoYXJhY3RlcihzKSAoZGVmYXVsdCA9IDEpIChJQ0gpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBJQ0ggIFwiSW5zZXJ0IENoYXJhY3RlcnNcIiAgIFwiQ1NJIFBzIEBcIiAgXCJJbnNlcnQgYFBzYCAoYmxhbmspIGNoYXJhY3RlcnMgKGRlZmF1bHQgPSAxKS5cIlxuICAgKiBUaGUgSUNIIHNlcXVlbmNlIGluc2VydHMgYFBzYCBibGFuayBjaGFyYWN0ZXJzLiBUaGUgY3Vyc29yIHJlbWFpbnMgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGVcbiAgICogYmxhbmsgY2hhcmFjdGVycy4gVGV4dCBiZXR3ZWVuIHRoZSBjdXJzb3IgYW5kIHJpZ2h0IG1hcmdpbiBtb3ZlcyB0byB0aGUgcmlnaHQuIENoYXJhY3RlcnMgbW92ZWRcbiAgICogcGFzdCB0aGUgcmlnaHQgbWFyZ2luIGFyZSBsb3N0LlxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogY2hlY2sgYWdhaW5zdCB4dGVybSAtIHNob3VsZCBub3Qgd29yayBvdXRzaWRlIG9mIHNjcm9sbCBtYXJnaW5zIChzZWUgVlQ1MjAgbWFudWFsKVxuICAgKi9cbiAgcHVibGljIGluc2VydENoYXJzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIGlmIChsaW5lKSB7XG4gICAgICBsaW5lLmluc2VydENlbGxzKFxuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCxcbiAgICAgICAgcGFyYW1zLnBhcmFtc1swXSB8fCAxLFxuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgUFxuICAgKiBEZWxldGUgUHMgQ2hhcmFjdGVyKHMpIChkZWZhdWx0ID0gMSkgKERDSCkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERDSCAgIFwiRGVsZXRlIENoYXJhY3RlclwiICBcIkNTSSBQcyBQXCIgIFwiRGVsZXRlIGBQc2AgY2hhcmFjdGVycyAoZGVmYXVsdD0xKS5cIlxuICAgKiBBcyBjaGFyYWN0ZXJzIGFyZSBkZWxldGVkLCB0aGUgcmVtYWluaW5nIGNoYXJhY3RlcnMgYmV0d2VlbiB0aGUgY3Vyc29yIGFuZCByaWdodCBtYXJnaW4gbW92ZSB0b1xuICAgKiB0aGUgbGVmdC4gQ2hhcmFjdGVyIGF0dHJpYnV0ZXMgbW92ZSB3aXRoIHRoZSBjaGFyYWN0ZXJzLiBUaGUgdGVybWluYWwgYWRkcyBibGFuayBjaGFyYWN0ZXJzIGF0XG4gICAqIHRoZSByaWdodCBtYXJnaW4uXG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiBjaGVjayBhZ2FpbnN0IHh0ZXJtIC0gc2hvdWxkIG5vdCB3b3JrIG91dHNpZGUgb2Ygc2Nyb2xsIG1hcmdpbnMgKHNlZSBWVDUyMCBtYW51YWwpXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlQ2hhcnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gICAgaWYgKGxpbmUpIHtcbiAgICAgIGxpbmUuZGVsZXRlQ2VsbHMoXG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci54LFxuICAgICAgICBwYXJhbXMucGFyYW1zWzBdIHx8IDEsXG4gICAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpXG4gICAgICApO1xuICAgICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTICBTY3JvbGwgdXAgUHMgbGluZXMgKGRlZmF1bHQgPSAxKSAoU1UpLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBTVSAgXCJTY3JvbGwgVXBcIiAgIFwiQ1NJIFBzIFNcIiAgXCJTY3JvbGwgYFBzYCBsaW5lcyB1cCAoZGVmYXVsdD0xKS5cIlxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogc2Nyb2xsZWQgb3V0IGxpbmVzIGF0IHRvcCA9IDEgc2hvdWxkIGFkZCB0byBzY3JvbGxiYWNrICh4dGVybSlcbiAgICovXG4gIHB1YmxpYyBzY3JvbGxVcChwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBsZXQgcGFyYW0gPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG5cbiAgICB3aGlsZSAocGFyYW0tLSkge1xuICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCAxKTtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwgMCwgdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBUICBTY3JvbGwgZG93biBQcyBsaW5lcyAoZGVmYXVsdCA9IDEpIChTRCkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIFNEICBcIlNjcm9sbCBEb3duXCIgICBcIkNTSSBQcyBUXCIgIFwiU2Nyb2xsIGBQc2AgbGluZXMgZG93biAoZGVmYXVsdD0xKS5cIlxuICAgKi9cbiAgcHVibGljIHNjcm9sbERvd24ocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgbGV0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuXG4gICAgd2hpbGUgKHBhcmFtLS0pIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwgMSk7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsIDAsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUoREVGQVVMVF9BVFRSX0RBVEEpKTtcbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyBTUCBAICBTY3JvbGwgbGVmdCBQcyBjb2x1bW5zIChkZWZhdWx0ID0gMSkgKFNMKSBFQ01BLTQ4XG4gICAqXG4gICAqIE5vdGF0aW9uOiAoUG4pXG4gICAqIFJlcHJlc2VudGF0aW9uOiBDU0kgUG4gMDIvMDAgMDQvMDBcbiAgICogUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWU6IFBuID0gMVxuICAgKiBTTCBjYXVzZXMgdGhlIGRhdGEgaW4gdGhlIHByZXNlbnRhdGlvbiBjb21wb25lbnQgdG8gYmUgbW92ZWQgYnkgbiBjaGFyYWN0ZXIgcG9zaXRpb25zXG4gICAqIGlmIHRoZSBsaW5lIG9yaWVudGF0aW9uIGlzIGhvcml6b250YWwsIG9yIGJ5IG4gbGluZSBwb3NpdGlvbnMgaWYgdGhlIGxpbmUgb3JpZW50YXRpb25cbiAgICogaXMgdmVydGljYWwsIHN1Y2ggdGhhdCB0aGUgZGF0YSBhcHBlYXIgdG8gbW92ZSB0byB0aGUgbGVmdDsgd2hlcmUgbiBlcXVhbHMgdGhlIHZhbHVlIG9mIFBuLlxuICAgKiBUaGUgYWN0aXZlIHByZXNlbnRhdGlvbiBwb3NpdGlvbiBpcyBub3QgYWZmZWN0ZWQgYnkgdGhpcyBjb250cm9sIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBTdXBwb3J0ZWQ6XG4gICAqICAgLSBhbHdheXMgbGVmdCBzaGlmdCAobm8gbGluZSBvcmllbnRhdGlvbiBzZXR0aW5nIHJlc3BlY3RlZClcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgU0wgIFwiU2Nyb2xsIExlZnRcIiBcIkNTSSBQcyBTUCBAXCIgXCJTY3JvbGwgdmlld3BvcnQgYFBzYCB0aW1lcyB0byB0aGUgbGVmdC5cIlxuICAgKiBTTCBtb3ZlcyB0aGUgY29udGVudCBvZiBhbGwgbGluZXMgd2l0aGluIHRoZSBzY3JvbGwgbWFyZ2lucyBgUHNgIHRpbWVzIHRvIHRoZSBsZWZ0LlxuICAgKiBTTCBoYXMgbm8gZWZmZWN0IG91dHNpZGUgb2YgdGhlIHNjcm9sbCBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIHNjcm9sbExlZnQocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDsgeSA8PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHkpITtcbiAgICAgIGxpbmUuZGVsZXRlQ2VsbHMoMCwgcGFyYW0sIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgU1AgQSAgU2Nyb2xsIHJpZ2h0IFBzIGNvbHVtbnMgKGRlZmF1bHQgPSAxKSAoU1IpIEVDTUEtNDhcbiAgICpcbiAgICogTm90YXRpb246IChQbilcbiAgICogUmVwcmVzZW50YXRpb246IENTSSBQbiAwMi8wMCAwNC8wMVxuICAgKiBQYXJhbWV0ZXIgZGVmYXVsdCB2YWx1ZTogUG4gPSAxXG4gICAqIFNSIGNhdXNlcyB0aGUgZGF0YSBpbiB0aGUgcHJlc2VudGF0aW9uIGNvbXBvbmVudCB0byBiZSBtb3ZlZCBieSBuIGNoYXJhY3RlciBwb3NpdGlvbnNcbiAgICogaWYgdGhlIGxpbmUgb3JpZW50YXRpb24gaXMgaG9yaXpvbnRhbCwgb3IgYnkgbiBsaW5lIHBvc2l0aW9ucyBpZiB0aGUgbGluZSBvcmllbnRhdGlvblxuICAgKiBpcyB2ZXJ0aWNhbCwgc3VjaCB0aGF0IHRoZSBkYXRhIGFwcGVhciB0byBtb3ZlIHRvIHRoZSByaWdodDsgd2hlcmUgbiBlcXVhbHMgdGhlIHZhbHVlIG9mIFBuLlxuICAgKiBUaGUgYWN0aXZlIHByZXNlbnRhdGlvbiBwb3NpdGlvbiBpcyBub3QgYWZmZWN0ZWQgYnkgdGhpcyBjb250cm9sIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBTdXBwb3J0ZWQ6XG4gICAqICAgLSBhbHdheXMgcmlnaHQgc2hpZnQgKG5vIGxpbmUgb3JpZW50YXRpb24gc2V0dGluZyByZXNwZWN0ZWQpXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIFNSICBcIlNjcm9sbCBSaWdodFwiICBcIkNTSSBQcyBTUCBBXCIgICBcIlNjcm9sbCB2aWV3cG9ydCBgUHNgIHRpbWVzIHRvIHRoZSByaWdodC5cIlxuICAgKiBTTCBtb3ZlcyB0aGUgY29udGVudCBvZiBhbGwgbGluZXMgd2l0aGluIHRoZSBzY3JvbGwgbWFyZ2lucyBgUHNgIHRpbWVzIHRvIHRoZSByaWdodC5cbiAgICogQ29udGVudCBhdCB0aGUgcmlnaHQgbWFyZ2luIGlzIGxvc3QuXG4gICAqIFNMIGhhcyBubyBlZmZlY3Qgb3V0c2lkZSBvZiB0aGUgc2Nyb2xsIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsUmlnaHQocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDsgeSA8PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHkpITtcbiAgICAgIGxpbmUuaW5zZXJ0Q2VsbHMoMCwgcGFyYW0sIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUG0gJyB9XG4gICAqIEluc2VydCBQcyBDb2x1bW4ocykgKGRlZmF1bHQgPSAxKSAoREVDSUMpLCBWVDQyMCBhbmQgdXAuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ0lDIFwiSW5zZXJ0IENvbHVtbnNcIiAgXCJDU0kgUHMgJyB9XCIgIFwiSW5zZXJ0IGBQc2AgY29sdW1ucyBhdCBjdXJzb3IgcG9zaXRpb24uXCJcbiAgICogREVDSUMgaW5zZXJ0cyBgUHNgIHRpbWVzIGJsYW5rIGNvbHVtbnMgYXQgdGhlIGN1cnNvciBwb3NpdGlvbiBmb3IgYWxsIGxpbmVzIHdpdGggdGhlIHNjcm9sbFxuICAgKiBtYXJnaW5zLCBtb3ZpbmcgY29udGVudCB0byB0aGUgcmlnaHQuIENvbnRlbnQgYXQgdGhlIHJpZ2h0IG1hcmdpbiBpcyBsb3N0LiBERUNJQyBoYXMgbm8gZWZmZWN0XG4gICAqIG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGluc2VydENvbHVtbnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMuX2FjdGl2ZUJ1ZmZlci55ID4gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSB8fCB0aGlzLl9hY3RpdmVCdWZmZXIueSA8IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBwYXJhbSA9IHBhcmFtcy5wYXJhbXNbMF0gfHwgMTtcbiAgICBmb3IgKGxldCB5ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDsgeSA8PSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOyArK3kpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSArIHkpITtcbiAgICAgIGxpbmUuaW5zZXJ0Q2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsIHBhcmFtLCB0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICBsaW5lLmlzV3JhcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtICcgflxuICAgKiBEZWxldGUgUHMgQ29sdW1uKHMpIChkZWZhdWx0ID0gMSkgKERFQ0RDKSwgVlQ0MjAgYW5kIHVwLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNEQyBcIkRlbGV0ZSBDb2x1bW5zXCIgIFwiQ1NJIFBzICcgflwiICBcIkRlbGV0ZSBgUHNgIGNvbHVtbnMgYXQgY3Vyc29yIHBvc2l0aW9uLlwiXG4gICAqIERFQ0RDIGRlbGV0ZXMgYFBzYCB0aW1lcyBjb2x1bW5zIGF0IHRoZSBjdXJzb3IgcG9zaXRpb24gZm9yIGFsbCBsaW5lcyB3aXRoIHRoZSBzY3JvbGwgbWFyZ2lucyxcbiAgICogbW92aW5nIGNvbnRlbnQgdG8gdGhlIGxlZnQuIEJsYW5rIGNvbHVtbnMgYXJlIGFkZGVkIGF0IHRoZSByaWdodCBtYXJnaW4uXG4gICAqIERFQ0RDIGhhcyBubyBlZmZlY3Qgb3V0c2lkZSB0aGUgc2Nyb2xsaW5nIG1hcmdpbnMuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlQ29sdW1ucyhwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPiB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tIHx8IHRoaXMuX2FjdGl2ZUJ1ZmZlci55IDwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIGZvciAobGV0IHkgPSB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wOyB5IDw9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207ICsreSkge1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgeSkhO1xuICAgICAgbGluZS5kZWxldGVDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCwgcGFyYW0sIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtcbiAgICAgIGxpbmUuaXNXcmFwcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX2RpcnR5Um93VHJhY2tlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLCB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgWFxuICAgKiBFcmFzZSBQcyBDaGFyYWN0ZXIocykgKGRlZmF1bHQgPSAxKSAoRUNIKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgRUNIICAgXCJFcmFzZSBDaGFyYWN0ZXJcIiAgIFwiQ1NJIFBzIFhcIiAgXCJFcmFzZSBgUHNgIGNoYXJhY3RlcnMgZnJvbSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbiB0byB0aGUgcmlnaHQgKGRlZmF1bHQ9MSkuXCJcbiAgICogRUQgZXJhc2VzIGBQc2AgY2hhcmFjdGVycyBmcm9tIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uIHRvIHRoZSByaWdodC5cbiAgICogRUQgd29ya3MgaW5zaWRlIG9yIG91dHNpZGUgdGhlIHNjcm9sbGluZyBtYXJnaW5zLlxuICAgKi9cbiAgcHVibGljIGVyYXNlQ2hhcnMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBjb25zdCBsaW5lID0gdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSk7XG4gICAgaWYgKGxpbmUpIHtcbiAgICAgIGxpbmUucmVwbGFjZUNlbGxzKFxuICAgICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCxcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLnggKyAocGFyYW1zLnBhcmFtc1swXSB8fCAxKSxcbiAgICAgICAgdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSlcbiAgICAgICk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIGIgIFJlcGVhdCB0aGUgcHJlY2VkaW5nIGdyYXBoaWMgY2hhcmFjdGVyIFBzIHRpbWVzIChSRVApLlxuICAgKiBGcm9tIEVDTUEgNDggKEBzZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL3B1YmxpY2F0aW9ucy9maWxlcy9FQ01BLVNUL0VjbWEtMDQ4LnBkZilcbiAgICogICAgTm90YXRpb246IChQbilcbiAgICogICAgUmVwcmVzZW50YXRpb246IENTSSBQbiAwNi8wMlxuICAgKiAgICBQYXJhbWV0ZXIgZGVmYXVsdCB2YWx1ZTogUG4gPSAxXG4gICAqICAgIFJFUCBpcyB1c2VkIHRvIGluZGljYXRlIHRoYXQgdGhlIHByZWNlZGluZyBjaGFyYWN0ZXIgaW4gdGhlIGRhdGEgc3RyZWFtLFxuICAgKiAgICBpZiBpdCBpcyBhIGdyYXBoaWMgY2hhcmFjdGVyIChyZXByZXNlbnRlZCBieSBvbmUgb3IgbW9yZSBiaXQgY29tYmluYXRpb25zKSBpbmNsdWRpbmcgU1BBQ0UsXG4gICAqICAgIGlzIHRvIGJlIHJlcGVhdGVkIG4gdGltZXMsIHdoZXJlIG4gZXF1YWxzIHRoZSB2YWx1ZSBvZiBQbi5cbiAgICogICAgSWYgdGhlIGNoYXJhY3RlciBwcmVjZWRpbmcgUkVQIGlzIGEgY29udHJvbCBmdW5jdGlvbiBvciBwYXJ0IG9mIGEgY29udHJvbCBmdW5jdGlvbixcbiAgICogICAgdGhlIGVmZmVjdCBvZiBSRVAgaXMgbm90IGRlZmluZWQgYnkgdGhpcyBTdGFuZGFyZC5cbiAgICpcbiAgICogV2UgZXh0ZW5kIHh0ZXJtJ3MgYmVoYXZpb3IgdG8gYWxsb3cgcmVwZWF0aW5nIGVudGlyZSBncmFwaGVtZSBjbHVzdGVycy5cbiAgICogVGhpcyBpc24ndCAxMDAlIHh0ZXJtLWNvbXBhdGlibGUsIGJ1dCBpdCBzZWVtcyBzYW5lciBhbmQgbW9yZSB1c2VmdWwuXG4gICAqICAgIC0gdGV4dCBhdHRycyBhcmUgYXBwbGllZCBub3JtYWxseVxuICAgKiAgICAtIHdyYXAgYXJvdW5kIGlzIHJlc3BlY3RlZFxuICAgKiAgICAtIGFueSB2YWxpZCBzZXF1ZW5jZSByZXNldHMgdGhlIGNhcnJpZWQgZm9yd2FyZCBjaGFyXG4gICAqXG4gICAqIE5vdGU6IFRvIGdldCByZXNldCBvbiBhIHZhbGlkIHNlcXVlbmNlIHdvcmtpbmcgY29ycmVjdGx5IHdpdGhvdXQgbXVjaCBydW50aW1lIHBlbmFsdHksIHRoZVxuICAgKiBwcmVjZWRpbmcgY29kZXBvaW50IGlzIHN0b3JlZCBvbiB0aGUgcGFyc2VyIGluIGB0aGlzLnByaW50YCBhbmQgcmVzZXQgZHVyaW5nIGBwYXJzZXIucGFyc2VgLlxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBSRVAgICBcIlJlcGVhdCBQcmVjZWRpbmcgQ2hhcmFjdGVyXCIgICAgXCJDU0kgUHMgYlwiICBcIlJlcGVhdCBwcmVjZWRpbmcgY2hhcmFjdGVyIGBQc2AgdGltZXMgKGRlZmF1bHQ9MSkuXCJcbiAgICogUkVQIHJlcGVhdHMgdGhlIHByZXZpb3VzIGNoYXJhY3RlciBgUHNgIHRpbWVzIGFkdmFuY2luZyB0aGUgY3Vyc29yLCBhbHNvIHdyYXBwaW5nIGlmIERFQ0FXTSBpc1xuICAgKiBzZXQuIFJFUCBoYXMgbm8gZWZmZWN0IGlmIHRoZSBzZXF1ZW5jZSBkb2VzIG5vdCBmb2xsb3cgYSBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVyXG4gICAqIChOT09QIGZvciBhbnkgb3RoZXIgc2VxdWVuY2UgaW4gYmV0d2VlbiBvciBOT04gQVNDSUkgY2hhcmFjdGVycykuXG4gICAqL1xuICBwdWJsaWMgcmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGpvaW5TdGF0ZSA9IHRoaXMuX3BhcnNlci5wcmVjZWRpbmdKb2luU3RhdGU7XG4gICAgaWYgKCFqb2luU3RhdGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBjYWxsIHByaW50IHRvIGluc2VydCB0aGUgY2hhcnMgYW5kIGhhbmRsZSBjb3JyZWN0IHdyYXBwaW5nXG4gICAgY29uc3QgbGVuZ3RoID0gcGFyYW1zLnBhcmFtc1swXSB8fCAxO1xuICAgIGNvbnN0IGNoV2lkdGggPSBVbmljb2RlU2VydmljZS5leHRyYWN0V2lkdGgoam9pblN0YXRlKTtcbiAgICBjb25zdCB4ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnggLSBjaFdpZHRoO1xuICAgIGNvbnN0IGJ1ZmZlclJvdyA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkpITtcbiAgICBjb25zdCB0ZXh0ID0gYnVmZmVyUm93LmdldFN0cmluZyh4KTtcbiAgICBjb25zdCBkYXRhID0gbmV3IFVpbnQzMkFycmF5KHRleHQubGVuZ3RoICogbGVuZ3RoKTtcbiAgICBsZXQgaWRhdGEgPSAwO1xuICAgIGZvciAobGV0IGl0ZXh0ID0gMDsgaXRleHQgPCB0ZXh0Lmxlbmd0aDspIHtcbiAgICAgIGNvbnN0IGNoID0gdGV4dC5jb2RlUG9pbnRBdChpdGV4dCkgfHwgMDtcbiAgICAgIGRhdGFbaWRhdGErK10gPSBjaDtcbiAgICAgIGl0ZXh0ICs9IGNoID4gMHhmZmZmID8gMiA6IDE7XG4gICAgfVxuICAgIGxldCB0bGVuZ3RoID0gaWRhdGE7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgICAgZGF0YS5jb3B5V2l0aGluKHRsZW5ndGgsIDAsIGlkYXRhKTtcbiAgICAgIHRsZW5ndGggKz0gaWRhdGE7XG4gICAgfVxuICAgIHRoaXMucHJpbnQoZGF0YSwgMCwgdGxlbmd0aCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIGMgIFNlbmQgRGV2aWNlIEF0dHJpYnV0ZXMgKFByaW1hcnkgREEpLlxuICAgKiAgICAgUHMgPSAwICBvciBvbWl0dGVkIC0+IHJlcXVlc3QgYXR0cmlidXRlcyBmcm9tIHRlcm1pbmFsLiAgVGhlXG4gICAqICAgICByZXNwb25zZSBkZXBlbmRzIG9uIHRoZSBkZWNUZXJtaW5hbElEIHJlc291cmNlIHNldHRpbmcuXG4gICAqICAgICAtPiBDU0kgPyAxIDsgMiBjICAoYGBWVDEwMCB3aXRoIEFkdmFuY2VkIFZpZGVvIE9wdGlvbicnKVxuICAgKiAgICAgLT4gQ1NJID8gMSA7IDAgYyAgKGBgVlQxMDEgd2l0aCBObyBPcHRpb25zJycpXG4gICAqICAgICAtPiBDU0kgPyA2IGMgIChgYFZUMTAyJycpXG4gICAqICAgICAtPiBDU0kgPyA2IDAgOyAxIDsgMiA7IDYgOyA4IDsgOSA7IDEgNSA7IGMgIChgYFZUMjIwJycpXG4gICAqICAgVGhlIFZUMTAwLXN0eWxlIHJlc3BvbnNlIHBhcmFtZXRlcnMgZG8gbm90IG1lYW4gYW55dGhpbmcgYnlcbiAgICogICB0aGVtc2VsdmVzLiAgVlQyMjAgcGFyYW1ldGVycyBkbywgdGVsbGluZyB0aGUgaG9zdCB3aGF0IGZlYS1cbiAgICogICB0dXJlcyB0aGUgdGVybWluYWwgc3VwcG9ydHM6XG4gICAqICAgICBQcyA9IDEgIC0+IDEzMi1jb2x1bW5zLlxuICAgKiAgICAgUHMgPSAyICAtPiBQcmludGVyLlxuICAgKiAgICAgUHMgPSA2ICAtPiBTZWxlY3RpdmUgZXJhc2UuXG4gICAqICAgICBQcyA9IDggIC0+IFVzZXItZGVmaW5lZCBrZXlzLlxuICAgKiAgICAgUHMgPSA5ICAtPiBOYXRpb25hbCByZXBsYWNlbWVudCBjaGFyYWN0ZXIgc2V0cy5cbiAgICogICAgIFBzID0gMSA1ICAtPiBUZWNobmljYWwgY2hhcmFjdGVycy5cbiAgICogICAgIFBzID0gMiAyICAtPiBBTlNJIGNvbG9yLCBlLmcuLCBWVDUyNS5cbiAgICogICAgIFBzID0gMiA5ICAtPiBBTlNJIHRleHQgbG9jYXRvciAoaS5lLiwgREVDIExvY2F0b3IgbW9kZSkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERBMSAgIFwiUHJpbWFyeSBEZXZpY2UgQXR0cmlidXRlc1wiICAgICBcIkNTSSBjXCIgIFwiU2VuZCBwcmltYXJ5IGRldmljZSBhdHRyaWJ1dGVzLlwiXG4gICAqXG4gICAqXG4gICAqIFRPRE86IGZpeCBhbmQgY2xlYW51cCByZXNwb25zZVxuICAgKi9cbiAgcHVibGljIHNlbmREZXZpY2VBdHRyaWJ1dGVzUHJpbWFyeShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBpZiAocGFyYW1zLnBhcmFtc1swXSA+IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5faXMoJ3h0ZXJtJykgfHwgdGhpcy5faXMoJ3J4dnQtdW5pY29kZScpIHx8IHRoaXMuX2lzKCdzY3JlZW4nKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz8xOzJjJyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9pcygnbGludXgnKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz82YycpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgPiBQcyBjXG4gICAqICAgU2VuZCBEZXZpY2UgQXR0cmlidXRlcyAoU2Vjb25kYXJ5IERBKS5cbiAgICogICAgIFBzID0gMCAgb3Igb21pdHRlZCAtPiByZXF1ZXN0IHRoZSB0ZXJtaW5hbCdzIGlkZW50aWZpY2F0aW9uXG4gICAqICAgICBjb2RlLiAgVGhlIHJlc3BvbnNlIGRlcGVuZHMgb24gdGhlIGRlY1Rlcm1pbmFsSUQgcmVzb3VyY2Ugc2V0LVxuICAgKiAgICAgdGluZy4gIEl0IHNob3VsZCBhcHBseSBvbmx5IHRvIFZUMjIwIGFuZCB1cCwgYnV0IHh0ZXJtIGV4dGVuZHNcbiAgICogICAgIHRoaXMgdG8gVlQxMDAuXG4gICAqICAgICAtPiBDU0kgID4gUHAgOyBQdiA7IFBjIGNcbiAgICogICB3aGVyZSBQcCBkZW5vdGVzIHRoZSB0ZXJtaW5hbCB0eXBlXG4gICAqICAgICBQcCA9IDAgIC0+IGBgVlQxMDAnJy5cbiAgICogICAgIFBwID0gMSAgLT4gYGBWVDIyMCcnLlxuICAgKiAgIGFuZCBQdiBpcyB0aGUgZmlybXdhcmUgdmVyc2lvbiAoZm9yIHh0ZXJtLCB0aGlzIHdhcyBvcmlnaW5hbGx5XG4gICAqICAgdGhlIFhGcmVlODYgcGF0Y2ggbnVtYmVyLCBzdGFydGluZyB3aXRoIDk1KS4gIEluIGEgREVDIHRlcm1pLVxuICAgKiAgIG5hbCwgUGMgaW5kaWNhdGVzIHRoZSBST00gY2FydHJpZGdlIHJlZ2lzdHJhdGlvbiBudW1iZXIgYW5kIGlzXG4gICAqICAgYWx3YXlzIHplcm8uXG4gICAqIE1vcmUgaW5mb3JtYXRpb246XG4gICAqICAgeHRlcm0vY2hhcnByb2MuYyAtIGxpbmUgMjAxMiwgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gICAqICAgdmltIHJlc3BvbmRzIHdpdGggXltbPzBjIG9yIF5bWz8xYyBhZnRlciB0aGUgdGVybWluYWwncyByZXNwb25zZSAoPylcbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREEyICAgXCJTZWNvbmRhcnkgRGV2aWNlIEF0dHJpYnV0ZXNcIiAgIFwiQ1NJID4gY1wiIFwiU2VuZCBwcmltYXJ5IGRldmljZSBhdHRyaWJ1dGVzLlwiXG4gICAqXG4gICAqXG4gICAqIFRPRE86IGZpeCBhbmQgY2xlYW51cCByZXNwb25zZVxuICAgKi9cbiAgcHVibGljIHNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmIChwYXJhbXMucGFyYW1zWzBdID4gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIHh0ZXJtIGFuZCB1cnh2dFxuICAgIC8vIHNlZW0gdG8gc3BpdCB0aGlzXG4gICAgLy8gb3V0IGFyb3VuZCB+MzcwIHRpbWVzICg/KS5cbiAgICBpZiAodGhpcy5faXMoJ3h0ZXJtJykpIHtcbiAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1s+MDsyNzY7MGMnKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2lzKCdyeHZ0LXVuaWNvZGUnKSkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnWz44NTs5NTswYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faXMoJ2xpbnV4JykpIHtcbiAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgYnkgbGludXggY29uc29sZS5cbiAgICAgIC8vIGxpbnV4IGNvbnNvbGUgZWNob2VzIHBhcmFtZXRlcnMuXG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHBhcmFtcy5wYXJhbXNbMF0gKyAnYycpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5faXMoJ3NjcmVlbicpKSB7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbPjgzOzQwMDAzOzBjJyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGlmIHRoZSBjdXJyZW50IHRlcm1pbmFsIGlzIHRoZSBnaXZlbiBhcmd1bWVudC5cbiAgICogQHBhcmFtIHRlcm0gVGhlIHRlcm1pbmFsIG5hbWUgdG8gZXZhbHVhdGVcbiAgICovXG4gIHByaXZhdGUgX2lzKHRlcm06IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50ZXJtTmFtZSArICcnKS5pbmRleE9mKHRlcm0pID09PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQbSBoICBTZXQgTW9kZSAoU00pLlxuICAgKiAgICAgUHMgPSAyICAtPiBLZXlib2FyZCBBY3Rpb24gTW9kZSAoQU0pLlxuICAgKiAgICAgUHMgPSA0ICAtPiBJbnNlcnQgTW9kZSAoSVJNKS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTZW5kL3JlY2VpdmUgKFNSTSkuXG4gICAqICAgICBQcyA9IDIgMCAgLT4gQXV0b21hdGljIE5ld2xpbmUgKExOTSkuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBJUk0gaXMgc3VwcG9ydGVkLl0gICAgQ1NJIFNNICAgIFwiU2V0IE1vZGVcIiAgXCJDU0kgUG0gaFwiICBcIlNldCB2YXJpb3VzIHRlcm1pbmFsIG1vZGVzLlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXMgYnkgU006XG4gICAqXG4gICAqIHwgUGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFN1cHBvcnQgfFxuICAgKiB8IC0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAyICAgICB8IEtleWJvYXJkIEFjdGlvbiBNb2RlIChLQU0pLiBBbHdheXMgb24uIHwgI04gICAgICB8XG4gICAqIHwgNCAgICAgfCBJbnNlcnQgTW9kZSAoSVJNKS4gICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEyICAgIHwgU2VuZC9yZWNlaXZlIChTUk0pLiBBbHdheXMgb2ZmLiAgICAgICAgfCAjTiAgICAgIHxcbiAgICogfCAyMCAgICB8IEF1dG9tYXRpYyBOZXdsaW5lIChMTk0pLiAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqL1xuICBwdWJsaWMgc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmNvbnZlcnRFb2wgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgPyBQbSBoXG4gICAqICAgREVDIFByaXZhdGUgTW9kZSBTZXQgKERFQ1NFVCkuXG4gICAqICAgICBQcyA9IDEgIC0+IEFwcGxpY2F0aW9uIEN1cnNvciBLZXlzIChERUNDS00pLlxuICAgKiAgICAgUHMgPSAyICAtPiBEZXNpZ25hdGUgVVNBU0NJSSBmb3IgY2hhcmFjdGVyIHNldHMgRzAtRzNcbiAgICogICAgIChERUNBTk0pLCBhbmQgc2V0IFZUMTAwIG1vZGUuXG4gICAqICAgICBQcyA9IDMgIC0+IDEzMiBDb2x1bW4gTW9kZSAoREVDQ09MTSkuXG4gICAqICAgICBQcyA9IDQgIC0+IFNtb290aCAoU2xvdykgU2Nyb2xsIChERUNTQ0xNKS5cbiAgICogICAgIFBzID0gNSAgLT4gUmV2ZXJzZSBWaWRlbyAoREVDU0NOTSkuXG4gICAqICAgICBQcyA9IDYgIC0+IE9yaWdpbiBNb2RlIChERUNPTSkuXG4gICAqICAgICBQcyA9IDcgIC0+IFdyYXBhcm91bmQgTW9kZSAoREVDQVdNKS5cbiAgICogICAgIFBzID0gOCAgLT4gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS5cbiAgICogICAgIFBzID0gOSAgLT4gU2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuICBTZWUgdGhlIHNlYy1cbiAgICogICAgIHRpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAgLT4gU2hvdyB0b29sYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTdGFydCBCbGlua2luZyBDdXJzb3IgKGF0dDYxMCkuXG4gICAqICAgICBQcyA9IDEgOCAgLT4gUHJpbnQgZm9ybSBmZWVkIChERUNQRkYpLlxuICAgKiAgICAgUHMgPSAxIDkgIC0+IFNldCBwcmludCBleHRlbnQgdG8gZnVsbCBzY3JlZW4gKERFQ1BFWCkuXG4gICAqICAgICBQcyA9IDIgNSAgLT4gU2hvdyBDdXJzb3IgKERFQ1RDRU0pLlxuICAgKiAgICAgUHMgPSAzIDAgIC0+IFNob3cgc2Nyb2xsYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMyA1ICAtPiBFbmFibGUgZm9udC1zaGlmdGluZyBmdW5jdGlvbnMgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDggIC0+IEVudGVyIFRla3Ryb25peCBNb2RlIChERUNURUspLlxuICAgKiAgICAgUHMgPSA0IDAgIC0+IEFsbG93IDgwIC0+IDEzMiBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDEgIC0+IG1vcmUoMSkgZml4IChzZWUgY3Vyc2VzIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNCAyICAtPiBFbmFibGUgTmF0aW9uIFJlcGxhY2VtZW50IENoYXJhY3RlciBzZXRzIChERUNOLVxuICAgKiAgICAgUkNNKS5cbiAgICogICAgIFBzID0gNCA0ICAtPiBUdXJuIE9uIE1hcmdpbiBCZWxsLlxuICAgKiAgICAgUHMgPSA0IDUgIC0+IFJldmVyc2Utd3JhcGFyb3VuZCBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDYgIC0+IFN0YXJ0IExvZ2dpbmcuICBUaGlzIGlzIG5vcm1hbGx5IGRpc2FibGVkIGJ5IGFcbiAgICogICAgIGNvbXBpbGUtdGltZSBvcHRpb24uXG4gICAqICAgICBQcyA9IDQgNyAgLT4gVXNlIEFsdGVybmF0ZSBTY3JlZW4gQnVmZmVyLiAgKFRoaXMgbWF5IGJlIGRpcy1cbiAgICogICAgIGFibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDYgNiAgLT4gQXBwbGljYXRpb24ga2V5cGFkIChERUNOS00pLlxuICAgKiAgICAgUHMgPSA2IDcgIC0+IEJhY2thcnJvdyBrZXkgc2VuZHMgYmFja3NwYWNlIChERUNCS00pLlxuICAgKiAgICAgUHMgPSAxIDAgMCAwICAtPiBTZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcyBhbmRcbiAgICogICAgIHJlbGVhc2UuICBTZWUgdGhlIHNlY3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDEgIC0+IFVzZSBIaWxpdGUgTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDIgIC0+IFVzZSBDZWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMyAgLT4gVXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDQgIC0+IFNlbmQgRm9jdXNJbi9Gb2N1c091dCBldmVudHMuXG4gICAqICAgICBQcyA9IDEgMCAwIDUgIC0+IEVuYWJsZSBFeHRlbmRlZCBNb3VzZSBNb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgMSAwICAtPiBTY3JvbGwgdG8gYm90dG9tIG9uIHR0eSBvdXRwdXQgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAxIDAgMSAxICAtPiBTY3JvbGwgdG8gYm90dG9tIG9uIGtleSBwcmVzcyAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAzIDQgIC0+IEludGVycHJldCBcIm1ldGFcIiBrZXksIHNldHMgZWlnaHRoIGJpdC5cbiAgICogICAgIChlbmFibGVzIHRoZSBlaWdodEJpdElucHV0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDMgNSAgLT4gRW5hYmxlIHNwZWNpYWwgbW9kaWZpZXJzIGZvciBBbHQgYW5kIE51bS1cbiAgICogICAgIExvY2sga2V5cy4gIChUaGlzIGVuYWJsZXMgdGhlIG51bUxvY2sgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA2ICAtPiBTZW5kIEVTQyAgIHdoZW4gTWV0YSBtb2RpZmllcyBhIGtleS4gIChUaGlzXG4gICAqICAgICBlbmFibGVzIHRoZSBtZXRhU2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA3ICAtPiBTZW5kIERFTCBmcm9tIHRoZSBlZGl0aW5nLWtleXBhZCBEZWxldGVcbiAgICogICAgIGtleS5cbiAgICogICAgIFBzID0gMSAwIDMgOSAgLT4gU2VuZCBFU0MgIHdoZW4gQWx0IG1vZGlmaWVzIGEga2V5LiAgKFRoaXNcbiAgICogICAgIGVuYWJsZXMgdGhlIGFsdFNlbmRzRXNjYXBlIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMCAgLT4gS2VlcCBzZWxlY3Rpb24gZXZlbiBpZiBub3QgaGlnaGxpZ2h0ZWQuXG4gICAqICAgICAoVGhpcyBlbmFibGVzIHRoZSBrZWVwU2VsZWN0aW9uIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMSAgLT4gVXNlIHRoZSBDTElQQk9BUkQgc2VsZWN0aW9uLiAgKFRoaXMgZW5hYmxlc1xuICAgKiAgICAgdGhlIHNlbGVjdFRvQ2xpcGJvYXJkIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMiAgLT4gRW5hYmxlIFVyZ2VuY3kgd2luZG93IG1hbmFnZXIgaGludCB3aGVuXG4gICAqICAgICBDb250cm9sLUcgaXMgcmVjZWl2ZWQuICAoVGhpcyBlbmFibGVzIHRoZSBiZWxsSXNVcmdlbnRcbiAgICogICAgIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMyAgLT4gRW5hYmxlIHJhaXNpbmcgb2YgdGhlIHdpbmRvdyB3aGVuIENvbnRyb2wtR1xuICAgKiAgICAgaXMgcmVjZWl2ZWQuICAoZW5hYmxlcyB0aGUgcG9wT25CZWxsIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgNyAgLT4gVXNlIEFsdGVybmF0ZSBTY3JlZW4gQnVmZmVyLiAgKFRoaXMgbWF5IGJlXG4gICAqICAgICBkaXNhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA4ICAtPiBTYXZlIGN1cnNvciBhcyBpbiBERUNTQy4gIChUaGlzIG1heSBiZSBkaXMtXG4gICAqICAgICBhYmxlZCBieSB0aGUgdGl0ZUluaGliaXQgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCA5ICAtPiBTYXZlIGN1cnNvciBhcyBpbiBERUNTQyBhbmQgdXNlIEFsdGVybmF0ZVxuICAgKiAgICAgU2NyZWVuIEJ1ZmZlciwgY2xlYXJpbmcgaXQgZmlyc3QuICAoVGhpcyBtYXkgYmUgZGlzYWJsZWQgYnlcbiAgICogICAgIHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuICBUaGlzIGNvbWJpbmVzIHRoZSBlZmZlY3RzIG9mIHRoZSAxXG4gICAqICAgICAwIDQgNyAgYW5kIDEgMCA0IDggIG1vZGVzLiAgVXNlIHRoaXMgd2l0aCB0ZXJtaW5mby1iYXNlZFxuICAgKiAgICAgYXBwbGljYXRpb25zIHJhdGhlciB0aGFuIHRoZSA0IDcgIG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDAgIC0+IFNldCB0ZXJtaW5mby90ZXJtY2FwIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAxICAtPiBTZXQgU3VuIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAyICAtPiBTZXQgSFAgZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDMgIC0+IFNldCBTQ08gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA2IDAgIC0+IFNldCBsZWdhY3kga2V5Ym9hcmQgZW11bGF0aW9uIChYMTFSNikuXG4gICAqICAgICBQcyA9IDEgMCA2IDEgIC0+IFNldCBWVDIyMCBrZXlib2FyZCBlbXVsYXRpb24uXG4gICAqICAgICBQcyA9IDIgMCAwIDQgIC0+IFNldCBicmFja2V0ZWQgcGFzdGUgbW9kZS5cbiAgICogTW9kZXM6XG4gICAqICAgaHR0cDogKnZ0MTAwLm5ldC9kb2NzL3Z0MjIwLXJtL2NoYXB0ZXI0Lmh0bWxcbiAgICpcbiAgICogQHZ0OiAjUFtTZWUgYmVsb3cgZm9yIHN1cHBvcnRlZCBtb2Rlcy5dICAgIENTSSBERUNTRVQgIFwiREVDIFByaXZhdGUgU2V0IE1vZGVcIiBcIkNTSSA/IFBtIGhcIiAgXCJTZXQgdmFyaW91cyB0ZXJtaW5hbCBhdHRyaWJ1dGVzLlwiXG4gICAqIFN1cHBvcnRlZCBwYXJhbSB2YWx1ZXMgYnkgREVDU0VUOlxuICAgKlxuICAgKiB8IHBhcmFtIHwgQWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFN1cHBvcnQgfFxuICAgKiB8IC0tLS0tIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tfFxuICAgKiB8IDEgICAgIHwgQXBwbGljYXRpb24gQ3Vyc29yIEtleXMgKERFQ0NLTSkuICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDIgICAgIHwgRGVzaWduYXRlIFVTLUFTQ0lJIGZvciBjaGFyYWN0ZXIgc2V0cyBHMC1HMyAoREVDQU5NKS4gICB8ICNZICAgICAgfFxuICAgKiB8IDMgICAgIHwgMTMyIENvbHVtbiBNb2RlIChERUNDT0xNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDYgICAgIHwgT3JpZ2luIE1vZGUgKERFQ09NKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDcgICAgIHwgQXV0by13cmFwIE1vZGUgKERFQ0FXTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDggICAgIHwgQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS4gQWx3YXlzIG9uLiAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDkgICAgIHwgWDEwIHh0ZXJtIG1vdXNlIHByb3RvY29sLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEyICAgIHwgU3RhcnQgQmxpbmtpbmcgQ3Vyc29yLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI1ICAgIHwgU2hvdyBDdXJzb3IgKERFQ1RDRU0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ1ICAgIHwgUmV2ZXJzZSB3cmFwLWFyb3VuZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ3ICAgIHwgVXNlIEFsdGVybmF0ZSBTY3JlZW4gQnVmZmVyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDY2ICAgIHwgQXBwbGljYXRpb24ga2V5cGFkIChERUNOS00pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDAgIHwgWDExIHh0ZXJtIG1vdXNlIHByb3RvY29sLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDIgIHwgVXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLiAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDMgIHwgVXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDQgIHwgU2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDUgIHwgRW5hYmxlIFVURi04IE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwMDYgIHwgRW5hYmxlIFNHUiBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMTUgIHwgRW5hYmxlIHVyeHZ0IE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwMTYgIHwgRW5hYmxlIFNHUi1QaXhlbHMgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDcgIHwgVXNlIEFsdGVybmF0ZSBTY3JlZW4gQnVmZmVyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDggIHwgU2F2ZSBjdXJzb3IgYXMgaW4gREVDU0MuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDkgIHwgU2F2ZSBjdXJzb3IgYW5kIHN3aXRjaCB0byBhbHRlcm5hdGUgYnVmZmVyIGNsZWFyaW5nIGl0LiB8ICNQW0RvZXMgbm90IGNsZWFyIHRoZSBhbHRlcm5hdGUgYnVmZmVyLl0gfFxuICAgKiB8IDIwMDQgIHwgU2V0IGJyYWNrZXRlZCBwYXN0ZSBtb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogaW1wbGVtZW50IERFQ1NDTk0sIDEwNDkgc2hvdWxkIGNsZWFyIGFsdGJ1ZmZlclxuICAgKi9cbiAgcHVibGljIHNldE1vZGVQcml2YXRlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtcy5wYXJhbXNbaV0pIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgxLCBERUZBVUxUX0NIQVJTRVQpO1xuICAgICAgICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDIsIERFRkFVTFRfQ0hBUlNFVCk7XG4gICAgICAgICAgdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMywgREVGQVVMVF9DSEFSU0VUKTtcbiAgICAgICAgICAvLyBzZXQgVlQxMDAgbW9kZSBoZXJlXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAvKipcbiAgICAgICAgICAgKiBERUNDT0xNIC0gMTMyIGNvbHVtbiBtb2RlLlxuICAgICAgICAgICAqIFRoaXMgaXMgb25seSBhY3RpdmUgaWYgJ1NldFdpbkxpbmVzJyAoMjQpIGlzIGVuYWJsZWRcbiAgICAgICAgICAgKiB0aHJvdWdoIGBvcHRpb25zLndpbmRvd3NPcHRpb25zYC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSgxMzIsIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7XG4gICAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbiA9IHRydWU7XG4gICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEyOlxuICAgICAgICAgIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbmsgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDQ1OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjY6XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4nKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDk6IC8vIFgxMCBNb3VzZVxuICAgICAgICAgIC8vIG5vIHJlbGVhc2UsIG5vIG1vdGlvbiwgbm8gd2hlZWwsIG5vIG1vZGlmaWVycy5cbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ1gxMCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwMDogLy8gdnQyMDAgbW91c2VcbiAgICAgICAgICAvLyBubyBtb3Rpb24uXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9ICdWVDIwMCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwMjogLy8gYnV0dG9uIGV2ZW50IG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCA9ICdEUkFHJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDAzOiAvLyBhbnkgZXZlbnQgbW91c2VcbiAgICAgICAgICAvLyBhbnkgZXZlbnQgLSBzZW5kcyBtb3Rpb24gZXZlbnRzLFxuICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYnV0dG9uIGhlbGQgZG93bi5cbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sID0gJ0FOWSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNDogLy8gc2VuZCBmb2N1c2luL2ZvY3Vzb3V0IGV2ZW50c1xuICAgICAgICAgIC8vIGZvY3VzaW46IF5bW0lcbiAgICAgICAgICAvLyBmb2N1c291dDogXltbT1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFNlbmRGb2N1cy5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNTogLy8gdXRmOCBleHQgbW9kZSBtb3VzZSAtIHJlbW92ZWQgaW4gIzI1MDdcbiAgICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdERUNTRVQgMTAwNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNjogLy8gc2dyIGV4dCBtb2RlIG1vdXNlXG4gICAgICAgICAgdGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZyA9ICdTR1InO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1NFVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDE2OiAvLyBzZ3IgcGl4ZWxzIG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ1NHUl9QSVhFTFMnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI1OiAvLyBzaG93IGN1cnNvclxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTA0ODogLy8gYWx0IHNjcmVlbiBjdXJzb3JcbiAgICAgICAgICB0aGlzLnNhdmVDdXJzb3IoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ5OiAvLyBhbHQgc2NyZWVuIGJ1ZmZlciBjdXJzb3JcbiAgICAgICAgICB0aGlzLnNhdmVDdXJzb3IoKTtcbiAgICAgICAgLy8gRkFMTC1USFJPVUdIXG4gICAgICAgIGNhc2UgNDc6IC8vIGFsdCBzY3JlZW4gYnVmZmVyXG4gICAgICAgIGNhc2UgMTA0NzogLy8gYWx0IHNjcmVlbiBidWZmZXJcbiAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVBbHRCdWZmZXIodGhpcy5fZXJhc2VBdHRyRGF0YSgpKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMDI2OiAvLyBzeW5jaHJvbml6ZWQgb3V0cHV0IChodHRwczovL2dpdGh1Yi5jb20vY29udG91ci10ZXJtaW5hbC92dC1leHRlbnNpb25zL2Jsb2IvbWFzdGVyL3N5bmNocm9uaXplZC1vdXRwdXQubWQpXG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnN5bmNocm9uaXplZE91dHB1dCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIFBtIGwgIFJlc2V0IE1vZGUgKFJNKS5cbiAgICogICAgIFBzID0gMiAgLT4gS2V5Ym9hcmQgQWN0aW9uIE1vZGUgKEFNKS5cbiAgICogICAgIFBzID0gNCAgLT4gUmVwbGFjZSBNb2RlIChJUk0pLlxuICAgKiAgICAgUHMgPSAxIDIgIC0+IFNlbmQvcmVjZWl2ZSAoU1JNKS5cbiAgICogICAgIFBzID0gMiAwICAtPiBOb3JtYWwgTGluZWZlZWQgKExOTSkuXG4gICAqXG4gICAqIEB2dDogI1BbT25seSBJUk0gaXMgc3VwcG9ydGVkLl0gICAgQ1NJIFJNICAgIFwiUmVzZXQgTW9kZVwiICBcIkNTSSBQbSBsXCIgIFwiU2V0IHZhcmlvdXMgdGVybWluYWwgYXR0cmlidXRlcy5cIlxuICAgKiBTdXBwb3J0ZWQgcGFyYW0gdmFsdWVzIGJ5IFJNOlxuICAgKlxuICAgKiB8IFBhcmFtIHwgQWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMiAgICAgfCBLZXlib2FyZCBBY3Rpb24gTW9kZSAoS0FNKS4gQWx3YXlzIG9uLiB8ICNOICAgICAgfFxuICAgKiB8IDQgICAgIHwgUmVwbGFjZSBNb2RlIChJUk0pLiAoZGVmYXVsdCkgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAxMiAgICB8IFNlbmQvcmVjZWl2ZSAoU1JNKS4gQWx3YXlzIG9mZi4gICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMjAgICAgfCBOb3JtYWwgTGluZWZlZWQgKExOTSkuICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogd2h5IGlzIExOTSBjb21tZW50ZWQgb3V0P1xuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZShwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgc3dpdGNoIChwYXJhbXMucGFyYW1zW2ldKSB7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjA6XG4gICAgICAgICAgdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jb252ZXJ0RW9sID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSA/IFBtIGxcbiAgICogICBERUMgUHJpdmF0ZSBNb2RlIFJlc2V0IChERUNSU1QpLlxuICAgKiAgICAgUHMgPSAxICAtPiBOb3JtYWwgQ3Vyc29yIEtleXMgKERFQ0NLTSkuXG4gICAqICAgICBQcyA9IDIgIC0+IERlc2lnbmF0ZSBWVDUyIG1vZGUgKERFQ0FOTSkuXG4gICAqICAgICBQcyA9IDMgIC0+IDgwIENvbHVtbiBNb2RlIChERUNDT0xNKS5cbiAgICogICAgIFBzID0gNCAgLT4gSnVtcCAoRmFzdCkgU2Nyb2xsIChERUNTQ0xNKS5cbiAgICogICAgIFBzID0gNSAgLT4gTm9ybWFsIFZpZGVvIChERUNTQ05NKS5cbiAgICogICAgIFBzID0gNiAgLT4gTm9ybWFsIEN1cnNvciBNb2RlIChERUNPTSkuXG4gICAqICAgICBQcyA9IDcgIC0+IE5vIFdyYXBhcm91bmQgTW9kZSAoREVDQVdNKS5cbiAgICogICAgIFBzID0gOCAgLT4gTm8gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS5cbiAgICogICAgIFBzID0gOSAgLT4gRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuXG4gICAqICAgICBQcyA9IDEgMCAgLT4gSGlkZSB0b29sYmFyIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAyICAtPiBTdG9wIEJsaW5raW5nIEN1cnNvciAoYXR0NjEwKS5cbiAgICogICAgIFBzID0gMSA4ICAtPiBEb24ndCBwcmludCBmb3JtIGZlZWQgKERFQ1BGRikuXG4gICAqICAgICBQcyA9IDEgOSAgLT4gTGltaXQgcHJpbnQgdG8gc2Nyb2xsaW5nIHJlZ2lvbiAoREVDUEVYKS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBIaWRlIEN1cnNvciAoREVDVENFTSkuXG4gICAqICAgICBQcyA9IDMgMCAgLT4gRG9uJ3Qgc2hvdyBzY3JvbGxiYXIgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSAzIDUgIC0+IERpc2FibGUgZm9udC1zaGlmdGluZyBmdW5jdGlvbnMgKHJ4dnQpLlxuICAgKiAgICAgUHMgPSA0IDAgIC0+IERpc2FsbG93IDgwIC0+IDEzMiBNb2RlLlxuICAgKiAgICAgUHMgPSA0IDEgIC0+IE5vIG1vcmUoMSkgZml4IChzZWUgY3Vyc2VzIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gNCAyICAtPiBEaXNhYmxlIE5hdGlvbiBSZXBsYWNlbWVudCBDaGFyYWN0ZXIgc2V0cyAoREVDLVxuICAgKiAgICAgTlJDTSkuXG4gICAqICAgICBQcyA9IDQgNCAgLT4gVHVybiBPZmYgTWFyZ2luIEJlbGwuXG4gICAqICAgICBQcyA9IDQgNSAgLT4gTm8gUmV2ZXJzZS13cmFwYXJvdW5kIE1vZGUuXG4gICAqICAgICBQcyA9IDQgNiAgLT4gU3RvcCBMb2dnaW5nLiAgKFRoaXMgaXMgbm9ybWFsbHkgZGlzYWJsZWQgYnkgYVxuICAgKiAgICAgY29tcGlsZS10aW1lIG9wdGlvbikuXG4gICAqICAgICBQcyA9IDQgNyAgLT4gVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLlxuICAgKiAgICAgUHMgPSA2IDYgIC0+IE51bWVyaWMga2V5cGFkIChERUNOS00pLlxuICAgKiAgICAgUHMgPSA2IDcgIC0+IEJhY2thcnJvdyBrZXkgc2VuZHMgZGVsZXRlIChERUNCS00pLlxuICAgKiAgICAgUHMgPSAxIDAgMCAwICAtPiBEb24ndCBzZW5kIE1vdXNlIFggJiBZIG9uIGJ1dHRvbiBwcmVzcyBhbmRcbiAgICogICAgIHJlbGVhc2UuICBTZWUgdGhlIHNlY3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDEgIC0+IERvbid0IHVzZSBIaWxpdGUgTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDIgIC0+IERvbid0IHVzZSBDZWxsIE1vdGlvbiBNb3VzZSBUcmFja2luZy5cbiAgICogICAgIFBzID0gMSAwIDAgMyAgLT4gRG9uJ3QgdXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuXG4gICAqICAgICBQcyA9IDEgMCAwIDQgIC0+IERvbid0IHNlbmQgRm9jdXNJbi9Gb2N1c091dCBldmVudHMuXG4gICAqICAgICBQcyA9IDEgMCAwIDUgIC0+IERpc2FibGUgRXh0ZW5kZWQgTW91c2UgTW9kZS5cbiAgICogICAgIFBzID0gMSAwIDEgMCAgLT4gRG9uJ3Qgc2Nyb2xsIHRvIGJvdHRvbSBvbiB0dHkgb3V0cHV0XG4gICAqICAgICAocnh2dCkuXG4gICAqICAgICBQcyA9IDEgMCAxIDEgIC0+IERvbid0IHNjcm9sbCB0byBib3R0b20gb24ga2V5IHByZXNzIChyeHZ0KS5cbiAgICogICAgIFBzID0gMSAwIDMgNCAgLT4gRG9uJ3QgaW50ZXJwcmV0IFwibWV0YVwiIGtleS4gIChUaGlzIGRpc2FibGVzXG4gICAqICAgICB0aGUgZWlnaHRCaXRJbnB1dCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDUgIC0+IERpc2FibGUgc3BlY2lhbCBtb2RpZmllcnMgZm9yIEFsdCBhbmQgTnVtLVxuICAgKiAgICAgTG9jayBrZXlzLiAgKFRoaXMgZGlzYWJsZXMgdGhlIG51bUxvY2sgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgMyA2ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBNZXRhIG1vZGlmaWVzIGEga2V5LlxuICAgKiAgICAgKFRoaXMgZGlzYWJsZXMgdGhlIG1ldGFTZW5kc0VzY2FwZSByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCAzIDcgIC0+IFNlbmQgVlQyMjAgUmVtb3ZlIGZyb20gdGhlIGVkaXRpbmcta2V5cGFkXG4gICAqICAgICBEZWxldGUga2V5LlxuICAgKiAgICAgUHMgPSAxIDAgMyA5ICAtPiBEb24ndCBzZW5kIEVTQyAgd2hlbiBBbHQgbW9kaWZpZXMgYSBrZXkuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUgYWx0U2VuZHNFc2NhcGUgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAwICAtPiBEbyBub3Qga2VlcCBzZWxlY3Rpb24gd2hlbiBub3QgaGlnaGxpZ2h0ZWQuXG4gICAqICAgICAoVGhpcyBkaXNhYmxlcyB0aGUga2VlcFNlbGVjdGlvbiByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDEgIC0+IFVzZSB0aGUgUFJJTUFSWSBzZWxlY3Rpb24uICAoVGhpcyBkaXNhYmxlc1xuICAgKiAgICAgdGhlIHNlbGVjdFRvQ2xpcGJvYXJkIHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgMiAgLT4gRGlzYWJsZSBVcmdlbmN5IHdpbmRvdyBtYW5hZ2VyIGhpbnQgd2hlblxuICAgKiAgICAgQ29udHJvbC1HIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIGJlbGxJc1VyZ2VudFxuICAgKiAgICAgcmVzb3VyY2UpLlxuICAgKiAgICAgUHMgPSAxIDAgNCAzICAtPiBEaXNhYmxlIHJhaXNpbmcgb2YgdGhlIHdpbmRvdyB3aGVuIENvbnRyb2wtXG4gICAqICAgICBHIGlzIHJlY2VpdmVkLiAgKFRoaXMgZGlzYWJsZXMgdGhlIHBvcE9uQmVsbCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDcgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciwgY2xlYXJpbmcgc2NyZWVuXG4gICAqICAgICBmaXJzdCBpZiBpbiB0aGUgQWx0ZXJuYXRlIFNjcmVlbi4gIChUaGlzIG1heSBiZSBkaXNhYmxlZCBieVxuICAgKiAgICAgdGhlIHRpdGVJbmhpYml0IHJlc291cmNlKS5cbiAgICogICAgIFBzID0gMSAwIDQgOCAgLT4gUmVzdG9yZSBjdXJzb3IgYXMgaW4gREVDUkMuICAoVGhpcyBtYXkgYmVcbiAgICogICAgIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdCByZXNvdXJjZSkuXG4gICAqICAgICBQcyA9IDEgMCA0IDkgIC0+IFVzZSBOb3JtYWwgU2NyZWVuIEJ1ZmZlciBhbmQgcmVzdG9yZSBjdXJzb3JcbiAgICogICAgIGFzIGluIERFQ1JDLiAgKFRoaXMgbWF5IGJlIGRpc2FibGVkIGJ5IHRoZSB0aXRlSW5oaWJpdFxuICAgKiAgICAgcmVzb3VyY2UpLiAgVGhpcyBjb21iaW5lcyB0aGUgZWZmZWN0cyBvZiB0aGUgMSAwIDQgNyAgYW5kIDEgMFxuICAgKiAgICAgNCA4ICBtb2Rlcy4gIFVzZSB0aGlzIHdpdGggdGVybWluZm8tYmFzZWQgYXBwbGljYXRpb25zIHJhdGhlclxuICAgKiAgICAgdGhhbiB0aGUgNCA3ICBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAwICAtPiBSZXNldCB0ZXJtaW5mby90ZXJtY2FwIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAxICAtPiBSZXNldCBTdW4gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA1IDIgIC0+IFJlc2V0IEhQIGZ1bmN0aW9uLWtleSBtb2RlLlxuICAgKiAgICAgUHMgPSAxIDAgNSAzICAtPiBSZXNldCBTQ08gZnVuY3Rpb24ta2V5IG1vZGUuXG4gICAqICAgICBQcyA9IDEgMCA2IDAgIC0+IFJlc2V0IGxlZ2FjeSBrZXlib2FyZCBlbXVsYXRpb24gKFgxMVI2KS5cbiAgICogICAgIFBzID0gMSAwIDYgMSAgLT4gUmVzZXQga2V5Ym9hcmQgZW11bGF0aW9uIHRvIFN1bi9QQyBzdHlsZS5cbiAgICogICAgIFBzID0gMiAwIDAgNCAgLT4gUmVzZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuXG4gICAqXG4gICAqIEB2dDogI1BbU2VlIGJlbG93IGZvciBzdXBwb3J0ZWQgbW9kZXMuXSAgICBDU0kgREVDUlNUICBcIkRFQyBQcml2YXRlIFJlc2V0IE1vZGVcIiBcIkNTSSA/IFBtIGxcIiAgXCJSZXNldCB2YXJpb3VzIHRlcm1pbmFsIGF0dHJpYnV0ZXMuXCJcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBERUNSU1Q6XG4gICAqXG4gICAqIHwgcGFyYW0gfCBBY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU3VwcG9ydCB8XG4gICAqIHwgLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMSAgICAgfCBOb3JtYWwgQ3Vyc29yIEtleXMgKERFQ0NLTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMiAgICAgfCBEZXNpZ25hdGUgVlQ1MiBtb2RlIChERUNBTk0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMyAgICAgfCA4MCBDb2x1bW4gTW9kZSAoREVDQ09MTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI0JbU3dpdGNoZXMgdG8gb2xkIGNvbHVtbiB3aWR0aCBpbnN0ZWFkIG9mIDgwLl0gfFxuICAgKiB8IDYgICAgIHwgTm9ybWFsIEN1cnNvciBNb2RlIChERUNPTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDcgICAgIHwgTm8gV3JhcGFyb3VuZCBNb2RlIChERUNBV00pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDggICAgIHwgTm8gQXV0by1yZXBlYXQgS2V5cyAoREVDQVJNKS4gICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDkgICAgIHwgRG9uJ3Qgc2VuZCBNb3VzZSBYICYgWSBvbiBidXR0b24gcHJlc3MuICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEyICAgIHwgU3RvcCBCbGlua2luZyBDdXJzb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI1ICAgIHwgSGlkZSBDdXJzb3IgKERFQ1RDRU0pLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ1ICAgIHwgTm8gcmV2ZXJzZSB3cmFwLWFyb3VuZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ3ICAgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDY2ICAgIHwgTnVtZXJpYyBrZXlwYWQgKERFQ05LTSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDAgIHwgRG9uJ3Qgc2VuZCBNb3VzZSByZXBvcnRzLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDIgIHwgRG9uJ3QgdXNlIENlbGwgTW90aW9uIE1vdXNlIFRyYWNraW5nLiAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDMgIHwgRG9uJ3QgdXNlIEFsbCBNb3Rpb24gTW91c2UgVHJhY2tpbmcuICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDQgIHwgRG9uJ3Qgc2VuZCBGb2N1c0luL0ZvY3VzT3V0IGV2ZW50cy4gICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMDUgIHwgRGlzYWJsZSBVVEYtOCBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwMDYgIHwgRGlzYWJsZSBTR1IgTW91c2UgTW9kZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMTUgIHwgRGlzYWJsZSB1cnh2dCBNb3VzZSBNb2RlLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDEwMTYgIHwgRGlzYWJsZSBTR1ItUGl4ZWxzIE1vdXNlIE1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDcgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyIChjbGVhcmluZyBzY3JlZW4gaWYgaW4gYWx0KS4gICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDggIHwgUmVzdG9yZSBjdXJzb3IgYXMgaW4gREVDUkMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwNDkgIHwgVXNlIE5vcm1hbCBTY3JlZW4gQnVmZmVyIGFuZCByZXN0b3JlIGN1cnNvci4gICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDIwMDQgIHwgUmVzZXQgYnJhY2tldGVkIHBhc3RlIG1vZGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKlxuICAgKiBGSVhNRTogREVDQ09MTSBpcyBjdXJyZW50bHkgYnJva2VuIChhbHJlYWR5IGZpeGVkIGluIHdpbmRvdyBvcHRpb25zIFBSKVxuICAgKi9cbiAgcHVibGljIHJlc2V0TW9kZVByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1tpXSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgLyoqXG4gICAgICAgICAgICogREVDQ09MTSAtIDgwIGNvbHVtbiBtb2RlLlxuICAgICAgICAgICAqIFRoaXMgaXMgb25seSBhY3RpdmUgaWYgJ1NldFdpbkxpbmVzJyAoMjQpIGlzIGVuYWJsZWRcbiAgICAgICAgICAgKiB0aHJvdWdoIGBvcHRpb25zLndpbmRvd3NPcHRpb25zYC5cbiAgICAgICAgICAgKi9cbiAgICAgICAgICBpZiAodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzKSB7XG4gICAgICAgICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSg4MCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtcbiAgICAgICAgICAgIHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDU6XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjY6XG4gICAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC4nKTtcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OiAvLyBYMTAgTW91c2VcbiAgICAgICAgY2FzZSAxMDAwOiAvLyB2dDIwMCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDI6IC8vIGJ1dHRvbiBldmVudCBtb3VzZVxuICAgICAgICBjYXNlIDEwMDM6IC8vIGFueSBldmVudCBtb3VzZVxuICAgICAgICAgIHRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSAnTk9ORSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTAwNDogLy8gc2VuZCBmb2N1c2luL2ZvY3Vzb3V0IGV2ZW50c1xuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA1OiAvLyB1dGY4IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1JTVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDA2OiAvLyBzZ3IgZXh0IG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwMTU6IC8vIHVyeHZ0IGV4dCBtb2RlIG1vdXNlIC0gcmVtb3ZlZCBpbiAjMjUwN1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0RFQ1JTVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNyknKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDE2OiAvLyBzZ3IgcGl4ZWxzIG1vZGUgbW91c2VcbiAgICAgICAgICB0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nID0gJ0RFRkFVTFQnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI1OiAvLyBoaWRlIGN1cnNvclxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMDQ4OiAvLyBhbHQgc2NyZWVuIGN1cnNvclxuICAgICAgICAgIHRoaXMucmVzdG9yZUN1cnNvcigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwNDk6IC8vIGFsdCBzY3JlZW4gYnVmZmVyIGN1cnNvclxuICAgICAgICAvLyBGQUxMLVRIUk9VR0hcbiAgICAgICAgY2FzZSA0NzogLy8gbm9ybWFsIHNjcmVlbiBidWZmZXJcbiAgICAgICAgY2FzZSAxMDQ3OiAvLyBub3JtYWwgc2NyZWVuIGJ1ZmZlciAtIGNsZWFyaW5nIGl0IGZpcnN0XG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBoYXMgdGhlIGNvcnJlY3QgYnVmZmVyXG4gICAgICAgICAgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2YXRlTm9ybWFsQnVmZmVyKCk7XG4gICAgICAgICAgaWYgKHBhcmFtcy5wYXJhbXNbaV0gPT09IDEwNDkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdG9yZUN1cnNvcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAwNDogLy8gYnJhY2tldGVkIHBhc3RlIG1vZGUgKGh0dHBzOi8vY2lydy5pbi9ibG9nL2JyYWNrZXRlZC1wYXN0ZSlcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlID0gZmFsc2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjAyNjogLy8gc3luY2hyb25pemVkIG91dHB1dCAoaHR0cHM6Ly9naXRodWIuY29tL2NvbnRvdXItdGVybWluYWwvdnQtZXh0ZW5zaW9ucy9ibG9iL21hc3Rlci9zeW5jaHJvbml6ZWQtb3V0cHV0Lm1kKVxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zeW5jaHJvbml6ZWRPdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENTSSBQcyAkIHAgUmVxdWVzdCBBTlNJIE1vZGUgKERFQ1JRTSkuXG4gICAqXG4gICAqIFJlcG9ydHMgQ1NJIFBzOyBQbSAkIHkgKERFQ1JQTSksIHdoZXJlIFBzIGlzIHRoZSBtb2RlIG51bWJlciBhcyBpbiBTTS9STSxcbiAgICogYW5kIFBtIGlzIHRoZSBtb2RlIHZhbHVlOlxuICAgKiAgICAwIC0gbm90IHJlY29nbml6ZWRcbiAgICogICAgMSAtIHNldFxuICAgKiAgICAyIC0gcmVzZXRcbiAgICogICAgMyAtIHBlcm1hbmVudGx5IHNldFxuICAgKiAgICA0IC0gcGVybWFuZW50bHkgcmVzZXRcbiAgICpcbiAgICogQHZ0OiAjWSAgQ1NJICAgREVDUlFNICBcIlJlcXVlc3QgTW9kZVwiICBcIkNTSSBQcyAkcFwiICBcIlJlcXVlc3QgbW9kZSBzdGF0ZS5cIlxuICAgKiBSZXR1cm5zIGEgcmVwb3J0IGFzIGBDU0kgUHM7IFBtICQgeWAgKERFQ1JQTSksIHdoZXJlIGBQc2AgaXMgdGhlIG1vZGUgbnVtYmVyIGFzIGluIFNNL1JNXG4gICAqIG9yIERFQ1NFVC9ERUNSU1QsIGFuZCBgUG1gIGlzIHRoZSBtb2RlIHZhbHVlOlxuICAgKiAtIDA6IG5vdCByZWNvZ25pemVkXG4gICAqIC0gMTogc2V0XG4gICAqIC0gMjogcmVzZXRcbiAgICogLSAzOiBwZXJtYW5lbnRseSBzZXRcbiAgICogLSA0OiBwZXJtYW5lbnRseSByZXNldFxuICAgKlxuICAgKiBGb3IgbW9kZXMgbm90IHVuZGVyc3Rvb2QgeHRlcm0uanMgYWx3YXlzIHJldHVybnMgYG5vdFJlY29nbml6ZWRgLiBJbiBnZW5lcmFsIHRoaXMgbWVhbnMsXG4gICAqIHRoYXQgYSBjZXJ0YWluIG9wZXJhdGlvbiBtb2RlIGlzIG5vdCBpbXBsZW1lbnRlZCBhbmQgY2Fubm90IGJlIHVzZWQuXG4gICAqXG4gICAqIE1vZGVzIGNoYW5naW5nIHRoZSBhY3RpdmUgdGVybWluYWwgYnVmZmVyICg0NywgMTA0NywgMTA0OSkgYXJlIG5vdCBzdWJxdWVyaWVkXG4gICAqIGFuZCBvbmx5IHJlcG9ydCwgd2hldGhlciB0aGUgYWx0ZXJuYXRlIGJ1ZmZlciBpcyBzZXQuXG4gICAqXG4gICAqIE1vdXNlIGVuY29kaW5ncyBhbmQgbW91c2UgcHJvdG9jb2xzIGFyZSBoYW5kbGVkIG11dHVhbCBleGNsdXNpdmUsXG4gICAqIHRodXMgb25seSBvbmUgb2YgZWFjaCBvZiB0aG9zZSBjYW4gYmUgc2V0IGF0IGEgZ2l2ZW4gdGltZS5cbiAgICpcbiAgICogVGhlcmUgaXMgYSBjaGFuY2UsIHRoYXQgc29tZSBtb2RlIHJlcG9ydHMgYXJlIG5vdCBmdWxseSBpbiBsaW5lIHdpdGggeHRlcm0uanMnIGJlaGF2aW9yLFxuICAgKiBlLmcuIGlmIHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGFscmVhZHkgZXhwb3NlcyBhIGNlcnRhaW4gYmVoYXZpb3IuIElmIHlvdSBmaW5kXG4gICAqIGRpc2NyZXBhbmNpZXMgaW4gdGhlIG1vZGUgcmVwb3J0cywgcGxlYXNlIGZpbGUgYSBidWcuXG4gICAqL1xuICBwdWJsaWMgcmVxdWVzdE1vZGUocGFyYW1zOiBJUGFyYW1zLCBhbnNpOiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgLy8gcmV0dXJuIHZhbHVlIGFzIGluIERFQ1JQTVxuICAgIGNvbnN0IGVudW0gViB7XG4gICAgICBOT1RfUkVDT0dOSVpFRCA9IDAsXG4gICAgICBTRVQgPSAxLFxuICAgICAgUkVTRVQgPSAyLFxuICAgICAgUEVSTUFORU5UTFlfU0VUID0gMyxcbiAgICAgIFBFUk1BTkVOVExZX1JFU0VUID0gNFxuICAgIH1cblxuICAgIC8vIGFjY2VzcyBoZWxwZXJzXG4gICAgY29uc3QgZG0gPSB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXM7XG4gICAgY29uc3QgeyBhY3RpdmVQcm90b2NvbDogbW91c2VQcm90b2NvbCwgYWN0aXZlRW5jb2Rpbmc6IG1vdXNlRW5jb2RpbmcgfSA9IHRoaXMuX2NvcmVNb3VzZVNlcnZpY2U7XG4gICAgY29uc3QgY3MgPSB0aGlzLl9jb3JlU2VydmljZTtcbiAgICBjb25zdCB7IGJ1ZmZlcnMsIGNvbHMgfSA9IHRoaXMuX2J1ZmZlclNlcnZpY2U7XG4gICAgY29uc3QgeyBhY3RpdmUsIGFsdCB9ID0gYnVmZmVycztcbiAgICBjb25zdCBvcHRzID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucztcblxuICAgIGNvbnN0IGYgPSAobTogbnVtYmVyLCB2OiBWKTogYm9vbGVhbiA9PiB7XG4gICAgICBjcy50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bJHthbnNpID8gJycgOiAnPyd9JHttfTske3Z9JHlgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgY29uc3QgYjJ2ID0gKHZhbHVlOiBib29sZWFuKTogViA9PiB2YWx1ZSA/IFYuU0VUIDogVi5SRVNFVDtcblxuICAgIGNvbnN0IHAgPSBwYXJhbXMucGFyYW1zWzBdO1xuXG4gICAgaWYgKGFuc2kpIHtcbiAgICAgIGlmIChwID09PSAyKSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1JFU0VUKTtcbiAgICAgIGlmIChwID09PSA0KSByZXR1cm4gZihwLCBiMnYoY3MubW9kZXMuaW5zZXJ0TW9kZSkpO1xuICAgICAgaWYgKHAgPT09IDEyKSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1NFVCk7XG4gICAgICBpZiAocCA9PT0gMjApIHJldHVybiBmKHAsIGIydihvcHRzLmNvbnZlcnRFb2wpKTtcbiAgICAgIHJldHVybiBmKHAsIFYuTk9UX1JFQ09HTklaRUQpO1xuICAgIH1cblxuICAgIGlmIChwID09PSAxKSByZXR1cm4gZihwLCBiMnYoZG0uYXBwbGljYXRpb25DdXJzb3JLZXlzKSk7XG4gICAgaWYgKHAgPT09IDMpIHJldHVybiBmKHAsIG9wdHMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyA/IChjb2xzID09PSA4MCA/IFYuUkVTRVQgOiBjb2xzID09PSAxMzIgPyBWLlNFVCA6IFYuTk9UX1JFQ09HTklaRUQpIDogVi5OT1RfUkVDT0dOSVpFRCk7XG4gICAgaWYgKHAgPT09IDYpIHJldHVybiBmKHAsIGIydihkbS5vcmlnaW4pKTtcbiAgICBpZiAocCA9PT0gNykgcmV0dXJuIGYocCwgYjJ2KGRtLndyYXBhcm91bmQpKTtcbiAgICBpZiAocCA9PT0gOCkgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9TRVQpO1xuICAgIGlmIChwID09PSA5KSByZXR1cm4gZihwLCBiMnYobW91c2VQcm90b2NvbCA9PT0gJ1gxMCcpKTtcbiAgICBpZiAocCA9PT0gMTIpIHJldHVybiBmKHAsIGIydihvcHRzLmN1cnNvckJsaW5rKSk7XG4gICAgaWYgKHAgPT09IDI1KSByZXR1cm4gZihwLCBiMnYoIWNzLmlzQ3Vyc29ySGlkZGVuKSk7XG4gICAgaWYgKHAgPT09IDQ1KSByZXR1cm4gZihwLCBiMnYoZG0ucmV2ZXJzZVdyYXBhcm91bmQpKTtcbiAgICBpZiAocCA9PT0gNjYpIHJldHVybiBmKHAsIGIydihkbS5hcHBsaWNhdGlvbktleXBhZCkpO1xuICAgIGlmIChwID09PSA2NykgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9SRVNFVCk7XG4gICAgaWYgKHAgPT09IDEwMDApIHJldHVybiBmKHAsIGIydihtb3VzZVByb3RvY29sID09PSAnVlQyMDAnKSk7XG4gICAgaWYgKHAgPT09IDEwMDIpIHJldHVybiBmKHAsIGIydihtb3VzZVByb3RvY29sID09PSAnRFJBRycpKTtcbiAgICBpZiAocCA9PT0gMTAwMykgcmV0dXJuIGYocCwgYjJ2KG1vdXNlUHJvdG9jb2wgPT09ICdBTlknKSk7XG4gICAgaWYgKHAgPT09IDEwMDQpIHJldHVybiBmKHAsIGIydihkbS5zZW5kRm9jdXMpKTtcbiAgICBpZiAocCA9PT0gMTAwNSkgcmV0dXJuIGYocCwgVi5QRVJNQU5FTlRMWV9SRVNFVCk7XG4gICAgaWYgKHAgPT09IDEwMDYpIHJldHVybiBmKHAsIGIydihtb3VzZUVuY29kaW5nID09PSAnU0dSJykpO1xuICAgIGlmIChwID09PSAxMDE1KSByZXR1cm4gZihwLCBWLlBFUk1BTkVOVExZX1JFU0VUKTtcbiAgICBpZiAocCA9PT0gMTAxNikgcmV0dXJuIGYocCwgYjJ2KG1vdXNlRW5jb2RpbmcgPT09ICdTR1JfUElYRUxTJykpO1xuICAgIGlmIChwID09PSAxMDQ4KSByZXR1cm4gZihwLCBWLlNFVCk7IC8vIHh0ZXJtIGFsd2F5cyByZXR1cm5zIFNFVCBoZXJlXG4gICAgaWYgKHAgPT09IDQ3IHx8IHAgPT09IDEwNDcgfHwgcCA9PT0gMTA0OSkgcmV0dXJuIGYocCwgYjJ2KGFjdGl2ZSA9PT0gYWx0KSk7XG4gICAgaWYgKHAgPT09IDIwMDQpIHJldHVybiBmKHAsIGIydihkbS5icmFja2V0ZWRQYXN0ZU1vZGUpKTtcbiAgICBpZiAocCA9PT0gMjAyNikgcmV0dXJuIGYocCwgYjJ2KGRtLnN5bmNocm9uaXplZE91dHB1dCkpO1xuICAgIHJldHVybiBmKHAsIFYuTk9UX1JFQ09HTklaRUQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byB3cml0ZSBjb2xvciBpbmZvcm1hdGlvbiBwYWNrZWQgd2l0aCBjb2xvciBtb2RlLlxuICAgKi9cbiAgcHJpdmF0ZSBfdXBkYXRlQXR0ckNvbG9yKGNvbG9yOiBudW1iZXIsIG1vZGU6IG51bWJlciwgYzE6IG51bWJlciwgYzI6IG51bWJlciwgYzM6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKG1vZGUgPT09IDIpIHtcbiAgICAgIGNvbG9yIHw9IEF0dHJpYnV0ZXMuQ01fUkdCO1xuICAgICAgY29sb3IgJj0gfkF0dHJpYnV0ZXMuUkdCX01BU0s7XG4gICAgICBjb2xvciB8PSBBdHRyaWJ1dGVEYXRhLmZyb21Db2xvclJHQihbYzEsIGMyLCBjM10pO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gNSkge1xuICAgICAgY29sb3IgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgIGNvbG9yIHw9IEF0dHJpYnV0ZXMuQ01fUDI1NiB8IChjMSAmIDB4ZmYpO1xuICAgIH1cbiAgICByZXR1cm4gY29sb3I7XG4gIH1cblxuICAvKipcbiAgICogSGVscGVyIHRvIGV4dHJhY3QgYW5kIGFwcGx5IGNvbG9yIHBhcmFtcy9zdWJwYXJhbXMuXG4gICAqIFJldHVybnMgYWR2YW5jZSBmb3IgcGFyYW1zIGluZGV4LlxuICAgKi9cbiAgcHJpdmF0ZSBfZXh0cmFjdENvbG9yKHBhcmFtczogSVBhcmFtcywgcG9zOiBudW1iZXIsIGF0dHI6IElBdHRyaWJ1dGVEYXRhKTogbnVtYmVyIHtcbiAgICAvLyBub3JtYWxpemUgcGFyYW1zXG4gICAgLy8gbWVhbmluZzogW3RhcmdldCwgQ00sIGlnbiwgdmFsLCB2YWwsIHZhbF1cbiAgICAvLyBSR0IgICAgOiBbIDM4LzQ4LCAgMiwgaWduLCAgIHIsICAgZywgICBiXVxuICAgIC8vIFAyNTYgICA6IFsgMzgvNDgsICA1LCBpZ24sICAgdiwgaWduLCBpZ25dXG4gICAgY29uc3QgYWNjdSA9IFswLCAwLCAtMSwgMCwgMCwgMF07XG5cbiAgICAvLyBhbGlnbm1lbnQgcGxhY2Vob2xkZXIgZm9yIG5vbiBjb2xvciBzcGFjZSBzZXF1ZW5jZXNcbiAgICBsZXQgY1NwYWNlID0gMDtcblxuICAgIC8vIHJldHVybiBhZHZhbmNlIHdlIHRvb2sgaW4gcGFyYW1zXG4gICAgbGV0IGFkdmFuY2UgPSAwO1xuXG4gICAgZG8ge1xuICAgICAgYWNjdVthZHZhbmNlICsgY1NwYWNlXSA9IHBhcmFtcy5wYXJhbXNbcG9zICsgYWR2YW5jZV07XG4gICAgICBpZiAocGFyYW1zLmhhc1N1YlBhcmFtcyhwb3MgKyBhZHZhbmNlKSkge1xuICAgICAgICBjb25zdCBzdWJwYXJhbXMgPSBwYXJhbXMuZ2V0U3ViUGFyYW1zKHBvcyArIGFkdmFuY2UpITtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaWYgKGFjY3VbMV0gPT09IDUpIHtcbiAgICAgICAgICAgIGNTcGFjZSA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjY3VbYWR2YW5jZSArIGkgKyAxICsgY1NwYWNlXSA9IHN1YnBhcmFtc1tpXTtcbiAgICAgICAgfSB3aGlsZSAoKytpIDwgc3VicGFyYW1zLmxlbmd0aCAmJiBpICsgYWR2YW5jZSArIDEgKyBjU3BhY2UgPCBhY2N1Lmxlbmd0aCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gZXhpdCBlYXJseSBpZiBjYW4gZGVjaWRlIGNvbG9yIG1vZGUgd2l0aCBzZW1pY29sb25zXG4gICAgICBpZiAoKGFjY3VbMV0gPT09IDUgJiYgYWR2YW5jZSArIGNTcGFjZSA+PSAyKVxuICAgICAgICB8fCAoYWNjdVsxXSA9PT0gMiAmJiBhZHZhbmNlICsgY1NwYWNlID49IDUpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gb2Zmc2V0IGNvbG9yU3BhY2Ugc2xvdCBmb3Igc2VtaWNvbG9uIG1vZGVcbiAgICAgIGlmIChhY2N1WzFdKSB7XG4gICAgICAgIGNTcGFjZSA9IDE7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoKythZHZhbmNlICsgcG9zIDwgcGFyYW1zLmxlbmd0aCAmJiBhZHZhbmNlICsgY1NwYWNlIDwgYWNjdS5sZW5ndGgpO1xuXG4gICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzIHRvIDBcbiAgICBmb3IgKGxldCBpID0gMjsgaSA8IGFjY3UubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChhY2N1W2ldID09PSAtMSkge1xuICAgICAgICBhY2N1W2ldID0gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhcHBseSBjb2xvcnNcbiAgICBzd2l0Y2ggKGFjY3VbMF0pIHtcbiAgICAgIGNhc2UgMzg6XG4gICAgICAgIGF0dHIuZmcgPSB0aGlzLl91cGRhdGVBdHRyQ29sb3IoYXR0ci5mZywgYWNjdVsxXSwgYWNjdVszXSwgYWNjdVs0XSwgYWNjdVs1XSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA0ODpcbiAgICAgICAgYXR0ci5iZyA9IHRoaXMuX3VwZGF0ZUF0dHJDb2xvcihhdHRyLmJnLCBhY2N1WzFdLCBhY2N1WzNdLCBhY2N1WzRdLCBhY2N1WzVdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDU4OlxuICAgICAgICBhdHRyLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZC5jbG9uZSgpO1xuICAgICAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yID0gdGhpcy5fdXBkYXRlQXR0ckNvbG9yKGF0dHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IsIGFjY3VbMV0sIGFjY3VbM10sIGFjY3VbNF0sIGFjY3VbNV0pO1xuICAgIH1cblxuICAgIHJldHVybiBhZHZhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNHUiA0IHN1YnBhcmFtczpcbiAgICogICAgNDowICAgLSAgIGVxdWFsIHRvIFNHUiAyNCAodHVybiBvZmYgYWxsIHVuZGVybGluZSlcbiAgICogICAgNDoxICAgLSAgIGVxdWFsIHRvIFNHUiA0IChzaW5nbGUgdW5kZXJsaW5lKVxuICAgKiAgICA0OjIgICAtICAgZXF1YWwgdG8gU0dSIDIxIChkb3VibGUgdW5kZXJsaW5lKVxuICAgKiAgICA0OjMgICAtICAgY3VybHkgdW5kZXJsaW5lXG4gICAqICAgIDQ6NCAgIC0gICBkb3R0ZWQgdW5kZXJsaW5lXG4gICAqICAgIDQ6NSAgIC0gICBkYXNoZWQgdW5kZXJsaW5lXG4gICAqL1xuICBwcml2YXRlIF9wcm9jZXNzVW5kZXJsaW5lKHN0eWxlOiBudW1iZXIsIGF0dHI6IElBdHRyaWJ1dGVEYXRhKTogdm9pZCB7XG4gICAgLy8gdHJlYXQgZXh0ZW5kZWQgYXR0cnMgYXMgaW1tdXRhYmxlLCB0aHVzIGFsd2F5cyBjbG9uZSBmcm9tIG9sZCBvbmVcbiAgICAvLyB0aGlzIGlzIG5lZWRlZCBzaW5jZSB0aGUgYnVmZmVyIG9ubHkgaG9sZHMgcmVmZXJlbmNlcyB0byBpdFxuICAgIGF0dHIuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkLmNsb25lKCk7XG5cbiAgICAvLyBkZWZhdWx0IHRvIDEgPT0gc2luZ2xlIHVuZGVybGluZVxuICAgIGlmICghfnN0eWxlIHx8IHN0eWxlID4gNSkge1xuICAgICAgc3R5bGUgPSAxO1xuICAgIH1cbiAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlID0gc3R5bGU7XG4gICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLlVOREVSTElORTtcblxuICAgIC8vIDAgZGVhY3RpdmF0ZXMgdW5kZXJsaW5lXG4gICAgaWYgKHN0eWxlID09PSAwKSB7XG4gICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLlVOREVSTElORTtcbiAgICB9XG5cbiAgICAvLyB1cGRhdGUgSEFTX0VYVEVOREVEIGluIEJHXG4gICAgYXR0ci51cGRhdGVFeHRlbmRlZCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfcHJvY2Vzc1NHUjAoYXR0cjogSUF0dHJpYnV0ZURhdGEpOiB2b2lkIHtcbiAgICBhdHRyLmZnID0gREVGQVVMVF9BVFRSX0RBVEEuZmc7XG4gICAgYXR0ci5iZyA9IERFRkFVTFRfQVRUUl9EQVRBLmJnO1xuICAgIGF0dHIuZXh0ZW5kZWQgPSBhdHRyLmV4dGVuZGVkLmNsb25lKCk7XG4gICAgLy8gUmVzZXQgdW5kZXJsaW5lIHN0eWxlIGFuZCBjb2xvci4gTm90ZSB0aGF0IHdlIGRvbid0IHdhbnQgdG8gcmVzZXQgb3RoZXJcbiAgICAvLyBmaWVsZHMgc3VjaCBhcyB0aGUgdXJsIGlkLlxuICAgIGF0dHIuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGUgPSBVbmRlcmxpbmVTdHlsZS5OT05FO1xuICAgIGF0dHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlJHQl9NQVNLKTtcbiAgICBhdHRyLnVwZGF0ZUV4dGVuZGVkKCk7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBtIG0gIENoYXJhY3RlciBBdHRyaWJ1dGVzIChTR1IpLlxuICAgKlxuICAgKiBAdnQ6ICNQW1NlZSBiZWxvdyBmb3Igc3VwcG9ydGVkIGF0dHJpYnV0ZXMuXSAgICBDU0kgU0dSICAgXCJTZWxlY3QgR3JhcGhpYyBSZW5kaXRpb25cIiAgXCJDU0kgUG0gbVwiICBcIlNldC9SZXNldCB2YXJpb3VzIHRleHQgYXR0cmlidXRlcy5cIlxuICAgKiBTR1Igc2VsZWN0cyBvbmUgb3IgbW9yZSBjaGFyYWN0ZXIgYXR0cmlidXRlcyBhdCB0aGUgc2FtZSB0aW1lLiBNdWx0aXBsZSBwYXJhbXMgKHVwIHRvIDMyKVxuICAgKiBhcmUgYXBwbGllZCBpbiBvcmRlciBmcm9tIGxlZnQgdG8gcmlnaHQuIFRoZSBjaGFuZ2VkIGF0dHJpYnV0ZXMgYXJlIGFwcGxpZWQgdG8gYWxsIG5ld1xuICAgKiBjaGFyYWN0ZXJzIHJlY2VpdmVkLiBJZiB5b3UgbW92ZSBjaGFyYWN0ZXJzIGluIHRoZSB2aWV3cG9ydCBieSBzY3JvbGxpbmcgb3IgYW55IG90aGVyIG1lYW5zLFxuICAgKiB0aGVuIHRoZSBhdHRyaWJ1dGVzIG1vdmUgd2l0aCB0aGUgY2hhcmFjdGVycy5cbiAgICpcbiAgICogU3VwcG9ydGVkIHBhcmFtIHZhbHVlcyBieSBTR1I6XG4gICAqXG4gICAqIHwgUGFyYW0gICAgIHwgTWVhbmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0gfFxuICAgKiB8IDAgICAgICAgICB8IE5vcm1hbCAoZGVmYXVsdCkuIFJlc2V0cyBhbnkgb3RoZXIgcHJlY2VkaW5nIFNHUi4gICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMSAgICAgICAgIHwgQm9sZC4gKGFsc28gc2VlIGBvcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzYCkgICAgfCAjWSAgICAgIHxcbiAgICogfCAyICAgICAgICAgfCBGYWludCwgZGVjcmVhc2VkIGludGVuc2l0eS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMgICAgICAgICB8IEl0YWxpYy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNCAgICAgICAgIHwgVW5kZXJsaW5lZCAoc2VlIGJlbG93IGZvciBzdHlsZSBzdXBwb3J0KS4gICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA1ICAgICAgICAgfCBTbG93bHkgYmxpbmtpbmcuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDYgICAgICAgICB8IFJhcGlkbHkgYmxpbmtpbmcuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgNyAgICAgICAgIHwgSW52ZXJzZS4gRmxpcHMgZm9yZWdyb3VuZCBhbmQgYmFja2dyb3VuZCBjb2xvci4gICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA4ICAgICAgICAgfCBJbnZpc2libGUgKGhpZGRlbikuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDkgICAgICAgICB8IENyb3NzZWQtb3V0IGNoYXJhY3RlcnMgKHN0cmlrZXRocm91Z2gpLiAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjEgICAgICAgIHwgRG91Ymx5IHVuZGVybGluZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyMiAgICAgICAgfCBOb3JtYWwgKG5laXRoZXIgYm9sZCBub3IgZmFpbnQpLiAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDIzICAgICAgICB8IE5vIGl0YWxpYy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjQgICAgICAgIHwgTm90IHVuZGVybGluZWQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyNSAgICAgICAgfCBTdGVhZHkgKG5vdCBibGlua2luZykuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDI3ICAgICAgICB8IFBvc2l0aXZlIChub3QgaW52ZXJzZSkuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMjggICAgICAgIHwgVmlzaWJsZSAobm90IGhpZGRlbikuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyOSAgICAgICAgfCBOb3QgQ3Jvc3NlZC1vdXQgKHN0cmlrZXRocm91Z2gpLiAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMwICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IEJsYWNrLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzEgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogUmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzMiAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBHcmVlbi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDMzICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IFllbGxvdy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzQgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogQmx1ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzNSAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBNYWdlbnRhLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDM2ICAgICAgICB8IEZvcmVncm91bmQgY29sb3I6IEN5YW4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMzcgICAgICAgIHwgRm9yZWdyb3VuZCBjb2xvcjogV2hpdGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAzOCAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBFeHRlbmRlZCBjb2xvci4gICAgICAgICAgICAgICAgICAgICAgICB8ICNQW1N1cHBvcnQgZm9yIFJHQiBhbmQgaW5kZXhlZCBjb2xvcnMsIHNlZSBiZWxvdy5dIHxcbiAgICogfCAzOSAgICAgICAgfCBGb3JlZ3JvdW5kIGNvbG9yOiBEZWZhdWx0IChvcmlnaW5hbCkuICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQwICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IEJsYWNrLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDEgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogUmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0MiAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBHcmVlbi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQzICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IFllbGxvdy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDQgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogQmx1ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0NSAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBNYWdlbnRhLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQ2ICAgICAgICB8IEJhY2tncm91bmQgY29sb3I6IEN5YW4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNDcgICAgICAgIHwgQmFja2dyb3VuZCBjb2xvcjogV2hpdGUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA0OCAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBFeHRlbmRlZCBjb2xvci4gICAgICAgICAgICAgICAgICAgICAgICB8ICNQW1N1cHBvcnQgZm9yIFJHQiBhbmQgaW5kZXhlZCBjb2xvcnMsIHNlZSBiZWxvdy5dIHxcbiAgICogfCA0OSAgICAgICAgfCBCYWNrZ3JvdW5kIGNvbG9yOiBEZWZhdWx0IChvcmlnaW5hbCkuICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDUzICAgICAgICB8IE92ZXJsaW5lZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgNTUgICAgICAgIHwgTm90IE92ZXJsaW5lZC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA1OCAgICAgICAgfCBVbmRlcmxpbmUgY29sb3I6IEV4dGVuZGVkIGNvbG9yLiAgICAgICAgICAgICAgICAgICAgICAgICB8ICNQW1N1cHBvcnQgZm9yIFJHQiBhbmQgaW5kZXhlZCBjb2xvcnMsIHNlZSBiZWxvdy5dIHxcbiAgICogfCA5MCAtIDk3ICAgfCBCcmlnaHQgZm9yZWdyb3VuZCBjb2xvciAoYW5hbG9nb3VzIHRvIDMwIC0gMzcpLiAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEwMCAtIDEwNyB8IEJyaWdodCBiYWNrZ3JvdW5kIGNvbG9yIChhbmFsb2dvdXMgdG8gNDAgLSA0NykuICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqXG4gICAqIFVuZGVybGluZSBzdXBwb3J0cyBzdWJwYXJhbXMgdG8gZGVub3RlIHRoZSBzdHlsZSBpbiB0aGUgZm9ybSBgNCA6IHhgOlxuICAgKlxuICAgKiB8IHggICAgICB8IE1lYW5pbmcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCBTdXBwb3J0IHxcbiAgICogfCAtLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHwgLS0tLS0tLSB8XG4gICAqIHwgMCAgICAgIHwgTm8gdW5kZXJsaW5lLiBTYW1lIGFzIGBTR1IgMjQgbWAuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDEgICAgICB8IFNpbmdsZSB1bmRlcmxpbmUuIFNhbWUgYXMgYFNHUiA0IG1gLiAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCAyICAgICAgfCBEb3VibGUgdW5kZXJsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgMyAgICAgIHwgQ3VybHkgdW5kZXJsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKiB8IDQgICAgICB8IERvdHRlZCB1bmRlcmxpbmUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAjWSAgICAgIHxcbiAgICogfCA1ICAgICAgfCBEYXNoZWQgdW5kZXJsaW5lLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI1kgICAgICB8XG4gICAqIHwgb3RoZXIgIHwgU2luZ2xlIHVuZGVybGluZS4gU2FtZSBhcyBgU0dSIDQgbWAuICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNZICAgICAgfFxuICAgKlxuICAgKiBFeHRlbmRlZCBjb2xvcnMgYXJlIHN1cHBvcnRlZCBmb3IgZm9yZWdyb3VuZCAoUHM9MzgpLCBiYWNrZ3JvdW5kIChQcz00OCkgYW5kIHVuZGVybGluZSAoUHM9NTgpXG4gICAqIGFzIGZvbGxvd3M6XG4gICAqXG4gICAqIHwgUHMgKyAxIHwgTWVhbmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IFN1cHBvcnQgfFxuICAgKiB8IC0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tIHxcbiAgICogfCAwICAgICAgfCBJbXBsZW1lbnRhdGlvbiBkZWZpbmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgMSAgICAgIHwgVHJhbnNwYXJlbnQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDIgICAgICB8IFJHQiBjb2xvciBhcyBgUHMgOyAyIDsgUiA7IEcgOyBCYCBvciBgUHMgOiAyIDogOiBSIDogRyA6IEJgLiAgfCAjWSAgICAgIHxcbiAgICogfCAzICAgICAgfCBDTVkgY29sb3IuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgI04gICAgICB8XG4gICAqIHwgNCAgICAgIHwgQ01ZSyBjb2xvci4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICNOICAgICAgfFxuICAgKiB8IDUgICAgICB8IEluZGV4ZWQgKDI1NiBjb2xvcnMpIGFzIGBQcyA7IDUgOyBJTkRFWGAgb3IgYFBzIDogNSA6IElOREVYYC4gfCAjWSAgICAgIHxcbiAgICpcbiAgICpcbiAgICogRklYTUU6IGJsaW5raW5nIGlzIGltcGxlbWVudGVkIGluIGF0dHJzLCBidXQgbm90IHdvcmtpbmcgaW4gcmVuZGVyZXJzP1xuICAgKiBGSVhNRTogcmVtb3ZlIGRlYWQgYnJhbmNoIGZvciBwPTEwMFxuICAgKi9cbiAgcHVibGljIGNoYXJBdHRyaWJ1dGVzKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIC8vIE9wdGltaXplIGEgc2luZ2xlIFNHUjAuXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDEgJiYgcGFyYW1zLnBhcmFtc1swXSA9PT0gMCkge1xuICAgICAgdGhpcy5fcHJvY2Vzc1NHUjAodGhpcy5fY3VyQXR0ckRhdGEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgbCA9IHBhcmFtcy5sZW5ndGg7XG4gICAgbGV0IHA7XG4gICAgY29uc3QgYXR0ciA9IHRoaXMuX2N1ckF0dHJEYXRhO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHAgPSBwYXJhbXMucGFyYW1zW2ldO1xuICAgICAgaWYgKHAgPj0gMzAgJiYgcCA8PSAzNykge1xuICAgICAgICAvLyBmZyBjb2xvciA4XG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gMzApO1xuICAgICAgfSBlbHNlIGlmIChwID49IDQwICYmIHAgPD0gNDcpIHtcbiAgICAgICAgLy8gYmcgY29sb3IgOFxuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5QQ09MT1JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gQXR0cmlidXRlcy5DTV9QMTYgfCAocCAtIDQwKTtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSA5MCAmJiBwIDw9IDk3KSB7XG4gICAgICAgIC8vIGZnIGNvbG9yIDE2XG4gICAgICAgIGF0dHIuZmcgJj0gfihBdHRyaWJ1dGVzLkNNX01BU0sgfCBBdHRyaWJ1dGVzLlBDT0xPUl9NQVNLKTtcbiAgICAgICAgYXR0ci5mZyB8PSBBdHRyaWJ1dGVzLkNNX1AxNiB8IChwIC0gOTApIHwgODtcbiAgICAgIH0gZWxzZSBpZiAocCA+PSAxMDAgJiYgcCA8PSAxMDcpIHtcbiAgICAgICAgLy8gYmcgY29sb3IgMTZcbiAgICAgICAgYXR0ci5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IEF0dHJpYnV0ZXMuUENPTE9SX01BU0spO1xuICAgICAgICBhdHRyLmJnIHw9IEF0dHJpYnV0ZXMuQ01fUDE2IHwgKHAgLSAxMDApIHwgODtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMCkge1xuICAgICAgICAvLyBkZWZhdWx0XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NTR1IwKGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAxKSB7XG4gICAgICAgIC8vIGJvbGQgdGV4dFxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuQk9MRDtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMykge1xuICAgICAgICAvLyBpdGFsaWMgdGV4dFxuICAgICAgICBhdHRyLmJnIHw9IEJnRmxhZ3MuSVRBTElDO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA0KSB7XG4gICAgICAgIC8vIHVuZGVybGluZWQgdGV4dFxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuVU5ERVJMSU5FO1xuICAgICAgICB0aGlzLl9wcm9jZXNzVW5kZXJsaW5lKHBhcmFtcy5oYXNTdWJQYXJhbXMoaSkgPyBwYXJhbXMuZ2V0U3ViUGFyYW1zKGkpIVswXSA6IFVuZGVybGluZVN0eWxlLlNJTkdMRSwgYXR0cik7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDUpIHtcbiAgICAgICAgLy8gYmxpbmtcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLkJMSU5LO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA3KSB7XG4gICAgICAgIC8vIGludmVyc2UgYW5kIHBvc2l0aXZlXG4gICAgICAgIC8vIHRlc3Qgd2l0aDogZWNobyAtZSAnXFxlWzMxbVxcZVs0Mm1oZWxsb1xcZVs3bXdvcmxkXFxlWzI3bWhpXFxlW20nXG4gICAgICAgIGF0dHIuZmcgfD0gRmdGbGFncy5JTlZFUlNFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA4KSB7XG4gICAgICAgIC8vIGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnIHw9IEZnRmxhZ3MuSU5WSVNJQkxFO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA5KSB7XG4gICAgICAgIC8vIHN0cmlrZXRocm91Z2hcbiAgICAgICAgYXR0ci5mZyB8PSBGZ0ZsYWdzLlNUUklLRVRIUk9VR0g7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIpIHtcbiAgICAgICAgLy8gZGltbWVkIHRleHRcbiAgICAgICAgYXR0ci5iZyB8PSBCZ0ZsYWdzLkRJTTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjEpIHtcbiAgICAgICAgLy8gZG91YmxlIHVuZGVybGluZVxuICAgICAgICB0aGlzLl9wcm9jZXNzVW5kZXJsaW5lKFVuZGVybGluZVN0eWxlLkRPVUJMRSwgYXR0cik7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDIyKSB7XG4gICAgICAgIC8vIG5vdCBib2xkIG5vciBmYWludFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLkJPTEQ7XG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuRElNO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyMykge1xuICAgICAgICAvLyBub3QgaXRhbGljXG4gICAgICAgIGF0dHIuYmcgJj0gfkJnRmxhZ3MuSVRBTElDO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAyNCkge1xuICAgICAgICAvLyBub3QgdW5kZXJsaW5lZFxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLlVOREVSTElORTtcbiAgICAgICAgdGhpcy5fcHJvY2Vzc1VuZGVybGluZShVbmRlcmxpbmVTdHlsZS5OT05FLCBhdHRyKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjUpIHtcbiAgICAgICAgLy8gbm90IGJsaW5rXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuQkxJTks7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDI3KSB7XG4gICAgICAgIC8vIG5vdCBpbnZlcnNlXG4gICAgICAgIGF0dHIuZmcgJj0gfkZnRmxhZ3MuSU5WRVJTRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjgpIHtcbiAgICAgICAgLy8gbm90IGludmlzaWJsZVxuICAgICAgICBhdHRyLmZnICY9IH5GZ0ZsYWdzLklOVklTSUJMRTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMjkpIHtcbiAgICAgICAgLy8gbm90IHN0cmlrZXRocm91Z2hcbiAgICAgICAgYXR0ci5mZyAmPSB+RmdGbGFncy5TVFJJS0VUSFJPVUdIO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzOSkge1xuICAgICAgICAvLyByZXNldCBmZ1xuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuZmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA0OSkge1xuICAgICAgICAvLyByZXNldCBiZ1xuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuYmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIGlmIChwID09PSAzOCB8fCBwID09PSA0OCB8fCBwID09PSA1OCkge1xuICAgICAgICAvLyBmZyBjb2xvciAyNTYgYW5kIFJHQlxuICAgICAgICBpICs9IHRoaXMuX2V4dHJhY3RDb2xvcihwYXJhbXMsIGksIGF0dHIpO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA1Mykge1xuICAgICAgICAvLyBvdmVybGluZVxuICAgICAgICBhdHRyLmJnIHw9IEJnRmxhZ3MuT1ZFUkxJTkU7XG4gICAgICB9IGVsc2UgaWYgKHAgPT09IDU1KSB7XG4gICAgICAgIC8vIG5vdCBvdmVybGluZVxuICAgICAgICBhdHRyLmJnICY9IH5CZ0ZsYWdzLk9WRVJMSU5FO1xuICAgICAgfSBlbHNlIGlmIChwID09PSA1OSkge1xuICAgICAgICBhdHRyLmV4dGVuZGVkID0gYXR0ci5leHRlbmRlZC5jbG9uZSgpO1xuICAgICAgICBhdHRyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yID0gLTE7XG4gICAgICAgIGF0dHIudXBkYXRlRXh0ZW5kZWQoKTtcbiAgICAgIH0gZWxzZSBpZiAocCA9PT0gMTAwKSB7IC8vIEZJWE1FOiBkZWFkIGJyYW5jaCwgcD0xMDAgYWxyZWFkeSBoYW5kbGVkIGFib3ZlIVxuICAgICAgICAvLyByZXNldCBmZy9iZ1xuICAgICAgICBhdHRyLmZnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuZmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuZmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgICBhdHRyLmJnICY9IH4oQXR0cmlidXRlcy5DTV9NQVNLIHwgQXR0cmlidXRlcy5SR0JfTUFTSyk7XG4gICAgICAgIGF0dHIuYmcgfD0gREVGQVVMVF9BVFRSX0RBVEEuYmcgJiAoQXR0cmlidXRlcy5QQ09MT1JfTUFTSyB8IEF0dHJpYnV0ZXMuUkdCX01BU0spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnVW5rbm93biBTR1IgYXR0cmlidXRlOiAlZC4nLCBwKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIG4gIERldmljZSBTdGF0dXMgUmVwb3J0IChEU1IpLlxuICAgKiAgICAgUHMgPSA1ICAtPiBTdGF0dXMgUmVwb3J0LiAgUmVzdWx0IChgYE9LJycpIGlzXG4gICAqICAgQ1NJIDAgblxuICAgKiAgICAgUHMgPSA2ICAtPiBSZXBvcnQgQ3Vyc29yIFBvc2l0aW9uIChDUFIpIFtyb3c7Y29sdW1uXS5cbiAgICogICBSZXN1bHQgaXNcbiAgICogICBDU0kgciA7IGMgUlxuICAgKiBDU0kgPyBQcyBuXG4gICAqICAgRGV2aWNlIFN0YXR1cyBSZXBvcnQgKERTUiwgREVDLXNwZWNpZmljKS5cbiAgICogICAgIFBzID0gNiAgLT4gUmVwb3J0IEN1cnNvciBQb3NpdGlvbiAoQ1BSKSBbcm93O2NvbHVtbl0gYXMgQ1NJXG4gICAqICAgICA/IHIgOyBjIFIgKGFzc3VtZXMgcGFnZSBpcyB6ZXJvKS5cbiAgICogICAgIFBzID0gMSA1ICAtPiBSZXBvcnQgUHJpbnRlciBzdGF0dXMgYXMgQ1NJID8gMSAwICBuICAocmVhZHkpLlxuICAgKiAgICAgb3IgQ1NJID8gMSAxICBuICAobm90IHJlYWR5KS5cbiAgICogICAgIFBzID0gMiA1ICAtPiBSZXBvcnQgVURLIHN0YXR1cyBhcyBDU0kgPyAyIDAgIG4gICh1bmxvY2tlZClcbiAgICogICAgIG9yIENTSSA/IDIgMSAgbiAgKGxvY2tlZCkuXG4gICAqICAgICBQcyA9IDIgNiAgLT4gUmVwb3J0IEtleWJvYXJkIHN0YXR1cyBhc1xuICAgKiAgIENTSSA/IDIgNyAgOyAgMSAgOyAgMCAgOyAgMCAgbiAgKE5vcnRoIEFtZXJpY2FuKS5cbiAgICogICBUaGUgbGFzdCB0d28gcGFyYW1ldGVycyBhcHBseSB0byBWVDQwMCAmIHVwLCBhbmQgZGVub3RlIGtleS1cbiAgICogICBib2FyZCByZWFkeSBhbmQgTEswMSByZXNwZWN0aXZlbHkuXG4gICAqICAgICBQcyA9IDUgMyAgLT4gUmVwb3J0IExvY2F0b3Igc3RhdHVzIGFzXG4gICAqICAgQ1NJID8gNSAzICBuICBMb2NhdG9yIGF2YWlsYWJsZSwgaWYgY29tcGlsZWQtaW4sIG9yXG4gICAqICAgQ1NJID8gNSAwICBuICBObyBMb2NhdG9yLCBpZiBub3QuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERTUiAgIFwiRGV2aWNlIFN0YXR1cyBSZXBvcnRcIiAgXCJDU0kgUHMgblwiICBcIlJlcXVlc3QgY3Vyc29yIHBvc2l0aW9uIChDUFIpIHdpdGggYFBzYCA9IDYuXCJcbiAgICovXG4gIHB1YmxpYyBkZXZpY2VTdGF0dXMocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgc3dpdGNoIChwYXJhbXMucGFyYW1zWzBdKSB7XG4gICAgICBjYXNlIDU6XG4gICAgICAgIC8vIHN0YXR1cyByZXBvcnRcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WzBuYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgeSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci55ICsgMTtcbiAgICAgICAgY29uc3QgeCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgMTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9WyR7eX07JHt4fVJgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQHZ0OiAjUFtPbmx5IENQUiBpcyBzdXBwb3J0ZWQuXSAgQ1NJIERFQ0RTUiAgXCJERUMgRGV2aWNlIFN0YXR1cyBSZXBvcnRcIiAgXCJDU0kgPyBQcyBuXCIgIFwiT25seSBDUFIgaXMgc3VwcG9ydGVkIChzYW1lIGFzIERTUikuXCJcbiAgcHVibGljIGRldmljZVN0YXR1c1ByaXZhdGUocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgLy8gbW9kZXJuIHh0ZXJtIGRvZXNudCBzZWVtIHRvXG4gICAgLy8gcmVzcG9uZCB0byBhbnkgb2YgdGhlc2UgZXhjZXB0ID82LCA2LCBhbmQgNVxuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSA2OlxuICAgICAgICAvLyBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgeSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci55ICsgMTtcbiAgICAgICAgY29uc3QgeCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54ICsgMTtcbiAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9Wz8ke3l9OyR7eH1SYCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxNTpcbiAgICAgICAgLy8gbm8gcHJpbnRlclxuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/MTFuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyNTpcbiAgICAgICAgLy8gZG9udCBzdXBwb3J0IHVzZXIgZGVmaW5lZCBrZXlzXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlcihDMC5FU0MgKyAnWz8yMW4nKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI2OlxuICAgICAgICAvLyBub3J0aCBhbWVyaWNhbiBrZXlib2FyZFxuICAgICAgICAvLyB0aGlzLmhhbmRsZXIoQzAuRVNDICsgJ1s/Mjc7MTswOzBuJyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSA1MzpcbiAgICAgICAgLy8gbm8gZGVjIGxvY2F0b3IvbW91c2VcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyKEMwLkVTQyArICdbPzUwbicpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJICEgcCAgIFNvZnQgdGVybWluYWwgcmVzZXQgKERFQ1NUUikuXG4gICAqIGh0dHA6Ly92dDEwMC5uZXQvZG9jcy92dDIyMC1ybS90YWJsZTQtMTAuaHRtbFxuICAgKlxuICAgKiBAdnQ6ICNZIENTSSBERUNTVFIgIFwiU29mdCBUZXJtaW5hbCBSZXNldFwiICAgXCJDU0kgISBwXCIgICBcIlJlc2V0IHNldmVyYWwgdGVybWluYWwgYXR0cmlidXRlcyB0byBpbml0aWFsIHN0YXRlLlwiXG4gICAqIFRoZXJlIGFyZSB0d28gdGVybWluYWwgcmVzZXQgc2VxdWVuY2VzIC0gUklTIGFuZCBERUNTVFIuIFdoaWxlIFJJUyBwZXJmb3JtcyBhbG1vc3QgYSBmdWxsXG4gICAqIHRlcm1pbmFsIGJvb3RzdHJhcCwgREVDU1RSIG9ubHkgcmVzZXRzIGNlcnRhaW4gYXR0cmlidXRlcy4gRm9yIG1vc3QgbmVlZHMgREVDU1RSIHNob3VsZCBiZVxuICAgKiBzdWZmaWNpZW50LlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHRlcm1pbmFsIGF0dHJpYnV0ZXMgYXJlIHJlc2V0IHRvIGRlZmF1bHQgdmFsdWVzOlxuICAgKiAtIElSTSBpcyByZXNldCAoZGFmYXVsdCA9IGZhbHNlKVxuICAgKiAtIHNjcm9sbCBtYXJnaW5zIGFyZSByZXNldCAoZGVmYXVsdCA9IHZpZXdwb3J0IHNpemUpXG4gICAqIC0gZXJhc2UgYXR0cmlidXRlcyBhcmUgcmVzZXQgdG8gZGVmYXVsdFxuICAgKiAtIGNoYXJzZXRzIGFyZSByZXNldFxuICAgKiAtIERFQ1NDIGRhdGEgaXMgcmVzZXQgdG8gaW5pdGlhbCB2YWx1ZXNcbiAgICogLSBERUNPTSBpcyByZXNldCB0byBhYnNvbHV0ZSBtb2RlXG4gICAqXG4gICAqXG4gICAqIEZJWE1FOiB0aGVyZSBhcmUgc2V2ZXJhbCBtb3JlIGF0dHJpYnV0ZXMgbWlzc2luZyAoc2VlIFZUNTIwIG1hbnVhbClcbiAgICovXG4gIHB1YmxpYyBzb2Z0UmVzZXQocGFyYW1zOiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4gPSBmYWxzZTtcbiAgICB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wID0gMDtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tID0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMTtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YSA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gICAgdGhpcy5fY29yZVNlcnZpY2UucmVzZXQoKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpO1xuXG4gICAgLy8gcmVzZXQgREVDU0MgZGF0YVxuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFggPSAwO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2U7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmcgPSB0aGlzLl9jdXJBdHRyRGF0YS5mZztcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmJnO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQgPSB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0O1xuXG4gICAgLy8gcmVzZXQgREVDT01cbiAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luID0gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ1NJIFBzIFNQIHEgIFNldCBjdXJzb3Igc3R5bGUgKERFQ1NDVVNSLCBWVDUyMCkuXG4gICAqICAgUHMgPSAwICAtPiByZXNldCB0byBvcHRpb24uXG4gICAqICAgUHMgPSAxICAtPiBibGlua2luZyBibG9jayAoZGVmYXVsdCkuXG4gICAqICAgUHMgPSAyICAtPiBzdGVhZHkgYmxvY2suXG4gICAqICAgUHMgPSAzICAtPiBibGlua2luZyB1bmRlcmxpbmUuXG4gICAqICAgUHMgPSA0ICAtPiBzdGVhZHkgdW5kZXJsaW5lLlxuICAgKiAgIFBzID0gNSAgLT4gYmxpbmtpbmcgYmFyICh4dGVybSkuXG4gICAqICAgUHMgPSA2ICAtPiBzdGVhZHkgYmFyICh4dGVybSkuXG4gICAqXG4gICAqIEB2dDogI1kgQ1NJIERFQ1NDVVNSICBcIlNldCBDdXJzb3IgU3R5bGVcIiAgXCJDU0kgUHMgU1AgcVwiICAgXCJTZXQgY3Vyc29yIHN0eWxlLlwiXG4gICAqIFN1cHBvcnRlZCBjdXJzb3Igc3R5bGVzOlxuICAgKiAgLSAwOiByZXNldCB0byBvcHRpb25cbiAgICogIC0gZW1wdHksIDE6IGJsaW5raW5nIGJsb2NrXG4gICAqICAtIDI6IHN0ZWFkeSBibG9ja1xuICAgKiAgLSAzOiBibGlua2luZyB1bmRlcmxpbmVcbiAgICogIC0gNDogc3RlYWR5IHVuZGVybGluZVxuICAgKiAgLSA1OiBibGlua2luZyBiYXJcbiAgICogIC0gNjogc3RlYWR5IGJhclxuICAgKi9cbiAgcHVibGljIHNldEN1cnNvclN0eWxlKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHBhcmFtID0gcGFyYW1zLmxlbmd0aCA9PT0gMCA/IDEgOiBwYXJhbXMucGFyYW1zWzBdO1xuICAgIGlmIChwYXJhbSA9PT0gMCkge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmN1cnNvclN0eWxlID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmN1cnNvckJsaW5rID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKHBhcmFtKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5jdXJzb3JTdHlsZSA9ICdibG9jayc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5jdXJzb3JTdHlsZSA9ICd1bmRlcmxpbmUnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuY3Vyc29yU3R5bGUgPSAnYmFyJztcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlzQmxpbmtpbmcgPSBwYXJhbSAlIDIgPT09IDE7XG4gICAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuY3Vyc29yQmxpbmsgPSBpc0JsaW5raW5nO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyByXG4gICAqICAgU2V0IFNjcm9sbGluZyBSZWdpb24gW3RvcDtib3R0b21dIChkZWZhdWx0ID0gZnVsbCBzaXplIG9mIHdpbi1cbiAgICogICBkb3cpIChERUNTVEJNKS5cbiAgICpcbiAgICogQHZ0OiAjWSBDU0kgREVDU1RCTSBcIlNldCBUb3AgYW5kIEJvdHRvbSBNYXJnaW5cIiBcIkNTSSBQcyA7IFBzIHJcIiBcIlNldCB0b3AgYW5kIGJvdHRvbSBtYXJnaW5zIG9mIHRoZSB2aWV3cG9ydCBbdG9wO2JvdHRvbV0gKGRlZmF1bHQgPSB2aWV3cG9ydCBzaXplKS5cIlxuICAgKi9cbiAgcHVibGljIHNldFNjcm9sbFJlZ2lvbihwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b3AgPSBwYXJhbXMucGFyYW1zWzBdIHx8IDE7XG4gICAgbGV0IGJvdHRvbTogbnVtYmVyO1xuXG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPCAyIHx8IChib3R0b20gPSBwYXJhbXMucGFyYW1zWzFdKSA+IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyB8fCBib3R0b20gPT09IDApIHtcbiAgICAgIGJvdHRvbSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztcbiAgICB9XG5cbiAgICBpZiAoYm90dG9tID4gdG9wKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wID0gdG9wIC0gMTtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20gPSBib3R0b20gLSAxO1xuICAgICAgdGhpcy5fc2V0Q3Vyc29yKDAsIDApO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDU0kgUHMgOyBQcyA7IFBzIHQgLSBWYXJpb3VzIHdpbmRvdyBtYW5pcHVsYXRpb25zIGFuZCByZXBvcnRzICh4dGVybSlcbiAgICpcbiAgICogTm90ZTogT25seSB0aG9zZSBsaXN0ZWQgYmVsb3cgYXJlIHN1cHBvcnRlZC4gQWxsIG90aGVycyBhcmUgbGVmdCB0byBpbnRlZ3JhdG9ycyBhbmRcbiAgICogbmVlZCBzcGVjaWFsIHRyZWF0bWVudCBiYXNlZCBvbiB0aGUgZW1iZWRkaW5nIGVudmlyb25tZW50LlxuICAgKlxuICAgKiAgICBQcyA9IDEgNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gdGV4dCBhcmVhIHNpemUgaW4gcGl4ZWxzLlxuICAgKiAgICAgIFJlc3VsdCBpcyBDU0kgNCA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICogICAgUHMgPSAxNCA7IDIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90IGltcGxlbWVudGVkXG4gICAqICAgIFBzID0gMTYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB4dGVybSBjaGFyYWN0ZXIgY2VsbCBzaXplIGluIHBpeGVscy5cbiAgICogICAgICBSZXN1bHQgaXMgQ1NJIDYgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAqICAgIFBzID0gMTggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICAgIFJlcG9ydCB0aGUgc2l6ZSBvZiB0aGUgdGV4dCBhcmVhIGluIGNoYXJhY3RlcnMuXG4gICAqICAgICAgUmVzdWx0IGlzIENTSSA4IDsgaGVpZ2h0IDsgd2lkdGggdFxuICAgKiAgICBQcyA9IDIwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgICBSZXBvcnQgeHRlcm0gd2luZG93J3MgaWNvbiBsYWJlbC5cbiAgICogICAgICBSZXN1bHQgaXMgT1NDIEwgbGFiZWwgU1RcbiAgICogICAgUHMgPSAyMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgICAgUmVwb3J0IHh0ZXJtIHdpbmRvdydzIHRpdGxlLlxuICAgKiAgICAgIFJlc3VsdCBpcyBPU0MgbCBsYWJlbCBTVFxuICAgKiAgICBQcyA9IDIyIDsgMCAgLT4gU2F2ZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgb24gc3RhY2suICAgICAgICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMiA7IDEgIC0+IFNhdmUgeHRlcm0gaWNvbiB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjIgOyAyICAtPiBTYXZlIHh0ZXJtIHdpbmRvdyB0aXRsZSBvbiBzdGFjay4gICAgICAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA9IDIzIDsgMCAgLT4gUmVzdG9yZSB4dGVybSBpY29uIGFuZCB3aW5kb3cgdGl0bGUgZnJvbSBzdGFjay4gICBzdXBwb3J0ZWRcbiAgICogICAgUHMgPSAyMyA7IDEgIC0+IFJlc3RvcmUgeHRlcm0gaWNvbiB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgICAgc3VwcG9ydGVkXG4gICAqICAgIFBzID0gMjMgOyAyICAtPiBSZXN0b3JlIHh0ZXJtIHdpbmRvdyB0aXRsZSBmcm9tIHN0YWNrLiAgICAgICAgICAgIHN1cHBvcnRlZFxuICAgKiAgICBQcyA+PSAyNCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3QgaW1wbGVtZW50ZWRcbiAgICovXG4gIHB1YmxpYyB3aW5kb3dPcHRpb25zKHBhcmFtczogSVBhcmFtcyk6IGJvb2xlYW4ge1xuICAgIGlmICghcGFyYW1Ub1dpbmRvd09wdGlvbihwYXJhbXMucGFyYW1zWzBdLCB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3Qgc2Vjb25kID0gKHBhcmFtcy5sZW5ndGggPiAxKSA/IHBhcmFtcy5wYXJhbXNbMV0gOiAwO1xuICAgIHN3aXRjaCAocGFyYW1zLnBhcmFtc1swXSkge1xuICAgICAgY2FzZSAxNDogIC8vIEdldFdpblNpemVQaXhlbHMsIHJldHVybnMgQ1NJIDQgOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmIChzZWNvbmQgIT09IDIpIHtcbiAgICAgICAgICB0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5maXJlKFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfV0lOX1NJWkVfUElYRUxTKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTY6ICAvLyBHZXRDZWxsU2l6ZVBpeGVscywgcmV0dXJucyBDU0kgNiA7IGhlaWdodCA7IHdpZHRoIHRcbiAgICAgICAgdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZShXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX0NFTExfU0laRV9QSVhFTFMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTg6ICAvLyBHZXRXaW5TaXplQ2hhcnMsIHJldHVybnMgQ1NJIDggOyBoZWlnaHQgOyB3aWR0aCB0XG4gICAgICAgIGlmICh0aGlzLl9idWZmZXJTZXJ2aWNlKSB7XG4gICAgICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9Wzg7JHt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N9OyR7dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfXRgKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjI6ICAvLyBQdXNoVGl0bGVcbiAgICAgICAgaWYgKHNlY29uZCA9PT0gMCB8fCBzZWNvbmQgPT09IDIpIHtcbiAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnB1c2godGhpcy5fd2luZG93VGl0bGUpO1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCA+IFNUQUNLX0xJTUlUKSB7XG4gICAgICAgICAgICB0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnNoaWZ0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5wdXNoKHRoaXMuX2ljb25OYW1lKTtcbiAgICAgICAgICBpZiAodGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGggPiBTVEFDS19MSU1JVCkge1xuICAgICAgICAgICAgdGhpcy5faWNvbk5hbWVTdGFjay5zaGlmdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjM6ICAvLyBQb3BUaXRsZVxuICAgICAgICBpZiAoc2Vjb25kID09PSAwIHx8IHNlY29uZCA9PT0gMikge1xuICAgICAgICAgIGlmICh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZXRUaXRsZSh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnBvcCgpISk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWNvbmQgPT09IDAgfHwgc2Vjb25kID09PSAxKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2ljb25OYW1lU3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNldEljb25OYW1lKHRoaXMuX2ljb25OYW1lU3RhY2sucG9wKCkhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cblxuICAvKipcbiAgICogQ1NJIHNcbiAgICogRVNDIDdcbiAgICogICBTYXZlIGN1cnNvciAoQU5TSS5TWVMpLlxuICAgKlxuICAgKiBAdnQ6ICNQW1RPRE8uLi5dICBDU0kgU0NPU0MgICBcIlNhdmUgQ3Vyc29yXCIgICBcIkNTSSBzXCIgICBcIlNhdmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICogQHZ0OiAjWSBFU0MgIFNDICAgXCJTYXZlIEN1cnNvclwiICAgXCJFU0MgN1wiICAgXCJTYXZlIGN1cnNvciBwb3NpdGlvbiwgY2hhcm1hcCBhbmQgdGV4dCBhdHRyaWJ1dGVzLlwiXG4gICAqL1xuICBwdWJsaWMgc2F2ZUN1cnNvcihwYXJhbXM/OiBJUGFyYW1zKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci54O1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFkgPSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmZnO1xuICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnID0gdGhpcy5fY3VyQXR0ckRhdGEuYmc7XG4gICAgdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldCA9IHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDU0kgdVxuICAgKiBFU0MgOFxuICAgKiAgIFJlc3RvcmUgY3Vyc29yIChBTlNJLlNZUykuXG4gICAqXG4gICAqIEB2dDogI1BbVE9ETy4uLl0gIENTSSBTQ09SQyBcIlJlc3RvcmUgQ3Vyc29yXCIgIFwiQ1NJIHVcIiAgIFwiUmVzdG9yZSBjdXJzb3IgcG9zaXRpb24sIGNoYXJtYXAgYW5kIHRleHQgYXR0cmlidXRlcy5cIlxuICAgKiBAdnQ6ICNZIEVTQyAgUkMgXCJSZXN0b3JlIEN1cnNvclwiICBcIkVTQyA4XCIgICBcIlJlc3RvcmUgY3Vyc29yIHBvc2l0aW9uLCBjaGFybWFwIGFuZCB0ZXh0IGF0dHJpYnV0ZXMuXCJcbiAgICovXG4gIHB1YmxpYyByZXN0b3JlQ3Vyc29yKHBhcmFtcz86IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFggfHwgMDtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFkgLSB0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UsIDApO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmZnID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuYmcgPSB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZztcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gKHRoaXMgYXMgYW55KS5fc2F2ZWRDaGFyc2V0O1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0KSB7XG4gICAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldDtcbiAgICB9XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE9TQyAyOyA8ZGF0YT4gU1QgKHNldCB3aW5kb3cgdGl0bGUpXG4gICAqICAgUHJveHkgdG8gc2V0IHdpbmRvdyB0aXRsZS5cbiAgICpcbiAgICogQHZ0OiAjUFtJY29uIG5hbWUgaXMgbm90IGV4cG9zZWQuXSAgIE9TQyAgICAwICAgXCJTZXQgV2luZG93cyBUaXRsZSBhbmQgSWNvbiBOYW1lXCIgIFwiT1NDIDAgOyBQdCBCRUxcIiAgXCJTZXQgd2luZG93IHRpdGxlIGFuZCBpY29uIG5hbWUuXCJcbiAgICogSWNvbiBuYW1lIGlzIG5vdCBzdXBwb3J0ZWQuIEZvciBXaW5kb3cgVGl0bGUgc2VlIGJlbG93LlxuICAgKlxuICAgKiBAdnQ6ICNZICAgICBPU0MgICAgMiAgIFwiU2V0IFdpbmRvd3MgVGl0bGVcIiAgXCJPU0MgMiA7IFB0IEJFTFwiICBcIlNldCB3aW5kb3cgdGl0bGUuXCJcbiAgICogeHRlcm0uanMgZG9lcyBub3QgbWFuaXB1bGF0ZSB0aGUgdGl0bGUgZGlyZWN0bHksIGluc3RlYWQgZXhwb3NlcyBjaGFuZ2VzIHZpYSB0aGUgZXZlbnRcbiAgICogYFRlcm1pbmFsLm9uVGl0bGVDaGFuZ2VgLlxuICAgKi9cbiAgcHVibGljIHNldFRpdGxlKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX3dpbmRvd1RpdGxlID0gZGF0YTtcbiAgICB0aGlzLl9vblRpdGxlQ2hhbmdlLmZpcmUoZGF0YSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDE7IDxkYXRhPiBTVFxuICAgKiBOb3RlOiBJY29uIG5hbWUgaXMgbm90IGV4cG9zZWQuXG4gICAqL1xuICBwdWJsaWMgc2V0SWNvbk5hbWUoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5faWNvbk5hbWUgPSBkYXRhO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyA0OyA8bnVtPiA7IDx0ZXh0PiBTVCAoc2V0IEFOU0kgY29sb3IgPG51bT4gdG8gPHRleHQ+KVxuICAgKlxuICAgKiBAdnQ6ICNZICAgIE9TQyAgICA0ICAgIFwiU2V0IEFOU0kgY29sb3JcIiAgIFwiT1NDIDQgOyBjIDsgc3BlYyBCRUxcIiBcIkNoYW5nZSBjb2xvciBudW1iZXIgYGNgIHRvIHRoZSBjb2xvciBzcGVjaWZpZWQgYnkgYHNwZWNgLlwiXG4gICAqIGBjYCBpcyB0aGUgY29sb3IgaW5kZXggYmV0d2VlbiAwIGFuZCAyNTUuIFRoZSBjb2xvciBmb3JtYXQgb2YgYHNwZWNgIGlzIGRlcml2ZWQgZnJvbVxuICAgKiBgWFBhcnNlQ29sb3JgIChzZWUgT1NDIDEwIGZvciBzdXBwb3J0ZWQgZm9ybWF0cykuIFRoZXJlIG1heSBiZSBtdWx0aXBlIGBjIDsgc3BlY2AgcGFpcnMgcHJlc2VudFxuICAgKiBpbiB0aGUgc2FtZSBpbnN0cnVjdGlvbi4gSWYgYHNwZWNgIGNvbnRhaW5zIGA/YCB0aGUgdGVybWluYWwgcmV0dXJucyBhIHNlcXVlbmNlIHdpdGggdGhlXG4gICAqIGN1cnJlbnRseSBzZXQgY29sb3IuXG4gICAqL1xuICBwdWJsaWMgc2V0T3JSZXBvcnRJbmRleGVkQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZXZlbnQ6IElDb2xvckV2ZW50ID0gW107XG4gICAgY29uc3Qgc2xvdHMgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgd2hpbGUgKHNsb3RzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHNsb3RzLnNoaWZ0KCkgYXMgc3RyaW5nO1xuICAgICAgY29uc3Qgc3BlYyA9IHNsb3RzLnNoaWZ0KCkgYXMgc3RyaW5nO1xuICAgICAgaWYgKC9eXFxkKyQvLmV4ZWMoaWR4KSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGlkeCk7XG4gICAgICAgIGlmIChpc1ZhbGlkQ29sb3JJbmRleChpbmRleCkpIHtcbiAgICAgICAgICBpZiAoc3BlYyA9PT0gJz8nKSB7XG4gICAgICAgICAgICBldmVudC5wdXNoKHsgdHlwZTogQ29sb3JSZXF1ZXN0VHlwZS5SRVBPUlQsIGluZGV4IH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IHBhcnNlQ29sb3Ioc3BlYyk7XG4gICAgICAgICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgZXZlbnQucHVzaCh7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuU0VULCBpbmRleCwgY29sb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChldmVudC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX29uQ29sb3IuZmlyZShldmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyA4IDsgPHBhcmFtcz4gOyA8dXJpPiBTVCAtIGNyZWF0ZSBoeXBlcmxpbmtcbiAgICogT1NDIDggOyA7IFNUIC0gZmluaXNoIGh5cGVybGlua1xuICAgKlxuICAgKiBUZXN0IGNhc2U6XG4gICAqXG4gICAqIGBgYHNoXG4gICAqIHByaW50ZiAnXFxlXTg7O2h0dHA6Ly9leGFtcGxlLmNvbVxcZVxcXFxUaGlzIGlzIGEgbGlua1xcZV04OztcXGVcXFxcXFxuJ1xuICAgKiBgYGBcbiAgICpcbiAgICogQHZ0OiAjWSAgICBPU0MgICAgOCAgICBcIkNyZWF0ZSBoeXBlcmxpbmtcIiAgIFwiT1NDIDggOyBwYXJhbXMgOyB1cmkgQkVMXCIgXCJDcmVhdGUgYSBoeXBlcmxpbmsgdG8gYHVyaWAgdXNpbmcgYHBhcmFtc2AuXCJcbiAgICogYHVyaWAgaXMgYSBoeXBlcmxpbmsgc3RhcnRpbmcgd2l0aCBgaHR0cDovL2AsIGBodHRwczovL2AsIGBmdHA6Ly9gLCBgZmlsZTovL2Agb3IgYG1haWx0bzovL2AuIGBwYXJhbXNgIGlzIGFuXG4gICAqIG9wdGlvbmFsIGxpc3Qgb2Yga2V5PXZhbHVlIGFzc2lnbm1lbnRzLCBzZXBhcmF0ZWQgYnkgdGhlIDogY2hhcmFjdGVyLlxuICAgKiBFeGFtcGxlOiBgaWQ9eHl6MTIzOmZvbz1iYXI6YmF6PXF1dXhgLlxuICAgKiBDdXJyZW50bHkgb25seSB0aGUgaWQga2V5IGlzIGRlZmluZWQuIENlbGxzIHRoYXQgc2hhcmUgdGhlIHNhbWUgSUQgYW5kIFVSSSBzaGFyZSBob3ZlclxuICAgKiBmZWVkYmFjay4gVXNlIGBPU0MgOCA7IDsgQkVMYCB0byBmaW5pc2ggdGhlIGN1cnJlbnQgaHlwZXJsaW5rLlxuICAgKi9cbiAgcHVibGljIHNldEh5cGVybGluayhkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBBcmcgcGFyc2luZyBpcyBzcGVjaWFsIGNhc2VzIHRvIHN1cHBvcnQgdW5lbmNvZGVkIHNlbWktY29sb25zIGluIHRoZSBVUklzICgjNDk0NClcbiAgICBjb25zdCBpZHggPSBkYXRhLmluZGV4T2YoJzsnKTtcbiAgICBpZiAoaWR4ID09PSAtMSkge1xuICAgICAgLy8gbWFsZm9ybWVkIHNlcXVlbmNlLCBqdXN0IHJldHVybiBhcyBoYW5kbGVkXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgaWQgPSBkYXRhLnNsaWNlKDAsIGlkeCkudHJpbSgpO1xuICAgIGNvbnN0IHVyaSA9IGRhdGEuc2xpY2UoaWR4ICsgMSk7XG4gICAgaWYgKHVyaSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NyZWF0ZUh5cGVybGluayhpZCwgdXJpKTtcbiAgICB9XG4gICAgaWYgKGlkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmluaXNoSHlwZXJsaW5rKCk7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVIeXBlcmxpbmsocGFyYW1zOiBzdHJpbmcsIHVyaTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gSXQncyBsZWdhbCB0byBvcGVuIGEgbmV3IGh5cGVybGluayB3aXRob3V0IGV4cGxpY2l0bHkgZmluaXNoaW5nIHRoZSBwcmV2aW91cyBvbmVcbiAgICBpZiAodGhpcy5fZ2V0Q3VycmVudExpbmtJZCgpKSB7XG4gICAgICB0aGlzLl9maW5pc2hIeXBlcmxpbmsoKTtcbiAgICB9XG4gICAgY29uc3QgcGFyc2VkUGFyYW1zID0gcGFyYW1zLnNwbGl0KCc6Jyk7XG4gICAgbGV0IGlkOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgaWRQYXJhbUluZGV4ID0gcGFyc2VkUGFyYW1zLmZpbmRJbmRleChlID0+IGUuc3RhcnRzV2l0aCgnaWQ9JykpO1xuICAgIGlmIChpZFBhcmFtSW5kZXggIT09IC0xKSB7XG4gICAgICBpZCA9IHBhcnNlZFBhcmFtc1tpZFBhcmFtSW5kZXhdLnNsaWNlKDMpIHx8IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQgPSB0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC5jbG9uZSgpO1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmV4dGVuZGVkLnVybElkID0gdGhpcy5fb3NjTGlua1NlcnZpY2UucmVnaXN0ZXJMaW5rKHsgaWQsIHVyaSB9KTtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YS51cGRhdGVFeHRlbmRlZCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmluaXNoSHlwZXJsaW5rKCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2N1ckF0dHJEYXRhLmV4dGVuZGVkID0gdGhpcy5fY3VyQXR0ckRhdGEuZXh0ZW5kZWQuY2xvbmUoKTtcbiAgICB0aGlzLl9jdXJBdHRyRGF0YS5leHRlbmRlZC51cmxJZCA9IDA7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEudXBkYXRlRXh0ZW5kZWQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIHNwZWNpYWwgY29sb3JzIC0gT1NDIDEwIHwgMTEgfCAxMlxuICBwcml2YXRlIF9zcGVjaWFsQ29sb3JzID0gW1NwZWNpYWxDb2xvckluZGV4LkZPUkVHUk9VTkQsIFNwZWNpYWxDb2xvckluZGV4LkJBQ0tHUk9VTkQsIFNwZWNpYWxDb2xvckluZGV4LkNVUlNPUl07XG5cbiAgLyoqXG4gICAqIEFwcGx5IGNvbG9ycyByZXF1ZXN0cyBmb3Igc3BlY2lhbCBjb2xvcnMgaW4gT1NDIDEwIHwgMTEgfCAxMi5cbiAgICogU2luY2UgdGhlc2UgY29tbWFuZHMgYXJlIHN0YWNraW5nIGZyb20gbXVsdGlwbGUgcGFyYW1ldGVycyxcbiAgICogd2UgaGFuZGxlIHRoZW0gaW4gYSBsb29wIHdpdGggYW4gZW50cnkgb2Zmc2V0IHRvIGBfc3BlY2lhbENvbG9yc2AuXG4gICAqL1xuICBwcml2YXRlIF9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihkYXRhOiBzdHJpbmcsIG9mZnNldDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2xvdHMgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90cy5sZW5ndGg7ICsraSwgKytvZmZzZXQpIHtcbiAgICAgIGlmIChvZmZzZXQgPj0gdGhpcy5fc3BlY2lhbENvbG9ycy5sZW5ndGgpIGJyZWFrO1xuICAgICAgaWYgKHNsb3RzW2ldID09PSAnPycpIHtcbiAgICAgICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVQT1JULCBpbmRleDogdGhpcy5fc3BlY2lhbENvbG9yc1tvZmZzZXRdIH1dKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gcGFyc2VDb2xvcihzbG90c1tpXSk7XG4gICAgICAgIGlmIChjb2xvcikge1xuICAgICAgICAgIHRoaXMuX29uQ29sb3IuZmlyZShbeyB0eXBlOiBDb2xvclJlcXVlc3RUeXBlLlNFVCwgaW5kZXg6IHRoaXMuX3NwZWNpYWxDb2xvcnNbb2Zmc2V0XSwgY29sb3IgfV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxMCA7IDx4Y29sb3IgbmFtZT58PD8+IFNUIC0gc2V0IG9yIHF1ZXJ5IGRlZmF1bHQgZm9yZWdyb3VuZCBjb2xvclxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMCAgICBcIlNldCBvciBxdWVyeSBkZWZhdWx0IGZvcmVncm91bmQgY29sb3JcIiAgIFwiT1NDIDEwIDsgUHQgQkVMXCIgIFwiU2V0IG9yIHF1ZXJ5IGRlZmF1bHQgZm9yZWdyb3VuZCBjb2xvci5cIlxuICAgKiBUbyBzZXQgdGhlIGNvbG9yLCB0aGUgZm9sbG93aW5nIGNvbG9yIHNwZWNpZmljYXRpb24gZm9ybWF0cyBhcmUgc3VwcG9ydGVkOlxuICAgKiAtIGByZ2I6PHJlZD4vPGdyZWVuPi88Ymx1ZT5gIGZvciAgYDxyZWQ+LCA8Z3JlZW4+LCA8Ymx1ZT5gIGluIGBoIHwgaGggfCBoaGggfCBoaGhoYCwgd2hlcmVcbiAgICogICBgaGAgaXMgYSBzaW5nbGUgaGV4YWRlY2ltYWwgZGlnaXQgKGNhc2UgaW5zaWduaWZpY2FudCkuIFRoZSBkaWZmZXJlbnQgd2lkdGhzIHNjYWxlXG4gICAqICAgZnJvbSA0IGJpdCAoYGhgKSB0byAxNiBiaXQgKGBoaGhoYCkgYW5kIGdldCBjb252ZXJ0ZWQgdG8gOCBiaXQgKGBoaGApLlxuICAgKiAtIGAjUkdCYCAtIDQgYml0cyBwZXIgY2hhbm5lbCwgZXhwYW5kZWQgdG8gYCNSMEcwQjBgXG4gICAqIC0gYCNSUkdHQkJgIC0gOCBiaXRzIHBlciBjaGFubmVsXG4gICAqIC0gYCNSUlJHR0dCQkJgIC0gMTIgYml0cyBwZXIgY2hhbm5lbCwgdHJ1bmNhdGVkIHRvIGAjUlJHR0JCYFxuICAgKiAtIGAjUlJSUkdHR0dCQkJCYCAtIDE2IGJpdHMgcGVyIGNoYW5uZWwsIHRydW5jYXRlZCB0byBgI1JSR0dCQmBcbiAgICpcbiAgICogKipOb3RlOioqIFgxMSBuYW1lZCBjb2xvcnMgYXJlIGN1cnJlbnRseSB1bnN1cHBvcnRlZC5cbiAgICpcbiAgICogSWYgYFB0YCBjb250YWlucyBgP2AgaW5zdGVhZCBvZiBhIGNvbG9yIHNwZWNpZmljYXRpb24sIHRoZSB0ZXJtaW5hbFxuICAgKiByZXR1cm5zIGEgc2VxdWVuY2Ugd2l0aCB0aGUgY3VycmVudCBkZWZhdWx0IGZvcmVncm91bmQgY29sb3JcbiAgICogKHVzZSB0aGF0IHNlcXVlbmNlIHRvIHJlc3RvcmUgdGhlIGNvbG9yIGFmdGVyIGNoYW5nZXMpLlxuICAgKlxuICAgKiAqKk5vdGU6KiogT3RoZXIgdGhhbiB4dGVybSwgeHRlcm0uanMgZG9lcyBub3Qgc3VwcG9ydCBPU0MgMTIgLSAxOS5cbiAgICogVGhlcmVmb3JlIHN0YWNraW5nIG11bHRpcGxlIGBQdGAgc2VwYXJhdGVkIGJ5IGA7YCBvbmx5IHdvcmtzIGZvciB0aGUgZmlyc3QgdHdvIGVudHJpZXMuXG4gICAqL1xuICBwdWJsaWMgc2V0T3JSZXBvcnRGZ0NvbG9yKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihkYXRhLCAwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgMTEgOyA8eGNvbG9yIG5hbWU+fDw/PiBTVCAtIHNldCBvciBxdWVyeSBkZWZhdWx0IGJhY2tncm91bmQgY29sb3JcbiAgICpcbiAgICogQHZ0OiAjWSAgT1NDICAgMTEgICAgXCJTZXQgb3IgcXVlcnkgZGVmYXVsdCBiYWNrZ3JvdW5kIGNvbG9yXCIgICBcIk9TQyAxMSA7IFB0IEJFTFwiICBcIlNhbWUgYXMgT1NDIDEwLCBidXQgZm9yIGRlZmF1bHQgYmFja2dyb3VuZC5cIlxuICAgKi9cbiAgcHVibGljIHNldE9yUmVwb3J0QmdDb2xvcihkYXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZGF0YSwgMSk7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDEyIDsgPHhjb2xvciBuYW1lPnw8Pz4gU1QgLSBzZXQgb3IgcXVlcnkgZGVmYXVsdCBjdXJzb3IgY29sb3JcbiAgICpcbiAgICogQHZ0OiAjWSAgT1NDICAgMTIgICAgXCJTZXQgb3IgcXVlcnkgZGVmYXVsdCBjdXJzb3IgY29sb3JcIiAgIFwiT1NDIDEyIDsgUHQgQkVMXCIgIFwiU2FtZSBhcyBPU0MgMTAsIGJ1dCBmb3IgZGVmYXVsdCBjdXJzb3IgY29sb3IuXCJcbiAgICovXG4gIHB1YmxpYyBzZXRPclJlcG9ydEN1cnNvckNvbG9yKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihkYXRhLCAyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgMTA0IDsgPG51bT4gU1QgLSByZXN0b3JlIEFOU0kgY29sb3IgPG51bT5cbiAgICpcbiAgICogQHZ0OiAjWSAgT1NDICAgMTA0ICAgIFwiUmVzZXQgQU5TSSBjb2xvclwiICAgXCJPU0MgMTA0IDsgYyBCRUxcIiBcIlJlc2V0IGNvbG9yIG51bWJlciBgY2AgdG8gdGhlbWVkIGNvbG9yLlwiXG4gICAqIGBjYCBpcyB0aGUgY29sb3IgaW5kZXggYmV0d2VlbiAwIGFuZCAyNTUuIFRoaXMgZnVuY3Rpb24gcmVzdG9yZXMgdGhlIGRlZmF1bHQgY29sb3IgZm9yIGBjYCBhc1xuICAgKiBzcGVjaWZpZWQgYnkgdGhlIGxvYWRlZCB0aGVtZS4gQW55IG51bWJlciBvZiBgY2AgcGFyYW1ldGVycyBtYXkgYmUgZ2l2ZW4uXG4gICAqIElmIG5vIHBhcmFtZXRlcnMgYXJlIGdpdmVuLCB0aGUgZW50aXJlIGluZGV4ZWQgY29sb3IgdGFibGUgd2lsbCBiZSByZXNldC5cbiAgICovXG4gIHB1YmxpYyByZXN0b3JlSW5kZXhlZENvbG9yKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVTVE9SRSB9XSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnQ6IElDb2xvckV2ZW50ID0gW107XG4gICAgY29uc3Qgc2xvdHMgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzbG90cy5sZW5ndGg7ICsraSkge1xuICAgICAgaWYgKC9eXFxkKyQvLmV4ZWMoc2xvdHNbaV0pKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoc2xvdHNbaV0pO1xuICAgICAgICBpZiAoaXNWYWxpZENvbG9ySW5kZXgoaW5kZXgpKSB7XG4gICAgICAgICAgZXZlbnQucHVzaCh7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVTVE9SRSwgaW5kZXggfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV2ZW50Lmxlbmd0aCkge1xuICAgICAgdGhpcy5fb25Db2xvci5maXJlKGV2ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogT1NDIDExMCBTVCAtIHJlc3RvcmUgZGVmYXVsdCBmb3JlZ3JvdW5kIGNvbG9yXG4gICAqXG4gICAqIEB2dDogI1kgIE9TQyAgIDExMCAgICBcIlJlc3RvcmUgZGVmYXVsdCBmb3JlZ3JvdW5kIGNvbG9yXCIgICBcIk9TQyAxMTAgQkVMXCIgIFwiUmVzdG9yZSBkZWZhdWx0IGZvcmVncm91bmQgdG8gdGhlbWVkIGNvbG9yLlwiXG4gICAqL1xuICBwdWJsaWMgcmVzdG9yZUZnQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVTVE9SRSwgaW5kZXg6IFNwZWNpYWxDb2xvckluZGV4LkZPUkVHUk9VTkQgfV0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE9TQyAxMTEgU1QgLSByZXN0b3JlIGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvclxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMTEgICAgXCJSZXN0b3JlIGRlZmF1bHQgYmFja2dyb3VuZCBjb2xvclwiICAgXCJPU0MgMTExIEJFTFwiICBcIlJlc3RvcmUgZGVmYXVsdCBiYWNrZ3JvdW5kIHRvIHRoZW1lZCBjb2xvci5cIlxuICAgKi9cbiAgcHVibGljIHJlc3RvcmVCZ0NvbG9yKGRhdGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX29uQ29sb3IuZmlyZShbeyB0eXBlOiBDb2xvclJlcXVlc3RUeXBlLlJFU1RPUkUsIGluZGV4OiBTcGVjaWFsQ29sb3JJbmRleC5CQUNLR1JPVU5EIH1dKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPU0MgMTEyIFNUIC0gcmVzdG9yZSBkZWZhdWx0IGN1cnNvciBjb2xvclxuICAgKlxuICAgKiBAdnQ6ICNZICBPU0MgICAxMTIgICAgXCJSZXN0b3JlIGRlZmF1bHQgY3Vyc29yIGNvbG9yXCIgICBcIk9TQyAxMTIgQkVMXCIgIFwiUmVzdG9yZSBkZWZhdWx0IGN1cnNvciB0byB0aGVtZWQgY29sb3IuXCJcbiAgICovXG4gIHB1YmxpYyByZXN0b3JlQ3Vyc29yQ29sb3IoZGF0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fb25Db2xvci5maXJlKFt7IHR5cGU6IENvbG9yUmVxdWVzdFR5cGUuUkVTVE9SRSwgaW5kZXg6IFNwZWNpYWxDb2xvckluZGV4LkNVUlNPUiB9XSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEVcbiAgICogQzEuTkVMXG4gICAqICAgREVDIG1uZW1vbmljOiBORUwgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vTkVMKVxuICAgKiAgIE1vdmVzIGN1cnNvciB0byBmaXJzdCBwb3NpdGlvbiBvbiBuZXh0IGxpbmUuXG4gICAqXG4gICAqIEB2dDogI1kgICBDMSAgICBORUwgICBcIk5leHQgTGluZVwiICAgXCJcXHg4NVwiICAgIFwiTW92ZSB0aGUgY3Vyc29yIHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIG5leHQgcm93LlwiXG4gICAqIEB2dDogI1kgICBFU0MgICBORUwgICBcIk5leHQgTGluZVwiICAgXCJFU0MgRVwiICAgXCJNb3ZlIHRoZSBjdXJzb3IgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgbmV4dCByb3cuXCJcbiAgICovXG4gIHB1YmxpYyBuZXh0TGluZSgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueCA9IDA7XG4gICAgdGhpcy5pbmRleCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyA9XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNLUEFNIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0tQQU0uaHRtbClcbiAgICogICBFbmFibGVzIHRoZSBudW1lcmljIGtleXBhZCB0byBzZW5kIGFwcGxpY2F0aW9uIHNlcXVlbmNlcyB0byB0aGUgaG9zdC5cbiAgICovXG4gIHB1YmxpYyBrZXlwYWRBcHBsaWNhdGlvbk1vZGUoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4nKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQgPSB0cnVlO1xuICAgIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyA+XG4gICAqICAgREVDIG1uZW1vbmljOiBERUNLUE5NIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ0tQTk0uaHRtbClcbiAgICogICBFbmFibGVzIHRoZSBrZXlwYWQgdG8gc2VuZCBudW1lcmljIGNoYXJhY3RlcnMgdG8gdGhlIGhvc3QuXG4gICAqL1xuICBwdWJsaWMga2V5cGFkTnVtZXJpY01vZGUoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygnU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC4nKTtcbiAgICB0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQgPSBmYWxzZTtcbiAgICB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgJSBAXG4gICAqIEVTQyAlIEdcbiAgICogICBTZWxlY3QgZGVmYXVsdCBjaGFyYWN0ZXIgc2V0LiBVVEYtOCBpcyBub3Qgc3VwcG9ydGVkIChzdHJpbmcgYXJlIHVuaWNvZGUgYW55d2F5cylcbiAgICogICB0aGVyZWZvcmUgRVNDICUgRyBkb2VzIHRoZSBzYW1lLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdERlZmF1bHRDaGFyc2V0KCk6IGJvb2xlYW4ge1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLCBERUZBVUxUX0NIQVJTRVQpOyAvLyBVUyAoZGVmYXVsdClcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgKCBDXG4gICAqICAgRGVzaWduYXRlIEcwIENoYXJhY3RlciBTZXQsIFZUMTAwLCBJU08gMjAyMi5cbiAgICogRVNDICkgQ1xuICAgKiAgIERlc2lnbmF0ZSBHMSBDaGFyYWN0ZXIgU2V0IChJU08gMjAyMiwgVlQxMDApLlxuICAgKiBFU0MgKiBDXG4gICAqICAgRGVzaWduYXRlIEcyIENoYXJhY3RlciBTZXQgKElTTyAyMDIyLCBWVDIyMCkuXG4gICAqIEVTQyArIENcbiAgICogICBEZXNpZ25hdGUgRzMgQ2hhcmFjdGVyIFNldCAoSVNPIDIwMjIsIFZUMjIwKS5cbiAgICogRVNDIC0gQ1xuICAgKiAgIERlc2lnbmF0ZSBHMSBDaGFyYWN0ZXIgU2V0IChWVDMwMCkuXG4gICAqIEVTQyAuIENcbiAgICogICBEZXNpZ25hdGUgRzIgQ2hhcmFjdGVyIFNldCAoVlQzMDApLlxuICAgKiBFU0MgLyBDXG4gICAqICAgRGVzaWduYXRlIEczIENoYXJhY3RlciBTZXQgKFZUMzAwKS4gQyA9IEEgIC0+IElTTyBMYXRpbi0xIFN1cHBsZW1lbnRhbC4gLSBTdXBwb3J0ZWQ/XG4gICAqL1xuICBwdWJsaWMgc2VsZWN0Q2hhcnNldChjb2xsZWN0QW5kRmxhZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKGNvbGxlY3RBbmRGbGFnLmxlbmd0aCAhPT0gMikge1xuICAgICAgdGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb2xsZWN0QW5kRmxhZ1swXSA9PT0gJy8nKSB7XG4gICAgICByZXR1cm4gdHJ1ZTsgIC8vIFRPRE86IElzIHRoaXMgc3VwcG9ydGVkP1xuICAgIH1cbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldChHTEVWRUxbY29sbGVjdEFuZEZsYWdbMF1dLCBDSEFSU0VUU1tjb2xsZWN0QW5kRmxhZ1sxXV0gfHwgREVGQVVMVF9DSEFSU0VUKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFU0MgRFxuICAgKiBDMS5JTkRcbiAgICogICBERUMgbW5lbW9uaWM6IElORCAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9JTkQuaHRtbClcbiAgICogICBNb3ZlcyB0aGUgY3Vyc29yIGRvd24gb25lIGxpbmUgaW4gdGhlIHNhbWUgY29sdW1uLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzEgICAgSU5EICAgXCJJbmRleFwiICAgXCJcXHg4NFwiICAgIFwiTW92ZSB0aGUgY3Vyc29yIG9uZSBsaW5lIGRvd24gc2Nyb2xsaW5nIGlmIG5lZWRlZC5cIlxuICAgKiBAdnQ6ICNZICAgRVNDICAgSU5EICAgXCJJbmRleFwiICAgXCJFU0MgRFwiICAgXCJNb3ZlIHRoZSBjdXJzb3Igb25lIGxpbmUgZG93biBzY3JvbGxpbmcgaWYgbmVlZGVkLlwiXG4gICAqL1xuICBwdWJsaWMgaW5kZXgoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSsrO1xuICAgIGlmICh0aGlzLl9hY3RpdmVCdWZmZXIueSA9PT0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSArIDEpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS07XG4gICAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPj0gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSB7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIueSA9IHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyAtIDE7XG4gICAgfVxuICAgIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIEhcbiAgICogQzEuSFRTXG4gICAqICAgREVDIG1uZW1vbmljOiBIVFMgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vSFRTLmh0bWwpXG4gICAqICAgU2V0cyBhIGhvcml6b250YWwgdGFiIHN0b3AgYXQgdGhlIGNvbHVtbiBwb3NpdGlvbiBpbmRpY2F0ZWQgYnlcbiAgICogICB0aGUgdmFsdWUgb2YgdGhlIGFjdGl2ZSBjb2x1bW4gd2hlbiB0aGUgdGVybWluYWwgcmVjZWl2ZXMgYW4gSFRTLlxuICAgKlxuICAgKiBAdnQ6ICNZICAgQzEgICAgSFRTICAgXCJIb3Jpem9udGFsIFRhYnVsYXRpb24gU2V0XCIgXCJcXHg4OFwiICAgIFwiUGxhY2VzIGEgdGFiIHN0b3AgYXQgdGhlIGN1cnJlbnQgY3Vyc29yIHBvc2l0aW9uLlwiXG4gICAqIEB2dDogI1kgICBFU0MgICBIVFMgICBcIkhvcml6b250YWwgVGFidWxhdGlvbiBTZXRcIiBcIkVTQyBIXCIgICBcIlBsYWNlcyBhIHRhYiBzdG9wIGF0IHRoZSBjdXJyZW50IGN1cnNvciBwb3NpdGlvbi5cIlxuICAgKi9cbiAgcHVibGljIHRhYlNldCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF0gPSB0cnVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBNXG4gICAqIEMxLlJJXG4gICAqICAgREVDIG1uZW1vbmljOiBIVFNcbiAgICogICBNb3ZlcyB0aGUgY3Vyc29yIHVwIG9uZSBsaW5lIGluIHRoZSBzYW1lIGNvbHVtbi4gSWYgdGhlIGN1cnNvciBpcyBhdCB0aGUgdG9wIG1hcmdpbixcbiAgICogICB0aGUgcGFnZSBzY3JvbGxzIGRvd24uXG4gICAqXG4gICAqIEB2dDogI1kgRVNDICBJUiBcIlJldmVyc2UgSW5kZXhcIiBcIkVTQyBNXCIgIFwiTW92ZSB0aGUgY3Vyc29yIG9uZSBsaW5lIHVwIHNjcm9sbGluZyBpZiBuZWVkZWQuXCJcbiAgICovXG4gIHB1YmxpYyByZXZlcnNlSW5kZXgoKTogYm9vbGVhbiB7XG4gICAgdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtcbiAgICBpZiAodGhpcy5fYWN0aXZlQnVmZmVyLnkgPT09IHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApIHtcbiAgICAgIC8vIHBvc3NpYmx5IG1vdmUgdGhlIGNvZGUgYmVsb3cgdG8gdGVybS5yZXZlcnNlU2Nyb2xsKCk7XG4gICAgICAvLyB0ZXN0OiBlY2hvIC1uZSAnXFxlWzE7MUhcXGVbNDRtXFxlTVxcZVswbSdcbiAgICAgIC8vIGJsYW5rTGluZSh0cnVlKSBpcyB4dGVybS9saW51eCBiZWhhdmlvclxuICAgICAgY29uc3Qgc2Nyb2xsUmVnaW9uSGVpZ2h0ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSAtIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7XG4gICAgICB0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UgKyB0aGlzLl9hY3RpdmVCdWZmZXIueSwgc2Nyb2xsUmVnaW9uSGVpZ2h0LCAxKTtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnksIHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7XG4gICAgICB0aGlzLl9kaXJ0eVJvd1RyYWNrZXIubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwgdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS07XG4gICAgICB0aGlzLl9yZXN0cmljdEN1cnNvcigpOyAvLyBxdWlja2ZpeCB0byBub3QgcnVuIG91dCBvZiBib3VuZHNcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRVNDIGNcbiAgICogICBERUMgbW5lbW9uaWM6IFJJUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9SSVMuaHRtbClcbiAgICogICBSZXNldCB0byBpbml0aWFsIHN0YXRlLlxuICAgKi9cbiAgcHVibGljIGZ1bGxSZXNldCgpOiBib29sZWFuIHtcbiAgICB0aGlzLl9wYXJzZXIucmVzZXQoKTtcbiAgICB0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5fY3VyQXR0ckRhdGEgPSBERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpO1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbCA9IERFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCk7XG4gIH1cblxuICAvKipcbiAgICogYmFja19jb2xvcl9lcmFzZSBmZWF0dXJlIGZvciB4dGVybS5cbiAgICovXG4gIHByaXZhdGUgX2VyYXNlQXR0ckRhdGEoKTogSUF0dHJpYnV0ZURhdGEge1xuICAgIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZyAmPSB+KEF0dHJpYnV0ZXMuQ01fTUFTSyB8IDB4RkZGRkZGKTtcbiAgICB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwuYmcgfD0gdGhpcy5fY3VyQXR0ckRhdGEuYmcgJiB+MHhGQzAwMDAwMDtcbiAgICByZXR1cm4gdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyBuXG4gICAqIEVTQyBvXG4gICAqIEVTQyB8XG4gICAqIEVTQyB9XG4gICAqIEVTQyB+XG4gICAqICAgREVDIG1uZW1vbmljOiBMUyAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9MUy5odG1sKVxuICAgKiAgIFdoZW4geW91IHVzZSBhIGxvY2tpbmcgc2hpZnQsIHRoZSBjaGFyYWN0ZXIgc2V0IHJlbWFpbnMgaW4gR0wgb3IgR1IgdW50aWxcbiAgICogICB5b3UgdXNlIGFub3RoZXIgbG9ja2luZyBzaGlmdC4gKHBhcnRseSBzdXBwb3J0ZWQpXG4gICAqL1xuICBwdWJsaWMgc2V0Z0xldmVsKGxldmVsOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwobGV2ZWwpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEVTQyAjIDhcbiAgICogICBERUMgbW5lbW9uaWM6IERFQ0FMTiAoaHR0cHM6Ly92dDEwMC5uZXQvZG9jcy92dDUxMC1ybS9ERUNBTE4uaHRtbClcbiAgICogICBUaGlzIGNvbnRyb2wgZnVuY3Rpb24gZmlsbHMgdGhlIGNvbXBsZXRlIHNjcmVlbiBhcmVhIHdpdGhcbiAgICogICBhIHRlc3QgcGF0dGVybiAoRSkgdXNlZCBmb3IgYWRqdXN0aW5nIHNjcmVlbiBhbGlnbm1lbnQuXG4gICAqXG4gICAqIEB2dDogI1kgICBFU0MgICBERUNBTE4gICBcIlNjcmVlbiBBbGlnbm1lbnQgUGF0dGVyblwiICBcIkVTQyAjIDhcIiAgXCJGaWxsIHZpZXdwb3J0IHdpdGggYSB0ZXN0IHBhdHRlcm4gKEUpLlwiXG4gICAqL1xuICBwdWJsaWMgc2NyZWVuQWxpZ25tZW50UGF0dGVybigpOiBib29sZWFuIHtcbiAgICAvLyBwcmVwYXJlIGNlbGwgZGF0YVxuICAgIGNvbnN0IGNlbGwgPSBuZXcgQ2VsbERhdGEoKTtcbiAgICBjZWxsLmNvbnRlbnQgPSAxIDw8IENvbnRlbnQuV0lEVEhfU0hJRlQgfCAnRScuY2hhckNvZGVBdCgwKTtcbiAgICBjZWxsLmZnID0gdGhpcy5fY3VyQXR0ckRhdGEuZmc7XG4gICAgY2VsbC5iZyA9IHRoaXMuX2N1ckF0dHJEYXRhLmJnO1xuXG5cbiAgICB0aGlzLl9zZXRDdXJzb3IoMCwgMCk7XG4gICAgZm9yIChsZXQgeU9mZnNldCA9IDA7IHlPZmZzZXQgPCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7ICsreU9mZnNldCkge1xuICAgICAgY29uc3Qgcm93ID0gdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlICsgdGhpcy5fYWN0aXZlQnVmZmVyLnkgKyB5T2Zmc2V0O1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQocm93KTtcbiAgICAgIGlmIChsaW5lKSB7XG4gICAgICAgIGxpbmUuZmlsbChjZWxsKTtcbiAgICAgICAgbGluZS5pc1dyYXBwZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtBbGxEaXJ0eSgpO1xuICAgIHRoaXMuX3NldEN1cnNvcigwLCAwKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIERDUyAkIHEgUHQgU1RcbiAgICogICBERUNSUVNTIChodHRwczovL3Z0MTAwLm5ldC9kb2NzL3Z0NTEwLXJtL0RFQ1JRU1MuaHRtbClcbiAgICogICBSZXF1ZXN0IFN0YXR1cyBTdHJpbmcgKERFQ1JRU1MpLCBWVDQyMCBhbmQgdXAuXG4gICAqICAgUmVzcG9uc2U6IERFQ1JQU1MgKGh0dHBzOi8vdnQxMDAubmV0L2RvY3MvdnQ1MTAtcm0vREVDUlBTUy5odG1sKVxuICAgKlxuICAgKiBAdnQ6ICNQW0xpbWl0ZWQgc3VwcG9ydCwgc2VlIGJlbG93Ll0gIERDUyAgIERFQ1JRU1MgICBcIlJlcXVlc3QgU2VsZWN0aW9uIG9yIFNldHRpbmdcIiAgXCJEQ1MgJCBxIFB0IFNUXCIgICBcIlJlcXVlc3Qgc2V2ZXJhbCB0ZXJtaW5hbCBzZXR0aW5ncy5cIlxuICAgKiBSZXNwb25zZSBpcyBpbiB0aGUgZm9ybSBgRVNDIFAgMSAkIHIgUHQgU1RgIGZvciB2YWxpZCByZXF1ZXN0cywgd2hlcmUgYFB0YCBjb250YWlucyB0aGVcbiAgICogY29ycmVzcG9uZGluZyBDU0kgc3RyaW5nLCBgRVNDIFAgMCBTVGAgZm9yIGludmFsaWQgcmVxdWVzdHMuXG4gICAqXG4gICAqIFN1cHBvcnRlZCByZXF1ZXN0cyBhbmQgcmVzcG9uc2VzOlxuICAgKlxuICAgKiB8IFR5cGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUmVxdWVzdCAgICAgICAgICAgfCBSZXNwb25zZSAoYFB0YCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqIHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIHxcbiAgICogfCBHcmFwaGljIFJlbmRpdGlvbiAoU0dSKSAgICAgICAgICB8IGBEQ1MgJCBxIG0gU1RgICAgIHwgYWx3YXlzIHJlcG9ydGluZyBgMG1gIChjdXJyZW50bHkgYnJva2VuKSAgICAgICAgICAgICAgfFxuICAgKiB8IFRvcCBhbmQgQm90dG9tIE1hcmdpbnMgKERFQ1NUQk0pIHwgYERDUyAkIHEgciBTVGAgICAgfCBgUHMgOyBQcyByYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAqIHwgQ3Vyc29yIFN0eWxlIChERUNTQ1VTUikgICAgICAgICAgfCBgRENTICQgcSBTUCBxIFNUYCB8IGBQcyBTUCBxYCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICogfCBQcm90ZWN0aW9uIEF0dHJpYnV0ZSAoREVDU0NBKSAgICB8IGBEQ1MgJCBxIFwiIHEgU1RgICB8IGBQcyBcIiBxYCAoREVDU0NBIDIgaXMgcmVwb3J0ZWQgYXMgUHMgPSAwKSAgICAgICAgICAgICB8XG4gICAqIHwgQ29uZm9ybWFuY2UgTGV2ZWwgKERFQ1NDTCkgICAgICAgfCBgRENTICQgcSBcIiBwIFNUYCAgfCBhbHdheXMgcmVwb3J0aW5nIGA2MSA7IDEgXCIgcGAgKERFQ1NDTCBpcyB1bnN1cHBvcnRlZCkgfFxuICAgKlxuICAgKlxuICAgKiBUT0RPOlxuICAgKiAtIGZpeCBTR1IgcmVwb3J0XG4gICAqIC0gZWl0aGVyIGNoZWNrIHdoaWNoIGNvbmZvcm1hbmNlIGlzIGJldHRlciBzdWl0ZWQgb3IgcmVtb3ZlIHRoZSByZXBvcnQgY29tcGxldGVseVxuICAgKiAgIC0tPiB3ZSBhcmUgY3VycmVudGx5IGEgbWl4dHVyZSBvZiBhbGwgdXAgdG8gVlQ0MDAgYnV0IGRvbnQgZm9sbG93IGFueW9uZSBzdHJpY3RseVxuICAgKi9cbiAgcHVibGljIHJlcXVlc3RTdGF0dXNTdHJpbmcoZGF0YTogc3RyaW5nLCBwYXJhbXM6IElQYXJhbXMpOiBib29sZWFuIHtcbiAgICBjb25zdCBmID0gKHM6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9JHtzfSR7QzAuRVNDfVxcXFxgKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvLyBhY2Nlc3MgaGVscGVyc1xuICAgIGNvbnN0IGIgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtcbiAgICBjb25zdCBvcHRzID0gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucztcbiAgICBjb25zdCBTVFlMRVM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7ICdibG9jayc6IDIsICd1bmRlcmxpbmUnOiA0LCAnYmFyJzogNiB9O1xuXG4gICAgaWYgKGRhdGEgPT09ICdcInEnKSByZXR1cm4gZihgUDEkciR7dGhpcy5fY3VyQXR0ckRhdGEuaXNQcm90ZWN0ZWQoKSA/IDEgOiAwfVwicWApO1xuICAgIGlmIChkYXRhID09PSAnXCJwJykgcmV0dXJuIGYoYFAxJHI2MTsxXCJwYCk7XG4gICAgaWYgKGRhdGEgPT09ICdyJykgcmV0dXJuIGYoYFAxJHIke2Iuc2Nyb2xsVG9wICsgMX07JHtiLnNjcm9sbEJvdHRvbSArIDF9cmApO1xuICAgIC8vIEZJWE1FOiByZXBvcnQgcmVhbCBTR1Igc2V0dGluZ3MgaW5zdGVhZCBvZiAwbVxuICAgIGlmIChkYXRhID09PSAnbScpIHJldHVybiBmKGBQMSRyMG1gKTtcbiAgICBpZiAoZGF0YSA9PT0gJyBxJykgcmV0dXJuIGYoYFAxJHIke1NUWUxFU1tvcHRzLmN1cnNvclN0eWxlXSAtIChvcHRzLmN1cnNvckJsaW5rID8gMSA6IDApfSBxYCk7XG4gICAgcmV0dXJuIGYoYFAwJHJgKTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrUmFuZ2VEaXJ0eSh5MTogbnVtYmVyLCB5MjogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fZGlydHlSb3dUcmFja2VyLm1hcmtSYW5nZURpcnR5KHkxLCB5Mik7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGlydHlSb3dUcmFja2VyIHtcbiAgcmVhZG9ubHkgc3RhcnQ6IG51bWJlcjtcbiAgcmVhZG9ubHkgZW5kOiBudW1iZXI7XG5cbiAgY2xlYXJSYW5nZSgpOiB2b2lkO1xuICBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZDtcbiAgbWFya1JhbmdlRGlydHkoeTE6IG51bWJlciwgeTI6IG51bWJlcik6IHZvaWQ7XG4gIG1hcmtBbGxEaXJ0eSgpOiB2b2lkO1xufVxuXG5jbGFzcyBEaXJ0eVJvd1RyYWNrZXIgaW1wbGVtZW50cyBJRGlydHlSb3dUcmFja2VyIHtcbiAgcHVibGljIHN0YXJ0ITogbnVtYmVyO1xuICBwdWJsaWMgZW5kITogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJQnVmZmVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9idWZmZXJTZXJ2aWNlOiBJQnVmZmVyU2VydmljZVxuICApIHtcbiAgICB0aGlzLmNsZWFyUmFuZ2UoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclJhbmdlKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhcnQgPSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55O1xuICAgIHRoaXMuZW5kID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrRGlydHkoeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHkgPCB0aGlzLnN0YXJ0KSB7XG4gICAgICB0aGlzLnN0YXJ0ID0geTtcbiAgICB9IGVsc2UgaWYgKHkgPiB0aGlzLmVuZCkge1xuICAgICAgdGhpcy5lbmQgPSB5O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtYXJrUmFuZ2VEaXJ0eSh5MTogbnVtYmVyLCB5MjogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKHkxID4geTIpIHtcbiAgICAgICR0ZW1wID0geTE7XG4gICAgICB5MSA9IHkyO1xuICAgICAgeTIgPSAkdGVtcDtcbiAgICB9XG4gICAgaWYgKHkxIDwgdGhpcy5zdGFydCkge1xuICAgICAgdGhpcy5zdGFydCA9IHkxO1xuICAgIH1cbiAgICBpZiAoeTIgPiB0aGlzLmVuZCkge1xuICAgICAgdGhpcy5lbmQgPSB5MjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya0FsbERpcnR5KCk6IHZvaWQge1xuICAgIHRoaXMubWFya1JhbmdlRGlydHkoMCwgdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzIC0gMSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRDb2xvckluZGV4KHZhbHVlOiBudW1iZXIpOiB2YWx1ZSBpcyBDb2xvckluZGV4IHtcbiAgcmV0dXJuIDAgPD0gdmFsdWUgJiYgdmFsdWUgPCAyNTY7XG59XG4iLCAiXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuZGVjbGFyZSBjb25zdCBzZXRUaW1lb3V0OiAoaGFuZGxlcjogKCkgPT4gdm9pZCwgdGltZW91dD86IG51bWJlcikgPT4gdm9pZDtcblxuLyoqXG4gKiBTYWZldHkgd2F0ZXJtYXJrIHRvIGF2b2lkIG1lbW9yeSBleGhhdXN0aW9uIGFuZCBicm93c2VyIGVuZ2luZSBjcmFzaCBvbiBmYXN0IGRhdGEgaW5wdXQuXG4gKiBFbmFibGUgZmxvdyBjb250cm9sIHRvIGF2b2lkIHRoaXMgbGltaXQgYW5kIG1ha2Ugc3VyZSB0aGF0IHlvdXIgYmFja2VuZCBjb3JyZWN0bHlcbiAqIHByb3BhZ2F0ZXMgdGhpcyB0byB0aGUgdW5kZXJseWluZyBwdHkuIChzZWUgZG9jcyBmb3IgZnVydGhlciBpbnN0cnVjdGlvbnMpXG4gKiBTaW5jZSB0aGlzIGxpbWl0IGlzIG1lYW50IGFzIGEgc2FmZXR5IHBhcmFjaHV0ZSB0byBwcmV2ZW50IGJyb3dzZXIgY3Jhc2hzLFxuICogaXQgaXMgc2V0IHRvIGEgdmVyeSBoaWdoIG51bWJlci4gVHlwaWNhbGx5IHh0ZXJtLmpzIGdldHMgdW5yZXNwb25zaXZlIHdpdGhcbiAqIGEgMTAwIHRpbWVzIGxvd2VyIG51bWJlciAoPjUwMCBrQikuXG4gKi9cbmNvbnN0IERJU0NBUkRfV0FURVJNQVJLID0gNTAwMDAwMDA7IC8vIH41MCBNQlxuXG4vKipcbiAqIFRoZSBtYXggbnVtYmVyIG9mIG1zIHRvIHNwZW5kIG9uIHdyaXRlcyBiZWZvcmUgYWxsb3dpbmcgdGhlIHJlbmRlcmVyIHRvXG4gKiBjYXRjaCB1cCB3aXRoIGEgMG1zIHNldFRpbWVvdXQuIEEgdmFsdWUgb2YgPCAzMyB0byBrZWVwIHVzIGNsb3NlIHRvXG4gKiAzMGZwcywgYW5kIGEgdmFsdWUgb2YgPCAxNiB0byB0cnkgdG8gcnVuIGF0IDYwZnBzLiBPZiBjb3Vyc2UsIHRoZSByZWFsIEZQU1xuICogZGVwZW5kcyBvbiB0aGUgdGltZSBpdCB0YWtlcyBmb3IgdGhlIHJlbmRlcmVyIHRvIGRyYXcgdGhlIGZyYW1lLlxuICovXG5jb25zdCBXUklURV9USU1FT1VUX01TID0gMTI7XG5cbi8qKlxuICogVGhyZXNob2xkIG9mIG1heCBoZWxkIGNodW5rcyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGF0IHdlcmUgYWxyZWFkeSBwcm9jZXNzZWQuXG4gKiBUaGlzIGlzIGEgdHJhZGVvZmYgYmV0d2VlbiBleHRlbnNpdmUgd3JpdGUgYnVmZmVyIHNoaWZ0cyAoYmFkIHJ1bnRpbWUpIGFuZCBoaWdoXG4gKiBtZW1vcnkgY29uc3VtcHRpb24gYnkgZGF0YSB0aGF0cyBub3QgdXNlZCBhbnltb3JlLlxuICovXG5jb25zdCBXUklURV9CVUZGRVJfTEVOR1RIX1RIUkVTSE9MRCA9IDUwO1xuXG5leHBvcnQgY2xhc3MgV3JpdGVCdWZmZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgcHJpdmF0ZSBfd3JpdGVCdWZmZXI6IChzdHJpbmcgfCBVaW50OEFycmF5KVtdID0gW107XG4gIHByaXZhdGUgX2NhbGxiYWNrczogKCgoKSA9PiB2b2lkKSB8IHVuZGVmaW5lZClbXSA9IFtdO1xuICBwcml2YXRlIF9wZW5kaW5nRGF0YSA9IDA7XG4gIHByaXZhdGUgX2J1ZmZlck9mZnNldCA9IDA7XG4gIHByaXZhdGUgX2lzU3luY1dyaXRpbmcgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfc3luY0NhbGxzID0gMDtcbiAgcHJpdmF0ZSBfZGlkVXNlcklucHV0ID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25Xcml0ZVBhcnNlZCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25Xcml0ZVBhcnNlZCA9IHRoaXMuX29uV3JpdGVQYXJzZWQuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfYWN0aW9uOiAoZGF0YTogc3RyaW5nIHwgVWludDhBcnJheSwgcHJvbWlzZVJlc3VsdD86IGJvb2xlYW4pID0+IHZvaWQgfCBQcm9taXNlPGJvb2xlYW4+KSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVVc2VySW5wdXQoKTogdm9pZCB7XG4gICAgdGhpcy5fZGlkVXNlcklucHV0ID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBVbnJlbGlhYmxlLCB0byBiZSByZW1vdmVkIHNvb24uXG4gICAqL1xuICBwdWJsaWMgd3JpdGVTeW5jKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIG1heFN1YnNlcXVlbnRDYWxscz86IG51bWJlcik6IHZvaWQge1xuICAgIC8vIHN0b3Agd3JpdGVTeW5jIHJlY3Vyc2lvbnMgd2l0aCBtYXhTdWJzZXF1ZW50Q2FsbHMgYXJndW1lbnRcbiAgICAvLyBUaGlzIGlzIGRhbmdlcm91cyB0byB1c2UgYXMgaXQgd2lsbCBsb3NlIHRoZSBjdXJyZW50IGRhdGEgY2h1bmtcbiAgICAvLyBhbmQgcmV0dXJuIGltbWVkaWF0ZWx5LlxuICAgIGlmIChtYXhTdWJzZXF1ZW50Q2FsbHMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9zeW5jQ2FsbHMgPiBtYXhTdWJzZXF1ZW50Q2FsbHMpIHtcbiAgICAgIC8vIGNvbW1lbnQgbmV4dCBsaW5lIGlmIGEgd2hvbGUgbG9vcCBibG9jayBzaG91bGQgb25seSBjb250YWluIHggYHdyaXRlU3luY2AgY2FsbHNcbiAgICAgIC8vICh0b3RhbCBmbGF0IHZzLiBkZWVwIG5lc3RlZCBsaW1pdClcbiAgICAgIHRoaXMuX3N5bmNDYWxscyA9IDA7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFwcGVuZCBjaHVuayB0byBidWZmZXJcbiAgICB0aGlzLl9wZW5kaW5nRGF0YSArPSBkYXRhLmxlbmd0aDtcbiAgICB0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKHVuZGVmaW5lZCk7XG5cbiAgICAvLyBpbmNyZWFzZSByZWN1cnNpb24gY291bnRlclxuICAgIHRoaXMuX3N5bmNDYWxscysrO1xuICAgIC8vIGV4aXQgZWFybHkgaWYgYW5vdGhlciB3cml0ZVN5bmMgbG9vcCBpcyBhY3RpdmVcbiAgICBpZiAodGhpcy5faXNTeW5jV3JpdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc1N5bmNXcml0aW5nID0gdHJ1ZTtcblxuICAgIC8vIGZvcmNlIHN5bmMgcHJvY2Vzc2luZyBvbiBwZW5kaW5nIGRhdGEgY2h1bmtzIHRvIGF2b2lkIGluLWJhbmQgZGF0YSBzY3JhbWJsaW5nXG4gICAgLy8gZG9lcyB0aGUgc2FtZSBhcyBpbm5lcldyaXRlIGJ1dCB3aXRob3V0IGV2ZW50IGxvb3BcbiAgICAvLyB3ZSBoYXZlIHRvIGRvIGl0IGhlcmUgYXMgc2luZ2xlIGxvb3Agc3RlcHMgdG8gbm90IGNvcnJ1cHQgbG9vcCBzdWJqZWN0XG4gICAgLy8gYnkgYW5vdGhlciB3cml0ZVN5bmMgY2FsbCB0cmlnZ2VyZWQgZnJvbSBfYWN0aW9uXG4gICAgbGV0IGNodW5rOiBzdHJpbmcgfCBVaW50OEFycmF5IHwgdW5kZWZpbmVkO1xuICAgIHdoaWxlIChjaHVuayA9IHRoaXMuX3dyaXRlQnVmZmVyLnNoaWZ0KCkpIHtcbiAgICAgIHRoaXMuX2FjdGlvbihjaHVuayk7XG4gICAgICBjb25zdCBjYiA9IHRoaXMuX2NhbGxiYWNrcy5zaGlmdCgpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH1cbiAgICAvLyByZXNldCB0byBhdm9pZCByZXByb2Nlc3Npbmcgb2YgY2h1bmtzIHdpdGggc2NoZWR1bGVkIGlubmVyV3JpdGUgY2FsbFxuICAgIC8vIHN0b3BwaW5nIHNjaGVkdWxlZCBpbm5lcldyaXRlIGJ5IG9mZnNldCA+IGxlbmd0aCBjb25kaXRpb25cbiAgICB0aGlzLl9wZW5kaW5nRGF0YSA9IDA7XG4gICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMHg3RkZGRkZGRjtcblxuICAgIC8vIGFsbG93IGFub3RoZXIgd3JpdGVTeW5jIHRvIGxvb3BcbiAgICB0aGlzLl9pc1N5bmNXcml0aW5nID0gZmFsc2U7XG4gICAgdGhpcy5fc3luY0NhbGxzID0gMDtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZShkYXRhOiBzdHJpbmcgfCBVaW50OEFycmF5LCBjYWxsYmFjaz86ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fcGVuZGluZ0RhdGEgPiBESVNDQVJEX1dBVEVSTUFSSykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCd3cml0ZSBkYXRhIGRpc2NhcmRlZCwgdXNlIGZsb3cgY29udHJvbCB0byBhdm9pZCBsb3NpbmcgZGF0YScpO1xuICAgIH1cblxuICAgIC8vIHNjaGVkdWxlIGNodW5rIHByb2Nlc3NpbmcgZm9yIG5leHQgZXZlbnQgbG9vcCBydW5cbiAgICBpZiAoIXRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aCkge1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcblxuICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3Qgd3JpdGUgY2FsbCBhZnRlciB0aGUgdXNlciBoYXMgZG9uZSBzb21lIGlucHV0LFxuICAgICAgLy8gcGFyc2UgaXQgaW1tZWRpYXRlbHkgdG8gbWluaW1pemUgaW5wdXQgbGF0ZW5jeSxcbiAgICAgIC8vIG90aGVyd2lzZSBzY2hlZHVsZSBmb3IgdGhlIG5leHQgZXZlbnRcbiAgICAgIGlmICh0aGlzLl9kaWRVc2VySW5wdXQpIHtcbiAgICAgICAgdGhpcy5fZGlkVXNlcklucHV0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BlbmRpbmdEYXRhICs9IGRhdGEubGVuZ3RoO1xuICAgICAgICB0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGRhdGEpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgICAgIHRoaXMuX2lubmVyV3JpdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuX2lubmVyV3JpdGUoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGVuZGluZ0RhdGEgKz0gZGF0YS5sZW5ndGg7XG4gICAgdGhpcy5fd3JpdGVCdWZmZXIucHVzaChkYXRhKTtcbiAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICAvKipcbiAgICogSW5uZXIgd3JpdGUgY2FsbCwgdGhhdCBlbnRlcnMgdGhlIHNsaWNlZCBjaHVuayBwcm9jZXNzaW5nIGJ5IHRpbWluZy5cbiAgICpcbiAgICogYGxhc3RUaW1lYCBpbmRpY2F0ZXMsIHdoZW4gdGhlIGxhc3QgX2lubmVyV3JpdGUgY2FsbCBoYWQgc3RhcnRlZC5cbiAgICogSXQgaXMgdXNlZCB0byBhZ2dyZWdhdGUgYXN5bmMgaGFuZGxlciBleGVjdXRpb24gdW5kZXIgYSB0aW1lb3V0IGNvbnN0cmFpbnRcbiAgICogZWZmZWN0aXZlbHkgbG93ZXJpbmcgdGhlIHJlZHJhd2luZyBuZWVkcywgc2NoZW1hdGljYWxseTpcbiAgICpcbiAgICogICBtYWNyb1Rhc2sgX2lubmVyV3JpdGU6XG4gICAqICAgICBpZiAocGVyZm9ybWFuY2Uubm93KCkgLSAobGFzdFRpbWUgfCAwKSA8IFdSSVRFX1RJTUVPVVRfTVMpOlxuICAgKiAgICAgICAgc2NoZWR1bGUgbWljcm9UYXNrIF9pbm5lcldyaXRlKGxhc3RUaW1lKVxuICAgKiAgICAgZWxzZTpcbiAgICogICAgICAgIHNjaGVkdWxlIG1hY3JvVGFzayBfaW5uZXJXcml0ZSgwKVxuICAgKlxuICAgKiAgIG92ZXJhbGwgZXhlY3V0aW9uIG9yZGVyIG9uIHRhc2sgcXVldWVzOlxuICAgKlxuICAgKiAgIG1hY3JvdGFza3M6ICBbLi4uXSAgLS0+ICBfaW5uZXJXcml0ZSgwKSAgLS0+ICBbLi4uXSAgLS0+ICBzY3JlZW5VcGRhdGUgIC0tPiAgWy4uLl1cbiAgICogICAgICAgICBtICB0OiAgICAgICAgICAgICAgICAgICAgfFxuICAgKiAgICAgICAgIGkgIGE6ICAgICAgICAgICAgICAgICAgWy4uLl1cbiAgICogICAgICAgICBjICBzOiAgICAgICAgICAgICAgICAgICAgfFxuICAgKiAgICAgICAgIHIgIGs6ICAgICAgICAgICAgICB3aGlsZSA8IHRpbWVvdXQ6XG4gICAqICAgICAgICAgbyAgczogICAgICAgICAgICAgICAgX2lubmVyV3JpdGUodGltZW91dClcbiAgICpcbiAgICogYHByb21pc2VSZXN1bHRgIGRlcGljdHMgdGhlIHByb21pc2UgcmVzb2x2ZSB2YWx1ZSBvZiBhbiBhc3luYyBoYW5kbGVyLlxuICAgKiBUaGlzIHZhbHVlIGdldHMgY2FycmllZCBmb3J3YXJkIHRocm91Z2ggYWxsIHNhdmVkIHN0YWNrIHN0YXRlcyBvZiB0aGVcbiAgICogcGF1c2VkIHBhcnNlciBmb3IgcHJvcGVyIGNvbnRpbnVhdGlvbi5cbiAgICpcbiAgICogTm90ZSwgZm9yIHB1cmUgc3luYyBjb2RlIGBsYXN0VGltZWAgYW5kIGBwcm9taXNlUmVzdWx0YCBoYXZlIG5vIG1lYW5pbmcuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2lubmVyV3JpdGUobGFzdFRpbWU6IG51bWJlciA9IDAsIHByb21pc2VSZXN1bHQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbGFzdFRpbWUgfHwgcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgd2hpbGUgKHRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aCA+IHRoaXMuX2J1ZmZlck9mZnNldCkge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX3dyaXRlQnVmZmVyW3RoaXMuX2J1ZmZlck9mZnNldF07XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9hY3Rpb24oZGF0YSwgcHJvbWlzZVJlc3VsdCk7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB3ZSBnZXQgYSBwcm9taXNlIGFzIHJldHVybiB2YWx1ZSwgd2UgcmUtc2NoZWR1bGUgdGhlIGNvbnRpbnVhdGlvblxuICAgICAgICAgKiBhcyB0aGVuYWJsZSBvbiB0aGUgcHJvbWlzZSBhbmQgZXhpdCByaWdodCBhd2F5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgZXhpdCBoZXJlIG1lYW5zLCB0aGF0IHdlIGJsb2NrIGlucHV0IHByb2Nlc3NpbmcgYXQgdGhlIGN1cnJlbnQgYWN0aXZlIGNodW5rLFxuICAgICAgICAgKiB0aGUgZXhhY3QgZXhlY3V0aW9uIHBvc2l0aW9uIHdpdGhpbiB0aGUgY2h1bmsgaXMgcHJlc2VydmVkIGJ5IHRoZSBzYXZlZFxuICAgICAgICAgKiBzdGFjayBjb250ZW50IGluIElucHV0SGFuZGxlciBhbmQgRXNjYXBlU2VxdWVuY2VQYXJzZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFJlc3VtaW5nIGhhcHBlbnMgYXV0b21hdGljYWxseSBmcm9tIHRoYXQgc2F2ZWQgc3RhY2sgc3RhdGUuXG4gICAgICAgICAqIEFsc28gdGhlIHJlc29sdmVkIHByb21pc2UgdmFsdWUgaXMgcGFzc2VkIGFsb25nIHRoZSBjYWxsc3RhY2sgdG9cbiAgICAgICAgICogYEVzY2FwZVNlcXVlbmNlUGFyc2VyLnBhcnNlYCB0byBjb3JyZWN0bHkgcmVzdW1lIHRoZSBzdG9wcGVkIGhhbmRsZXIgbG9vcC5cbiAgICAgICAgICpcbiAgICAgICAgICogRXhjZXB0aW9ucyBvbiBhc3luYyBoYW5kbGVycyB3aWxsIGJlIGxvZ2dlZCB0byBjb25zb2xlIGFzeW5jLCBidXQgZG8gbm90IGludGVycnVwdFxuICAgICAgICAgKiB0aGUgaW5wdXQgcHJvY2Vzc2luZyAoY29udGludWVzIHdpdGggbmV4dCBoYW5kbGVyIGF0IHRoZSBjdXJyZW50IGlucHV0IHBvc2l0aW9uKS5cbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGEgcHJvbWlzZSB0YWtlcyBsb25nIHRvIHJlc29sdmUsIHdlIHNob3VsZCBzY2hlZHVsZSBjb250aW51YXRpb24gYmVoaW5kIHNldFRpbWVvdXQuXG4gICAgICAgICAqIFRoaXMgbWlnaHQgYWxyZWFkeSBiZSB0b28gbGF0ZSwgaWYgb3VyIC50aGVuIGVudGVycyByZWFsbHkgbGF0ZSAoZXhlY3V0b3IgKyBwcmV2IHRoZW5zXG4gICAgICAgICAqIHRvb2sgdmVyeSBsb25nKS4gVGhpcyBjYW5ub3QgYmUgc29sdmVkIGhlcmUgZm9yIHRoZSBoYW5kbGVyIGl0c2VsZiAoaXQgaXMgdGhlIGhhbmRsZXJzXG4gICAgICAgICAqIHJlc3BvbnNpYmlsaXR5IHRvIHNsaWNlIGhhcmQgd29yayksIGJ1dCB3ZSBjYW4gYXQgbGVhc3Qgc2NoZWR1bGUgYSBzY3JlZW4gdXBkYXRlIGFzIHdlXG4gICAgICAgICAqIGdhaW4gY29udHJvbC5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGNvbnRpbnVhdGlvbjogKHI6IGJvb2xlYW4pID0+IHZvaWQgPSAocjogYm9vbGVhbikgPT4gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWUgPj0gV1JJVEVfVElNRU9VVF9NU1xuICAgICAgICAgID8gc2V0VGltZW91dCgoKSA9PiB0aGlzLl9pbm5lcldyaXRlKDAsIHIpKVxuICAgICAgICAgIDogdGhpcy5faW5uZXJXcml0ZShzdGFydFRpbWUsIHIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpbWl6YXRpb24gY29uc2lkZXJhdGlvbnM6XG4gICAgICAgICAqIFRoZSBjb250aW51YXRpb24gYWJvdmUgZmF2b3JzIEZQUyBvdmVyIHRocm91Z2hwdXQgYnkgZXZhbCdpbmcgYHN0YXJ0VGltZWAgb24gcmVzb2x2ZS5cbiAgICAgICAgICogVGhpcyBtaWdodCBzY2hlZHVsZSB0b28gbWFueSBzY3JlZW4gdXBkYXRlcyB3aXRoIGJhZCB0aHJvdWdocHV0IGRyb3BzIChpbiBjYXNlIGEgc2xvd1xuICAgICAgICAgKiByZXNvbHZpbmcgaGFuZGxlciBzbGljZWQgaXRzIHdvcmsgcHJvcGVybHkgYmVoaW5kIHNldFRpbWVvdXQgY2FsbHMpLiBXZSBjYW5ub3Qgc3BvdFxuICAgICAgICAgKiB0aGlzIGNvbmRpdGlvbiBoZXJlLCBhbHNvIHRoZSByZW5kZXJlciBoYXMgbm8gd2F5IHRvIHNwb3Qgbm9uc2Vuc2UgdXBkYXRlcyBlaXRoZXIuXG4gICAgICAgICAqIEZJWE1FOiBBIHByb3BlciBmaXggZm9yIHRoaXMgd291bGQgdHJhY2sgdGhlIEZQUyBhdCB0aGUgcmVuZGVyZXIgZW50cnkgbGV2ZWwgc2VwYXJhdGVseS5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgZmF2b3Jpbmcgb2YgRlBTIHNob3dzIGJhZCB0aHJvdWdodHB1dCBpbXBhY3QsIHVzZSB0aGUgZm9sbG93aW5nIGluc3RlYWQuIEl0IGZhdm9yc1xuICAgICAgICAgKiB0aHJvdWdocHV0IGJ5IGV2YWwnaW5nIGBzdGFydFRpbWVgIHVwZnJvbnQgcHVsbGluZyBhdCBsZWFzdCBvbmUgbW9yZSBjaHVuayBpbnRvIHRoZVxuICAgICAgICAgKiBjdXJyZW50IG1pY3JvdGFzayBxdWV1ZSAoZXhlY3V0ZWQgYmVmb3JlIHNldFRpbWVvdXQpLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gY29uc3QgY29udGludWF0aW9uOiAocjogYm9vbGVhbikgPT4gdm9pZCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID49XG4gICAgICAgIC8vICAgICBXUklURV9USU1FT1VUX01TXG4gICAgICAgIC8vICAgPyByID0+IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5faW5uZXJXcml0ZSgwLCByKSlcbiAgICAgICAgLy8gICA6IHIgPT4gdGhpcy5faW5uZXJXcml0ZShzdGFydFRpbWUsIHIpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBleGNlcHRpb25zIHN5bmNocm9ub3VzbHkgdG8gY3VycmVudCBiYW5kIHBvc2l0aW9uLCBpZGVhOlxuICAgICAgICAvLyAxLiBzcGF3biBhIHNpbmdsZSBtaWNyb3Rhc2sgd2hpY2ggd2UgYWxsb3cgdG8gdGhyb3cgaGFyZFxuICAgICAgICAvLyAyLiBzcGF3biBhIHByb21pc2UgaW1tZWRpYXRlbHkgcmVzb2x2aW5nIHRvIGB0cnVlYFxuICAgICAgICAvLyAoZXhlY3V0ZWQgb24gdGhlIHNhbWUgcXVldWUsIHRodXMgcHJvcGVybHkgYWxpZ25lZCBiZWZvcmUgY29udGludWF0aW9uIGhhcHBlbnMpXG4gICAgICAgIHJlc3VsdC5jYXRjaChlcnIgPT4ge1xuICAgICAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHt0aHJvdyBlcnI7fSk7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0pLnRoZW4oY29udGludWF0aW9uKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjYiA9IHRoaXMuX2NhbGxiYWNrc1t0aGlzLl9idWZmZXJPZmZzZXRdO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0Kys7XG4gICAgICB0aGlzLl9wZW5kaW5nRGF0YSAtPSBkYXRhLmxlbmd0aDtcblxuICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lID49IFdSSVRFX1RJTUVPVVRfTVMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGggPiB0aGlzLl9idWZmZXJPZmZzZXQpIHtcbiAgICAgIC8vIEFsbG93IHJlbmRlcmVyIHRvIGNhdGNoIHVwIGJlZm9yZSBwcm9jZXNzaW5nIHRoZSBuZXh0IGJhdGNoXG4gICAgICAvLyB0cmltIGFscmVhZHkgcHJvY2Vzc2VkIGNodW5rcyBpZiB3ZSBhcmUgYWJvdmUgdGhyZXNob2xkXG4gICAgICBpZiAodGhpcy5fYnVmZmVyT2Zmc2V0ID4gV1JJVEVfQlVGRkVSX0xFTkdUSF9USFJFU0hPTEQpIHtcbiAgICAgICAgdGhpcy5fd3JpdGVCdWZmZXIgPSB0aGlzLl93cml0ZUJ1ZmZlci5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpO1xuICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3Muc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcbiAgICAgIH1cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5faW5uZXJXcml0ZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuX2NhbGxiYWNrcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5fcGVuZGluZ0RhdGEgPSAwO1xuICAgICAgdGhpcy5fYnVmZmVyT2Zmc2V0ID0gMDtcbiAgICB9XG4gICAgdGhpcy5fb25Xcml0ZVBhcnNlZC5maXJlKCk7XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAyMiBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5pbXBvcnQgeyBJQnVmZmVyU2VydmljZSwgSU9zY0xpbmtTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IElNYXJrZXIsIElPc2NMaW5rRGF0YSB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5cbmV4cG9ydCBjbGFzcyBPc2NMaW5rU2VydmljZSBpbXBsZW1lbnRzIElPc2NMaW5rU2VydmljZSB7XG4gIHB1YmxpYyBzZXJ2aWNlQnJhbmQ6IGFueTtcblxuICBwcml2YXRlIF9uZXh0SWQgPSAxO1xuXG4gIC8qKlxuICAgKiBBIG1hcCBvZiB0aGUgbGluayBrZXkgdG8gbGluayBlbnRyeS4gVGhpcyBpcyB1c2VkIHRvIGFkZCBhZGRpdGlvbmFsIGxpbmVzIHRvIGxpbmtzIHdpdGggaWRzLlxuICAgKi9cbiAgcHJpdmF0ZSBfZW50cmllc1dpdGhJZDogTWFwPHN0cmluZywgSU9zY0xpbmtFbnRyeVdpdGhJZD4gPSBuZXcgTWFwKCk7XG5cbiAgLyoqXG4gICAqIEEgbWFwIG9mIHRoZSBsaW5rIGlkIHRvIHRoZSBsaW5rIGVudHJ5LiBUaGUgXCJsaW5rIGlkXCIgKG51bWJlcikgd2hpY2ggaXMgdGhlIG51bWJlcmljXG4gICAqIHJlcHJlc2VudGF0aW9uIG9mIGEgdW5pcXVlIGxpbmsgc2hvdWxkIG5vdCBiZSBjb25mdXNlZCB3aXRoIFwiaWRcIiAoc3RyaW5nKSB3aGljaCBjb21lcyBpbiB3aXRoXG4gICAqIGBpZD1gIGluIHRoZSBPU0MgbGluaydzIHByb3BlcnRpZXMuXG4gICAqL1xuICBwcml2YXRlIF9kYXRhQnlMaW5rSWQ6IE1hcDxudW1iZXIsIElPc2NMaW5rRW50cnlOb0lkIHwgSU9zY0xpbmtFbnRyeVdpdGhJZD4gPSBuZXcgTWFwKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlXG4gICkge1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyTGluayhkYXRhOiBJT3NjTGlua0RhdGEpOiBudW1iZXIge1xuICAgIGNvbnN0IGJ1ZmZlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO1xuXG4gICAgLy8gTGlua3Mgd2l0aCBubyBpZCB3aWxsIG9ubHkgZXZlciBiZSByZWdpc3RlcmVkIGEgc2luZ2xlIHRpbWVcbiAgICBpZiAoZGF0YS5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBtYXJrZXIgPSBidWZmZXIuYWRkTWFya2VyKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55KTtcbiAgICAgIGNvbnN0IGVudHJ5OiBJT3NjTGlua0VudHJ5Tm9JZCA9IHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgaWQ6IHRoaXMuX25leHRJZCsrLFxuICAgICAgICBsaW5lczogW21hcmtlcl1cbiAgICAgIH07XG4gICAgICBtYXJrZXIub25EaXNwb3NlKCgpID0+IHRoaXMuX3JlbW92ZU1hcmtlckZyb21MaW5rKGVudHJ5LCBtYXJrZXIpKTtcbiAgICAgIHRoaXMuX2RhdGFCeUxpbmtJZC5zZXQoZW50cnkuaWQsIGVudHJ5KTtcbiAgICAgIHJldHVybiBlbnRyeS5pZDtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGxpbmUgdG8gdGhlIGxpbmsgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICBjb25zdCBjYXN0RGF0YSA9IGRhdGEgYXMgUmVxdWlyZWQ8SU9zY0xpbmtEYXRhPjtcbiAgICBjb25zdCBrZXkgPSB0aGlzLl9nZXRFbnRyeUlkS2V5KGNhc3REYXRhKTtcbiAgICBjb25zdCBtYXRjaCA9IHRoaXMuX2VudHJpZXNXaXRoSWQuZ2V0KGtleSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICB0aGlzLmFkZExpbmVUb0xpbmsobWF0Y2guaWQsIGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55KTtcbiAgICAgIHJldHVybiBtYXRjaC5pZDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgdGhlIGxpbmtcbiAgICBjb25zdCBtYXJrZXIgPSBidWZmZXIuYWRkTWFya2VyKGJ1ZmZlci55YmFzZSArIGJ1ZmZlci55KTtcbiAgICBjb25zdCBlbnRyeTogSU9zY0xpbmtFbnRyeVdpdGhJZCA9IHtcbiAgICAgIGlkOiB0aGlzLl9uZXh0SWQrKyxcbiAgICAgIGtleTogdGhpcy5fZ2V0RW50cnlJZEtleShjYXN0RGF0YSksXG4gICAgICBkYXRhOiBjYXN0RGF0YSxcbiAgICAgIGxpbmVzOiBbbWFya2VyXVxuICAgIH07XG4gICAgbWFya2VyLm9uRGlzcG9zZSgoKSA9PiB0aGlzLl9yZW1vdmVNYXJrZXJGcm9tTGluayhlbnRyeSwgbWFya2VyKSk7XG4gICAgdGhpcy5fZW50cmllc1dpdGhJZC5zZXQoZW50cnkua2V5LCBlbnRyeSk7XG4gICAgdGhpcy5fZGF0YUJ5TGlua0lkLnNldChlbnRyeS5pZCwgZW50cnkpO1xuICAgIHJldHVybiBlbnRyeS5pZDtcbiAgfVxuXG4gIHB1YmxpYyBhZGRMaW5lVG9MaW5rKGxpbmtJZDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuX2RhdGFCeUxpbmtJZC5nZXQobGlua0lkKTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChlbnRyeS5saW5lcy5ldmVyeShlID0+IGUubGluZSAhPT0geSkpIHtcbiAgICAgIGNvbnN0IG1hcmtlciA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmFkZE1hcmtlcih5KTtcbiAgICAgIGVudHJ5LmxpbmVzLnB1c2gobWFya2VyKTtcbiAgICAgIG1hcmtlci5vbkRpc3Bvc2UoKCkgPT4gdGhpcy5fcmVtb3ZlTWFya2VyRnJvbUxpbmsoZW50cnksIG1hcmtlcikpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRMaW5rRGF0YShsaW5rSWQ6IG51bWJlcik6IElPc2NMaW5rRGF0YSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFCeUxpbmtJZC5nZXQobGlua0lkKT8uZGF0YTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldEVudHJ5SWRLZXkobGlua0RhdGE6IFJlcXVpcmVkPElPc2NMaW5rRGF0YT4pOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHtsaW5rRGF0YS5pZH07OyR7bGlua0RhdGEudXJpfWA7XG4gIH1cblxuICBwcml2YXRlIF9yZW1vdmVNYXJrZXJGcm9tTGluayhlbnRyeTogSU9zY0xpbmtFbnRyeU5vSWQgfCBJT3NjTGlua0VudHJ5V2l0aElkLCBtYXJrZXI6IElNYXJrZXIpOiB2b2lkIHtcbiAgICBjb25zdCBpbmRleCA9IGVudHJ5LmxpbmVzLmluZGV4T2YobWFya2VyKTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVudHJ5LmxpbmVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgaWYgKGVudHJ5LmxpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaWYgKGVudHJ5LmRhdGEuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9lbnRyaWVzV2l0aElkLmRlbGV0ZSgoZW50cnkgYXMgSU9zY0xpbmtFbnRyeVdpdGhJZCkua2V5KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2RhdGFCeUxpbmtJZC5kZWxldGUoZW50cnkuaWQpO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgSU9zY0xpbmtFbnRyeTxUIGV4dGVuZHMgSU9zY0xpbmtEYXRhPiB7XG4gIGRhdGE6IFQ7XG4gIGlkOiBudW1iZXI7XG4gIGxpbmVzOiBJTWFya2VyW107XG59XG5cbmludGVyZmFjZSBJT3NjTGlua0VudHJ5Tm9JZCBleHRlbmRzIElPc2NMaW5rRW50cnk8SU9zY0xpbmtEYXRhPiB7XG59XG5cbmludGVyZmFjZSBJT3NjTGlua0VudHJ5V2l0aElkIGV4dGVuZHMgSU9zY0xpbmtFbnRyeTxSZXF1aXJlZDxJT3NjTGlua0RhdGE+PiB7XG4gIGtleTogc3RyaW5nO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMjAgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpXG4gKiBAbGljZW5zZSBNSVRcbiAqXG4gKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKTpcbiAqICAgRmFicmljZSBCZWxsYXJkJ3MgamF2YXNjcmlwdCB2dDEwMCBmb3IganNsaW51eDpcbiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvXG4gKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmRcbiAqICAgVGhlIG9yaWdpbmFsIGRlc2lnbiByZW1haW5zLiBUaGUgdGVybWluYWwgaXRzZWxmXG4gKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZ1xuICogICBvdGhlciBmZWF0dXJlcy5cbiAqXG4gKiBUZXJtaW5hbCBFbXVsYXRpb24gUmVmZXJlbmNlczpcbiAqICAgaHR0cDovL3Z0MTAwLm5ldC9cbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy50eHRcbiAqICAgaHR0cDovL2ludmlzaWJsZS1pc2xhbmQubmV0L3h0ZXJtL2N0bHNlcXMvY3Rsc2Vxcy5odG1sXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC92dHRlc3QvXG4gKiAgIGh0dHA6Ly93d3cuaW53YXAuY29tL3BkcDEwL2Fuc2ljb2RlLnR4dFxuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNC9jb25zb2xlX2NvZGVzXG4gKiAgIGh0dHA6Ly9saW51eC5kaWUubmV0L21hbi83L3VyeHZ0XG4gKi9cblxuaW1wb3J0IHsgSUluc3RhbnRpYXRpb25TZXJ2aWNlLCBJT3B0aW9uc1NlcnZpY2UsIElCdWZmZXJTZXJ2aWNlLCBJTG9nU2VydmljZSwgSUNoYXJzZXRTZXJ2aWNlLCBJQ29yZVNlcnZpY2UsIElDb3JlTW91c2VTZXJ2aWNlLCBJVW5pY29kZVNlcnZpY2UsIExvZ0xldmVsRW51bSwgSVRlcm1pbmFsT3B0aW9ucywgSU9zY0xpbmtTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IEluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0luc3RhbnRpYXRpb25TZXJ2aWNlJztcbmltcG9ydCB7IExvZ1NlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvTG9nU2VydmljZSc7XG5pbXBvcnQgeyBCdWZmZXJTZXJ2aWNlLCBNSU5JTVVNX0NPTFMsIE1JTklNVU1fUk9XUyB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9CdWZmZXJTZXJ2aWNlJztcbmltcG9ydCB7IE9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL09wdGlvbnNTZXJ2aWNlJztcbmltcG9ydCB7IElEaXNwb3NhYmxlLCBJQXR0cmlidXRlRGF0YSwgSUNvcmVUZXJtaW5hbCwgSVNjcm9sbEV2ZW50IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IENvcmVTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL0NvcmVTZXJ2aWNlJztcbmltcG9ydCB7IENvcmVNb3VzZVNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvQ29yZU1vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBVbmljb2RlU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9Vbmljb2RlU2VydmljZSc7XG5pbXBvcnQgeyBDaGFyc2V0U2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9DaGFyc2V0U2VydmljZSc7XG5pbXBvcnQgeyB1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSB9IGZyb20gJ2NvbW1vbi9XaW5kb3dzTW9kZSc7XG5pbXBvcnQgeyBJRnVuY3Rpb25JZGVudGlmaWVyLCBJUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBJQnVmZmVyU2V0IH0gZnJvbSAnY29tbW9uL2J1ZmZlci9UeXBlcyc7XG5pbXBvcnQgeyBJbnB1dEhhbmRsZXIgfSBmcm9tICdjb21tb24vSW5wdXRIYW5kbGVyJztcbmltcG9ydCB7IFdyaXRlQnVmZmVyIH0gZnJvbSAnY29tbW9uL2lucHV0L1dyaXRlQnVmZmVyJztcbmltcG9ydCB7IE9zY0xpbmtTZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL09zY0xpbmtTZXJ2aWNlJztcbmltcG9ydCB7IEVtaXR0ZXIsIEV2ZW50IH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSwgTXV0YWJsZURpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5cbi8vIE9ubHkgdHJpZ2dlciB0aGlzIHdhcm5pbmcgYSBzaW5nbGUgdGltZSBwZXIgc2Vzc2lvblxubGV0IGhhc1dyaXRlU3luY1dhcm5IYXBwZW5lZCA9IGZhbHNlO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29yZVRlcm1pbmFsIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElDb3JlVGVybWluYWwge1xuICBwcm90ZWN0ZWQgcmVhZG9ubHkgX2luc3RhbnRpYXRpb25TZXJ2aWNlOiBJSW5zdGFudGlhdGlvblNlcnZpY2U7XG4gIHByb3RlY3RlZCByZWFkb25seSBfYnVmZmVyU2VydmljZTogSUJ1ZmZlclNlcnZpY2U7XG4gIHByb3RlY3RlZCByZWFkb25seSBfbG9nU2VydmljZTogSUxvZ1NlcnZpY2U7XG4gIHByb3RlY3RlZCByZWFkb25seSBfY2hhcnNldFNlcnZpY2U6IElDaGFyc2V0U2VydmljZTtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9vc2NMaW5rU2VydmljZTogSU9zY0xpbmtTZXJ2aWNlO1xuXG4gIHB1YmxpYyByZWFkb25seSBjb3JlTW91c2VTZXJ2aWNlOiBJQ29yZU1vdXNlU2VydmljZTtcbiAgcHVibGljIHJlYWRvbmx5IGNvcmVTZXJ2aWNlOiBJQ29yZVNlcnZpY2U7XG4gIHB1YmxpYyByZWFkb25seSB1bmljb2RlU2VydmljZTogSVVuaWNvZGVTZXJ2aWNlO1xuICBwdWJsaWMgcmVhZG9ubHkgb3B0aW9uc1NlcnZpY2U6IElPcHRpb25zU2VydmljZTtcblxuICBwcm90ZWN0ZWQgX2lucHV0SGFuZGxlcjogSW5wdXRIYW5kbGVyO1xuICBwcml2YXRlIF93cml0ZUJ1ZmZlcjogV3JpdGVCdWZmZXI7XG4gIHByaXZhdGUgX3dpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MgPSB0aGlzLl9yZWdpc3RlcihuZXcgTXV0YWJsZURpc3Bvc2FibGUoKSk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25CaW5hcnkgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25CaW5hcnkgPSB0aGlzLl9vbkJpbmFyeS5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25EYXRhID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uRGF0YSA9IHRoaXMuX29uRGF0YS5ldmVudDtcbiAgcHJvdGVjdGVkIF9vbkxpbmVGZWVkID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkxpbmVGZWVkID0gdGhpcy5fb25MaW5lRmVlZC5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25SZXNpemUgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx7IGNvbHM6IG51bWJlciwgcm93czogbnVtYmVyIH0+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZXNpemUgPSB0aGlzLl9vblJlc2l6ZS5ldmVudDtcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IF9vbldyaXRlUGFyc2VkID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbldyaXRlUGFyc2VkID0gdGhpcy5fb25Xcml0ZVBhcnNlZC5ldmVudDtcblxuICAvKipcbiAgICogSW50ZXJuYWxseSB3ZSB0cmFjayB0aGUgc291cmNlIG9mIHRoZSBzY3JvbGwgYnV0IHRoaXMgaXMgbWVhbmluZ2xlc3Mgb3V0c2lkZSB0aGUgbGlicmFyeSBzb1xuICAgKiBpdCdzIGZpbHRlcmVkIG91dC5cbiAgICovXG4gIHByb3RlY3RlZCBfb25TY3JvbGxBcGk/OiBFbWl0dGVyPG51bWJlcj47XG4gIHByb3RlY3RlZCBfb25TY3JvbGwgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxJU2Nyb2xsRXZlbnQ+KCkpO1xuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IEV2ZW50PG51bWJlcj4ge1xuICAgIGlmICghdGhpcy5fb25TY3JvbGxBcGkpIHtcbiAgICAgIHRoaXMuX29uU2Nyb2xsQXBpID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgICAgIHRoaXMuX29uU2Nyb2xsLmV2ZW50KGV2ID0+IHtcbiAgICAgICAgdGhpcy5fb25TY3JvbGxBcGk/LmZpcmUoZXYucG9zaXRpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9vblNjcm9sbEFwaS5ldmVudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY29scygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyB9XG4gIHB1YmxpYyBnZXQgcm93cygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOyB9XG4gIHB1YmxpYyBnZXQgYnVmZmVycygpOiBJQnVmZmVyU2V0IHsgcmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyczsgfVxuICBwdWJsaWMgZ2V0IG9wdGlvbnMoKTogUmVxdWlyZWQ8SVRlcm1pbmFsT3B0aW9ucz4geyByZXR1cm4gdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zOyB9XG4gIHB1YmxpYyBzZXQgb3B0aW9ucyhvcHRpb25zOiBJVGVybWluYWxPcHRpb25zKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucykge1xuICAgICAgdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3B0aW9uczogUGFydGlhbDxJVGVybWluYWxPcHRpb25zPlxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gU2V0dXAgYW5kIGluaXRpYWxpemUgc2VydmljZXNcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZSA9IG5ldyBJbnN0YW50aWF0aW9uU2VydmljZSgpO1xuICAgIHRoaXMub3B0aW9uc1NlcnZpY2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgT3B0aW9uc1NlcnZpY2Uob3B0aW9ucykpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSU9wdGlvbnNTZXJ2aWNlLCB0aGlzLm9wdGlvbnNTZXJ2aWNlKTtcbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlID0gdGhpcy5fcmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQnVmZmVyU2VydmljZSkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUJ1ZmZlclNlcnZpY2UsIHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgIHRoaXMuX2xvZ1NlcnZpY2UgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShMb2dTZXJ2aWNlKSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJTG9nU2VydmljZSwgdGhpcy5fbG9nU2VydmljZSk7XG4gICAgdGhpcy5jb3JlU2VydmljZSA9IHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVTZXJ2aWNlKSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJQ29yZVNlcnZpY2UsIHRoaXMuY29yZVNlcnZpY2UpO1xuICAgIHRoaXMuY29yZU1vdXNlU2VydmljZSA9IHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvcmVNb3VzZVNlcnZpY2UpKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDb3JlTW91c2VTZXJ2aWNlLCB0aGlzLmNvcmVNb3VzZVNlcnZpY2UpO1xuICAgIHRoaXMudW5pY29kZVNlcnZpY2UgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShVbmljb2RlU2VydmljZSkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSVVuaWNvZGVTZXJ2aWNlLCB0aGlzLnVuaWNvZGVTZXJ2aWNlKTtcbiAgICB0aGlzLl9jaGFyc2V0U2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENoYXJzZXRTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElDaGFyc2V0U2VydmljZSwgdGhpcy5fY2hhcnNldFNlcnZpY2UpO1xuICAgIHRoaXMuX29zY0xpbmtTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoT3NjTGlua1NlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSU9zY0xpbmtTZXJ2aWNlLCB0aGlzLl9vc2NMaW5rU2VydmljZSk7XG5cblxuICAgIC8vIFJlZ2lzdGVyIGlucHV0IGhhbmRsZXIgYW5kIGhhbmRsZS9mb3J3YXJkIGV2ZW50c1xuICAgIHRoaXMuX2lucHV0SGFuZGxlciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBJbnB1dEhhbmRsZXIodGhpcy5fYnVmZmVyU2VydmljZSwgdGhpcy5fY2hhcnNldFNlcnZpY2UsIHRoaXMuY29yZVNlcnZpY2UsIHRoaXMuX2xvZ1NlcnZpY2UsIHRoaXMub3B0aW9uc1NlcnZpY2UsIHRoaXMuX29zY0xpbmtTZXJ2aWNlLCB0aGlzLmNvcmVNb3VzZVNlcnZpY2UsIHRoaXMudW5pY29kZVNlcnZpY2UpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuX2lucHV0SGFuZGxlci5vbkxpbmVGZWVkLCB0aGlzLl9vbkxpbmVGZWVkKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyKTtcblxuICAgIC8vIFNldHVwIGxpc3RlbmVyc1xuICAgIHRoaXMuX3JlZ2lzdGVyKEV2ZW50LmZvcndhcmQodGhpcy5fYnVmZmVyU2VydmljZS5vblJlc2l6ZSwgdGhpcy5fb25SZXNpemUpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuY29yZVNlcnZpY2Uub25EYXRhLCB0aGlzLl9vbkRhdGEpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuY29yZVNlcnZpY2Uub25CaW5hcnksIHRoaXMuX29uQmluYXJ5KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5jb3JlU2VydmljZS5vblJlcXVlc3RTY3JvbGxUb0JvdHRvbSgoKSA9PiB0aGlzLnNjcm9sbFRvQm90dG9tKHRydWUpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5jb3JlU2VydmljZS5vblVzZXJJbnB1dCgoKSA9PiAgdGhpcy5fd3JpdGVCdWZmZXIuaGFuZGxlVXNlcklucHV0KCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uTXVsdGlwbGVPcHRpb25DaGFuZ2UoWyd3aW5kb3dzTW9kZScsICd3aW5kb3dzUHR5J10sICgpID0+IHRoaXMuX2hhbmRsZVdpbmRvd3NQdHlPcHRpb25DaGFuZ2UoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoKCkgPT4ge1xuICAgICAgdGhpcy5fb25TY3JvbGwuZmlyZSh7IHBvc2l0aW9uOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCB9KTtcbiAgICAgIHRoaXMuX2lucHV0SGFuZGxlci5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3AsIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSk7XG4gICAgfSkpO1xuICAgIC8vIFNldHVwIFdyaXRlQnVmZmVyXG4gICAgdGhpcy5fd3JpdGVCdWZmZXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgV3JpdGVCdWZmZXIoKGRhdGEsIHByb21pc2VSZXN1bHQpID0+IHRoaXMuX2lucHV0SGFuZGxlci5wYXJzZShkYXRhLCBwcm9taXNlUmVzdWx0KSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKEV2ZW50LmZvcndhcmQodGhpcy5fd3JpdGVCdWZmZXIub25Xcml0ZVBhcnNlZCwgdGhpcy5fb25Xcml0ZVBhcnNlZCkpO1xuICB9XG5cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlKGRhdGEsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcml0ZSBkYXRhIHRvIHRlcm1pbmFsIHN5bmNob25vdXNseS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgaXMgdW5yZWxpYWJsZSB3aXRoIGFzeW5jIHBhcnNlciBoYW5kbGVycywgdGh1cyBzaG91bGQgbm90XG4gICAqIGJlIHVzZWQgYW55bW9yZS4gSWYgeW91IG5lZWQgYmxvY2tpbmcgc2VtYW50aWNzIG9uIGRhdGEgaW5wdXQgY29uc2lkZXJcbiAgICogYHdyaXRlYCB3aXRoIGEgY2FsbGJhY2sgaW5zdGVhZC5cbiAgICpcbiAgICogQGRlcHJlY2F0ZWQgVW5yZWxpYWJsZSwgd2lsbCBiZSByZW1vdmVkIHNvb24uXG4gICAqL1xuICBwdWJsaWMgd3JpdGVTeW5jKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIG1heFN1YnNlcXVlbnRDYWxscz86IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsIDw9IExvZ0xldmVsRW51bS5XQVJOICYmICFoYXNXcml0ZVN5bmNXYXJuSGFwcGVuZWQpIHtcbiAgICAgIHRoaXMuX2xvZ1NlcnZpY2Uud2Fybignd3JpdGVTeW5jIGlzIHVucmVsaWFibGUgYW5kIHdpbGwgYmUgcmVtb3ZlZCBzb29uLicpO1xuICAgICAgaGFzV3JpdGVTeW5jV2FybkhhcHBlbmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTeW5jKGRhdGEsIG1heFN1YnNlcXVlbnRDYWxscyk7XG4gIH1cblxuICBwdWJsaWMgaW5wdXQoZGF0YTogc3RyaW5nLCB3YXNVc2VySW5wdXQ6IGJvb2xlYW4gPSB0cnVlKTogdm9pZCB7XG4gICAgdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGRhdGEsIHdhc1VzZXJJbnB1dCk7XG4gIH1cblxuICBwdWJsaWMgcmVzaXplKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKGlzTmFOKHgpIHx8IGlzTmFOKHkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgeCA9IE1hdGgubWF4KHgsIE1JTklNVU1fQ09MUyk7XG4gICAgeSA9IE1hdGgubWF4KHksIE1JTklNVU1fUk9XUyk7XG5cbiAgICB0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSh4LCB5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdGhlIHRlcm1pbmFsIGRvd24gMSByb3csIGNyZWF0aW5nIGEgYmxhbmsgbGluZS5cbiAgICogQHBhcmFtIGVyYXNlQXR0ciBUaGUgYXR0cmlidXRlIGRhdGEgdG8gdXNlIHRoZSBmb3IgYmxhbmsgbGluZS5cbiAgICogQHBhcmFtIGlzV3JhcHBlZCBXaGV0aGVyIHRoZSBuZXcgbGluZSBpcyB3cmFwcGVkIGZyb20gdGhlIHByZXZpb3VzIGxpbmUuXG4gICAqL1xuICBwdWJsaWMgc2Nyb2xsKGVyYXNlQXR0cjogSUF0dHJpYnV0ZURhdGEsIGlzV3JhcHBlZDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwoZXJhc2VBdHRyLCBpc1dyYXBwZWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0aGUgZGlzcGxheSBvZiB0aGUgdGVybWluYWxcbiAgICogQHBhcmFtIGRpc3AgVGhlIG51bWJlciBvZiBsaW5lcyB0byBzY3JvbGwgZG93biAobmVnYXRpdmUgc2Nyb2xsIHVwKS5cbiAgICogQHBhcmFtIHN1cHByZXNzU2Nyb2xsRXZlbnQgRG9uJ3QgZW1pdCB0aGUgc2Nyb2xsIGV2ZW50IGFzIHNjcm9sbExpbmVzLiBUaGlzIGlzIHVzZWQgdG8gYXZvaWRcbiAgICogdW53YW50ZWQgZXZlbnRzIGJlaW5nIGhhbmRsZWQgYnkgdGhlIHZpZXdwb3J0IHdoZW4gdGhlIGV2ZW50IHdhcyB0cmlnZ2VyZWQgZnJvbSB0aGUgdmlld3BvcnRcbiAgICogb3JpZ2luYWxseS5cbiAgICovXG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhkaXNwOiBudW1iZXIsIHN1cHByZXNzU2Nyb2xsRXZlbnQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxMaW5lcyhkaXNwLCBzdXBwcmVzc1Njcm9sbEV2ZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc2Nyb2xsTGluZXMocGFnZUNvdW50ICogKHRoaXMucm93cyAtIDEpKTtcbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKC10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7XG4gIH1cblxuICBwdWJsaWMgc2Nyb2xsVG9Cb3R0b20oZGlzYWJsZVNtb290aFNjcm9sbD86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBBZGQgaGFuZGxlciBmb3IgRVNDIGVzY2FwZSBzZXF1ZW5jZS4gU2VlIHh0ZXJtLmQudHMgZm9yIGRldGFpbHMuICovXG4gIHB1YmxpYyByZWdpc3RlckVzY0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRXNjSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBEQ1MgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiBJUGFyYW1zKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgY2FsbGJhY2spO1xuICB9XG5cbiAgLyoqIEFkZCBoYW5kbGVyIGZvciBDU0kgZXNjYXBlIHNlcXVlbmNlLiBTZWUgeHRlcm0uZC50cyBmb3IgZGV0YWlscy4gKi9cbiAgcHVibGljIHJlZ2lzdGVyQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IElQYXJhbXMpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cblxuICAvKiogQWRkIGhhbmRsZXIgZm9yIE9TQyBlc2NhcGUgc2VxdWVuY2UuIFNlZSB4dGVybS5kLnRzIGZvciBkZXRhaWxzLiAqL1xuICBwdWJsaWMgcmVnaXN0ZXJPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXR1cCgpOiB2b2lkIHtcbiAgICB0aGlzLl9oYW5kbGVXaW5kb3dzUHR5T3B0aW9uQ2hhbmdlKCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XG4gICAgdGhpcy5faW5wdXRIYW5kbGVyLnJlc2V0KCk7XG4gICAgdGhpcy5fYnVmZmVyU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCk7XG4gICAgdGhpcy5jb3JlU2VydmljZS5yZXNldCgpO1xuICAgIHRoaXMuY29yZU1vdXNlU2VydmljZS5yZXNldCgpO1xuICB9XG5cblxuICBwcml2YXRlIF9oYW5kbGVXaW5kb3dzUHR5T3B0aW9uQ2hhbmdlKCk6IHZvaWQge1xuICAgIGxldCB2YWx1ZSA9IGZhbHNlO1xuICAgIGNvbnN0IHdpbmRvd3NQdHkgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c1B0eTtcbiAgICBpZiAod2luZG93c1B0eSAmJiB3aW5kb3dzUHR5LmJ1aWxkTnVtYmVyICE9PSB1bmRlZmluZWQgJiYgd2luZG93c1B0eS5idWlsZE51bWJlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWx1ZSA9ICEhKHdpbmRvd3NQdHkuYmFja2VuZCA9PT0gJ2NvbnB0eScgJiYgd2luZG93c1B0eS5idWlsZE51bWJlciA8IDIxMzc2KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZSkge1xuICAgICAgdmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHRoaXMuX2VuYWJsZVdpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fd2luZG93c1dyYXBwaW5nSGV1cmlzdGljcy5jbGVhcigpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZW5hYmxlV2luZG93c1dyYXBwaW5nSGV1cmlzdGljcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX3dpbmRvd3NXcmFwcGluZ0hldXJpc3RpY3MudmFsdWUpIHtcbiAgICAgIGNvbnN0IGRpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMub25MaW5lRmVlZCh1cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZS5iaW5kKG51bGwsIHRoaXMuX2J1ZmZlclNlcnZpY2UpKSk7XG4gICAgICBkaXNwb3NhYmxlcy5wdXNoKHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKHsgZmluYWw6ICdIJyB9LCAoKSA9PiB7XG4gICAgICAgIHVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlKHRoaXMuX2J1ZmZlclNlcnZpY2UpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KSk7XG4gICAgICB0aGlzLl93aW5kb3dzV3JhcHBpbmdIZXVyaXN0aWNzLnZhbHVlID0gdG9EaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBkIG9mIGRpc3Bvc2FibGVzKSB7XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUtleWJvYXJkRXZlbnQsIElLZXlib2FyZFJlc3VsdCwgS2V5Ym9hcmRSZXN1bHRUeXBlIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IEMwIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcblxuLy8gcmVnICsgc2hpZnQga2V5IG1hcHBpbmdzIGZvciBkaWdpdHMgYW5kIHNwZWNpYWwgY2hhcnNcbmNvbnN0IEtFWUNPREVfS0VZX01BUFBJTkdTOiB7IFtrZXk6IG51bWJlcl06IFtzdHJpbmcsIHN0cmluZ119ID0ge1xuICAvLyBkaWdpdHMgMC05XG4gIDQ4OiBbJzAnLCAnKSddLFxuICA0OTogWycxJywgJyEnXSxcbiAgNTA6IFsnMicsICdAJ10sXG4gIDUxOiBbJzMnLCAnIyddLFxuICA1MjogWyc0JywgJyQnXSxcbiAgNTM6IFsnNScsICclJ10sXG4gIDU0OiBbJzYnLCAnXiddLFxuICA1NTogWyc3JywgJyYnXSxcbiAgNTY6IFsnOCcsICcqJ10sXG4gIDU3OiBbJzknLCAnKCddLFxuXG4gIC8vIHNwZWNpYWwgY2hhcnNcbiAgMTg2OiBbJzsnLCAnOiddLFxuICAxODc6IFsnPScsICcrJ10sXG4gIDE4ODogWycsJywgJzwnXSxcbiAgMTg5OiBbJy0nLCAnXyddLFxuICAxOTA6IFsnLicsICc+J10sXG4gIDE5MTogWycvJywgJz8nXSxcbiAgMTkyOiBbJ2AnLCAnfiddLFxuICAyMTk6IFsnWycsICd7J10sXG4gIDIyMDogWydcXFxcJywgJ3wnXSxcbiAgMjIxOiBbJ10nLCAnfSddLFxuICAyMjI6IFsnXFwnJywgJ1wiJ11cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZUtleWJvYXJkRXZlbnQoXG4gIGV2OiBJS2V5Ym9hcmRFdmVudCxcbiAgYXBwbGljYXRpb25DdXJzb3JNb2RlOiBib29sZWFuLFxuICBpc01hYzogYm9vbGVhbixcbiAgbWFjT3B0aW9uSXNNZXRhOiBib29sZWFuXG4pOiBJS2V5Ym9hcmRSZXN1bHQge1xuICBjb25zdCByZXN1bHQ6IElLZXlib2FyZFJlc3VsdCA9IHtcbiAgICB0eXBlOiBLZXlib2FyZFJlc3VsdFR5cGUuU0VORF9LRVksXG4gICAgLy8gV2hldGhlciB0byBjYW5jZWwgZXZlbnQgcHJvcGFnYXRpb24gKE5PVEU6IHRoaXMgbWF5IG5vdCBiZSBuZWVkZWQgc2luY2UgdGhlIGV2ZW50IGlzXG4gICAgLy8gY2FuY2VsZWQgYXQgdGhlIGVuZCBvZiBrZXlEb3duXG4gICAgY2FuY2VsOiBmYWxzZSxcbiAgICAvLyBUaGUgbmV3IGtleSBldmVuIHRvIGVtaXRcbiAgICBrZXk6IHVuZGVmaW5lZFxuICB9O1xuICBjb25zdCBtb2RpZmllcnMgPSAoZXYuc2hpZnRLZXkgPyAxIDogMCkgfCAoZXYuYWx0S2V5ID8gMiA6IDApIHwgKGV2LmN0cmxLZXkgPyA0IDogMCkgfCAoZXYubWV0YUtleSA/IDggOiAwKTtcbiAgc3dpdGNoIChldi5rZXlDb2RlKSB7XG4gICAgY2FzZSAwOlxuICAgICAgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRVcEFycm93Jykge1xuICAgICAgICBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQSc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGV2LmtleSA9PT0gJ1VJS2V5SW5wdXRMZWZ0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09EJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tEJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dFJpZ2h0QXJyb3cnKSB7XG4gICAgICAgIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09DJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tDJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoZXYua2V5ID09PSAnVUlLZXlJbnB1dERvd25BcnJvdycpIHtcbiAgICAgICAgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0InO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0InO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDg6XG4gICAgICAvLyBiYWNrc3BhY2VcbiAgICAgIHJlc3VsdC5rZXkgPSBldi5jdHJsS2V5ID8gJ1xcYicgOiBDMC5ERUw7IC8vIF5IIG9yIF4/XG4gICAgICBpZiAoZXYuYWx0S2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyByZXN1bHQua2V5O1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSA5OlxuICAgICAgLy8gdGFiXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbWic7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkhUO1xuICAgICAgcmVzdWx0LmNhbmNlbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEzOlxuICAgICAgLy8gcmV0dXJuL2VudGVyXG4gICAgICByZXN1bHQua2V5ID0gZXYuYWx0S2V5ID8gQzAuRVNDICsgQzAuQ1IgOiBDMC5DUjtcbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyNzpcbiAgICAgIC8vIGVzY2FwZVxuICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQztcbiAgICAgIGlmIChldi5hbHRLZXkpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIEMwLkVTQztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzNzpcbiAgICAgIC8vIGxlZnQtYXJyb3dcbiAgICAgIGlmIChldi5tZXRhS2V5KSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnRCc7XG4gICAgICB9IGVsc2UgaWYgKGFwcGxpY2F0aW9uQ3Vyc29yTW9kZSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ09EJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnW0QnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOTpcbiAgICAgIC8vIHJpZ2h0LWFycm93XG4gICAgICBpZiAoZXYubWV0YUtleSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0MnO1xuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPQyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tDJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzg6XG4gICAgICAvLyB1cC1hcnJvd1xuICAgICAgaWYgKGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdBJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0EnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQSc7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQwOlxuICAgICAgLy8gZG93bi1hcnJvd1xuICAgICAgaWYgKGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdCJztcbiAgICAgIH0gZWxzZSBpZiAoYXBwbGljYXRpb25DdXJzb3JNb2RlKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT0InO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbQic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ1OlxuICAgICAgLy8gaW5zZXJ0XG4gICAgICBpZiAoIWV2LnNoaWZ0S2V5ICYmICFldi5jdHJsS2V5KSB7XG4gICAgICAgIC8vIDxDdHJsPiBvciA8U2hpZnQ+ICsgPEluc2VydD4gYXJlIHVzZWQgdG9cbiAgICAgICAgLy8gY29weS1wYXN0ZSBvbiBzb21lIHN5c3RlbXMuXG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzJ+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDY6XG4gICAgICAvLyBkZWxldGVcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMzsnICsgKG1vZGlmaWVycyArIDEpICsgJ34nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbM34nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzNjpcbiAgICAgIC8vIGhvbWVcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0gnO1xuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPSCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tIJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzU6XG4gICAgICAvLyBlbmRcbiAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdbMTsnICsgKG1vZGlmaWVycyArIDEpICsgJ0YnO1xuICAgICAgfSBlbHNlIGlmIChhcHBsaWNhdGlvbkN1cnNvck1vZGUpIHtcbiAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArICdPRic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1tGJztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzM6XG4gICAgICAvLyBwYWdlIHVwXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9VUDtcbiAgICAgIH0gZWxzZSBpZiAoZXYuY3RybEtleSkge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1s1OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1s1fic7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM0OlxuICAgICAgLy8gcGFnZSBkb3duXG4gICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgcmVzdWx0LnR5cGUgPSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9ET1dOO1xuICAgICAgfSBlbHNlIGlmIChldi5jdHJsS2V5KSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzY7JyArIChtb2RpZmllcnMgKyAxKSArICd+JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzZ+JztcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTEyOlxuICAgICAgLy8gRjEtRjEyXG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdQJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1AnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTM6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdRJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1EnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTQ6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdSJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1InO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTU6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE7JyArIChtb2RpZmllcnMgKyAxKSArICdTJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnT1MnO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTY6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE1OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxNX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTc6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE3OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxN34nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTg6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE4OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTk6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzE5OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1sxOX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjA6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIwOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syMH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjE6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIxOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syMX4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjI6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzIzOycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syM34nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjM6XG4gICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgIHJlc3VsdC5rZXkgPSBDMC5FU0MgKyAnWzI0OycgKyAobW9kaWZpZXJzICsgMSkgKyAnfic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsgJ1syNH4nO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIGEteiBhbmQgc3BhY2VcbiAgICAgIGlmIChldi5jdHJsS2V5ICYmICFldi5zaGlmdEtleSAmJiAhZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID49IDY1ICYmIGV2LmtleUNvZGUgPD0gOTApIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShldi5rZXlDb2RlIC0gNjQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLk5VTDtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID49IDUxICYmIGV2LmtleUNvZGUgPD0gNTUpIHtcbiAgICAgICAgICAvLyBlc2NhcGUsIGZpbGUgc2VwLCBncm91cCBzZXAsIHJlY29yZCBzZXAsIHVuaXQgc2VwXG4gICAgICAgICAgcmVzdWx0LmtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXYua2V5Q29kZSAtIDUxICsgMjcpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDU2KSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkRFTDtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAyMTkpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDIyMCkge1xuICAgICAgICAgIHJlc3VsdC5rZXkgPSBDMC5GUztcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09PSAyMjEpIHtcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuR1M7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoKCFpc01hYyB8fCBtYWNPcHRpb25Jc01ldGEpICYmIGV2LmFsdEtleSAmJiAhZXYubWV0YUtleSkge1xuICAgICAgICAvLyBPbiBtYWNPUyB0aGlzIGlzIGEgdGhpcmQgbGV2ZWwgc2hpZnQgd2hlbiAhbWFjT3B0aW9uSXNNZXRhLiBVc2UgPEVzYz4gaW5zdGVhZC5cbiAgICAgICAgY29uc3Qga2V5TWFwcGluZyA9IEtFWUNPREVfS0VZX01BUFBJTkdTW2V2LmtleUNvZGVdO1xuICAgICAgICBjb25zdCBrZXkgPSBrZXlNYXBwaW5nPy5bIWV2LnNoaWZ0S2V5ID8gMCA6IDFdO1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIGtleTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID49IDY1ICYmIGV2LmtleUNvZGUgPD0gOTApIHtcbiAgICAgICAgICBjb25zdCBrZXlDb2RlID0gZXYuY3RybEtleSA/IGV2LmtleUNvZGUgLSA2NCA6IGV2LmtleUNvZGUgKyAzMjtcbiAgICAgICAgICBsZXQga2V5U3RyaW5nID0gU3RyaW5nLmZyb21DaGFyQ29kZShrZXlDb2RlKTtcbiAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGtleVN0cmluZyA9IGtleVN0cmluZy50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsga2V5U3RyaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT09IDMyKSB7XG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLkVTQyArIChldi5jdHJsS2V5ID8gQzAuTlVMIDogJyAnKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXkgPT09ICdEZWFkJyAmJiBldi5jb2RlLnN0YXJ0c1dpdGgoJ0tleScpKSB7XG4gICAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2dpdGh1Yi5jb20veHRlcm1qcy94dGVybS5qcy9pc3N1ZXMvMzcyNVxuICAgICAgICAgIC8vIEFsdCB3aWxsIHByb2R1Y2UgYSBcImRlYWQga2V5XCIgKGluaXRhdGUgY29tcG9zaXRpb24pIHdpdGggc29tZVxuICAgICAgICAgIC8vIG9mIHRoZSBsZXR0ZXJzIGluIFVTIGxheW91dCAoZS5nLiBOL0UvVSkuXG4gICAgICAgICAgLy8gSXQncyBzYWZlIHRvIG1hdGNoIGFnYWluc3QgS2V5KiBzaW5jZSBubyBvdGhlciBgY29kZWAgdmFsdWVzIGJlZ2luIHdpdGggXCJLZXlcIi5cbiAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudC9jb2RlL2NvZGVfdmFsdWVzI2NvZGVfdmFsdWVzX29uX21hY1xuICAgICAgICAgIGxldCBrZXlTdHJpbmcgPSBldi5jb2RlLnNsaWNlKDMsIDQpO1xuICAgICAgICAgIGlmICghZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIGtleVN0cmluZyA9IGtleVN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuRVNDICsga2V5U3RyaW5nO1xuICAgICAgICAgIHJlc3VsdC5jYW5jZWwgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlzTWFjICYmICFldi5hbHRLZXkgJiYgIWV2LmN0cmxLZXkgJiYgIWV2LnNoaWZ0S2V5ICYmIGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPT09IDY1KSB7IC8vIGNtZCArIGFcbiAgICAgICAgICByZXN1bHQudHlwZSA9IEtleWJvYXJkUmVzdWx0VHlwZS5TRUxFQ1RfQUxMO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGV2LmtleSAmJiAhZXYuY3RybEtleSAmJiAhZXYuYWx0S2V5ICYmICFldi5tZXRhS2V5ICYmIGV2LmtleUNvZGUgPj0gNDggJiYgZXYua2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAvLyBJbmNsdWRlIG9ubHkga2V5cyB0aGF0IHRoYXQgcmVzdWx0IGluIGEgX3NpbmdsZV8gY2hhcmFjdGVyOyBkb24ndCBpbmNsdWRlIG51bSBsb2NrLFxuICAgICAgICAvLyB2b2x1bWUgdXAsIGV0Yy5cbiAgICAgICAgcmVzdWx0LmtleSA9IGV2LmtleTtcbiAgICAgIH0gZWxzZSBpZiAoZXYua2V5ICYmIGV2LmN0cmxLZXkpIHtcbiAgICAgICAgaWYgKGV2LmtleSA9PT0gJ18nKSB7IC8vIF5fXG4gICAgICAgICAgcmVzdWx0LmtleSA9IEMwLlVTO1xuICAgICAgICB9XG4gICAgICAgIGlmIChldi5rZXkgPT09ICdAJykgeyAvLyBeICsgc2hpZnQgKyAyID0gXiArIEBcbiAgICAgICAgICByZXN1bHQua2V5ID0gQzAuTlVMO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJZGxlVGFza1F1ZXVlIH0gZnJvbSAnY29tbW9uL1Rhc2tRdWV1ZSc7XG5cbi8vIFdvcmsgdmFyaWFibGVzIHRvIGF2b2lkIGdhcmJhZ2UgY29sbGVjdGlvbi5cbmxldCBpID0gMDtcblxuLyoqXG4gKiBBIGdlbmVyaWMgbGlzdCB0aGF0IGlzIG1haW50YWluZWQgaW4gc29ydGVkIG9yZGVyIGFuZCBhbGxvd3MgdmFsdWVzIHdpdGggZHVwbGljYXRlIGtleXMuIERlZmVycmVkXG4gKiBiYXRjaCBpbnNlcnRpb24gYW5kIGRlbGV0aW9uIGlzIHVzZWQgdG8gc2lnbmlmaWNhbnRseSByZWR1Y2UgdGhlIHRpbWUgaXQgdGFrZXMgdG8gaW5zZXJ0IGFuZFxuICogZGVsZXRlIGEgbGFyZ2UgYW1vdW50IG9mIGl0ZW1zIGluIHN1Y2Nlc3Npb24uIFRoaXMgbGlzdCBpcyBiYXNlZCBvbiBiaW5hcnkgc2VhcmNoIGFuZCBhcyBzdWNoXG4gKiBsb2NhdGluZyBhIGtleSB3aWxsIHRha2UgTyhsb2cgbikgYW1vcnRpemVkLCB0aGlzIGluY2x1ZGVzIHRoZSBieSBrZXkgaXRlcmF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBTb3J0ZWRMaXN0PFQ+IHtcbiAgcHJpdmF0ZSBfYXJyYXk6IFRbXSA9IFtdO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX2luc2VydGVkVmFsdWVzOiBUW10gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBfZmx1c2hJbnNlcnRlZFRhc2sgPSBuZXcgSWRsZVRhc2tRdWV1ZSgpO1xuICBwcml2YXRlIF9pc0ZsdXNoaW5nSW5zZXJ0ZWQgPSBmYWxzZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9kZWxldGVkSW5kaWNlczogbnVtYmVyW10gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBfZmx1c2hEZWxldGVkVGFzayA9IG5ldyBJZGxlVGFza1F1ZXVlKCk7XG4gIHByaXZhdGUgX2lzRmx1c2hpbmdEZWxldGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZ2V0S2V5OiAodmFsdWU6IFQpID0+IG51bWJlclxuICApIHtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9hcnJheS5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2luc2VydGVkVmFsdWVzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fZmx1c2hJbnNlcnRlZFRhc2suY2xlYXIoKTtcbiAgICB0aGlzLl9pc0ZsdXNoaW5nSW5zZXJ0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9kZWxldGVkSW5kaWNlcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2ZsdXNoRGVsZXRlZFRhc2suY2xlYXIoKTtcbiAgICB0aGlzLl9pc0ZsdXNoaW5nRGVsZXRlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGluc2VydCh2YWx1ZTogVCk6IHZvaWQge1xuICAgIHRoaXMuX2ZsdXNoQ2xlYW51cERlbGV0ZWQoKTtcbiAgICBpZiAodGhpcy5faW5zZXJ0ZWRWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9mbHVzaEluc2VydGVkVGFzay5lbnF1ZXVlKCgpID0+IHRoaXMuX2ZsdXNoSW5zZXJ0ZWQoKSk7XG4gICAgfVxuICAgIHRoaXMuX2luc2VydGVkVmFsdWVzLnB1c2godmFsdWUpO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmx1c2hJbnNlcnRlZCgpOiB2b2lkIHtcbiAgICBjb25zdCBzb3J0ZWRBZGRlZFZhbHVlcyA9IHRoaXMuX2luc2VydGVkVmFsdWVzLnNvcnQoKGEsIGIpID0+IHRoaXMuX2dldEtleShhKSAtIHRoaXMuX2dldEtleShiKSk7XG4gICAgbGV0IHNvcnRlZEFkZGVkVmFsdWVzSW5kZXggPSAwO1xuICAgIGxldCBhcnJheUluZGV4ID0gMDtcblxuICAgIGNvbnN0IG5ld0FycmF5ID0gbmV3IEFycmF5KHRoaXMuX2FycmF5Lmxlbmd0aCArIHRoaXMuX2luc2VydGVkVmFsdWVzLmxlbmd0aCk7XG5cbiAgICBmb3IgKGxldCBuZXdBcnJheUluZGV4ID0gMDsgbmV3QXJyYXlJbmRleCA8IG5ld0FycmF5Lmxlbmd0aDsgbmV3QXJyYXlJbmRleCsrKSB7XG4gICAgICBpZiAoYXJyYXlJbmRleCA+PSB0aGlzLl9hcnJheS5sZW5ndGggfHwgdGhpcy5fZ2V0S2V5KHNvcnRlZEFkZGVkVmFsdWVzW3NvcnRlZEFkZGVkVmFsdWVzSW5kZXhdKSA8PSB0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbYXJyYXlJbmRleF0pKSB7XG4gICAgICAgIG5ld0FycmF5W25ld0FycmF5SW5kZXhdID0gc29ydGVkQWRkZWRWYWx1ZXNbc29ydGVkQWRkZWRWYWx1ZXNJbmRleF07XG4gICAgICAgIHNvcnRlZEFkZGVkVmFsdWVzSW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0FycmF5W25ld0FycmF5SW5kZXhdID0gdGhpcy5fYXJyYXlbYXJyYXlJbmRleCsrXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9hcnJheSA9IG5ld0FycmF5O1xuICAgIHRoaXMuX2luc2VydGVkVmFsdWVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwcml2YXRlIF9mbHVzaENsZWFudXBJbnNlcnRlZCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2lzRmx1c2hpbmdJbnNlcnRlZCAmJiB0aGlzLl9pbnNlcnRlZFZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLl9mbHVzaEluc2VydGVkVGFzay5mbHVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkZWxldGUodmFsdWU6IFQpOiBib29sZWFuIHtcbiAgICB0aGlzLl9mbHVzaENsZWFudXBJbnNlcnRlZCgpO1xuICAgIGlmICh0aGlzLl9hcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qga2V5ID0gdGhpcy5fZ2V0S2V5KHZhbHVlKTtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaSA9IHRoaXMuX3NlYXJjaChrZXkpO1xuICAgIGlmIChpID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKSAhPT0ga2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRvIHtcbiAgICAgIGlmICh0aGlzLl9hcnJheVtpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWRJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2ZsdXNoRGVsZXRlZFRhc2suZW5xdWV1ZSgoKSA9PiB0aGlzLl9mbHVzaERlbGV0ZWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGVsZXRlZEluZGljZXMucHVzaChpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoKytpIDwgdGhpcy5fYXJyYXkubGVuZ3RoICYmIHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSkgPT09IGtleSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBfZmx1c2hEZWxldGVkKCk6IHZvaWQge1xuICAgIHRoaXMuX2lzRmx1c2hpbmdEZWxldGVkID0gdHJ1ZTtcbiAgICBjb25zdCBzb3J0ZWREZWxldGVkSW5kaWNlcyA9IHRoaXMuX2RlbGV0ZWRJbmRpY2VzLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcbiAgICBsZXQgc29ydGVkRGVsZXRlZEluZGljZXNJbmRleCA9IDA7XG4gICAgY29uc3QgbmV3QXJyYXkgPSBuZXcgQXJyYXkodGhpcy5fYXJyYXkubGVuZ3RoIC0gc29ydGVkRGVsZXRlZEluZGljZXMubGVuZ3RoKTtcbiAgICBsZXQgbmV3QXJyYXlJbmRleCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNvcnRlZERlbGV0ZWRJbmRpY2VzW3NvcnRlZERlbGV0ZWRJbmRpY2VzSW5kZXhdID09PSBpKSB7XG4gICAgICAgIHNvcnRlZERlbGV0ZWRJbmRpY2VzSW5kZXgrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0FycmF5W25ld0FycmF5SW5kZXgrK10gPSB0aGlzLl9hcnJheVtpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYXJyYXkgPSBuZXdBcnJheTtcbiAgICB0aGlzLl9kZWxldGVkSW5kaWNlcy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2lzRmx1c2hpbmdEZWxldGVkID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIF9mbHVzaENsZWFudXBEZWxldGVkKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5faXNGbHVzaGluZ0RlbGV0ZWQgJiYgdGhpcy5fZGVsZXRlZEluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5fZmx1c2hEZWxldGVkVGFzay5mbHVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyAqZ2V0S2V5SXRlcmF0b3Ioa2V5OiBudW1iZXIpOiBJdGVyYWJsZUl0ZXJhdG9yPFQ+IHtcbiAgICB0aGlzLl9mbHVzaENsZWFudXBJbnNlcnRlZCgpO1xuICAgIHRoaXMuX2ZsdXNoQ2xlYW51cERlbGV0ZWQoKTtcbiAgICBpZiAodGhpcy5fYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSB0aGlzLl9zZWFyY2goa2V5KTtcbiAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLl9hcnJheS5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSkgIT09IGtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkbyB7XG4gICAgICB5aWVsZCB0aGlzLl9hcnJheVtpXTtcbiAgICB9IHdoaWxlICgrK2kgPCB0aGlzLl9hcnJheS5sZW5ndGggJiYgdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKSA9PT0ga2V5KTtcbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoQnlLZXkoa2V5OiBudW1iZXIsIGNhbGxiYWNrOiAodmFsdWU6IFQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9mbHVzaENsZWFudXBJbnNlcnRlZCgpO1xuICAgIHRoaXMuX2ZsdXNoQ2xlYW51cERlbGV0ZWQoKTtcbiAgICBpZiAodGhpcy5fYXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGkgPSB0aGlzLl9zZWFyY2goa2V5KTtcbiAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLl9hcnJheS5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSkgIT09IGtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkbyB7XG4gICAgICBjYWxsYmFjayh0aGlzLl9hcnJheVtpXSk7XG4gICAgfSB3aGlsZSAoKytpIDwgdGhpcy5fYXJyYXkubGVuZ3RoICYmIHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSkgPT09IGtleSk7XG4gIH1cblxuICBwdWJsaWMgdmFsdWVzKCk6IEl0ZXJhYmxlSXRlcmF0b3I8VD4ge1xuICAgIHRoaXMuX2ZsdXNoQ2xlYW51cEluc2VydGVkKCk7XG4gICAgdGhpcy5fZmx1c2hDbGVhbnVwRGVsZXRlZCgpO1xuICAgIC8vIER1cGxpY2F0ZSB0aGUgYXJyYXkgdG8gYXZvaWQgaXNzdWVzIHdoZW4gX2FycmF5IGNoYW5nZXMgd2hpbGUgaXRlcmF0aW5nXG4gICAgcmV0dXJuIFsuLi50aGlzLl9hcnJheV0udmFsdWVzKCk7XG4gIH1cblxuICBwcml2YXRlIF9zZWFyY2goa2V5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIGxldCBtaW4gPSAwO1xuICAgIGxldCBtYXggPSB0aGlzLl9hcnJheS5sZW5ndGggLSAxO1xuICAgIHdoaWxlIChtYXggPj0gbWluKSB7XG4gICAgICBsZXQgbWlkID0gKG1pbiArIG1heCkgPj4gMTtcbiAgICAgIGNvbnN0IG1pZEtleSA9IHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVttaWRdKTtcbiAgICAgIGlmIChtaWRLZXkgPiBrZXkpIHtcbiAgICAgICAgbWF4ID0gbWlkIC0gMTtcbiAgICAgIH0gZWxzZSBpZiAobWlkS2V5IDwga2V5KSB7XG4gICAgICAgIG1pbiA9IG1pZCArIDE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBrZXkgaW4gbGlzdCwgd2FsayB0byBsb3dlc3QgZHVwbGljYXRlXG4gICAgICAgIHdoaWxlIChtaWQgPiAwICYmIHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVttaWQgLSAxXSkgPT09IGtleSkge1xuICAgICAgICAgIG1pZC0tO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaWQ7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGtleSBub3QgaW4gbGlzdFxuICAgIC8vIHN0aWxsIHJldHVybiBjbG9zZXN0IG1pbiAoYWxzbyB1c2VkIGFzIGluc2VydCBwb3NpdGlvbilcbiAgICByZXR1cm4gbWluO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBjc3MgfSBmcm9tICdjb21tb24vQ29sb3InO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSwgRGlzcG9zYWJsZVN0b3JlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSURlY29yYXRpb25TZXJ2aWNlLCBJSW50ZXJuYWxEZWNvcmF0aW9uIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IFNvcnRlZExpc3QgfSBmcm9tICdjb21tb24vU29ydGVkTGlzdCc7XG5pbXBvcnQgeyBJQ29sb3IgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSURlY29yYXRpb24sIElEZWNvcmF0aW9uT3B0aW9ucywgSU1hcmtlciB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuXG4vLyBXb3JrIHZhcmlhYmxlcyB0byBhdm9pZCBnYXJiYWdlIGNvbGxlY3Rpb25cbmxldCAkeG1pbiA9IDA7XG5sZXQgJHhtYXggPSAwO1xuXG5leHBvcnQgY2xhc3MgRGVjb3JhdGlvblNlcnZpY2UgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSURlY29yYXRpb25TZXJ2aWNlIHtcbiAgcHVibGljIHNlcnZpY2VCcmFuZDogYW55O1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgYWxsIGRlY29yYXRpb25zLCBzb3J0ZWQgYnkgdGhlIG1hcmtlcidzIGxpbmUgdmFsdWUuIFRoaXMgcmVsaWVzIG9uIHRoZSBmYWN0IHRoYXRcbiAgICogd2hpbGUgbWFya2VyIGxpbmUgdmFsdWVzIGRvIGNoYW5nZSwgdGhleSBzaG91bGQgYWxsIGNoYW5nZSBieSB0aGUgc2FtZSBhbW91bnQgc28gdGhpcyBzaG91bGRcbiAgICogbmV2ZXIgYmVjb21lIG91dCBvZiBvcmRlci5cbiAgICovXG4gIHByaXZhdGUgcmVhZG9ubHkgX2RlY29yYXRpb25zOiBTb3J0ZWRMaXN0PElJbnRlcm5hbERlY29yYXRpb24+ID0gbmV3IFNvcnRlZExpc3QoZSA9PiBlPy5tYXJrZXIubGluZSk7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25EZWNvcmF0aW9uUmVnaXN0ZXJlZCA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPElJbnRlcm5hbERlY29yYXRpb24+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25EZWNvcmF0aW9uUmVnaXN0ZXJlZCA9IHRoaXMuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uRGVjb3JhdGlvblJlbW92ZWQgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxJSW50ZXJuYWxEZWNvcmF0aW9uPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uRGVjb3JhdGlvblJlbW92ZWQgPSB0aGlzLl9vbkRlY29yYXRpb25SZW1vdmVkLmV2ZW50O1xuXG4gIHB1YmxpYyBnZXQgZGVjb3JhdGlvbnMoKTogSXRlcmFibGVJdGVyYXRvcjxJSW50ZXJuYWxEZWNvcmF0aW9uPiB7IHJldHVybiB0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKTsgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9yZWdpc3Rlcih0b0Rpc3Bvc2FibGUoKCkgPT4gdGhpcy5yZXNldCgpKSk7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJEZWNvcmF0aW9uKG9wdGlvbnM6IElEZWNvcmF0aW9uT3B0aW9ucyk6IElEZWNvcmF0aW9uIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAob3B0aW9ucy5tYXJrZXIuaXNEaXNwb3NlZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgZGVjb3JhdGlvbiA9IG5ldyBEZWNvcmF0aW9uKG9wdGlvbnMpO1xuICAgIGlmIChkZWNvcmF0aW9uKSB7XG4gICAgICBjb25zdCBtYXJrZXJEaXNwb3NlID0gZGVjb3JhdGlvbi5tYXJrZXIub25EaXNwb3NlKCgpID0+IGRlY29yYXRpb24uZGlzcG9zZSgpKTtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gZGVjb3JhdGlvbi5vbkRpc3Bvc2UoKCkgPT4ge1xuICAgICAgICBsaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICAgIGlmIChkZWNvcmF0aW9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2RlY29yYXRpb25zLmRlbGV0ZShkZWNvcmF0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy5fb25EZWNvcmF0aW9uUmVtb3ZlZC5maXJlKGRlY29yYXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXJrZXJEaXNwb3NlLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLl9kZWNvcmF0aW9ucy5pbnNlcnQoZGVjb3JhdGlvbik7XG4gICAgICB0aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmZpcmUoZGVjb3JhdGlvbik7XG4gICAgfVxuICAgIHJldHVybiBkZWNvcmF0aW9uO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIGZvciAoY29uc3QgZCBvZiB0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKSkge1xuICAgICAgZC5kaXNwb3NlKCk7XG4gICAgfVxuICAgIHRoaXMuX2RlY29yYXRpb25zLmNsZWFyKCk7XG4gIH1cblxuICBwdWJsaWMgKmdldERlY29yYXRpb25zQXRDZWxsKHg6IG51bWJlciwgbGluZTogbnVtYmVyLCBsYXllcj86ICdib3R0b20nIHwgJ3RvcCcpOiBJdGVyYWJsZUl0ZXJhdG9yPElJbnRlcm5hbERlY29yYXRpb24+IHtcbiAgICBsZXQgeG1pbiA9IDA7XG4gICAgbGV0IHhtYXggPSAwO1xuICAgIGZvciAoY29uc3QgZCBvZiB0aGlzLl9kZWNvcmF0aW9ucy5nZXRLZXlJdGVyYXRvcihsaW5lKSkge1xuICAgICAgeG1pbiA9IGQub3B0aW9ucy54ID8/IDA7XG4gICAgICB4bWF4ID0geG1pbiArIChkLm9wdGlvbnMud2lkdGggPz8gMSk7XG4gICAgICBpZiAoeCA+PSB4bWluICYmIHggPCB4bWF4ICYmICghbGF5ZXIgfHwgKGQub3B0aW9ucy5sYXllciA/PyAnYm90dG9tJykgPT09IGxheWVyKSkge1xuICAgICAgICB5aWVsZCBkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoRGVjb3JhdGlvbkF0Q2VsbCh4OiBudW1iZXIsIGxpbmU6IG51bWJlciwgbGF5ZXI6ICdib3R0b20nIHwgJ3RvcCcgfCB1bmRlZmluZWQsIGNhbGxiYWNrOiAoZGVjb3JhdGlvbjogSUludGVybmFsRGVjb3JhdGlvbikgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2RlY29yYXRpb25zLmZvckVhY2hCeUtleShsaW5lLCBkID0+IHtcbiAgICAgICR4bWluID0gZC5vcHRpb25zLnggPz8gMDtcbiAgICAgICR4bWF4ID0gJHhtaW4gKyAoZC5vcHRpb25zLndpZHRoID8/IDEpO1xuICAgICAgaWYgKHggPj0gJHhtaW4gJiYgeCA8ICR4bWF4ICYmICghbGF5ZXIgfHwgKGQub3B0aW9ucy5sYXllciA/PyAnYm90dG9tJykgPT09IGxheWVyKSkge1xuICAgICAgICBjYWxsYmFjayhkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5jbGFzcyBEZWNvcmF0aW9uIGV4dGVuZHMgRGlzcG9zYWJsZVN0b3JlIGltcGxlbWVudHMgSUludGVybmFsRGVjb3JhdGlvbiB7XG4gIHB1YmxpYyByZWFkb25seSBtYXJrZXI6IElNYXJrZXI7XG4gIHB1YmxpYyBlbGVtZW50OiBIVE1MRWxlbWVudCB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgcmVhZG9ubHkgb25SZW5kZXJFbWl0dGVyID0gdGhpcy5hZGQobmV3IEVtaXR0ZXI8SFRNTEVsZW1lbnQ+KCkpO1xuICBwdWJsaWMgcmVhZG9ubHkgb25SZW5kZXIgPSB0aGlzLm9uUmVuZGVyRW1pdHRlci5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25EaXNwb3NlID0gdGhpcy5hZGQobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvbkRpc3Bvc2UgPSB0aGlzLl9vbkRpc3Bvc2UuZXZlbnQ7XG5cbiAgcHJpdmF0ZSBfY2FjaGVkQmc6IElDb2xvciB8IHVuZGVmaW5lZCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgZ2V0IGJhY2tncm91bmRDb2xvclJHQigpOiBJQ29sb3IgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLl9jYWNoZWRCZyA9PT0gbnVsbCkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkQmcgPSBjc3MudG9Db2xvcih0aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NhY2hlZEJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2FjaGVkQmc7XG4gIH1cblxuICBwcml2YXRlIF9jYWNoZWRGZzogSUNvbG9yIHwgdW5kZWZpbmVkIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBnZXQgZm9yZWdyb3VuZENvbG9yUkdCKCk6IElDb2xvciB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHRoaXMuX2NhY2hlZEZnID09PSBudWxsKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvcikge1xuICAgICAgICB0aGlzLl9jYWNoZWRGZyA9IGNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5mb3JlZ3JvdW5kQ29sb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fY2FjaGVkRmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jYWNoZWRGZztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBvcHRpb25zOiBJRGVjb3JhdGlvbk9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1hcmtlciA9IG9wdGlvbnMubWFya2VyO1xuICAgIGlmICh0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMgJiYgIXRoaXMub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uID0gJ2Z1bGwnO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuX29uRGlzcG9zZS5maXJlKCk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5jb25zdCBSRU5ERVJfREVCT1VOQ0VfVEhSRVNIT0xEX01TID0gMTAwMDsgLy8gMSBTZWNvbmRcblxuaW1wb3J0IHsgSVJlbmRlckRlYm91bmNlciB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuXG4vKipcbiAqIERlYm91bmNlcyBjYWxscyB0byB1cGRhdGUgc2NyZWVuIHJlYWRlcnMgdG8gdXBkYXRlIGF0IG1vc3Qgb25jZSBjb25maWd1cmFibGUgaW50ZXJ2YWwgb2YgdGltZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFRpbWVCYXNlZERlYm91bmNlciBpbXBsZW1lbnRzIElSZW5kZXJEZWJvdW5jZXIge1xuICBwcml2YXRlIF9yb3dTdGFydDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9yb3dFbmQ6IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfcm93Q291bnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvLyBUaGUgbGFzdCBtb21lbnQgdGhhdCB0aGUgVGVybWluYWwgd2FzIHJlZnJlc2hlZCBhdFxuICBwcml2YXRlIF9sYXN0UmVmcmVzaE1zID0gMDtcbiAgLy8gV2hldGhlciBhIHRyYWlsaW5nIHJlZnJlc2ggc2hvdWxkIGJlIHRyaWdnZXJlZCBkdWUgdG8gYSByZWZyZXNoIHJlcXVlc3QgdGhhdCB3YXMgdGhyb3R0bGVkXG4gIHByaXZhdGUgX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFRpbWVvdXRJRDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX3JlbmRlckNhbGxiYWNrOiAoc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpID0+IHZvaWQsXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVib3VuY2VUaHJlc2hvbGRNUyA9IFJFTkRFUl9ERUJPVU5DRV9USFJFU0hPTERfTVNcbiAgKSB7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fcmVmcmVzaFRpbWVvdXRJRCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoKHJvd1N0YXJ0OiBudW1iZXIgfCB1bmRlZmluZWQsIHJvd0VuZDogbnVtYmVyIHwgdW5kZWZpbmVkLCByb3dDb3VudDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fcm93Q291bnQgPSByb3dDb3VudDtcbiAgICAvLyBHZXQgdGhlIG1pbi9tYXggcm93IHN0YXJ0L2VuZCBmb3IgdGhlIGFyZyB2YWx1ZXNcbiAgICByb3dTdGFydCA9IHJvd1N0YXJ0ICE9PSB1bmRlZmluZWQgPyByb3dTdGFydCA6IDA7XG4gICAgcm93RW5kID0gcm93RW5kICE9PSB1bmRlZmluZWQgPyByb3dFbmQgOiB0aGlzLl9yb3dDb3VudCAtIDE7XG4gICAgLy8gU2V0IHRoZSBwcm9wZXJ0aWVzIHRvIHRoZSB1cGRhdGVkIHZhbHVlc1xuICAgIHRoaXMuX3Jvd1N0YXJ0ID0gdGhpcy5fcm93U3RhcnQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LCByb3dTdGFydCkgOiByb3dTdGFydDtcbiAgICB0aGlzLl9yb3dFbmQgPSB0aGlzLl9yb3dFbmQgIT09IHVuZGVmaW5lZCA/IE1hdGgubWF4KHRoaXMuX3Jvd0VuZCwgcm93RW5kKSA6IHJvd0VuZDtcblxuICAgIC8vIE9ubHkgcmVmcmVzaCBpZiB0aGUgdGltZSBzaW5jZSBsYXN0IHJlZnJlc2ggaXMgYWJvdmUgYSB0aHJlc2hvbGQsIG90aGVyd2lzZSB3YWl0IGZvclxuICAgIC8vIGVub3VnaCB0aW1lIHRvIHBhc3MgYmVmb3JlIHJlZnJlc2hpbmcgYWdhaW4uXG4gICAgY29uc3QgcmVmcmVzaFJlcXVlc3RUaW1lOiBudW1iZXIgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBpZiAocmVmcmVzaFJlcXVlc3RUaW1lIC0gdGhpcy5fbGFzdFJlZnJlc2hNcyA+PSB0aGlzLl9kZWJvdW5jZVRocmVzaG9sZE1TKSB7XG4gICAgICAvLyBFbm91Z2ggdGltZSBoYXMgbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHJlZnJlc2g7IHJlZnJlc2ggaW1tZWRpYXRlbHlcbiAgICAgIHRoaXMuX2xhc3RSZWZyZXNoTXMgPSByZWZyZXNoUmVxdWVzdFRpbWU7XG4gICAgICB0aGlzLl9pbm5lclJlZnJlc2goKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZCkge1xuICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3QgYWRkaXRpb25hbCByZXF1ZXN0IHRocm90dGxlZDsgc2V0IHVwIHRyYWlsaW5nIHJlZnJlc2hcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSByZWZyZXNoUmVxdWVzdFRpbWUgLSB0aGlzLl9sYXN0UmVmcmVzaE1zO1xuICAgICAgY29uc3Qgd2FpdFBlcmlvZEJlZm9yZVRyYWlsaW5nUmVmcmVzaCA9IHRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVMgLSBlbGFwc2VkO1xuICAgICAgdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLl9yZWZyZXNoVGltZW91dElEID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLl9sYXN0UmVmcmVzaE1zID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgICAgIHRoaXMuX2lubmVyUmVmcmVzaCgpO1xuICAgICAgICB0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yZWZyZXNoVGltZW91dElEID0gdW5kZWZpbmVkOyAvLyBObyBsb25nZXIgbmVlZCB0byBjbGVhciB0aGUgdGltZW91dFxuICAgICAgfSwgd2FpdFBlcmlvZEJlZm9yZVRyYWlsaW5nUmVmcmVzaCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaW5uZXJSZWZyZXNoKCk6IHZvaWQge1xuICAgIC8vIE1ha2Ugc3VyZSB2YWx1ZXMgYXJlIHNldFxuICAgIGlmICh0aGlzLl9yb3dTdGFydCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3Jvd0VuZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3Jvd0NvdW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDbGFtcCB2YWx1ZXNcbiAgICBjb25zdCBzdGFydCA9IE1hdGgubWF4KHRoaXMuX3Jvd1N0YXJ0LCAwKTtcbiAgICBjb25zdCBlbmQgPSBNYXRoLm1pbih0aGlzLl9yb3dFbmQsIHRoaXMuX3Jvd0NvdW50IC0gMSk7XG5cbiAgICAvLyBSZXNldCBkZWJvdW5jZXIgKHRoaXMgaGFwcGVucyBiZWZvcmUgcmVuZGVyIGNhbGxiYWNrIGFzIHRoZSByZW5kZXIgY291bGQgdHJpZ2dlciBpdCBhZ2FpbilcbiAgICB0aGlzLl9yb3dTdGFydCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9yb3dFbmQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBSdW4gcmVuZGVyIGNhbGxiYWNrXG4gICAgdGhpcy5fcmVuZGVyQ2FsbGJhY2soc3RhcnQsIGVuZCk7XG4gIH1cbn1cblxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0ICogYXMgU3RyaW5ncyBmcm9tICdicm93c2VyL0xvY2FsaXphYmxlU3RyaW5ncyc7XG5pbXBvcnQgeyBJVGVybWluYWwsIElSZW5kZXJEZWJvdW5jZXIgfSBmcm9tICdicm93c2VyL1R5cGVzJztcbmltcG9ydCB7IFRpbWVCYXNlZERlYm91bmNlciB9IGZyb20gJ2Jyb3dzZXIvVGltZUJhc2VkRGVib3VuY2VyJztcbmltcG9ydCB7IERpc3Bvc2FibGUsIHRvRGlzcG9zYWJsZSB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2xpZmVjeWNsZSc7XG5pbXBvcnQgeyBJQ29yZUJyb3dzZXJTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgSUluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnY29tbW9uL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IGFkZERpc3Bvc2FibGVMaXN0ZW5lciB9IGZyb20gJ3ZzL2Jhc2UvYnJvd3Nlci9kb20nO1xuXG5jb25zdCBNQVhfUk9XU19UT19SRUFEID0gMjA7XG5cbmNvbnN0IGVudW0gQm91bmRhcnlQb3NpdGlvbiB7XG4gIFRPUCxcbiAgQk9UVE9NXG59XG5cbi8vIFR1cm4gdGhpcyBvbiB0byB1bmhpZGUgdGhlIGFjY2Vzc2liaWxpdHkgdHJlZSBhbmQgZGlzcGxheSBpdCB1bmRlclxuLy8gKGluc3RlYWQgb2Ygb3ZlcmxhcHBpbmcgd2l0aCkgdGhlIHRlcm1pbmFsLlxuY29uc3QgREVCVUcgPSBmYWxzZTtcblxuZXhwb3J0IGNsYXNzIEFjY2Vzc2liaWxpdHlNYW5hZ2VyIGV4dGVuZHMgRGlzcG9zYWJsZSB7XG4gIHByaXZhdGUgX2RlYnVnUm9vdENvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2FjY2Vzc2liaWxpdHlDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gIHByaXZhdGUgX3Jvd0NvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvd0VsZW1lbnRzOiBIVE1MRWxlbWVudFtdO1xuICBwcml2YXRlIF9yb3dDb2x1bW5zOiBXZWFrTWFwPEhUTUxFbGVtZW50LCBudW1iZXJbXT4gPSBuZXcgV2Vha01hcCgpO1xuXG4gIHByaXZhdGUgX2xpdmVSZWdpb246IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIF9saXZlUmVnaW9uTGluZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9saXZlUmVnaW9uRGVib3VuY2VyOiBJUmVuZGVyRGVib3VuY2VyO1xuXG4gIHByaXZhdGUgX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcjogKGU6IEZvY3VzRXZlbnQpID0+IHZvaWQ7XG4gIHByaXZhdGUgX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcjogKGU6IEZvY3VzRXZlbnQpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFRoaXMgcXVldWUgaGFzIGEgY2hhcmFjdGVyIHB1c2hlZCB0byBpdCBmb3Iga2V5cyB0aGF0IGFyZSBwcmVzc2VkLCBpZiB0aGVcbiAgICogbmV4dCBjaGFyYWN0ZXIgYWRkZWQgdG8gdGhlIHRlcm1pbmFsIGlzIGVxdWFsIHRvIHRoZSBrZXkgY2hhciB0aGVuIGl0IGlzXG4gICAqIG5vdCBhbm5vdW5jZWQgKGFkZGVkIHRvIGxpdmUgcmVnaW9uKSBiZWNhdXNlIGl0IGhhcyBhbHJlYWR5IGJlZW4gYW5ub3VuY2VkXG4gICAqIGJ5IHRoZSB0ZXh0YXJlYSBldmVudCAod2hpY2ggY2Fubm90IGJlIGNhbmNlbGVkKS4gVGhlcmUgYXJlIHNvbWUgcmFjZVxuICAgKiBjb25kaXRpb24gY2FzZXMgaWYgdGhlcmUgaXMgdHlwaW5nIHdoaWxlIGRhdGEgaXMgc3RyZWFtaW5nLCBidXQgdGhpcyBjb3ZlcnNcbiAgICogdGhlIG1haW4gY2FzZSBvZiB0eXBpbmcgaW50byB0aGUgcHJvbXB0IGFuZCBpbnB1dHRpbmcgdGhlIGFuc3dlciB0byBhXG4gICAqIHF1ZXN0aW9uIChZL04sIGV0Yy4pLlxuICAgKi9cbiAgcHJpdmF0ZSBfY2hhcnNUb0NvbnN1bWU6IHN0cmluZ1tdID0gW107XG5cbiAgcHJpdmF0ZSBfY2hhcnNUb0Fubm91bmNlOiBzdHJpbmcgPSAnJztcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IF90ZXJtaW5hbDogSVRlcm1pbmFsLFxuICAgIEBJSW5zdGFudGlhdGlvblNlcnZpY2UgaW5zdGFudGlhdGlvblNlcnZpY2U6IElJbnN0YW50aWF0aW9uU2VydmljZSxcbiAgICBASUNvcmVCcm93c2VyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9jb3JlQnJvd3NlclNlcnZpY2U6IElDb3JlQnJvd3NlclNlcnZpY2UsXG4gICAgQElSZW5kZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgY29uc3QgZG9jID0gdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLm1haW5Eb2N1bWVudDtcbiAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5Q29udGFpbmVyID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0tYWNjZXNzaWJpbGl0eScpO1xuXG4gICAgdGhpcy5fcm93Q29udGFpbmVyID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbGlzdCcpO1xuICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd4dGVybS1hY2Nlc3NpYmlsaXR5LXRyZWUnKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fdGVybWluYWwucm93czsgaSsrKSB7XG4gICAgICB0aGlzLl9yb3dFbGVtZW50c1tpXSA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG5cbiAgICB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIgPSBlID0+IHRoaXMuX2hhbmRsZUJvdW5kYXJ5Rm9jdXMoZSwgQm91bmRhcnlQb3NpdGlvbi5UT1ApO1xuICAgIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciA9IGUgPT4gdGhpcy5faGFuZGxlQm91bmRhcnlGb2N1cyhlLCBCb3VuZGFyeVBvc2l0aW9uLkJPVFRPTSk7XG4gICAgdGhpcy5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDFdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcblxuICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93Q29udGFpbmVyKTtcblxuICAgIHRoaXMuX2xpdmVSZWdpb24gPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbi5jbGFzc0xpc3QuYWRkKCdsaXZlLXJlZ2lvbicpO1xuICAgIHRoaXMuX2xpdmVSZWdpb24uc2V0QXR0cmlidXRlKCdhcmlhLWxpdmUnLCAnYXNzZXJ0aXZlJyk7XG4gICAgdGhpcy5fYWNjZXNzaWJpbGl0eUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9saXZlUmVnaW9uKTtcbiAgICB0aGlzLl9saXZlUmVnaW9uRGVib3VuY2VyID0gdGhpcy5fcmVnaXN0ZXIobmV3IFRpbWVCYXNlZERlYm91bmNlcih0aGlzLl9yZW5kZXJSb3dzLmJpbmQodGhpcykpKTtcblxuICAgIGlmICghdGhpcy5fdGVybWluYWwuZWxlbWVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZW5hYmxlIGFjY2Vzc2liaWxpdHkgYmVmb3JlIFRlcm1pbmFsLm9wZW4nKTtcbiAgICB9XG5cbiAgICBpZiAoREVCVUcpIHtcbiAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZGVidWcnKTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdkZWJ1ZycpO1xuXG4gICAgICAvLyBVc2UgYSBgPGRpdiBjbGFzcz1cInh0ZXJtXCI+YCBjb250YWluZXIgc28gdGhhdCB0aGUgY3NzIHdpbGwgc3RpbGwgYXBwbHkuXG4gICAgICB0aGlzLl9kZWJ1Z1Jvb3RDb250YWluZXIgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICB0aGlzLl9kZWJ1Z1Jvb3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgneHRlcm0nKTtcblxuICAgICAgdGhpcy5fZGVidWdSb290Q29udGFpbmVyLmFwcGVuZENoaWxkKGRvYy5jcmVhdGVUZXh0Tm9kZSgnLS0tLS0tc3RhcnQgYTExeS0tLS0tLScpKTtcbiAgICAgIHRoaXMuX2RlYnVnUm9vdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9hY2Nlc3NpYmlsaXR5Q29udGFpbmVyKTtcbiAgICAgIHRoaXMuX2RlYnVnUm9vdENvbnRhaW5lci5hcHBlbmRDaGlsZChkb2MuY3JlYXRlVGV4dE5vZGUoJy0tLS0tLWVuZCBhMTF5LS0tLS0tJykpO1xuXG4gICAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCB0aGlzLl9kZWJ1Z1Jvb3RDb250YWluZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJiZWdpbicsIHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uUmVzaXplKGUgPT4gdGhpcy5faGFuZGxlUmVzaXplKGUucm93cykpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vblJlbmRlcihlID0+IHRoaXMuX3JlZnJlc2hSb3dzKGUuc3RhcnQsIGUuZW5kKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3Rlcm1pbmFsLm9uU2Nyb2xsKCgpID0+IHRoaXMuX3JlZnJlc2hSb3dzKCkpKTtcbiAgICAvLyBMaW5lIGZlZWQgaXMgYW4gaXNzdWUgYXMgdGhlIHByb21wdCB3b24ndCBiZSByZWFkIG91dCBhZnRlciBhIGNvbW1hbmQgaXMgcnVuXG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25BMTF5Q2hhcihjaGFyID0+IHRoaXMuX2hhbmRsZUNoYXIoY2hhcikpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl90ZXJtaW5hbC5vbkxpbmVGZWVkKCgpID0+IHRoaXMuX2hhbmRsZUNoYXIoJ1xcbicpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25BMTF5VGFiKHNwYWNlQ291bnQgPT4gdGhpcy5faGFuZGxlVGFiKHNwYWNlQ291bnQpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25LZXkoZSA9PiB0aGlzLl9oYW5kbGVLZXkoZS5rZXkpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fdGVybWluYWwub25CbHVyKCgpID0+IHRoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jLCAnc2VsZWN0aW9uY2hhbmdlJywgKCkgPT4gdGhpcy5faGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uub25EcHJDaGFuZ2UoKCkgPT4gdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCkpKTtcblxuICAgIHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dzKCk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodG9EaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgIGlmIChERUJVRykge1xuICAgICAgICB0aGlzLl9kZWJ1Z1Jvb3RDb250YWluZXIhLnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eUNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgfSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlVGFiKHNwYWNlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3BhY2VDb3VudDsgaSsrKSB7XG4gICAgICB0aGlzLl9oYW5kbGVDaGFyKCcgJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlQ2hhcihjaGFyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCA8IE1BWF9ST1dTX1RPX1JFQUQgKyAxKSB7XG4gICAgICBpZiAodGhpcy5fY2hhcnNUb0NvbnN1bWUubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBIYXZlIHRoZSBzY3JlZW4gcmVhZGVyIGlnbm9yZSB0aGUgY2hhciBpZiBpdCB3YXMganVzdCBpbnB1dFxuICAgICAgICBjb25zdCBzaGlmdGVkQ2hhciA9IHRoaXMuX2NoYXJzVG9Db25zdW1lLnNoaWZ0KCk7XG4gICAgICAgIGlmIChzaGlmdGVkQ2hhciAhPT0gY2hhcikge1xuICAgICAgICAgIHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSArPSBjaGFyO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jaGFyc1RvQW5ub3VuY2UgKz0gY2hhcjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdcXG4nKSB7XG4gICAgICAgIHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQrKztcbiAgICAgICAgaWYgKHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQgPT09IE1BWF9ST1dTX1RPX1JFQUQgKyAxKSB7XG4gICAgICAgICAgdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCArPSBTdHJpbmdzLnRvb011Y2hPdXRwdXQuZ2V0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jbGVhckxpdmVSZWdpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCA9ICcnO1xuICAgIHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQgPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlS2V5KGtleUNoYXI6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpO1xuICAgIC8vIE9ubHkgYWRkIHRoZSBjaGFyIGlmIHRoZXJlIGlzIG5vIGNvbnRyb2wgY2hhcmFjdGVyLlxuICAgIGlmICghL1xccHtDb250cm9sfS91LnRlc3Qoa2V5Q2hhcikpIHtcbiAgICAgIHRoaXMuX2NoYXJzVG9Db25zdW1lLnB1c2goa2V5Q2hhcik7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFJvd3Moc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX2xpdmVSZWdpb25EZWJvdW5jZXIucmVmcmVzaChzdGFydCwgZW5kLCB0aGlzLl90ZXJtaW5hbC5yb3dzKTtcbiAgfVxuXG4gIHByaXZhdGUgX3JlbmRlclJvd3Moc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBidWZmZXI6IElCdWZmZXIgPSB0aGlzLl90ZXJtaW5hbC5idWZmZXI7XG4gICAgY29uc3Qgc2V0U2l6ZSA9IGJ1ZmZlci5saW5lcy5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXIubGluZXMuZ2V0KGJ1ZmZlci55ZGlzcCArIGkpO1xuICAgICAgY29uc3QgY29sdW1uczogbnVtYmVyW10gPSBbXTtcbiAgICAgIGNvbnN0IGxpbmVEYXRhID0gbGluZT8udHJhbnNsYXRlVG9TdHJpbmcodHJ1ZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbHVtbnMpIHx8ICcnO1xuICAgICAgY29uc3QgcG9zSW5TZXQgPSAoYnVmZmVyLnlkaXNwICsgaSArIDEpLnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5fcm93RWxlbWVudHNbaV07XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBpZiAobGluZURhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9ICdcXHUwMGEwJztcbiAgICAgICAgICB0aGlzLl9yb3dDb2x1bW5zLnNldChlbGVtZW50LCBbMCwgMV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBsaW5lRGF0YTtcbiAgICAgICAgICB0aGlzLl9yb3dDb2x1bW5zLnNldChlbGVtZW50LCBjb2x1bW5zKTtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcsIHBvc0luU2V0KTtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2V0c2l6ZScsIHNldFNpemUpO1xuICAgICAgICB0aGlzLl9hbGlnblJvd1dpZHRoKGVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hbm5vdW5jZUNoYXJhY3RlcnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgX2Fubm91bmNlQ2hhcmFjdGVycygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY2hhcnNUb0Fubm91bmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50ICs9IHRoaXMuX2NoYXJzVG9Bbm5vdW5jZTtcbiAgICB0aGlzLl9jaGFyc1RvQW5ub3VuY2UgPSAnJztcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZUJvdW5kYXJ5Rm9jdXMoZTogRm9jdXNFdmVudCwgcG9zaXRpb246IEJvdW5kYXJ5UG9zaXRpb24pOiB2b2lkIHtcbiAgICBjb25zdCBib3VuZGFyeUVsZW1lbnQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICBjb25zdCBiZWZvcmVCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50c1twb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAxIDogdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMl07XG5cbiAgICAvLyBEb24ndCBzY3JvbGwgaWYgdGhlIGJ1ZmZlciB0b3AgaGFzIHJlYWNoZWQgdGhlIGVuZCBpbiB0aGF0IGRpcmVjdGlvblxuICAgIGNvbnN0IHBvc0luU2V0ID0gYm91bmRhcnlFbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1wb3NpbnNldCcpO1xuICAgIGNvbnN0IGxhc3RSb3dQb3MgPSBwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAnMScgOiBgJHt0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RofWA7XG4gICAgaWYgKHBvc0luU2V0ID09PSBsYXN0Um93UG9zKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2Nyb2xsIHdoZW4gdGhlIGxhc3QgZm9jdXNlZCBpdGVtIHdhcyBub3QgdGhlIHNlY29uZCByb3cgKGZvY3VzIGlzIGdvaW5nIHRoZSBvdGhlclxuICAgIC8vIGRpcmVjdGlvbilcbiAgICBpZiAoZS5yZWxhdGVkVGFyZ2V0ICE9PSBiZWZvcmVCb3VuZGFyeUVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgb2xkIGJvdW5kYXJ5IGVsZW1lbnQgZnJvbSBhcnJheVxuICAgIGxldCB0b3BCb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGxldCBib3R0b21Cb3VuZGFyeUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuICAgIGlmIChwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1ApIHtcbiAgICAgIHRvcEJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpITtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChib3R0b21Cb3VuZGFyeUVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b3BCb3VuZGFyeUVsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5zaGlmdCgpITtcbiAgICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudCA9IGJvdW5kYXJ5RWxlbWVudDtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0b3BCb3VuZGFyeUVsZW1lbnQpO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lcnMgZnJvbSBvbGQgYm91bmRhcnkgZWxlbWVudHNcbiAgICB0b3BCb3VuZGFyeUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuICAgIGJvdHRvbUJvdW5kYXJ5RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBBZGQgbmV3IGVsZW1lbnQgdG8gYXJyYXkvRE9NXG4gICAgaWYgKHBvc2l0aW9uID09PSBCb3VuZGFyeVBvc2l0aW9uLlRPUCkge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMudW5zaGlmdChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyYmVnaW4nLCBuZXdFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmV3RWxlbWVudCA9IHRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO1xuICAgICAgdGhpcy5fcm93RWxlbWVudHMucHVzaChuZXdFbGVtZW50KTtcbiAgICAgIHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIHRvIG5ldyBib3VuZGFyeSBlbGVtZW50c1xuICAgIHRoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtcbiAgICB0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggLSAxXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7XG5cbiAgICAvLyBTY3JvbGwgdXBcbiAgICB0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcyhwb3NpdGlvbiA9PT0gQm91bmRhcnlQb3NpdGlvbi5UT1AgPyAtMSA6IDEpO1xuXG4gICAgLy8gRm9jdXMgbmV3IGJvdW5kYXJ5IGJlZm9yZSBlbGVtZW50XG4gICAgdGhpcy5fcm93RWxlbWVudHNbcG9zaXRpb24gPT09IEJvdW5kYXJ5UG9zaXRpb24uVE9QID8gMSA6IHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCAtIDJdLmZvY3VzKCk7XG5cbiAgICAvLyBQcmV2ZW50IHRoZSBzdGFuZGFyZCBiZWhhdmlvclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UubWFpbkRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGlvbi5pc0NvbGxhcHNlZCkge1xuICAgICAgLy8gT25seSBkbyBzb21ldGhpbmcgd2hlbiB0aGUgYW5jaG9yTm9kZSBpcyBpbnNpZGUgdGhlIHJvdyBjb250YWluZXIuIFRoaXNcbiAgICAgIC8vIGJlaGF2aW9yIG1pcnJvcnMgd2hhdCB3ZSBkbyB3aXRoIG1vdXNlIC0tLSBpZiB0aGUgbW91c2UgY2xpY2tzXG4gICAgICAvLyBzb21ld2hlcmUgb3V0c2lkZSBvZiB0aGUgdGVybWluYWwsIHdlIGRvbid0IGNsZWFyIHRoZSBzZWxlY3Rpb24uXG4gICAgICBpZiAodGhpcy5fcm93Q29udGFpbmVyLmNvbnRhaW5zKHNlbGVjdGlvbi5hbmNob3JOb2RlKSkge1xuICAgICAgICB0aGlzLl90ZXJtaW5hbC5jbGVhclNlbGVjdGlvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghc2VsZWN0aW9uLmFuY2hvck5vZGUgfHwgIXNlbGVjdGlvbi5mb2N1c05vZGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2FuY2hvck5vZGUgYW5kL29yIGZvY3VzTm9kZSBhcmUgbnVsbCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvcnQgdGhlIHR3byBzZWxlY3Rpb24gcG9pbnRzIGluIGRvY3VtZW50IG9yZGVyLlxuICAgIGxldCBiZWdpbiA9IHsgbm9kZTogc2VsZWN0aW9uLmFuY2hvck5vZGUsIG9mZnNldDogc2VsZWN0aW9uLmFuY2hvck9mZnNldCB9O1xuICAgIGxldCBlbmQgPSB7IG5vZGU6IHNlbGVjdGlvbi5mb2N1c05vZGUsIG9mZnNldDogc2VsZWN0aW9uLmZvY3VzT2Zmc2V0IH07XG4gICAgaWYgKChiZWdpbi5ub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGVuZC5ub2RlKSAmIE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HKSB8fCAoYmVnaW4ubm9kZSA9PT0gZW5kLm5vZGUgJiYgYmVnaW4ub2Zmc2V0ID4gZW5kLm9mZnNldCkgKSB7XG4gICAgICBbYmVnaW4sIGVuZF0gPSBbZW5kLCBiZWdpbl07XG4gICAgfVxuXG4gICAgLy8gQ2xhbXAgYmVnaW4vZW5kIHRvIHRoZSBpbnNpZGUgb2YgdGhlIHJvdyBjb250YWluZXIuXG4gICAgaWYgKGJlZ2luLm5vZGUuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGhpcy5fcm93RWxlbWVudHNbMF0pICYgKE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fQ09OVEFJTkVEX0JZIHwgTm9kZS5ET0NVTUVOVF9QT1NJVElPTl9GT0xMT1dJTkcpKSB7XG4gICAgICBiZWdpbiA9IHsgbm9kZTogdGhpcy5fcm93RWxlbWVudHNbMF0uY2hpbGROb2Rlc1swXSwgb2Zmc2V0OiAwIH07XG4gICAgfVxuICAgIGlmICghdGhpcy5fcm93Q29udGFpbmVyLmNvbnRhaW5zKGJlZ2luLm5vZGUpKSB7XG4gICAgICAvLyBUaGlzIGhhcHBlbnMgd2hlbiBgYmVnaW5gIGlzIGJlbG93IHRoZSBsYXN0IHJvdy5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGFzdFJvd0VsZW1lbnQgPSB0aGlzLl9yb3dFbGVtZW50cy5zbGljZSgtMSlbMF07XG4gICAgaWYgKGVuZC5ub2RlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGxhc3RSb3dFbGVtZW50KSAmIChOb2RlLkRPQ1VNRU5UX1BPU0lUSU9OX0NPTlRBSU5FRF9CWSB8IE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HKSkge1xuICAgICAgZW5kID0ge1xuICAgICAgICBub2RlOiBsYXN0Um93RWxlbWVudCxcbiAgICAgICAgb2Zmc2V0OiBsYXN0Um93RWxlbWVudC50ZXh0Q29udGVudD8ubGVuZ3RoID8/IDBcbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghdGhpcy5fcm93Q29udGFpbmVyLmNvbnRhaW5zKGVuZC5ub2RlKSkge1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIHdoZW4gYGVuZGAgaXMgYWJvdmUgdGhlIGZpcnN0IHJvdy5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0b1Jvd0NvbHVtbiA9ICh7IG5vZGUsIG9mZnNldCB9OiB0eXBlb2YgYmVnaW4pOiB7cm93OiBudW1iZXIsIGNvbHVtbjogbnVtYmVyfSB8IG51bGwgPT4ge1xuICAgICAgLy8gYG5vZGVgIGlzIGVpdGhlciB0aGUgcm93IGVsZW1lbnQgb3IgdGhlIFRleHQgbm9kZSBpbnNpZGUgaXQuXG4gICAgICBjb25zdCByb3dFbGVtZW50OiBhbnkgPSBub2RlIGluc3RhbmNlb2YgVGV4dCA/IG5vZGUucGFyZW50Tm9kZSA6IG5vZGU7XG4gICAgICBsZXQgcm93ID0gcGFyc2VJbnQocm93RWxlbWVudD8uZ2V0QXR0cmlidXRlKCdhcmlhLXBvc2luc2V0JyksIDEwKSAtIDE7XG4gICAgICBpZiAoaXNOYU4ocm93KSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3JvdyBpcyBpbnZhbGlkLiBSYWNlIGNvbmRpdGlvbj8nKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLl9yb3dDb2x1bW5zLmdldChyb3dFbGVtZW50KTtcbiAgICAgIGlmICghY29sdW1ucykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ2NvbHVtbnMgaXMgbnVsbC4gUmFjZSBjb25kaXRpb24/Jyk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBsZXQgY29sdW1uID0gb2Zmc2V0IDwgY29sdW1ucy5sZW5ndGggPyBjb2x1bW5zW29mZnNldF0gOiBjb2x1bW5zLnNsaWNlKC0xKVswXSArIDE7XG4gICAgICBpZiAoY29sdW1uID49IHRoaXMuX3Rlcm1pbmFsLmNvbHMpIHtcbiAgICAgICAgKytyb3c7XG4gICAgICAgIGNvbHVtbiA9IDA7XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICByb3csXG4gICAgICAgIGNvbHVtblxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgY29uc3QgYmVnaW5Sb3dDb2x1bW4gPSB0b1Jvd0NvbHVtbihiZWdpbik7XG4gICAgY29uc3QgZW5kUm93Q29sdW1uID0gdG9Sb3dDb2x1bW4oZW5kKTtcblxuICAgIGlmICghYmVnaW5Sb3dDb2x1bW4gfHwgIWVuZFJvd0NvbHVtbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChiZWdpblJvd0NvbHVtbi5yb3cgPiBlbmRSb3dDb2x1bW4ucm93IHx8IChiZWdpblJvd0NvbHVtbi5yb3cgPT09IGVuZFJvd0NvbHVtbi5yb3cgJiYgYmVnaW5Sb3dDb2x1bW4uY29sdW1uID49IGVuZFJvd0NvbHVtbi5jb2x1bW4pKSB7XG4gICAgICAvLyBUaGlzIHNob3VsZCBub3QgaGFwcGVuIHVubGVzcyB3ZSBoYXZlIHNvbWUgYnVncy5cbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCByYW5nZScpO1xuICAgIH1cblxuICAgIHRoaXMuX3Rlcm1pbmFsLnNlbGVjdChcbiAgICAgIGJlZ2luUm93Q29sdW1uLmNvbHVtbixcbiAgICAgIGJlZ2luUm93Q29sdW1uLnJvdyxcbiAgICAgIChlbmRSb3dDb2x1bW4ucm93IC0gYmVnaW5Sb3dDb2x1bW4ucm93KSAqIHRoaXMuX3Rlcm1pbmFsLmNvbHMgLSBiZWdpblJvd0NvbHVtbi5jb2x1bW4gKyBlbmRSb3dDb2x1bW4uY29sdW1uXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZVJlc2l6ZShyb3dzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAvLyBSZW1vdmUgYm90dG9tIGJvdW5kYXJ5IGxpc3RlbmVyXG4gICAgdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgLy8gR3JvdyByb3dzIGFzIHJlcXVpcmVkXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX3Jvd0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7IGkgPCB0aGlzLl90ZXJtaW5hbC5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuX3Jvd0VsZW1lbnRzW2ldID0gdGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93RWxlbWVudHNbaV0pO1xuICAgIH1cbiAgICAvLyBTaHJpbmsgcm93cyBhcyByZXF1aXJlZFxuICAgIHdoaWxlICh0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGggPiByb3dzKSB7XG4gICAgICB0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fcm93RWxlbWVudHMucG9wKCkhKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgYm90dG9tIGJvdW5kYXJ5IGxpc3RlbmVyXG4gICAgdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIC0gMV0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO1xuXG4gICAgdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIF9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UubWFpbkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ2xpc3RpdGVtJyk7XG4gICAgZWxlbWVudC50YWJJbmRleCA9IC0xO1xuICAgIHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKGVsZW1lbnQpO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBfcmVmcmVzaFJvd3NEaW1lbnNpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHRoaXMuX2FjY2Vzc2liaWxpdHlDb250YWluZXIuc3R5bGUsIHtcbiAgICAgIHdpZHRoOiBgJHt0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aH1weGAsXG4gICAgICBmb250U2l6ZTogYCR7dGhpcy5fdGVybWluYWwub3B0aW9ucy5mb250U2l6ZX1weGBcbiAgICB9KTtcbiAgICBpZiAodGhpcy5fcm93RWxlbWVudHMubGVuZ3RoICE9PSB0aGlzLl90ZXJtaW5hbC5yb3dzKSB7XG4gICAgICB0aGlzLl9oYW5kbGVSZXNpemUodGhpcy5fdGVybWluYWwucm93cyk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fdGVybWluYWwucm93czsgaSsrKSB7XG4gICAgICB0aGlzLl9yZWZyZXNoUm93RGltZW5zaW9ucyh0aGlzLl9yb3dFbGVtZW50c1tpXSk7XG4gICAgICB0aGlzLl9hbGlnblJvd1dpZHRoKHRoaXMuX3Jvd0VsZW1lbnRzW2ldKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9yZWZyZXNoUm93RGltZW5zaW9ucyhlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodH1weGA7XG4gIH1cblxuICAvKipcbiAgICogU2NhbGUgdGhlIHdpZHRoIG9mIGEgcm93IHNvIHRoYXQgZWFjaCBvZiB0aGUgY2hhcmFjdGVyIGlzIChtb3N0bHkpIGFsaWduZWRcbiAgICogd2l0aCB0aGUgYWN0dWFsIHJlbmRlcmluZy4gVGhpcyB3aWxsIGFsbG93IHRoZSBzY3JlZW4gcmVhZGVyIHRvIGRyYXdcbiAgICogc2VsZWN0aW9uIG91dGxpbmUgYXQgdGhlIGNvcnJlY3QgcG9zaXRpb24uXG4gICAqXG4gICAqIE9uIHRvcCBvZiB1c2luZyB0aGUgXCJtb25vc3BhY2VcIiBmb250IGFuZCBjb3JyZWN0IGZvbnQgc2l6ZSwgdGhlIHNjYWxpbmdcbiAgICogaGVyZSBpcyBuZWNlc3NhcnkgdG8gaGFuZGxlIGNoYXJhY3RlcnMgdGhhdCBhcmUgbm90IGNvdmVyZWQgYnkgdGhlIGZvbnRcbiAgICogKGUuZy4gQ0pLKS5cbiAgICovXG4gIHByaXZhdGUgX2FsaWduUm93V2lkdGgoZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgIGNvbnN0IHdpZHRoID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICBjb25zdCBsYXN0Q29sdW1uID0gdGhpcy5fcm93Q29sdW1ucy5nZXQoZWxlbWVudCk/LnNsaWNlKC0xKT8uWzBdO1xuICAgIGlmICghbGFzdENvbHVtbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRXaWR0aCA9IGxhc3RDb2x1bW4gKiB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGg7XG4gICAgZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgc2NhbGVYKCR7dGFyZ2V0V2lkdGggLyB3aWR0aH0pYDtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE5IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlckNlbGxQb3NpdGlvbiwgSUxpbmssIElMaW5rRGVjb3JhdGlvbnMsIElMaW5rV2l0aFN0YXRlLCBJTGlua2lmaWVyMiwgSUxpbmtpZmllckV2ZW50IH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlLCBkaXNwb3NlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlclNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgSUxpbmtQcm92aWRlclNlcnZpY2UsIElNb3VzZVNlcnZpY2UsIElSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9TZXJ2aWNlcyc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuaW1wb3J0IHsgYWRkRGlzcG9zYWJsZUxpc3RlbmVyIH0gZnJvbSAndnMvYmFzZS9icm93c2VyL2RvbSc7XG5cbmV4cG9ydCBjbGFzcyBMaW5raWZpZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgSUxpbmtpZmllcjIge1xuICBwdWJsaWMgZ2V0IGN1cnJlbnRMaW5rKCk6IElMaW5rV2l0aFN0YXRlIHwgdW5kZWZpbmVkIHsgcmV0dXJuIHRoaXMuX2N1cnJlbnRMaW5rOyB9XG4gIHByb3RlY3RlZCBfY3VycmVudExpbms6IElMaW5rV2l0aFN0YXRlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9tb3VzZURvd25MaW5rOiBJTGlua1dpdGhTdGF0ZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfbGFzdE1vdXNlRXZlbnQ6IE1vdXNlRXZlbnQgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2xpbmtDYWNoZURpc3Bvc2FibGVzOiBJRGlzcG9zYWJsZVtdID0gW107XG4gIHByaXZhdGUgX2xhc3RCdWZmZXJDZWxsOiBJQnVmZmVyQ2VsbFBvc2l0aW9uIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9pc01vdXNlT3V0OiBib29sZWFuID0gdHJ1ZTtcbiAgcHJpdmF0ZSBfd2FzUmVzaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9hY3RpdmVQcm92aWRlclJlcGxpZXM6IE1hcDxOdW1iZXIsIElMaW5rV2l0aFN0YXRlW10gfCB1bmRlZmluZWQ+IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9hY3RpdmVMaW5lOiBudW1iZXIgPSAtMTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vblNob3dMaW5rVW5kZXJsaW5lID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uU2hvd0xpbmtVbmRlcmxpbmUgPSB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkhpZGVMaW5rVW5kZXJsaW5lID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8SUxpbmtpZmllckV2ZW50PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uSGlkZUxpbmtVbmRlcmxpbmUgPSB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2VsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIEBJTW91c2VTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX21vdXNlU2VydmljZTogSU1vdXNlU2VydmljZSxcbiAgICBASVJlbmRlclNlcnZpY2UgcHJpdmF0ZSByZWFkb25seSBfcmVuZGVyU2VydmljZTogSVJlbmRlclNlcnZpY2UsXG4gICAgQElCdWZmZXJTZXJ2aWNlIHByaXZhdGUgcmVhZG9ubHkgX2J1ZmZlclNlcnZpY2U6IElCdWZmZXJTZXJ2aWNlLFxuICAgIEBJTGlua1Byb3ZpZGVyU2VydmljZSBwcml2YXRlIHJlYWRvbmx5IF9saW5rUHJvdmlkZXJTZXJ2aWNlOiBJTGlua1Byb3ZpZGVyU2VydmljZVxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRvRGlzcG9zYWJsZSgoKSA9PiB7XG4gICAgICBkaXNwb3NlKHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzKTtcbiAgICAgIHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzLmxlbmd0aCA9IDA7XG4gICAgICB0aGlzLl9sYXN0TW91c2VFdmVudCA9IHVuZGVmaW5lZDtcbiAgICAgIC8vIENsZWFyIG91dCBsaW5rIHByb3ZpZGVycyBhcyB0aGV5IGNvdWxkIGVhc2lseSBjYXVzZSBhbiBlbWJlZGRlciBtZW1vcnkgbGVha1xuICAgICAgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPy5jbGVhcigpO1xuICAgIH0pKTtcbiAgICAvLyBMaXN0ZW4gdG8gcmVzaXplIHRvIGNhdGNoIHRoZSBjYXNlIHdoZXJlIGl0J3MgcmVzaXplZCBhbmQgdGhlIGN1cnNvciBpcyBvdXQgb2YgdGhlIHZpZXdwb3J0LlxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUoKCkgPT4ge1xuICAgICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICAgICAgdGhpcy5fd2FzUmVzaXplZCA9IHRydWU7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLl9lbGVtZW50LCAnbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgIHRoaXMuX2lzTW91c2VPdXQgPSB0cnVlO1xuICAgICAgdGhpcy5fY2xlYXJDdXJyZW50TGluaygpO1xuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5fZWxlbWVudCwgJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZS5iaW5kKHRoaXMpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuX2VsZW1lbnQsICdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLl9lbGVtZW50LCAnbW91c2V1cCcsIHRoaXMuX2hhbmRsZU1vdXNlVXAuYmluZCh0aGlzKSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VNb3ZlKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5fbGFzdE1vdXNlRXZlbnQgPSBldmVudDtcblxuICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudChldmVudCwgdGhpcy5fZWxlbWVudCwgdGhpcy5fbW91c2VTZXJ2aWNlKTtcbiAgICBpZiAoIXBvc2l0aW9uKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzTW91c2VPdXQgPSBmYWxzZTtcblxuICAgIC8vIElnbm9yZSB0aGUgZXZlbnQgaWYgaXQncyBhbiBlbWJlZGRlciBjcmVhdGVkIGhvdmVyIHdpZGdldFxuICAgIGNvbnN0IGNvbXBvc2VkUGF0aCA9IGV2ZW50LmNvbXBvc2VkUGF0aCgpIGFzIEhUTUxFbGVtZW50W107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb21wb3NlZFBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGNvbXBvc2VkUGF0aFtpXTtcbiAgICAgIC8vIEhpdCBUZXJtaW5hbC5lbGVtZW50LCBicmVhayBhbmQgY29udGludWVcbiAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd4dGVybScpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gSXQncyBhIGhvdmVyLCBkb24ndCByZXNwZWN0IGhvdmVyIGV2ZW50XG4gICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygneHRlcm0taG92ZXInKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9sYXN0QnVmZmVyQ2VsbCB8fCAocG9zaXRpb24ueCAhPT0gdGhpcy5fbGFzdEJ1ZmZlckNlbGwueCB8fCBwb3NpdGlvbi55ICE9PSB0aGlzLl9sYXN0QnVmZmVyQ2VsbC55KSkge1xuICAgICAgdGhpcy5faGFuZGxlSG92ZXIocG9zaXRpb24pO1xuICAgICAgdGhpcy5fbGFzdEJ1ZmZlckNlbGwgPSBwb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVIb3Zlcihwb3NpdGlvbjogSUJ1ZmZlckNlbGxQb3NpdGlvbik6IHZvaWQge1xuICAgIC8vIFRPRE86IFRoaXMgY3VycmVudGx5IGRvZXMgbm90IGNhY2hlIGxpbmsgcHJvdmlkZXIgcmVzdWx0cyBhY3Jvc3Mgd3JhcHBlZCBsaW5lcywgYWN0aXZlTGluZVxuICAgIC8vICAgICAgIHNob3VsZCBiZSBzb21ldGhpbmcgbGlrZSBgYWN0aXZlUmFuZ2U6IHtzdGFydFksIGVuZFl9YFxuICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gY2xlYXIgdGhlIGxpbmtcbiAgICBpZiAodGhpcy5fYWN0aXZlTGluZSAhPT0gcG9zaXRpb24ueSB8fCB0aGlzLl93YXNSZXNpemVkKSB7XG4gICAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCk7XG4gICAgICB0aGlzLl9hc2tGb3JMaW5rKHBvc2l0aW9uLCBmYWxzZSk7XG4gICAgICB0aGlzLl93YXNSZXNpemVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhlIGlmIHRoZSBsaW5rIGlzIGluIHRoZSBtb3VzZSBwb3NpdGlvblxuICAgIGNvbnN0IGlzQ3VycmVudExpbmtJblBvc2l0aW9uID0gdGhpcy5fY3VycmVudExpbmsgJiYgdGhpcy5fbGlua0F0UG9zaXRpb24odGhpcy5fY3VycmVudExpbmsubGluaywgcG9zaXRpb24pO1xuICAgIGlmICghaXNDdXJyZW50TGlua0luUG9zaXRpb24pIHtcbiAgICAgIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKTtcbiAgICAgIHRoaXMuX2Fza0ZvckxpbmsocG9zaXRpb24sIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2Fza0ZvckxpbmsocG9zaXRpb246IElCdWZmZXJDZWxsUG9zaXRpb24sIHVzZUxpbmVDYWNoZTogYm9vbGVhbik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzIHx8ICF1c2VMaW5lQ2FjaGUpIHtcbiAgICAgIHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcz8uZm9yRWFjaChyZXBseSA9PiB7XG4gICAgICAgIHJlcGx5Py5mb3JFYWNoKGxpbmtXaXRoU3RhdGUgPT4ge1xuICAgICAgICAgIGlmIChsaW5rV2l0aFN0YXRlLmxpbmsuZGlzcG9zZSkge1xuICAgICAgICAgICAgbGlua1dpdGhTdGF0ZS5saW5rLmRpc3Bvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMgPSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLl9hY3RpdmVMaW5lID0gcG9zaXRpb24ueTtcbiAgICB9XG4gICAgbGV0IGxpbmtQcm92aWRlZCA9IGZhbHNlO1xuXG4gICAgLy8gVGhlcmUgaXMgbm8gbGluayBjYWNoZWQsIHNvIGFzayBmb3Igb25lXG4gICAgZm9yIChjb25zdCBbaSwgbGlua1Byb3ZpZGVyXSBvZiB0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLmxpbmtQcm92aWRlcnMuZW50cmllcygpKSB7XG4gICAgICBpZiAodXNlTGluZUNhY2hlKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVwbHkgPSB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM/LmdldChpKTtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXNuJ3QgYSByZXBseSwgdGhlIHByb3ZpZGVyIGhhc24ndCByZXNwb25kZWQgeWV0LlxuXG4gICAgICAgIC8vIFRPRE86IElmIHRoZXJlIGlzbid0IGEgcmVwbHkgeWV0IGl0IG1lYW5zIHRoYXQgdGhlIHByb3ZpZGVyIGlzIHN0aWxsIHJlc29sdmluZy4gRW5zdXJpbmdcbiAgICAgICAgLy8gcHJvdmlkZUxpbmtzIGlzbid0IHRyaWdnZXJlZCBhZ2FpbiBzYXZlcyBJTGluay5ob3ZlciBmaXJpbmcgdHdpY2UgdGhvdWdoLiBUaGlzIHByb2JhYmx5XG4gICAgICAgIC8vIG5lZWRzIHByb21pc2VzIHRvIGdldCBmaXhlZFxuICAgICAgICBpZiAoZXhpc3RpbmdSZXBseSkge1xuICAgICAgICAgIGxpbmtQcm92aWRlZCA9IHRoaXMuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KGksIHBvc2l0aW9uLCBsaW5rUHJvdmlkZWQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5rUHJvdmlkZXIucHJvdmlkZUxpbmtzKHBvc2l0aW9uLnksIChsaW5rczogSUxpbmtbXSB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICAgIGlmICh0aGlzLl9pc01vdXNlT3V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGxpbmtzV2l0aFN0YXRlOiBJTGlua1dpdGhTdGF0ZVtdIHwgdW5kZWZpbmVkID0gbGlua3M/Lm1hcChsaW5rICA9PiAoeyBsaW5rIH0pKTtcbiAgICAgICAgICB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM/LnNldChpLCBsaW5rc1dpdGhTdGF0ZSk7XG4gICAgICAgICAgbGlua1Byb3ZpZGVkID0gdGhpcy5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQoaSwgcG9zaXRpb24sIGxpbmtQcm92aWRlZCk7XG5cbiAgICAgICAgICAvLyBJZiBhbGwgcHJvdmlkZXJzIGhhdmUgcmVzcG9uZGVkLCByZW1vdmUgbG93ZXIgcHJpb3JpdHkgbGlua3MgdGhhdCBpbnRlcnNlY3QgcmFuZ2VzIG9mXG4gICAgICAgICAgLy8gaGlnaGVyIHByaW9yaXR5IGxpbmtzXG4gICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcz8uc2l6ZSA9PT0gdGhpcy5fbGlua1Byb3ZpZGVyU2VydmljZS5saW5rUHJvdmlkZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlSW50ZXJzZWN0aW5nTGlua3MocG9zaXRpb24ueSwgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlbW92ZUludGVyc2VjdGluZ0xpbmtzKHk6IG51bWJlciwgcmVwbGllczogTWFwPE51bWJlciwgSUxpbmtXaXRoU3RhdGVbXSB8IHVuZGVmaW5lZD4pOiB2b2lkIHtcbiAgICBjb25zdCBvY2N1cGllZENlbGxzID0gbmV3IFNldDxudW1iZXI+KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXBsaWVzLnNpemU7IGkrKykge1xuICAgICAgY29uc3QgcHJvdmlkZXJSZXBseSA9IHJlcGxpZXMuZ2V0KGkpO1xuICAgICAgaWYgKCFwcm92aWRlclJlcGx5KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm92aWRlclJlcGx5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGxpbmtXaXRoU3RhdGUgPSBwcm92aWRlclJlcGx5W2ldO1xuICAgICAgICBjb25zdCBzdGFydFggPSBsaW5rV2l0aFN0YXRlLmxpbmsucmFuZ2Uuc3RhcnQueSA8IHkgPyAwIDogbGlua1dpdGhTdGF0ZS5saW5rLnJhbmdlLnN0YXJ0Lng7XG4gICAgICAgIGNvbnN0IGVuZFggPSBsaW5rV2l0aFN0YXRlLmxpbmsucmFuZ2UuZW5kLnkgPiB5ID8gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzIDogbGlua1dpdGhTdGF0ZS5saW5rLnJhbmdlLmVuZC54O1xuICAgICAgICBmb3IgKGxldCB4ID0gc3RhcnRYOyB4IDw9IGVuZFg7IHgrKykge1xuICAgICAgICAgIGlmIChvY2N1cGllZENlbGxzLmhhcyh4KSkge1xuICAgICAgICAgICAgcHJvdmlkZXJSZXBseS5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvY2N1cGllZENlbGxzLmFkZCh4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KGluZGV4OiBudW1iZXIsIHBvc2l0aW9uOiBJQnVmZmVyQ2VsbFBvc2l0aW9uLCBsaW5rUHJvdmlkZWQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcykge1xuICAgICAgcmV0dXJuIGxpbmtQcm92aWRlZDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5rcyA9IHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoaW5kZXgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgZXZlcnkgcHJvdmlkZXIgYmVmb3JlIHRoaXMgb25lIGhhcyBjb21lIGJhY2sgdW5kZWZpbmVkXG4gICAgbGV0IGhhc0xpbmtCZWZvcmUgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZGV4OyBqKyspIHtcbiAgICAgIGlmICghdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmhhcyhqKSB8fCB0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGopKSB7XG4gICAgICAgIGhhc0xpbmtCZWZvcmUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGFsbCBwcm92aWRlcnMgd2l0aCBoaWdoZXIgcHJpb3JpdHkgY2FtZSBiYWNrIHVuZGVmaW5lZCwgdGhlbiB0aGlzIHByb3ZpZGVyJ3MgbGluayBmb3JcbiAgICAvLyB0aGUgcG9zaXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICBpZiAoIWhhc0xpbmtCZWZvcmUgJiYgbGlua3MpIHtcbiAgICAgIGNvbnN0IGxpbmtBdFBvc2l0aW9uID0gbGlua3MuZmluZChsaW5rID0+IHRoaXMuX2xpbmtBdFBvc2l0aW9uKGxpbmsubGluaywgcG9zaXRpb24pKTtcbiAgICAgIGlmIChsaW5rQXRQb3NpdGlvbikge1xuICAgICAgICBsaW5rUHJvdmlkZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9oYW5kbGVOZXdMaW5rKGxpbmtBdFBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhbGwgdGhlIHByb3ZpZGVycyBoYXZlIHJlc3BvbmRlZFxuICAgIGlmICh0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZSA9PT0gdGhpcy5fbGlua1Byb3ZpZGVyU2VydmljZS5saW5rUHJvdmlkZXJzLmxlbmd0aCAmJiAhbGlua1Byb3ZpZGVkKSB7XG4gICAgICAvLyBSZXNwZWN0IHRoZSBvcmRlciBvZiB0aGUgbGluayBwcm92aWRlcnNcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemU7IGorKykge1xuICAgICAgICBjb25zdCBjdXJyZW50TGluayA9IHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoaik/LmZpbmQobGluayA9PiB0aGlzLl9saW5rQXRQb3NpdGlvbihsaW5rLmxpbmssIHBvc2l0aW9uKSk7XG4gICAgICAgIGlmIChjdXJyZW50TGluaykge1xuICAgICAgICAgIGxpbmtQcm92aWRlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5faGFuZGxlTmV3TGluayhjdXJyZW50TGluayk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbGlua1Byb3ZpZGVkO1xuICB9XG5cbiAgcHJpdmF0ZSBfaGFuZGxlTW91c2VEb3duKCk6IHZvaWQge1xuICAgIHRoaXMuX21vdXNlRG93bkxpbmsgPSB0aGlzLl9jdXJyZW50TGluaztcbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU1vdXNlVXAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2N1cnJlbnRMaW5rKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGV2ZW50LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbW91c2VEb3duTGluayAmJiBsaW5rRXF1YWxzKHRoaXMuX21vdXNlRG93bkxpbmsubGluaywgdGhpcy5fY3VycmVudExpbmsubGluaykgJiYgdGhpcy5fbGlua0F0UG9zaXRpb24odGhpcy5fY3VycmVudExpbmsubGluaywgcG9zaXRpb24pKSB7XG4gICAgICB0aGlzLl9jdXJyZW50TGluay5saW5rLmFjdGl2YXRlKGV2ZW50LCB0aGlzLl9jdXJyZW50TGluay5saW5rLnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NsZWFyQ3VycmVudExpbmsoc3RhcnRSb3c/OiBudW1iZXIsIGVuZFJvdz86IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY3VycmVudExpbmsgfHwgIXRoaXMuX2xhc3RNb3VzZUV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHN0YXJ0IGFuZCBlbmQgcm93LCBjaGVjayB0aGF0IHRoZSBsaW5rIGlzIHdpdGhpbiBpdFxuICAgIGlmICghc3RhcnRSb3cgfHwgIWVuZFJvdyB8fCAodGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5zdGFydC55ID49IHN0YXJ0Um93ICYmIHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsucmFuZ2UuZW5kLnkgPD0gZW5kUm93KSkge1xuICAgICAgdGhpcy5fbGlua0xlYXZlKHRoaXMuX2VsZW1lbnQsIHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssIHRoaXMuX2xhc3RNb3VzZUV2ZW50KTtcbiAgICAgIHRoaXMuX2N1cnJlbnRMaW5rID0gdW5kZWZpbmVkO1xuICAgICAgZGlzcG9zZSh0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcyk7XG4gICAgICB0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcy5sZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhbmRsZU5ld0xpbmsobGlua1dpdGhTdGF0ZTogSUxpbmtXaXRoU3RhdGUpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2xhc3RNb3VzZUV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KHRoaXMuX2xhc3RNb3VzZUV2ZW50LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9tb3VzZVNlcnZpY2UpO1xuXG4gICAgaWYgKCFwb3NpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRyaWdnZXIgaG92ZXIgaWYgdGhlIHdlIGhhdmUgYSBsaW5rIGF0IHRoZSBwb3NpdGlvblxuICAgIGlmICh0aGlzLl9saW5rQXRQb3NpdGlvbihsaW5rV2l0aFN0YXRlLmxpbmssIHBvc2l0aW9uKSkge1xuICAgICAgdGhpcy5fY3VycmVudExpbmsgPSBsaW5rV2l0aFN0YXRlO1xuICAgICAgdGhpcy5fY3VycmVudExpbmsuc3RhdGUgPSB7XG4gICAgICAgIGRlY29yYXRpb25zOiB7XG4gICAgICAgICAgdW5kZXJsaW5lOiBsaW5rV2l0aFN0YXRlLmxpbmsuZGVjb3JhdGlvbnMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBsaW5rV2l0aFN0YXRlLmxpbmsuZGVjb3JhdGlvbnMudW5kZXJsaW5lLFxuICAgICAgICAgIHBvaW50ZXJDdXJzb3I6IGxpbmtXaXRoU3RhdGUubGluay5kZWNvcmF0aW9ucyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IGxpbmtXaXRoU3RhdGUubGluay5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yXG4gICAgICAgIH0sXG4gICAgICAgIGlzSG92ZXJlZDogdHJ1ZVxuICAgICAgfTtcbiAgICAgIHRoaXMuX2xpbmtIb3Zlcih0aGlzLl9lbGVtZW50LCBsaW5rV2l0aFN0YXRlLmxpbmssIHRoaXMuX2xhc3RNb3VzZUV2ZW50KTtcblxuICAgICAgLy8gQWRkIGxpc3RlbmVyIGZvciB0cmFja2luZyBkZWNvcmF0aW9ucyBjaGFuZ2VzXG4gICAgICBsaW5rV2l0aFN0YXRlLmxpbmsuZGVjb3JhdGlvbnMgPSB7fSBhcyBJTGlua0RlY29yYXRpb25zO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobGlua1dpdGhTdGF0ZS5saW5rLmRlY29yYXRpb25zLCB7XG4gICAgICAgIHBvaW50ZXJDdXJzb3I6IHtcbiAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcixcbiAgICAgICAgICBzZXQ6IHYgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZSAmJiB0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yICE9PSB2KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IgPSB2O1xuICAgICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCd4dGVybS1jdXJzb3ItcG9pbnRlcicsIHYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB1bmRlcmxpbmU6IHtcbiAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMudW5kZXJsaW5lLFxuICAgICAgICAgIHNldDogdiA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudExpbms/LnN0YXRlICYmIHRoaXMuX2N1cnJlbnRMaW5rPy5zdGF0ZT8uZGVjb3JhdGlvbnMudW5kZXJsaW5lICE9PSB2KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSA9IHY7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQobGlua1dpdGhTdGF0ZS5saW5rLCB2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIExpc3RlbiB0byB2aWV3cG9ydCBjaGFuZ2VzIHRvIHJlLXJlbmRlciB0aGUgbGluayB1bmRlciB0aGUgY3Vyc29yIChvbmx5IHdoZW4gdGhlIGxpbmUgdGhlXG4gICAgICAvLyBsaW5rIGlzIG9uIGNoYW5nZXMpXG4gICAgICB0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcy5wdXNoKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKGUgPT4ge1xuICAgICAgICAvLyBTYW5pdHkgY2hlY2ssIHRoaXMgc2hvdWxkbid0IGhhcHBlbiBpbiBwcmFjdGljZSBhcyB0aGlzIGxpc3RlbmVyIHdvdWxkIGJlIGRpc3Bvc2VkXG4gICAgICAgIGlmICghdGhpcy5fY3VycmVudExpbmspIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2hlbiBzdGFydCBpcyAwIGEgc2Nyb2xsIG1vc3QgbGlrZWx5IG9jY3VycmVkLCBtYWtlIHN1cmUgbGlua3MgYWJvdmUgdGhlIGZvbGQgYWxzbyBnZXRcbiAgICAgICAgLy8gY2xlYXJlZC5cbiAgICAgICAgY29uc3Qgc3RhcnQgPSBlLnN0YXJ0ID09PSAwID8gMCA6IGUuc3RhcnQgKyAxICsgdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgICAgIGNvbnN0IGVuZCA9IHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwICsgMSArIGUuZW5kO1xuICAgICAgICAvLyBPbmx5IGNsZWFyIHRoZSBsaW5rIGlmIHRoZSB2aWV3cG9ydCBjaGFuZ2UgaGFwcGVuZWQgb24gdGhpcyBsaW5lXG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50TGluay5saW5rLnJhbmdlLnN0YXJ0LnkgPj0gc3RhcnQgJiYgdGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5lbmQueSA8PSBlbmQpIHtcbiAgICAgICAgICB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgIGlmICh0aGlzLl9sYXN0TW91c2VFdmVudCkge1xuICAgICAgICAgICAgLy8gcmUtZXZhbCBwcmV2aW91c2x5IGFjdGl2ZSBsaW5rIGFmdGVyIGNoYW5nZXNcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudCh0aGlzLl9sYXN0TW91c2VFdmVudCwgdGhpcy5fZWxlbWVudCwgdGhpcy5fbW91c2VTZXJ2aWNlISk7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgdGhpcy5fYXNrRm9yTGluayhwb3NpdGlvbiwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfbGlua0hvdmVyKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBsaW5rOiBJTGluaywgZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fY3VycmVudExpbms/LnN0YXRlKSB7XG4gICAgICB0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSkge1xuICAgICAgICB0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQobGluaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcikge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWN1cnNvci1wb2ludGVyJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxpbmsuaG92ZXIpIHtcbiAgICAgIGxpbmsuaG92ZXIoZXZlbnQsIGxpbmsudGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfZmlyZVVuZGVybGluZUV2ZW50KGxpbms6IElMaW5rLCBzaG93RXZlbnQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCByYW5nZSA9IGxpbmsucmFuZ2U7XG4gICAgY29uc3Qgc2Nyb2xsT2Zmc2V0ID0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLl9jcmVhdGVMaW5rVW5kZXJsaW5lRXZlbnQocmFuZ2Uuc3RhcnQueCAtIDEsIHJhbmdlLnN0YXJ0LnkgLSBzY3JvbGxPZmZzZXQgLSAxLCByYW5nZS5lbmQueCwgcmFuZ2UuZW5kLnkgLSBzY3JvbGxPZmZzZXQgLSAxLCB1bmRlZmluZWQpO1xuICAgIGNvbnN0IGVtaXR0ZXIgPSBzaG93RXZlbnQgPyB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lIDogdGhpcy5fb25IaWRlTGlua1VuZGVybGluZTtcbiAgICBlbWl0dGVyLmZpcmUoZXZlbnQpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9saW5rTGVhdmUoZWxlbWVudDogSFRNTEVsZW1lbnQsIGxpbms6IElMaW5rLCBldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9jdXJyZW50TGluaz8uc3RhdGUpIHtcbiAgICAgIHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSkge1xuICAgICAgICB0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQobGluaywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd4dGVybS1jdXJzb3ItcG9pbnRlcicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsaW5rLmxlYXZlKSB7XG4gICAgICBsaW5rLmxlYXZlKGV2ZW50LCBsaW5rLnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgYnVmZmVyIHBvc2l0aW9uIGlzIHdpdGhpbiB0aGUgbGlua1xuICAgKiBAcGFyYW0gbGlua1xuICAgKiBAcGFyYW0gcG9zaXRpb25cbiAgICovXG4gIHByaXZhdGUgX2xpbmtBdFBvc2l0aW9uKGxpbms6IElMaW5rLCBwb3NpdGlvbjogSUJ1ZmZlckNlbGxQb3NpdGlvbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGxvd2VyID0gbGluay5yYW5nZS5zdGFydC55ICogdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzICsgbGluay5yYW5nZS5zdGFydC54O1xuICAgIGNvbnN0IHVwcGVyID0gbGluay5yYW5nZS5lbmQueSAqIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyArIGxpbmsucmFuZ2UuZW5kLng7XG4gICAgY29uc3QgY3VycmVudCA9IHBvc2l0aW9uLnkgKiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMgKyBwb3NpdGlvbi54O1xuICAgIHJldHVybiAobG93ZXIgPD0gY3VycmVudCAmJiBjdXJyZW50IDw9IHVwcGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGJ1ZmZlciBwb3NpdGlvbiBmcm9tIGEgbW91c2UgZXZlbnRcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBwcml2YXRlIF9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGV2ZW50OiBNb3VzZUV2ZW50LCBlbGVtZW50OiBIVE1MRWxlbWVudCwgbW91c2VTZXJ2aWNlOiBJTW91c2VTZXJ2aWNlKTogSUJ1ZmZlckNlbGxQb3NpdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgY29vcmRzID0gbW91c2VTZXJ2aWNlLmdldENvb3JkcyhldmVudCwgZWxlbWVudCwgdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO1xuICAgIGlmICghY29vcmRzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgeDogY29vcmRzWzBdLCB5OiBjb29yZHNbMV0gKyB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlTGlua1VuZGVybGluZUV2ZW50KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIGZnOiBudW1iZXIgfCB1bmRlZmluZWQpOiBJTGlua2lmaWVyRXZlbnQge1xuICAgIHJldHVybiB7IHgxLCB5MSwgeDIsIHkyLCBjb2xzOiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsIGZnIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gbGlua0VxdWFscyhhOiBJTGluaywgYjogSUxpbmspOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBhLnRleHQgPT09IGIudGV4dCAmJlxuICAgIGEucmFuZ2Uuc3RhcnQueCA9PT0gYi5yYW5nZS5zdGFydC54ICYmXG4gICAgYS5yYW5nZS5zdGFydC55ID09PSBiLnJhbmdlLnN0YXJ0LnkgJiZcbiAgICBhLnJhbmdlLmVuZC54ID09PSBiLnJhbmdlLmVuZC54ICYmXG4gICAgYS5yYW5nZS5lbmQueSA9PT0gYi5yYW5nZS5lbmQueVxuICApO1xufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKVxuICogQGxpY2Vuc2UgTUlUXG4gKlxuICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6XG4gKiAgIEZhYnJpY2UgQmVsbGFyZCdzIGphdmFzY3JpcHQgdnQxMDAgZm9yIGpzbGludXg6XG4gKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4L1xuICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkXG4gKiAgIFRoZSBvcmlnaW5hbCBkZXNpZ24gcmVtYWlucy4gVGhlIHRlcm1pbmFsIGl0c2VsZlxuICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmdcbiAqICAgb3RoZXIgZmVhdHVyZXMuXG4gKlxuICogVGVybWluYWwgRW11bGF0aW9uIFJlZmVyZW5jZXM6XG4gKiAgIGh0dHA6Ly92dDEwMC5uZXQvXG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMudHh0XG4gKiAgIGh0dHA6Ly9pbnZpc2libGUtaXNsYW5kLm5ldC94dGVybS9jdGxzZXFzL2N0bHNlcXMuaHRtbFxuICogICBodHRwOi8vaW52aXNpYmxlLWlzbGFuZC5uZXQvdnR0ZXN0L1xuICogICBodHRwOi8vd3d3Lmlud2FwLmNvbS9wZHAxMC9hbnNpY29kZS50eHRcbiAqICAgaHR0cDovL2xpbnV4LmRpZS5uZXQvbWFuLzQvY29uc29sZV9jb2Rlc1xuICogICBodHRwOi8vbGludXguZGllLm5ldC9tYW4vNy91cnh2dFxuICovXG5cbmltcG9ydCB7IElEZWNvcmF0aW9uLCBJRGVjb3JhdGlvbk9wdGlvbnMsIElEaXNwb3NhYmxlLCBJTGlua1Byb3ZpZGVyLCBJTWFya2VyIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcbmltcG9ydCB7IGNvcHlIYW5kbGVyLCBoYW5kbGVQYXN0ZUV2ZW50LCBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yLCBwYXN0ZSwgcmlnaHRDbGlja0hhbmRsZXIgfSBmcm9tICdicm93c2VyL0NsaXBib2FyZCc7XG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJ2Jyb3dzZXIvTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IE9zY0xpbmtQcm92aWRlciB9IGZyb20gJ2Jyb3dzZXIvT3NjTGlua1Byb3ZpZGVyJztcbmltcG9ydCB7IENoYXJhY3RlckpvaW5lckhhbmRsZXIsIEN1c3RvbUtleUV2ZW50SGFuZGxlciwgQ3VzdG9tV2hlZWxFdmVudEhhbmRsZXIsIElCcm93c2VyLCBJQnVmZmVyUmFuZ2UsIElDb21wb3NpdGlvbkhlbHBlciwgSUxpbmtpZmllcjIsIElUZXJtaW5hbCB9IGZyb20gJ2Jyb3dzZXIvVHlwZXMnO1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICdicm93c2VyL1ZpZXdwb3J0JztcbmltcG9ydCB7IEJ1ZmZlckRlY29yYXRpb25SZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvZGVjb3JhdGlvbnMvQnVmZmVyRGVjb3JhdGlvblJlbmRlcmVyJztcbmltcG9ydCB7IE92ZXJ2aWV3UnVsZXJSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvZGVjb3JhdGlvbnMvT3ZlcnZpZXdSdWxlclJlbmRlcmVyJztcbmltcG9ydCB7IENvbXBvc2l0aW9uSGVscGVyIH0gZnJvbSAnYnJvd3Nlci9pbnB1dC9Db21wb3NpdGlvbkhlbHBlcic7XG5pbXBvcnQgeyBEb21SZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvZG9tL0RvbVJlbmRlcmVyJztcbmltcG9ydCB7IElSZW5kZXJlciB9IGZyb20gJ2Jyb3dzZXIvcmVuZGVyZXIvc2hhcmVkL1R5cGVzJztcbmltcG9ydCB7IENoYXJTaXplU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvQ2hhclNpemVTZXJ2aWNlJztcbmltcG9ydCB7IENoYXJhY3RlckpvaW5lclNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL0NoYXJhY3RlckpvaW5lclNlcnZpY2UnO1xuaW1wb3J0IHsgQ29yZUJyb3dzZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9Db3JlQnJvd3NlclNlcnZpY2UnO1xuaW1wb3J0IHsgTGlua1Byb3ZpZGVyU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvTGlua1Byb3ZpZGVyU2VydmljZSc7XG5pbXBvcnQgeyBNb3VzZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL01vdXNlU2VydmljZSc7XG5pbXBvcnQgeyBSZW5kZXJTZXJ2aWNlIH0gZnJvbSAnYnJvd3Nlci9zZXJ2aWNlcy9SZW5kZXJTZXJ2aWNlJztcbmltcG9ydCB7IFNlbGVjdGlvblNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlbGVjdGlvblNlcnZpY2UnO1xuaW1wb3J0IHsgSUNoYXJTaXplU2VydmljZSwgSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsIElDb3JlQnJvd3NlclNlcnZpY2UsIElMaW5rUHJvdmlkZXJTZXJ2aWNlLCBJTW91c2VTZXJ2aWNlLCBJUmVuZGVyU2VydmljZSwgSVNlbGVjdGlvblNlcnZpY2UsIElUaGVtZVNlcnZpY2UgfSBmcm9tICdicm93c2VyL3NlcnZpY2VzL1NlcnZpY2VzJztcbmltcG9ydCB7IFRoZW1lU2VydmljZSB9IGZyb20gJ2Jyb3dzZXIvc2VydmljZXMvVGhlbWVTZXJ2aWNlJztcbmltcG9ydCB7IGNoYW5uZWxzLCBjb2xvciB9IGZyb20gJ2NvbW1vbi9Db2xvcic7XG5pbXBvcnQgeyBDb3JlVGVybWluYWwgfSBmcm9tICdjb21tb24vQ29yZVRlcm1pbmFsJztcbmltcG9ydCAqIGFzIEJyb3dzZXIgZnJvbSAnY29tbW9uL1BsYXRmb3JtJztcbmltcG9ydCB7IENvbG9yUmVxdWVzdFR5cGUsIENvcmVNb3VzZUFjdGlvbiwgQ29yZU1vdXNlQnV0dG9uLCBDb3JlTW91c2VFdmVudFR5cGUsIElDb2xvckV2ZW50LCBJVGVybWluYWxPcHRpb25zLCBLZXlib2FyZFJlc3VsdFR5cGUsIFNwZWNpYWxDb2xvckluZGV4IH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERFRkFVTFRfQVRUUl9EQVRBIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9CdWZmZXJMaW5lJztcbmltcG9ydCB7IElCdWZmZXIgfSBmcm9tICdjb21tb24vYnVmZmVyL1R5cGVzJztcbmltcG9ydCB7IEMwLCBDMV9FU0NBUEVEIH0gZnJvbSAnY29tbW9uL2RhdGEvRXNjYXBlU2VxdWVuY2VzJztcbmltcG9ydCB7IGV2YWx1YXRlS2V5Ym9hcmRFdmVudCB9IGZyb20gJ2NvbW1vbi9pbnB1dC9LZXlib2FyZCc7XG5pbXBvcnQgeyB0b1JnYlN0cmluZyB9IGZyb20gJ2NvbW1vbi9pbnB1dC9YUGFyc2VDb2xvcic7XG5pbXBvcnQgeyBEZWNvcmF0aW9uU2VydmljZSB9IGZyb20gJ2NvbW1vbi9zZXJ2aWNlcy9EZWNvcmF0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBJRGVjb3JhdGlvblNlcnZpY2UgfSBmcm9tICdjb21tb24vc2VydmljZXMvU2VydmljZXMnO1xuaW1wb3J0IHsgV2luZG93c09wdGlvbnNSZXBvcnRUeXBlIH0gZnJvbSAnLi4vY29tbW9uL0lucHV0SGFuZGxlcic7XG5pbXBvcnQgeyBBY2Nlc3NpYmlsaXR5TWFuYWdlciB9IGZyb20gJy4vQWNjZXNzaWJpbGl0eU1hbmFnZXInO1xuaW1wb3J0IHsgTGlua2lmaWVyIH0gZnJvbSAnLi9MaW5raWZpZXInO1xuaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9ldmVudCc7XG5pbXBvcnQgeyBhZGREaXNwb3NhYmxlTGlzdGVuZXIgfSBmcm9tICd2cy9iYXNlL2Jyb3dzZXIvZG9tJztcbmltcG9ydCB7IE11dGFibGVEaXNwb3NhYmxlLCB0b0Rpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuXG5leHBvcnQgY2xhc3MgQ29yZUJyb3dzZXJUZXJtaW5hbCBleHRlbmRzIENvcmVUZXJtaW5hbCBpbXBsZW1lbnRzIElUZXJtaW5hbCB7XG4gIHB1YmxpYyB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCB8IHVuZGVmaW5lZDtcbiAgcHVibGljIGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgc2NyZWVuRWxlbWVudDogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBfZG9jdW1lbnQ6IERvY3VtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF92aWV3cG9ydEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9oZWxwZXJDb250YWluZXI6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9jb21wb3NpdGlvblZpZXc6IEhUTUxFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgX2xpbmtpZmllcjogTXV0YWJsZURpc3Bvc2FibGU8SUxpbmtpZmllcjI+ID0gdGhpcy5fcmVnaXN0ZXIobmV3IE11dGFibGVEaXNwb3NhYmxlKCkpO1xuICBwdWJsaWMgZ2V0IGxpbmtpZmllcigpOiBJTGlua2lmaWVyMiB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl9saW5raWZpZXIudmFsdWU7IH1cbiAgcHJpdmF0ZSBfb3ZlcnZpZXdSdWxlclJlbmRlcmVyOiBPdmVydmlld1J1bGVyUmVuZGVyZXIgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3ZpZXdwb3J0OiBWaWV3cG9ydCB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgYnJvd3NlcjogSUJyb3dzZXIgPSBCcm93c2VyIGFzIGFueTtcblxuICBwcml2YXRlIF9jdXN0b21LZXlFdmVudEhhbmRsZXI6IEN1c3RvbUtleUV2ZW50SGFuZGxlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY3VzdG9tV2hlZWxFdmVudEhhbmRsZXI6IEN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyIHwgdW5kZWZpbmVkO1xuXG4gIC8vIEJyb3dzZXIgc2VydmljZXNcbiAgcHJpdmF0ZSBfZGVjb3JhdGlvblNlcnZpY2U6IERlY29yYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlIF9saW5rUHJvdmlkZXJTZXJ2aWNlOiBJTGlua1Byb3ZpZGVyU2VydmljZTtcblxuICAvLyBPcHRpb25hbCBicm93c2VyIHNlcnZpY2VzXG4gIHByaXZhdGUgX2NoYXJTaXplU2VydmljZTogSUNoYXJTaXplU2VydmljZSB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfY29yZUJyb3dzZXJTZXJ2aWNlOiBJQ29yZUJyb3dzZXJTZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9tb3VzZVNlcnZpY2U6IElNb3VzZVNlcnZpY2UgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3JlbmRlclNlcnZpY2U6IElSZW5kZXJTZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF90aGVtZVNlcnZpY2U6IElUaGVtZVNlcnZpY2UgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX2NoYXJhY3RlckpvaW5lclNlcnZpY2U6IElDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIF9zZWxlY3Rpb25TZXJ2aWNlOiBJU2VsZWN0aW9uU2VydmljZSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogUmVjb3JkcyB3aGV0aGVyIHRoZSBrZXlkb3duIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZCBhbmQgdHJpZ2dlcmVkIGEgZGF0YSBldmVudCwgaWYgc29cbiAgICogdGhlIGtleXByZXNzIGV2ZW50IHNob3VsZCBub3QgdHJpZ2dlciBhIGRhdGEgZXZlbnQgYnV0IHNob3VsZCBzdGlsbCBwcmludCB0byB0aGUgdGV4dGFyZWEgc29cbiAgICogc2NyZWVuIHJlYWRlcnMgd2lsbCBhbm5vdW5jZSBpdC5cbiAgICovXG4gIHByaXZhdGUgX2tleURvd25IYW5kbGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIFJlY29yZHMgd2hldGhlciBhIGtleWRvd24gZXZlbnQgaGFzIG9jY3VyZWQgc2luY2UgdGhlIGxhc3Qga2V5dXAgZXZlbnQsIGkuZS4gd2hldGhlciBhIGtleVxuICAgKiBpcyBjdXJyZW50bHkgXCJwcmVzc2VkXCIuXG4gICAqL1xuICBwcml2YXRlIF9rZXlEb3duU2VlbjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBSZWNvcmRzIHdoZXRoZXIgdGhlIGtleXByZXNzIGV2ZW50IGhhcyBhbHJlYWR5IGJlZW4gaGFuZGxlZCBhbmQgdHJpZ2dlcmVkIGEgZGF0YSBldmVudCwgaWYgc29cbiAgICogdGhlIGlucHV0IGV2ZW50IHNob3VsZCBub3QgdHJpZ2dlciBhIGRhdGEgZXZlbnQgYnV0IHNob3VsZCBzdGlsbCBwcmludCB0byB0aGUgdGV4dGFyZWEgc29cbiAgICogc2NyZWVuIHJlYWRlcnMgd2lsbCBhbm5vdW5jZSBpdC5cbiAgICovXG4gIHByaXZhdGUgX2tleVByZXNzSGFuZGxlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBSZWNvcmRzIHdoZXRoZXIgdGhlcmUgaGFzIGJlZW4gYSBrZXlkb3duIGV2ZW50IGZvciBhIGRlYWQga2V5IHdpdGhvdXQgYSBjb3JyZXNwb25kaW5nIGtleWRvd25cbiAgICogZXZlbnQgZm9yIHRoZSBjb21wb3NlZC9hbHRlcm5hdGl2ZSBjaGFyYWN0ZXIuIElmIHdlIGNhbmNlbCB0aGUga2V5ZG93biBldmVudCBmb3IgdGhlIGRlYWQga2V5LFxuICAgKiBubyBldmVudHMgd2lsbCBiZSBlbWl0dGVkIGZvciB0aGUgZmluYWwgY2hhcmFjdGVyLlxuICAgKi9cbiAgcHJpdmF0ZSBfdW5wcm9jZXNzZWREZWFkS2V5OiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfY29tcG9zaXRpb25IZWxwZXI6IElDb21wb3NpdGlvbkhlbHBlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYWNjZXNzaWJpbGl0eU1hbmFnZXI6IE11dGFibGVEaXNwb3NhYmxlPEFjY2Vzc2liaWxpdHlNYW5hZ2VyPiA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBNdXRhYmxlRGlzcG9zYWJsZSgpKTtcblxuICBwcml2YXRlIHJlYWRvbmx5IF9vbkN1cnNvck1vdmUgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQ3Vyc29yTW92ZSA9IHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudDtcbiAgcHJpdmF0ZSByZWFkb25seSBfb25LZXkgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx7IGtleTogc3RyaW5nLCBkb21FdmVudDogS2V5Ym9hcmRFdmVudCB9PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uS2V5ID0gdGhpcy5fb25LZXkuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uUmVuZGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8eyBzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlciB9PigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uUmVuZGVyID0gdGhpcy5fb25SZW5kZXIuZXZlbnQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX29uU2VsZWN0aW9uQ2hhbmdlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyByZWFkb25seSBvblNlbGVjdGlvbkNoYW5nZSA9IHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vblRpdGxlQ2hhbmdlID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8c3RyaW5nPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uVGl0bGVDaGFuZ2UgPSB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50O1xuICBwcml2YXRlIHJlYWRvbmx5IF9vbkJlbGwgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjx2b2lkPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQmVsbCA9IHRoaXMuX29uQmVsbC5ldmVudDtcblxuICBwcml2YXRlIF9vbkZvY3VzID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8dm9pZD4oKSk7XG4gIHB1YmxpYyBnZXQgb25Gb2N1cygpOiBFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkZvY3VzLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uQmx1ciA9IHRoaXMuX3JlZ2lzdGVyKG5ldyBFbWl0dGVyPHZvaWQ+KCkpO1xuICBwdWJsaWMgZ2V0IG9uQmx1cigpOiBFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9vbkJsdXIuZXZlbnQ7IH1cbiAgcHJpdmF0ZSBfb25BMTF5Q2hhckVtaXR0ZXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxzdHJpbmc+KCkpO1xuICBwdWJsaWMgZ2V0IG9uQTExeUNoYXIoKTogRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9vbkExMXlDaGFyRW1pdHRlci5ldmVudDsgfVxuICBwcml2YXRlIF9vbkExMXlUYWJFbWl0dGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8bnVtYmVyPigpKTtcbiAgcHVibGljIGdldCBvbkExMXlUYWIoKTogRXZlbnQ8bnVtYmVyPiB7IHJldHVybiB0aGlzLl9vbkExMXlUYWJFbWl0dGVyLmV2ZW50OyB9XG4gIHByaXZhdGUgX29uV2lsbE9wZW4gPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxIVE1MRWxlbWVudD4oKSk7XG4gIHB1YmxpYyBnZXQgb25XaWxsT3BlbigpOiBFdmVudDxIVE1MRWxlbWVudD4geyByZXR1cm4gdGhpcy5fb25XaWxsT3Blbi5ldmVudDsgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG9wdGlvbnM6IFBhcnRpYWw8SVRlcm1pbmFsT3B0aW9ucz4gPSB7fVxuICApIHtcbiAgICBzdXBlcihvcHRpb25zKTtcblxuICAgIHRoaXMuX3NldHVwKCk7XG5cbiAgICB0aGlzLl9kZWNvcmF0aW9uU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKERlY29yYXRpb25TZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElEZWNvcmF0aW9uU2VydmljZSwgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UpO1xuICAgIHRoaXMuX2xpbmtQcm92aWRlclNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShMaW5rUHJvdmlkZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElMaW5rUHJvdmlkZXJTZXJ2aWNlLCB0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlKTtcbiAgICB0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE9zY0xpbmtQcm92aWRlcikpO1xuXG4gICAgLy8gU2V0dXAgSW5wdXRIYW5kbGVyIGxpc3RlbmVyc1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RCZWxsKCgpID0+IHRoaXMuX29uQmVsbC5maXJlKCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVmcmVzaFJvd3MoKGUpID0+IHRoaXMucmVmcmVzaChlPy5zdGFydCA/PyAwLCBlPy5lbmQgPz8gKHRoaXMucm93cyAtIDEpKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RTZW5kRm9jdXMoKCkgPT4gdGhpcy5fcmVwb3J0Rm9jdXMoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RSZXNldCgoKSA9PiB0aGlzLnJlc2V0KCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQodHlwZSA9PiB0aGlzLl9yZXBvcnRXaW5kb3dzT3B0aW9ucyh0eXBlKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vbkNvbG9yKChldmVudCkgPT4gdGhpcy5faGFuZGxlQ29sb3JFdmVudChldmVudCkpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuX2lucHV0SGFuZGxlci5vbkN1cnNvck1vdmUsIHRoaXMuX29uQ3Vyc29yTW92ZSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKEV2ZW50LmZvcndhcmQodGhpcy5faW5wdXRIYW5kbGVyLm9uVGl0bGVDaGFuZ2UsIHRoaXMuX29uVGl0bGVDaGFuZ2UpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5mb3J3YXJkKHRoaXMuX2lucHV0SGFuZGxlci5vbkExMXlDaGFyLCB0aGlzLl9vbkExMXlDaGFyRW1pdHRlcikpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKEV2ZW50LmZvcndhcmQodGhpcy5faW5wdXRIYW5kbGVyLm9uQTExeVRhYiwgdGhpcy5fb25BMTF5VGFiRW1pdHRlcikpO1xuXG4gICAgLy8gU2V0dXAgbGlzdGVuZXJzXG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblJlc2l6ZShlID0+IHRoaXMuX2FmdGVyUmVzaXplKGUuY29scywgZS5yb3dzKSkpO1xuXG4gICAgdGhpcy5fcmVnaXN0ZXIodG9EaXNwb3NhYmxlKCgpID0+IHtcbiAgICAgIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZWxlbWVudD8ucGFyZW50Tm9kZT8ucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICB9KSk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGNvbG9yIGV2ZW50IGZyb20gaW5wdXRoYW5kbGVyIGZvciBPU0MgNHwxMDQgfCAxMHwxMTAgfCAxMXwxMTEgfCAxMnwxMTIuXG4gICAqIEFuIGV2ZW50IGZyb20gT1NDIDR8MTA0IG1heSBjb250YWluIG11bHRpcGxlIHNldCBvciByZXBvcnQgcmVxdWVzdHMsIGFuZCBtdWx0aXBsZVxuICAgKiBvciBub25lIHJlc3RvcmUgcmVxdWVzdHMgKHJlc2V0dGluZyBhbGwpLFxuICAgKiB3aGlsZSBhbiBldmVudCBmcm9tIE9TQyAxMHwxMTAgfCAxMXwxMTEgfCAxMnwxMTIgYWx3YXlzIGNvbnRhaW5zIGEgc2luZ2xlIHJlcXVlc3QuXG4gICAqL1xuICBwcml2YXRlIF9oYW5kbGVDb2xvckV2ZW50KGV2ZW50OiBJQ29sb3JFdmVudCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fdGhlbWVTZXJ2aWNlKSByZXR1cm47XG4gICAgZm9yIChjb25zdCByZXEgb2YgZXZlbnQpIHtcbiAgICAgIGxldCBhY2M6ICdmb3JlZ3JvdW5kJyB8ICdiYWNrZ3JvdW5kJyB8ICdjdXJzb3InIHwgJ2Fuc2knO1xuICAgICAgbGV0IGlkZW50ID0gJyc7XG4gICAgICBzd2l0Y2ggKHJlcS5pbmRleCkge1xuICAgICAgICBjYXNlIFNwZWNpYWxDb2xvckluZGV4LkZPUkVHUk9VTkQ6IC8vIE9TQyAxMCB8IDExMFxuICAgICAgICAgIGFjYyA9ICdmb3JlZ3JvdW5kJztcbiAgICAgICAgICBpZGVudCA9ICcxMCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgU3BlY2lhbENvbG9ySW5kZXguQkFDS0dST1VORDogLy8gT1NDIDExIHwgMTExXG4gICAgICAgICAgYWNjID0gJ2JhY2tncm91bmQnO1xuICAgICAgICAgIGlkZW50ID0gJzExJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBTcGVjaWFsQ29sb3JJbmRleC5DVVJTT1I6IC8vIE9TQyAxMiB8IDExMlxuICAgICAgICAgIGFjYyA9ICdjdXJzb3InO1xuICAgICAgICAgIGlkZW50ID0gJzEyJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDogLy8gT1NDIDQgfCAxMDRcbiAgICAgICAgICAvLyB3ZSBjYW4gc2tpcCB0aGUgWzAuLjI1NV0gcmFuZ2UgY2hlY2sgaGVyZSAoYWxyZWFkeSBkb25lIGluIGlucHV0aGFuZGxlcilcbiAgICAgICAgICBhY2MgPSAnYW5zaSc7XG4gICAgICAgICAgaWRlbnQgPSAnNDsnICsgcmVxLmluZGV4O1xuICAgICAgfVxuICAgICAgc3dpdGNoIChyZXEudHlwZSkge1xuICAgICAgICBjYXNlIENvbG9yUmVxdWVzdFR5cGUuUkVQT1JUOlxuICAgICAgICAgIGNvbnN0IGNvbG9yUmdiID0gY29sb3IudG9Db2xvclJHQihhY2MgPT09ICdhbnNpJ1xuICAgICAgICAgICAgPyB0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzLmFuc2lbcmVxLmluZGV4XVxuICAgICAgICAgICAgOiB0aGlzLl90aGVtZVNlcnZpY2UuY29sb3JzW2FjY10pO1xuICAgICAgICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChgJHtDMC5FU0N9XSR7aWRlbnR9OyR7dG9SZ2JTdHJpbmcoY29sb3JSZ2IpfSR7QzFfRVNDQVBFRC5TVH1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDb2xvclJlcXVlc3RUeXBlLlNFVDpcbiAgICAgICAgICBpZiAoYWNjID09PSAnYW5zaScpIHtcbiAgICAgICAgICAgIHRoaXMuX3RoZW1lU2VydmljZS5tb2RpZnlDb2xvcnMoY29sb3JzID0+IGNvbG9ycy5hbnNpW3JlcS5pbmRleF0gPSBjaGFubmVscy50b0NvbG9yKC4uLnJlcS5jb2xvcikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuYXJyb3dlZEFjYyA9IGFjYztcbiAgICAgICAgICAgIHRoaXMuX3RoZW1lU2VydmljZS5tb2RpZnlDb2xvcnMoY29sb3JzID0+IGNvbG9yc1tuYXJyb3dlZEFjY10gPSBjaGFubmVscy50b0NvbG9yKC4uLnJlcS5jb2xvcikpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBDb2xvclJlcXVlc3RUeXBlLlJFU1RPUkU6XG4gICAgICAgICAgdGhpcy5fdGhlbWVTZXJ2aWNlLnJlc3RvcmVDb2xvcihyZXEuaW5kZXgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfc2V0dXAoKTogdm9pZCB7XG4gICAgc3VwZXIuX3NldHVwKCk7XG5cbiAgICB0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVuaWVuY2UgcHJvcGVydHkgdG8gYWN0aXZlIGJ1ZmZlci5cbiAgICovXG4gIHB1YmxpYyBnZXQgYnVmZmVyKCk6IElCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvY3VzIHRoZSB0ZXJtaW5hbC4gRGVsZWdhdGVzIGZvY3VzIGhhbmRsaW5nIHRvIHRoZSB0ZXJtaW5hbCdzIERPTSBlbGVtZW50LlxuICAgKi9cbiAgcHVibGljIGZvY3VzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnRleHRhcmVhKSB7XG4gICAgICB0aGlzLnRleHRhcmVhLmZvY3VzKHsgcHJldmVudFNjcm9sbDogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9oYW5kbGVTY3JlZW5SZWFkZXJNb2RlT3B0aW9uQ2hhbmdlKHZhbHVlOiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyLnZhbHVlICYmIHRoaXMuX3JlbmRlclNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIudmFsdWUgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShBY2Nlc3NpYmlsaXR5TWFuYWdlciwgdGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyLmNsZWFyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJpbmRzIHRoZSBkZXNpcmVkIGZvY3VzIGJlaGF2aW9yIG9uIGEgZ2l2ZW4gdGVybWluYWwgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlVGV4dEFyZWFGb2N1cyhldjogRm9jdXNFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMpIHtcbiAgICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnW0knKTtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50IS5jbGFzc0xpc3QuYWRkKCdmb2N1cycpO1xuICAgIHRoaXMuX3Nob3dDdXJzb3IoKTtcbiAgICB0aGlzLl9vbkZvY3VzLmZpcmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCbHVyIHRoZSB0ZXJtaW5hbCwgY2FsbGluZyB0aGUgYmx1ciBmdW5jdGlvbiBvbiB0aGUgdGVybWluYWwncyB1bmRlcmx5aW5nXG4gICAqIHRleHRhcmVhLlxuICAgKi9cbiAgcHVibGljIGJsdXIoKTogdm9pZCB7XG4gICAgcmV0dXJuIHRoaXMudGV4dGFyZWE/LmJsdXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kcyB0aGUgZGVzaXJlZCBibHVyIGJlaGF2aW9yIG9uIGEgZ2l2ZW4gdGVybWluYWwgb2JqZWN0LlxuICAgKi9cbiAgcHJpdmF0ZSBfaGFuZGxlVGV4dEFyZWFCbHVyKCk6IHZvaWQge1xuICAgIC8vIFRleHQgY2FuIHNhZmVseSBiZSByZW1vdmVkIG9uIGJsdXIuIERvaW5nIGl0IGVhcmxpZXIgY291bGQgaW50ZXJmZXJlIHdpdGhcbiAgICAvLyBzY3JlZW4gcmVhZGVycyByZWFkaW5nIGl0IG91dC5cbiAgICB0aGlzLnRleHRhcmVhIS52YWx1ZSA9ICcnO1xuICAgIHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LCB0aGlzLmJ1ZmZlci55KTtcbiAgICBpZiAodGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzKSB7XG4gICAgICB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoQzAuRVNDICsgJ1tPJyk7XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXMnKTtcbiAgICB0aGlzLl9vbkJsdXIuZmlyZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfc3luY1RleHRBcmVhKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy50ZXh0YXJlYSB8fCAhdGhpcy5idWZmZXIuaXNDdXJzb3JJblZpZXdwb3J0IHx8IHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS5pc0NvbXBvc2luZyB8fCAhdGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdXJzb3JZID0gdGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci55O1xuICAgIGNvbnN0IGJ1ZmZlckxpbmUgPSB0aGlzLmJ1ZmZlci5saW5lcy5nZXQoY3Vyc29yWSk7XG4gICAgaWYgKCFidWZmZXJMaW5lKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGN1cnNvclggPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci54LCB0aGlzLmNvbHMgLSAxKTtcbiAgICBjb25zdCBjZWxsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodDtcbiAgICBjb25zdCB3aWR0aCA9IGJ1ZmZlckxpbmUuZ2V0V2lkdGgoY3Vyc29yWCk7XG4gICAgY29uc3QgY2VsbFdpZHRoID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLndpZHRoICogd2lkdGg7XG4gICAgY29uc3QgY3Vyc29yVG9wID0gdGhpcy5idWZmZXIueSAqIHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC5oZWlnaHQ7XG4gICAgY29uc3QgY3Vyc29yTGVmdCA9IGN1cnNvclggKiB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNlbGwud2lkdGg7XG5cbiAgICAvLyBTeW5jIHRoZSB0ZXh0YXJlYSB0byB0aGUgZXhhY3QgcG9zaXRpb24gb2YgdGhlIGNvbXBvc2l0aW9uIHZpZXcgc28gdGhlIElNRSBrbm93cyB3aGVyZSB0aGVcbiAgICAvLyB0ZXh0IGlzLlxuICAgIHRoaXMudGV4dGFyZWEuc3R5bGUubGVmdCA9IGN1cnNvckxlZnQgKyAncHgnO1xuICAgIHRoaXMudGV4dGFyZWEuc3R5bGUudG9wID0gY3Vyc29yVG9wICsgJ3B4JztcbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLndpZHRoID0gY2VsbFdpZHRoICsgJ3B4JztcbiAgICB0aGlzLnRleHRhcmVhLnN0eWxlLmhlaWdodCA9IGNlbGxIZWlnaHQgKyAncHgnO1xuICAgIHRoaXMudGV4dGFyZWEuc3R5bGUubGluZUhlaWdodCA9IGNlbGxIZWlnaHQgKyAncHgnO1xuICAgIHRoaXMudGV4dGFyZWEuc3R5bGUuekluZGV4ID0gJy01JztcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGRlZmF1bHQgYmVoYXZpb3JcbiAgICovXG4gIHByaXZhdGUgX2luaXRHbG9iYWwoKTogdm9pZCB7XG4gICAgdGhpcy5fYmluZEtleXMoKTtcblxuICAgIC8vIEJpbmQgY2xpcGJvYXJkIGZ1bmN0aW9uYWxpdHlcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ2NvcHknLCAoZXZlbnQ6IENsaXBib2FyZEV2ZW50KSA9PiB7XG4gICAgICAvLyBJZiBtb3VzZSBldmVudHMgYXJlIGFjdGl2ZSBpdCBtZWFucyB0aGUgc2VsZWN0aW9uIG1hbmFnZXIgaXMgZGlzYWJsZWQgYW5kXG4gICAgICAvLyBjb3B5IHNob3VsZCBiZSBoYW5kbGVkIGJ5IHRoZSBob3N0IHByb2dyYW0uXG4gICAgICBpZiAoIXRoaXMuaGFzU2VsZWN0aW9uKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29weUhhbmRsZXIoZXZlbnQsIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UhKTtcbiAgICB9KSk7XG4gICAgY29uc3QgcGFzdGVIYW5kbGVyV3JhcHBlciA9IChldmVudDogQ2xpcGJvYXJkRXZlbnQpOiB2b2lkID0+IGhhbmRsZVBhc3RlRXZlbnQoZXZlbnQsIHRoaXMudGV4dGFyZWEhLCB0aGlzLmNvcmVTZXJ2aWNlLCB0aGlzLm9wdGlvbnNTZXJ2aWNlKTtcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy50ZXh0YXJlYSEsICdwYXN0ZScsIHBhc3RlSGFuZGxlcldyYXBwZXIpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ3Bhc3RlJywgcGFzdGVIYW5kbGVyV3JhcHBlcikpO1xuXG4gICAgLy8gSGFuZGxlIHJpZ2h0IGNsaWNrIGNvbnRleHQgbWVudXNcbiAgICBpZiAoQnJvd3Nlci5pc0ZpcmVmb3gpIHtcbiAgICAgIC8vIEZpcmVmb3ggZG9lc24ndCBhcHBlYXIgdG8gZmlyZSB0aGUgY29udGV4dG1lbnUgZXZlbnQgb24gcmlnaHQgY2xpY2tcbiAgICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmVsZW1lbnQhLCAnbW91c2Vkb3duJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgICAgICByaWdodENsaWNrSGFuZGxlcihldmVudCwgdGhpcy50ZXh0YXJlYSEsIHRoaXMuc2NyZWVuRWxlbWVudCEsIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UhLCB0aGlzLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ2NvbnRleHRtZW51JywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIHJpZ2h0Q2xpY2tIYW5kbGVyKGV2ZW50LCB0aGlzLnRleHRhcmVhISwgdGhpcy5zY3JlZW5FbGVtZW50ISwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEsIHRoaXMub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpO1xuICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIE1vdmUgdGhlIHRleHRhcmVhIHVuZGVyIHRoZSBjdXJzb3Igd2hlbiBtaWRkbGUgY2xpY2tpbmcgb24gTGludXggdG8gZW5zdXJlXG4gICAgLy8gbWlkZGxlIGNsaWNrIHRvIHBhc3RlIHNlbGVjdGlvbiB3b3Jrcy4gVGhpcyBvbmx5IGFwcGVhcnMgdG8gd29yayBpbiBDaHJvbWVcbiAgICAvLyBhdCB0aGUgdGltZSBpcyB3cml0aW5nLlxuICAgIGlmIChCcm93c2VyLmlzTGludXgpIHtcbiAgICAgIC8vIFVzZSBhdXhjbGljayBldmVudCBvdmVyIG1vdXNlZG93biB0aGUgbGF0dGVyIGRvZXNuJ3Qgc2VlbSB0byB3b3JrLiBOb3RlXG4gICAgICAvLyB0aGF0IHRoZSByZWd1bGFyIGNsaWNrIGV2ZW50IGRvZXNuJ3QgZmlyZSBmb3IgdGhlIG1pZGRsZSBtb3VzZSBidXR0b24uXG4gICAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIodGhpcy5lbGVtZW50ISwgJ2F1eGNsaWNrJywgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5idXR0b24gPT09IDEpIHtcbiAgICAgICAgICBtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKGV2ZW50LCB0aGlzLnRleHRhcmVhISwgdGhpcy5zY3JlZW5FbGVtZW50ISk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXBwbHkga2V5IGhhbmRsaW5nIHRvIHRoZSB0ZXJtaW5hbFxuICAgKi9cbiAgcHJpdmF0ZSBfYmluZEtleXMoKTogdm9pZCB7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudGV4dGFyZWEhLCAna2V5dXAnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleVVwKGV2KSwgdHJ1ZSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLnRleHRhcmVhISwgJ2tleWRvd24nLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleURvd24oZXYpLCB0cnVlKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudGV4dGFyZWEhLCAna2V5cHJlc3MnLCAoZXY6IEtleWJvYXJkRXZlbnQpID0+IHRoaXMuX2tleVByZXNzKGV2KSwgdHJ1ZSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLnRleHRhcmVhISwgJ2NvbXBvc2l0aW9uc3RhcnQnLCAoKSA9PiB0aGlzLl9jb21wb3NpdGlvbkhlbHBlciEuY29tcG9zaXRpb25zdGFydCgpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudGV4dGFyZWEhLCAnY29tcG9zaXRpb251cGRhdGUnLCAoZTogQ29tcG9zaXRpb25FdmVudCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIhLmNvbXBvc2l0aW9udXBkYXRlKGUpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudGV4dGFyZWEhLCAnY29tcG9zaXRpb25lbmQnLCAoKSA9PiB0aGlzLl9jb21wb3NpdGlvbkhlbHBlciEuY29tcG9zaXRpb25lbmQoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLnRleHRhcmVhISwgJ2lucHV0JywgKGV2OiBJbnB1dEV2ZW50KSA9PiB0aGlzLl9pbnB1dEV2ZW50KGV2KSwgdHJ1ZSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMub25SZW5kZXIoKCkgPT4gdGhpcy5fY29tcG9zaXRpb25IZWxwZXIhLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wZW5zIHRoZSB0ZXJtaW5hbCB3aXRoaW4gYW4gZWxlbWVudC5cbiAgICpcbiAgICogQHBhcmFtIHBhcmVudCBUaGUgZWxlbWVudCB0byBjcmVhdGUgdGhlIHRlcm1pbmFsIHdpdGhpbi5cbiAgICovXG4gIHB1YmxpYyBvcGVuKHBhcmVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIXBhcmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXJtaW5hbCByZXF1aXJlcyBhIHBhcmVudCBlbGVtZW50LicpO1xuICAgIH1cblxuICAgIGlmICghcGFyZW50LmlzQ29ubmVjdGVkKSB7XG4gICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdUZXJtaW5hbC5vcGVuIHdhcyBjYWxsZWQgb24gYW4gZWxlbWVudCB0aGF0IHdhcyBub3QgYXR0YWNoZWQgdG8gdGhlIERPTScpO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSB0ZXJtaW5hbCBpcyBhbHJlYWR5IG9wZW5lZFxuICAgIGlmICh0aGlzLmVsZW1lbnQ/Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlKSB7XG4gICAgICAvLyBBZGp1c3QgdGhlIHdpbmRvdyBpZiBuZWVkZWRcbiAgICAgIGlmICh0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAhPT0gdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLndpbmRvdykge1xuICAgICAgICB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2Uud2luZG93ID0gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fZG9jdW1lbnQgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRvY3VtZW50T3ZlcnJpZGUgJiYgdGhpcy5vcHRpb25zLmRvY3VtZW50T3ZlcnJpZGUgaW5zdGFuY2VvZiBEb2N1bWVudCkge1xuICAgICAgdGhpcy5fZG9jdW1lbnQgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZG9jdW1lbnRPdmVycmlkZSBhcyBEb2N1bWVudDtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbWFpbiBlbGVtZW50IGNvbnRhaW5lclxuICAgIHRoaXMuZWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZWxlbWVudC5kaXIgPSAnbHRyJzsgICAvLyB4dGVybS5jc3MgYXNzdW1lcyBMVFJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGVybWluYWwnKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0nKTtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcblxuICAgIC8vIFBlcmZvcm1hbmNlOiBVc2UgYSBkb2N1bWVudCBmcmFnbWVudCB0byBidWlsZCB0aGUgdGVybWluYWxcbiAgICAvLyB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGRldGFjaGVkIGZyb20gdGhlIERPTVxuICAgIGNvbnN0IGZyYWdtZW50ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudCA9IHRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCd4dGVybS12aWV3cG9ydCcpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCk7XG5cbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgneHRlcm0tc2NyZWVuJyk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuc2NyZWVuRWxlbWVudCwgJ21vdXNlbW92ZScsIChldjogTW91c2VFdmVudCkgPT4gdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldikpKTtcbiAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciB0aGF0IHdpbGwgaG9sZCBoZWxwZXJzIGxpa2UgdGhlIHRleHRhcmVhIGZvclxuICAgIC8vIGNhcHR1cmluZyBET00gRXZlbnRzLiBUaGVuIHByb2R1Y2UgdGhlIGhlbHBlcnMuXG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5faGVscGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWhlbHBlcnMnKTtcbiAgICB0aGlzLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faGVscGVyQ29udGFpbmVyKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNjcmVlbkVsZW1lbnQpO1xuXG4gICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLnRleHRhcmVhID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0aGlzLnRleHRhcmVhLmNsYXNzTGlzdC5hZGQoJ3h0ZXJtLWhlbHBlci10ZXh0YXJlYScpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgU3RyaW5ncy5wcm9tcHRMYWJlbC5nZXQoKSk7XG4gICAgaWYgKCFCcm93c2VyLmlzQ2hyb21lT1MpIHtcbiAgICAgIC8vIENocm9tZVZveCBvbiBDaHJvbWVPUyBkb2VzIG5vdCBsaWtlIHRoaXMuIFNlZVxuICAgICAgLy8gaHR0cHM6Ly9pc3N1ZXRyYWNrZXIuZ29vZ2xlLmNvbS9pc3N1ZXMvMjYwMTcwMzk3XG4gICAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnYXJpYS1tdWx0aWxpbmUnLCAnZmFsc2UnKTtcbiAgICB9XG4gICAgdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ2F1dG9jb3JyZWN0JywgJ29mZicpO1xuICAgIHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCdhdXRvY2FwaXRhbGl6ZScsICdvZmYnKTtcbiAgICB0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgnc3BlbGxjaGVjaycsICdmYWxzZScpO1xuICAgIHRoaXMudGV4dGFyZWEudGFiSW5kZXggPSAwO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMub3B0aW9uc1NlcnZpY2Uub25TcGVjaWZpY09wdGlvbkNoYW5nZSgnZGlzYWJsZVN0ZGluJywgKCkgPT4gdGV4dGFyZWEucmVhZE9ubHkgPSB0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZGlzYWJsZVN0ZGluKSk7XG4gICAgdGhpcy50ZXh0YXJlYS5yZWFkT25seSA9IHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW47XG5cbiAgICAvLyBSZWdpc3RlciB0aGUgY29yZSBicm93c2VyIHNlcnZpY2UgYmVmb3JlIHRoZSBnZW5lcmljIHRleHRhcmVhIGhhbmRsZXJzIGFyZSByZWdpc3RlcmVkIHNvIGl0XG4gICAgLy8gaGFuZGxlcyB0aGVtIGZpcnN0LiBPdGhlcndpc2UgdGhlIHJlbmRlcmVycyBtYXkgdXNlIHRoZSB3cm9uZyBmb2N1cyBzdGF0ZS5cbiAgICB0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDb3JlQnJvd3NlclNlcnZpY2UsXG4gICAgICB0aGlzLnRleHRhcmVhLFxuICAgICAgcGFyZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgPz8gd2luZG93LFxuICAgICAgLy8gRm9yY2UgdW5zYWZlIG51bGwgaW4gbm9kZS5qcyBlbnZpcm9ubWVudCBmb3IgdGVzdHNcbiAgICAgIHRoaXMuX2RvY3VtZW50ID8/ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cuZG9jdW1lbnQgOiBudWxsIGFzIGFueVxuICAgICkpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNvcmVCcm93c2VyU2VydmljZSwgdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKGFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLnRleHRhcmVhLCAnZm9jdXMnLCAoZXY6IEZvY3VzRXZlbnQpID0+IHRoaXMuX2hhbmRsZVRleHRBcmVhRm9jdXMoZXYpKSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMudGV4dGFyZWEsICdibHVyJywgKCkgPT4gdGhpcy5faGFuZGxlVGV4dEFyZWFCbHVyKCkpKTtcbiAgICB0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYSk7XG5cbiAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UgPSB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDaGFyU2l6ZVNlcnZpY2UsIHRoaXMuX2RvY3VtZW50LCB0aGlzLl9oZWxwZXJDb250YWluZXIpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNoYXJTaXplU2VydmljZSwgdGhpcy5fY2hhclNpemVTZXJ2aWNlKTtcblxuICAgIHRoaXMuX3RoZW1lU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFRoZW1lU2VydmljZSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJVGhlbWVTZXJ2aWNlLCB0aGlzLl90aGVtZVNlcnZpY2UpO1xuXG4gICAgdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENoYXJhY3RlckpvaW5lclNlcnZpY2UpO1xuICAgIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsIHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpO1xuXG4gICAgdGhpcy5fcmVuZGVyU2VydmljZSA9IHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFJlbmRlclNlcnZpY2UsIHRoaXMucm93cywgdGhpcy5zY3JlZW5FbGVtZW50KSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJUmVuZGVyU2VydmljZSwgdGhpcy5fcmVuZGVyU2VydmljZSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoZSA9PiB0aGlzLl9vblJlbmRlci5maXJlKGUpKSk7XG4gICAgdGhpcy5vblJlc2l6ZShlID0+IHRoaXMuX3JlbmRlclNlcnZpY2UhLnJlc2l6ZShlLmNvbHMsIGUucm93cykpO1xuXG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3ID0gdGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoJ2NvbXBvc2l0aW9uLXZpZXcnKTtcbiAgICB0aGlzLl9jb21wb3NpdGlvbkhlbHBlciA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKENvbXBvc2l0aW9uSGVscGVyLCB0aGlzLnRleHRhcmVhLCB0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuICAgIHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb21wb3NpdGlvblZpZXcpO1xuXG4gICAgdGhpcy5fbW91c2VTZXJ2aWNlID0gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTW91c2VTZXJ2aWNlKTtcbiAgICB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKElNb3VzZVNlcnZpY2UsIHRoaXMuX21vdXNlU2VydmljZSk7XG5cbiAgICBjb25zdCBsaW5raWZpZXIgPSB0aGlzLl9saW5raWZpZXIudmFsdWUgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShMaW5raWZpZXIsIHRoaXMuc2NyZWVuRWxlbWVudCkpO1xuXG4gICAgLy8gUGVyZm9ybWFuY2U6IEFkZCB2aWV3cG9ydCBhbmQgaGVscGVyIGVsZW1lbnRzIGZyb20gdGhlIGZyYWdtZW50XG4gICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGZyYWdtZW50KTtcblxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9vbldpbGxPcGVuLmZpcmUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gICAgY2F0Y2ggeyAvKiBmYWlscyB0byBsb2FkIGFkZG9uIGZvciBzb21lIHJlYXNvbiAqLyB9XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJTZXJ2aWNlLmhhc1JlbmRlcmVyKCkpIHtcbiAgICAgIHRoaXMuX3JlbmRlclNlcnZpY2Uuc2V0UmVuZGVyZXIodGhpcy5fY3JlYXRlUmVuZGVyZXIoKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5vbkN1cnNvck1vdmUoKCkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyU2VydmljZSEuaGFuZGxlQ3Vyc29yTW92ZSgpO1xuICAgICAgdGhpcy5fc3luY1RleHRBcmVhKCk7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMub25SZXNpemUoKCkgPT4gdGhpcy5fcmVuZGVyU2VydmljZSEuaGFuZGxlUmVzaXplKHRoaXMuY29scywgdGhpcy5yb3dzKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMub25CbHVyKCgpID0+IHRoaXMuX3JlbmRlclNlcnZpY2UhLmhhbmRsZUJsdXIoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMub25Gb2N1cygoKSA9PiB0aGlzLl9yZW5kZXJTZXJ2aWNlIS5oYW5kbGVGb2N1cygpKSk7XG5cbiAgICB0aGlzLl92aWV3cG9ydCA9IHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFZpZXdwb3J0LCB0aGlzLmVsZW1lbnQsIHRoaXMuc2NyZWVuRWxlbWVudCkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3ZpZXdwb3J0Lm9uUmVxdWVzdFNjcm9sbExpbmVzKGUgPT4ge1xuICAgICAgc3VwZXIuc2Nyb2xsTGluZXMoZSwgZmFsc2UpO1xuICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIH0pKTtcblxuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShTZWxlY3Rpb25TZXJ2aWNlLFxuICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgdGhpcy5zY3JlZW5FbGVtZW50LFxuICAgICAgbGlua2lmaWVyXG4gICAgKSk7XG4gICAgdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShJU2VsZWN0aW9uU2VydmljZSwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlcXVlc3RTY3JvbGxMaW5lcyhlID0+IHRoaXMuc2Nyb2xsTGluZXMoZS5hbW91bnQsIGUuc3VwcHJlc3NTY3JvbGxFdmVudCkpKTtcbiAgICB0aGlzLl9yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlKCgpID0+IHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZXF1ZXN0UmVkcmF3KGUgPT4gdGhpcy5fcmVuZGVyU2VydmljZSEuaGFuZGxlU2VsZWN0aW9uQ2hhbmdlZChlLnN0YXJ0LCBlLmVuZCwgZS5jb2x1bW5TZWxlY3RNb2RlKSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25MaW51eE1vdXNlU2VsZWN0aW9uKHRleHQgPT4ge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIG5ldyBzZWxlY3Rpb24sIHB1dCBpdCBpbnRvIHRoZSB0ZXh0YXJlYSwgZm9jdXMgYW5kIHNlbGVjdCBpdFxuICAgICAgLy8gaW4gb3JkZXIgdG8gcmVnaXN0ZXIgaXQgYXMgYSBzZWxlY3Rpb24gb24gdGhlIE9TLiBUaGlzIGV2ZW50IGlzIGZpcmVkXG4gICAgICAvLyBvbmx5IG9uIExpbnV4IHRvIGVuYWJsZSBtaWRkbGUgY2xpY2sgdG8gcGFzdGUgc2VsZWN0aW9uLlxuICAgICAgdGhpcy50ZXh0YXJlYSEudmFsdWUgPSB0ZXh0O1xuICAgICAgdGhpcy50ZXh0YXJlYSEuZm9jdXMoKTtcbiAgICAgIHRoaXMudGV4dGFyZWEhLnNlbGVjdCgpO1xuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcihFdmVudC5hbnkoXG4gICAgICB0aGlzLl9vblNjcm9sbC5ldmVudCxcbiAgICAgIHRoaXMuX2lucHV0SGFuZGxlci5vblNjcm9sbFxuICAgICkoKCkgPT4ge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEucmVmcmVzaCgpO1xuICAgICAgdGhpcy5fdmlld3BvcnQ/LnF1ZXVlU3luYygpO1xuICAgIH0pKTtcblxuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEJ1ZmZlckRlY29yYXRpb25SZW5kZXJlciwgdGhpcy5zY3JlZW5FbGVtZW50KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuZWxlbWVudCwgJ21vdXNlZG93bicsIChlOiBNb3VzZUV2ZW50KSA9PiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIS5oYW5kbGVNb3VzZURvd24oZSkpKTtcblxuICAgIC8vIGFwcGx5IG1vdXNlIGV2ZW50IGNsYXNzZXMgc2V0IGJ5IGVzY2FwZSBjb2RlcyBiZWZvcmUgdGVybWluYWwgd2FzIGF0dGFjaGVkXG4gICAgaWYgKHRoaXMuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSkge1xuICAgICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCk7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSkge1xuICAgICAgLy8gTm90ZSB0aGF0IHRoaXMgbXVzdCBiZSBkb25lICphZnRlciogdGhlIHJlbmRlcmVyIGlzIGNyZWF0ZWQgaW4gb3JkZXIgdG9cbiAgICAgIC8vIGVuc3VyZSB0aGUgY29ycmVjdCBvcmRlciBvZiB0aGUgZHByY2hhbmdlIGV2ZW50XG4gICAgICB0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlci52YWx1ZSA9IHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEFjY2Vzc2liaWxpdHlNYW5hZ2VyLCB0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5fcmVnaXN0ZXIodGhpcy5vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdzY3JlZW5SZWFkZXJNb2RlJywgZSA9PiB0aGlzLl9oYW5kbGVTY3JlZW5SZWFkZXJNb2RlT3B0aW9uQ2hhbmdlKGUpKSk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLm92ZXJ2aWV3UnVsZXIud2lkdGgpIHtcbiAgICAgIHRoaXMuX292ZXJ2aWV3UnVsZXJSZW5kZXJlciA9IHRoaXMuX3JlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE92ZXJ2aWV3UnVsZXJSZW5kZXJlciwgdGhpcy5fdmlld3BvcnRFbGVtZW50LCB0aGlzLnNjcmVlbkVsZW1lbnQpKTtcbiAgICB9XG4gICAgdGhpcy5vcHRpb25zU2VydmljZS5vblNwZWNpZmljT3B0aW9uQ2hhbmdlKCdvdmVydmlld1J1bGVyJywgdmFsdWUgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9vdmVydmlld1J1bGVyUmVuZGVyZXIgJiYgdmFsdWUgJiYgdGhpcy5fdmlld3BvcnRFbGVtZW50ICYmIHRoaXMuc2NyZWVuRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9vdmVydmlld1J1bGVyUmVuZGVyZXIgPSB0aGlzLl9yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShPdmVydmlld1J1bGVyUmVuZGVyZXIsIHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwgdGhpcy5zY3JlZW5FbGVtZW50KSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgLy8gTWVhc3VyZSB0aGUgY2hhcmFjdGVyIHNpemVcbiAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpO1xuXG4gICAgLy8gU2V0dXAgbG9vcCB0aGF0IGRyYXdzIHRvIHNjcmVlblxuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcblxuICAgIC8vIEluaXRpYWxpemUgZ2xvYmFsIGFjdGlvbnMgdGhhdCBuZWVkIHRvIGJlIHRha2VuIG9uIHRoZSBkb2N1bWVudC5cbiAgICB0aGlzLl9pbml0R2xvYmFsKCk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIG1vdXNlIGV2ZW50cyBhbmQgdHJhbnNsYXRlXG4gICAgLy8gdGhlbSBpbnRvIHRlcm1pbmFsIG1vdXNlIHByb3RvY29scy5cbiAgICB0aGlzLmJpbmRNb3VzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfY3JlYXRlUmVuZGVyZXIoKTogSVJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRG9tUmVuZGVyZXIsIHRoaXMsIHRoaXMuX2RvY3VtZW50ISwgdGhpcy5lbGVtZW50ISwgdGhpcy5zY3JlZW5FbGVtZW50ISwgdGhpcy5fdmlld3BvcnRFbGVtZW50ISwgdGhpcy5faGVscGVyQ29udGFpbmVyISwgdGhpcy5saW5raWZpZXIhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCaW5kIGNlcnRhaW4gbW91c2UgZXZlbnRzIHRvIHRoZSB0ZXJtaW5hbC5cbiAgICogQnkgZGVmYXVsdCBvbmx5IDMgYnV0dG9uICsgd2hlZWwgdXAvZG93biBpcyBhdGl2YXRlZC4gRm9yIGhpZ2hlciBidXR0b25zXG4gICAqIG5vIG1vdXNlIHJlcG9ydCB3aWxsIGJlIGNyZWF0ZWQuIFR5cGljYWxseSB0aGUgc3RhbmRhcmQgYWN0aW9ucyB3aWxsIGJlIGFjdGl2ZS5cbiAgICpcbiAgICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyBub3QgdG8gZW5hYmxlIHN1cHBvcnQgZm9yIGhpZ2hlciBidXR0b25zL3doZWVsOlxuICAgKiAtIEJ1dHRvbiA0IGFuZCA1IGFyZSB0eXBpY2FsbHkgdXNlZCBmb3IgaGlzdG9yeSBiYWNrIGFuZCBmb3J3YXJkIG5hdmlnYXRpb24sXG4gICAqICAgdGhlcmUgaXMgbm8gc3RyYWlnaHQgZm9yd2FyZCB3YXkgdG8gc3VwcmVzcy9pbnRlcmNlcHQgdGhvc2Ugc3RhbmRhcmQgYWN0aW9ucy5cbiAgICogLSBTdXBwb3J0IGZvciBoaWdoZXIgYnV0dG9ucyBkb2VzIG5vdCB3b3JrIGluIHNvbWUgcGxhdGZvcm0vYnJvd3NlciBjb21iaW5hdGlvbnMuXG4gICAqIC0gTGVmdC9yaWdodCB3aGVlbCB3YXMgbm90IHRlc3RlZC5cbiAgICogLSBFbXVsYXRvcnMgdmFyeSBpbiBtb3VzZSBidXR0b24gc3VwcG9ydCwgdHlwaWNhbGx5IG9ubHkgMyBidXR0b25zIGFuZFxuICAgKiAgIHdoZWVsIHVwL2Rvd24gd29yayByZWxpYWJsZS5cbiAgICpcbiAgICogVE9ETzogTW92ZSBtb3VzZSBldmVudCBjb2RlIGludG8gaXRzIG93biBmaWxlLlxuICAgKi9cbiAgcHVibGljIGJpbmRNb3VzZSgpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBlbCA9IHRoaXMuZWxlbWVudCE7XG5cbiAgICAvLyBzZW5kIGV2ZW50IHRvIENvcmVNb3VzZVNlcnZpY2VcbiAgICBmdW5jdGlvbiBzZW5kRXZlbnQoZXY6IE1vdXNlRXZlbnQgfCBXaGVlbEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAvLyBnZXQgbW91c2UgY29vcmRpbmF0ZXNcbiAgICAgIGNvbnN0IHBvcyA9IHNlbGYuX21vdXNlU2VydmljZSEuZ2V0TW91c2VSZXBvcnRDb29yZHMoZXYsIHNlbGYuc2NyZWVuRWxlbWVudCEpO1xuICAgICAgaWYgKCFwb3MpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsZXQgYnV0OiBDb3JlTW91c2VCdXR0b247XG4gICAgICBsZXQgYWN0aW9uOiBDb3JlTW91c2VBY3Rpb24gfCB1bmRlZmluZWQ7XG4gICAgICBzd2l0Y2ggKChldiBhcyBhbnkpLm92ZXJyaWRlVHlwZSB8fCBldi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ21vdXNlbW92ZSc6XG4gICAgICAgICAgYWN0aW9uID0gQ29yZU1vdXNlQWN0aW9uLk1PVkU7XG4gICAgICAgICAgaWYgKGV2LmJ1dHRvbnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gYnV0dG9ucyBpcyBub3Qgc3VwcG9ydGVkIG9uIG1hY09TLCB0cnkgdG8gZ2V0IGEgdmFsdWUgZnJvbSBidXR0b24gaW5zdGVhZFxuICAgICAgICAgICAgYnV0ID0gQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgICBpZiAoZXYuYnV0dG9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgYnV0ID0gZXYuYnV0dG9uIDwgMyA/IGV2LmJ1dHRvbiA6IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhY2NvcmRpbmcgdG8gTUROIGJ1dHRvbnMgb25seSByZXBvcnRzIHVwIHRvIGJ1dHRvbiA1IChBVVgyKVxuICAgICAgICAgICAgYnV0ID0gZXYuYnV0dG9ucyAmIDEgPyBDb3JlTW91c2VCdXR0b24uTEVGVCA6XG4gICAgICAgICAgICAgIGV2LmJ1dHRvbnMgJiA0ID8gQ29yZU1vdXNlQnV0dG9uLk1JRERMRSA6XG4gICAgICAgICAgICAgICAgZXYuYnV0dG9ucyAmIDIgPyBDb3JlTW91c2VCdXR0b24uUklHSFQgOlxuICAgICAgICAgICAgICAgICAgQ29yZU1vdXNlQnV0dG9uLk5PTkU7IC8vIGZhbGxiYWNrIHRvIE5PTkVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdXNldXAnOlxuICAgICAgICAgIGFjdGlvbiA9IENvcmVNb3VzZUFjdGlvbi5VUDtcbiAgICAgICAgICBidXQgPSBldi5idXR0b24gPCAzID8gZXYuYnV0dG9uIDogQ29yZU1vdXNlQnV0dG9uLk5PTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vdXNlZG93bic6XG4gICAgICAgICAgYWN0aW9uID0gQ29yZU1vdXNlQWN0aW9uLkRPV047XG4gICAgICAgICAgYnV0ID0gZXYuYnV0dG9uIDwgMyA/IGV2LmJ1dHRvbiA6IENvcmVNb3VzZUJ1dHRvbi5OT05FO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd3aGVlbCc6XG4gICAgICAgICAgaWYgKHNlbGYuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyICYmIHNlbGYuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyKGV2IGFzIFdoZWVsRXZlbnQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkZWx0YVkgPSAoZXYgYXMgV2hlZWxFdmVudCkuZGVsdGFZO1xuICAgICAgICAgIGlmIChkZWx0YVkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgbGluZXMgPSBzZWxmLmNvcmVNb3VzZVNlcnZpY2UuY29uc3VtZVdoZWVsRXZlbnQoXG4gICAgICAgICAgICBldiBhcyBXaGVlbEV2ZW50LFxuICAgICAgICAgICAgc2VsZi5fcmVuZGVyU2VydmljZT8uZGltZW5zaW9ucz8uZGV2aWNlPy5jZWxsPy5oZWlnaHQsXG4gICAgICAgICAgICBzZWxmLl9jb3JlQnJvd3NlclNlcnZpY2U/LmRwclxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKGxpbmVzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbiA9IGRlbHRhWSA8IDAgPyBDb3JlTW91c2VBY3Rpb24uVVAgOiBDb3JlTW91c2VBY3Rpb24uRE9XTjtcbiAgICAgICAgICBidXQgPSBDb3JlTW91c2VCdXR0b24uV0hFRUw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gZG9udCBoYW5kbGUgb3RoZXIgZXZlbnQgdHlwZXMgYnkgYWNjaWRlbnRcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIGV4aXQgaWYgd2UgY2Fubm90IGRldGVybWluZSB2YWxpZCBidXR0b24vYWN0aW9uIHZhbHVlc1xuICAgICAgLy8gZG8gbm90aGluZyBmb3IgaGlnaGVyIGJ1dHRvbnMgdGhhbiB3aGVlbFxuICAgICAgaWYgKGFjdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGJ1dCA9PT0gdW5kZWZpbmVkIHx8IGJ1dCA+IENvcmVNb3VzZUJ1dHRvbi5XSEVFTCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZWxmLmNvcmVNb3VzZVNlcnZpY2UudHJpZ2dlck1vdXNlRXZlbnQoe1xuICAgICAgICBjb2w6IHBvcy5jb2wsXG4gICAgICAgIHJvdzogcG9zLnJvdyxcbiAgICAgICAgeDogcG9zLngsXG4gICAgICAgIHk6IHBvcy55LFxuICAgICAgICBidXR0b246IGJ1dCxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICBjdHJsOiBldi5jdHJsS2V5LFxuICAgICAgICBhbHQ6IGV2LmFsdEtleSxcbiAgICAgICAgc2hpZnQ6IGV2LnNoaWZ0S2V5XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBsaXN0ZW5lciBzdGF0ZSBoYW5kbGluZy5cbiAgICAgKiBXZSBsaXN0ZW4gdG8gdGhlIG9uUHJvdG9jb2xDaGFuZ2UgZXZlbnQgb2YgQ29yZU1vdXNlU2VydmljZSBhbmQgcHV0XG4gICAgICogcmVxdWVzdGVkIGxpc3RlbmVycyBpbiBgcmVxdWVzdGVkRXZlbnRzYC4gV2l0aCB0aGlzIHRoZSBsaXN0ZW5lcnNcbiAgICAgKiBoYXZlIGFsbCBiaXRzIHRvIGRvIHRoZSBldmVudCBsaXN0ZW5lciBqdWdnbGluZy5cbiAgICAgKiBOb3RlOiAnbW91c2Vkb3duJyBjdXJyZW50bHkgaXMgXCJhbHdheXMgb25cIiBhbmQgbm90IG1hbmFnZWRcbiAgICAgKiBieSBvblByb3RvY29sQ2hhbmdlLlxuICAgICAqL1xuICAgIGNvbnN0IHJlcXVlc3RlZEV2ZW50czogeyBba2V5OiBzdHJpbmddOiAoKGV2OiBNb3VzZUV2ZW50IHwgV2hlZWxFdmVudCkgPT4gdm9pZCkgfCBudWxsIH0gPSB7XG4gICAgICBtb3VzZXVwOiBudWxsLFxuICAgICAgd2hlZWw6IG51bGwsXG4gICAgICBtb3VzZWRyYWc6IG51bGwsXG4gICAgICBtb3VzZW1vdmU6IG51bGxcbiAgICB9O1xuICAgIGNvbnN0IGV2ZW50TGlzdGVuZXJzOiB7IFtrZXk6IHN0cmluZ106IChldjogYW55KSA9PiB2b2lkIHwgYm9vbGVhbiB9ID0ge1xuICAgICAgbW91c2V1cDogKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIGlmICghZXYuYnV0dG9ucykge1xuICAgICAgICAgIC8vIGlmIG5vIG90aGVyIGJ1dHRvbiBpcyBoZWxkIHJlbW92ZSBnbG9iYWwgaGFuZGxlcnNcbiAgICAgICAgICB0aGlzLl9kb2N1bWVudCEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwISk7XG4gICAgICAgICAgaWYgKHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcpIHtcbiAgICAgICAgICAgIHRoaXMuX2RvY3VtZW50IS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIH0sXG4gICAgICB3aGVlbDogKGV2OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldiwgdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgbW91c2VkcmFnOiAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgLy8gZGVhbCBvbmx5IHdpdGggbW92ZSB3aGlsZSBhIGJ1dHRvbiBpcyBoZWxkXG4gICAgICAgIGlmIChldi5idXR0b25zKSB7XG4gICAgICAgICAgc2VuZEV2ZW50KGV2KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1vdXNlbW92ZTogKGV2OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIC8vIGRlYWwgb25seSB3aXRoIG1vdmUgd2l0aG91dCBhbnkgYnV0dG9uXG4gICAgICAgIGlmICghZXYuYnV0dG9ucykge1xuICAgICAgICAgIHNlbmRFdmVudChldik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX3JlZ2lzdGVyKHRoaXMuY29yZU1vdXNlU2VydmljZS5vblByb3RvY29sQ2hhbmdlKGV2ZW50cyA9PiB7XG4gICAgICAvLyBhcHBseSBnbG9iYWwgY2hhbmdlcyBvbiBldmVudHNcbiAgICAgIGlmIChldmVudHMpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sb2dMZXZlbCA9PT0gJ2RlYnVnJykge1xuICAgICAgICAgIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ0JpbmRpbmcgdG8gbW91c2UgZXZlbnRzOicsIHRoaXMuY29yZU1vdXNlU2VydmljZS5leHBsYWluRXZlbnRzKGV2ZW50cykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudCEuY2xhc3NMaXN0LmFkZCgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIS5kaXNhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdVbmJpbmRpbmcgZnJvbSBtb3VzZSBldmVudHMuJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudCEuY2xhc3NMaXN0LnJlbW92ZSgnZW5hYmxlLW1vdXNlLWV2ZW50cycpO1xuICAgICAgICB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlIS5lbmFibGUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWRkL3JlbW92ZSBoYW5kbGVycyBmcm9tIHJlcXVlc3RlZEV2ZW50c1xuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuTU9WRSkpIHtcbiAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSEpO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMubW91c2Vtb3ZlID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXJlcXVlc3RlZEV2ZW50cy5tb3VzZW1vdmUpIHtcbiAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZlbnRMaXN0ZW5lcnMubW91c2Vtb3ZlKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNlbW92ZSA9IGV2ZW50TGlzdGVuZXJzLm1vdXNlbW92ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEoZXZlbnRzICYgQ29yZU1vdXNlRXZlbnRUeXBlLldIRUVMKSkge1xuICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHJlcXVlc3RlZEV2ZW50cy53aGVlbCEpO1xuICAgICAgICByZXF1ZXN0ZWRFdmVudHMud2hlZWwgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLndoZWVsKSB7XG4gICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnRMaXN0ZW5lcnMud2hlZWwsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy53aGVlbCA9IGV2ZW50TGlzdGVuZXJzLndoZWVsO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuVVApKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50IS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgcmVxdWVzdGVkRXZlbnRzLm1vdXNldXAhKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNldXAgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghcmVxdWVzdGVkRXZlbnRzLm1vdXNldXApIHtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNldXAgPSBldmVudExpc3RlbmVycy5tb3VzZXVwO1xuICAgICAgfVxuXG4gICAgICBpZiAoIShldmVudHMgJiBDb3JlTW91c2VFdmVudFR5cGUuRFJBRykpIHtcbiAgICAgICAgdGhpcy5fZG9jdW1lbnQhLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWchKTtcbiAgICAgICAgcmVxdWVzdGVkRXZlbnRzLm1vdXNlZHJhZyA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKCFyZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKSB7XG4gICAgICAgIHJlcXVlc3RlZEV2ZW50cy5tb3VzZWRyYWcgPSBldmVudExpc3RlbmVycy5tb3VzZWRyYWc7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIC8vIGZvcmNlIGluaXRpYWwgb25Qcm90b2NvbENoYW5nZSBzbyB3ZSBkb250IG1pc3MgZWFybHkgbW91c2UgcmVxdWVzdHNcbiAgICB0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wgPSB0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w7XG5cbiAgICAvKipcbiAgICAgKiBcIkFsd2F5cyBvblwiIGV2ZW50IGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWwsICdtb3VzZWRvd24nLCAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmZvY3VzKCk7XG5cbiAgICAgIC8vIERvbid0IHNlbmQgdGhlIG1vdXNlIGJ1dHRvbiB0byB0aGUgcHR5IGlmIG1vdXNlIGV2ZW50cyBhcmUgZGlzYWJsZWQgb3JcbiAgICAgIC8vIGlmIHRoZSBzZWxlY3Rpb24gbWFuYWdlciBpcyBoYXZpbmcgc2VsZWN0aW9uIGZvcmNlZCAoaWUuIGEgbW9kaWZpZXIgaXNcbiAgICAgIC8vIGhlbGQpLlxuICAgICAgaWYgKCF0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUgfHwgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEuc2hvdWxkRm9yY2VTZWxlY3Rpb24oZXYpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgc2VuZEV2ZW50KGV2KTtcblxuICAgICAgLy8gUmVnaXN0ZXIgYWRkaXRpb25hbCBnbG9iYWwgaGFuZGxlcnMgd2hpY2ggc2hvdWxkIGtlZXAgcmVwb3J0aW5nIG91dHNpZGVcbiAgICAgIC8vIG9mIHRoZSB0ZXJtaW5hbCBlbGVtZW50LlxuICAgICAgLy8gTm90ZTogT3RoZXIgZW11bGF0b3JzIGFsc28gZG8gdGhpcyBmb3IgJ21vdXNlZG93bicgd2hpbGUgYSBidXR0b25cbiAgICAgIC8vIGlzIGhlbGQsIHdlIGN1cnJlbnRseSBsaW1pdCAnbW91c2Vkb3duJyB0byB0aGUgdGVybWluYWwgb25seS5cbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMubW91c2V1cCkge1xuICAgICAgICB0aGlzLl9kb2N1bWVudCEuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlcXVlc3RlZEV2ZW50cy5tb3VzZXVwKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50IS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCByZXF1ZXN0ZWRFdmVudHMubW91c2VkcmFnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKGV2KTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLl9yZWdpc3RlcihhZGREaXNwb3NhYmxlTGlzdGVuZXIoZWwsICd3aGVlbCcsIChldjogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgLy8gZG8gbm90aGluZywgaWYgYXBwIHNpZGUgaGFuZGxlcyB3aGVlbCBpdHNlbGZcbiAgICAgIGlmIChyZXF1ZXN0ZWRFdmVudHMud2hlZWwpIHJldHVybjtcblxuICAgICAgaWYgKHRoaXMuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyKGV2KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuYnVmZmVyLmhhc1Njcm9sbGJhY2spIHtcbiAgICAgICAgLy8gQ29udmVydCB3aGVlbCBldmVudHMgaW50byB1cC9kb3duIGV2ZW50cyB3aGVuIHRoZSBidWZmZXIgZG9lcyBub3QgaGF2ZSBzY3JvbGxiYWNrLCB0aGlzXG4gICAgICAgIC8vIGVuYWJsZXMgc2Nyb2xsaW5nIGluIGFwcHMgaG9zdGVkIGluIHRoZSBhbHQgYnVmZmVyIHN1Y2ggYXMgdmltIG9yIHRtdXggZXZlbiB3aGVuIG1vdXNlXG4gICAgICAgIC8vIGV2ZW50cyBhcmUgbm90IGVuYWJsZWQuXG4gICAgICAgIC8vIFRoaXMgdXNlZCBpbXBsZW1lbnRhdGlvbiB1c2VkIGdldCB0aGUgYWN0dWFsIGxpbmVzL3BhcnRpYWwgbGluZXMgc2Nyb2xsZWQgZnJvbSB0aGVcbiAgICAgICAgLy8gdmlld3BvcnQgYnV0IHNpbmNlIG1vdmluZyB0byB0aGUgbmV3IHZpZXdwb3J0IGltcGxlbWVudGF0aW9uIGhhcyBiZWVuIHNpbXBsaWZpZWQgdG9cbiAgICAgICAgLy8gc2ltcGx5IHNlbmQgYSBzaW5nbGUgdXAgb3IgZG93biBzZXF1ZW5jZS5cblxuICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3Mgbm8gdmVydGljYWwgc2Nyb2xsXG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IChldiBhcyBXaGVlbEV2ZW50KS5kZWx0YVk7XG4gICAgICAgIGlmIChkZWx0YVkgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsaW5lcyA9IHNlbGYuY29yZU1vdXNlU2VydmljZS5jb25zdW1lV2hlZWxFdmVudChcbiAgICAgICAgICBldiBhcyBXaGVlbEV2ZW50LFxuICAgICAgICAgIHNlbGYuX3JlbmRlclNlcnZpY2U/LmRpbWVuc2lvbnM/LmRldmljZT8uY2VsbD8uaGVpZ2h0LFxuICAgICAgICAgIHNlbGYuX2NvcmVCcm93c2VyU2VydmljZT8uZHByXG4gICAgICAgICk7XG4gICAgICAgIGlmIChsaW5lcyA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldiwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb25zdHJ1Y3QgYW5kIHNlbmQgc2VxdWVuY2VzXG4gICAgICAgIGNvbnN0IHNlcXVlbmNlID0gQzAuRVNDICsgKHRoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyA/ICdPJyA6ICdbJykgKyAoZXYuZGVsdGFZIDwgMCA/ICdBJyA6ICdCJyk7XG4gICAgICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzZXF1ZW5jZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldiwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSwgeyBwYXNzaXZlOiBmYWxzZSB9KSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUZWxscyB0aGUgcmVuZGVyZXIgdG8gcmVmcmVzaCB0ZXJtaW5hbCBjb250ZW50IGJldHdlZW4gdHdvIHJvd3MgKGluY2x1c2l2ZSkgYXQgdGhlIG5leHRcbiAgICogb3Bwb3J0dW5pdHkuXG4gICAqIEBwYXJhbSBzdGFydCBUaGUgcm93IHRvIHN0YXJ0IGZyb20gKGJldHdlZW4gMCBhbmQgdGhpcy5yb3dzIC0gMSkuXG4gICAqIEBwYXJhbSBlbmQgVGhlIHJvdyB0byBlbmQgYXQgKGJldHdlZW4gc3RhcnQgYW5kIHRoaXMucm93cyAtIDEpLlxuICAgKi9cbiAgcHVibGljIHJlZnJlc2goc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9yZW5kZXJTZXJ2aWNlPy5yZWZyZXNoUm93cyhzdGFydCwgZW5kKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2UgdGhlIGN1cnNvciBzdHlsZSBmb3IgZGlmZmVyZW50IHNlbGVjdGlvbiBtb2Rlc1xuICAgKi9cbiAgcHVibGljIHVwZGF0ZUN1cnNvclN0eWxlKGV2OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPy5zaG91bGRDb2x1bW5TZWxlY3QoZXYpKSB7XG4gICAgICB0aGlzLmVsZW1lbnQhLmNsYXNzTGlzdC5hZGQoJ2NvbHVtbi1zZWxlY3QnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbGVtZW50IS5jbGFzc0xpc3QucmVtb3ZlKCdjb2x1bW4tc2VsZWN0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIGN1cnNvciBlbGVtZW50XG4gICAqL1xuICBwcml2YXRlIF9zaG93Q3Vyc29yKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkKSB7XG4gICAgICB0aGlzLmNvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksIHRoaXMuYnVmZmVyLnkpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhkaXNwOiBudW1iZXIsIHN1cHByZXNzU2Nyb2xsRXZlbnQ/OiBib29sZWFuKTogdm9pZCB7XG4gICAgLy8gQWxsIHNjcm9sbExpbmVzIG1ldGhvZHMgbmVlZCB0byBnbyB2aWEgdGhlIHZpZXdwb3J0IGluIG9yZGVyIHRvIHN1cHBvcnQgc21vb3RoIHNjcm9sbFxuICAgIGlmICh0aGlzLl92aWV3cG9ydCkge1xuICAgICAgdGhpcy5fdmlld3BvcnQuc2Nyb2xsTGluZXMoZGlzcCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyLnNjcm9sbExpbmVzKGRpc3AsIHN1cHByZXNzU2Nyb2xsRXZlbnQpO1xuICAgIH1cbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gIH1cblxuICBwdWJsaWMgc2Nyb2xsUGFnZXMocGFnZUNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnNjcm9sbExpbmVzKHBhZ2VDb3VudCAqICh0aGlzLnJvd3MgLSAxKSk7XG4gIH1cblxuICBwdWJsaWMgc2Nyb2xsVG9Ub3AoKTogdm9pZCB7XG4gICAgdGhpcy5zY3JvbGxMaW5lcygtdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApO1xuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKGRpc2FibGVTbW9vdGhTY3JvbGw/OiBib29sZWFuKTogdm9pZCB7XG4gICAgaWYgKGRpc2FibGVTbW9vdGhTY3JvbGwgJiYgdGhpcy5fdmlld3BvcnQpIHtcbiAgICAgIHRoaXMuX3ZpZXdwb3J0LnNjcm9sbFRvTGluZSh0aGlzLmJ1ZmZlci55YmFzZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2Nyb2xsTGluZXModGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UgLSB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNjcm9sbFRvTGluZShsaW5lOiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCBzY3JvbGxBbW91bnQgPSBsaW5lIC0gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7XG4gICAgaWYgKHNjcm9sbEFtb3VudCAhPT0gMCkge1xuICAgICAgdGhpcy5zY3JvbGxMaW5lcyhzY3JvbGxBbW91bnQpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBwYXN0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBwYXN0ZShkYXRhLCB0aGlzLnRleHRhcmVhISwgdGhpcy5jb3JlU2VydmljZSwgdGhpcy5vcHRpb25zU2VydmljZSk7XG4gIH1cblxuICBwdWJsaWMgYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGN1c3RvbUtleUV2ZW50SGFuZGxlcjogQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKTogdm9pZCB7XG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuICB9XG5cbiAgcHVibGljIGF0dGFjaEN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyKGN1c3RvbVdoZWVsRXZlbnRIYW5kbGVyOiBDdXN0b21XaGVlbEV2ZW50SGFuZGxlcik6IHZvaWQge1xuICAgIHRoaXMuX2N1c3RvbVdoZWVsRXZlbnRIYW5kbGVyID0gY3VzdG9tV2hlZWxFdmVudEhhbmRsZXI7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJMaW5rUHJvdmlkZXIobGlua1Byb3ZpZGVyOiBJTGlua1Byb3ZpZGVyKTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9saW5rUHJvdmlkZXJTZXJ2aWNlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGxpbmtQcm92aWRlcik7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoaGFuZGxlcjogQ2hhcmFjdGVySm9pbmVySGFuZGxlcik6IG51bWJlciB7XG4gICAgaWYgKCF0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0Jyk7XG4gICAgfVxuICAgIGNvbnN0IGpvaW5lcklkID0gdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5yZWdpc3RlcihoYW5kbGVyKTtcbiAgICB0aGlzLnJlZnJlc2goMCwgdGhpcy5yb3dzIC0gMSk7XG4gICAgcmV0dXJuIGpvaW5lcklkO1xuICB9XG5cbiAgcHVibGljIGRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoam9pbmVySWQ6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUZXJtaW5hbCBtdXN0IGJlIG9wZW5lZCBmaXJzdCcpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5kZXJlZ2lzdGVyKGpvaW5lcklkKSkge1xuICAgICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWFya2VycygpOiBJTWFya2VyW10ge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5tYXJrZXJzO1xuICB9XG5cbiAgcHVibGljIHJlZ2lzdGVyTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlcik6IElNYXJrZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5hZGRNYXJrZXIodGhpcy5idWZmZXIueWJhc2UgKyB0aGlzLmJ1ZmZlci55ICsgY3Vyc29yWU9mZnNldCk7XG4gIH1cblxuICBwdWJsaWMgcmVnaXN0ZXJEZWNvcmF0aW9uKGRlY29yYXRpb25PcHRpb25zOiBJRGVjb3JhdGlvbk9wdGlvbnMpOiBJRGVjb3JhdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLnJlZ2lzdGVyRGVjb3JhdGlvbihkZWNvcmF0aW9uT3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB3aGV0aGVyIHRoZSB0ZXJtaW5hbCBoYXMgYW4gYWN0aXZlIHNlbGVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBoYXNTZWxlY3Rpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGlvblNlcnZpY2UgPyB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbiA6IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdHMgdGV4dCB3aXRoaW4gdGhlIHRlcm1pbmFsLlxuICAgKiBAcGFyYW0gY29sdW1uIFRoZSBjb2x1bW4gdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuLlxuICAgKiBAcGFyYW0gcm93IFRoZSByb3cgdGhlIHNlbGVjdGlvbiBzdGFydHMgYXQuXG4gICAqIEBwYXJhbSBsZW5ndGggVGhlIGxlbmd0aCBvZiB0aGUgc2VsZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIHNlbGVjdChjb2x1bW46IG51bWJlciwgcm93OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZSEuc2V0U2VsZWN0aW9uKGNvbHVtbiwgcm93LCBsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHRlcm1pbmFsJ3MgY3VycmVudCBzZWxlY3Rpb24sIHRoaXMgaXMgdXNlZnVsIGZvciBpbXBsZW1lbnRpbmcgY29weVxuICAgKiBiZWhhdmlvciBvdXRzaWRlIG9mIHh0ZXJtLmpzLlxuICAgKi9cbiAgcHVibGljIGdldFNlbGVjdGlvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlID8gdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0IDogJyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uUG9zaXRpb24oKTogSUJ1ZmZlclJhbmdlIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX3NlbGVjdGlvblNlcnZpY2UgfHwgIXRoaXMuX3NlbGVjdGlvblNlcnZpY2UuaGFzU2VsZWN0aW9uKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzdGFydDoge1xuICAgICAgICB4OiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblN0YXJ0IVswXSxcbiAgICAgICAgeTogdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydCFbMV1cbiAgICAgIH0sXG4gICAgICBlbmQ6IHtcbiAgICAgICAgeDogdGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25FbmQhWzBdLFxuICAgICAgICB5OiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZCFbMV1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyB0aGUgY3VycmVudCB0ZXJtaW5hbCBzZWxlY3Rpb24uXG4gICAqL1xuICBwdWJsaWMgY2xlYXJTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZT8uY2xlYXJTZWxlY3Rpb24oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3RzIGFsbCB0ZXh0IHdpdGhpbiB0aGUgdGVybWluYWwuXG4gICAqL1xuICBwdWJsaWMgc2VsZWN0QWxsKCk6IHZvaWQge1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnNlbGVjdEFsbCgpO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdExpbmVzKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fc2VsZWN0aW9uU2VydmljZT8uc2VsZWN0TGluZXMoc3RhcnQsIGVuZCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEga2V5ZG93biBbS2V5Ym9hcmRFdmVudF0uXG4gICAqXG4gICAqIFtLZXlib2FyZEV2ZW50XTogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vS2V5Ym9hcmRFdmVudFxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG4gICAgdGhpcy5fa2V5RG93bkhhbmRsZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9rZXlEb3duU2VlbiA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldmVudCkgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWdub3JlIGNvbXBvc2luZyB3aXRoIEFsdCBrZXkgb24gTWFjIHdoZW4gbWFjT3B0aW9uSXNNZXRhIGlzIGVuYWJsZWRcbiAgICBjb25zdCBzaG91bGRJZ25vcmVDb21wb3NpdGlvbiA9IHRoaXMuYnJvd3Nlci5pc01hYyAmJiB0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhICYmIGV2ZW50LmFsdEtleTtcblxuICAgIGlmICghc2hvdWxkSWdub3JlQ29tcG9zaXRpb24gJiYgIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyIS5rZXlkb3duKGV2ZW50KSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zY3JvbGxPblVzZXJJbnB1dCAmJiB0aGlzLmJ1ZmZlci55YmFzZSAhPT0gdGhpcy5idWZmZXIueWRpc3ApIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0JvdHRvbSh0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXNob3VsZElnbm9yZUNvbXBvc2l0aW9uICYmIChldmVudC5rZXkgPT09ICdEZWFkJyB8fCBldmVudC5rZXkgPT09ICdBbHRHcmFwaCcpKSB7XG4gICAgICB0aGlzLl91bnByb2Nlc3NlZERlYWRLZXkgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdCA9IGV2YWx1YXRlS2V5Ym9hcmRFdmVudChldmVudCwgdGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzLCB0aGlzLmJyb3dzZXIuaXNNYWMsIHRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEpO1xuXG4gICAgdGhpcy51cGRhdGVDdXJzb3JTdHlsZShldmVudCk7XG5cbiAgICBpZiAocmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX0RPV04gfHwgcmVzdWx0LnR5cGUgPT09IEtleWJvYXJkUmVzdWx0VHlwZS5QQUdFX1VQKSB7XG4gICAgICBjb25zdCBzY3JvbGxDb3VudCA9IHRoaXMucm93cyAtIDE7XG4gICAgICB0aGlzLnNjcm9sbExpbmVzKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuUEFHRV9VUCA/IC1zY3JvbGxDb3VudCA6IHNjcm9sbENvdW50KTtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChldmVudCwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC50eXBlID09PSBLZXlib2FyZFJlc3VsdFR5cGUuU0VMRUNUX0FMTCkge1xuICAgICAgdGhpcy5zZWxlY3RBbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLCBldmVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChyZXN1bHQuY2FuY2VsKSB7XG4gICAgICAvLyBUaGUgZXZlbnQgaXMgY2FuY2VsZWQgYXQgdGhlIGVuZCBhbHJlYWR5LCBpcyB0aGlzIG5lY2Vzc2FyeT9cbiAgICAgIHRoaXMuY2FuY2VsKGV2ZW50LCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdC5rZXkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEhBQ0s6IFByb2Nlc3MgQS1aIGluIHRoZSBrZXlwcmVzcyBldmVudCB0byBmaXggYW4gaXNzdWUgd2l0aCBtYWNPUyBJTUVzIHdoZXJlIGxvd2VyIGNhc2VcbiAgICAvLyBsZXR0ZXJzIGNhbm5vdCBiZSBpbnB1dCB3aGlsZSBjYXBzIGxvY2sgaXMgb24uXG4gICAgaWYgKGV2ZW50LmtleSAmJiAhZXZlbnQuY3RybEtleSAmJiAhZXZlbnQuYWx0S2V5ICYmICFldmVudC5tZXRhS2V5ICYmIGV2ZW50LmtleS5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChldmVudC5rZXkuY2hhckNvZGVBdCgwKSA+PSA2NSAmJiBldmVudC5rZXkuY2hhckNvZGVBdCgwKSA8PSA5MCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5KSB7XG4gICAgICB0aGlzLl91bnByb2Nlc3NlZERlYWRLZXkgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIElmIGN0cmwrYyBvciBlbnRlciBpcyBiZWluZyBzZW50LCBjbGVhciBvdXQgdGhlIHRleHRhcmVhLiBUaGlzIGlzIGRvbmUgc28gdGhhdCBzY3JlZW4gcmVhZGVyc1xuICAgIC8vIHdpbGwgYW5ub3VuY2UgZGVsZXRlZCBjaGFyYWN0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgMTAwJSBvZiB0aGUgdGltZSBidXQgaXQgc2hvdWxkIGNvdmVyXG4gICAgLy8gbW9zdCBzY2VuYXJpb3MuXG4gICAgaWYgKHJlc3VsdC5rZXkgPT09IEMwLkVUWCB8fCByZXN1bHQua2V5ID09PSBDMC5DUikge1xuICAgICAgdGhpcy50ZXh0YXJlYSEudmFsdWUgPSAnJztcbiAgICB9XG5cbiAgICB0aGlzLl9vbktleS5maXJlKHsga2V5OiByZXN1bHQua2V5LCBkb21FdmVudDogZXZlbnQgfSk7XG4gICAgdGhpcy5fc2hvd0N1cnNvcigpO1xuICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChyZXN1bHQua2V5LCB0cnVlKTtcblxuICAgIC8vIENhbmNlbCBldmVudHMgd2hlbiBub3QgaW4gc2NyZWVuIHJlYWRlciBtb2RlIHNvIGV2ZW50cyBkb24ndCBnZXQgYnViYmxlZCB1cCBhbmQgaGFuZGxlZCBieVxuICAgIC8vIG90aGVyIGxpc3RlbmVycy4gV2hlbiBzY3JlZW4gcmVhZGVyIG1vZGUgaXMgZW5hYmxlZCwgd2UgZG9uJ3QgY2FuY2VsIHRoZW0gKHVubGVzcyBjdHJsIG9yIGFsdFxuICAgIC8vIGlzIGFsc28gZGVwcmVzc2VkKSBzbyB0aGF0IHRoZSBjdXJzb3IgdGV4dGFyZWEgY2FuIGJlIHVwZGF0ZWQsIHdoaWNoIHRyaWdnZXJzIHRoZSBzY3JlZW5cbiAgICAvLyByZWFkZXIgdG8gcmVhZCBpdC5cbiAgICBpZiAoIXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlIHx8IGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwoZXZlbnQsIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuX2tleURvd25IYW5kbGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2lzVGhpcmRMZXZlbFNoaWZ0KGJyb3dzZXI6IElCcm93c2VyLCBldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRoaXJkTGV2ZWxLZXkgPVxuICAgICAgKGJyb3dzZXIuaXNNYWMgJiYgIXRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEgJiYgZXYuYWx0S2V5ICYmICFldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KSB8fFxuICAgICAgKGJyb3dzZXIuaXNXaW5kb3dzICYmIGV2LmFsdEtleSAmJiBldi5jdHJsS2V5ICYmICFldi5tZXRhS2V5KSB8fFxuICAgICAgKGJyb3dzZXIuaXNXaW5kb3dzICYmIGV2LmdldE1vZGlmaWVyU3RhdGUoJ0FsdEdyYXBoJykpO1xuXG4gICAgaWYgKGV2LnR5cGUgPT09ICdrZXlwcmVzcycpIHtcbiAgICAgIHJldHVybiB0aGlyZExldmVsS2V5O1xuICAgIH1cblxuICAgIC8vIERvbid0IGludm9rZSBmb3IgYXJyb3dzLCBwYWdlRG93biwgaG9tZSwgYmFja3NwYWNlLCBldGMuIChvbiBub24ta2V5cHJlc3MgZXZlbnRzKVxuICAgIHJldHVybiB0aGlyZExldmVsS2V5ICYmICghZXYua2V5Q29kZSB8fCBldi5rZXlDb2RlID4gNDcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9rZXlVcChldjogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgIHRoaXMuX2tleURvd25TZWVuID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyICYmIHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF3YXNNb2RpZmllcktleU9ubHlFdmVudChldikpIHtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGV2KTtcbiAgICB0aGlzLl9rZXlQcmVzc0hhbmRsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBrZXlwcmVzcyBldmVudC5cbiAgICogS2V5IFJlc291cmNlczpcbiAgICogICAtIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL0tleWJvYXJkRXZlbnRcbiAgICogQHBhcmFtIGV2IFRoZSBrZXlwcmVzcyBldmVudCB0byBiZSBoYW5kbGVkLlxuICAgKi9cbiAgcHJvdGVjdGVkIF9rZXlQcmVzcyhldjogS2V5Ym9hcmRFdmVudCk6IGJvb2xlYW4ge1xuICAgIGxldCBrZXk7XG5cbiAgICB0aGlzLl9rZXlQcmVzc0hhbmRsZWQgPSBmYWxzZTtcblxuICAgIGlmICh0aGlzLl9rZXlEb3duSGFuZGxlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIgJiYgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGV2KSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLmNhbmNlbChldik7XG5cbiAgICBpZiAoZXYuY2hhckNvZGUpIHtcbiAgICAgIGtleSA9IGV2LmNoYXJDb2RlO1xuICAgIH0gZWxzZSBpZiAoZXYud2hpY2ggPT09IG51bGwgfHwgZXYud2hpY2ggPT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gZXYua2V5Q29kZTtcbiAgICB9IGVsc2UgaWYgKGV2LndoaWNoICE9PSAwICYmIGV2LmNoYXJDb2RlICE9PSAwKSB7XG4gICAgICBrZXkgPSBldi53aGljaDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICgha2V5IHx8IChcbiAgICAgIChldi5hbHRLZXkgfHwgZXYuY3RybEtleSB8fCBldi5tZXRhS2V5KSAmJiAhdGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLCBldilcbiAgICApKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAga2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZShrZXkpO1xuXG4gICAgdGhpcy5fb25LZXkuZmlyZSh7IGtleSwgZG9tRXZlbnQ6IGV2IH0pO1xuICAgIHRoaXMuX3Nob3dDdXJzb3IoKTtcbiAgICB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoa2V5LCB0cnVlKTtcblxuICAgIHRoaXMuX2tleVByZXNzSGFuZGxlZCA9IHRydWU7XG5cbiAgICAvLyBUaGUga2V5IHdhcyBoYW5kbGVkIHNvIGNsZWFyIHRoZSBkZWFkIGtleSBzdGF0ZSwgb3RoZXJ3aXNlIGNlcnRhaW4ga2V5c3Ryb2tlcyBsaWtlIGFycm93XG4gICAgLy8ga2V5cyBjb3VsZCBiZSBpZ25vcmVkXG4gICAgdGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5ID0gZmFsc2U7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYW4gaW5wdXQgZXZlbnQuXG4gICAqIEtleSBSZXNvdXJjZXM6XG4gICAqICAgLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5wdXRFdmVudFxuICAgKiBAcGFyYW0gZXYgVGhlIGlucHV0IGV2ZW50IHRvIGJlIGhhbmRsZWQuXG4gICAqL1xuICBwcm90ZWN0ZWQgX2lucHV0RXZlbnQoZXY6IElucHV0RXZlbnQpOiBib29sZWFuIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgZW1vamkgSU1FcyB3aGVuIHNjcmVlbiByZWFkZXIgbW9kZSBpcyBkaXNhYmxlZCBhcyB0aGUgZXZlbnQgbXVzdCBidWJibGUgdXAgdG9cbiAgICAvLyBzdXBwb3J0IHJlYWRpbmcgb3V0IGNoYXJhY3RlciBpbnB1dCB3aGljaCBjYW4gZG91YmxpbmcgdXAgaW5wdXQgY2hhcmFjdGVyc1xuICAgIC8vIEJhc2VkIG9uIHRoZXNlIGV2ZW50IHRyYWNlczogaHR0cHM6Ly9naXRodWIuY29tL3h0ZXJtanMveHRlcm0uanMvaXNzdWVzLzM2NzlcbiAgICBpZiAoZXYuZGF0YSAmJiBldi5pbnB1dFR5cGUgPT09ICdpbnNlcnRUZXh0JyAmJiAoIWV2LmNvbXBvc2VkIHx8ICF0aGlzLl9rZXlEb3duU2VlbikgJiYgIXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKSB7XG4gICAgICBpZiAodGhpcy5fa2V5UHJlc3NIYW5kbGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGtleSB3YXMgaGFuZGxlZCBzbyBjbGVhciB0aGUgZGVhZCBrZXkgc3RhdGUsIG90aGVyd2lzZSBjZXJ0YWluIGtleXN0cm9rZXMgbGlrZSBhcnJvd1xuICAgICAgLy8ga2V5cyBjb3VsZCBiZSBpZ25vcmVkXG4gICAgICB0aGlzLl91bnByb2Nlc3NlZERlYWRLZXkgPSBmYWxzZTtcblxuICAgICAgY29uc3QgdGV4dCA9IGV2LmRhdGE7XG4gICAgICB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodGV4dCwgdHJ1ZSk7XG5cbiAgICAgIHRoaXMuY2FuY2VsKGV2KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNpemVzIHRoZSB0ZXJtaW5hbC5cbiAgICpcbiAgICogQHBhcmFtIHggVGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIHJlc2l6ZSB0by5cbiAgICogQHBhcmFtIHkgVGhlIG51bWJlciBvZiByb3dzIHRvIHJlc2l6ZSB0by5cbiAgICovXG4gIHB1YmxpYyByZXNpemUoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoeCA9PT0gdGhpcy5jb2xzICYmIHkgPT09IHRoaXMucm93cykge1xuICAgICAgLy8gQ2hlY2sgaWYgd2Ugc3RpbGwgbmVlZCB0byBtZWFzdXJlIHRoZSBjaGFyIHNpemUgKGZpeGVzICM3ODUpLlxuICAgICAgaWYgKHRoaXMuX2NoYXJTaXplU2VydmljZSAmJiAhdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSkge1xuICAgICAgICB0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN1cGVyLnJlc2l6ZSh4LCB5KTtcbiAgfVxuXG4gIHByaXZhdGUgX2FmdGVyUmVzaXplKHg6IG51bWJlciwgeTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY2hhclNpemVTZXJ2aWNlPy5tZWFzdXJlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgdGhlIGVudGlyZSBidWZmZXIsIG1ha2luZyB0aGUgcHJvbXB0IGxpbmUgdGhlIG5ldyBmaXJzdCBsaW5lLlxuICAgKi9cbiAgcHVibGljIGNsZWFyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmJ1ZmZlci55YmFzZSA9PT0gMCAmJiB0aGlzLmJ1ZmZlci55ID09PSAwKSB7XG4gICAgICAvLyBEb24ndCBjbGVhciBpZiBpdCdzIGFscmVhZHkgY2xlYXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIuY2xlYXJBbGxNYXJrZXJzKCk7XG4gICAgdGhpcy5idWZmZXIubGluZXMuc2V0KDAsIHRoaXMuYnVmZmVyLmxpbmVzLmdldCh0aGlzLmJ1ZmZlci55YmFzZSArIHRoaXMuYnVmZmVyLnkpISk7XG4gICAgdGhpcy5idWZmZXIubGluZXMubGVuZ3RoID0gMTtcbiAgICB0aGlzLmJ1ZmZlci55ZGlzcCA9IDA7XG4gICAgdGhpcy5idWZmZXIueWJhc2UgPSAwO1xuICAgIHRoaXMuYnVmZmVyLnkgPSAwO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgIHRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKERFRkFVTFRfQVRUUl9EQVRBKSk7XG4gICAgfVxuICAgIC8vIElNUE9SVEFOVDogRmlyZSBzY3JvbGwgZXZlbnQgYmVmb3JlIHZpZXdwb3J0IGlzIHJlc2V0LiBUaGlzIGVuc3VyZXMgZW1iZWRkZXJzIGdldCB0aGUgY2xlYXJcbiAgICAvLyBzY3JvbGwgZXZlbnQgYW5kIHRoYXQgdGhlIHZpZXdwb3J0J3Mgc3RhdGUgd2lsbCBiZSB2YWxpZCBmb3IgaW1tZWRpYXRlIHdyaXRlcy5cbiAgICB0aGlzLl9vblNjcm9sbC5maXJlKHsgcG9zaXRpb246IHRoaXMuYnVmZmVyLnlkaXNwIH0pO1xuICAgIHRoaXMucmVmcmVzaCgwLCB0aGlzLnJvd3MgLSAxKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0ZXJtaW5hbC5cbiAgICogTm90ZTogQ2FsbGluZyB0aGlzIGRpcmVjdGx5IGZyb20gSlMgaXMgc3luY2hyb25vdXMgYnV0IGRvZXMgbm90IGNsZWFyXG4gICAqIGlucHV0IGJ1ZmZlcnMgYW5kIGRvZXMgbm90IHJlc2V0IHRoZSBwYXJzZXIsIHRodXMgdGhlIHRlcm1pbmFsIHdpbGxcbiAgICogY29udGludWUgdG8gYXBwbHkgcGVuZGluZyBpbnB1dCBkYXRhLlxuICAgKiBJZiB5b3UgbmVlZCBpbiBiYW5kIHJlc2V0IChzeW5jaHJvbm91cyB3aXRoIGlucHV0IGRhdGEpIGNvbnNpZGVyXG4gICAqIHVzaW5nIERFQ1NUUiAoc29mdCByZXNldCwgQ1NJICEgcCkgb3IgUklTIGluc3RlYWQgKGhhcmQgcmVzZXQsIEVTQyBjKS5cbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICAvKipcbiAgICAgKiBTaW5jZSBfc2V0dXAgaGFuZGxlcyBhIGZ1bGwgdGVybWluYWwgY3JlYXRpb24sIHdlIGhhdmUgdG8gY2FycnkgZm9yd2FyZFxuICAgICAqIGEgZmV3IHRoaW5ncyB0aGF0IHNob3VsZCBub3QgcmVzZXQuXG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zLnJvd3MgPSB0aGlzLnJvd3M7XG4gICAgdGhpcy5vcHRpb25zLmNvbHMgPSB0aGlzLmNvbHM7XG4gICAgY29uc3QgY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuXG4gICAgdGhpcy5fc2V0dXAoKTtcbiAgICBzdXBlci5yZXNldCgpO1xuICAgIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/LnJlc2V0KCk7XG4gICAgdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UucmVzZXQoKTtcblxuICAgIC8vIHJlYXR0YWNoXG4gICAgdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyID0gY3VzdG9tS2V5RXZlbnRIYW5kbGVyO1xuXG4gICAgLy8gZG8gYSBmdWxsIHNjcmVlbiByZWZyZXNoXG4gICAgdGhpcy5yZWZyZXNoKDAsIHRoaXMucm93cyAtIDEpO1xuICB9XG5cbiAgcHVibGljIGNsZWFyVGV4dHVyZUF0bGFzKCk6IHZvaWQge1xuICAgIHRoaXMuX3JlbmRlclNlcnZpY2U/LmNsZWFyVGV4dHVyZUF0bGFzKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZXBvcnRGb2N1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5lbGVtZW50Py5jbGFzc0xpc3QuY29udGFpbnMoJ2ZvY3VzJykpIHtcbiAgICAgIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChDMC5FU0MgKyAnW0knKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KEMwLkVTQyArICdbTycpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3JlcG9ydFdpbmRvd3NPcHRpb25zKHR5cGU6IFdpbmRvd3NPcHRpb25zUmVwb3J0VHlwZSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fcmVuZGVyU2VydmljZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX1dJTl9TSVpFX1BJWEVMUzpcbiAgICAgICAgY29uc3QgY2FudmFzV2lkdGggPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy53aWR0aC50b0ZpeGVkKDApO1xuICAgICAgICBjb25zdCBjYW52YXNIZWlnaHQgPSB0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY3NzLmNhbnZhcy5oZWlnaHQudG9GaXhlZCgwKTtcbiAgICAgICAgdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGAke0MwLkVTQ31bNDske2NhbnZhc0hlaWdodH07JHtjYW52YXNXaWR0aH10YCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBXaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX0NFTExfU0laRV9QSVhFTFM6XG4gICAgICAgIGNvbnN0IGNlbGxXaWR0aCA9IHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jc3MuY2VsbC53aWR0aC50b0ZpeGVkKDApO1xuICAgICAgICBjb25zdCBjZWxsSGVpZ2h0ID0gdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNzcy5jZWxsLmhlaWdodC50b0ZpeGVkKDApO1xuICAgICAgICB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoYCR7QzAuRVNDfVs2OyR7Y2VsbEhlaWdodH07JHtjZWxsV2lkdGh9dGApO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBUT0RPOiBSZW1vdmUgY2FuY2VsIGZ1bmN0aW9uIGFuZCBjYW5jZWxFdmVudHMgb3B0aW9uXG4gIHB1YmxpYyBjYW5jZWwoZXY6IE1vdXNlRXZlbnQgfCBXaGVlbEV2ZW50IHwgS2V5Ym9hcmRFdmVudCB8IElucHV0RXZlbnQsIGZvcmNlPzogYm9vbGVhbik6IGJvb2xlYW4gfCB1bmRlZmluZWQge1xuICAgIGlmICghdGhpcy5vcHRpb25zLmNhbmNlbEV2ZW50cyAmJiAhZm9yY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXJzXG4gKi9cblxuZnVuY3Rpb24gd2FzTW9kaWZpZXJLZXlPbmx5RXZlbnQoZXY6IEtleWJvYXJkRXZlbnQpOiBib29sZWFuIHtcbiAgcmV0dXJuIGV2LmtleUNvZGUgPT09IDE2IHx8IC8vIFNoaWZ0XG4gICAgZXYua2V5Q29kZSA9PT0gMTcgfHwgLy8gQ3RybFxuICAgIGV2LmtleUNvZGUgPT09IDE4OyAvLyBBbHRcbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxOSBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB7IElUZXJtaW5hbEFkZG9uLCBJRGlzcG9zYWJsZSwgVGVybWluYWwgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuXG5leHBvcnQgaW50ZXJmYWNlIElMb2FkZWRBZGRvbiB7XG4gIGluc3RhbmNlOiBJVGVybWluYWxBZGRvbjtcbiAgZGlzcG9zZTogKCkgPT4gdm9pZDtcbiAgaXNEaXNwb3NlZDogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEFkZG9uTWFuYWdlciBpbXBsZW1lbnRzIElEaXNwb3NhYmxlIHtcbiAgcHJvdGVjdGVkIF9hZGRvbnM6IElMb2FkZWRBZGRvbltdID0gW107XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuX2FkZG9ucy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGhpcy5fYWRkb25zW2ldLmluc3RhbmNlLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbG9hZEFkZG9uKHRlcm1pbmFsOiBUZXJtaW5hbCwgaW5zdGFuY2U6IElUZXJtaW5hbEFkZG9uKTogdm9pZCB7XG4gICAgY29uc3QgbG9hZGVkQWRkb246IElMb2FkZWRBZGRvbiA9IHtcbiAgICAgIGluc3RhbmNlLFxuICAgICAgZGlzcG9zZTogaW5zdGFuY2UuZGlzcG9zZSxcbiAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLl9hZGRvbnMucHVzaChsb2FkZWRBZGRvbik7XG4gICAgaW5zdGFuY2UuZGlzcG9zZSA9ICgpID0+IHRoaXMuX3dyYXBwZWRBZGRvbkRpc3Bvc2UobG9hZGVkQWRkb24pO1xuICAgIGluc3RhbmNlLmFjdGl2YXRlKHRlcm1pbmFsIGFzIGFueSk7XG4gIH1cblxuICBwcml2YXRlIF93cmFwcGVkQWRkb25EaXNwb3NlKGxvYWRlZEFkZG9uOiBJTG9hZGVkQWRkb24pOiB2b2lkIHtcbiAgICBpZiAobG9hZGVkQWRkb24uaXNEaXNwb3NlZCkge1xuICAgICAgLy8gRG8gbm90aGluZyBpZiBhbHJlYWR5IGRpc3Bvc2VkXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpbmRleCA9IC0xO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fYWRkb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5fYWRkb25zW2ldID09PSBsb2FkZWRBZGRvbikge1xuICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBkaXNwb3NlIGFuIGFkZG9uIHRoYXQgaGFzIG5vdCBiZWVuIGxvYWRlZCcpO1xuICAgIH1cbiAgICBsb2FkZWRBZGRvbi5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICBsb2FkZWRBZGRvbi5kaXNwb3NlLmFwcGx5KGxvYWRlZEFkZG9uLmluc3RhbmNlKTtcbiAgICB0aGlzLl9hZGRvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgQ2VsbERhdGEgfSBmcm9tICdjb21tb24vYnVmZmVyL0NlbGxEYXRhJztcbmltcG9ydCB7IElCdWZmZXJMaW5lLCBJQ2VsbERhdGEgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgSUJ1ZmZlckNlbGwgYXMgSUJ1ZmZlckNlbGxBcGksIElCdWZmZXJMaW5lIGFzIElCdWZmZXJMaW5lQXBpIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcblxuZXhwb3J0IGNsYXNzIEJ1ZmZlckxpbmVBcGlWaWV3IGltcGxlbWVudHMgSUJ1ZmZlckxpbmVBcGkge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9saW5lOiBJQnVmZmVyTGluZSkgeyB9XG5cbiAgcHVibGljIGdldCBpc1dyYXBwZWQoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLl9saW5lLmlzV3JhcHBlZDsgfVxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fbGluZS5sZW5ndGg7IH1cbiAgcHVibGljIGdldENlbGwoeDogbnVtYmVyLCBjZWxsPzogSUJ1ZmZlckNlbGxBcGkpOiBJQnVmZmVyQ2VsbEFwaSB8IHVuZGVmaW5lZCB7XG4gICAgaWYgKHggPCAwIHx8IHggPj0gdGhpcy5fbGluZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKGNlbGwpIHtcbiAgICAgIHRoaXMuX2xpbmUubG9hZENlbGwoeCwgY2VsbCBhcyBJQ2VsbERhdGEpO1xuICAgICAgcmV0dXJuIGNlbGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9saW5lLmxvYWRDZWxsKHgsIG5ldyBDZWxsRGF0YSgpKTtcbiAgfVxuICBwdWJsaWMgdHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0PzogYm9vbGVhbiwgc3RhcnRDb2x1bW4/OiBudW1iZXIsIGVuZENvbHVtbj86IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2xpbmUudHJhbnNsYXRlVG9TdHJpbmcodHJpbVJpZ2h0LCBzdGFydENvbHVtbiwgZW5kQ29sdW1uKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlciBhcyBJQnVmZmVyQXBpLCBJQnVmZmVyTGluZSBhcyBJQnVmZmVyTGluZUFwaSwgSUJ1ZmZlckNlbGwgYXMgSUJ1ZmZlckNlbGxBcGkgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuaW1wb3J0IHsgSUJ1ZmZlciB9IGZyb20gJ2NvbW1vbi9idWZmZXIvVHlwZXMnO1xuaW1wb3J0IHsgQnVmZmVyTGluZUFwaVZpZXcgfSBmcm9tICdjb21tb24vcHVibGljL0J1ZmZlckxpbmVBcGlWaWV3JztcbmltcG9ydCB7IENlbGxEYXRhIH0gZnJvbSAnY29tbW9uL2J1ZmZlci9DZWxsRGF0YSc7XG5cbmV4cG9ydCBjbGFzcyBCdWZmZXJBcGlWaWV3IGltcGxlbWVudHMgSUJ1ZmZlckFwaSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2J1ZmZlcjogSUJ1ZmZlcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogJ25vcm1hbCcgfCAnYWx0ZXJuYXRlJ1xuICApIHsgfVxuXG4gIHB1YmxpYyBpbml0KGJ1ZmZlcjogSUJ1ZmZlcik6IEJ1ZmZlckFwaVZpZXcge1xuICAgIHRoaXMuX2J1ZmZlciA9IGJ1ZmZlcjtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY3Vyc29yWSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnk7IH1cbiAgcHVibGljIGdldCBjdXJzb3JYKCk6IG51bWJlciB7IHJldHVybiB0aGlzLl9idWZmZXIueDsgfVxuICBwdWJsaWMgZ2V0IHZpZXdwb3J0WSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLnlkaXNwOyB9XG4gIHB1YmxpYyBnZXQgYmFzZVkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuX2J1ZmZlci55YmFzZTsgfVxuICBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aDsgfVxuICBwdWJsaWMgZ2V0TGluZSh5OiBudW1iZXIpOiBJQnVmZmVyTGluZUFwaSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgbGluZSA9IHRoaXMuX2J1ZmZlci5saW5lcy5nZXQoeSk7XG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEJ1ZmZlckxpbmVBcGlWaWV3KGxpbmUpO1xuICB9XG4gIHB1YmxpYyBnZXROdWxsQ2VsbCgpOiBJQnVmZmVyQ2VsbEFwaSB7IHJldHVybiBuZXcgQ2VsbERhdGEoKTsgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUJ1ZmZlciBhcyBJQnVmZmVyQXBpLCBJQnVmZmVyTmFtZXNwYWNlIGFzIElCdWZmZXJOYW1lc3BhY2VBcGkgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuaW1wb3J0IHsgQnVmZmVyQXBpVmlldyB9IGZyb20gJ2NvbW1vbi9wdWJsaWMvQnVmZmVyQXBpVmlldyc7XG5pbXBvcnQgeyBJQ29yZVRlcm1pbmFsIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcbmltcG9ydCB7IERpc3Bvc2FibGUgfSBmcm9tICd2cy9iYXNlL2NvbW1vbi9saWZlY3ljbGUnO1xuaW1wb3J0IHsgRW1pdHRlciB9IGZyb20gJ3ZzL2Jhc2UvY29tbW9uL2V2ZW50JztcblxuZXhwb3J0IGNsYXNzIEJ1ZmZlck5hbWVzcGFjZUFwaSBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJQnVmZmVyTmFtZXNwYWNlQXBpIHtcbiAgcHJpdmF0ZSBfbm9ybWFsOiBCdWZmZXJBcGlWaWV3O1xuICBwcml2YXRlIF9hbHRlcm5hdGU6IEJ1ZmZlckFwaVZpZXc7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBfb25CdWZmZXJDaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgRW1pdHRlcjxJQnVmZmVyQXBpPigpKTtcbiAgcHVibGljIHJlYWRvbmx5IG9uQnVmZmVyQ2hhbmdlID0gdGhpcy5fb25CdWZmZXJDaGFuZ2UuZXZlbnQ7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfY29yZTogSUNvcmVUZXJtaW5hbCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fbm9ybWFsID0gbmV3IEJ1ZmZlckFwaVZpZXcodGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbCwgJ25vcm1hbCcpO1xuICAgIHRoaXMuX2FsdGVybmF0ZSA9IG5ldyBCdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQsICdhbHRlcm5hdGUnKTtcbiAgICB0aGlzLl9jb3JlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoKSA9PiB0aGlzLl9vbkJ1ZmZlckNoYW5nZS5maXJlKHRoaXMuYWN0aXZlKSk7XG4gIH1cbiAgcHVibGljIGdldCBhY3RpdmUoKTogSUJ1ZmZlckFwaSB7XG4gICAgaWYgKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmUgPT09IHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpIHsgcmV0dXJuIHRoaXMubm9ybWFsOyB9XG4gICAgaWYgKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmUgPT09IHRoaXMuX2NvcmUuYnVmZmVycy5hbHQpIHsgcmV0dXJuIHRoaXMuYWx0ZXJuYXRlOyB9XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBY3RpdmUgYnVmZmVyIGlzIG5laXRoZXIgbm9ybWFsIG5vciBhbHRlcm5hdGUnKTtcbiAgfVxuICBwdWJsaWMgZ2V0IG5vcm1hbCgpOiBJQnVmZmVyQXBpIHtcbiAgICByZXR1cm4gdGhpcy5fbm9ybWFsLmluaXQodGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbCk7XG4gIH1cbiAgcHVibGljIGdldCBhbHRlcm5hdGUoKTogSUJ1ZmZlckFwaSB7XG4gICAgcmV0dXJuIHRoaXMuX2FsdGVybmF0ZS5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgeyBJUGFyYW1zIH0gZnJvbSAnY29tbW9uL3BhcnNlci9UeXBlcyc7XG5pbXBvcnQgeyBJRGlzcG9zYWJsZSwgSUZ1bmN0aW9uSWRlbnRpZmllciwgSVBhcnNlciB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5pbXBvcnQgeyBJQ29yZVRlcm1pbmFsIH0gZnJvbSAnY29tbW9uL1R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFBhcnNlckFwaSBpbXBsZW1lbnRzIElQYXJzZXIge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9jb3JlOiBJQ29yZVRlcm1pbmFsKSB7IH1cblxuICBwdWJsaWMgcmVnaXN0ZXJDc2lIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBjYWxsYmFjazogKHBhcmFtczogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckNzaUhhbmRsZXIoaWQsIChwYXJhbXM6IElQYXJhbXMpID0+IGNhbGxiYWNrKHBhcmFtcy50b0FycmF5KCkpKTtcbiAgfVxuICBwdWJsaWMgYWRkQ3NpSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChwYXJhbXM6IChudW1iZXIgfCBudW1iZXJbXSlbXSkgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4pOiBJRGlzcG9zYWJsZSB7XG4gICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKGlkLCBjYWxsYmFjayk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyRGNzSGFuZGxlcihpZDogSUZ1bmN0aW9uSWRlbnRpZmllciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcsIHBhcmFtOiAobnVtYmVyIHwgbnVtYmVyW10pW10pID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyRGNzSGFuZGxlcihpZCwgKGRhdGE6IHN0cmluZywgcGFyYW1zOiBJUGFyYW1zKSA9PiBjYWxsYmFjayhkYXRhLCBwYXJhbXMudG9BcnJheSgpKSk7XG4gIH1cbiAgcHVibGljIGFkZERjc0hhbmRsZXIoaWQ6IElGdW5jdGlvbklkZW50aWZpZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nLCBwYXJhbTogKG51bWJlciB8IG51bWJlcltdKVtdKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckRjc0hhbmRsZXIoaWQsIGNhbGxiYWNrKTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckVzY0hhbmRsZXIoaWQsIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBhZGRFc2NIYW5kbGVyKGlkOiBJRnVuY3Rpb25JZGVudGlmaWVyLCBoYW5kbGVyOiAoKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoaWQsIGhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyByZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQ6IG51bWJlciwgY2FsbGJhY2s6IChkYXRhOiBzdHJpbmcpID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+KTogSURpc3Bvc2FibGUge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyT3NjSGFuZGxlcihpZGVudCwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyBhZGRPc2NIYW5kbGVyKGlkZW50OiBudW1iZXIsIGNhbGxiYWNrOiAoZGF0YTogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpc3Rlck9zY0hhbmRsZXIoaWRlbnQsIGNhbGxiYWNrKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuaW1wb3J0IHsgSUNvcmVUZXJtaW5hbCB9IGZyb20gJ2NvbW1vbi9UeXBlcyc7XG5pbXBvcnQgeyBJVW5pY29kZUhhbmRsaW5nLCBJVW5pY29kZVZlcnNpb25Qcm92aWRlciB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5cbmV4cG9ydCBjbGFzcyBVbmljb2RlQXBpIGltcGxlbWVudHMgSVVuaWNvZGVIYW5kbGluZyB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NvcmU6IElDb3JlVGVybWluYWwpIHsgfVxuXG4gIHB1YmxpYyByZWdpc3Rlcihwcm92aWRlcjogSVVuaWNvZGVWZXJzaW9uUHJvdmlkZXIpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnJlZ2lzdGVyKHByb3ZpZGVyKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdmVyc2lvbnMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnZlcnNpb25zO1xuICB9XG5cbiAgcHVibGljIGdldCBhY3RpdmVWZXJzaW9uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UuYWN0aXZlVmVyc2lvbjtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgYWN0aXZlVmVyc2lvbih2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb24gPSB2ZXJzaW9uO1xuICB9XG59XG4iLCAiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSBNSVRcbiAqL1xuXG5pbXBvcnQgKiBhcyBTdHJpbmdzIGZyb20gJ2Jyb3dzZXIvTG9jYWxpemFibGVTdHJpbmdzJztcbmltcG9ydCB7IENvcmVCcm93c2VyVGVybWluYWwgYXMgVGVybWluYWxDb3JlIH0gZnJvbSAnYnJvd3Nlci9Db3JlQnJvd3NlclRlcm1pbmFsJztcbmltcG9ydCB7IElCdWZmZXJSYW5nZSwgSVRlcm1pbmFsIH0gZnJvbSAnYnJvd3Nlci9UeXBlcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAndnMvYmFzZS9jb21tb24vbGlmZWN5Y2xlJztcbmltcG9ydCB7IElUZXJtaW5hbE9wdGlvbnMgfSBmcm9tICdjb21tb24vVHlwZXMnO1xuaW1wb3J0IHsgQWRkb25NYW5hZ2VyIH0gZnJvbSAnY29tbW9uL3B1YmxpYy9BZGRvbk1hbmFnZXInO1xuaW1wb3J0IHsgQnVmZmVyTmFtZXNwYWNlQXBpIH0gZnJvbSAnY29tbW9uL3B1YmxpYy9CdWZmZXJOYW1lc3BhY2VBcGknO1xuaW1wb3J0IHsgUGFyc2VyQXBpIH0gZnJvbSAnY29tbW9uL3B1YmxpYy9QYXJzZXJBcGknO1xuaW1wb3J0IHsgVW5pY29kZUFwaSB9IGZyb20gJ2NvbW1vbi9wdWJsaWMvVW5pY29kZUFwaSc7XG5pbXBvcnQgeyBJQnVmZmVyTmFtZXNwYWNlIGFzIElCdWZmZXJOYW1lc3BhY2VBcGksIElEZWNvcmF0aW9uLCBJRGVjb3JhdGlvbk9wdGlvbnMsIElEaXNwb3NhYmxlLCBJTGlua1Byb3ZpZGVyLCBJTG9jYWxpemFibGVTdHJpbmdzLCBJTWFya2VyLCBJTW9kZXMsIElQYXJzZXIsIElUZXJtaW5hbEFkZG9uLCBUZXJtaW5hbCBhcyBJVGVybWluYWxBcGksIElUZXJtaW5hbEluaXRPbmx5T3B0aW9ucywgSVVuaWNvZGVIYW5kbGluZyB9IGZyb20gJ0B4dGVybS94dGVybSc7XG5pbXBvcnQgdHlwZSB7IEV2ZW50IH0gZnJvbSAndnMvYmFzZS9jb21tb24vZXZlbnQnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2Ygb3B0aW9ucyB0aGF0IG9ubHkgaGF2ZSBhbiBlZmZlY3Qgd2hlbiBzZXQgaW4gdGhlIFRlcm1pbmFsIGNvbnN0cnVjdG9yLlxuICovXG5jb25zdCBDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMgPSBbJ2NvbHMnLCAncm93cyddO1xuXG5sZXQgJHZhbHVlID0gMDtcblxuZXhwb3J0IGNsYXNzIFRlcm1pbmFsIGV4dGVuZHMgRGlzcG9zYWJsZSBpbXBsZW1lbnRzIElUZXJtaW5hbEFwaSB7XG4gIHByaXZhdGUgX2NvcmU6IElUZXJtaW5hbDtcbiAgcHJpdmF0ZSBfYWRkb25NYW5hZ2VyOiBBZGRvbk1hbmFnZXI7XG4gIHByaXZhdGUgX3BhcnNlcjogSVBhcnNlciB8IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBfYnVmZmVyOiBCdWZmZXJOYW1lc3BhY2VBcGkgfCB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX3B1YmxpY09wdGlvbnM6IFJlcXVpcmVkPElUZXJtaW5hbE9wdGlvbnM+O1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBJVGVybWluYWxPcHRpb25zICYgSVRlcm1pbmFsSW5pdE9ubHlPcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuX2NvcmUgPSB0aGlzLl9yZWdpc3RlcihuZXcgVGVybWluYWxDb3JlKG9wdGlvbnMpKTtcbiAgICB0aGlzLl9hZGRvbk1hbmFnZXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgQWRkb25NYW5hZ2VyKCkpO1xuXG4gICAgdGhpcy5fcHVibGljT3B0aW9ucyA9IHsgLi4uIHRoaXMuX2NvcmUub3B0aW9ucyB9O1xuICAgIGNvbnN0IGdldHRlciA9IChwcm9wTmFtZTogc3RyaW5nKTogYW55ID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jb3JlLm9wdGlvbnNbcHJvcE5hbWVdO1xuICAgIH07XG4gICAgY29uc3Qgc2V0dGVyID0gKHByb3BOYW1lOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkID0+IHtcbiAgICAgIHRoaXMuX2NoZWNrUmVhZG9ubHlPcHRpb25zKHByb3BOYW1lKTtcbiAgICAgIHRoaXMuX2NvcmUub3B0aW9uc1twcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICB9O1xuXG4gICAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiB0aGlzLl9jb3JlLm9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRlc2MgPSB7XG4gICAgICAgIGdldDogZ2V0dGVyLmJpbmQodGhpcywgcHJvcE5hbWUpLFxuICAgICAgICBzZXQ6IHNldHRlci5iaW5kKHRoaXMsIHByb3BOYW1lKVxuICAgICAgfTtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLl9wdWJsaWNPcHRpb25zLCBwcm9wTmFtZSwgZGVzYyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2hlY2tSZWFkb25seU9wdGlvbnMocHJvcE5hbWU6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIFRocm93IGFuIGVycm9yIGlmIGFueSBjb25zdHJ1Y3RvciBvbmx5IG9wdGlvbiBpcyBtb2RpZmllZFxuICAgIC8vIGZyb20gdGVybWluYWwub3B0aW9uc1xuICAgIC8vIE1vZGlmaWNhdGlvbnMgZnJvbSBhbnl3aGVyZSBlbHNlIGFyZSBhbGxvd2VkXG4gICAgaWYgKENPTlNUUlVDVE9SX09OTFlfT1BUSU9OUy5pbmNsdWRlcyhwcm9wTmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT3B0aW9uIFwiJHtwcm9wTmFtZX1cIiBjYW4gb25seSBiZSBzZXQgaW4gdGhlIGNvbnN0cnVjdG9yYCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfY2hlY2tQcm9wb3NlZEFwaSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbGxvd1Byb3Bvc2VkQXBpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtdXN0IHNldCB0aGUgYWxsb3dQcm9wb3NlZEFwaSBvcHRpb24gdG8gdHJ1ZSB0byB1c2UgcHJvcG9zZWQgQVBJJyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldCBvbkJlbGwoKTogRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkJlbGw7IH1cbiAgcHVibGljIGdldCBvbkJpbmFyeSgpOiBFdmVudDxzdHJpbmc+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnk7IH1cbiAgcHVibGljIGdldCBvbkN1cnNvck1vdmUoKTogRXZlbnQ8dm9pZD4geyByZXR1cm4gdGhpcy5fY29yZS5vbkN1cnNvck1vdmU7IH1cbiAgcHVibGljIGdldCBvbkRhdGEoKTogRXZlbnQ8c3RyaW5nPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uRGF0YTsgfVxuICBwdWJsaWMgZ2V0IG9uS2V5KCk6IEV2ZW50PHsga2V5OiBzdHJpbmcsIGRvbUV2ZW50OiBLZXlib2FyZEV2ZW50IH0+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25LZXk7IH1cbiAgcHVibGljIGdldCBvbkxpbmVGZWVkKCk6IEV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25MaW5lRmVlZDsgfVxuICBwdWJsaWMgZ2V0IG9uUmVuZGVyKCk6IEV2ZW50PHsgc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vblJlbmRlcjsgfVxuICBwdWJsaWMgZ2V0IG9uUmVzaXplKCk6IEV2ZW50PHsgY29sczogbnVtYmVyLCByb3dzOiBudW1iZXIgfT4geyByZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZTsgfVxuICBwdWJsaWMgZ2V0IG9uU2Nyb2xsKCk6IEV2ZW50PG51bWJlcj4geyByZXR1cm4gdGhpcy5fY29yZS5vblNjcm9sbDsgfVxuICBwdWJsaWMgZ2V0IG9uU2VsZWN0aW9uQ2hhbmdlKCk6IEV2ZW50PHZvaWQ+IHsgcmV0dXJuIHRoaXMuX2NvcmUub25TZWxlY3Rpb25DaGFuZ2U7IH1cbiAgcHVibGljIGdldCBvblRpdGxlQ2hhbmdlKCk6IEV2ZW50PHN0cmluZz4geyByZXR1cm4gdGhpcy5fY29yZS5vblRpdGxlQ2hhbmdlOyB9XG4gIHB1YmxpYyBnZXQgb25Xcml0ZVBhcnNlZCgpOiBFdmVudDx2b2lkPiB7IHJldHVybiB0aGlzLl9jb3JlLm9uV3JpdGVQYXJzZWQ7IH1cblxuICBwdWJsaWMgZ2V0IGVsZW1lbnQoKTogSFRNTEVsZW1lbnQgfCB1bmRlZmluZWQgeyByZXR1cm4gdGhpcy5fY29yZS5lbGVtZW50OyB9XG4gIHB1YmxpYyBnZXQgcGFyc2VyKCk6IElQYXJzZXIge1xuICAgIGlmICghdGhpcy5fcGFyc2VyKSB7XG4gICAgICB0aGlzLl9wYXJzZXIgPSBuZXcgUGFyc2VyQXBpKHRoaXMuX2NvcmUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcGFyc2VyO1xuICB9XG4gIHB1YmxpYyBnZXQgdW5pY29kZSgpOiBJVW5pY29kZUhhbmRsaW5nIHtcbiAgICB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCk7XG4gICAgcmV0dXJuIG5ldyBVbmljb2RlQXBpKHRoaXMuX2NvcmUpO1xuICB9XG4gIHB1YmxpYyBnZXQgdGV4dGFyZWEoKTogSFRNTFRleHRBcmVhRWxlbWVudCB8IHVuZGVmaW5lZCB7IHJldHVybiB0aGlzLl9jb3JlLnRleHRhcmVhOyB9XG4gIHB1YmxpYyBnZXQgcm93cygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY29yZS5yb3dzOyB9XG4gIHB1YmxpYyBnZXQgY29scygpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5fY29yZS5jb2xzOyB9XG4gIHB1YmxpYyBnZXQgYnVmZmVyKCk6IElCdWZmZXJOYW1lc3BhY2VBcGkge1xuICAgIGlmICghdGhpcy5fYnVmZmVyKSB7XG4gICAgICB0aGlzLl9idWZmZXIgPSB0aGlzLl9yZWdpc3RlcihuZXcgQnVmZmVyTmFtZXNwYWNlQXBpKHRoaXMuX2NvcmUpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2J1ZmZlcjtcbiAgfVxuICBwdWJsaWMgZ2V0IG1hcmtlcnMoKTogUmVhZG9ubHlBcnJheTxJTWFya2VyPiB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHJldHVybiB0aGlzLl9jb3JlLm1hcmtlcnM7XG4gIH1cbiAgcHVibGljIGdldCBtb2RlcygpOiBJTW9kZXMge1xuICAgIGNvbnN0IG0gPSB0aGlzLl9jb3JlLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2RlcztcbiAgICBsZXQgbW91c2VUcmFja2luZ01vZGU6ICdub25lJyB8ICd4MTAnIHwgJ3Z0MjAwJyB8ICdkcmFnJyB8ICdhbnknID0gJ25vbmUnO1xuICAgIHN3aXRjaCAodGhpcy5fY29yZS5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sKSB7XG4gICAgICBjYXNlICdYMTAnOiBtb3VzZVRyYWNraW5nTW9kZSA9ICd4MTAnOyBicmVhaztcbiAgICAgIGNhc2UgJ1ZUMjAwJzogbW91c2VUcmFja2luZ01vZGUgPSAndnQyMDAnOyBicmVhaztcbiAgICAgIGNhc2UgJ0RSQUcnOiBtb3VzZVRyYWNraW5nTW9kZSA9ICdkcmFnJzsgYnJlYWs7XG4gICAgICBjYXNlICdBTlknOiBtb3VzZVRyYWNraW5nTW9kZSA9ICdhbnknOyBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwcGxpY2F0aW9uQ3Vyc29yS2V5c01vZGU6IG0uYXBwbGljYXRpb25DdXJzb3JLZXlzLFxuICAgICAgYXBwbGljYXRpb25LZXlwYWRNb2RlOiBtLmFwcGxpY2F0aW9uS2V5cGFkLFxuICAgICAgYnJhY2tldGVkUGFzdGVNb2RlOiBtLmJyYWNrZXRlZFBhc3RlTW9kZSxcbiAgICAgIGluc2VydE1vZGU6IHRoaXMuX2NvcmUuY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZSxcbiAgICAgIG1vdXNlVHJhY2tpbmdNb2RlOiBtb3VzZVRyYWNraW5nTW9kZSxcbiAgICAgIG9yaWdpbk1vZGU6IG0ub3JpZ2luLFxuICAgICAgcmV2ZXJzZVdyYXBhcm91bmRNb2RlOiBtLnJldmVyc2VXcmFwYXJvdW5kLFxuICAgICAgc2VuZEZvY3VzTW9kZTogbS5zZW5kRm9jdXMsXG4gICAgICBzeW5jaHJvbml6ZWRPdXRwdXRNb2RlOiBtLnN5bmNocm9uaXplZE91dHB1dCxcbiAgICAgIHdyYXBhcm91bmRNb2RlOiBtLndyYXBhcm91bmRcbiAgICB9O1xuICB9XG4gIHB1YmxpYyBnZXQgb3B0aW9ucygpOiBSZXF1aXJlZDxJVGVybWluYWxPcHRpb25zPiB7XG4gICAgcmV0dXJuIHRoaXMuX3B1YmxpY09wdGlvbnM7XG4gIH1cbiAgcHVibGljIHNldCBvcHRpb25zKG9wdGlvbnM6IElUZXJtaW5hbE9wdGlvbnMpIHtcbiAgICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX3B1YmxpY09wdGlvbnNbcHJvcE5hbWVdID0gb3B0aW9uc1twcm9wTmFtZV07XG4gICAgfVxuICB9XG4gIHB1YmxpYyBibHVyKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuYmx1cigpO1xuICB9XG4gIHB1YmxpYyBmb2N1cygpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmZvY3VzKCk7XG4gIH1cbiAgcHVibGljIGlucHV0KGRhdGE6IHN0cmluZywgd2FzVXNlcklucHV0OiBib29sZWFuID0gdHJ1ZSk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuaW5wdXQoZGF0YSwgd2FzVXNlcklucHV0KTtcbiAgfVxuICBwdWJsaWMgcmVzaXplKGNvbHVtbnM6IG51bWJlciwgcm93czogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoY29sdW1ucywgcm93cyk7XG4gICAgdGhpcy5fY29yZS5yZXNpemUoY29sdW1ucywgcm93cyk7XG4gIH1cbiAgcHVibGljIG9wZW4ocGFyZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUub3BlbihwYXJlbnQpO1xuICB9XG4gIHB1YmxpYyBhdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXIoY3VzdG9tS2V5RXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihjdXN0b21LZXlFdmVudEhhbmRsZXIpO1xuICB9XG4gIHB1YmxpYyBhdHRhY2hDdXN0b21XaGVlbEV2ZW50SGFuZGxlcihjdXN0b21XaGVlbEV2ZW50SGFuZGxlcjogKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5fY29yZS5hdHRhY2hDdXN0b21XaGVlbEV2ZW50SGFuZGxlcihjdXN0b21XaGVlbEV2ZW50SGFuZGxlcik7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyTGlua1Byb3ZpZGVyKGxpbmtQcm92aWRlcjogSUxpbmtQcm92aWRlcik6IElEaXNwb3NhYmxlIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckxpbmtQcm92aWRlcihsaW5rUHJvdmlkZXIpO1xuICB9XG4gIHB1YmxpYyByZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyOiAodGV4dDogc3RyaW5nKSA9PiBbbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXIge1xuICAgIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKTtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihoYW5kbGVyKTtcbiAgfVxuICBwdWJsaWMgZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHRoaXMuX2NvcmUuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihqb2luZXJJZCk7XG4gIH1cbiAgcHVibGljIHJlZ2lzdGVyTWFya2VyKGN1cnNvcllPZmZzZXQ6IG51bWJlciA9IDApOiBJTWFya2VyIHtcbiAgICB0aGlzLl92ZXJpZnlJbnRlZ2VycyhjdXJzb3JZT2Zmc2V0KTtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5yZWdpc3Rlck1hcmtlcihjdXJzb3JZT2Zmc2V0KTtcbiAgfVxuICBwdWJsaWMgcmVnaXN0ZXJEZWNvcmF0aW9uKGRlY29yYXRpb25PcHRpb25zOiBJRGVjb3JhdGlvbk9wdGlvbnMpOiBJRGVjb3JhdGlvbiB8IHVuZGVmaW5lZCB7XG4gICAgdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpO1xuICAgIHRoaXMuX3ZlcmlmeVBvc2l0aXZlSW50ZWdlcnMoZGVjb3JhdGlvbk9wdGlvbnMueCA/PyAwLCBkZWNvcmF0aW9uT3B0aW9ucy53aWR0aCA/PyAwLCBkZWNvcmF0aW9uT3B0aW9ucy5oZWlnaHQgPz8gMCk7XG4gICAgcmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJEZWNvcmF0aW9uKGRlY29yYXRpb25PcHRpb25zKTtcbiAgfVxuICBwdWJsaWMgaGFzU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9jb3JlLmhhc1NlbGVjdGlvbigpO1xuICB9XG4gIHB1YmxpYyBzZWxlY3QoY29sdW1uOiBudW1iZXIsIHJvdzogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGNvbHVtbiwgcm93LCBsZW5ndGgpO1xuICAgIHRoaXMuX2NvcmUuc2VsZWN0KGNvbHVtbiwgcm93LCBsZW5ndGgpO1xuICB9XG4gIHB1YmxpYyBnZXRTZWxlY3Rpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb24oKTtcbiAgfVxuICBwdWJsaWMgZ2V0U2VsZWN0aW9uUG9zaXRpb24oKTogSUJ1ZmZlclJhbmdlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpO1xuICB9XG4gIHB1YmxpYyBjbGVhclNlbGVjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmNsZWFyU2VsZWN0aW9uKCk7XG4gIH1cbiAgcHVibGljIHNlbGVjdEFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNlbGVjdEFsbCgpO1xuICB9XG4gIHB1YmxpYyBzZWxlY3RMaW5lcyhzdGFydDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHN0YXJ0LCBlbmQpO1xuICAgIHRoaXMuX2NvcmUuc2VsZWN0TGluZXMoc3RhcnQsIGVuZCk7XG4gIH1cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxMaW5lcyhhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGFtb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxMaW5lcyhhbW91bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxQYWdlcyhwYWdlQ291bnQ6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKHBhZ2VDb3VudCk7XG4gICAgdGhpcy5fY29yZS5zY3JvbGxQYWdlcyhwYWdlQ291bnQpO1xuICB9XG4gIHB1YmxpYyBzY3JvbGxUb1RvcCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnNjcm9sbFRvVG9wKCk7XG4gIH1cbiAgcHVibGljIHNjcm9sbFRvQm90dG9tKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKTtcbiAgfVxuICBwdWJsaWMgc2Nyb2xsVG9MaW5lKGxpbmU6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuX3ZlcmlmeUludGVnZXJzKGxpbmUpO1xuICAgIHRoaXMuX2NvcmUuc2Nyb2xsVG9MaW5lKGxpbmUpO1xuICB9XG4gIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLmNsZWFyKCk7XG4gIH1cbiAgcHVibGljIHdyaXRlKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGUoZGF0YSwgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyB3cml0ZWxuKGRhdGE6IHN0cmluZyB8IFVpbnQ4QXJyYXksIGNhbGxiYWNrPzogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUud3JpdGUoZGF0YSk7XG4gICAgdGhpcy5fY29yZS53cml0ZSgnXFxyXFxuJywgY2FsbGJhY2spO1xuICB9XG4gIHB1YmxpYyBwYXN0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnBhc3RlKGRhdGEpO1xuICB9XG4gIHB1YmxpYyByZWZyZXNoKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fdmVyaWZ5SW50ZWdlcnMoc3RhcnQsIGVuZCk7XG4gICAgdGhpcy5fY29yZS5yZWZyZXNoKHN0YXJ0LCBlbmQpO1xuICB9XG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jb3JlLnJlc2V0KCk7XG4gIH1cbiAgcHVibGljIGNsZWFyVGV4dHVyZUF0bGFzKCk6IHZvaWQge1xuICAgIHRoaXMuX2NvcmUuY2xlYXJUZXh0dXJlQXRsYXMoKTtcbiAgfVxuICBwdWJsaWMgbG9hZEFkZG9uKGFkZG9uOiBJVGVybWluYWxBZGRvbik6IHZvaWQge1xuICAgIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcywgYWRkb24pO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IHN0cmluZ3MoKTogSUxvY2FsaXphYmxlU3RyaW5ncyB7XG4gICAgLy8gQSB3cmFwcGVyIGlzIHJlcXVpcmVkIGhlcmUgYmVjYXVzZSBlc2J1aWxkIHByZXZlbnRzIHNldHRpbmcgYW4gYGV4cG9ydCBsZXRgXG4gICAgcmV0dXJuIHtcbiAgICAgIGdldCBwcm9tcHRMYWJlbCgpOiBzdHJpbmcgeyByZXR1cm4gU3RyaW5ncy5wcm9tcHRMYWJlbC5nZXQoKTsgfSxcbiAgICAgIHNldCBwcm9tcHRMYWJlbCh2YWx1ZTogc3RyaW5nKSB7IFN0cmluZ3MucHJvbXB0TGFiZWwuc2V0KHZhbHVlKTsgfSxcbiAgICAgIGdldCB0b29NdWNoT3V0cHV0KCk6IHN0cmluZyB7IHJldHVybiBTdHJpbmdzLnRvb011Y2hPdXRwdXQuZ2V0KCk7IH0sXG4gICAgICBzZXQgdG9vTXVjaE91dHB1dCh2YWx1ZTogc3RyaW5nKSB7IFN0cmluZ3MudG9vTXVjaE91dHB1dC5zZXQodmFsdWUpOyB9XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgX3ZlcmlmeUludGVnZXJzKC4uLnZhbHVlczogbnVtYmVyW10pOiB2b2lkIHtcbiAgICBmb3IgKCR2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgIGlmICgkdmFsdWUgPT09IEluZmluaXR5IHx8IGlzTmFOKCR2YWx1ZSkgfHwgJHZhbHVlICUgMSAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgQVBJIG9ubHkgYWNjZXB0cyBpbnRlZ2VycycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX3ZlcmlmeVBvc2l0aXZlSW50ZWdlcnMoLi4udmFsdWVzOiBudW1iZXJbXSk6IHZvaWQge1xuICAgIGZvciAoJHZhbHVlIG9mIHZhbHVlcykge1xuICAgICAgaWYgKCR2YWx1ZSAmJiAoJHZhbHVlID09PSBJbmZpbml0eSB8fCBpc05hTigkdmFsdWUpIHx8ICR2YWx1ZSAlIDEgIT09IDAgfHwgJHZhbHVlIDwgMCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIEFQSSBvbmx5IGFjY2VwdHMgcG9zaXRpdmUgaW50ZWdlcnMnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsICIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIEBsaWNlbnNlIE1JVFxuICovXG5cbmltcG9ydCB0eXBlIHsgVGVybWluYWwsIElUZXJtaW5hbEFkZG9uIH0gZnJvbSAnQHh0ZXJtL3h0ZXJtJztcbmltcG9ydCB0eXBlIHsgRml0QWRkb24gYXMgSUZpdEFwaSB9IGZyb20gJ0B4dGVybS9hZGRvbi1maXQnO1xuaW1wb3J0IHsgSVJlbmRlckRpbWVuc2lvbnMgfSBmcm9tICdicm93c2VyL3JlbmRlcmVyL3NoYXJlZC9UeXBlcyc7XG5pbXBvcnQgeyBWaWV3cG9ydENvbnN0YW50cyB9IGZyb20gJ2Jyb3dzZXIvc2hhcmVkL0NvbnN0YW50cyc7XG5cbmludGVyZmFjZSBJVGVybWluYWxEaW1lbnNpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgdGVybWluYWwuXG4gICAqL1xuICByb3dzOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgdGVybWluYWwuXG4gICAqL1xuICBjb2xzOiBudW1iZXI7XG59XG5cbmNvbnN0IE1JTklNVU1fQ09MUyA9IDI7XG5jb25zdCBNSU5JTVVNX1JPV1MgPSAxO1xuXG5leHBvcnQgY2xhc3MgRml0QWRkb24gaW1wbGVtZW50cyBJVGVybWluYWxBZGRvbiAsIElGaXRBcGkge1xuICBwcml2YXRlIF90ZXJtaW5hbDogVGVybWluYWwgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIGFjdGl2YXRlKHRlcm1pbmFsOiBUZXJtaW5hbCk6IHZvaWQge1xuICAgIHRoaXMuX3Rlcm1pbmFsID0gdGVybWluYWw7XG4gIH1cblxuICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHt9XG5cbiAgcHVibGljIGZpdCgpOiB2b2lkIHtcbiAgICBjb25zdCBkaW1zID0gdGhpcy5wcm9wb3NlRGltZW5zaW9ucygpO1xuICAgIGlmICghZGltcyB8fCAhdGhpcy5fdGVybWluYWwgfHwgaXNOYU4oZGltcy5jb2xzKSB8fCBpc05hTihkaW1zLnJvd3MpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVE9ETzogUmVtb3ZlIHJlbGlhbmNlIG9uIHByaXZhdGUgQVBJXG4gICAgY29uc3QgY29yZSA9ICh0aGlzLl90ZXJtaW5hbCBhcyBhbnkpLl9jb3JlO1xuXG4gICAgLy8gRm9yY2UgYSBmdWxsIHJlbmRlclxuICAgIGlmICh0aGlzLl90ZXJtaW5hbC5yb3dzICE9PSBkaW1zLnJvd3MgfHwgdGhpcy5fdGVybWluYWwuY29scyAhPT0gZGltcy5jb2xzKSB7XG4gICAgICBjb3JlLl9yZW5kZXJTZXJ2aWNlLmNsZWFyKCk7XG4gICAgICB0aGlzLl90ZXJtaW5hbC5yZXNpemUoZGltcy5jb2xzLCBkaW1zLnJvd3MpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBwcm9wb3NlRGltZW5zaW9ucygpOiBJVGVybWluYWxEaW1lbnNpb25zIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAoIXRoaXMuX3Rlcm1pbmFsKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fdGVybWluYWwuZWxlbWVudCB8fCAhdGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlbW92ZSByZWxpYW5jZSBvbiBwcml2YXRlIEFQSVxuICAgIGNvbnN0IGNvcmUgPSAodGhpcy5fdGVybWluYWwgYXMgYW55KS5fY29yZTtcbiAgICBjb25zdCBkaW1zOiBJUmVuZGVyRGltZW5zaW9ucyA9IGNvcmUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucztcblxuICAgIGlmIChkaW1zLmNzcy5jZWxsLndpZHRoID09PSAwIHx8IGRpbXMuY3NzLmNlbGwuaGVpZ2h0ID09PSAwKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID0gKHRoaXMuX3Rlcm1pbmFsLm9wdGlvbnMuc2Nyb2xsYmFjayA9PT0gMFxuICAgICAgPyAwXG4gICAgICA6ICh0aGlzLl90ZXJtaW5hbC5vcHRpb25zLm92ZXJ2aWV3UnVsZXI/LndpZHRoIHx8IFZpZXdwb3J0Q29uc3RhbnRzLkRFRkFVTFRfU0NST0xMX0JBUl9XSURUSCkpO1xuXG4gICAgY29uc3QgcGFyZW50RWxlbWVudFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50SGVpZ2h0ID0gcGFyc2VJbnQocGFyZW50RWxlbWVudFN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpKTtcbiAgICBjb25zdCBwYXJlbnRFbGVtZW50V2lkdGggPSBNYXRoLm1heCgwLCBwYXJzZUludChwYXJlbnRFbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnd2lkdGgnKSkpO1xuICAgIGNvbnN0IGVsZW1lbnRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQpO1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nID0ge1xuICAgICAgdG9wOiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy10b3AnKSksXG4gICAgICBib3R0b206IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWJvdHRvbScpKSxcbiAgICAgIHJpZ2h0OiBwYXJzZUludChlbGVtZW50U3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpKSxcbiAgICAgIGxlZnQ6IHBhcnNlSW50KGVsZW1lbnRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLWxlZnQnKSlcbiAgICB9O1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nVmVyID0gZWxlbWVudFBhZGRpbmcudG9wICsgZWxlbWVudFBhZGRpbmcuYm90dG9tO1xuICAgIGNvbnN0IGVsZW1lbnRQYWRkaW5nSG9yID0gZWxlbWVudFBhZGRpbmcucmlnaHQgKyBlbGVtZW50UGFkZGluZy5sZWZ0O1xuICAgIGNvbnN0IGF2YWlsYWJsZUhlaWdodCA9IHBhcmVudEVsZW1lbnRIZWlnaHQgLSBlbGVtZW50UGFkZGluZ1ZlcjtcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHBhcmVudEVsZW1lbnRXaWR0aCAtIGVsZW1lbnRQYWRkaW5nSG9yIC0gc2Nyb2xsYmFyV2lkdGg7XG4gICAgY29uc3QgZ2VvbWV0cnkgPSB7XG4gICAgICBjb2xzOiBNYXRoLm1heChNSU5JTVVNX0NPTFMsIE1hdGguZmxvb3IoYXZhaWxhYmxlV2lkdGggLyBkaW1zLmNzcy5jZWxsLndpZHRoKSksXG4gICAgICByb3dzOiBNYXRoLm1heChNSU5JTVVNX1JPV1MsIE1hdGguZmxvb3IoYXZhaWxhYmxlSGVpZ2h0IC8gZGltcy5jc3MuY2VsbC5oZWlnaHQpKVxuICAgIH07XG4gICAgcmV0dXJuIGdlb21ldHJ5O1xuICB9XG59XG4iLCAiaW1wb3J0IHsgVGVybWluYWwgfSBmcm9tICdAeHRlcm0veHRlcm0nO1xuaW1wb3J0IHsgRml0QWRkb24gfSBmcm9tICdAeHRlcm0vYWRkb24tZml0JztcbmxldCB0b3BfYWRkb246Rml0QWRkb25cbmxldCB0b3BfdGVybTpUZXJtaW5hbFxuZnVuY3Rpb24gdG9wX2NhbGxfZml0KCl7XG4gIGNvbnN0IHJvd3NfYmVmb3JlPXRvcF90ZXJtLnJvd3NcbiAgdG9wX2FkZG9uLmZpdCgpXG4gIGNvbnN0IHJvd3NfYWZ0ZXI9dG9wX3Rlcm0ucm93c1xuICAvL3Rlcm0ucmVmcmVzaCgwLDEwMDApXG4gIGNvbnN0IHJvd3NfYWZ0ZXJfcmVmcmVzaD10b3BfdGVybS5yb3dzXG4gIGNvbnNvbGUubG9nKHtyb3dzX2JlZm9yZSxyb3dzX2FmdGVyLHJvd3NfYWZ0ZXJfcmVmcmVzaH0pXG59XG5mdW5jdGlvbiBjcmVhdGVfdGVybWluYWwoc2VsZWN0b3I6c3RyaW5nLGFzdGVyaXg6c3RyaW5nKXtcbiBcbiAgY29uc3QgdGVybSA9IG5ldyBUZXJtaW5hbCgpO1xuICB0b3BfdGVybT10ZXJtXG4gIGNvbnN0IGZpdEFkZG9uID0gbmV3IEZpdEFkZG9uKCk7XG4gIHRvcF9hZGRvbj1maXRBZGRvblxuICBmdW5jdGlvbiBjYWxsX2ZpdCgpe1xuICAgIGNvbnN0IHJvd3NfYmVmb3JlPXRlcm0ucm93c1xuICAgIC8vZml0QWRkb24uZml0KClcbiAgICBjb25zdCByb3dzX2FmdGVyPXRlcm0ucm93c1xuICAgIHRlcm0ucmVmcmVzaCgwLDEwMDApXG4gICAgY29uc3Qgcm93c19hZnRlcl9yZWZyZXNoPXRlcm0ucm93c1xuICAgIGNvbnNvbGUubG9nKHtyb3dzX2JlZm9yZSxyb3dzX2FmdGVyLHJvd3NfYWZ0ZXJfcmVmcmVzaH0pXG4gIH1cbiAgdGVybS5sb2FkQWRkb24oZml0QWRkb24pO1xuXG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KHNlbGVjdG9yKSE7XG4gIHRlcm0ub3Blbihjb250YWluZXIpOyBcbiAgXG4gIC8vIEZpdCB0aGUgdGVybWluYWwgdG8gaXRzIGNvbnRhaW5lclxuICAvL2ZpdEFkZG9uLmZpdCgpO1xuICBcbiAgLy8gUHJpbnQgaW5pdGlhbCBzaXplXG4gIGNvbnN0IGluaXRpYWxTaXplID0gdGVybS5jb2xzICYmIHRlcm0ucm93cyA/IHtjb2xzOiB0ZXJtLmNvbHMsIHJvd3M6IHRlcm0ucm93c30gOiBudWxsO1xuICBpZiAoaW5pdGlhbFNpemUpIHtcbiAgICB0ZXJtLndyaXRlKGBcXHJcXG5UZXJtaW5hbCBzaXplOiAke2luaXRpYWxTaXplLmNvbHN9IGNvbHMgeCAke2luaXRpYWxTaXplLnJvd3N9IHJvd3NcXHJcXG5gKTtcbiAgfVxuICBcbiAgLy8gUmVmaXQgb24gd2luZG93IHJlc2l6ZVxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgY2FsbF9maXQpXG4gIFxuICBzZXRJbnRlcnZhbChjYWxsX2ZpdCwxMDAwKVxuICBjb25zdCByZXNpemVPYnNlcnZlciA9IG5ldyBSZXNpemVPYnNlcnZlcihjYWxsX2ZpdClcbiAgICByZXNpemVPYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lcik7XG4gIFxuICB0ZXJtLndyaXRlKCcqJylcbiAgdGVybS5vblJlc2l6ZSgoe3Jvd3MsY29sc30pPT57XG4gICAgY29uc29sZS5sb2coYHJlc2l6ZSAke3Jvd3N9ICwgJHtjb2xzfWApO1xuICAgIHRlcm0ud3JpdGUoYFxcclxcbltSZXNpemVdIE5ldyBzaXplOiAke2NvbHN9IGNvbHMgeCAke3Jvd3N9IHJvd3NcXHJcXG5gKTtcbiAgfSlcbiAgZm9yIChsZXQgaT0wO2k8NDA7aSsrKXtcbiAgICBmb3IgKGxldCBqPTA7ajxpO2orKylcbiAgICAgIHRlcm0ud3JpdGUoYCR7YXN0ZXJpeH0ke2FzdGVyaXh9YClcbiAgICB0ZXJtLndyaXRlKCdcXHJcXG4nKVxuICB9XG59XG5mdW5jdGlvbiBtYWtlX3RvZ2dsZShpZDpzdHJpbmcpe1xuICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihgI3h0ZXJtJHtpZH1gKTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICBjb25zdCBjdXJyZW50ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkuZGlzcGxheTtcbiAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAoY3VycmVudCA9PT0gJ25vbmUnKSA/ICdmbGV4JyA6ICdub25lJztcbiAgfVxufVxuZnVuY3Rpb24gZG9pdCgpe1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnMScpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsbWFrZV90b2dnbGUoJzEnKSlcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJzInKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLG1ha2VfdG9nZ2xlKCcyJykpXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXQnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLHRvcF9jYWxsX2ZpdClcblxuICBjcmVhdGVfdGVybWluYWwoJyN4dGVybTEnLCcxJylcbiAgLy9jcmVhdGVfdGVybWluYWwoJyN4dGVybTInLCcyJylcblxufVxuZG9pdCgpIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7QUFPQSxJQUFJQSxLQUFzQjtBQUExQixJQUNNQyxLQUFjLEVBQ2xCLEtBQUssTUFBTUQsSUFDWCxLQUFNRSxDQUFBQSxRQUFrQkYsS0FBc0JFLElBQ2hEO0FBSkEsSUFNSUMsS0FBd0I7QUFONUIsSUFPTUMsS0FBZ0IsRUFDcEIsS0FBSyxNQUFNRCxJQUNYLEtBQU1ELENBQUFBLFFBQWtCQyxLQUF3QkQsSUFDbEQ7QUNMTyxTQUFTRyxHQUF1QkMsS0FBc0I7QUFDM0QsU0FBT0EsSUFBSyxRQUFRLFVBQVUsSUFBSTtBQUNwQztBQU1PLFNBQVNDLEdBQW9CRCxLQUFjRSxHQUFxQztBQUNyRixTQUFJQSxJQUNLLGNBQWNGLE1BQU8sY0FFdkJBO0FBQ1Q7QUFNTyxTQUFTRyxHQUFZQyxLQUFvQkMsR0FBMkM7QUFDckZELEVBQUFBLElBQUcsaUJBQ0xBLElBQUcsY0FBYyxRQUFRLGNBQWNDLEVBQWlCLGFBQWEsR0FHdkVELElBQUcsZUFBZTtBQUNwQjtBQUtPLFNBQVNFLEdBQWlCRixLQUFvQkcsR0FBK0JDLEdBQTJCQyxHQUF1QztBQUVwSixNQURBTCxJQUFHLGdCQUFnQixHQUNmQSxJQUFHLGVBQWU7QUFDcEIsUUFBTUosSUFBT0ksSUFBRyxjQUFjLFFBQVEsWUFBWTtBQUNsRE0sT0FBTVYsR0FBTU8sR0FBVUMsR0FBYUMsQ0FBYztFQUNuRDtBQUNGO0FBRU8sU0FBU0Ms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LEdBQUssVUFDTCxHQUFLLFVBQ0wsR0FBSyxVQUNMLEdBQUssVUFDTCxHQUFLLFVBQ0wsR0FBSyxVQUNMLEdBQUssVUFDTCxHQUFLLFVBQ0wsR0FBSyxVQUNMLEdBQUssVUFDTCxLQUFLLFVBQ0wsS0FBSyxVQUNMLEtBQUssUUFDTCxLQUFLLE9BQ1A7QUFPQUEsR0FBUyxJQUFPLEVBQ2QsS0FBSyxPQUNQO0FBTUFBLEdBQVMsSUFBTztBQU9oQkEsR0FBUyxDQUFHLElBQUksRUFDZCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssTUFDTCxNQUFNLFFBQ04sS0FBSyxLQUNMLEtBQUssUUFDTCxLQUFLLEtBQ0wsS0FBSyxRQUNMLEtBQUssT0FDUDtBQU9BQSxHQUFTLElBQ1RBLEdBQVMsQ0FBRyxJQUFJLEVBQ2QsS0FBSyxRQUNMLE1BQU0sUUFDTixLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLE9BQ1A7QUFPQUEsR0FBUyxJQUFPLEVBQ2QsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsTUFBTSxRQUNOLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLE9BQ1A7QUFPQUEsR0FBUyxJQUFPLEVBQ2QsS0FBSyxRQUNMLEtBQUssUUFDTCxNQUFNLFFBQ04sS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxPQUNQO0FBT0FBLEdBQVMsSUFBTyxFQUNkLEtBQUssUUFDTCxLQUFLLFFBQ0wsTUFBTSxRQUNOLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLE9BQ1A7QUFPQUEsR0FBUyxJQUFPLEVBQ2QsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsTUFBTSxRQUNOLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxRQUNMLEtBQUssUUFDTCxLQUFLLFFBQ0wsS0FBSyxPQUNQO0FBT0FBLEdBQVMsSUFD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QUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQ25ELENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FBRyxDQUFDLE1BQVEsSUFBTSxHQUNuRCxDQUFDLE1BQVEsSUFBTSxHQUFHLENBQUMsTUFBUSxJQUFNLEdBQUcsQ0FBQyxNQUFRLElBQU0sR0FDbkQsQ0FBQyxNQUFRLElBQU0sR0FBRyxD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ZSxHQUFHLEdBQUcsaUJBQWlCLFNBQVEsWUFBWSxHQUFHLENBQUM7QUFDdkUsV0FBUyxlQUFlLEtBQUssR0FBRyxpQkFBaUIsU0FBUSxZQUFZO0FBRXJFLGtCQUFnQixXQUFVLEdBQUc7QUFHL0I7QUFDQSxLQUFLOyIsCiAgIm5hbWVzIjogWyJwcm9tcHRMYWJlbEludGVybmFsIiwgInByb21wdExhYmVsIiwgInZhbHVlIiwgInRvb011Y2hPdXRwdXRJbnRlcm5hbCIsICJ0b29NdWNoT3V0cHV0IiwgInByZXBhcmVUZXh0Rm9yVGVybWluYWwiLCAidGV4dCIsICJicmFja2V0VGV4dEZvclBhc3RlIiwgImJyYWNrZXRlZFBhc3RlTW9kZSIsICJjb3B5SGFuZGxlciIsICJldiIsICJzZWxlY3Rpb25TZXJ2aWNlIiwgImhhbmRsZVBhc3RlRXZlbnQiLCAidGV4dGFyZWEiLCAiY29yZVNlcnZpY2UiLCAib3B0aW9uc1NlcnZpY2UiLCAicGFzdGUiLCAibW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvciIsICJzY3JlZW5FbGVtZW50IiwgInBvcyIsICJsZWZ0IiwgInRvcCIsICJyaWdodENsaWNrSGFuZGxlciIsICJzaG91bGRTZWxlY3RXb3JkIiwgInN0cmluZ0Zyb21Db2RlUG9pbnQiLCAiY29kZVBvaW50IiwgInV0ZjMyVG9TdHJpbmciLCAiZGF0YSIsICJzdGFydCIsICJlbmQiLCAicmVzdWx0IiwgImkiLCAiY29kZXBvaW50IiwgIlN0cmluZ1RvVXRmMzIiLCAiaW5wdXQiLCAidGFyZ2V0IiwgImxlbmd0aCIsICJzaXplIiwgInN0YXJ0UG9zIiwgInNlY29uZCIsICJjb2RlIiwgIlV0ZjhUb1V0ZjMyIiwgImJ5dGUxIiwgImJ5dGUyIiwgImJ5dGUzIiwgImJ5dGU0IiwgImRpc2NhcmRJbnRlcmltIiwgImNwIiwgInRtcCIsICJ0eXBlIiwgIm1pc3NpbmciLCAiZm91clN0b3AiLCAiTlVMTF9DRUxMX0NIQVIiLCAiV0hJVEVTUEFDRV9DRUxMX0NIQVIiLCAiQXR0cmlidXRlRGF0YSIsICJfQXR0cmlidXRlRGF0YSIsICJFeHRlbmRlZEF0dHJzIiwgIm5ld09iaiIsICJfRXh0ZW5kZWRBdHRycyIsICJleHQiLCAidXJsSWQiLCAidmFsIiwgIkNlbGxEYXRhIiwgIl9DZWxsRGF0YSIsICJvYmoiLCAiY29tYmluZWQiLCAiRElfVEFSR0VUIiwgIkRJX0RFUEVOREVOQ0lFUyIsICJzZXJ2aWNlUmVnaXN0cnkiLCAiZ2V0U2VydmljZURlcGVuZGVuY2llcyIsICJjdG9yIiwgImNyZWF0ZURlY29yYXRvciIsICJpZCIsICJkZWNvcmF0b3IiLCAia2V5IiwgImluZGV4IiwgInN0b3JlU2VydmljZURlcGVuZGVuY3kiLCAiSUJ1ZmZlclNlcnZpY2UiLCAiSUNvcmVNb3VzZVNlcnZpY2UiLCAiSUNvcmVTZXJ2aWNlIiwgIklDaGFyc2V0U2VydmljZSIsICJJSW5zdGFudGlhdGlvblNlcnZpY2UiLCAiSUxvZ1NlcnZpY2UiLCAiSU9wdGlvbnNTZXJ2aWNlIiwgIklPc2NMaW5rU2VydmljZSIsICJJVW5pY29kZVNlcnZpY2UiLCAiSURlY29yYXRpb25TZXJ2aWNlIiwgIk9zY0xpbmtQcm92aWRlciIsICJfYnVmZmVyU2VydmljZSIsICJfb3B0aW9uc1NlcnZpY2UiLCAiX29zY0xpbmtTZXJ2aWNlIiwgInkiLCAiY2FsbGJhY2siLCAibGluZSIsICJsaW5rSGFuZGxlciIsICJjZWxsIiwgImxpbmVMZW5ndGgiLCAiY3VycmVudExpbmtJZCIsICJjdXJyZW50U3RhcnQiLCAiZmluaXNoTGluayIsICJ4IiwgInJhbmdlIiwgImlnbm9yZUxpbmsiLCAicGFyc2VkIiwgImUiLCAiZGVmYXVsdEFjdGl2YXRlIiwgIl9fZGVjb3JhdGVDbGFzcyIsICJfX2RlY29yYXRlUGFyYW0iLCAidXJpIiwgIm5ld1dpbmRvdyIsICJJQ2hhclNpemVTZXJ2aWNlIiwgIklDb3JlQnJvd3NlclNlcnZpY2UiLCAiSU1vdXNlU2VydmljZSIsICJJUmVuZGVyU2VydmljZSIsICJJU2VsZWN0aW9uU2VydmljZSIsICJJQ2hhcmFjdGVySm9pbmVyU2VydmljZSIsICJJVGhlbWVTZXJ2aWNlIiwgIklMaW5rUHJvdmlkZXJTZXJ2aWNlIiwgIkVycm9ySGFuZGxlciIsICJFcnJvck5vVGVsZW1ldHJ5IiwgImxpc3RlbmVyIiwgIm5ld1VuZXhwZWN0ZWRFcnJvckhhbmRsZXIiLCAiZXJyb3JIYW5kbGVyIiwgIm9uVW5leHBlY3RlZEVycm9yIiwgImlzQ2FuY2VsbGF0aW9uRXJyb3IiLCAiY2FuY2VsZWROYW1lIiwgImVycm9yIiwgIkNhbmNlbGxhdGlvbkVycm9yIiwgImlsbGVnYWxBcmd1bWVudCIsICJuYW1lIiwgIl9FcnJvck5vVGVsZW1ldHJ5IiwgIm1zZyIsICJlcnIiLCAiQnVnSW5kaWNhdGluZ0Vycm9yIiwgIl9CdWdJbmRpY2F0aW5nRXJyb3IiLCAibWVzc2FnZSIsICJmaW5kTGFzdElkeE1vbm90b25vdXMiLCAiYXJyYXkiLCAicHJlZGljYXRlIiwgInN0YXJ0SWR4IiwgImVuZElkeEV4IiwgImoiLCAiayIsICJfTW9ub3Rvbm91c0FycmF5IiwgIl9hcnJheSIsICJpdGVtIiwgImlkeCIsICJ0YWlsIiwgImFycmF5IiwgIm4iLCAiQ29tcGFyZVJlc3VsdCIsICJpc0xlc3NUaGFuIiwgInJlc3VsdCIsICJpc0xlc3NUaGFuT3JFcXVhbCIsICJpc0dyZWF0ZXJUaGFuIiwgImlzTmVpdGhlckxlc3NPckdyZWF0ZXJUaGFuIiwgImNvbXBhcmVCeSIsICJzZWxlY3RvciIsICJjb21wYXJhdG9yIiwgImEiLCAiYiIsICJudW1iZXJDb21wYXJhdG9yIiwgIl9DYWxsYmFja0l0ZXJhYmxlIiwgIml0ZXJhdGUiLCAiaGFuZGxlciIsICJpdGVtIiwgInByZWRpY2F0ZSIsICJjYiIsICJtYXBGbiIsICJmaXJzdCIsICJfY2FsbGJhY2siLCAiZ3JvdXBCeSIsICJkYXRhIiwgImdyb3VwRm4iLCAicmVzdWx0IiwgImVsZW1lbnQiLCAia2V5IiwgInRhcmdldCIsICJfYSIsICJfYiIsICJTZXRXaXRoS2V5IiwgInZhbHVlcyIsICJ0b0tleSIsICJ2YWx1ZSIsICJlbnRyeSIsICJjYWxsYmFja2ZuIiwgInRoaXNBcmciLCAiU2V0TWFwIiwgImZuIiwgImNyZWF0ZVNpbmdsZUNhbGxGdW5jdGlvbiIsICJmbkRpZFJ1bkNhbGxiYWNrIiwgIl90aGlzIiwgImRpZENhbGwiLCAiSXRlcmFibGUiLCAiaXMiLCAidGhpbmciLCAiX2VtcHR5IiwgImVtcHR5IiwgInNpbmdsZSIsICJ3cmFwIiwgIml0ZXJhYmxlT3JFbGVtZW50IiwgImZyb20iLCAiaXRlcmFibGUiLCAicmV2ZXJzZSIsICJhcnJheSIsICJpIiwgImlzRW1wdHkiLCAiZmlyc3QiLCAic29tZSIsICJwcmVkaWNhdGUiLCAiZmluZCIsICJmaWx0ZXIiLCAibWFwIiwgImluZGV4IiwgImZsYXRNYXAiLCAiY29uY2F0IiwgIml0ZXJhYmxlcyIsICJyZWR1Y2UiLCAicmVkdWNlciIsICJpbml0aWFsVmFsdWUiLCAic2xpY2UiLCAiYXJyIiwgInRvIiwgImNvbnN1bWUiLCAiYXRNb3N0IiwgImNvbnN1bWVkIiwgIml0ZXJhdG9yIiwgIm5leHQiLCAiYXN5bmNUb0FycmF5IiwgIml0ZW0iLCAiVFJBQ0tfRElTUE9TQUJMRVMiLCAiZGlzcG9zYWJsZVRyYWNrZXIiLCAiX0Rpc3Bvc2FibGVUcmFja2VyIiwgImQiLCAidmFsIiwgImNoaWxkIiwgInBhcmVudCIsICJ4IiwgImRpc3Bvc2FibGUiLCAiY2FjaGUiLCAiY2FjaGVWYWx1ZSIsICJyb290UGFyZW50Q2FjaGUiLCAidiIsICJrIiwgIm1heFJlcG9ydGVkIiwgInByZUNvbXB1dGVkTGVha3MiLCAidW5jb3ZlcmVkTGVha2luZ09ianMiLCAibGVha2luZ09iamVjdHMiLCAiaW5mbyIsICJsZWFraW5nT2Jqc1NldCIsICJvIiwgImwiLCAiZ2V0U3RhY2tUcmFjZVBhdGgiLCAibGVha2luZyIsICJyZW1vdmVQcmVmaXgiLCAibGluZXNUb1JlbW92ZSIsICJyZWdleHAiLCAibGluZXMiLCAicCIsICJzdGFja1RyYWNlU3RhcnRzIiwgInN0YWNrVHJhY2VQYXRoIiwgImNvbXBhcmVCeSIsICJudW1iZXJDb21wYXJhdG9yIiwgIm1lc3NhZ2UiLCAic3RhY2tUcmFjZUZvcm1hdHRlZExpbmVzIiwgImxpbmUiLCAicHJldlN0YXJ0cyIsICJjb250aW51YXRpb25zIiwgImNvbnQiLCAic2V0IiwgInNldERpc3Bvc2FibGVUcmFja2VyIiwgInRyYWNrZXIiLCAiZGlzcG9zYWJsZVRyYWNrZXIiLCAiVFJBQ0tfRElTUE9TQUJMRVMiLCAiX19pc19kaXNwb3NhYmxlX3RyYWNrZWRfXyIsICJ4IiwgInN0YWNrIiwgImNoaWxkIiwgInBhcmVudCIsICJEaXNwb3NhYmxlIiwgImRpc3Bvc2FibGUiLCAidHJhY2tEaXNwb3NhYmxlIiwgIm1hcmtBc0Rpc3Bvc2VkIiwgInNldFBhcmVudE9mRGlzcG9zYWJsZSIsICJzZXRQYXJlbnRPZkRpc3Bvc2FibGVzIiwgImNoaWxkcmVuIiwgIm1hcmtBc1NpbmdsZXRvbiIsICJzaW5nbGV0b24iLCAiZGlzcG9zZSIsICJhcmciLCAiSXRlcmFibGUiLCAiZXJyb3JzIiwgImQiLCAiZSIsICJjb21iaW5lZERpc3Bvc2FibGUiLCAiZGlzcG9zYWJsZXMiLCAidG9EaXNwb3NhYmxlIiwgImZuIiwgInNlbGYiLCAiY3JlYXRlU2luZ2xlQ2FsbEZ1bmN0aW9uIiwgIl9EaXNwb3NhYmxlU3RvcmUiLCAibyIsICJEaXNwb3NhYmxlU3RvcmUiLCAiTXV0YWJsZURpc3Bvc2FibGUiLCAidmFsdWUiLCAib2xkVmFsdWUiLCAibWFpbldpbmRvdyIsICJfTm9kZSIsICJlbGVtZW50IiwgIk5vZGUiLCAiTGlua2VkTGlzdCIsICJub2RlIiwgIm5leHQiLCAiYXRUaGVFbmQiLCAibmV3Tm9kZSIsICJvbGRMYXN0IiwgIm9sZEZpcnN0IiwgImRpZFJlbW92ZSIsICJyZXMiLCAiYW5jaG9yIiwgImhhc1BlcmZvcm1hbmNlTm93IiwgIlN0b3BXYXRjaCIsICJfU3RvcFdhdGNoIiwgImhpZ2hSZXNvbHV0aW9uIiwgIl9lbmFibGVMaXN0ZW5lckdDZWRXYXJuaW5nIiwgIl9lbmFibGVEaXNwb3NlV2l0aExpc3RlbmVyV2FybmluZyIsICJfZW5hYmxlU25hcHNob3RQb3RlbnRpYWxMZWFrV2FybmluZyIsICJFdmVudCIsICJfYWRkTGVha2FnZVRyYWNlTG9naWMiLCAib3B0aW9ucyIsICJvcmlnTGlzdGVuZXJEaWRBZGQiLCAiU3RhY2t0cmFjZSIsICJjb3VudCIsICJkZWZlciIsICJldmVudCIsICJkZWJvdW5jZSIsICJvbmNlIiwgImxpc3RlbmVyIiwgInRoaXNBcmdzIiwgImRpZEZpcmUiLCAicmVzdWx0IiwgIm1hcCIsICJzbmFwc2hvdCIsICJpIiwgImZvckVhY2giLCAiZWFjaCIsICJmaWx0ZXIiLCAic2lnbmFsIiwgImFueSIsICJldmVudHMiLCAiYWRkQW5kUmV0dXJuRGlzcG9zYWJsZSIsICJyZWR1Y2UiLCAibWVyZ2UiLCAiaW5pdGlhbCIsICJvdXRwdXQiLCAiZW1pdHRlciIsICJFbWl0dGVyIiwgInN0b3JlIiwgImRlbGF5IiwgImxlYWRpbmciLCAiZmx1c2hPbkxpc3RlbmVyUmVtb3ZlIiwgImxlYWtXYXJuaW5nVGhyZXNob2xkIiwgInN1YnNjcmlwdGlvbiIsICJoYW5kbGUiLCAibnVtRGVib3VuY2VkQ2FsbHMiLCAiZG9GaXJlIiwgImN1ciIsICJfb3V0cHV0IiwgImFjY3VtdWxhdGUiLCAibGFzdCIsICJsYXRjaCIsICJlcXVhbHMiLCAiYSIsICJiIiwgImZpcnN0Q2FsbCIsICJjYWNoZSIsICJzaG91bGRFbWl0IiwgInNwbGl0IiwgImlzVCIsICJidWZmZXIiLCAiZmx1c2hBZnRlclRpbWVvdXQiLCAiX2J1ZmZlciIsICJmbHVzaCIsICJjaGFpbiIsICJzeXRoZW5zaXplIiwgImNzIiwgIkNoYWluYWJsZVN5bnRoZXNpcyIsICJIYWx0Q2hhaW5hYmxlIiwgInYiLCAic3RlcCIsICJmcm9tTm9kZUV2ZW50RW1pdHRlciIsICJldmVudE5hbWUiLCAiaWQiLCAiYXJncyIsICJvbkZpcnN0TGlzdGVuZXJBZGQiLCAib25MYXN0TGlzdGVuZXJSZW1vdmUiLCAiZnJvbURPTUV2ZW50RW1pdHRlciIsICJ0b1Byb21pc2UiLCAicmVzb2x2ZSIsICJmcm9tUHJvbWlzZSIsICJwcm9taXNlIiwgImZvcndhcmQiLCAiZnJvbSIsICJ0byIsICJydW5BbmRTdWJzY3JpYmUiLCAiaGFuZGxlciIsICJFbWl0dGVyT2JzZXJ2ZXIiLCAiX29ic2VydmFibGUiLCAiX2NoYW5nZSIsICJmcm9tT2JzZXJ2YWJsZSIsICJvYnMiLCAiZnJvbU9ic2VydmFibGVMaWdodCIsICJvYnNlcnZhYmxlIiwgImRpZENoYW5nZSIsICJvYnNlcnZlciIsICJfRXZlbnRQcm9maWxpbmciLCAibmFtZSIsICJsaXN0ZW5lckNvdW50IiwgImVsYXBzZWQiLCAiRXZlbnRQcm9maWxpbmciLCAiX2dsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkIiwgIl9MZWFrYWdlTW9uaXRvciIsICJfZXJyb3JIYW5kbGVyIiwgInRocmVzaG9sZCIsICJ0b3BTdGFjayIsICJ0b3BDb3VudCIsICJtZXNzYWdlIiwgImVycm9yIiwgIkxpc3RlbmVyTGVha0Vycm9yIiwgIkxlYWthZ2VNb25pdG9yIiwgIl9TdGFja3RyYWNlIiwgImVyciIsICJMaXN0ZW5lclJlZnVzYWxFcnJvciIsICJVbmlxdWVDb250YWluZXIiLCAiY29tcGFjdGlvblRocmVzaG9sZCIsICJmb3JFYWNoTGlzdGVuZXIiLCAibGlzdGVuZXJzIiwgImwiLCAiX2xpc3RlbmVyRmluYWxpemVycyIsICJsZWFrcyIsICJoZWxkVmFsdWUiLCAib25VbmV4cGVjdGVkRXJyb3IiLCAiY2FsbGJhY2siLCAidHVwbGUiLCAiY29udGFpbmVkIiwgInJlbW92ZU1vbml0b3IiLCAiRXZlbnREZWxpdmVyeVF1ZXVlUHJpdmF0ZSIsICJtYXRjaCIsICJpbmRleCIsICJhZGp1c3REZWxpdmVyeVF1ZXVlIiwgImVycm9ySGFuZGxlciIsICJkcSIsICJlbmQiLCAiX1dpbmRvd01hbmFnZXIiLCAidGFyZ2V0V2luZG93IiwgInpvb21MZXZlbCIsICJ0YXJnZXRXaW5kb3dJZCIsICJ6b29tRmFjdG9yIiwgImZ1bGxzY3JlZW4iLCAid2luZG93SWQiLCAiV2luZG93TWFuYWdlciIsICJhZGRNYXRjaE1lZGlhQ2hhbmdlTGlzdGVuZXIiLCAicXVlcnkiLCAib25EaWRDaGFuZ2Vab29tTGV2ZWwiLCAiZ2V0Wm9vbUZhY3RvciIsICJvbkRpZENoYW5nZUZ1bGxzY3JlZW4iLCAidXNlckFnZW50IiwgImlzRmlyZWZveCIsICJpc1dlYktpdCIsICJpc0Nocm9tZSIsICJpc1NhZmFyaSIsICJpc0VsZWN0cm9uIiwgImlzQW5kcm9pZCIsICJzdGFuZGFsb25lIiwgInN0YW5kYWxvbmVNYXRjaE1lZGlhIiwgImZ1bGxTY3JlZW5NYXRjaE1lZGlhIiwgIm1hdGNoZXMiLCAiaXNTdGFuZGFsb25lIiwgIkxBTkdVQUdFX0RFRkFVTFQiLCAiX2lzV2luZG93cyIsICJfaXNNYWNpbnRvc2giLCAiX2lzTGludXgiLCAiX2lzTGludXhTbmFwIiwgIl9pc05hdGl2ZSIsICJfaXNXZWIiLCAiX2lzRWxlY3Ryb24iLCAiX2lzSU9TIiwgIl9pc0NJIiwgIl9pc01vYmlsZSIsICJfbG9jYWxlIiwgIl9sYW5ndWFnZSIsICJfcGxhdGZvcm1Mb2NhbGUiLCAiX3RyYW5zbGF0aW9uc0NvbmZpZ0ZpbGUiLCAiX3VzZXJBZ2VudCIsICIkZ2xvYmFsVGhpcyIsICJub2RlUHJvY2VzcyIsICJpc0VsZWN0cm9uUHJvY2VzcyIsICJpc0VsZWN0cm9uUmVuZGVyZXIiLCAicmF3TmxzQ29uZmlnIiwgIm5sc0NvbmZpZyIsICJfcGxhdGZvcm0iLCAiaXNXaW5kb3dzIiwgImlzTWFjaW50b3NoIiwgImlzTGludXgiLCAiaXNOYXRpdmUiLCAiaXNXZWJXb3JrZXIiLCAid2ViV29ya2VyT3JpZ2luIiwgImxhbmd1YWdlIiwgIkxhbmd1YWdlIiwgImlzRGVmYXVsdFZhcmlhbnQiLCAiaXNEZWZhdWx0IiwgInNldFRpbWVvdXQwSXNGYXN0ZXIiLCAic2V0VGltZW91dDAiLCAicGVuZGluZyIsICJsZW4iLCAiY2FuZGlkYXRlIiwgImxhc3RJZCIsICJteUlkIiwgImlzRWRnZSIsICJzYWZlTmF2aWdhdG9yIiwgIkJyb3dzZXJGZWF0dXJlcyIsICJLZXlDb2RlU3RyTWFwIiwgImtleUNvZGUiLCAic3RyIiwgInVpTWFwIiwgInVzZXJTZXR0aW5nc1VTTWFwIiwgInVzZXJTZXR0aW5nc0dlbmVyYWxNYXAiLCAiRVZFTlRfS0VZX0NPREVfTUFQIiwgIktleUNvZGVVdGlscyIsICJ0b1N0cmluZyIsICJmcm9tU3RyaW5nIiwgImtleSIsICJ0b1VzZXJTZXR0aW5nc1VTIiwgInRvVXNlclNldHRpbmdzR2VuZXJhbCIsICJmcm9tVXNlclNldHRpbmdzIiwgInRvRWxlY3Ryb25BY2NlbGVyYXRvciIsICJLZXlDb2RlQ2hvcmQiLCAiX0tleUNvZGVDaG9yZCIsICJjdHJsS2V5IiwgInNoaWZ0S2V5IiwgImFsdEtleSIsICJtZXRhS2V5IiwgIm90aGVyIiwgImN0cmwiLCAic2hpZnQiLCAiYWx0IiwgIm1ldGEiLCAiS2V5YmluZGluZyIsICJjaG9yZHMiLCAiaWxsZWdhbEFyZ3VtZW50IiwgImV4dHJhY3RLZXlDb2RlIiwgImNoYXIiLCAiY3RybEtleU1vZCIsICJhbHRLZXlNb2QiLCAic2hpZnRLZXlNb2QiLCAibWV0YUtleU1vZCIsICJTdGFuZGFyZEtleWJvYXJkRXZlbnQiLCAic291cmNlIiwgInNhbWVPcmlnaW5XaW5kb3dDaGFpbkNhY2hlIiwgImdldFBhcmVudFdpbmRvd0lmU2FtZU9yaWdpbiIsICJ3IiwgImxvY2F0aW9uIiwgInBhcmVudExvY2F0aW9uIiwgIklmcmFtZVV0aWxzIiwgIndpbmRvd0NoYWluQ2FjaGUiLCAiY2hpbGRXaW5kb3ciLCAiYW5jZXN0b3JXaW5kb3ciLCAidG9wIiwgImxlZnQiLCAid2luZG93Q2hhaW4iLCAid2luZG93Q2hhaW5FbCIsICJ3aW5kb3dJbkNoYWluIiwgImJvdW5kaW5nUmVjdCIsICJTdGFuZGFyZE1vdXNlRXZlbnQiLCAiaWZyYW1lT2Zmc2V0cyIsICJTdGFuZGFyZFdoZWVsRXZlbnQiLCAiZGVsdGFYIiwgImRlbHRhWSIsICJzaG91bGRGYWN0b3JEUFIiLCAiY2hyb21lVmVyc2lvbk1hdGNoIiwgImUxIiwgImUyIiwgImRldmljZVBpeGVsUmF0aW8iLCAiZXYiLCAic2hvcnRjdXRFdmVudCIsICJjb250ZXh0IiwgIkNhbmNlbGxhdGlvblRva2VuIiwgImlzQ2FuY2VsbGF0aW9uVG9rZW4iLCAidGhpbmciLCAiTXV0YWJsZVRva2VuIiwgIlRpbWVvdXRUaW1lciIsICJydW5uZXIiLCAidGltZW91dCIsICJCdWdJbmRpY2F0aW5nRXJyb3IiLCAiSW50ZXJ2YWxUaW1lciIsICJpbnRlcnZhbCIsICJjb250ZXh0IiwgImhhbmRsZSIsICJ0b0Rpc3Bvc2FibGUiLCAicnVuV2hlbkdsb2JhbElkbGUiLCAiX3J1bldoZW5JZGxlIiwgIl90YXJnZXRXaW5kb3ciLCAic2V0VGltZW91dDAiLCAiZGlzcG9zZWQiLCAiZW5kIiwgInRhcmdldFdpbmRvdyIsICJQcm9taXNlcyIsICJzZXR0bGVkIiwgInByb21pc2VzIiwgImZpcnN0RXJyb3IiLCAicmVzdWx0IiwgInByb21pc2UiLCAidmFsdWUiLCAiZXJyb3IiLCAid2l0aEFzeW5jQm9keSIsICJib2R5Rm4iLCAicmVzb2x2ZSIsICJyZWplY3QiLCAiX0FzeW5jSXRlcmFibGVPYmplY3QiLCAiaXRlbXMiLCAid3JpdGVyIiwgImVtaXR0ZXIiLCAicCIsICJpdGVyYWJsZXMiLCAiaXRlcmFibGUiLCAiaXRlbSIsICJleGVjdXRvciIsICJvblJldHVybiIsICJFbWl0dGVyIiwgImVyciIsICJpIiwgIkV2ZW50IiwgIm1hcEZuIiwgImZpbHRlckZuIiwgInZhbHVlcyIsICJpc0hpZ2hTdXJyb2dhdGUiLCAiY2hhckNvZGUiLCAiaXNMb3dTdXJyb2dhdGUiLCAiY29tcHV0ZUNvZGVQb2ludCIsICJoaWdoU3Vycm9nYXRlIiwgImxvd1N1cnJvZ2F0ZSIsICJoYXNoIiwgIm9iaiIsICJkb0hhc2giLCAiaGFzaFZhbCIsICJudW1iZXJIYXNoIiwgImFycmF5SGFzaCIsICJvYmplY3RIYXNoIiwgInN0cmluZ0hhc2giLCAiYm9vbGVhbkhhc2giLCAidmFsIiwgImluaXRpYWxIYXNoVmFsIiwgImIiLCAicyIsICJpIiwgImxlbmd0aCIsICJhcnIiLCAiaXRlbSIsICJrZXkiLCAibGVmdFJvdGF0ZSIsICJ2YWx1ZSIsICJiaXRzIiwgInRvdGFsQml0cyIsICJkZWx0YSIsICJtYXNrIiwgImZpbGwiLCAiZGVzdCIsICJpbmRleCIsICJjb3VudCIsICJsZWZ0UGFkIiwgImNoYXIiLCAidG9IZXhTdHJpbmciLCAiYnVmZmVyT3JWYWx1ZSIsICJiaXRzaXplIiwgIl9TdHJpbmdTSEExIiwgInN0ciIsICJzdHJMZW4iLCAiYnVmZiIsICJidWZmTGVuIiwgImxlZnRvdmVySGlnaFN1cnJvZ2F0ZSIsICJvZmZzZXQiLCAiY29kZVBvaW50IiwgIm5leHRDaGFyQ29kZSIsICJtbCIsICJiaWdCbG9jazMyIiwgImRhdGEiLCAiaiIsICJhIiwgImMiLCAiZCIsICJlIiwgImYiLCAiayIsICJ0ZW1wIiwgInJlZ2lzdGVyV2luZG93IiwgImdldFdpbmRvdyIsICJnZXREb2N1bWVudCIsICJnZXRXaW5kb3dzIiwgImdldFdpbmRvd3NDb3VudCIsICJnZXRXaW5kb3dJZCIsICJnZXRXaW5kb3dCeUlkIiwgImhhc1dpbmRvdyIsICJvbkRpZFJlZ2lzdGVyV2luZG93IiwgIm9uV2lsbFVucmVnaXN0ZXJXaW5kb3ciLCAib25EaWRVbnJlZ2lzdGVyV2luZG93IiwgIndpbmRvd3MiLCAibWFpbldpbmRvdyIsICJtYWluV2luZG93UmVnaXN0cmF0aW9uIiwgIkRpc3Bvc2FibGVTdG9yZSIsICJFbWl0dGVyIiwgIndpbmRvd0lkIiwgImZhbGxiYWNrVG9NYWluIiwgIndpbmRvdyIsICJEaXNwb3NhYmxlIiwgImRpc3Bvc2FibGVzIiwgInJlZ2lzdGVyZWRXaW5kb3ciLCAidG9EaXNwb3NhYmxlIiwgImFkZERpc3Bvc2FibGVMaXN0ZW5lciIsICJFdmVudFR5cGUiLCAidGFyZ2V0V2luZG93IiwgImUiLCAiY2FuZGlkYXRlTm9kZSIsICJjYW5kaWRhdGVFdmVudCIsICJEb21MaXN0ZW5lciIsICJub2RlIiwgInR5cGUiLCAiaGFuZGxlciIsICJvcHRpb25zIiwgInVzZUNhcHR1cmVPck9wdGlvbnMiLCAiX3dyYXBBc1N0YW5kYXJkTW91c2VFdmVudCIsICJTdGFuZGFyZE1vdXNlRXZlbnQiLCAiX3dyYXBBc1N0YW5kYXJkS2V5Ym9hcmRFdmVudCIsICJTdGFuZGFyZEtleWJvYXJkRXZlbnQiLCAiYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIiLCAidXNlQ2FwdHVyZSIsICJ3cmFwSGFuZGxlciIsICJydW5BdFRoaXNPclNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUiLCAic2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSIsICJXaW5kb3dJbnRlcnZhbFRpbWVyIiwgIkludGVydmFsVGltZXIiLCAicnVubmVyIiwgImludGVydmFsIiwgIkFuaW1hdGlvbkZyYW1lUXVldWVJdGVtIiwgInByaW9yaXR5IiwgIm9uVW5leHBlY3RlZEVycm9yIiwgImEiLCAiYiIsICJORVhUX1FVRVVFIiwgIkNVUlJFTlRfUVVFVUUiLCAiYW5pbUZyYW1lUmVxdWVzdGVkIiwgImluQW5pbWF0aW9uRnJhbWVSdW5uZXIiLCAiYW5pbWF0aW9uRnJhbWVSdW5uZXIiLCAidGFyZ2V0V2luZG93SWQiLCAiY3VycmVudFF1ZXVlIiwgIml0ZW0iLCAibmV4dFF1ZXVlIiwgIl9EaW1lbnNpb24iLCAid2lkdGgiLCAiaGVpZ2h0IiwgIm9iaiIsICJnZXREb21Ob2RlUGFnZVBvc2l0aW9uIiwgImRvbU5vZGUiLCAiYmIiLCAid2luZG93IiwgImdldFdpbmRvdyIsICJzaGFyZWRNdXRhdGlvbk9ic2VydmVyIiwgInRhcmdldCIsICJkaXNwb3NhYmxlcyIsICJvcHRpb25zIiwgIm11dGF0aW9uT2JzZXJ2ZXJzUGVyVGFyZ2V0IiwgIm9wdGlvbnNIYXNoIiwgImhhc2giLCAibXV0YXRpb25PYnNlcnZlclBlck9wdGlvbnMiLCAib25EaWRNdXRhdGUiLCAiRW1pdHRlciIsICJvYnNlcnZlciIsICJtdXRhdGlvbnMiLCAicmVzb2x2ZWRNdXRhdGlvbk9ic2VydmVyUGVyT3B0aW9ucyIsICJ0b0Rpc3Bvc2FibGUiLCAiRXZlbnRUeXBlIiwgImlzV2ViS2l0IiwgIlNFTEVDVE9SX1JFR0VYIiwgIl8kIiwgIm5hbWVzcGFjZSIsICJkZXNjcmlwdGlvbiIsICJhdHRycyIsICJjaGlsZHJlbiIsICJtYXRjaCIsICJ0YWdOYW1lIiwgInJlc3VsdCIsICJuYW1lIiwgInZhbHVlIiwgIiQiLCAiRmFzdERvbU5vZGUiLCAiX21heFdpZHRoIiwgIm1heFdpZHRoIiwgIm51bWJlckFzUGl4ZWxzIiwgIl93aWR0aCIsICJ3aWR0aCIsICJfaGVpZ2h0IiwgImhlaWdodCIsICJfdG9wIiwgInRvcCIsICJfbGVmdCIsICJsZWZ0IiwgIl9ib3R0b20iLCAiYm90dG9tIiwgIl9yaWdodCIsICJyaWdodCIsICJfcGFkZGluZ1RvcCIsICJwYWRkaW5nVG9wIiwgIl9wYWRkaW5nTGVmdCIsICJwYWRkaW5nTGVmdCIsICJfcGFkZGluZ0JvdHRvbSIsICJwYWRkaW5nQm90dG9tIiwgIl9wYWRkaW5nUmlnaHQiLCAicGFkZGluZ1JpZ2h0IiwgImZvbnRGYW1pbHkiLCAiZm9udFdlaWdodCIsICJfZm9udFNpemUiLCAiZm9udFNpemUiLCAiZm9udFN0eWxlIiwgImZvbnRGZWF0dXJlU2V0dGluZ3MiLCAiZm9udFZhcmlhdGlvblNldHRpbmdzIiwgInRleHREZWNvcmF0aW9uIiwgIl9saW5lSGVpZ2h0IiwgImxpbmVIZWlnaHQiLCAiX2xldHRlclNwYWNpbmciLCAibGV0dGVyU3BhY2luZyIsICJjbGFzc05hbWUiLCAic2hvdWxkSGF2ZUl0IiwgImRpc3BsYXkiLCAicG9zaXRpb24iLCAidmlzaWJpbGl0eSIsICJjb2xvciIsICJiYWNrZ3JvdW5kQ29sb3IiLCAibGF5ZXJIaW50IiwgImJveFNoYWRvdyIsICJjb250YWluIiwgImNoaWxkIiwgImNyZWF0ZUZhc3REb21Ob2RlIiwgIkdsb2JhbFBvaW50ZXJNb3ZlTW9uaXRvciIsICJEaXNwb3NhYmxlU3RvcmUiLCAiaW52b2tlU3RvcENhbGxiYWNrIiwgImJyb3dzZXJFdmVudCIsICJvblN0b3BDYWxsYmFjayIsICJpbml0aWFsRWxlbWVudCIsICJwb2ludGVySWQiLCAiaW5pdGlhbEJ1dHRvbnMiLCAicG9pbnRlck1vdmVDYWxsYmFjayIsICJldmVudFNvdXJjZSIsICJhZGREaXNwb3NhYmxlTGlzdGVuZXIiLCAiZSIsICJtZW1vaXplIiwgIl90YXJnZXQiLCAia2V5IiwgImRlc2NyaXB0b3IiLCAiZm5LZXkiLCAiZm4iLCAibWVtb2l6ZUtleSIsICJhcmdzIiwgIl9HZXN0dXJlIiwgIkRpc3Bvc2FibGUiLCAiTGlua2VkTGlzdCIsICJFdmVudCIsICJvbkRpZFJlZ2lzdGVyV2luZG93IiwgIm1haW5XaW5kb3ciLCAiZWxlbWVudCIsICJtYXJrQXNTaW5nbGV0b24iLCAicmVtb3ZlIiwgInRpbWVzdGFtcCIsICJpIiwgImxlbiIsICJ0b3VjaCIsICJldnQiLCAidGFyZ2V0V2luZG93IiwgImFjdGl2ZVRvdWNoQ291bnQiLCAiZGF0YSIsICJob2xkVGltZSIsICJ0YWlsIiwgImZpbmFsWCIsICJmaW5hbFkiLCAiZGVsdGFUIiwgImRlbHRhWCIsICJkZWx0YVkiLCAiZGlzcGF0Y2hUbyIsICJ0IiwgInR5cGUiLCAiaW5pdGlhbFRhcmdldCIsICJldmVudCIsICJjdXJyZW50VGltZSIsICJzZXRUYXBDb3VudCIsICJpZ25vcmVUYXJnZXQiLCAidGFyZ2V0cyIsICJkZXB0aCIsICJub3ciLCAiYSIsICJiIiwgIl8iLCAidDEiLCAidlgiLCAiZGlyWCIsICJ4IiwgInZZIiwgImRpclkiLCAieSIsICJzY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lIiwgImRlbHRhX3Bvc194IiwgImRlbHRhX3Bvc195IiwgInN0b3BwZWQiLCAiZCIsICJfX2RlY29yYXRlQ2xhc3MiLCAiR2VzdHVyZSIsICJXaWRnZXQiLCAibGlzdGVuZXIiLCAiU3RhbmRhcmRNb3VzZUV2ZW50IiwgIlN0YW5kYXJkS2V5Ym9hcmRFdmVudCIsICJBUlJPV19JTUdfU0laRSIsICJTY3JvbGxiYXJBcnJvdyIsICJvcHRzIiwgImFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyIiwgIldpbmRvd0ludGVydmFsVGltZXIiLCAiVGltZW91dFRpbWVyIiwgInNjaGVkdWxlUmVwZWF0ZXIiLCAicG9pbnRlck1vdmVEYXRhIiwgIlNjcm9sbFN0YXRlIiwgIl9TY3JvbGxTdGF0ZSIsICJfZm9yY2VJbnRlZ2VyVmFsdWVzIiwgInNjcm9sbFdpZHRoIiwgInNjcm9sbExlZnQiLCAic2Nyb2xsSGVpZ2h0IiwgInNjcm9sbFRvcCIsICJvdGhlciIsICJ1cGRhdGUiLCAidXNlUmF3U2Nyb2xsUG9zaXRpb25zIiwgInByZXZpb3VzIiwgImluU21vb3RoU2Nyb2xsaW5nIiwgIndpZHRoQ2hhbmdlZCIsICJzY3JvbGxXaWR0aENoYW5nZWQiLCAic2Nyb2xsTGVmdENoYW5nZWQiLCAiaGVpZ2h0Q2hhbmdlZCIsICJzY3JvbGxIZWlnaHRDaGFuZ2VkIiwgInNjcm9sbFRvcENoYW5nZWQiLCAiU2Nyb2xsYWJsZSIsICJzbW9vdGhTY3JvbGxEdXJhdGlvbiIsICJzY3JvbGxQb3NpdGlvbiIsICJkaW1lbnNpb25zIiwgIm5ld1N0YXRlIiwgInJldXNlQW5pbWF0aW9uIiwgInZhbGlkVGFyZ2V0IiwgIm5ld1Ntb290aFNjcm9sbGluZyIsICJTbW9vdGhTY3JvbGxpbmdPcGVyYXRpb24iLCAib2xkU3RhdGUiLCAiU21vb3RoU2Nyb2xsaW5nVXBkYXRlIiwgImlzRG9uZSIsICJjcmVhdGVFYXNlT3V0Q3ViaWMiLCAiZnJvbSIsICJ0byIsICJkZWx0YSIsICJjb21wbGV0aW9uIiwgImVhc2VPdXRDdWJpYyIsICJjcmVhdGVDb21wb3NlZCIsICJjdXQiLCAiX1Ntb290aFNjcm9sbGluZ09wZXJhdGlvbiIsICJzdGFydFRpbWUiLCAiZHVyYXRpb24iLCAidmlld3BvcnRTaXplIiwgInN0b3AxIiwgInN0b3AyIiwgInN0YXRlIiwgIm5ld1Njcm9sbExlZnQiLCAibmV3U2Nyb2xsVG9wIiwgImVhc2VJbkN1YmljIiwgIlNjcm9sbGJhclZpc2liaWxpdHlDb250cm9sbGVyIiwgInZpc2libGVDbGFzc05hbWUiLCAiaW52aXNpYmxlQ2xhc3NOYW1lIiwgInJhd1Nob3VsZEJlVmlzaWJsZSIsICJzaG91bGRCZVZpc2libGUiLCAiaXNOZWVkZWQiLCAid2l0aEZhZGVBd2F5IiwgIlBPSU5URVJfRFJBR19SRVNFVF9ESVNUQU5DRSIsICJBYnN0cmFjdFNjcm9sbGJhciIsICJhcnJvdyIsICJ2aXNpYmxlU2l6ZSIsICJlbGVtZW50U2Nyb2xsU2l6ZSIsICJlbGVtZW50U2Nyb2xsUG9zaXRpb24iLCAiZG9tVG9wIiwgInNsaWRlclN0YXJ0IiwgInNsaWRlclN0b3AiLCAicG9pbnRlclBvcyIsICJvZmZzZXRYIiwgIm9mZnNldFkiLCAiZG9tTm9kZVBvc2l0aW9uIiwgIm9mZnNldCIsICJpbml0aWFsUG9pbnRlclBvc2l0aW9uIiwgImluaXRpYWxQb2ludGVyT3J0aG9nb25hbFBvc2l0aW9uIiwgImluaXRpYWxTY3JvbGxiYXJTdGF0ZSIsICJwb2ludGVyT3J0aG9nb25hbFBvc2l0aW9uIiwgInBvaW50ZXJPcnRob2dvbmFsRGVsdGEiLCAiaXNXaW5kb3dzIiwgInBvaW50ZXJEZWx0YSIsICJfZGVzaXJlZFNjcm9sbFBvc2l0aW9uIiwgImRlc2lyZWRTY3JvbGxQb3NpdGlvbiIsICJzY3JvbGxiYXJTaXplIiwgIlNjcm9sbGJhclN0YXRlIiwgIl9TY3JvbGxiYXJTdGF0ZSIsICJhcnJvd1NpemUiLCAib3Bwb3NpdGVTY3JvbGxiYXJTaXplIiwgInNjcm9sbFNpemUiLCAiaVZpc2libGVTaXplIiwgImlTY3JvbGxTaXplIiwgImlTY3JvbGxQb3NpdGlvbiIsICJjb21wdXRlZEF2YWlsYWJsZVNpemUiLCAiY29tcHV0ZWRSZXByZXNlbnRhYmxlU2l6ZSIsICJjb21wdXRlZElzTmVlZGVkIiwgImNvbXB1dGVkU2xpZGVyU2l6ZSIsICJjb21wdXRlZFNsaWRlclJhdGlvIiwgImNvbXB1dGVkU2xpZGVyUG9zaXRpb24iLCAiciIsICJkZXNpcmVkU2xpZGVyUG9zaXRpb24iLCAiY29ycmVjdGVkT2Zmc2V0IiwgIkhvcml6b250YWxTY3JvbGxiYXIiLCAic2Nyb2xsYWJsZSIsICJob3N0IiwgInNjcm9sbERpbWVuc2lvbnMiLCAic2xpZGVyU2l6ZSIsICJzbGlkZXJQb3NpdGlvbiIsICJsYXJnZVNpemUiLCAic21hbGxTaXplIiwgInNpemUiLCAiVmVydGljYWxTY3JvbGxiYXIiLCAiSElERV9USU1FT1VUIiwgIlNDUk9MTF9XSEVFTF9TRU5TSVRJVklUWSIsICJTQ1JPTExfV0hFRUxfU01PT1RIX1NDUk9MTF9FTkFCTEVEIiwgIk1vdXNlV2hlZWxDbGFzc2lmaWVySXRlbSIsICJfTW91c2VXaGVlbENsYXNzaWZpZXIiLCAicmVtYWluaW5nSW5mbHVlbmNlIiwgInNjb3JlIiwgIml0ZXJhdGlvbiIsICJpbmRleCIsICJpbmZsdWVuY2UiLCAiaXNDaHJvbWUiLCAicGFnZVpvb21GYWN0b3IiLCAiZ2V0Wm9vbUZhY3RvciIsICJwcmV2aW91c0l0ZW0iLCAiaXRlbSIsICJhYnNEZWx0YVgiLCAiYWJzRGVsdGFZIiwgImFic1ByZXZpb3VzRGVsdGFYIiwgImFic1ByZXZpb3VzRGVsdGFZIiwgIm1pbkRlbHRhWCIsICJtaW5EZWx0YVkiLCAibWF4RGVsdGFYIiwgIm1heERlbHRhWSIsICJNb3VzZVdoZWVsQ2xhc3NpZmllciIsICJBYnN0cmFjdFNjcm9sbGFibGVFbGVtZW50IiwgInJlc29sdmVPcHRpb25zIiwgInNjcm9sbGJhckhvc3QiLCAibW91c2VXaGVlbEV2ZW50IiwgImRpc3Bvc2UiLCAibmV3Q2xhc3NOYW1lIiwgImlzTWFjaW50b3NoIiwgIm5ld09wdGlvbnMiLCAiU3RhbmRhcmRXaGVlbEV2ZW50IiwgInNob3VsZExpc3RlbiIsICJvbk1vdXNlV2hlZWwiLCAiY2xhc3NpZmllciIsICJkaWRTY3JvbGwiLCAic2hpZnRDb252ZXJ0IiwgImZ1dHVyZVNjcm9sbFBvc2l0aW9uIiwgImRlbHRhU2Nyb2xsVG9wIiwgImRlc2lyZWRTY3JvbGxUb3AiLCAiZGVsdGFTY3JvbGxMZWZ0IiwgImRlc2lyZWRTY3JvbGxMZWZ0IiwgImNvbnN1bWVNb3VzZVdoZWVsIiwgInNjcm9sbFN0YXRlIiwgImVuYWJsZVRvcCIsICJlbmFibGVMZWZ0IiwgImxlZnRDbGFzc05hbWUiLCAidG9wQ2xhc3NOYW1lIiwgInRvcExlZnRDbGFzc05hbWUiLCAiU21vb3RoU2Nyb2xsYWJsZUVsZW1lbnQiLCAiVmlld3BvcnQiLCAic2NyZWVuRWxlbWVudCIsICJfYnVmZmVyU2VydmljZSIsICJjb3JlQnJvd3NlclNlcnZpY2UiLCAiY29yZU1vdXNlU2VydmljZSIsICJ0aGVtZVNlcnZpY2UiLCAiX29wdGlvbnNTZXJ2aWNlIiwgIl9yZW5kZXJTZXJ2aWNlIiwgImNiIiwgImRpc3AiLCAicG9zIiwgImxpbmUiLCAiZGlzYWJsZVNtb290aFNjcm9sbCIsICJ5ZGlzcCIsICJuZXdSb3ciLCAiZGlmZiIsICJfX2RlY29yYXRlUGFyYW0iLCAiSUJ1ZmZlclNlcnZpY2UiLCAiSUNvcmVCcm93c2VyU2VydmljZSIsICJJQ29yZU1vdXNlU2VydmljZSIsICJJVGhlbWVTZXJ2aWNlIiwgIklPcHRpb25zU2VydmljZSIsICJJUmVuZGVyU2VydmljZSIsICJCdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXIiLCAiX3NjcmVlbkVsZW1lbnQiLCAiX2NvcmVCcm93c2VyU2VydmljZSIsICJfZGVjb3JhdGlvblNlcnZpY2UiLCAiZGVjb3JhdGlvbiIsICJJRGVjb3JhdGlvblNlcnZpY2UiLCAiQ29sb3Jab25lU3RvcmUiLCAieiIsICJwYWRkaW5nIiwgInpvbmUiLCAiZHJhd0hlaWdodCIsICJkcmF3V2lkdGgiLCAiZHJhd1giLCAiT3ZlcnZpZXdSdWxlclJlbmRlcmVyIiwgIl92aWV3cG9ydEVsZW1lbnQiLCAiX3RoZW1lU2VydmljZSIsICJjdHgiLCAib3V0ZXJXaWR0aCIsICJpbm5lcldpZHRoIiwgInBpeGVsc1BlckxpbmUiLCAibm9uRnVsbEhlaWdodCIsICJ6b25lcyIsICJ1cGRhdGVDYW52YXNEaW1lbnNpb25zIiwgInVwZGF0ZUFuY2hvciIsICJDMCIsICJDMSIsICJDMV9FU0NBUEVEIiwgIkNvbXBvc2l0aW9uSGVscGVyIiwgIl90ZXh0YXJlYSIsICJfY29tcG9zaXRpb25WaWV3IiwgIl9jb3JlU2VydmljZSIsICJldiIsICJ3YWl0Rm9yUHJvcGFnYXRpb24iLCAiY3VycmVudENvbXBvc2l0aW9uUG9zaXRpb24iLCAiaW5wdXQiLCAib2xkVmFsdWUiLCAibmV3VmFsdWUiLCAiZG9udFJlY3Vyc2UiLCAiY3Vyc29yWCIsICJjZWxsSGVpZ2h0IiwgImN1cnNvclRvcCIsICJjdXJzb3JMZWZ0IiwgImNvbXBvc2l0aW9uVmlld0JvdW5kcyIsICJJQ29yZVNlcnZpY2UiLCAiJHIiLCAiJGciLCAiJGIiLCAiJGEiLCAiTlVMTF9DT0xPUiIsICJjaGFubmVscyIsICJ0b0NzcyIsICJnIiwgInRvUGFkZGVkSGV4IiwgInRvUmdiYSIsICJ0b0NvbG9yIiwgImJsZW5kIiwgImJnIiwgImZnIiwgImZnUiIsICJmZ0ciLCAiZmdCIiwgImJnUiIsICJiZ0ciLCAiYmdCIiwgImNzcyIsICJyZ2JhIiwgImlzT3BhcXVlIiwgImVuc3VyZUNvbnRyYXN0UmF0aW8iLCAicmF0aW8iLCAib3BhcXVlIiwgInJnYmFDb2xvciIsICJvcGFjaXR5IiwgIm11bHRpcGx5T3BhY2l0eSIsICJmYWN0b3IiLCAidG9Db2xvclJHQiIsICIkY3R4IiwgIiRsaXRtdXNDb2xvciIsICJjYW52YXMiLCAicmdiYU1hdGNoIiwgInJnYiIsICJyZWxhdGl2ZUx1bWluYW5jZSIsICJyZWxhdGl2ZUx1bWluYW5jZTIiLCAicnMiLCAiZ3MiLCAiYnMiLCAicnIiLCAicmciLCAicmIiLCAiYmdSZ2JhIiwgImZnUmdiYSIsICJiZ0wiLCAiZmdMIiwgImNvbnRyYXN0UmF0aW8iLCAicmVzdWx0QSIsICJyZWR1Y2VMdW1pbmFuY2UiLCAicmVzdWx0QVJhdGlvIiwgInJlc3VsdEIiLCAiaW5jcmVhc2VMdW1pbmFuY2UiLCAicmVzdWx0QlJhdGlvIiwgImNyIiwgInRvQ2hhbm5lbHMiLCAiYyIsICJzIiwgImwxIiwgImwyIiwgIkpvaW5lZENlbGxEYXRhIiwgIkF0dHJpYnV0ZURhdGEiLCAiZmlyc3RDZWxsIiwgImNoYXJzIiwgIkNoYXJhY3RlckpvaW5lclNlcnZpY2UiLCAiQ2VsbERhdGEiLCAiaGFuZGxlciIsICJqb2luZXIiLCAiam9pbmVySWQiLCAicm93IiwgInJhbmdlcyIsICJsaW5lU3RyIiwgInJhbmdlU3RhcnRDb2x1bW4iLCAiY3VycmVudFN0cmluZ0luZGV4IiwgInJhbmdlU3RhcnRTdHJpbmdJbmRleCIsICJyYW5nZUF0dHJGRyIsICJyYW5nZUF0dHJCRyIsICJqb2luZWRSYW5nZXMiLCAiV0hJVEVTUEFDRV9DRUxMX0NIQVIiLCAic3RhcnRJbmRleCIsICJlbmRJbmRleCIsICJsaW5lRGF0YSIsICJzdGFydENvbCIsICJ0ZXh0IiwgImFsbEpvaW5lZFJhbmdlcyIsICJlcnJvciIsICJqb2luZXJSYW5nZXMiLCAiaiIsICJjdXJyZW50UmFuZ2VJbmRleCIsICJjdXJyZW50UmFuZ2VTdGFydGVkIiwgImN1cnJlbnRSYW5nZSIsICJsZW5ndGgiLCAibmV3UmFuZ2UiLCAiaW5SYW5nZSIsICJyYW5nZSIsICJpc1Bvd2VybGluZUdseXBoIiwgImNvZGVwb2ludCIsICJpc0JveE9yQmxvY2tHbHlwaCIsICJ0cmVhdEdseXBoQXNCYWNrZ3JvdW5kQ29sb3IiLCAiY3JlYXRlUmVuZGVyRGltZW5zaW9ucyIsICJjcmVhdGVEaW1lbnNpb24iLCAiRG9tUmVuZGVyZXJSb3dGYWN0b3J5IiwgIl9kb2N1bWVudCIsICJfY2hhcmFjdGVySm9pbmVyU2VydmljZSIsICJzdGFydCIsICJlbmQiLCAiY29sdW1uU2VsZWN0TW9kZSIsICJpc0N1cnNvclJvdyIsICJjdXJzb3JTdHlsZSIsICJjdXJzb3JJbmFjdGl2ZVN0eWxlIiwgImN1cnNvckJsaW5rIiwgImNlbGxXaWR0aCIsICJ3aWR0aENhY2hlIiwgImxpbmtTdGFydCIsICJsaW5rRW5kIiwgImVsZW1lbnRzIiwgImNvbG9ycyIsICJsaW5lTGVuZ3RoIiwgImNoYXJFbGVtZW50IiwgImNlbGxBbW91bnQiLCAib2xkQmciLCAib2xkRmciLCAib2xkRXh0IiwgIm9sZExpbmtIb3ZlciIsICJvbGRTcGFjaW5nIiwgIm9sZElzSW5TZWxlY3Rpb24iLCAic3BhY2luZyIsICJza2lwSm9pbmVkQ2hlY2tVbnRpbFgiLCAiY2xhc3NlcyIsICJoYXNIb3ZlciIsICJpc0pvaW5lZCIsICJpc1ZhbGlkSm9pblJhbmdlIiwgImxhc3RDaGFyWCIsICJjZWxsIiwgImZpcnN0U2VsZWN0aW9uU3RhdGUiLCAiaXNJblNlbGVjdGlvbiIsICJpc0N1cnNvckNlbGwiLCAiaXNMaW5rSG92ZXIiLCAiaXNEZWNvcmF0ZWQiLCAiZmdDb2xvck1vZGUiLCAiYmdDb2xvck1vZGUiLCAiaXNJbnZlcnNlIiwgInRlbXAiLCAidGVtcDIiLCAiYmdPdmVycmlkZSIsICJmZ092ZXJyaWRlIiwgImlzVG9wIiwgInJlc29sdmVkQmciLCAicGFkU3RhcnQiLCAiY2FjaGUiLCAiYWRqdXN0ZWRDb2xvciIsICJzdHlsZSIsICJJQ2hhcmFjdGVySm9pbmVyU2VydmljZSIsICJwYWRDaGFyIiwgIldpZHRoQ2FjaGUiLCAiX2hlbHBlckNvbnRhaW5lciIsICJyZWd1bGFyIiwgImJvbGQiLCAiaXRhbGljIiwgImJvbGRJdGFsaWMiLCAiZm9udCIsICJ3ZWlnaHQiLCAid2VpZ2h0Qm9sZCIsICJjcCIsICJ2YXJpYW50IiwgImVsIiwgIlNlbGVjdGlvblJlbmRlck1vZGVsIiwgInRlcm1pbmFsIiwgInZpZXdwb3J0WSIsICJ2aWV3cG9ydFN0YXJ0Um93IiwgInZpZXdwb3J0RW5kUm93IiwgInZpZXdwb3J0Q2FwcGVkU3RhcnRSb3ciLCAidmlld3BvcnRDYXBwZWRFbmRSb3ciLCAiY3JlYXRlU2VsZWN0aW9uUmVuZGVyTW9kZWwiLCAiVEVSTUlOQUxfQ0xBU1NfUFJFRklYIiwgIlJPV19DT05UQUlORVJfQ0xBU1MiLCAiRkdfQ0xBU1NfUFJFRklYIiwgIkJHX0NMQVNTX1BSRUZJWCIsICJGT0NVU19DTEFTUyIsICJTRUxFQ1RJT05fQ0xBU1MiLCAibmV4dFRlcm1pbmFsSWQiLCAiRG9tUmVuZGVyZXIiLCAiX3Rlcm1pbmFsIiwgIl9lbGVtZW50IiwgIl9saW5raWZpZXIyIiwgImluc3RhbnRpYXRpb25TZXJ2aWNlIiwgIl9jaGFyU2l6ZVNlcnZpY2UiLCAiZHByIiwgInN0eWxlcyIsICJibGlua0FuaW1hdGlvblVuZGVybGluZUlkIiwgImJsaW5rQW5pbWF0aW9uQmFySWQiLCAiYmxpbmtBbmltYXRpb25CbG9ja0lkIiwgImNvbHMiLCAicm93cyIsICJkb2N1bWVudEZyYWdtZW50IiwgImlzWEZsaXBwZWQiLCAiZW5kQ29sIiwgIm1pZGRsZVJvd3NDb3VudCIsICJjb2xTdGFydCIsICJjb2xFbmQiLCAicm93Q291bnQiLCAiYnVmZmVyIiwgImN1cnNvckFic29sdXRlWSIsICJyb3dFbGVtZW50IiwgIngyIiwgInkyIiwgImVuYWJsZWQiLCAibWF4WSIsICJidWZmZXJsaW5lIiwgIklJbnN0YW50aWF0aW9uU2VydmljZSIsICJJQ2hhclNpemVTZXJ2aWNlIiwgIkNoYXJTaXplU2VydmljZSIsICJkb2N1bWVudCIsICJwYXJlbnRFbGVtZW50IiwgIlRleHRNZXRyaWNzTWVhc3VyZVN0cmF0ZWd5IiwgIkRvbU1lYXN1cmVTdHJhdGVneSIsICJCYXNlTWVhc3VyZVN0YXRlZ3kiLCAiX3BhcmVudEVsZW1lbnQiLCAibWV0cmljcyIsICJDb3JlQnJvd3NlclNlcnZpY2UiLCAiX3dpbmRvdyIsICJtYWluRG9jdW1lbnQiLCAiU2NyZWVuRHByTW9uaXRvciIsICJ3IiwgIl9wYXJlbnRXaW5kb3ciLCAiTXV0YWJsZURpc3Bvc2FibGUiLCAicGFyZW50V2luZG93IiwgIkxpbmtQcm92aWRlclNlcnZpY2UiLCAibGlua1Byb3ZpZGVyIiwgInByb3ZpZGVySW5kZXgiLCAiZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQiLCAicmVjdCIsICJlbGVtZW50U3R5bGUiLCAibGVmdFBhZGRpbmciLCAidG9wUGFkZGluZyIsICJnZXRDb29yZHMiLCAiY29sQ291bnQiLCAiaGFzVmFsaWRDaGFyU2l6ZSIsICJjc3NDZWxsV2lkdGgiLCAiY3NzQ2VsbEhlaWdodCIsICJpc1NlbGVjdGlvbiIsICJjb29yZHMiLCAiTW91c2VTZXJ2aWNlIiwgIlJlbmRlckRlYm91bmNlciIsICJfcmVuZGVyQ2FsbGJhY2siLCAiY2FsbGJhY2siLCAicm93U3RhcnQiLCAicm93RW5kIiwgIlBsYXRmb3JtX2V4cG9ydHMiLCAiX19leHBvcnQiLCAiZ2V0U2FmYXJpVmVyc2lvbiIsICJpc0Nocm9tZU9TIiwgImlzRmlyZWZveCIsICJpc0lwYWQiLCAiaXNJcGhvbmUiLCAiaXNMZWdhY3lFZGdlIiwgImlzTGludXgiLCAiaXNNYWMiLCAiaXNOb2RlIiwgImlzU2FmYXJpIiwgInVzZXJBZ2VudCIsICJwbGF0Zm9ybSIsICJtYWpvclZlcnNpb24iLCAiVGFza1F1ZXVlIiwgInRhc2siLCAiZGVhZGxpbmUiLCAidGFza0R1cmF0aW9uIiwgImxvbmdlc3RUYXNrIiwgImxhc3REZWFkbGluZVJlbWFpbmluZyIsICJkZWFkbGluZVJlbWFpbmluZyIsICJQcmlvcml0eVRhc2tRdWV1ZSIsICJpZGVudGlmaWVyIiwgIklkbGVUYXNrUXVldWVJbnRlcm5hbCIsICJJZGxlVGFza1F1ZXVlIiwgIkRlYm91bmNlZElkbGVUYXNrIiwgIlJlbmRlclNlcnZpY2UiLCAiX3Jvd0NvdW50IiwgImRlY29yYXRpb25TZXJ2aWNlIiwgImJ1ZmZlclNlcnZpY2UiLCAiU3luY2hyb25pemVkT3V0cHV0SGFuZGxlciIsICJlbnRyeSIsICJpc1JlZHJhd09ubHkiLCAiYnVmZmVyZWQiLCAicmVuZGVyZXIiLCAiX29uVGltZW91dCIsICJtb3ZlVG9DZWxsU2VxdWVuY2UiLCAidGFyZ2V0WCIsICJ0YXJnZXRZIiwgImFwcGxpY2F0aW9uQ3Vyc29yIiwgInN0YXJ0WCIsICJzdGFydFkiLCAicmVzZXRTdGFydGluZ1JvdyIsICJtb3ZlVG9SZXF1ZXN0ZWRSb3ciLCAibW92ZVRvUmVxdWVzdGVkQ29sIiwgImRpcmVjdGlvbiIsICJyZXBlYXQiLCAic2VxdWVuY2UiLCAicm93RGlmZmVyZW5jZSIsICJjZWxsc1RvTW92ZSIsICJjb2xzRnJvbVJvd0VuZCIsICJjb2xzRnJvbVJvd0JlZ2lubmluZyIsICJjdXJyWCIsICJidWZmZXJMaW5lIiwgIndyYXBwZWRSb3dzRm9yUm93IiwgInN0YXJ0Um93IiwgImVuZFJvdyIsICJyb3dzVG9Nb3ZlIiwgIndyYXBwZWRSb3dzQ291bnQiLCAidmVydGljYWxEaXJlY3Rpb24iLCAiaG9yaXpvbnRhbERpcmVjdGlvbiIsICJ3cmFwcGVkUm93cyIsICJjdXJyZW50Um93IiwgImxpbmVXcmFwcyIsICJmb3J3YXJkIiwgImN1cnJlbnRDb2wiLCAiYnVmZmVyU3RyIiwgIm1vZCIsICJjb3VudCIsICJzdHIiLCAicnB0IiwgIlNlbGVjdGlvbk1vZGVsIiwgInN0YXJ0UGx1c0xlbmd0aCIsICJhbW91bnQiLCAiZ2V0UmFuZ2VMZW5ndGgiLCAiYnVmZmVyQ29scyIsICJEUkFHX1NDUk9MTF9NQVhfVEhSRVNIT0xEIiwgIkRSQUdfU0NST0xMX01BWF9TUEVFRCIsICJEUkFHX1NDUk9MTF9JTlRFUlZBTCIsICJBTFRfQ0xJQ0tfTU9WRV9DVVJTT1JfVElNRSIsICJOT05fQlJFQUtJTkdfU1BBQ0VfQ0hBUiIsICJBTExfTk9OX0JSRUFLSU5HX1NQQUNFX1JFR0VYIiwgIlNlbGVjdGlvblNlcnZpY2UiLCAiX2xpbmtpZmllciIsICJfbW91c2VTZXJ2aWNlIiwgImxpbmVUZXh0IiwgInN0YXJ0Um93RW5kQ29sIiwgImlzTGludXhNb3VzZVNlbGVjdGlvbiIsICJhbGxvd1doaXRlc3BhY2VPbmx5U2VsZWN0aW9uIiwgInRlcm1pbmFsSGVpZ2h0IiwgInByZXZpb3VzU2VsZWN0aW9uRW5kIiwgInRpbWVFbGFwc2VkIiwgImNvb3JkaW5hdGVzIiwgImhhc1NlbGVjdGlvbiIsICJjaGFySW5kZXgiLCAiY29sIiwgImZvbGxvd1dyYXBwZWRMaW5lc0Fib3ZlIiwgImZvbGxvd1dyYXBwZWRMaW5lc0JlbG93IiwgImNoYXJPZmZzZXQiLCAibGVmdFdpZGVDaGFyQ291bnQiLCAicmlnaHRXaWRlQ2hhckNvdW50IiwgImxlZnRMb25nQ2hhck9mZnNldCIsICJyaWdodExvbmdDaGFyT2Zmc2V0IiwgInByZXZpb3VzQnVmZmVyTGluZSIsICJwcmV2aW91c0xpbmVXb3JkUG9zaXRpb24iLCAibmV4dEJ1ZmZlckxpbmUiLCAibmV4dExpbmVXb3JkUG9zaXRpb24iLCAid29yZFBvc2l0aW9uIiwgIndyYXBwZWRSYW5nZSIsICJJTW91c2VTZXJ2aWNlIiwgIlR3b0tleU1hcCIsICJmaXJzdCIsICJzZWNvbmQiLCAiQ29sb3JDb250cmFzdENhY2hlIiwgIkRFRkFVTFRfQU5TSV9DT0xPUlMiLCAidiIsICJERUZBVUxUX0ZPUkVHUk9VTkQiLCAiREVGQVVMVF9CQUNLR1JPVU5EIiwgIkRFRkFVTFRfQ1VSU09SIiwgIkRFRkFVTFRfQ1VSU09SX0FDQ0VOVCIsICJERUZBVUxUX1NFTEVDVElPTiIsICJERUZBVUxUX09WRVJWSUVXX1JVTEVSX0JPUkRFUiIsICJUaGVtZVNlcnZpY2UiLCAidGhlbWUiLCAicGFyc2VDb2xvciIsICJjb2xvckNvdW50IiwgInNsb3QiLCAiY3NzU3RyaW5nIiwgImZhbGxiYWNrIiwgIlNlcnZpY2VDb2xsZWN0aW9uIiwgImVudHJpZXMiLCAiaWQiLCAic2VydmljZSIsICJpbnN0YW5jZSIsICJJbnN0YW50aWF0aW9uU2VydmljZSIsICJjdG9yIiwgInNlcnZpY2VEZXBlbmRlbmNpZXMiLCAiZ2V0U2VydmljZURlcGVuZGVuY2llcyIsICJzZXJ2aWNlQXJncyIsICJkZXBlbmRlbmN5IiwgImZpcnN0U2VydmljZUFyZ1BvcyIsICJvcHRpb25zS2V5VG9Mb2dMZXZlbCIsICJMT0dfUFJFRklYIiwgIkxvZ1NlcnZpY2UiLCAidHJhY2VMb2dnZXIiLCAib3B0aW9uYWxQYXJhbXMiLCAibWVzc2FnZSIsICJDaXJjdWxhckxpc3QiLCAiX21heExlbmd0aCIsICJuZXdNYXhMZW5ndGgiLCAibmV3QXJyYXkiLCAibmV3TGVuZ3RoIiwgImRlbGV0ZUNvdW50IiwgIml0ZW1zIiwgImNvdW50VG9UcmltIiwgImV4cGFuZExpc3RCeSIsICJDRUxMX1NJWkUiLCAiREVGQVVMVF9BVFRSX0RBVEEiLCAiJHN0YXJ0SW5kZXgiLCAiQ0xFQU5VUF9USFJFU0hPTEQiLCAiQnVmZmVyTGluZSIsICJfQnVmZmVyTGluZSIsICJmaWxsQ2VsbERhdGEiLCAiaXNXcmFwcGVkIiwgIk5VTExfQ0VMTF9DSEFSIiwgImNvbnRlbnQiLCAic3RyaW5nRnJvbUNvZGVQb2ludCIsICJjb2RlUG9pbnQiLCAibiIsICJyZXNwZWN0UHJvdGVjdCIsICJ1aW50MzJDZWxscyIsICJrZXlzIiwgImV4dEtleXMiLCAibmV3TGluZSIsICJzcmMiLCAic3JjQ29sIiwgImRlc3RDb2wiLCAiYXBwbHlJblJldmVyc2UiLCAic3JjRGF0YSIsICJzcmNDb21iaW5lZEtleXMiLCAidHJpbVJpZ2h0IiwgIm91dENvbHVtbnMiLCAicmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSIsICJsaW5lcyIsICJvbGRDb2xzIiwgIm5ld0NvbHMiLCAiYnVmZmVyQWJzb2x1dGVZIiwgIm51bGxDZWxsIiwgInJlZmxvd0N1cnNvckxpbmUiLCAidG9SZW1vdmUiLCAibmV4dExpbmUiLCAid3JhcHBlZExpbmVzIiwgImRlc3RMaW5lSW5kZXgiLCAiZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoIiwgInNyY0xpbmVJbmRleCIsICJzcmNUcmltbWVkVGluZUxlbmd0aCIsICJzcmNSZW1haW5pbmdDZWxscyIsICJkZXN0UmVtYWluaW5nQ2VsbHMiLCAiY2VsbHNUb0NvcHkiLCAiY291bnRUb1JlbW92ZSIsICJyZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQiLCAibGF5b3V0IiwgIm5leHRUb1JlbW92ZUluZGV4IiwgIm5leHRUb1JlbW92ZVN0YXJ0IiwgImNvdW50UmVtb3ZlZFNvRmFyIiwgInJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0IiwgIm5ld0xheW91dCIsICJuZXdMYXlvdXRMaW5lcyIsICJyZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMiLCAibmV3TGluZUxlbmd0aHMiLCAiY2VsbHNOZWVkZWQiLCAibCIsICJwIiwgInNyY0xpbmUiLCAiY2VsbHNBdmFpbGFibGUiLCAib2xkVHJpbW1lZExlbmd0aCIsICJlbmRzV2l0aFdpZGUiLCAiZW5kc0luTnVsbCIsICJmb2xsb3dpbmdMaW5lU3RhcnRzV2l0aFdpZGUiLCAiX01hcmtlciIsICJkaXNwb3NhYmxlIiwgIk1hcmtlciIsICJDSEFSU0VUUyIsICJERUZBVUxUX0NIQVJTRVQiLCAiTUFYX0JVRkZFUl9TSVpFIiwgIkJ1ZmZlciIsICJfaGFzU2Nyb2xsYmFjayIsICJhdHRyIiwgIkV4dGVuZGVkQXR0cnMiLCAicmVsYXRpdmVZIiwgImNvcnJlY3RCdWZmZXJMZW5ndGgiLCAiZmlsbEF0dHIiLCAibmV3Um93cyIsICJkaXJ0eU1lbW9yeUxpbmVzIiwgImFkZFRvWSIsICJhbW91bnRUb1RyaW0iLCAibm9ybWFsUnVuIiwgImNvdW50ZWQiLCAid2luZG93c1B0eSIsICJuZXdMYXlvdXRSZXN1bHQiLCAiY291bnRSZW1vdmVkIiwgInZpZXdwb3J0QWRqdXN0bWVudHMiLCAidG9JbnNlcnQiLCAiY291bnRUb0luc2VydCIsICJhYnNvbHV0ZVkiLCAibGFzdExpbmVMZW5ndGgiLCAiZGVzdExpbmVMZW5ndGhzIiwgImxpbmVzVG9BZGQiLCAidHJpbW1lZExpbmVzIiwgIm5ld0xpbmVzIiwgIndyYXBwZWRMaW5lc0luZGV4IiwgImluc2VydEV2ZW50cyIsICJvcmlnaW5hbExpbmVzIiwgIm9yaWdpbmFsTGluZXNMZW5ndGgiLCAib3JpZ2luYWxMaW5lSW5kZXgiLCAibmV4dFRvSW5zZXJ0SW5kZXgiLCAibmV4dFRvSW5zZXJ0IiwgImNvdW50SW5zZXJ0ZWRTb0ZhciIsICJuZXh0SSIsICJpbnNlcnRDb3VudEVtaXR0ZWQiLCAibGluZUluZGV4IiwgImxhc3QiLCAibWFya2VyIiwgIkJ1ZmZlclNldCIsICJNSU5JTVVNX0NPTFMiLCAiTUlOSU1VTV9ST1dTIiwgIkJ1ZmZlclNlcnZpY2UiLCAib3B0aW9uc1NlcnZpY2UiLCAiY29sc0NoYW5nZWQiLCAicm93c0NoYW5nZWQiLCAiZXJhc2VBdHRyIiwgInRvcFJvdyIsICJib3R0b21Sb3ciLCAid2lsbEJ1ZmZlckJlVHJpbW1lZCIsICJzY3JvbGxSZWdpb25IZWlnaHQiLCAic3VwcHJlc3NTY3JvbGxFdmVudCIsICJvbGRZZGlzcCIsICJERUZBVUxUX09QVElPTlMiLCAiRk9OVF9XRUlHSFRfT1BUSU9OUyIsICJPcHRpb25zU2VydmljZSIsICJkZWZhdWx0T3B0aW9ucyIsICJldmVudEtleSIsICJnZXR0ZXIiLCAicHJvcE5hbWUiLCAic2V0dGVyIiwgImRlc2MiLCAiaXNDdXJzb3JTdHlsZSIsICJjbG9uZSIsICJ2YWwiLCAiY2xvbmVkT2JqZWN0IiwgIkRFRkFVTFRfTU9ERVMiLCAiREVGQVVMVF9ERUNfUFJJVkFURV9NT0RFUyIsICJDb3JlU2VydmljZSIsICJfbG9nU2VydmljZSIsICJ3YXNVc2VySW5wdXQiLCAiSUxvZ1NlcnZpY2UiLCAiREVGQVVMVF9QUk9UT0NPTFMiLCAiZXZlbnRDb2RlIiwgImlzU0dSIiwgImNvZGUiLCAiUyIsICJERUZBVUxUX0VOQ09ESU5HUyIsICJwYXJhbXMiLCAiZmluYWwiLCAiQ29yZU1vdXNlU2VydmljZSIsICJwcm90b2NvbCIsICJlbmNvZGluZyIsICJ0YXJnZXRXaGVlbEV2ZW50UGl4ZWxzIiwgInJlcG9ydCIsICJldmVudHMiLCAiZTEiLCAiZTIiLCAicGl4ZWxzIiwgIkJNUF9DT01CSU5JTkciLCAiSElHSF9DT01CSU5JTkciLCAidGFibGUiLCAiYmlzZWFyY2giLCAidWNzIiwgIm1pbiIsICJtYXgiLCAibWlkIiwgIlVuaWNvZGVWNiIsICJudW0iLCAicHJlY2VkaW5nIiwgInNob3VsZEpvaW4iLCAib2xkV2lkdGgiLCAiVW5pY29kZVNlcnZpY2UiLCAiX1VuaWNvZGVTZXJ2aWNlIiwgImRlZmF1bHRQcm92aWRlciIsICJ2ZXJzaW9uIiwgInByb3ZpZGVyIiwgInByZWNlZGluZ0luZm8iLCAiY3VycmVudEluZm8iLCAiY2hXaWR0aCIsICJDaGFyc2V0U2VydmljZSIsICJjaGFyc2V0IiwgInVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlIiwgImxhc3RDaGFyIiwgIk1BWF9WQUxVRSIsICJNQVhfU1VCUEFSQU1TIiwgIlBhcmFtcyIsICJfUGFyYW1zIiwgIm1heExlbmd0aCIsICJtYXhTdWJQYXJhbXNMZW5ndGgiLCAidmFsdWVzIiwgImsiLCAibmV3UGFyYW1zIiwgInJlcyIsICJpZHgiLCAic3RvcmUiLCAiY3VyIiwgIkVNUFRZX0hBTkRMRVJTIiwgIk9zY1BhcnNlciIsICJpZGVudCIsICJoYW5kbGVyTGlzdCIsICJoYW5kbGVySW5kZXgiLCAidXRmMzJUb1N0cmluZyIsICJzdWNjZXNzIiwgInByb21pc2VSZXN1bHQiLCAiaGFuZGxlclJlc3VsdCIsICJmYWxsVGhyb3VnaCIsICJPc2NIYW5kbGVyIiwgIl9oYW5kbGVyIiwgInJldCIsICJEY3NQYXJzZXIiLCAiRU1QVFlfUEFSQU1TIiwgIkRjc0hhbmRsZXIiLCAiVHJhbnNpdGlvblRhYmxlIiwgImFjdGlvbiIsICJuZXh0IiwgImNvZGVzIiwgIk5PTl9BU0NJSV9QUklOVEFCTEUiLCAiVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSIsICJibHVlcHJpbnQiLCAidW51c2VkIiwgIlBSSU5UQUJMRVMiLCAiRVhFQ1VUQUJMRVMiLCAic3RhdGVzIiwgIkVzY2FwZVNlcXVlbmNlUGFyc2VyIiwgIl90cmFuc2l0aW9ucyIsICJmaW5hbFJhbmdlIiwgImludGVybWVkaWF0ZSIsICJmaW5hbENvZGUiLCAiZmxhZyIsICJoYW5kbGVycyIsICJoYW5kbGVyUG9zIiwgInRyYW5zaXRpb24iLCAiY2h1bmtQb3MiLCAiaGFuZGxlcnNFc2MiLCAiamoiLCAiUkdCX1JFWCIsICJIQVNIX1JFWCIsICJsb3ciLCAibSIsICJiYXNlIiwgImFkdiIsICJwYWQiLCAiYml0cyIsICJzMiIsICJ0b1JnYlN0cmluZyIsICJHTEVWRUwiLCAiTUFYX1BBUlNFQlVGRkVSX0xFTkdUSCIsICJTVEFDS19MSU1JVCIsICJwYXJhbVRvV2luZG93T3B0aW9uIiwgIlNMT1dfQVNZTkNfTElNSVQiLCAiJHRlbXAiLCAiSW5wdXRIYW5kbGVyIiwgIl9jaGFyc2V0U2VydmljZSIsICJfb3NjTGlua1NlcnZpY2UiLCAiX2NvcmVNb3VzZVNlcnZpY2UiLCAiX3VuaWNvZGVTZXJ2aWNlIiwgIl9wYXJzZXIiLCAiU3RyaW5nVG9VdGYzMiIsICJVdGY4VG9VdGYzMiIsICJEaXJ0eVJvd1RyYWNrZXIiLCAicGF5bG9hZCIsICJjdXJzb3JTdGFydFgiLCAiY3Vyc29yU3RhcnRZIiwgImRlY29kZWRMZW5ndGgiLCAicmVqIiwgImVyciIsICJ3YXNQYXVzZWQiLCAidmlld3BvcnRFbmQiLCAidmlld3BvcnRTdGFydCIsICJzY3JlZW5SZWFkZXJNb2RlIiwgIndyYXBhcm91bmRNb2RlIiwgImluc2VydE1vZGUiLCAiY3VyQXR0ciIsICJidWZmZXJSb3ciLCAicHJlY2VkaW5nSm9pblN0YXRlIiwgImNoIiwgIm9sZFJvdyIsICJvbGRDb2wiLCAib3JpZ2luYWxYIiwgIm1heENvbCIsICJkaWZmVG9Ub3AiLCAiZGlmZlRvQm90dG9tIiwgInBhcmFtIiwgImNsZWFyV3JhcCIsICJzY3JvbGxCYWNrU2l6ZSIsICJzY3JvbGxCb3R0b21Sb3dzT2Zmc2V0IiwgInNjcm9sbEJvdHRvbUFic29sdXRlIiwgImpvaW5TdGF0ZSIsICJpZGF0YSIsICJpdGV4dCIsICJ0bGVuZ3RoIiwgInRlcm0iLCAiYW5zaSIsICJWIiwgImRtIiwgIm1vdXNlUHJvdG9jb2wiLCAibW91c2VFbmNvZGluZyIsICJjcyIsICJidWZmZXJzIiwgImFjdGl2ZSIsICJhbHQiLCAiZiIsICJiMnYiLCAibW9kZSIsICJjMSIsICJjMiIsICJjMyIsICJhY2N1IiwgImNTcGFjZSIsICJhZHZhbmNlIiwgInN1YnBhcmFtcyIsICJpc0JsaW5raW5nIiwgInNsb3RzIiwgInNwZWMiLCAiaXNWYWxpZENvbG9ySW5kZXgiLCAidXJpIiwgInBhcnNlZFBhcmFtcyIsICJpZFBhcmFtSW5kZXgiLCAiY29sbGVjdEFuZEZsYWciLCAibGV2ZWwiLCAieU9mZnNldCIsICJTVFlMRVMiLCAieTEiLCAiRElTQ0FSRF9XQVRFUk1BUksiLCAiV1JJVEVfVElNRU9VVF9NUyIsICJXUklURV9CVUZGRVJfTEVOR1RIX1RIUkVTSE9MRCIsICJXcml0ZUJ1ZmZlciIsICJfYWN0aW9uIiwgIm1heFN1YnNlcXVlbnRDYWxscyIsICJjaHVuayIsICJsYXN0VGltZSIsICJjb250aW51YXRpb24iLCAiT3NjTGlua1NlcnZpY2UiLCAiY2FzdERhdGEiLCAibGlua0lkIiwgImxpbmtEYXRhIiwgImhhc1dyaXRlU3luY1dhcm5IYXBwZW5lZCIsICJDb3JlVGVybWluYWwiLCAiSVVuaWNvZGVTZXJ2aWNlIiwgIklDaGFyc2V0U2VydmljZSIsICJJT3NjTGlua1NlcnZpY2UiLCAicGFnZUNvdW50IiwgInNjcm9sbEFtb3VudCIsICJLRVlDT0RFX0tFWV9NQVBQSU5HUyIsICJldmFsdWF0ZUtleWJvYXJkRXZlbnQiLCAiYXBwbGljYXRpb25DdXJzb3JNb2RlIiwgIm1hY09wdGlvbklzTWV0YSIsICJtb2RpZmllcnMiLCAia2V5Q29kZSIsICJrZXlTdHJpbmciLCAiU29ydGVkTGlzdCIsICJfZ2V0S2V5IiwgInNvcnRlZEFkZGVkVmFsdWVzIiwgInNvcnRlZEFkZGVkVmFsdWVzSW5kZXgiLCAiYXJyYXlJbmRleCIsICJuZXdBcnJheUluZGV4IiwgInNvcnRlZERlbGV0ZWRJbmRpY2VzIiwgInNvcnRlZERlbGV0ZWRJbmRpY2VzSW5kZXgiLCAibWlkS2V5IiwgIiR4bWluIiwgIiR4bWF4IiwgIkRlY29yYXRpb25TZXJ2aWNlIiwgIkRlY29yYXRpb24iLCAibWFya2VyRGlzcG9zZSIsICJsYXllciIsICJ4bWluIiwgInhtYXgiLCAiUkVOREVSX0RFQk9VTkNFX1RIUkVTSE9MRF9NUyIsICJUaW1lQmFzZWREZWJvdW5jZXIiLCAiX2RlYm91bmNlVGhyZXNob2xkTVMiLCAicmVmcmVzaFJlcXVlc3RUaW1lIiwgImVsYXBzZWQiLCAid2FpdFBlcmlvZEJlZm9yZVRyYWlsaW5nUmVmcmVzaCIsICJNQVhfUk9XU19UT19SRUFEIiwgIkRFQlVHIiwgIkFjY2Vzc2liaWxpdHlNYW5hZ2VyIiwgImRvYyIsICJjaGFyIiwgInNwYWNlQ291bnQiLCAidG9vTXVjaE91dHB1dCIsICJrZXlDaGFyIiwgInNldFNpemUiLCAiY29sdW1ucyIsICJwb3NJblNldCIsICJib3VuZGFyeUVsZW1lbnQiLCAiYmVmb3JlQm91bmRhcnlFbGVtZW50IiwgImxhc3RSb3dQb3MiLCAidG9wQm91bmRhcnlFbGVtZW50IiwgImJvdHRvbUJvdW5kYXJ5RWxlbWVudCIsICJuZXdFbGVtZW50IiwgInNlbGVjdGlvbiIsICJiZWdpbiIsICJsYXN0Um93RWxlbWVudCIsICJ0b1Jvd0NvbHVtbiIsICJub2RlIiwgImNvbHVtbiIsICJiZWdpblJvd0NvbHVtbiIsICJlbmRSb3dDb2x1bW4iLCAibGFzdENvbHVtbiIsICJ0YXJnZXRXaWR0aCIsICJMaW5raWZpZXIiLCAiX2xpbmtQcm92aWRlclNlcnZpY2UiLCAiY29tcG9zZWRQYXRoIiwgInVzZUxpbmVDYWNoZSIsICJyZXBseSIsICJsaW5rV2l0aFN0YXRlIiwgImxpbmtQcm92aWRlZCIsICJsaW5rcyIsICJsaW5rc1dpdGhTdGF0ZSIsICJsaW5rIiwgInJlcGxpZXMiLCAib2NjdXBpZWRDZWxscyIsICJwcm92aWRlclJlcGx5IiwgImVuZFgiLCAiaGFzTGlua0JlZm9yZSIsICJsaW5rQXRQb3NpdGlvbiIsICJjdXJyZW50TGluayIsICJsaW5rRXF1YWxzIiwgInNob3dFdmVudCIsICJzY3JvbGxPZmZzZXQiLCAibG93ZXIiLCAidXBwZXIiLCAiY3VycmVudCIsICJtb3VzZVNlcnZpY2UiLCAieDEiLCAiSUxpbmtQcm92aWRlclNlcnZpY2UiLCAiQ29yZUJyb3dzZXJUZXJtaW5hbCIsICJPc2NMaW5rUHJvdmlkZXIiLCAicmVxIiwgImFjYyIsICJjb2xvclJnYiIsICJuYXJyb3dlZEFjYyIsICJjdXJzb3JZIiwgImNvcHlIYW5kbGVyIiwgInBhc3RlSGFuZGxlcldyYXBwZXIiLCAiaGFuZGxlUGFzdGVFdmVudCIsICJyaWdodENsaWNrSGFuZGxlciIsICJtb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yIiwgInBhcmVudCIsICJmcmFnbWVudCIsICJ0ZXh0YXJlYSIsICJwcm9tcHRMYWJlbCIsICJsaW5raWZpZXIiLCAiSVNlbGVjdGlvblNlcnZpY2UiLCAic2VsZiIsICJzZW5kRXZlbnQiLCAiYnV0IiwgInJlcXVlc3RlZEV2ZW50cyIsICJldmVudExpc3RlbmVycyIsICJwYXN0ZSIsICJjdXN0b21LZXlFdmVudEhhbmRsZXIiLCAiY3VzdG9tV2hlZWxFdmVudEhhbmRsZXIiLCAiY3Vyc29yWU9mZnNldCIsICJkZWNvcmF0aW9uT3B0aW9ucyIsICJzaG91bGRJZ25vcmVDb21wb3NpdGlvbiIsICJzY3JvbGxDb3VudCIsICJicm93c2VyIiwgInRoaXJkTGV2ZWxLZXkiLCAid2FzTW9kaWZpZXJLZXlPbmx5RXZlbnQiLCAiY2FudmFzV2lkdGgiLCAiY2FudmFzSGVpZ2h0IiwgImZvcmNlIiwgIkFkZG9uTWFuYWdlciIsICJsb2FkZWRBZGRvbiIsICJCdWZmZXJMaW5lQXBpVmlldyIsICJfbGluZSIsICJzdGFydENvbHVtbiIsICJlbmRDb2x1bW4iLCAiQnVmZmVyQXBpVmlldyIsICJfYnVmZmVyIiwgIkJ1ZmZlck5hbWVzcGFjZUFwaSIsICJfY29yZSIsICJQYXJzZXJBcGkiLCAiVW5pY29kZUFwaSIsICJDT05TVFJVQ1RPUl9PTkxZX09QVElPTlMiLCAiJHZhbHVlIiwgIlRlcm1pbmFsIiwgIm1vdXNlVHJhY2tpbmdNb2RlIiwgImFkZG9uIiwgIk1JTklNVU1fQ09MUyIsICJNSU5JTVVNX1JPV1MiLCAiRml0QWRkb24iLCAidGVybWluYWwiLCAiZGltcyIsICJjb3JlIiwgInNjcm9sbGJhcldpZHRoIiwgInBhcmVudEVsZW1lbnRTdHlsZSIsICJwYXJlbnRFbGVtZW50SGVpZ2h0IiwgInBhcmVudEVsZW1lbnRXaWR0aCIsICJlbGVtZW50U3R5bGUiLCAiZWxlbWVudFBhZGRpbmciLCAiZWxlbWVudFBhZGRpbmdWZXIiLCAiZWxlbWVudFBhZGRpbmdIb3IiLCAiYXZhaWxhYmxlSGVpZ2h0IiwgImF2YWlsYWJsZVdpZHRoIiwgImoiXQp9Cg==
